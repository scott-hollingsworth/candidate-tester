(window.webpackJsonp=window.webpackJsonp||[]).push([[283],{1001:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),o=n(240),a=n(238),l=n(239);function i(e){var t,n=e.className,i=e.query,s=e.size;switch(i.toLowerCase()){case"bug":case"bugs":case"new_bugs":t=r.createElement(o.a,{size:s});break;case"vulnerability":case"vulnerabilities":case"new_vulnerabilities":t=r.createElement(a.a,{size:s});break;case"code_smell":case"code_smells":case"new_code_smells":t=r.createElement(l.a,{size:s})}return t?n?r.createElement("span",{className:n},t):t:null}},1004:function(e,t,n){"use strict";n.d(t,"e",function(){return a}),n.d(t,"f",function(){return l}),n.d(t,"g",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return c}),n.d(t,"a",function(){return u}),n.d(t,"b",function(){return p}),n.d(t,"h",function(){return f});var r=n(3),o=n(13);function a(e){return Object(r.getJSON)("/api/rules/app",e).catch(o.a)}function l(e){return Object(r.getJSON)("/api/rules/search",e).catch(o.a)}function i(e,t){var n=e.facets.find(function(e){return e.property===t});return n?n.values:[]}function s(e){return Object(r.getJSON)("/api/rules/show",e).catch(o.a)}function c(e){return Object(r.getJSON)("/api/rules/tags",e).then(function(e){return e.tags},o.a)}function u(e){return Object(r.postJSON)("/api/rules/create",e).then(function(e){return e.rule},function(e){return e&&e.response&&409===e.response.status?Promise.reject(e.response):Object(o.a)(e)})}function p(e){return Object(r.post)("/api/rules/delete",e).catch(o.a)}function f(e){return Object(r.postJSON)("/api/rules/update",e).then(function(e){return e.rule},o.a)}},1007:function(e,t,n){"use strict";function r(e){return'"'+e.replace(/"/g,'\\"')+'"'}n.d(t,"a",function(){return r})},1039:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(2),a=n(236),l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n};function s(e){var t=e.name,n=e.language,s=e.organization,c=e.children,u=i(e,["name","language","organization","children"]);return r.createElement(o.Link,l({to:Object(a.c)(t,n,s),activeClassName:"link-no-underline"},u),c)}},1041:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),o=n(6),a=n(25),l=n(1);function i(e){var t=e.className,n=e.tooltip,i=void 0===n||n,s=r.createElement("div",{className:o("outline-badge",t)},Object(l.l)("quality_profiles.built_in")),c=r.createElement("span",null,Object(l.l)("quality_profiles.built_in.description.1")," ",Object(l.l)("quality_profiles.built_in.description.2"));return r.createElement(a.a,{overlay:i?c:void 0},s)}},1174:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(2),a=n(4),l=n(1001),i=n(50),s=n(38),c=n(1);function u(e){var t=Object(s.x)({qprofile:e.qprofile,activation:"true",types:e.type},e.organization),n=Object(s.x)({qprofile:e.qprofile,activation:"false",types:e.type},e.organization),a=null;return null!=e.count&&null!=e.total&&(a=e.total-e.count),r.createElement("tr",null,r.createElement("td",null,r.createElement("span",null,r.createElement(l.a,{query:e.type,className:"little-spacer-right"}),Object(c.l)("issue.type",e.type,"plural"))),r.createElement("td",{className:"thin nowrap text-right"},null!=e.count&&r.createElement(o.Link,{to:t},Object(i.formatMeasure)(e.count,"SHORT_INT",null))),r.createElement("td",{className:"thin nowrap text-right"},null!=a&&(a>0?r.createElement(o.Link,{to:n,className:"small text-muted"},Object(i.formatMeasure)(a,"SHORT_INT",null)):r.createElement("span",{className:"note text-muted"},"0"))))}function p(e){var t=Object(s.x)({qprofile:e.qprofile,activation:"true"},e.organization),n=Object(s.x)({qprofile:e.qprofile,activation:"false"},e.organization),a=null;return null!=e.count&&null!=e.total&&(a=e.total-e.count),r.createElement("tr",null,r.createElement("td",null,r.createElement("strong",null,Object(c.l)("total"))),r.createElement("td",{className:"thin nowrap text-right"},null!=e.count&&r.createElement(o.Link,{to:t},r.createElement("strong",null,Object(i.formatMeasure)(e.count,"SHORT_INT",null)))),r.createElement("td",{className:"thin nowrap text-right"},null!=a&&(a>0?r.createElement(o.Link,{to:n,className:"small text-muted"},r.createElement("strong",null,Object(i.formatMeasure)(a,"SHORT_INT",null))):r.createElement("span",{className:"note text-muted"},"0"))))}var f=n(25);function d(e){return r.createElement("div",{className:"quality-profile-rules-deprecated clearfix"},r.createElement("span",{className:"pull-left"},Object(c.l)("quality_profiles.deprecated_rules"),r.createElement(f.a,{overlay:Object(c.l)("quality_profiles.deprecated_rules_description")},r.createElement("i",{className:"icon-help spacer-left"}))),r.createElement(o.Link,{className:"pull-right",to:Object(s.i)({qprofile:e.profile},e.organization)},e.activeDeprecatedRules))}function m(e){var t=Object(s.x)({qprofile:e.profile,activation:"false",compareToProfile:e.sonarway,languages:e.language},e.organization);return r.createElement("div",{className:"quality-profile-rules-sonarway-missing clearfix"},r.createElement("span",{className:"pull-left"},Object(c.l)("quality_profiles.sonarway_missing_rules"),r.createElement(f.a,{overlay:Object(c.l)("quality_profiles.sonarway_missing_rules_description")},r.createElement("i",{className:"icon-help spacer-left"}))),r.createElement(o.Link,{className:"pull-right",to:t},e.sonarWayMissingRules))}var h,g=n(1004),y=n(993),b=(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),O=["BUG","VULNERABILITY","CODE_SMELL"],v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={activatedTotal:null,activatedByType:Object(a.keyBy)(O.map(function(e){return{val:e,count:null}}),"val"),allByType:Object(a.keyBy)(O.map(function(e){return{val:e,count:null}}),"val"),compareToSonarWay:null,loading:!0,total:null},t}return b(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.loadRules()},t.prototype.componentDidUpdate=function(e){e.profile!==this.props.profile&&this.loadRules()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.loadProfile=function(){return this.props.profile.isBuiltIn?Promise.resolve(null):Object(y.s)({compareToSonarWay:!0,profile:this.props.profile.key})},t.prototype.loadAllRules=function(){return Object(g.f)({languages:this.props.profile.language,facets:"types",organization:this.props.organization||void 0,ps:1})},t.prototype.loadActivatedRules=function(){return Object(g.f)({activation:"true",facets:"types",organization:this.props.organization||void 0,ps:1,qprofile:this.props.profile.key})},t.prototype.loadRules=function(){var e=this;this.setState({loading:!0}),Promise.all([this.loadAllRules(),this.loadActivatedRules(),this.loadProfile()]).then(function(t){if(e.mounted){var n=t[0],r=t[1],o=t[2];e.setState({activatedTotal:r.total,allByType:Object(a.keyBy)(Object(g.g)(n,"types"),"val"),activatedByType:Object(a.keyBy)(Object(g.g)(r,"types"),"val"),compareToSonarWay:o&&o.compareToSonarWay,loading:!1,total:n.total})}},function(){e.mounted&&e.setState({loading:!1})})},t.prototype.getRulesCountForType=function(e){return this.state.activatedByType&&this.state.activatedByType[e]?this.state.activatedByType[e].count:null},t.prototype.getRulesTotalForType=function(e){return this.state.allByType&&this.state.allByType[e]?this.state.allByType[e].count:null},t.prototype.render=function(){var e=this,t=this.props,n=t.organization,a=t.profile,l=this.state.compareToSonarWay,i=Object(s.x)({qprofile:a.key,activation:"false"},n);return r.createElement("div",{className:"boxed-group quality-profile-rules"},r.createElement("div",{className:"quality-profile-rules-distribution"},r.createElement("table",{className:"data condensed"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,r.createElement("h2",null,Object(c.l)("rules"))),r.createElement("th",null,Object(c.l)("active")),r.createElement("th",null,Object(c.l)("inactive")))),r.createElement("tbody",null,r.createElement(p,{count:this.state.activatedTotal,organization:n,qprofile:a.key,total:this.state.total}),O.map(function(t){return r.createElement(u,{key:t,count:e.getRulesCountForType(t),organization:n,qprofile:a.key,total:e.getRulesTotalForType(t),type:t})}))),a.actions&&a.actions.edit&&!a.isBuiltIn&&r.createElement("div",{className:"text-right big-spacer-top"},r.createElement(o.Link,{to:i,className:"button js-activate-rules"},Object(c.l)("quality_profiles.activate_more")))),a.activeDeprecatedRuleCount>0&&r.createElement(d,{activeDeprecatedRules:a.activeDeprecatedRuleCount,organization:n,profile:a.key}),null!=l&&l.missingRuleCount>0&&r.createElement(m,{language:a.language,organization:n,profile:a.key,sonarway:l.profile,sonarWayMissingRules:l.missingRuleCount}))},t}(r.PureComponent),j=n(20),E=n(131),_=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={projects:[],selectedProjects:[]},t.handleSearch=function(e,n){return Object(y.r)({key:t.props.profile.key,organization:t.props.organization,pageSize:100,query:""!==e?e:void 0,selected:n}).then(function(e){t.setState({projects:e.results,selectedProjects:e.results.filter(function(e){return e.selected}).map(function(e){return e.key})})},function(){})},t.handleSelect=function(e){return Object(y.d)(t.props.profile.key,e).then(function(){t.setState(function(t){return{selectedProjects:t.selectedProjects.concat([e])}})})},t.handleUnselect=function(e){return Object(y.m)(t.props.profile.key,e).then(function(){t.setState(function(t){return{selectedProjects:Object(a.without)(t.selectedProjects,e)}})})},t.handleCloseClick=function(e){e.preventDefault(),t.props.onClose()},t.renderElement=function(e){var n=Object(a.find)(t.state.projects,{key:e});return void 0===n?e:n.name},t}return _(t,e),t.prototype.componentDidMount=function(){this.handleSearch("",E.a.Selected)},t.prototype.render=function(){var e=Object(c.l)("projects");return r.createElement(j.a,{contentLabel:e,onRequestClose:this.props.onClose},r.createElement("div",{className:"modal-head"},r.createElement("h2",null,e)),r.createElement("div",{className:"modal-body",id:"profile-projects"},r.createElement(E.b,{elements:this.state.projects.map(function(e){return e.key}),labelAll:Object(c.l)("quality_gates.projects.all"),labelSelected:Object(c.l)("quality_gates.projects.with"),labelUnselected:Object(c.l)("quality_gates.projects.without"),onSearch:this.handleSearch,onSelect:this.handleSelect,onUnselect:this.handleUnselect,renderElement:this.renderElement,selectedElements:this.state.selectedProjects})),r.createElement("div",{className:"modal-foot"},r.createElement("a",{href:"#",onClick:this.handleCloseClick},Object(c.l)("close"))))},t}(r.PureComponent),S=n(53),q=n(11),C=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={formOpen:!1,loading:!0,projects:null},t.handleChangeClick=function(){t.setState({formOpen:!0})},t.closeForm=function(){t.setState({formOpen:!1}),t.props.updateProfiles()},t}return C(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.loadProjects()},t.prototype.componentDidUpdate=function(e){e.profile!==this.props.profile&&this.loadProjects()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.loadProjects=function(){var e=this;if(this.props.profile.isDefault)this.setState({loading:!1});else{var t={key:this.props.profile.key};Object(y.r)(t).then(function(t){e.mounted&&e.setState({projects:t.results,more:t.more,loading:!1})},function(){})}},t.prototype.renderDefault=function(){return this.state.loading?r.createElement("i",{className:"spinner"}):r.createElement("div",null,r.createElement("span",{className:"badge spacer-right"},Object(c.l)("default")),Object(c.l)("quality_profiles.projects_for_default"))},t.prototype.renderProjects=function(){if(this.state.loading)return r.createElement("i",{className:"spinner"});var e=this.state.projects;return null==e?null:0===e.length?r.createElement("div",null,Object(c.l)("quality_profiles.no_projects_associated_to_profile")):r.createElement("ul",null,e.map(function(e){return r.createElement("li",{className:"spacer-top js-profile-project","data-key":e.key,key:e.uuid},r.createElement(o.Link,{className:"link-with-icon",to:{pathname:"/dashboard",query:{id:e.key}}},r.createElement(S.a,{qualifier:"TRK"})," ",r.createElement("span",null,e.name)))}))},t.prototype.render=function(){var e=this.props.profile;return r.createElement("div",{className:"boxed-group quality-profile-projects"},e.actions&&e.actions.associateProjects&&r.createElement("div",{className:"boxed-group-actions"},r.createElement(q.a,{className:"js-change-projects",onClick:this.handleChangeClick},Object(c.l)("quality_profiles.change_projects"))),r.createElement("header",{className:"boxed-group-header"},r.createElement("h2",null,Object(c.l)("projects"))),r.createElement("div",{className:"boxed-group-inner"},e.isDefault?this.renderDefault():this.renderProjects()),this.state.formOpen&&r.createElement(N,{onClose:this.closeForm,organization:this.props.organization,profile:e}))},t}(r.PureComponent),P=n(6),z=n(1039),w=n(1041),D=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n};function x(e){var t=e.displayLink,n=void 0===t||t,o=D(e,["displayLink"]),a=o.profile,l=o.className,i=o.extendsBuiltIn,s=25*o.depth;return r.createElement("tr",{className:l},r.createElement("td",null,r.createElement("div",{style:{paddingLeft:s}},n?r.createElement(z.a,{language:o.language,name:a.name,organization:o.organization},a.name):a.name,a.isBuiltIn&&r.createElement(w.a,{className:"spacer-left"}),i&&r.createElement(f.a,{overlay:Object(c.l)("quality_profiles.extends_built_in")},r.createElement("i",{className:"icon-help spacer-left"})))),r.createElement("td",null,Object(c.m)("quality_profile.x_active_rules",a.activeRuleCount)),r.createElement("td",null,null!=a.overridingRuleCount&&r.createElement("p",null,Object(c.m)("quality_profiles.x_overridden_rules",a.overridingRuleCount))))}var U=n(51),R=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={loading:!1,selected:null},t.handleSelectChange=function(e){t.setState({selected:e.value})},t.handleFormSubmit=function(e){e.preventDefault();var n=t.state.selected;null!=n&&(t.setState({loading:!0}),Object(y.g)(t.props.profile.key,n).then(t.props.onChange).catch(function(e){t.mounted&&t.setState({loading:!1}),t.props.onRequestFail(e)}))},t}return R(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props.profiles,t=[{label:Object(c.l)("none"),value:""}].concat(Object(a.sortBy)(e,"name").map(function(e){return{label:e.isBuiltIn?e.name+" ("+Object(c.l)("quality_profiles.built_in")+")":e.name,value:e.key}})),n=this.state.loading||null==this.state.selected||this.state.selected===this.props.profile.parentKey;return r.createElement(j.a,{contentLabel:Object(c.l)("quality_profiles.change_parent"),onRequestClose:this.props.onClose},r.createElement("form",{id:"change-profile-parent-form",onSubmit:this.handleFormSubmit},r.createElement("div",{className:"modal-head"},r.createElement("h2",null,Object(c.l)("quality_profiles.change_parent"))),r.createElement("div",{className:"modal-body"},r.createElement("div",{className:"modal-field"},r.createElement("label",{htmlFor:"change-profile-parent"},Object(c.l)("quality_profiles.parent")," ",r.createElement("em",{className:"mandatory"},"*")),r.createElement(U.c,{clearable:!1,name:"parentKey",onChange:this.handleSelectChange,options:t,value:null!=this.state.selected?this.state.selected:this.props.profile.parentKey||""}))),r.createElement("div",{className:"modal-foot"},this.state.loading&&r.createElement("i",{className:"spinner spacer-right"}),r.createElement(q.f,{disabled:n,id:"change-profile-parent-submit"},Object(c.l)("change_verb")),r.createElement(q.e,{id:"change-profile-parent-cancel",onClick:this.props.onClose},Object(c.l)("cancel")))))},t}(r.PureComponent),A=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={formOpen:!1,loading:!0},t.handleChangeParentClick=function(){t.setState({formOpen:!0})},t.closeForm=function(){t.setState({formOpen:!1})},t.handleParentChange=function(){t.props.updateProfiles(),t.closeForm()},t}return A(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.loadData()},t.prototype.componentDidUpdate=function(e){e.profile!==this.props.profile&&this.loadData()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.loadData=function(){var e=this;Object(y.q)(this.props.profile.key).then(function(t){if(e.mounted){var n=t.ancestors,r=t.children;e.setState({children:r,ancestors:n.reverse(),profile:t.profile,loading:!1})}},function(){e.mounted&&e.setState({loading:!1})})},t.prototype.render=function(){var e=this,t=this.props,n=t.profile,o=t.profiles,a=this.state.ancestors,l=!this.state.loading&&null!=a&&null!=this.state.children&&(a.length>0||this.state.children.length>0),i=P("js-inheritance-current",{selected:l}),s=null!=a&&a.some(function(e){return e.isBuiltIn});return r.createElement("div",{className:"boxed-group quality-profile-inheritance"},n.actions&&n.actions.edit&&!n.isBuiltIn&&r.createElement("div",{className:"boxed-group-actions"},r.createElement(q.a,{className:"pull-right js-change-parent",onClick:this.handleChangeParentClick},Object(c.l)("quality_profiles.change_parent"))),r.createElement("header",{className:"boxed-group-header"},r.createElement("h2",null,Object(c.l)("quality_profiles.profile_inheritance"))),r.createElement("div",{className:"boxed-group-inner"},this.state.loading?r.createElement("i",{className:"spinner"}):r.createElement("table",{className:"data zebra"},r.createElement("tbody",null,null!=a&&a.map(function(t,o){return r.createElement(x,{className:"js-inheritance-ancestor",depth:o,key:t.key,language:n.language,organization:e.props.organization,profile:t})}),null!=this.state.profile&&r.createElement(x,{className:i,depth:a?a.length:0,displayLink:!1,extendsBuiltIn:s,language:n.language,organization:this.props.organization,profile:this.state.profile}),null!=this.state.children&&this.state.children.map(function(t){return r.createElement(x,{className:"js-inheritance-child",depth:a?a.length+1:0,key:t.key,language:n.language,organization:e.props.organization,profile:t})})))),this.state.formOpen&&r.createElement(M,{onChange:this.handleParentChange,onClose:this.closeForm,onRequestFail:this.props.onRequestFail,profile:n,profiles:o.filter(function(e){return e!==n&&e.language===n.language})}))},t}(r.PureComponent),B=n(106),F=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),J=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return F(t,e),t.prototype.getExportUrl=function(e){var t=this.props,n=t.organization,r=t.profile,o={exporterKey:e.key,language:r.language,qualityProfile:r.name};return n&&Object.assign(o,{organization:n}),window.baseUrl+"/api/qualityprofiles/export?"+Object(B.stringify)(o)},t.prototype.render=function(){var e=this,t=this.props,n=t.exporters,o=t.profile,a=n.filter(function(e){return e.languages.includes(o.language)});return 0===a.length?null:r.createElement("div",{className:"boxed-group quality-profile-exporters"},r.createElement("h2",null,Object(c.l)("quality_profiles.exporters")),r.createElement("div",{className:"boxed-group-inner"},r.createElement("ul",null,a.map(function(t,n){return r.createElement("li",{key:t.key,"data-key":t.key,className:n>0?"spacer-top":void 0},r.createElement("a",{href:e.getExportUrl(t),target:"_blank"},t.name))}))))},t}(r.PureComponent),L=n(27),I=n(65),K=n(70),W=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={deleteModal:!1},t.handleDeleteClick=function(){t.setState({deleteModal:!0})},t.handleDeleteModalClose=function(){t.mounted&&t.setState({deleteModal:!1})},t.handleDelete=function(){var e=t.props,n=e.organization,r=e.profile,o=e.user;return Object(y.u)({language:r.language,login:o.login,organization:n,qualityProfile:r.name}).then(function(){t.handleDeleteModalClose(),t.props.onDelete(o)})},t.renderDeleteModal=function(e){return r.createElement("div",null,r.createElement("header",{className:"modal-head"},r.createElement("h2",null,Object(c.l)("users.remove"))),r.createElement("div",{className:"modal-body"},r.createElement(L.b,{defaultMessage:Object(c.l)("users.remove.confirmation"),id:"users.remove.confirmation",values:{user:r.createElement("strong",null,t.props.user.name)}})),r.createElement("footer",{className:"modal-foot"},e.submitting&&r.createElement("i",{className:"spinner spacer-right"}),r.createElement(q.f,{className:"button-red",disabled:e.submitting,onClick:e.onSubmitClick},Object(c.l)("remove")),r.createElement(q.e,{onClick:e.onCloseClick},Object(c.l)("cancel"))))},t}return W(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props.user;return r.createElement("div",{className:"clearfix big-spacer-bottom"},r.createElement(q.c,{className:"pull-right spacer-top spacer-left spacer-right button-small",onClick:this.handleDeleteClick}),r.createElement(K.a,{className:"pull-left spacer-right",hash:e.avatar,name:e.name,size:32}),r.createElement("div",{className:"overflow-hidden"},r.createElement("strong",null,e.name),r.createElement("div",{className:"note"},e.login)),this.state.deleteModal&&r.createElement(I.a,{header:Object(c.l)("users.remove"),onClose:this.handleDeleteModalClose,onSubmit:this.handleDelete},this.renderDeleteModal))},t}(r.PureComponent),H=n(269),V=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={deleteModal:!1},t.handleDeleteClick=function(){t.setState({deleteModal:!0})},t.handleDeleteModalClose=function(){t.mounted&&t.setState({deleteModal:!1})},t.handleDelete=function(){var e=t.props,n=e.group,r=e.organization,o=e.profile;return Object(y.t)({group:n.name,language:o.language,organization:r,qualityProfile:o.name}).then(function(){t.handleDeleteModalClose(),t.props.onDelete(n)})},t.renderDeleteModal=function(e){return r.createElement("div",null,r.createElement("header",{className:"modal-head"},r.createElement("h2",null,Object(c.l)("groups.remove"))),r.createElement("div",{className:"modal-body"},r.createElement(L.b,{defaultMessage:Object(c.l)("groups.remove.confirmation"),id:"groups.remove.confirmation",values:{user:r.createElement("strong",null,t.props.group.name)}})),r.createElement("footer",{className:"modal-foot"},e.submitting&&r.createElement("i",{className:"spinner spacer-right"}),r.createElement(q.a,{className:"button-red",disabled:e.submitting,onClick:e.onSubmitClick},Object(c.l)("remove")),r.createElement(q.e,{onClick:e.onCloseClick},Object(c.l)("cancel"))))},t}return V(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props.group;return r.createElement("div",{className:"clearfix big-spacer-bottom"},r.createElement(q.c,{className:"pull-right spacer-top spacer-left spacer-right button-small",onClick:this.handleDeleteClick}),r.createElement(H.a,{className:"pull-left spacer-right",size:32}),r.createElement("div",{className:"overflow-hidden",style:{lineHeight:"32px"}},r.createElement("strong",null,e.name)),this.state.deleteModal&&r.createElement(I.a,{header:Object(c.l)("group.remove"),onClose:this.handleDeleteModalClose,onSubmit:this.handleDelete},this.renderDeleteModal))},t}(r.PureComponent),Q=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),X=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Z=function(e){function t(t){var n=e.call(this,t)||this;return n.mounted=!1,n.handleSearch=function(e){n.setState({loading:!0}),n.props.onSearch(e).then(function(e){n.mounted&&n.setState({loading:!1,searchResults:e})},function(){n.mounted&&n.setState({loading:!1})})},n.handleInputChange=function(e){n.setState({query:e}),e.length>1&&n.handleSearch(e)},n.handleSearch=Object(a.debounce)(n.handleSearch,250),n.state={loading:!1,query:"",searchResults:[]},n}return Q(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.handleSearch(this.state.query)},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=1===this.state.query.length?Object(c.m)("select2.tooShort",2):Object(c.l)("no_results"),t=this.state.searchResults.map(function(e){return X({},e,{value:ee(e)})});return r.createElement(U.c,{autofocus:!0,className:"Select-big",clearable:!1,isLoading:this.state.loading,filterOptions:a.identity,noResultsText:e,optionRenderer:te,options:t,onChange:this.props.onChange,onInputChange:this.handleInputChange,placeholder:"",searchable:!0,value:this.props.selected&&ee(this.props.selected),valueRenderer:te})},t}(r.PureComponent);function $(e){return void 0!==e.login}function ee(e){return $(e)?"user:"+e.login:"group:"+e.name}function te(e){return $(e)?r.createElement("div",null,r.createElement(K.a,{hash:e.avatar,name:e.name,size:16}),r.createElement("strong",{className:"spacer-left"},e.name),r.createElement("span",{className:"note little-spacer-left"},e.login)):r.createElement("div",null,r.createElement(H.a,{size:16}),r.createElement("strong",{className:"spacer-left"},e.name))}var ne=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={submitting:!1},t.stopSubmitting=function(){t.mounted&&t.setState({submitting:!1})},t.handleUserAdd=function(e){return Object(y.c)({language:t.props.profile.language,login:e.login,organization:t.props.organization,qualityProfile:t.props.profile.name}).then(function(){return t.props.onUserAdd(e)},t.stopSubmitting)},t.handleGroupAdd=function(e){return Object(y.b)({group:e.name,language:t.props.profile.language,organization:t.props.organization,qualityProfile:t.props.profile.name}).then(function(){return t.props.onGroupAdd(e)},t.stopSubmitting)},t.handleFormSubmit=function(e){e.preventDefault();var n=t.state.selected;n&&(t.setState({submitting:!0}),void 0!==n.login?t.handleUserAdd(n):t.handleGroupAdd(n))},t.handleSearch=function(e){var n=t.props,r=n.organization,o=n.profile,a={language:o.language,organization:r,q:e,qualityProfile:o.name,selected:"deselected"};return Promise.all([Object(y.z)(a),Object(y.x)(a)]).then(function(e){var t=e[0],n=e[1];return t.users.concat(n.groups)})},t.handleValueChange=function(e){t.setState({selected:e})},t}return ne(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=Object(c.l)("quality_profiles.grant_permissions_to_user_or_group"),t=!this.state.selected||this.state.submitting;return r.createElement(j.a,{contentLabel:e,onRequestClose:this.props.onClose},r.createElement("header",{className:"modal-head"},r.createElement("h2",null,e)),r.createElement("form",{onSubmit:this.handleFormSubmit},r.createElement("div",{className:"modal-body"},r.createElement("div",{className:"modal-large-field"},r.createElement("label",null,Object(c.l)("quality_profiles.search_description")),r.createElement(Z,{onChange:this.handleValueChange,onSearch:this.handleSearch,selected:this.state.selected}))),r.createElement("footer",{className:"modal-foot"},this.state.submitting&&r.createElement("i",{className:"spinner spacer-right"}),r.createElement(q.f,{disabled:t},Object(c.l)("add_verb")),r.createElement(q.e,{onClick:this.props.onClose},Object(c.l)("cancel")))))},t}(r.PureComponent),oe=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ae=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={addUserForm:!1,loading:!0},t.handleAddUserButtonClick=function(){t.setState({addUserForm:!0})},t.handleAddUserFormClose=function(){t.mounted&&t.setState({addUserForm:!1})},t.handleUserAdd=function(e){t.mounted&&t.setState(function(t){return{addUserForm:!1,users:t.users&&Object(a.uniqBy)(t.users.concat([e]),function(e){return e.login})}})},t.handleUserDelete=function(e){t.mounted&&t.setState(function(t){return{users:t.users&&t.users.filter(function(t){return t!==e})}})},t.handleGroupAdd=function(e){t.mounted&&t.setState(function(t){return{addUserForm:!1,groups:t.groups&&Object(a.uniqBy)(t.groups.concat([e]),function(e){return e.name})}})},t.handleGroupDelete=function(e){t.mounted&&t.setState(function(t){return{groups:t.groups&&t.groups.filter(function(t){return t!==e})}})},t}return oe(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.fetchUsersAndGroups()},t.prototype.componentDidUpdate=function(e){e.organization===this.props.organization&&e.profile===this.props.profile||this.fetchUsersAndGroups()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.fetchUsersAndGroups=function(){var e=this;this.setState({loading:!0});var t=this.props,n=t.organization,r=t.profile,o={language:r.language,organization:n,qualityProfile:r.name,selected:"selected"};Promise.all([Object(y.z)(o),Object(y.x)(o)]).then(function(t){var n=t[0],r=t[1];e.mounted&&e.setState({groups:r.groups,loading:!1,users:n.users})},function(){e.mounted&&e.setState({loading:!1})})},t.prototype.render=function(){var e=this;return r.createElement("div",{className:"boxed-group"},r.createElement("h2",null,Object(c.l)("permissions.page")),r.createElement("div",{className:"boxed-group-inner"},r.createElement("p",{className:"note"},Object(c.l)("quality_profiles.default_permissions")),this.state.loading?r.createElement("div",{className:"big-spacer-top"},r.createElement("i",{className:"spinner"})):r.createElement("div",{className:"big-spacer-top"},this.state.users&&Object(a.sortBy)(this.state.users,"name").map(function(t){return r.createElement(G,{key:t.login,onDelete:e.handleUserDelete,organization:e.props.organization,profile:e.props.profile,user:t})}),this.state.groups&&Object(a.sortBy)(this.state.groups,"name").map(function(t){return r.createElement(Y,{group:t,key:t.name,onDelete:e.handleGroupDelete,organization:e.props.organization,profile:e.props.profile})}),r.createElement("div",{className:"text-right"},r.createElement(q.a,{onClick:this.handleAddUserButtonClick},Object(c.l)("quality_profiles.grant_permissions_to_more_users"))))),this.state.addUserForm&&r.createElement(re,{onClose:this.handleAddUserFormClose,onGroupAdd:this.handleGroupAdd,onUserAdd:this.handleUserAdd,organization:this.props.organization,profile:this.props.profile}))},t}(r.PureComponent);n.d(t,"default",function(){return ie});var le=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};function ie(e){var t=e.profile;return r.createElement("div",null,r.createElement("div",{className:"quality-profile-grid"},r.createElement("div",{className:"quality-profile-grid-left"},r.createElement(v,le({},e)),r.createElement(J,le({},e)),t.actions&&t.actions.edit&&!t.isBuiltIn&&r.createElement(ae,{organization:e.organization||void 0,profile:t})),r.createElement("div",{className:"quality-profile-grid-right"},r.createElement(T,le({},e)),r.createElement(k,le({},e)))))}},993:function(e,t,n){"use strict";n.d(t,"y",function(){return s}),n.d(t,"s",function(){return c}),n.d(t,"j",function(){return u}),n.d(t,"w",function(){return p}),n.d(t,"r",function(){return f}),n.d(t,"q",function(){return d}),n.d(t,"A",function(){return m}),n.d(t,"v",function(){return h}),n.d(t,"i",function(){return g}),n.d(t,"l",function(){return y}),n.d(t,"g",function(){return b}),n.d(t,"o",function(){return O}),n.d(t,"n",function(){return v}),n.d(t,"p",function(){return j}),n.d(t,"h",function(){return E}),n.d(t,"d",function(){return _}),n.d(t,"m",function(){return N}),n.d(t,"z",function(){return S}),n.d(t,"x",function(){return q}),n.d(t,"c",function(){return C}),n.d(t,"u",function(){return k}),n.d(t,"b",function(){return P}),n.d(t,"t",function(){return z}),n.d(t,"e",function(){return w}),n.d(t,"f",function(){return D}),n.d(t,"a",function(){return x}),n.d(t,"k",function(){return U});var r=n(4),o=n(1007),a=n(3),l=n(13),i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};function s(e){return Object(a.getJSON)("/api/qualityprofiles/search",e).catch(l.a)}function c(e){return Object(a.getJSON)("/api/qualityprofiles/show",e)}function u(e){return Object(a.request)("/api/qualityprofiles/create").setMethod("post").setData(e).submit().then(a.checkStatus).then(a.parseJSON)}function p(e){return Object(a.request)("/api/qualityprofiles/restore").setMethod("post").setData(e).submit().then(a.checkStatus).then(a.parseJSON)}function f(e){return Object(a.getJSON)("/api/qualityprofiles/projects",e).catch(l.a)}function d(e){return Object(a.getJSON)("/api/qualityprofiles/inheritance",{profileKey:e}).catch(l.a)}function m(e){return Object(a.post)("/api/qualityprofiles/set_default",{profileKey:e})}function h(e,t){return Object(a.post)("/api/qualityprofiles/rename",{key:e,name:t})}function g(e,t){return Object(a.postJSON)("/api/qualityprofiles/copy",{fromKey:e,toName:t})}function y(e){return Object(a.post)("/api/qualityprofiles/delete",{profileKey:e})}function b(e,t){return Object(a.post)("/api/qualityprofiles/change_parent",{profileKey:e,parentKey:t})}function O(){return Object(a.getJSON)("/api/qualityprofiles/importers").then(function(e){return e.importers},l.a)}function v(){return Object(a.getJSON)("/api/qualityprofiles/exporters").then(function(e){return e.exporters})}function j(e){return Object(a.getJSON)("/api/qualityprofiles/changelog",e)}function E(e,t){return Object(a.getJSON)("/api/qualityprofiles/compare",{leftKey:e,rightKey:t})}function _(e,t){return Object(a.post)("/api/qualityprofiles/add_project",{profileKey:e,projectKey:t}).catch(l.a)}function N(e,t){return Object(a.post)("/api/qualityprofiles/remove_project",{profileKey:e,projectKey:t}).catch(l.a)}function S(e){return Object(a.getJSON)("/api/qualityprofiles/search_users",e).catch(l.a)}function q(e){return Object(a.getJSON)("/api/qualityprofiles/search_groups",e).catch(l.a)}function C(e){return Object(a.post)("/api/qualityprofiles/add_user",e).catch(l.a)}function k(e){return Object(a.post)("/api/qualityprofiles/remove_user",e).catch(l.a)}function P(e){return Object(a.post)("/api/qualityprofiles/add_group",e).catch(l.a)}function z(e){return Object(a.post)("/api/qualityprofiles/remove_group",e).catch(l.a)}function w(e){return Object(a.postJSON)("/api/qualityprofiles/activate_rules",e)}function D(e){return Object(a.postJSON)("/api/qualityprofiles/deactivate_rules",e)}function x(e){var t=e.params&&Object(r.map)(e.params,function(e,t){return t+"="+Object(o.a)(e)}).join(";");return Object(a.post)("/api/qualityprofiles/activate_rule",i({},e,{params:t})).catch(l.a)}function U(e){return Object(a.post)("/api/qualityprofiles/deactivate_rule",e).catch(l.a)}}}]);
//# sourceMappingURL=283.9288ef48.chunk.js.map