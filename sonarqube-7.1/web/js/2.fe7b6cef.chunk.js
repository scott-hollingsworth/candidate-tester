(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1002:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var s=n(0),o=n(1021),r=n(1006),a=n(242),i=n(25),c=n(50);function l(e){var t=e.className,n=e.decimals,l=e.metricKey,u=e.metricType,p=e.small,m=e.value;if(void 0===m)return s.createElement("span",null,"–");if("LEVEL"===u)return s.createElement(a.a,{className:t,level:m,small:p});if("RATING"!==u){var h=Object(c.formatMeasure)(m,u,{decimals:n});return s.createElement("span",{className:t},null!=h?h:"–")}var d=Object(o.b)(l,Number(m)),f=s.createElement(r.a,{small:p,value:m});return d?s.createElement(i.a,{overlay:d},s.createElement("span",{className:t},f)):f}},1006:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var s=n(0),o=n(6),r=n(50);n(379);function a(e){var t=e.className,n=e.muted,a=void 0!==n&&n,i=e.small,c=void 0!==i&&i,l=e.value;if(void 0===l)return s.createElement("span",null,"–");var u=Object(r.formatMeasure)(l,"RATING");return s.createElement("span",{className:o("rating","rating-"+u,{"rating-small":c,"rating-muted":a},t)},u)}},1014:function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"e",function(){return i}),n.d(t,"f",function(){return c}),n.d(t,"c",function(){return l}),n.d(t,"a",function(){return u}),n.d(t,"g",function(){return p}),n.d(t,"b",function(){return m});var s=n(3),o=n(13),r=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};function a(e){return Object(s.getJSON)("/api/measures/component",e).then(function(e){return e.component.measures},o.a)}function i(e,t,n){void 0===n&&(n={});var o=r({},n,{componentKey:e,metricKeys:t.join(",")});return Object(s.getJSON)("/api/measures/component",o)}function c(e,t){return Object(s.getJSON)("/api/measures/search",{projectKeys:e.join(),metricKeys:t.join()}).then(function(e){return e.measures})}function l(e){return Object(s.getJSON)("/api/custom_measures/search",e).then(function(e){return{customMeasures:e.customMeasures,paging:{pageIndex:e.p,pageSize:e.ps,total:e.total}}},o.a)}function u(e){return Object(s.postJSON)("/api/custom_measures/create",e).catch(o.a)}function p(e){return Object(s.post)("/api/custom_measures/update",e).catch(o.a)}function m(e){return Object(s.post)("/api/custom_measures/delete",e).catch(o.a)}},1021:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var s=n(50),o=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r=["sqale_rating","reliability_rating","security_rating"];function a(e,t){return o({},e,{metric:t[e.metric],leak:function(e){if(!e||!e.periods)return;var t=e.periods.find(function(e){return 1===e.index});return t&&t.value}(e)})}function i(e,t){var n=Object(s.isDiffMetric)(e)?e.substr(4):e;if(r.includes(n))return Object(s.getRatingTooltip)(n,t)}},1038:function(e,t,n){"use strict";var s=n(10),o=n(0),r=n(6),a=n(4),i=n(106),c=n(2),l=n(5),u=n(1002),p=n(1001),m=n(1);function h(e){var t=e.measure;return o.createElement("div",{className:"measure measure-one-line","data-metric":t.metric.key,key:t.metric.key},o.createElement("span",{className:"measure-name"},["bugs","vulnerabilities","code_smells"].includes(t.metric.key)&&o.createElement(p.a,{className:"little-spacer-right",query:t.metric.key}),Object(m.e)(t.metric)),o.createElement("span",{className:"measure-value"},o.createElement(u.a,{metricKey:t.metric.key,metricType:t.metric.type,small:!0,value:t.value})))}var d=n(13),f=n(3);var g,y=n(38),v=n(32),b=(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={loading:!0},t.fetchCoveredFiles=function(){var e;t.setState({loading:!0}),(e={testId:t.props.testCase.id},Object(f.getJSON)("/api/tests/covered_files",e).then(function(e){return e.files},d.a)).then(function(e){t.mounted&&t.setState({coveredFiles:e,loading:!1})},function(){t.mounted&&t.setState({loading:!1})})},t}return b(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.fetchCoveredFiles()},t.prototype.componentDidUpdate=function(e){this.props.testCase.id!==e.testCase.id&&this.fetchCoveredFiles()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props.testCase,t=this.state,n=t.loading,s=t.coveredFiles;return o.createElement("div",{className:"source-viewer-measures-section source-viewer-measures-section-big js-selected-test"},o.createElement(v.a,{loading:n},o.createElement("div",{className:"source-viewer-measures-card source-viewer-measures-card-fixed-height"},"ERROR"!==e.status&&"FAILURE"!==e.status&&void 0!==s&&o.createElement(o.Fragment,null,o.createElement("div",{className:"bubble-popup-title"},Object(m.l)("component_viewer.transition.covers")),s.length>0?s.map(function(e){return o.createElement("div",{className:"bubble-popup-section",key:e.key},o.createElement(c.Link,{to:Object(y.r)(e.key)},e.longName),o.createElement("span",{className:"note spacer-left"},Object(m.m)("component_viewer.x_lines_are_covered",e.coveredLines)))}):Object(m.l)("none")),"OK"!==e.status&&o.createElement(o.Fragment,null,o.createElement("div",{className:"bubble-popup-title"},Object(m.l)("component_viewer.details")),e.message&&o.createElement("pre",null,e.message),o.createElement("pre",null,e.stacktrace)))))},t}(o.PureComponent);function O(e){var t=e.className,n=e.status;return o.createElement("i",{className:r("icon-test-status-"+n.toLowerCase(),t)})}var _=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleTestCaseClick=function(e){e.preventDefault(),e.currentTarget.blur(),t.props.onClick(t.props.testCase.id)},t}return _(t,e),t.prototype.render=function(){var e=this.props.testCase,t=e.status,n="OK"!==t||"OK"===t&&e.coveredLines;return o.createElement("tr",null,o.createElement("td",{className:"source-viewer-test-status"},o.createElement(O,{status:t})),o.createElement("td",{className:"source-viewer-test-duration note"},"SKIPPED"!==t&&e.durationInMs+"ms"),o.createElement("td",{className:"source-viewer-test-name"},n?o.createElement("a",{className:"js-show-test",href:"#",onClick:this.handleTestCaseClick},e.name):e.name),o.createElement("td",{className:"source-viewer-test-covered-lines note"},e.coveredLines))},t}(o.PureComponent),j=n(59),N=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),P=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={loading:!0},t.fetchTests=function(){var e;t.setState({loading:!0}),(e=P({ps:500,testFileKey:t.props.componentKey},Object(j.c)(t.props.branchLike)),Object(f.getJSON)("/api/tests/list",e).catch(d.a)).then(function(e){var n=e.tests;t.mounted&&t.setState({loading:!1,testCases:n})},function(){t.mounted&&t.setState({loading:!1})})},t.handleTestCasesSortClick=function(e){e.preventDefault(),e.currentTarget.blur();var n=e.currentTarget.dataset.sort;n&&t.setState(function(e){return{sort:n,sortAsc:n!==e.sort||!e.sortAsc}})},t.handleTestCaseClick=function(e){t.setState({selectedTestId:e})},t}return N(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.fetchTests()},t.prototype.componentDidUpdate=function(e){e.branchLike===this.props.branchLike&&e.componentKey===this.props.componentKey||this.fetchTests()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this,t=this.state,n=t.selectedTestId,s=t.sort,i=void 0===s?"name":s,c=t.sortAsc,l=void 0===c||c,u=t.testCases;if(!u)return null;var p=u.find(function(e){return e.id===n});return o.createElement("div",{className:"source-viewer-measures"},o.createElement("div",{className:"source-viewer-measures-section source-viewer-measures-section-big"},o.createElement("div",{className:"source-viewer-measures-card source-viewer-measures-card-fixed-height js-test-list"},o.createElement("div",{className:"measures"},o.createElement("table",{className:"source-viewer-tests-list"},o.createElement("tbody",null,o.createElement("tr",null,o.createElement("td",{className:"source-viewer-test-status note",colSpan:3},Object(m.l)("component_viewer.measure_section.unit_tests"),o.createElement("br",null),o.createElement("span",{className:"spacer-right"},Object(m.l)("component_viewer.tests.ordered_by")),o.createElement("a",{className:r("js-sort-tests-by-duration",{"active-link":"duration"===i}),"data-sort":"duration",href:"#",onClick:this.handleTestCasesSortClick},Object(m.l)("component_viewer.tests.duration")),o.createElement("span",{className:"slash-separator"}),o.createElement("a",{className:r("js-sort-tests-by-name",{"active-link":"name"===i}),"data-sort":"name",href:"#",onClick:this.handleTestCasesSortClick},Object(m.l)("component_viewer.tests.test_name")),o.createElement("span",{className:"slash-separator"}),o.createElement("a",{className:r("js-sort-tests-by-status",{"active-link":"status"===i}),"data-sort":"status",href:"#",onClick:this.handleTestCasesSortClick},Object(m.l)("component_viewer.tests.status"))),o.createElement("td",{className:"source-viewer-test-covered-lines note"},Object(m.l)("component_viewer.covered_lines"))),function(e,t,n){var s=n?"asc":"desc";return"duration"===t?Object(a.orderBy)(e,["durationInMs","name"],[s,"asc"]):"status"===t?Object(a.orderBy)(e,["status","name"],[s,"asc"]):Object(a.orderBy)(e,["name"],[s])}(u,i,l).map(function(t){return o.createElement(k,{key:t.id,onClick:e.handleTestCaseClick,testCase:t})})))))),p&&o.createElement(E,{testCase:p}))},t}(o.PureComponent);var L=n(11),w=n(234),S=n(1014),I=n(256),T=n(20),A=n(53),x=n(1003),F=n(252),M=n(253),D=n(241),B=n(50),R=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),K=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={loading:!0,measures:{},showAllMeasures:!1},t.fetchData=function(){Promise.all([t.fetchMeasures(),t.fetchIssues()]).then(function(e){var n=e[0],s=e[1];t.mounted&&t.setState(K({loading:!1,measures:n},s))},function(){t.mounted&&t.setState({loading:!1})})},t.fetchMeasures=function(){return Object(I.c)().then(function(e){var n=Object(B.getDisplayMetrics)(e).map(function(e){return e.key});return Object(S.d)(K({componentKey:t.props.sourceViewerFile.key,metricKeys:n.join()},Object(j.c)(t.props.branchLike))).then(function(t){var n=Object(B.enhanceMeasuresWithMetrics)(t,e).filter(function(e){return e.metric});return Object(a.keyBy)(n,function(e){return e.metric.key})})})},t.fetchIssues=function(){return Object(w.f)(K({componentKeys:t.props.sourceViewerFile.key,resolved:"false"},Object(j.c)(t.props.branchLike)),["types","severities","tags"]).then(function(e){var t=e.facets,n=t.find(function(e){return"severities"===e.property}),s=t.find(function(e){return"tags"===e.property}),o=t.find(function(e){return"types"===e.property});return{severitiesFacet:n&&n.values,tagsFacet:s&&s.values,typesFacet:o&&o.values}})},t.handleAllMeasuresClick=function(e){e.preventDefault(),e.currentTarget.blur(),t.setState({showAllMeasures:!0})},t.renderMeasure=function(e){return e?o.createElement(h,{key:e.metric.key,measure:e}):null},t.renderLines=function(){var e=t.state.measures;return o.createElement("div",{className:"source-viewer-measures-section"},o.createElement("div",{className:"source-viewer-measures-card"},o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-list"},t.renderMeasure(e.lines),t.renderMeasure(e.ncloc),t.renderMeasure(e.comment_lines),t.renderMeasure(e.comment_lines_density))),o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-list"},t.renderMeasure(e.cognitive_complexity),t.renderMeasure(e.complexity),t.renderMeasure(e.function_complexity)))))},t.renderBigMeasure=function(e){return e?o.createElement("div",{className:"measure measure-big","data-metric":e.metric.key},o.createElement("span",{className:"measure-value"},o.createElement(u.a,{metricKey:e.metric.key,metricType:e.metric.type,value:e.value})),o.createElement("span",{className:"measure-name"},Object(m.e)(e.metric,!0))):null},t.renderIssues=function(){var e=t.state,n=e.measures,s=e.severitiesFacet,r=e.tagsFacet,i=e.typesFacet;return o.createElement("div",{className:"source-viewer-measures-section"},o.createElement("div",{className:"source-viewer-measures-card"},o.createElement("div",{className:"measures"},t.renderBigMeasure(n.violations),t.renderBigMeasure(n.sqale_index)),n.violations&&!n.violations.value&&o.createElement(o.Fragment,null,i&&o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-list"},Object(a.sortBy)(i,function(e){return D.d.indexOf(e.val)}).map(function(e){return o.createElement("div",{className:"measure measure-one-line",key:e.val},o.createElement("span",{className:"measure-name"},o.createElement(p.a,{className:"little-spacer-right",query:e.val}),Object(m.l)("issue.type",e.val)),o.createElement("span",{className:"measure-value"},Object(B.formatMeasure)(e.count,"SHORT_INT")))}))),s&&o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-list"},Object(a.sortBy)(s,function(e){return D.c.indexOf(e.val)}).map(function(e){return o.createElement("div",{className:"measure measure-one-line",key:e.val},o.createElement("span",{className:"measure-name"},o.createElement(x.a,{severity:e.val})),o.createElement("span",{className:"measure-value"},Object(B.formatMeasure)(e.count,"SHORT_INT")))}))),r&&o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-list"},r.map(function(e){return o.createElement("div",{className:"measure measure-one-line",key:e.val},o.createElement("span",{className:"measure-name"},o.createElement("i",{className:"icon-tags little-spacer-right"}),e.val),o.createElement("span",{className:"measure-value"},Object(B.formatMeasure)(e.count,"SHORT_INT")))}))))))},t.renderCoverage=function(){var e=t.state.measures.coverage;return e?o.createElement("div",{className:"source-viewer-measures-section"},o.createElement("div",{className:"source-viewer-measures-card"},o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-chart"},o.createElement(F.a,{size:"big",value:e.value})),o.createElement("div",{className:"measure measure-big","data-metric":e.metric.key},o.createElement("span",{className:"measure-value"},o.createElement(u.a,{metricKey:e.metric.key,metricType:e.metric.type,value:e.value})),o.createElement("span",{className:"measure-name"},Object(m.e)(e.metric)))),o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-list"},t.renderMeasure(t.state.measures.uncovered_lines),t.renderMeasure(t.state.measures.lines_to_cover),t.renderMeasure(t.state.measures.uncovered_conditions),t.renderMeasure(t.state.measures.conditions_to_cover))))):null},t.renderDuplications=function(){var e=t.state.measures.duplicated_lines_density;return e?o.createElement("div",{className:"source-viewer-measures-section"},o.createElement("div",{className:"source-viewer-measures-card"},o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-chart"},o.createElement(M.a,{muted:void 0===e.value,size:"big",value:Number(e.value||0)})),o.createElement("div",{className:"measure measure-big","data-metric":e.metric.key},o.createElement("span",{className:"measure-value"},o.createElement(u.a,{metricKey:e.metric.key,metricType:e.metric.type,value:e.value})),o.createElement("span",{className:"measure-name"},Object(m.e)(e.metric,!0)))),o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-list"},t.renderMeasure(t.state.measures.duplicated_blocks),t.renderMeasure(t.state.measures.duplicated_lines))))):null},t.renderTests=function(){var e=t.state.measures;return o.createElement("div",{className:"source-viewer-measures"},o.createElement("div",{className:"source-viewer-measures-section"},o.createElement("div",{className:"source-viewer-measures-card"},o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-list"},t.renderMeasure(e.tests),t.renderMeasure(e.test_success_density),t.renderMeasure(e.test_failures),t.renderMeasure(e.test_errors),t.renderMeasure(e.skipped_tests),t.renderMeasure(e.test_execution_time))))))},t.renderDomain=function(e,n){return o.createElement("div",{className:"source-viewer-measures-card",key:e},o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-list"},o.createElement("div",{className:"measure measure-one-line measure-big"},o.createElement("span",{className:"measure-name"},e)),Object(a.sortBy)(n.filter(function(e){return void 0!==e.value}),function(e){return Object(m.e)(e.metric)}).map(function(e){return t.renderMeasure(e)}))))},t.renderAllMeasures=function(){var e=Object(a.groupBy)(Object.values(t.state.measures),function(e){return e.metric.domain}),n=Object.keys(e),s=n.filter(function(e,t){return t%2==1}),r=n.filter(function(e,t){return t%2==0});return o.createElement("div",{className:"source-viewer-measures source-viewer-measures-secondary js-all-measures"},o.createElement("div",{className:"source-viewer-measures-section source-viewer-measures-section-big"},s.map(function(n){return t.renderDomain(n,e[n])})),o.createElement("div",{className:"source-viewer-measures-section source-viewer-measures-section-big"},r.map(function(n){return t.renderDomain(n,e[n])})))},t}return R(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.fetchData()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props,t=e.branchLike,n=e.sourceViewerFile,s=this.state.loading;return o.createElement(T.a,{contentLabel:"",large:!0,onRequestClose:this.props.onClose},o.createElement("div",{className:"modal-container source-viewer-measures-modal"},o.createElement("div",{className:"source-viewer-header-component source-viewer-measures-component"},o.createElement("div",{className:"source-viewer-header-component-project"},o.createElement(A.a,{className:"little-spacer-right",qualifier:"TRK"}),o.createElement(c.Link,{to:Object(y.c)(n.project,t)},n.projectName),n.subProject&&o.createElement(o.Fragment,null,o.createElement(A.a,{className:"big-spacer-left little-spacer-right",qualifier:"BRC"}),o.createElement(c.Link,{to:Object(y.c)(n.subProject,t)},n.subProjectName))),o.createElement("div",{className:"source-viewer-header-component-name"},o.createElement(A.a,{className:"little-spacer-right",qualifier:n.q}),n.path)),s?o.createElement("i",{className:"spinner"}):o.createElement(o.Fragment,null,"UTS"===n.q?o.createElement(o.Fragment,null,this.renderTests(),o.createElement(C,{branchLike:t,componentKey:n.key})):o.createElement("div",{className:"source-viewer-measures"},this.renderLines(),this.renderIssues(),this.renderCoverage(),this.renderDuplications())),o.createElement("div",{className:"spacer-top"},this.state.showAllMeasures?this.renderAllMeasures():o.createElement("a",{className:"js-show-all-measures",href:"#",onClick:this.handleAllMeasuresClick},Object(m.l)("component_viewer.show_all_measures")))),o.createElement("footer",{className:"modal-foot"},o.createElement(L.a,{className:"button-link",onClick:this.props.onClose},Object(m.l)("close"))))},t}(o.PureComponent),q=n(42),V=n(265),z=n(254),H=n(235),W=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),J=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={measuresOverlay:!1},t.handleShowMeasuresClick=function(e){e.preventDefault(),t.setState({measuresOverlay:!0})},t.handleMeasuresOverlayClose=function(){t.setState({measuresOverlay:!1})},t.openInWorkspace=function(e){e.preventDefault();var n=t.props.sourceViewerFile.key;t.context.workspace.openComponent({branchLike:t.props.branchLike,key:n})},t}return W(t,e),t.prototype.render=function(){var e=this,t=this.props.sourceViewerFile,n=t.key,s=t.measures,a=t.path,l=t.project,u=t.projectName,p=t.q,h=t.subProject,d=t.subProjectName,g=t.uuid,v="UTS"===p,b=Object(y.b)()+"/api/sources/raw?"+Object(i.stringify)(Object(f.omitNil)(J({key:n},Object(j.c)(this.props.branchLike))));return o.createElement("div",{className:"source-viewer-header"},o.createElement("div",{className:"source-viewer-header-component"},o.createElement("div",{className:"component-name"},o.createElement("div",{className:"component-name-parent"},o.createElement("a",{className:"link-with-icon",href:Object(y.q)(Object(y.c)(l,this.props.branchLike))},o.createElement(A.a,{qualifier:"TRK"})," ",o.createElement("span",null,u))),null!=h&&o.createElement("div",{className:"component-name-parent"},o.createElement("a",{className:"link-with-icon",href:Object(y.q)(Object(y.c)(h,this.props.branchLike))},o.createElement(A.a,{qualifier:"BRC"})," ",o.createElement("span",null,d))),o.createElement("div",{className:"component-name-path"},o.createElement(A.a,{qualifier:p})," ",o.createElement("span",null,Object(H.b)(a)),o.createElement("span",{className:"component-name-file"},Object(H.c)(a)),this.props.sourceViewerFile.canMarkAsFavorite&&(!this.props.branchLike||Object(j.f)(this.props.branchLike))&&o.createElement(V.a,{className:"component-name-favorite",componentKey:n})))),o.createElement(q.a,null,function(t){var s=t.onToggleClick,a=t.open;return o.createElement("div",{className:r("dropdown source-viewer-header-actions",{open:a})},o.createElement(L.b,{className:"js-actions",onClick:s,tooltip:Object(m.l)("component_viewer.more_actions")},o.createElement(z.a,null)),o.createElement("ul",{className:"dropdown-menu dropdown-menu-right"},o.createElement("li",null,o.createElement("a",{className:"js-measures",href:"#",onClick:e.handleShowMeasuresClick},Object(m.l)("component_viewer.show_details")),e.state.measuresOverlay&&o.createElement(U,{branchLike:e.props.branchLike,onClose:e.handleMeasuresOverlayClose,sourceViewerFile:e.props.sourceViewerFile})),o.createElement("li",null,o.createElement("a",{className:"js-new-window",href:Object(y.q)({pathname:"/component",query:J({id:n},Object(j.c)(e.props.branchLike))}),target:"_blank"},Object(m.l)("component_viewer.new_window"))),o.createElement("li",null,o.createElement("a",{className:"js-workspace",href:"#",onClick:e.openInWorkspace},Object(m.l)("component_viewer.open_in_workspace"))),o.createElement("li",null,o.createElement("a",{className:"js-raw-source",href:b,target:"_blank"},Object(m.l)("component_viewer.show_raw_source")))))}),o.createElement("div",{className:"source-viewer-header-measures"},v&&o.createElement("div",{className:"source-viewer-header-measure"},o.createElement("span",{className:"source-viewer-header-measure-value"},Object(B.formatMeasure)(s.tests,"SHORT_INT")),o.createElement("span",{className:"source-viewer-header-measure-label"},Object(m.l)("metric.tests.name"))),!v&&o.createElement("div",{className:"source-viewer-header-measure"},o.createElement("span",{className:"source-viewer-header-measure-value"},Object(B.formatMeasure)(s.lines,"SHORT_INT")),o.createElement("span",{className:"source-viewer-header-measure-label"},Object(m.l)("metric.lines.name"))),o.createElement("div",{className:"source-viewer-header-measure"},o.createElement("span",{className:"source-viewer-header-measure-value"},o.createElement(c.Link,{to:Object(y.g)(l,J({resolved:"false",fileUuids:g},Object(j.c)(this.props.branchLike)))},null!=s.issues?Object(B.formatMeasure)(s.issues,"SHORT_INT"):0)),o.createElement("span",{className:"source-viewer-header-measure-label"},Object(m.l)("metric.violations.name"))),null!=s.coverage&&o.createElement("div",{className:"source-viewer-header-measure"},o.createElement("span",{className:"source-viewer-header-measure-value"},Object(B.formatMeasure)(s.coverage,"PERCENT")),o.createElement("span",{className:"source-viewer-header-measure-label"},Object(m.l)("metric.coverage.name"))),null!=s.duplicationDensity&&o.createElement("div",{className:"source-viewer-header-measure"},o.createElement("span",{className:"source-viewer-header-measure-value"},Object(B.formatMeasure)(s.duplicationDensity,"PERCENT")),o.createElement("span",{className:"source-viewer-header-measure-label"},Object(m.l)("duplications")))))},t.contextTypes={workspace:l.object.isRequired},t}(o.PureComponent),X=n(994),Q=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};function Y(e){var t=e.branchLike,n=e.componentKey,s=e.line,r=e.popupPosition,a={pathname:"/component",query:Q({id:n,line:s.line},Object(j.c)(t))};return o.createElement(X.a,{customClass:"source-viewer-bubble-popup",position:r},o.createElement("div",{className:"bubble-popup-section"},o.createElement(c.Link,{className:"js-get-permalink",to:a},Object(m.l)("component_viewer.get_permalink"))))}var Z=n(996),$=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){e.preventDefault(),e.stopPropagation(),e.currentTarget.blur(),t.props.onPopupToggle({line:t.props.line.line,name:"line-number"})},t.handleTogglePopup=function(e){t.props.onPopupToggle({line:t.props.line.line,name:"line-number",open:e})},t}return $(t,e),t.prototype.render=function(){var e=this.props,t=e.branchLike,n=e.componentKey,s=e.line,r=e.popupOpen,a=s.line;return!!a?o.createElement("td",{className:"source-meta source-line-number","data-line-number":a,onClick:this.handleClick,role:"button",tabIndex:0},o.createElement(Z.a,{isOpen:r,offset:{vertical:-18,horizontal:0},popup:o.createElement(Y,{branchLike:t,componentKey:n,line:s}),position:"bottomright",togglePopup:this.handleTogglePopup})):o.createElement("td",{className:"source-meta source-line-number"})},t}(o.PureComponent),te=n(147);function ne(e){var t=e.line,n=e.popupPosition;return o.createElement(X.a,{customClass:"source-viewer-bubble-popup",position:n},o.createElement("div",{className:"bubble-popup-section"},t.scmAuthor),t.scmDate&&o.createElement("div",{className:"bubble-popup-section"},o.createElement(te.a,{date:t.scmDate})),t.scmRevision&&o.createElement("div",{className:"bubble-popup-section"},t.scmRevision))}var se=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),oe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){e.preventDefault(),e.stopPropagation(),e.currentTarget.blur(),t.props.onPopupToggle({line:t.props.line.line,name:"scm"})},t.handleTogglePopup=function(e){t.props.onPopupToggle({line:t.props.line.line,name:"scm",open:e})},t}return se(t,e),t.prototype.render=function(){var e=this.props,t=e.line,n=e.popupOpen,s=e.previousLine,r=!!t.line,a=function(e,t){var n=!0;null!=t&&null!=e.scmAuthor&&null!=t.scmAuthor&&(n=e.scmAuthor!==t.scmAuthor||e.scmDate!==t.scmDate);return n}(t,s)&&o.createElement("div",{className:"source-line-scm-inner","data-author":t.scmAuthor});return r?o.createElement("td",{className:"source-meta source-line-scm","data-line-number":t.line,onClick:this.handleClick,role:"button",tabIndex:0},a,o.createElement(Z.a,{isOpen:n,offset:{vertical:-18,horizontal:0},popup:o.createElement(ne,{line:t}),position:"bottomright",togglePopup:this.handleTogglePopup})):o.createElement("td",{className:"source-meta source-line-scm","data-line-number":t.line},a)},t}(o.PureComponent);var re=n(33),ae=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),ie=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={loading:!0,testCases:[]},t.fetchTests=function(){t.setState({loading:!0}),Object(re.t)(ie({sourceFileKey:t.props.componentKey,sourceFileLineNumber:t.props.line.line},Object(j.c)(t.props.branchLike))).then(function(e){t.mounted&&t.setState({loading:!1,testCases:e})},function(){t.mounted&&t.setState({loading:!1})})},t.handleTestClick=function(e){e.preventDefault(),e.currentTarget.blur();var n=e.currentTarget.dataset.key;n&&t.context.workspace.openComponent({branchLike:t.props.branchLike,key:n}),t.props.onClose()},t}return ae(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.fetchTests()},t.prototype.componentDidUpdate=function(e){Object(j.h)(e.branchLike,this.props.branchLike)&&e.componentKey===this.props.componentKey&&e.line.line===this.props.line.line||this.fetchTests()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this,t=this.props.line,n=Object(a.groupBy)(this.state.testCases||[],"fileKey"),s=Object.keys(n).map(function(e){var t=n[e],s=t[0];return{file:{key:s.fileKey,longName:s.fileName},tests:t}});return o.createElement(X.a,{customClass:"source-viewer-bubble-popup",position:this.props.popupPosition},o.createElement("div",{className:"bubble-popup-title"},Object(m.l)("source_viewer.covered"),!!t.conditions&&o.createElement("div",null,"(",t.coveredConditions||"0"," of ",t.conditions," ",Object(m.l)("source_viewer.conditions"),")")),this.state.loading?o.createElement("i",{className:"spinner"}):o.createElement(o.Fragment,null,0===s.length&&Object(m.l)("source_viewer.tooltip.no_information_about_tests"),s.map(function(t){return o.createElement("div",{className:"bubble-popup-section",key:t.file.key},o.createElement("a",{"data-key":t.file.key,href:"#",onClick:e.handleTestClick,title:t.file.longName},o.createElement("span",null,Object(H.a)(t.file.longName))),o.createElement("ul",{className:"bubble-popup-list"},t.tests.map(function(e){return o.createElement("li",{className:"component-viewer-popup-test",key:e.id,title:e.name},o.createElement(O,{className:"spacer-right",status:e.status}),e.name,"SKIPPED"!==e.status&&o.createElement("span",{className:"spacer-left note"},e.durationInMs,"ms"))})))})))},t.contextTypes={workspace:l.object.isRequired},t}(o.PureComponent),le=n(25),ue=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){e.preventDefault(),e.stopPropagation(),e.currentTarget.blur(),t.props.onPopupToggle({line:t.props.line.line,name:"coverage"})},t.handleTogglePopup=function(e){t.props.onPopupToggle({line:t.props.line.line,name:"coverage",open:e})},t.closePopup=function(){t.props.onPopupToggle({line:t.props.line.line,name:"coverage",open:!1})},t}return ue(t,e),t.prototype.render=function(){var e=this.props,t=e.branchLike,n=e.componentKey,s=e.line,r=e.popupOpen,a="source-meta source-line-coverage"+(null!=s.coverageStatus?" source-line-"+s.coverageStatus:""),i="covered"===s.coverageStatus||"partially-covered"===s.coverageStatus,c=s.coverageStatus?o.createElement(le.a,{overlay:Object(m.l)("source_viewer.tooltip",s.coverageStatus),placement:"right"},o.createElement("div",{className:"source-line-bar"})):o.createElement("div",{className:"source-line-bar"});return i?o.createElement("td",{className:a,"data-line-number":s.line,onClick:this.handleClick,role:"button",tabIndex:0},c,o.createElement(Z.a,{isOpen:r,popup:o.createElement(ce,{branchLike:t,componentKey:n,line:s,onClose:this.closePopup}),position:"bottomright",togglePopup:this.handleTogglePopup})):o.createElement("td",{className:a,"data-line-number":s.line},c)},t}(o.PureComponent),me=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),he=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){e.preventDefault(),t.props.onClick(t.props.line)},t}return me(t,e),t.prototype.render=function(){var e=this.props.line,t=r("source-meta","source-line-duplications",{"source-line-duplicated":e.duplicated}),n=o.createElement("td",{className:t,onClick:e.duplicated?this.handleClick:void 0,role:e.duplicated?"button":void 0,tabIndex:e.duplicated?0:void 0},o.createElement("div",{className:"source-line-bar"}));return e.duplicated?o.createElement(le.a,{overlay:Object(m.l)("source_viewer.tooltip.duplicated_line"),placement:"right"},n):n},t}(o.PureComponent),de=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),fe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){e.preventDefault(),e.stopPropagation(),e.currentTarget.blur(),t.props.onPopupToggle({index:t.props.index,line:t.props.line.line,name:"duplications"})},t.handleTogglePopup=function(e){t.props.onPopupToggle({index:t.props.index,line:t.props.line.line,name:"duplications",open:e})},t}return de(t,e),t.prototype.render=function(){var e=this.props,t=e.duplicated,n=e.index,s=e.line,a=e.popupOpen,i=r("source-meta","source-line-duplications-extra",{"source-line-duplicated":t}),c=o.createElement("div",{className:"source-line-bar"});return t?o.createElement("td",{className:i,"data-index":n,"data-line-number":s.line,onClick:this.handleClick,role:"button",tabIndex:0},o.createElement(le.a,{overlay:Object(m.l)("source_viewer.tooltip.duplicated_block"),placement:"right"},c),o.createElement(Z.a,{isOpen:a,popup:this.props.renderDuplicationPopup(n,s.line),position:"bottomright",togglePopup:this.handleTogglePopup})):o.createElement("td",{className:i,"data-index":n,"data-line-number":s.line},c)},t}(o.PureComponent),ge=n(1024),ye=n(259),ve=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),be=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){e.preventDefault(),t.props.onClick()},t}return ve(t,e),t.prototype.render=function(){var e=this.props,t=e.issues,n=e.line,s=t.length>0,a=r("source-meta","source-line-issues",{"source-line-with-issues":s}),i=s?Object(ye.b)(t)[0]:null;return o.createElement("td",{className:a,"data-line-number":n.line,onClick:s?this.handleClick:void 0,role:s?"button":void 0,tabIndex:s?0:void 0},null!=i&&o.createElement(ge.a,{severity:i.severity}),t.length>1&&o.createElement("span",{className:"source-line-issues-counter"},t.length))},t}(o.PureComponent),Ee=n(1088);function Oe(e){var t=e.issuePopup;return o.createElement("div",{className:"issue-list"},e.issues.map(function(n){return o.createElement(Ee.a,{branchLike:e.branchLike,displayLocationsCount:e.displayIssueLocationsCount,displayLocationsLink:e.displayIssueLocationsLink,issue:n,key:n.key,onChange:e.onIssueChange,onClick:e.onIssueClick,onPopupToggle:e.onIssuePopupToggle,openPopup:t&&t.issue===n.key?t.name:void 0,selected:e.selectedIssue===n.key})}))}var _e=n(1060),ke=n(1090),je=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ne="source-line-code-issue";function Pe(e,t){void 0===t&&(t="");var n=document.createElement("div"),s=[];return n.innerHTML=e,[].forEach.call(n.childNodes,function(e){if(1===e.nodeType){var n=t?t+" "+e.className:e.className,o=Pe(e.innerHTML,n);s=s.concat(o)}3===e.nodeType&&e.nodeValue&&s.push({className:t,markers:[],text:e.nodeValue})}),s}function Ce(e,t,n,s){return t>=s?e.substr(t-s,n-t):e.substr(0,n-t)}function Le(e,t,n){return void 0===n&&(n=Ne),t.forEach(function(t){var s=[],o=0,r=t.line!==t.startLine;e.forEach(function(e){var i,c,l,u,p=(i=o,c=o+e.text.length,l=t.from,u=t.to,{from:Math.max(i,l),to:Math.min(c,u)}),m=Ce(e.text,o,p.from,o),h=Ce(e.text,p.from,p.to,o),d=Ce(e.text,p.to,o+e.text.length,o);if(m.length&&s.push(je({},e,{text:m})),h.length){var f=-1===e.className.indexOf(n)?e.className+" "+n:e.className;s.push({className:f,markers:r||null==t.index?e.markers:Object(a.uniq)(e.markers.concat([t.index])),text:h}),r=!0}d.length&&s.push(je({},e,{text:d})),o+=e.text.length}),e=s.slice()}),e}var we=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Se=function(e){function t(t){var n=e.call(this,t)||this;return n.handleSymbolClick=function(e){e.preventDefault();var t=e.currentTarget.className.match(/sym-\d+/g);t&&t.length>0&&n.props.onSymbolClick(t)},n.state={tokens:Pe(t.line.code||"")},n}return we(t,e),t.prototype.componentDidMount=function(){this.attachEvents(),this.props.highlightedLocationMessage&&this.activeMarkerNode&&this.props.scroll&&this.props.scroll(this.activeMarkerNode)},t.prototype.componentWillReceiveProps=function(e){e.line.code!==this.props.line.code&&this.setState({tokens:Pe(e.line.code||"")})},t.prototype.componentWillUpdate=function(){this.detachEvents()},t.prototype.componentDidUpdate=function(e){this.attachEvents(),this.props.highlightedLocationMessage&&e.highlightedLocationMessage!==this.props.highlightedLocationMessage&&this.activeMarkerNode&&this.props.scroll&&this.props.scroll(this.activeMarkerNode)},t.prototype.componentWillUnmount=function(){this.detachEvents()},t.prototype.attachEvents=function(){if(this.codeNode&&(this.symbols=this.codeNode.querySelectorAll(".sym"),this.symbols))for(var e=0;e<this.symbols.length;e++){this.symbols[e].addEventListener("click",this.handleSymbolClick)}},t.prototype.detachEvents=function(){if(this.symbols)for(var e=0;e<this.symbols.length;e++){this.symbols[e].addEventListener("click",this.handleSymbolClick)}},t.prototype.renderMarker=function(e,t,n,s){var r=this,a=this.props.onLocationSelect,i=a?function(){return a(e)}:void 0,c=n?function(e){return r.activeMarkerNode=e}:void 0;return o.createElement(_e.a,{key:"marker-"+e,leading:s,onClick:i,selected:n},o.createElement("span",{ref:c},e+1),t&&o.createElement(ke.a,{selected:!0},t))},t.prototype.render=function(){var e=this,t=this.props,n=t.highlightedLocationMessage,s=t.highlightedSymbols,a=t.issues,i=t.issueLocations,c=t.line,l=t.onIssueSelect,u=t.secondaryIssueLocations,p=t.selectedIssue,m=t.showIssues,h=this.state.tokens.slice();if(s&&s.forEach(function(e){h=function(e,t){var n=new RegExp("\\b"+t+"\\b");return e.map(function(e){return n.test(e.className)?je({},e,{className:e.className+" highlighted"}):e})}(h,e)}),i.length>0&&(h=Le(h,i)),u&&(h=Le(h,u,"issue-location"),n)){var d=u.find(function(e){return e.index===n.index});d&&(h=Le(h,[d],"selected"))}var f=r("source-line-code","code",{"has-issues":a.length>0}),g=[],y=!1;return h.forEach(function(t,s){e.props.displayLocationMarkers&&t.markers.length>0&&t.markers.forEach(function(t){var s=void 0!==n&&n.index===t,o=s?n.text:void 0;g.push(e.renderMarker(t,o,s,y))}),g.push(o.createElement("span",{className:t.className,key:s},t.text)),y=(0===s||y)&&!t.text.trim().length}),o.createElement("td",{className:f,"data-line-number":c.line},o.createElement("div",{className:"source-line-code-inner"},o.createElement("pre",{ref:function(t){return e.codeNode=t}},g)),m&&a.length>0&&o.createElement(Oe,{branchLike:this.props.branchLike,displayIssueLocationsCount:this.props.displayIssueLocationsCount,displayIssueLocationsLink:this.props.displayIssueLocationsLink,issuePopup:this.props.issuePopup,issues:a,onIssueChange:this.props.onIssueChange,onIssueClick:l,onIssuePopupToggle:this.props.onIssuePopupToggle,selectedIssue:p}))},t}(o.PureComponent),Ie=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Te=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isPopupOpen=function(e,n){var s=t.props,o=s.line,r=s.linePopup;return void 0!==r&&r.index===n&&r.line===o.line&&r.name===e},t.handleIssuesIndicatorClick=function(){if(t.props.openIssues)t.props.onIssuesClose(t.props.line),t.props.onIssueUnselect();else{t.props.onIssuesOpen(t.props.line);var e=t.props.issues;e.length>0&&t.props.onIssueSelect(e[0].key)}},t}return Ie(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.displayCoverage,s=t.duplications,i=t.duplicationsCount,c=t.filtered,l=t.issuePopup,u=t.line,p=r("source-line",{"source-line-highlighted":this.props.highlighted,"source-line-filtered":!0===c,"source-line-filtered-dark":n&&("uncovered"===u.coverageStatus||"partially-covered"===u.coverageStatus),"source-line-last":this.props.last});return o.createElement("tr",{className:p,"data-line-number":u.line},o.createElement(ee,{branchLike:this.props.branchLike,componentKey:this.props.componentKey,line:u,onPopupToggle:this.props.onLinePopupToggle,popupOpen:this.isPopupOpen("line-number")}),o.createElement(oe,{line:u,onPopupToggle:this.props.onLinePopupToggle,popupOpen:this.isPopupOpen("scm"),previousLine:this.props.previousLine}),this.props.displayCoverage&&o.createElement(pe,{branchLike:this.props.branchLike,componentKey:this.props.componentKey,line:u,onPopupToggle:this.props.onLinePopupToggle,popupOpen:this.isPopupOpen("coverage")}),this.props.displayDuplications&&o.createElement(he,{line:u,onClick:this.props.loadDuplications}),Object(a.times)(i).map(function(t){return o.createElement(fe,{duplicated:s.includes(t),index:t,key:t,line:e.props.line,onPopupToggle:e.props.onLinePopupToggle,popupOpen:e.isPopupOpen("duplications",t),renderDuplicationPopup:e.props.renderDuplicationPopup})}),this.props.displayIssues&&!this.props.displayAllIssues&&o.createElement(be,{issues:this.props.issues,line:u,onClick:this.handleIssuesIndicatorClick}),o.createElement(Se,{branchLike:this.props.branchLike,displayIssueLocationsCount:this.props.displayIssueLocationsCount,displayIssueLocationsLink:this.props.displayIssueLocationsLink,displayLocationMarkers:this.props.displayLocationMarkers,highlightedLocationMessage:this.props.highlightedLocationMessage,highlightedSymbols:this.props.highlightedSymbols,issueLocations:this.props.issueLocations,issuePopup:l,issues:this.props.issues,line:u,onIssueChange:this.props.onIssueChange,onIssuePopupToggle:this.props.onIssuePopupToggle,onIssueSelect:this.props.onIssueSelect,onLocationSelect:this.props.onLocationSelect,onSymbolClick:this.props.onSymbolClick,scroll:this.props.scroll,secondaryIssueLocations:this.props.secondaryIssueLocations,selectedIssue:this.props.selectedIssue,showIssues:this.props.openIssues||this.props.displayAllIssues}))},t}(o.PureComponent);function Ae(e){if(!e)return[];for(var t=[],n=e.startLine;n<=e.endLine;n++){var s=n===e.startLine?e.startOffset:0,o=n===e.endLine?e.endOffset:999999;t.push({line:n,from:s,to:o})}return t}var xe=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Fe=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Me=[],De={code:"",duplicated:!1,line:0},Be=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getDuplicationsForLine=function(e){return t.props.duplicationsByLine[e.line]||Me},t.getIssuesForLine=function(e){return t.props.issuesByLine[e.line]||Me},t.getIssueLocationsForLine=function(e){return t.props.issueLocationsByLine[e.line]||Me},t.getSecondaryIssueLocationsForLine=function(e){var n=t.props.highlightedLocations;return n?n.reduce(function(t,n,s){var o=n?Ae(n.textRange).filter(function(t){return t.line===e.line}).map(function(e){return Fe({},e,{startLine:n.textRange.startLine,index:s})}):[];return t.concat(o)},[]):Me},t.renderLine=function(e){var n=e.line,s=e.index,r=e.displayCoverage,i=e.displayDuplications,c=e.displayIssues,l=t.props,u=l.filterLine,p=l.highlightedLocationMessage,m=l.selectedIssue,h=l.sources,d=u&&u(n),f=t.getSecondaryIssueLocationsForLine(n),g=t.props.duplications?t.props.duplications.length:0,y=t.getIssuesForLine(n),v=t.props.symbolsByLine[n.line]||[],b=t.props.highlightedSymbols,E=Object(a.intersection)(v,b);E.length||(E=void 0);var O=void 0!==m&&y.find(function(e){return e.key===m})?m:void 0,_=f.length>0?f:Me,k=null!=p&&_.some(function(e){return e.index===p.index})?p:void 0;return o.createElement(Te,{branchLike:t.props.branchLike,componentKey:t.props.componentKey,displayAllIssues:t.props.displayAllIssues,displayCoverage:r,displayDuplications:i,displayIssueLocationsCount:t.props.displayIssueLocationsCount,displayIssueLocationsLink:t.props.displayIssueLocationsLink,displayIssues:c,displayLocationMarkers:t.props.displayLocationMarkers,duplications:t.getDuplicationsForLine(n),duplicationsCount:g,filtered:d,highlighted:n.line===t.props.highlightedLine,highlightedLocationMessage:k,highlightedSymbols:E,issueLocations:t.getIssueLocationsForLine(n),issuePopup:t.props.issuePopup,issues:y,key:n.line,last:s===t.props.sources.length-1&&!t.props.hasSourcesAfter,line:n,linePopup:t.props.linePopup,loadDuplications:t.props.loadDuplications,onIssueChange:t.props.onIssueChange,onIssuePopupToggle:t.props.onIssuePopupToggle,onIssueSelect:t.props.onIssueSelect,onIssueUnselect:t.props.onIssueUnselect,onIssuesClose:t.props.onIssuesClose,onIssuesOpen:t.props.onIssuesOpen,onLinePopupToggle:t.props.onLinePopupToggle,onLocationSelect:t.props.onLocationSelect,onSymbolClick:t.props.onSymbolClick,openIssues:t.props.openIssuesByLine[n.line]||!1,previousLine:s>0?h[s-1]:void 0,renderDuplicationPopup:t.props.renderDuplicationPopup,scroll:t.props.scroll,secondaryIssueLocations:_,selectedIssue:O})},t}return xe(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.issues,s=void 0===n?[]:n,r=t.sources,a=r.some(function(e){return null!=e.coverageStatus}),i=r.some(function(e){return!!e.duplicated}),c=s.length>0,l=c&&s.some(function(e){return!e.textRange});return o.createElement("div",null,this.props.hasSourcesBefore&&o.createElement("div",{className:"source-viewer-more-code"},this.props.loadingSourcesBefore?o.createElement("div",{className:"js-component-viewer-loading-before"},o.createElement("i",{className:"spinner"}),o.createElement("span",{className:"note spacer-left"},Object(m.l)("source_viewer.loading_more_code"))):o.createElement(L.a,{className:"js-component-viewer-source-before",onClick:this.props.loadSourcesBefore},Object(m.l)("source_viewer.load_more_code"))),o.createElement("table",{className:"source-table"},o.createElement("tbody",null,l&&this.renderLine({line:De,index:-1,displayCoverage:a,displayDuplications:i,displayIssues:c}),r.map(function(t,n){return e.renderLine({line:t,index:n,displayCoverage:a,displayDuplications:i,displayIssues:c})}))),this.props.hasSourcesAfter&&o.createElement("div",{className:"source-viewer-more-code"},this.props.loadingSourcesAfter?o.createElement("div",{className:"js-component-viewer-loading-after"},o.createElement("i",{className:"spinner"}),o.createElement("span",{className:"note spacer-left"},Object(m.l)("source_viewer.loading_more_code"))):o.createElement(L.a,{className:"js-component-viewer-source-after",onClick:this.props.loadSourcesAfter},Object(m.l)("source_viewer.load_more_code"))))},t}(o.PureComponent),Re=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Ke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isDifferentComponent=function(e,t){return Boolean(e&&t&&(e.project!==t.project||e.subProject!==t.subProject))},t.handleFileClick=function(e){e.preventDefault(),e.currentTarget.blur();var n=e.currentTarget.dataset,s=n.key,o=n.line;s&&t.context.workspace.openComponent({branchLike:t.props.branchLike,key:s,line:o?Number(o):void 0}),t.props.onClose()},t}return Re(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.duplicatedFiles,s=void 0===n?{}:n,r=t.sourceViewerFile,i=Object(a.groupBy)(this.props.blocks,"_ref"),l=Object.keys(i).map(function(e){return{blocks:i[e],file:s[e]}});return l=Object(a.sortBy)(l,function(e){return e.file.projectName!==r.projectName},function(e){return e.file.subProjectName!==r.subProjectName},function(e){return e.file.key!==r.key}),o.createElement(X.a,{customClass:"source-viewer-bubble-popup",position:this.props.popupPosition},o.createElement("div",{className:"bubble-popup-container"},this.props.inRemovedComponent&&o.createElement("div",{className:"alert alert-warning"},Object(m.l)("duplications.dups_found_on_deleted_resource")),l.length>0&&o.createElement(o.Fragment,null,o.createElement("div",{className:"bubble-popup-title"},Object(m.l)("component_viewer.transition.duplication")),l.map(function(t){return o.createElement("div",{className:"bubble-popup-section",key:t.file.key},o.createElement("div",{className:"component-name"},e.isDifferentComponent(t.file,e.props.sourceViewerFile)&&o.createElement(o.Fragment,null,o.createElement("div",{className:"component-name-parent"},o.createElement(A.a,{className:"little-spacer-right",qualifier:"TRK"}),o.createElement(c.Link,{to:Object(y.r)(t.file.project)},t.file.projectName)),t.file.subProject&&t.file.subProjectName&&o.createElement("div",{className:"component-name-parent"},o.createElement(A.a,{className:"little-spacer-right",qualifier:"BRC"}),o.createElement(c.Link,{to:Object(y.r)(t.file.subProject)},t.file.subProjectName))),t.file.key!==e.props.sourceViewerFile.key&&o.createElement("div",{className:"component-name-path"},o.createElement("a",{className:"link-action","data-key":t.file.key,href:"#",onClick:e.handleFileClick,title:t.file.name},o.createElement("span",null,Object(H.b)(t.file.name)),o.createElement("span",{className:"component-name-file"},Object(H.c)(t.file.name)))),o.createElement("div",{className:"component-name-path"},"Lines: ",t.blocks.map(function(n,s){return o.createElement(o.Fragment,{key:s},o.createElement("a",{"data-key":t.file.key,"data-line":n.from,href:"#",onClick:e.handleFileClick},n.from," – ",n.from+n.size-1),s<t.blocks.length-1&&", ")}))))}))))},t.contextTypes={workspace:l.object.isRequired},t}(o.PureComponent),Ue=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qe=500;function Ve(e,t,n,s){return void 0===s&&(s=qe),function(e,t,n){return void 0===n&&(n=qe),Object(w.i)(Ue({},e,{p:t,ps:n})).then(function(e){return e.issues.map(function(t){return Object(ye.a)(t,e.components,e.users,e.rules)})})}(e,n).then(function(o){if(0===o.length)return[];var r=o[o.length-1];return null!=r.textRange&&r.textRange.endLine>t||o.length<s?o:Ve(e,t,n+1,s).then(function(e){return o.concat(e)})})}function ze(e,t,n,s){var o=function(e,t){return Ue({additionalFields:"_all",resolved:"false",componentKeys:e,s:"FILE_LINE"},Object(j.c)(t))}(e,s);return new Promise(function(e){Ve(o,n,1).then(function(t){e(t)})})}function He(e){var t={};return e.forEach(function(e){var n=e.textRange?e.textRange.endLine:0;n in t||(t[n]=[]),t[n].push(e)}),t}function We(e){var t={};return e.forEach(function(e){Ae(e.textRange).forEach(function(e){e.line in t||(t[e.line]=[]),t[e.line].push(e)})}),t}function Je(e){var t={};return e.forEach(function(e){var n=Pe(e.code||""),s=Object(a.flatten)(n.map(function(e){var t=e.className.match(/sym-\d+/g);return null!=t?t:[]}));t[e.line]=s.filter(function(e){return e})}),t}var Ge=n(28),Xe=(n(1138),function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}()),Qe=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ye=500,Ze=function(e){function t(t){var n=e.call(this,t)||this;return n.mounted=!1,n.loadSources=function(){return new Promise(function(e,t){var s=n.props.aroundLine?Math.max(1,n.props.aroundLine-Ye/2+1):1,o=n.props.aroundLine?n.props.aroundLine+Ye/2+1:Ye+1;return 1===s&&o<Ye&&(o=Ye),o++,n.safeLoadSources(n.props.component,s,o,n.props.branchLike).then(function(t){return e(t)},function(s){var o=s.response;n.mounted&&([403,404].includes(o.status)?t(o):e([]))})})},n.loadSourcesBefore=function(){if(n.state.sources){var e=n.state.sources[0];n.setState({loadingSourcesBefore:!0});var t=Math.max(1,e.line-Ye);n.safeLoadSources(n.props.component,t,e.line-1,n.props.branchLike).then(function(s){n.safeLoadIssues(n.props.component,t,e.line-1,n.props.branchLike).then(function(e){n.mounted&&n.setState(function(t){var o=Object(a.uniqBy)(e.concat(t.issues||[]),function(e){return e.key});return{issues:o,issuesByLine:He(o),issueLocationsByLine:We(o),loadingSourcesBefore:!1,sources:n.computeCoverageStatus(s).concat(t.sources||[]),symbolsByLine:Qe({},t.symbolsByLine,Je(s))}})},function(){})},function(){})}},n.loadSourcesAfter=function(){if(n.state.sources){var e=n.state.sources[n.state.sources.length-1];n.setState({loadingSourcesAfter:!0});var t=e.line+1,s=e.line+Ye+1;n.safeLoadSources(n.props.component,t,s,n.props.branchLike).then(function(e){n.safeLoadIssues(n.props.component,t,s,n.props.branchLike).then(function(t){n.mounted&&n.setState(function(s){var o=Object(a.uniqBy)((s.issues||[]).concat(t),function(e){return e.key});return{issues:o,issuesByLine:He(o),issueLocationsByLine:We(o),hasSourcesAfter:e.length>Ye,loadingSourcesAfter:!1,sources:(s.sources||[]).concat(n.computeCoverageStatus(e.slice(0,Ye))),symbolsByLine:Qe({},s.symbolsByLine,Je(e.slice(0,Ye)))}})},function(){})},function(){})}},n.loadDuplications=function(e){Object(re.p)(Qe({key:n.props.component},Object(j.c)(n.props.branchLike))).then(function(t){n.mounted&&n.setState(function(){var n={displayDuplications:!0,duplications:t.duplications,duplicationsByLine:function(e){if(null==e)return{};var t={};return e.forEach(function(e,n){e.blocks.forEach(function(e){if("1"===e._ref)for(var s=e.from;s<e.from+e.size;s++)s in t||(t[s]=[]),t[s].push(n)})}),t}(t.duplications),duplicatedFiles:t.files};return 1===t.duplications.length&&(n.linePopup={index:0,line:e.line,name:"duplications"}),n})},function(){})},n.handleLinePopupToggle=function(e){var t=e.index,s=e.line,o=e.name,r=e.open;n.setState(function(e){var n=void 0!==e.linePopup&&e.linePopup.name===o&&e.linePopup.line===s&&e.linePopup.index===t;return!1===r||n?!0!==r&&n?{linePopup:void 0}:null:{linePopup:{index:t,line:s,name:o}}})},n.closeLinePopup=function(){n.setState({linePopup:void 0})},n.handleIssuePopupToggle=function(e,t,s){n.setState(function(n){var o=n.issuePopup&&n.issuePopup.name===t&&n.issuePopup.issue===e;return!1===s||o?!0!==s&&o?{issuePopup:void 0}:null:{issuePopup:{issue:e,name:t}}})},n.handleSymbolClick=function(e){n.setState(function(t){return{highlightedSymbols:Object(a.intersection)(t.highlightedSymbols,e).length>0?[]:e}})},n.handleIssueSelect=function(e){n.props.onIssueSelect?n.props.onIssueSelect(e):n.setState({selectedIssue:e})},n.handleIssueUnselect=function(){n.props.onIssueUnselect?n.props.onIssueUnselect():n.setState({selectedIssue:void 0})},n.handleOpenIssues=function(e){n.setState(function(t){return{openIssuesByLine:Qe({},t.openIssuesByLine,(n={},n[e.line]=!0,n))};var n})},n.handleCloseIssues=function(e){n.setState(function(t){return{openIssuesByLine:Qe({},t.openIssuesByLine,(n={},n[e.line]=!1,n))};var n})},n.handleIssueChange=function(e){n.setState(function(t){var n=t.issues,s=(void 0===n?[]:n).map(function(t){return t.key===e.key?e:t});return{issues:s,issuesByLine:He(s)}}),n.props.onIssueChange&&n.props.onIssueChange(e)},n.handleFilterLine=function(e){var t=n.state.component,s=t&&t.leakPeriodDate;return!!s&&(void 0!==e.scmDate&&Object(Ge.e)(e.scmDate)>Object(Ge.e)(s))},n.renderDuplicationPopup=function(e,t){var s=n.state,r=s.component,a=s.duplicatedFiles,i=s.duplications;if(!r||!a)return o.createElement(o.Fragment,null);var c=i&&i[e],l=c&&c.blocks||[],u=l.some(function(e){return void 0===e._ref}),p=!1;return l=l.filter(function(e){var n=e.from>t||e.from+e.size<t,s=!("1"===e._ref)||(n||p),o=void 0!==e._ref&&s;return"1"!==e._ref||n||(p=!0),o}),o.createElement(Ke,{blocks:l,branchLike:n.props.branchLike,duplicatedFiles:a,inRemovedComponent:u,onClose:n.closeLinePopup,sourceViewerFile:r})},n.state={displayDuplications:!1,duplicationsByLine:{},hasSourcesAfter:!1,highlightedSymbols:[],issuesByLine:{},issueLocationsByLine:{},loading:!0,loadingSourcesAfter:!1,loadingSourcesBefore:!1,notAccessible:!1,notExist:!1,openIssuesByLine:{},selectedIssue:t.selectedIssue,sourceRemoved:!1,symbolsByLine:{}},n}return Xe(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.fetchComponent()},t.prototype.componentWillReceiveProps=function(e){e.component===this.props.component&&Object(j.h)(e.branchLike,this.props.branchLike)||this.setState({loading:!0}),void 0!==e.onIssueSelect&&e.selectedIssue!==this.props.selectedIssue&&this.setState({selectedIssue:e.selectedIssue})},t.prototype.componentDidUpdate=function(e){if(e.component===this.props.component&&Object(j.h)(e.branchLike,this.props.branchLike))if(void 0!==this.props.aroundLine&&e.aroundLine!==this.props.aroundLine&&this.isLineOutsideOfRange(this.props.aroundLine))this.fetchSources();else{var t=this.props.selectedIssue,n=this.state.issues;void 0!==t&&void 0!==n&&void 0===n.find(function(e){return e.key===t})&&this.reloadIssues()}else this.fetchComponent()},t.prototype.componentWillUnmount=function(){this.mounted=!1},Object.defineProperty(t.prototype,"safeLoadComponent",{get:function(){return this.props.loadComponent||$e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"safeLoadIssues",{get:function(){return this.props.loadIssues||ze},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"safeLoadSources",{get:function(){return this.props.loadSources||et},enumerable:!0,configurable:!0}),t.prototype.computeCoverageStatus=function(e){return e.map(function(e){return Qe({},e,{coverageStatus:(t=e,null!=t.lineHits&&t.lineHits>0&&(n="partially-covered"),null!=t.lineHits&&t.lineHits>0&&t.conditions===t.coveredConditions&&(n="covered"),0!==t.lineHits&&0!==t.coveredConditions||(n="uncovered"),n)});var t,n})},t.prototype.isLineOutsideOfRange=function(e){var t=this.state.sources;if(t&&t.length>0){var n=t[0],s=t[t.length-1];return e<n.line||e>s.line}return!0},t.prototype.fetchComponent=function(){var e=this;this.setState({loading:!0});this.safeLoadComponent(this.props.component,this.props.branchLike).then(function(t){e.props.onReceiveComponent(t),("FIL"===t.q||"UTS"===t.q?e.loadSources():Promise.resolve([])).then(function(n){return function(t,n){e.safeLoadIssues(e.props.component,1,Ye,e.props.branchLike).then(function(s){if(e.mounted){var o=n.slice(0,Ye);e.setState({component:t,displayDuplications:!1,duplicatedFiles:void 0,duplications:void 0,duplicationsByLine:{},hasSourcesAfter:n.length>Ye,highlightedSymbols:[],issueLocationsByLine:We(s),issues:s,issuesByLine:He(s),linePopup:void 0,loading:!1,notAccessible:!1,notExist:!1,openIssuesByLine:{},issuePopup:void 0,sourceRemoved:!1,sources:e.computeCoverageStatus(o),symbolsByLine:Je(n.slice(0,Ye))},function(){e.props.onLoaded&&e.props.onLoaded(t,o,s)})}},function(){})}(t,n)},function(n){return function(t,n){e.mounted&&(403===t.status?e.setState({component:n,loading:!1,notAccessible:!0}):404===t.status&&e.setState({component:n,loading:!1,sourceRemoved:!0}))}(n,t)})},function(t){var n=t.response;e.mounted&&(403===n.status?e.setState({loading:!1,notAccessible:!0}):404===n.status&&e.setState({loading:!1,notExist:!0}))})},t.prototype.fetchSources=function(){var e=this;this.loadSources().then(function(t){if(e.mounted){var n=t.slice(0,Ye);e.setState({sources:t.slice(0,Ye),hasSourcesAfter:t.length>Ye},function(){e.props.onLoaded&&e.state.component&&e.state.issues&&e.props.onLoaded(e.state.component,n,e.state.issues)})}},function(){})},t.prototype.reloadIssues=function(){var e=this;if(this.state.sources){var t=this.state.sources[0],n=this.state.sources[this.state.sources.length-1];this.safeLoadIssues(this.props.component,t&&t.line,n&&n.line,this.props.branchLike).then(function(t){e.mounted&&e.setState({issues:t,issuesByLine:He(t),issueLocationsByLine:We(t)})},function(){})}},t.prototype.renderCode=function(e){var t=e.length>0&&e[0].line>1;return o.createElement(Be,{branchLike:this.props.branchLike,componentKey:this.props.component,displayAllIssues:this.props.displayAllIssues,displayIssueLocationsCount:this.props.displayIssueLocationsCount,displayIssueLocationsLink:this.props.displayIssueLocationsLink,displayLocationMarkers:this.props.displayLocationMarkers,duplications:this.state.duplications,duplicationsByLine:this.state.duplicationsByLine,filterLine:this.handleFilterLine,hasSourcesAfter:this.state.hasSourcesAfter,hasSourcesBefore:t,highlightedLine:this.props.highlightedLine,highlightedLocationMessage:this.props.highlightedLocationMessage,highlightedLocations:this.props.highlightedLocations,highlightedSymbols:this.state.highlightedSymbols,issueLocationsByLine:this.state.issueLocationsByLine,issuePopup:this.state.issuePopup,issues:this.state.issues,issuesByLine:this.state.issuesByLine,linePopup:this.state.linePopup,loadDuplications:this.loadDuplications,loadSourcesAfter:this.loadSourcesAfter,loadSourcesBefore:this.loadSourcesBefore,loadingSourcesAfter:this.state.loadingSourcesAfter,loadingSourcesBefore:this.state.loadingSourcesBefore,onIssueChange:this.handleIssueChange,onIssuePopupToggle:this.handleIssuePopupToggle,onIssueSelect:this.handleIssueSelect,onIssueUnselect:this.handleIssueUnselect,onIssuesClose:this.handleCloseIssues,onIssuesOpen:this.handleOpenIssues,onLinePopupToggle:this.handleLinePopupToggle,onLocationSelect:this.props.onLocationSelect,onSymbolClick:this.handleSymbolClick,openIssuesByLine:this.state.openIssuesByLine,renderDuplicationPopup:this.renderDuplicationPopup,scroll:this.props.scroll,selectedIssue:this.state.selectedIssue,sources:e,symbolsByLine:this.state.symbolsByLine})},t.prototype.render=function(){var e=this,t=this.state,n=t.component,s=t.loading,a=t.sources,i=t.notAccessible,c=t.sourceRemoved;if(s)return null;if(this.state.notExist)return o.createElement("div",{className:"alert alert-warning spacer-top"},Object(m.l)("component_viewer.no_component"));if(i)return o.createElement("div",{className:"alert alert-warning spacer-top"},Object(m.l)("code_viewer.no_source_code_displayed_due_to_security"));if(!n)return null;var l=r("source-viewer",{"source-duplications-expanded":this.state.displayDuplications});return o.createElement("div",{className:l,ref:function(t){return e.node=t}},this.state.component&&o.createElement(G,{branchLike:this.props.branchLike,sourceViewerFile:this.state.component}),c&&o.createElement("div",{className:"alert alert-warning spacer-top"},Object(m.l)("code_viewer.no_source_code_displayed_due_to_source_removed")),!c&&void 0!==a&&this.renderCode(a))},t.defaultProps={displayAllIssues:!1,displayIssueLocationsCount:!0,displayIssueLocationsLink:!0,displayLocationMarkers:!0},t}(o.PureComponent);function $e(e,t){return Promise.all([Object(re.k)(Qe({component:e},Object(j.c)(t))),Object(re.j)(Qe({component:e},Object(j.c)(t)))]).then(function(e){var t=e[0],n=e[1];return Qe({},t,{leakPeriodDate:n.leakPeriodDate&&Object(Ge.e)(n.leakPeriodDate)})})}function et(e,t,n,s){return Object(re.r)(Qe({key:e,from:t,to:n},Object(j.c)(s)))}var tt=n(86),nt={onReceiveComponent:function(e){return function(t){if(e.canMarkAsFavorite){var n=[],s=[];e.fav?n.push({key:e.key}):s.push({key:e.key}),t(Object(tt.d)(n,s))}}}};t.a=Object(s.connect)(null,nt)(Ze)},1060:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var s=n(0),o=n.n(s),r=n(6),a=n.n(r),i=(n(1142),Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}),c=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&(n[s[o]]=e[s[o]])}return n};function l(e){var t=e.children,n=e.leading,s=e.onClick,r=e.selected,l=c(e,["children","leading","onClick","selected"]),u=s?{onClick:s,role:"button",tabIndex:0}:{};return o.a.createElement("div",i({className:a()("location-index",{"is-leading":n,selected:r})},u,l),t)}l.defaultProps={selected:!1}},1088:function(e,t,n){"use strict";var s=n(0),o=n.n(s),r=n(187),a=n.n(r),i=n(5),c=n.n(i),l=n(6),u=n.n(l),p=n(2),m=n(996),h=n(234),d=n(1),f=n(70),g=n(994),y=n(148),v=n(50);function b(e){var t,n=e.diff;if("file"===n.key)return o.a.createElement("p",null,Object(d.m)("issue.change.file_move",n.oldValue||"",n.newValue||""));if("from_long_branch"===n.key)return o.a.createElement("p",null,Object(d.m)("issue.change.from_long_branch",n.oldValue||"",n.newValue||""));if("from_short_branch"===n.key)return o.a.createElement("p",null,Object(d.m)("issue.change.from_short_branch",n.oldValue||"",n.newValue||""));if(null!=n.newValue){var s=n.newValue;"effort"===n.key&&(s=Object(v.formatMeasure)(n.newValue,"WORK_DUR")),t=Object(d.m)("issue.changelog.changed_to",Object(d.l)("issue.changelog.field",n.key),s)}else t=Object(d.m)("issue.changelog.removed",Object(d.l)("issue.changelog.field",n.key));if(null!=n.oldValue){var r=n.oldValue;"effort"===n.key&&(r=Object(v.formatMeasure)(n.oldValue,"WORK_DUR")),t+=" ("+Object(d.m)("issue.changelog.was",r)+")"}return o.a.createElement("p",null,t)}var E,O=(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={changelogs:[]},t}return O(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.loadChangelog()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.loadChangelog=function(){var e=this;Object(h.g)(this.props.issue.key).then(function(t){e.mounted&&e.setState({changelogs:t})},this.props.onFail)},t.prototype.render=function(){var e=this.props.issue,t=e.author;return o.a.createElement(g.a,{position:this.props.popupPosition,customClass:"bubble-popup-bottom-right"},o.a.createElement("div",{className:"issue-changelog"},o.a.createElement("table",{className:"spaced"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{className:"thin text-left text-top nowrap"},o.a.createElement(y.a,{date:e.creationDate})),o.a.createElement("td",{className:"text-left text-top"},t?Object(d.l)("created_by")+" "+t:Object(d.l)("created"))),this.state.changelogs.map(function(e,t){return o.a.createElement("tr",{key:t},o.a.createElement("td",{className:"thin text-left text-top nowrap"},o.a.createElement(y.a,{date:e.creationDate})),o.a.createElement("td",{className:"text-left text-top"},e.userName&&o.a.createElement("p",null,o.a.createElement(f.a,{className:"little-spacer-right",hash:e.avatar,name:e.userName,size:16}),e.userName),e.diffs.map(function(e){return o.a.createElement(b,{key:e.key,diff:e})})))})))))},t}(o.a.PureComponent),k=n(237),j=n(25),N=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){e.preventDefault(),t.toggleChangelog()},t.toggleChangelog=function(e){t.props.togglePopup("changelog",e)},t}return N(t,e),t.prototype.render=function(){return o.a.createElement(m.a,{isOpen:this.props.isOpen,position:"bottomright",togglePopup:this.toggleChangelog,popup:o.a.createElement(_,{issue:this.props.issue,onFail:this.props.onFail})},o.a.createElement(j.a,{mouseEnterDelay:.5,overlay:o.a.createElement(y.a,{date:this.props.creationDate})},o.a.createElement("button",{className:"button-link issue-action issue-action-with-options js-issue-show-changelog",onClick:this.handleClick},o.a.createElement("span",{className:"issue-meta-label"},o.a.createElement(k.a,{date:this.props.creationDate})),o.a.createElement("i",{className:"icon-dropdown little-spacer-left"}))))},t}(o.a.PureComponent),C=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){e.preventDefault(),e.stopPropagation(),t.context.workspace.openRule({key:t.props.rule,organization:t.props.organization})},t}return C(t,e),t.prototype.render=function(){return o.a.createElement("div",{className:"issue-message"},this.props.message,o.a.createElement("button",{className:"button-link issue-rule icon-ellipsis-h little-spacer-left","aria-label":Object(d.l)("issue.rule_details"),onClick:this.handleClick}))},t.contextTypes={workspace:c.a.object.isRequired},t}(o.a.PureComponent),w=n(4),S=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleSelect=function(e){e.preventDefault(),t.props.onSelect&&t.props.onSelect(t.props.item)},t.handleHover=function(){t.props.onHover&&t.props.onHover(t.props.item)},t}return S(t,e),t.prototype.renderLink=function(){var e=this.props.item;return this.props.children&&(e=this.props.children),o.a.createElement("li",null,o.a.createElement("a",{href:"#",className:u()({active:this.props.active===this.props.item}),onClick:this.handleSelect,onMouseOver:this.handleHover,onFocus:this.handleHover},e))},t.prototype.render=function(){return o.a.createElement(j.a,{overlay:this.props.title||void 0,placement:"right"},this.renderLink())},t}(o.a.PureComponent),T=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),A=function(e){function t(t){var n=e.call(this,t)||this;return n.attachShortcuts=function(){n.previousKeyScope=a.a.getScope(),n.previousFilter=a.a.filter,n.currentKeyScope=Object(w.uniqueId)("key-scope"),a.a.setScope(n.currentKeyScope),a.a.filter=function(e){var t=(e.target||e.srcElement).tagName,n="INPUT"===t||"SELECT"===t||"TEXTAREA"===t;return[13,38,40].includes(e.keyCode)||!n},a()("down",n.currentKeyScope,function(){return n.setState(n.selectNextElement),!1}),a()("up",n.currentKeyScope,function(){return n.setState(n.selectPreviousElement),!1}),a()("return",n.currentKeyScope,function(){return null!=n.state.active&&n.handleSelect(n.state.active),!1})},n.detachShortcuts=function(){a.a.setScope(n.previousKeyScope),a.a.deleteScope(n.currentKeyScope),a.a.filter=n.previousFilter},n.handleSelect=function(e){n.props.onSelect(e)},n.handleHover=function(e){n.setState({active:e})},n.selectNextElement=function(e,t){var n=t.items.indexOf(e.active);return n<0?{active:t.items[0]}:{active:t.items[(n+1)%t.items.length]}},n.selectPreviousElement=function(e,t){var n=t.items.indexOf(e.active);return n<=0?{active:t.items[t.items.length-1]}:{active:t.items[n-1]}},n.renderChild=function(e){return null==e?null:e.type!==I?e:o.a.cloneElement(e,{active:n.state.active,onHover:n.handleHover,onSelect:n.handleSelect})},n.state={active:t.currentItem},n}return T(t,e),t.prototype.componentDidMount=function(){this.attachShortcuts()},t.prototype.componentWillReceiveProps=function(e){e.currentItem===this.props.currentItem||e.items.includes(this.state.active)||this.setState({active:e.currentItem})},t.prototype.componentWillUnmount=function(){this.detachShortcuts()},t.prototype.render=function(){var e=this,t=this.props.children,n=o.a.Children.count(t)>0;return o.a.createElement("ul",{className:u()("menu",this.props.className)},n&&o.a.Children.map(t,this.renderChild),!n&&this.props.items.map(function(t){return o.a.createElement(I,{active:e.state.active,item:t,key:t,onHover:e.handleHover,onSelect:e.handleSelect})}))},t}(o.a.PureComponent),x=n(1003);function F(e){var t=u()("icon-status-"+e.status.toLowerCase(),e.className);return o.a.createElement("i",{className:t})}function M(e){var t=null!=e.resolution&&" ("+Object(d.l)("issue.resolution",e.resolution)+")";return o.a.createElement("span",{className:e.className},o.a.createElement(F,{className:"little-spacer-right",status:e.status}),Object(d.l)("issue.status",e.status),t)}var D=n(53),B=n(1001),R=n(235),K=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleSelect=function(e){t.props.onFilter(e,t.props.issue)},t}return K(t,e),t.prototype.render=function(){var e=this.props.issue,t=["type","severity","status","resolution","assignee","rule"].concat((e.tags||[]).map(function(e){return"tag###"+e}),["project",e.subProject?"module":void 0,"file"]).filter(function(e){return e});return o.a.createElement(g.a,{position:this.props.popupPosition,customClass:"bubble-popup-menu bubble-popup-bottom-right"},o.a.createElement("header",{className:"menu-search"},o.a.createElement("h6",null,Object(d.l)("issue.filter_similar_issues"))),o.a.createElement(A,{className:"issues-similar-issues-menu",currentItem:t[0],items:t,onSelect:this.handleSelect},o.a.createElement(I,{item:"type"},o.a.createElement(B.a,{className:"little-spacer-right",query:e.type}),Object(d.l)("issue.type",e.type)),o.a.createElement(I,{item:"severity"},o.a.createElement(x.a,{severity:e.severity})),o.a.createElement(I,{item:"status"},o.a.createElement(M,{status:e.status})),o.a.createElement(I,{item:"resolution"},null!=e.resolution?Object(d.l)("issue.resolution",e.resolution):Object(d.l)("unresolved")),o.a.createElement(I,{item:"assignee"},null!=e.assignee?o.a.createElement("span",null,Object(d.l)("assigned_to"),o.a.createElement(f.a,{className:"little-spacer-left little-spacer-right",hash:e.assigneeAvatar,name:e.assigneeName,size:16}),e.assigneeName):Object(d.l)("unassigned")),o.a.createElement("li",{className:"divider"}),o.a.createElement(I,{item:"rule"},Object(R.d)(e.ruleName)),null!=e.tags&&e.tags.map(function(e){return o.a.createElement(I,{key:"tag###"+e,item:"tag###"+e},o.a.createElement("i",{className:"icon-tags icon-half-transparent little-spacer-right"}),e)}),o.a.createElement("li",{className:"divider"}),o.a.createElement(I,{item:"project"},o.a.createElement(D.a,{className:"little-spacer-right",qualifier:"TRK"}),e.projectName),null!=e.subProject&&o.a.createElement(I,{item:"module"},o.a.createElement(D.a,{className:"little-spacer-right",qualifier:"BRC"}),e.subProjectName),o.a.createElement(I,{item:"file"},o.a.createElement(D.a,{className:"little-spacer-right",qualifier:e.componentQualifier}),Object(R.c)(e.componentLongName))))},t}(o.a.PureComponent),q=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){e.preventDefault(),t.togglePopup()},t.handleFilter=function(e,n){t.togglePopup(!1),t.props.onFilter(e,n)},t.togglePopup=function(e){t.props.togglePopup("similarIssues",e)},t}return q(t,e),t.prototype.render=function(){return o.a.createElement(m.a,{isOpen:this.props.isOpen,position:"bottomright",togglePopup:this.togglePopup,popup:o.a.createElement(U,{issue:this.props.issue,onFilter:this.handleFilter})},o.a.createElement("button",{className:"js-issue-filter button-link issue-action issue-action-with-options","aria-label":Object(d.l)("issue.filter_similar_issues"),onClick:this.handleClick},o.a.createElement("i",{className:"icon-filter icon-half-transparent"})," ",o.a.createElement("i",{className:"icon-dropdown"})))},t}(o.a.PureComponent),z=n(245),H=n(1060),W=n(59),J=n(38),G=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},X=function(e){return e.stopPropagation()};function Q(e){var t=e.issue,n=null!=e.onFilter,s=t.secondaryLocations.length+t.flows.reduce(function(e,t){return e+t.length},0),r=o.a.createElement(j.a,{overlay:Object(d.m)("issue.this_issue_involves_x_code_locations",Object(v.formatMeasure)(s))},o.a.createElement(H.a,null,s)),a=e.displayLocationsCount&&s>0,i=Object(J.g)(t.project,G({},Object(W.c)(e.branchLike),{issues:t.key,open:t.key}));return o.a.createElement("div",{className:"issue-row"},o.a.createElement(L,{message:t.message,rule:t.rule,organization:t.organization}),o.a.createElement("div",{className:"issue-row-meta"},o.a.createElement("ul",{className:"list-inline issue-meta-list"},o.a.createElement("li",{className:"issue-meta"},o.a.createElement(P,{creationDate:t.creationDate,isOpen:"changelog"===e.currentPopup,issue:t,togglePopup:e.togglePopup,onFail:e.onFail})),null!=t.textRange&&o.a.createElement("li",{className:"issue-meta"},o.a.createElement("span",{className:"issue-meta-label",title:Object(d.l)("line_number")},"L",t.textRange.endLine)),a&&o.a.createElement("li",{className:"issue-meta"},e.displayLocationsLink?o.a.createElement(p.Link,{onClick:X,target:"_blank",to:i},r):r),o.a.createElement("li",{className:"issue-meta"},o.a.createElement(p.Link,{className:"js-issue-permalink link-no-underline",onClick:X,target:"_blank",to:i},o.a.createElement(z.a,null))),n&&o.a.createElement("li",{className:"issue-meta"},o.a.createElement(V,{isOpen:"similarIssues"===e.currentPopup,issue:t,togglePopup:e.togglePopup,onFail:e.onFail,onFilter:e.onFilter})))))}var Y=n(10),Z=n(47),$=n(34),ee=n(88),te=n(7),ne=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),se=10,oe=function(e){function t(t){var n=e.call(this,t)||this;return n.searchMembers=function(e){Object($.i)({organization:n.props.issue.projectOrganization,q:e,ps:se}).then(n.handleSearchResult,n.props.onFail)},n.searchUsers=function(e){return Object(ee.g)({q:e,ps:se}).then(n.handleSearchResult,n.props.onFail)},n.handleSearchResult=function(e){n.setState({users:e.users,currentUser:e.users.length>0?e.users[0].login:""})},n.handleSearchChange=function(e){0===e.length?n.setState({query:e,users:n.defaultUsersArray,currentUser:n.defaultUsersArray[0].login}):(n.setState({query:e}),n.context.organizationsEnabled?n.searchMembers(e):n.searchUsers(e))},n.defaultUsersArray=[{login:"",name:Object(d.l)("unassigned")}],t.currentUser.isLoggedIn&&(n.defaultUsersArray=[t.currentUser].concat(n.defaultUsersArray)),n.state={query:"",users:n.defaultUsersArray,currentUser:n.defaultUsersArray.length>0?n.defaultUsersArray[0].login:""},n}return ne(t,e),t.prototype.render=function(){return o.a.createElement(g.a,{customClass:"bubble-popup-menu bubble-popup-bottom",position:this.props.popupPosition},o.a.createElement("div",{className:"multi-select"},o.a.createElement("div",{className:"menu-search"},o.a.createElement(Z.a,{autoFocus:!0,className:"little-spacer-top",minLength:2,onChange:this.handleSearchChange,placeholder:Object(d.l)("search.search_for_users"),value:this.state.query})),o.a.createElement(A,{currentItem:this.state.currentUser,items:Object(w.map)(this.state.users,"login"),onSelect:this.props.onSelect},this.state.users.map(function(e){return o.a.createElement(I,{key:e.login,item:e.login},!!e.login&&o.a.createElement(f.a,{className:"spacer-right",hash:e.avatar,name:e.name,size:16}),o.a.createElement("span",{className:"vertical-middle",style:{marginLeft:e.login?void 0:24}},e.name))}))))},t.contextTypes={organizationsEnabled:i.bool},t}(o.a.PureComponent),re=Object(Y.connect)(function(e){return{currentUser:Object(te.getCurrentUser)(e)}})(oe),ae=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggleAssign=function(e){t.props.togglePopup("assign",e)},t}return ae(t,e),t.prototype.renderAssignee=function(){var e=this.props.issue;return o.a.createElement("span",null,e.assignee&&o.a.createElement("span",{className:"text-top"},o.a.createElement(f.a,{className:"little-spacer-right",hash:e.assigneeAvatar,name:e.assigneeName,size:16})),o.a.createElement("span",{className:"issue-meta-label"},e.assignee?e.assigneeName:Object(d.l)("unassigned")))},t.prototype.render=function(){return this.props.canAssign?o.a.createElement(m.a,{isOpen:this.props.isOpen&&this.props.canAssign,position:"bottomleft",togglePopup:this.toggleAssign,popup:o.a.createElement(re,{issue:this.props.issue,onFail:this.props.onFail,onSelect:this.props.onAssign})},o.a.createElement("button",{className:"button-link issue-action issue-action-with-options js-issue-assign",onClick:this.toggleAssign},this.renderAssignee(),o.a.createElement("i",{className:"little-spacer-left icon-dropdown"}))):this.renderAssignee()},t}(o.a.PureComponent),ce=n(259),le=function(e,t,n,s,o){var r=null!=s&&null!=o;r&&e(o),n.then(function(t){if(!r){var n=Object(ce.a)(t.issue,t.components,t.users,t.rules);e(n)}},function(n){t(n),r&&e(s)})},ue=n(1061),pe=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),me=function(e){function t(t){var n=e.call(this,t)||this;return n.handleCommentChange=function(e){n.setState({textComment:e.target.value})},n.handleCommentClick=function(){n.state.textComment.trim().length>0&&n.props.onComment(n.state.textComment)},n.handleCancelClick=function(e){e.preventDefault(),n.props.toggleComment(!1)},n.handleKeyboard=function(e){13===e.keyCode&&(e.metaKey||e.ctrlKey)?n.handleCommentClick():[37,38,39,40].includes(e.keyCode)&&e.stopPropagation()},n.state={textComment:t.comment?t.comment.markdown:""},n}return pe(t,e),t.prototype.render=function(){var e=this.props.comment;return o.a.createElement(g.a,{position:this.props.popupPosition,customClass:u()(this.props.customClass,"bubble-popup-bottom-right")},o.a.createElement("div",{className:"issue-comment-form-text"},o.a.createElement("textarea",{autoFocus:!0,placeholder:this.props.placeholder,onChange:this.handleCommentChange,onKeyDown:this.handleKeyboard,value:this.state.textComment,rows:"2"})),o.a.createElement("div",{className:"issue-comment-form-footer"},o.a.createElement("div",{className:"issue-comment-form-actions"},o.a.createElement("button",{className:"js-issue-comment-submit little-spacer-right",disabled:this.state.textComment.trim().length<1,onClick:this.handleCommentClick},e&&Object(d.l)("save"),!e&&Object(d.l)("issue.comment.submit")),o.a.createElement("a",{href:"#",className:"js-issue-comment-cancel",onClick:this.handleCancelClick},Object(d.l)("cancel"))),o.a.createElement("div",{className:"issue-comment-form-tips"},o.a.createElement(ue.a,null))))},t}(o.a.PureComponent),he=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),de=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.addComment=function(e){le(t.props.onChange,t.props.onFail,Object(h.a)({issue:t.props.issueKey,text:e})),t.props.toggleComment(!1)},t.handleCommentClick=function(){return t.props.toggleComment()},t}return he(t,e),t.prototype.render=function(){return o.a.createElement("li",{className:"issue-meta"},o.a.createElement(m.a,{isOpen:"comment"===this.props.currentPopup,position:"bottomleft",togglePopup:this.props.toggleComment,popup:o.a.createElement(me,{customClass:"issue-comment-bubble-popup",placeholder:this.props.commentPlaceholder,onComment:this.addComment,toggleComment:this.props.toggleComment})},o.a.createElement("button",{className:"button-link issue-action js-issue-comment",onClick:this.handleCommentClick},o.a.createElement("span",{className:"issue-meta-label"},Object(d.l)("issue.comment.formlink")))))},t}(o.a.PureComponent),fe=n(1024),ge=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),ye=["BLOCKER","CRITICAL","MAJOR","MINOR","INFO"],ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ge(t,e),t.prototype.render=function(){return o.a.createElement(g.a,{position:this.props.popupPosition,customClass:"bubble-popup-menu bubble-popup-bottom"},o.a.createElement(A,{items:ye,currentItem:this.props.issue.severity,onSelect:this.props.onSelect},ye.map(function(e){return o.a.createElement(I,{key:e,item:e},o.a.createElement(fe.a,{className:"little-spacer-right",severity:e}),Object(d.l)("severity",e))})))},t}(o.a.PureComponent),be=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggleSetSeverity=function(e){t.props.togglePopup("set-severity",e)},t.setSeverity=function(e){return t.props.setIssueProperty("severity","set-severity",h.k,e)},t}return be(t,e),t.prototype.render=function(){var e=this.props.issue;return this.props.canSetSeverity?o.a.createElement(m.a,{isOpen:this.props.isOpen&&this.props.canSetSeverity,position:"bottomleft",togglePopup:this.toggleSetSeverity,popup:o.a.createElement(ve,{issue:e,onSelect:this.setSeverity})},o.a.createElement("button",{className:"button-link issue-action issue-action-with-options js-issue-set-severity",onClick:this.toggleSetSeverity},o.a.createElement(x.a,{className:"issue-meta-label little-spacer-right",severity:e.severity}),o.a.createElement("i",{className:"little-spacer-left icon-dropdown"}))):o.a.createElement(x.a,{className:"issue-meta-label",severity:e.severity})},t}(o.a.PureComponent),Oe=n(1062),_e=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),ke=10,je=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={searchResult:[]},t.onSearch=function(e){return Object(h.h)({q:e,ps:Math.min(t.props.selectedTags.length-1+ke,100),organization:t.props.organization}).then(function(e){t.mounted&&t.setState({searchResult:e})},function(){})},t.onSelect=function(e){t.props.setTags(t.props.selectedTags.concat([e]))},t.onUnselect=function(e){t.props.setTags(Object(w.without)(t.props.selectedTags,e))},t}return _e(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=Object(w.difference)(this.state.searchResult,this.props.selectedTags);return s.createElement(Oe.a,{listSize:ke,onSearch:this.onSearch,onSelect:this.onSelect,onUnselect:this.onUnselect,position:this.props.popupPosition,selectedTags:this.props.selectedTags,tags:e})},t}(s.PureComponent),Ne=n(1028),Pe=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Ce=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Le=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggleSetTags=function(e){t.props.togglePopup("edit-tags",e)},t.setTags=function(e){var n=t.props.issue,s=Ce({},n,{tags:e});le(t.props.onChange,t.props.onFail,Object(h.l)({issue:n.key,tags:e.join(",")}),n,s)},t}return Pe(t,e),t.prototype.render=function(){var e=this.props.issue,t=e.tags,n=void 0===t?[]:t;return this.props.canSetTags?o.a.createElement(m.a,{isOpen:this.props.isOpen,popup:o.a.createElement(je,{organization:e.projectOrganization,selectedTags:n,setTags:this.setTags}),position:"bottomright",togglePopup:this.toggleSetTags},o.a.createElement("button",{className:"js-issue-edit-tags button-link issue-action issue-action-with-options",onClick:this.toggleSetTags},o.a.createElement(Ne.a,{allowUpdate:this.props.canSetTags,tags:e.tags&&e.tags.length>0?e.tags:[Object(d.l)("issue.no_tag")]}))):o.a.createElement(Ne.a,{allowUpdate:this.props.canSetTags,className:"note",tags:e.tags&&e.tags.length>0?e.tags:[Object(d.l)("issue.no_tag")]})},t}(o.a.PureComponent),we=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return we(t,e),t.prototype.render=function(){var e=this.props.transitions;return o.a.createElement(g.a,{position:this.props.popupPosition,customClass:"bubble-popup-menu bubble-popup-bottom"},o.a.createElement(A,{items:e,currentItem:e[0],onSelect:this.props.onSelect},e.map(function(e){return o.a.createElement(I,{key:e,item:e,title:Object(d.l)("issue.transition",e,"description")},Object(d.l)("issue.transition",e))})))},t}(o.a.PureComponent),Ie=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Te=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setTransition=function(e){le(t.props.onChange,t.props.onFail,Object(h.m)({issue:t.props.issue.key,transition:e})),t.toggleSetTransition()},t.toggleSetTransition=function(e){t.props.togglePopup("transition",e)},t}return Ie(t,e),t.prototype.render=function(){var e=this.props.issue;return this.props.hasTransitions?o.a.createElement(m.a,{isOpen:this.props.isOpen&&this.props.hasTransitions,position:"bottomleft",togglePopup:this.toggleSetTransition,popup:o.a.createElement(Se,{transitions:e.transitions,onSelect:this.setTransition})},o.a.createElement("button",{className:"button-link issue-action issue-action-with-options js-issue-transition",onClick:this.toggleSetTransition},o.a.createElement(M,{className:"issue-meta-label little-spacer-right",status:e.status,resolution:e.resolution}),o.a.createElement("i",{className:"little-spacer-left icon-dropdown"}))):o.a.createElement(M,{className:"issue-meta-label",status:e.status,resolution:e.resolution})},t}(o.a.PureComponent),Ae=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),xe=["BUG","VULNERABILITY","CODE_SMELL"],Fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ae(t,e),t.prototype.render=function(){return o.a.createElement(g.a,{position:this.props.popupPosition,customClass:"bubble-popup-menu bubble-popup-bottom"},o.a.createElement(A,{items:xe,currentItem:this.props.issue.type,onSelect:this.props.onSelect},xe.map(function(e){return o.a.createElement(I,{key:e,item:e},o.a.createElement(B.a,{className:"little-spacer-right",query:e}),Object(d.l)("issue.type",e))})))},t}(o.a.PureComponent),Me=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),De=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggleSetType=function(e){t.props.togglePopup("set-type",e)},t.setType=function(e){return t.props.setIssueProperty("type","set-type",h.n,e)},t}return Me(t,e),t.prototype.render=function(){var e=this.props.issue;return this.props.canSetSeverity?o.a.createElement(m.a,{isOpen:this.props.isOpen&&this.props.canSetSeverity,position:"bottomleft",togglePopup:this.toggleSetType,popup:o.a.createElement(Fe,{issue:e,onSelect:this.setType})},o.a.createElement("button",{className:"button-link issue-action issue-action-with-options js-issue-set-type",onClick:this.toggleSetType},o.a.createElement(B.a,{className:"little-spacer-right",query:e.type}),Object(d.l)("issue.type",e.type),o.a.createElement("i",{className:"little-spacer-left icon-dropdown"}))):o.a.createElement("span",null,o.a.createElement(B.a,{className:"little-spacer-right",query:e.type}),Object(d.l)("issue.type",e.type))},t}(o.a.PureComponent),Be=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Re=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={commentPlaceholder:""},t.setIssueProperty=function(e,n,s,o){var r,a,i=t.props.issue;if(i[e]!==o){var c=Re({},i,((r={})[e]=o,r));le(t.props.onChange,t.props.onFail,s(((a={issue:i.key})[e]=o,a)),i,c)}t.props.togglePopup(n,!1)},t.toggleComment=function(e,n){t.setState({commentPlaceholder:n||""}),t.props.togglePopup("comment",e)},t.handleTransition=function(e){t.props.onChange(e),["FALSE-POSITIVE","WONTFIX"].includes(e.resolution)&&t.toggleComment(!0,Object(d.l)("issue.comment.tell_why"))},t}return Be(t,e),t.prototype.render=function(){var e=this.props.issue,t=e.actions.includes("assign"),n=e.actions.includes("comment"),s=e.actions.includes("set_severity"),r=e.actions.includes("set_tags"),a=e.transitions&&e.transitions.length>0;return o.a.createElement("table",{className:"issue-table"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("ul",{className:"list-inline issue-meta-list"},o.a.createElement("li",{className:"issue-meta"},o.a.createElement(De,{isOpen:"set-type"===this.props.currentPopup&&s,issue:e,canSetSeverity:s,togglePopup:this.props.togglePopup,setIssueProperty:this.setIssueProperty})),o.a.createElement("li",{className:"issue-meta"},o.a.createElement(Ee,{isOpen:"set-severity"===this.props.currentPopup&&s,issue:e,canSetSeverity:s,togglePopup:this.props.togglePopup,setIssueProperty:this.setIssueProperty})),o.a.createElement("li",{className:"issue-meta"},o.a.createElement(Te,{isOpen:"transition"===this.props.currentPopup&&a,issue:e,hasTransitions:a,onChange:this.handleTransition,onFail:this.props.onFail,togglePopup:this.props.togglePopup})),o.a.createElement("li",{className:"issue-meta"},o.a.createElement(ie,{isOpen:"assign"===this.props.currentPopup&&t,issue:e,canAssign:t,onAssign:this.props.onAssign,onFail:this.props.onFail,togglePopup:this.props.togglePopup})),e.effort&&o.a.createElement("li",{className:"issue-meta"},o.a.createElement("span",{className:"issue-meta-label"},Object(d.m)("issue.x_effort",e.effort))),n&&o.a.createElement(de,{commentPlaceholder:this.state.commentPlaceholder,currentPopup:this.props.currentPopup,issueKey:e.key,onChange:this.props.onChange,onFail:this.props.onFail,toggleComment:this.toggleComment}))),o.a.createElement("td",{className:"issue-table-meta-cell"},o.a.createElement("ul",{className:"list-inline"},o.a.createElement("li",{className:"issue-meta js-issue-tags"},o.a.createElement(Le,{isOpen:"edit-tags"===this.props.currentPopup&&r,canSetTags:r,issue:e,onChange:this.props.onChange,onFail:this.props.onFail,togglePopup:this.props.togglePopup})))))))},t}(o.a.PureComponent),Ue=n(11);function qe(e){return o.a.createElement(g.a,{position:e.popupPosition,customClass:"bubble-popup-bottom-right"},o.a.createElement("div",{className:"text-right"},o.a.createElement("div",{className:"spacer-bottom"},Object(d.l)("issue.comment.delete_confirm_message")),o.a.createElement("button",{className:"button-red",onClick:e.onDelete},Object(d.l)("delete"))))}var Ve=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),ze=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={openPopup:""},t.handleCommentClick=function(e){"A"===e.target.tagName&&e.stopPropagation()},t.handleEdit=function(e){t.props.onEdit(t.props.comment.key,e),t.toggleEditPopup(!1)},t.handleDelete=function(){t.props.onDelete(t.props.comment.key),t.toggleDeletePopup(!1)},t.togglePopup=function(e,n){t.setState(function(t){return t.openPopup!==e&&!1!==n?{openPopup:e}:t.openPopup===e&&!0!==n?{openPopup:""}:t})},t.toggleDeletePopup=function(e){return t.togglePopup("delete",e)},t.toggleEditPopup=function(e){return t.togglePopup("edit",e)},t}return Ve(t,e),t.prototype.render=function(){var e=this.props.comment;return o.a.createElement("div",{className:"issue-comment"},o.a.createElement("div",{className:"issue-comment-author",title:e.authorName},o.a.createElement(f.a,{className:"little-spacer-right",hash:e.authorAvatar,name:e.authorName,size:16}),e.authorName),o.a.createElement("div",{className:"issue-comment-text markdown",dangerouslySetInnerHTML:{__html:e.htmlText},onClick:this.handleCommentClick,role:"Listitem",tabIndex:0}),o.a.createElement("div",{className:"issue-comment-age"},o.a.createElement(k.a,{date:e.createdAt})),o.a.createElement("div",{className:"issue-comment-actions"},e.updatable&&o.a.createElement(m.a,{className:"bubble-popup-helper-inline",isOpen:"edit"===this.state.openPopup,offset:{vertical:0,horizontal:-6},position:"bottomright",togglePopup:this.toggleDeletePopup,popup:o.a.createElement(me,{comment:e,customClass:"issue-edit-comment-bubble-popup",onComment:this.handleEdit,placeholder:"",toggleComment:this.toggleEditPopup})},o.a.createElement(Ue.d,{className:"js-issue-comment-edit button-small",onClick:this.toggleEditPopup})),e.updatable&&o.a.createElement(m.a,{className:"bubble-popup-helper-inline",isOpen:"delete"===this.state.openPopup,offset:{vertical:0,horizontal:-10},position:"bottomright",togglePopup:this.toggleDeletePopup,popup:o.a.createElement(qe,{onDelete:this.handleDelete})},o.a.createElement(Ue.c,{className:"js-issue-comment-delete button-small",onClick:this.toggleDeletePopup}))))},t}(o.a.PureComponent),He=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),We=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCheck=function(e){e.preventDefault(),e.stopPropagation(),t.props.onCheck&&t.props.onCheck(t.props.issue.key,e)},t.handleClick=function(e){e.preventDefault(),t.props.onClick&&t.props.onClick(t.props.issue.key)},t.editComment=function(e,n){le(t.props.onChange,t.props.onFail,Object(h.d)({comment:e,text:n}))},t.deleteComment=function(e){le(t.props.onChange,t.props.onFail,Object(h.c)({comment:e}))},t}return He(t,e),t.prototype.render=function(){var e=this,t=this.props.issue,n=null!=this.props.onCheck,s=u()("issue",{"issue-with-checkbox":n,selected:this.props.selected});return o.a.createElement("div",{className:s,"data-issue":t.key,onClick:this.handleClick,role:"listitem",tabIndex:0},o.a.createElement(Q,{branchLike:this.props.branchLike,currentPopup:this.props.currentPopup,displayLocationsCount:this.props.displayLocationsCount,displayLocationsLink:this.props.displayLocationsLink,issue:t,onFail:this.props.onFail,onFilter:this.props.onFilter,togglePopup:this.props.togglePopup}),o.a.createElement(Ke,{issue:t,currentPopup:this.props.currentPopup,onAssign:this.props.onAssign,onFail:this.props.onFail,togglePopup:this.props.togglePopup,onChange:this.props.onChange}),t.comments&&t.comments.length>0&&o.a.createElement("div",{className:"issue-comments"},t.comments.map(function(t){return o.a.createElement(ze,{comment:t,key:t.key,onEdit:e.editComment,onDelete:e.deleteComment})})),o.a.createElement("a",{className:"issue-navigate js-issue-navigate"},o.a.createElement("i",{className:"issue-navigate-to-left icon-chevron-left"}),o.a.createElement("i",{className:"issue-navigate-to-right icon-chevron-right"})),n&&o.a.createElement("a",{className:"js-toggle issue-checkbox-container",href:"#",onClick:this.handleCheck},o.a.createElement("i",{className:u()("issue-checkbox","icon-checkbox",{"icon-checkbox-checked":this.props.checked})})))},t}(o.a.PureComponent),Je=n(43),Ge=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Xe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.togglePopup=function(e,n){t.props.onPopupToggle(t.props.issue.key,e,n)},t.handleAssignement=function(e){var n=t.props.issue;n.assignee!==e&&le(t.props.onChange,t.handleFail,Object(h.j)({issue:n.key,assignee:e})),t.togglePopup("assign",!1)},t.handleFail=function(e){Object(Je.g)(t.context.store.dispatch)(e)},t}return Ge(t,e),t.prototype.componentDidMount=function(){this.props.selected&&this.bindShortcuts()},t.prototype.componentWillUpdate=function(e){!e.selected&&this.props.selected&&this.unbindShortcuts()},t.prototype.componentDidUpdate=function(e){!e.selected&&this.props.selected&&this.bindShortcuts()},t.prototype.componentWillUnmount=function(){this.props.selected&&this.unbindShortcuts()},t.prototype.bindShortcuts=function(){var e=this;a()("f","issues",function(){return e.togglePopup("transition"),!1}),a()("a","issues",function(){return e.togglePopup("assign"),!1}),a()("m","issues",function(){return e.props.issue.actions.includes("assign")&&e.handleAssignement("_me"),!1}),a()("i","issues",function(){return e.togglePopup("set-severity"),!1}),a()("c","issues",function(){return e.togglePopup("comment"),!1}),a()("t","issues",function(){return e.togglePopup("edit-tags"),!1}),a()("space","issues",function(t){if(e.props.onCheck)return e.props.onCheck(e.props.issue.key,t),!1})},t.prototype.unbindShortcuts=function(){a.a.unbind("f","issues"),a.a.unbind("a","issues"),a.a.unbind("m","issues"),a.a.unbind("i","issues"),a.a.unbind("c","issues"),a.a.unbind("space","issues"),a.a.unbind("t","issues")},t.prototype.render=function(){return o.a.createElement(We,{branchLike:this.props.branchLike,checked:this.props.checked,currentPopup:this.props.openPopup,displayLocationsCount:this.props.displayLocationsCount,displayLocationsLink:this.props.displayLocationsLink,issue:this.props.issue,onAssign:this.handleAssignement,onCheck:this.props.onCheck,onClick:this.props.onClick,onFail:this.handleFail,onFilter:this.props.onFilter,onChange:this.props.onChange,selected:this.props.selected,togglePopup:this.togglePopup})},t.contextTypes={store:c.a.object},t.defaultProps={displayLocationsCount:!0,displayLocationsLink:!0,selected:!1},t}(o.a.PureComponent);t.a=Xe},1090:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var s=n(0),o=n.n(s),r=n(6),a=n.n(r);n(1140);function i(e){return o.a.createElement("div",{className:a()("location-message",{selected:e.selected})},e.children)}},1138:function(e,t,n){},1140:function(e,t,n){},1142:function(e,t,n){}}]);
//# sourceMappingURL=2.fe7b6cef.chunk.js.map