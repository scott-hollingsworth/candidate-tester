{"version":3,"sources":["webpack:///./src/main/js/components/ui/IssueTypeIcon.tsx","webpack:///./src/main/js/api/rules.ts","webpack:///./src/main/js/helpers/csv.ts","webpack:///./src/main/js/apps/quality-profiles/components/ProfileLink.tsx","webpack:///./src/main/js/apps/quality-profiles/components/BuiltInQualityProfileBadge.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileRulesRowOfType.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileRulesRowTotal.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileRulesDeprecatedWarning.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileRulesSonarWayComparison.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileRules.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ChangeProjectsForm.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileProjects.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileInheritanceBox.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ChangeParentForm.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileInheritance.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileExporters.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfilePermissionsUser.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfilePermissionsGroup.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfilePermissionsFormSelect.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfilePermissionsForm.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfilePermissions.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileDetails.tsx","webpack:///./src/main/js/api/quality-profiles.ts"],"names":["_icons_components_CodeSmellIcon__WEBPACK_IMPORTED_MODULE_3__","__webpack_require__","IssueTypeIcon","_a","icon","className","query","size","toLowerCase","react__WEBPACK_IMPORTED_MODULE_0__","_icons_components_BugIcon__WEBPACK_IMPORTED_MODULE_1__","_icons_components_VulnerabilityIcon__WEBPACK_IMPORTED_MODULE_2__","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_1__","getRulesApp","data","Object","_helpers_request__WEBPACK_IMPORTED_MODULE_0__","catch","searchRules","takeFacet","response","property","facet","facets","find","values","getRuleDetails","parameters","getRuleTags","then","r","tags","createRule","rule","error","status","Promise","reject","deleteRule","updateRule","csvEscape","value","replace","d","__webpack_exports__","ProfileLink","name","language","organization","children","other","__rest","react_router__WEBPACK_IMPORTED_MODULE_1__","__assign","to","_utils__WEBPACK_IMPORTED_MODULE_2__","activeClassName","_helpers_l10n__WEBPACK_IMPORTED_MODULE_3__","BuiltInQualityProfileBadge","_b","tooltip","badge","classnames__WEBPACK_IMPORTED_MODULE_1__","overlay","_components_controls_Tooltip__WEBPACK_IMPORTED_MODULE_2__","undefined","ProfileRulesRowOfType_ProfileRulesRowOfType","props","activeRulesUrl","urls","qprofile","activation","types","type","inactiveRulesUrl","inactiveCount","count","total","index_js_exposed","l10n","es","measures","ProfileRulesRowTotal_ProfileRulesRowTotal","ProfileRulesDeprecatedWarning_ProfileRulesDeprecatedWarning","Tooltip","profile","activeDeprecatedRules","ProfileRulesSonarWayComparison_ProfileRulesSonarWayComparison","url","compareToProfile","sonarway","languages","sonarWayMissingRules","ProfileRules_TYPES","_super","ProfileRules","_this","apply","this","arguments","mounted","state","activatedTotal","activatedByType","lodash_js_exposed","map","t","val","allByType","compareToSonarWay","loading","ProfileRules_extends","prototype","componentDidMount","loadRules","componentDidUpdate","prevProps","componentWillUnmount","loadProfile","isBuiltIn","resolve","quality_profiles","key","loadAllRules","rules","ps","loadActivatedRules","setState","all","responses","allRules","activatedRules","showProfile","getRulesCountForType","getRulesTotalForType","render","activateMoreUrl","actions","edit","activeDeprecatedRuleCount","missingRuleCount","ChangeProjectsForm","projects","selectedProjects","handleSearch","selected","pageSize","results","filter","project","handleSelect","concat","handleUnselect","handleCloseClick","event","preventDefault","onClose","renderElement","ChangeProjectsForm_extends","SelectList","Selected","header","Modal","contentLabel","onRequestClose","id","elements","labelAll","labelSelected","labelUnselected","onSearch","onSelect","onUnselect","selectedElements","href","onClick","ProfileProjects","formOpen","handleChangeClick","closeForm","updateProfiles","ProfileProjects_extends","loadProjects","isDefault","more","renderDefault","renderProjects","length","data-key","uuid","pathname","QualifierIcon","qualifier","associateProjects","buttons","details_ChangeProjectsForm","ProfileInheritanceBox_ProfileInheritanceBox","displayLink","ProfileInheritanceBox_rest","extendsBuiltIn","offset","depth","style","paddingLeft","activeRuleCount","overridingRuleCount","ChangeParentForm","handleSelectChange","option","handleFormSubmit","parent","onChange","onRequestFail","ChangeParentForm_extends","profiles","options","label","submitDisabled","parentKey","onSubmit","htmlFor","Select","clearable","disabled","ProfileInheritance","handleChangeParentClick","handleParentChange","ProfileInheritance_extends","loadData","ancestors","reverse","highlightCurrent","currentClassName","classnames","some","ancestor","index","child","details_ChangeParentForm","p","ProfileExporters","ProfileExporters_extends","getExportUrl","exporter","exporterKey","qualityProfile","assign","window","baseUrl","querystring_es3","exporters","exportersForLanguage","e","includes","target","ProfilePermissionsUser","deleteModal","handleDeleteClick","handleDeleteModalClose","handleDelete","user","login","onDelete","renderDeleteModal","index_es","defaultMessage","submitting","onSubmitClick","onCloseClick","ProfilePermissionsUser_extends","Avatar","hash","avatar","SimpleModal","ProfilePermissionsGroup","group","ProfilePermissionsGroup_extends","GroupIcon","lineHeight","ProfilePermissionsFormSelect","call","searchResults","handleInputChange","ProfilePermissionsFormSelect_extends","noResultsText","ProfilePermissionsFormSelect_assign","ProfilePermissionsFormSelect_getStringValue","autofocus","isLoading","filterOptions","optionRenderer","ProfilePermissionsFormSelect_optionRenderer","onInputChange","placeholder","searchable","valueRenderer","ProfilePermissionsFormSelect_isUser","ProfilePermissionsForm","stopSubmitting","handleUserAdd","onUserAdd","handleGroupAdd","onGroupAdd","q","usersResponse","groupsResponse","users","groups","handleValueChange","ProfilePermissionsForm_extends","details_ProfilePermissionsFormSelect","ProfilePermissions","addUserForm","handleAddUserButtonClick","handleAddUserFormClose","addedUser","handleUserDelete","removedUser","addedGroup","handleGroupDelete","removedGroup","ProfilePermissions_extends","fetchUsersAndGroups","details_ProfilePermissionsUser","details_ProfilePermissionsGroup","details_ProfilePermissionsForm","ProfileDetails_ProfileDetails","details_ProfileRules","ProfileDetails_assign","details_ProfileExporters","details_ProfilePermissions","details_ProfileInheritance","details_ProfileProjects","searchQualityProfiles","_helpers_request__WEBPACK_IMPORTED_MODULE_2__","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_3__","getQualityProfile","createQualityProfile","setMethod","setData","submit","restoreQualityProfile","getProfileProjects","getProfileInheritance","profileKey","setDefaultProfile","renameProfile","copyProfile","fromKey","toName","deleteProfile","changeProfileParent","getImporters","importers","getExporters","getProfileChangelog","compareProfiles","leftKey","rightKey","associateProject","projectKey","dissociateProject","searchUsers","searchGroups","addUser","removeUser","addGroup","removeGroup","bulkActivateRules","bulkDeactivateRules","activateRule","params","lodash__WEBPACK_IMPORTED_MODULE_0__","_helpers_csv__WEBPACK_IMPORTED_MODULE_1__","join","deactivateRule"],"mappings":"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","file":"js/283.9288ef48.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport BugIcon from '../icons-components/BugIcon';\nimport VulnerabilityIcon from '../icons-components/VulnerabilityIcon';\nimport CodeSmellIcon from '../icons-components/CodeSmellIcon';\n\ninterface Props {\n  className?: string;\n  query: string;\n  size?: number;\n}\n\nexport default function IssueTypeIcon({ className, query, size }: Props) {\n  let icon;\n\n  switch (query.toLowerCase()) {\n    case 'bug':\n    case 'bugs':\n    case 'new_bugs':\n      icon = <BugIcon size={size} />;\n      break;\n    case 'vulnerability':\n    case 'vulnerabilities':\n    case 'new_vulnerabilities':\n      icon = <VulnerabilityIcon size={size} />;\n      break;\n    case 'code_smell':\n    case 'code_smells':\n    case 'new_code_smells':\n      icon = <CodeSmellIcon size={size} />;\n      break;\n  }\n\n  if (!icon) {\n    return null;\n  }\n\n  return className ? <span className={className}>{icon}</span> : icon;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { post, getJSON, postJSON } from '../helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { Rule, RuleDetails, RuleActivation } from '../app/types';\n\nexport interface GetRulesAppResponse {\n  canWrite?: boolean;\n  repositories: { key: string; language: string; name: string }[];\n}\n\nexport function getRulesApp(data: {\n  organization: string | undefined;\n}): Promise<GetRulesAppResponse> {\n  return getJSON('/api/rules/app', data).catch(throwGlobalError);\n}\n\nexport interface SearchRulesResponse {\n  actives?: { [rule: string]: RuleActivation[] };\n  facets?: { property: string; values: { count: number; val: string }[] }[];\n  p: number;\n  ps: number;\n  rules: Rule[];\n  total: number;\n}\n\nexport function searchRules(data: {\n  organization: string | undefined;\n  [x: string]: any;\n}): Promise<SearchRulesResponse> {\n  return getJSON('/api/rules/search', data).catch(throwGlobalError);\n}\n\nexport function takeFacet(response: any, property: string) {\n  const facet = response.facets.find((facet: any) => facet.property === property);\n  return facet ? facet.values : [];\n}\n\nexport function getRuleDetails(parameters: {\n  actives?: boolean;\n  key: string;\n  organization: string | undefined;\n}): Promise<{ actives?: RuleActivation[]; rule: RuleDetails }> {\n  return getJSON('/api/rules/show', parameters).catch(throwGlobalError);\n}\n\nexport function getRuleTags(parameters: {\n  organization: string | undefined;\n  ps?: number;\n  q: string;\n}): Promise<string[]> {\n  return getJSON('/api/rules/tags', parameters).then(r => r.tags, throwGlobalError);\n}\n\nexport function createRule(data: {\n  custom_key: string;\n  markdown_description: string;\n  name: string;\n  organization: string | undefined;\n  params?: string;\n  prevent_reactivation?: boolean;\n  severity?: string;\n  status?: string;\n  template_key: string;\n  type?: string;\n}): Promise<RuleDetails> {\n  return postJSON('/api/rules/create', data).then(\n    r => r.rule,\n    error => {\n      // do not show global error if the status code is 409\n      // this case should be handled inside a component\n      if (error && error.response && error.response.status === 409) {\n        return Promise.reject(error.response);\n      } else {\n        return throwGlobalError(error);\n      }\n    }\n  );\n}\n\nexport function deleteRule(parameters: { key: string; organization: string | undefined }) {\n  return post('/api/rules/delete', parameters).catch(throwGlobalError);\n}\n\nexport function updateRule(data: {\n  key: string;\n  markdown_description?: string;\n  markdown_note?: string;\n  name?: string;\n  organization: string | undefined;\n  params?: string;\n  remediation_fn_base_effort?: string;\n  remediation_fn_type?: string;\n  remediation_fy_gap_multiplier?: string;\n  severity?: string;\n  status?: string;\n  tags?: string;\n}): Promise<RuleDetails> {\n  return postJSON('/api/rules/update', data).then(r => r.rule, throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function csvEscape(value: string): string {\n  const escaped = value.replace(/\"/g, '\\\\\"');\n  return `\"${escaped}\"`;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { getProfilePath } from '../utils';\n\ninterface Props {\n  className?: string;\n  children?: React.ReactElement<any> | string;\n  language: string;\n  name: string;\n  organization: string | null;\n}\n\nexport default function ProfileLink({ name, language, organization, children, ...other }: Props) {\n  return (\n    <Link\n      to={getProfilePath(name, language, organization)}\n      activeClassName=\"link-no-underline\"\n      {...other}>\n      {children}\n    </Link>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  className?: string;\n  tooltip?: boolean;\n}\n\nexport default function BuiltInQualityProfileBadge({ className, tooltip = true }: Props) {\n  const badge = (\n    <div className={classNames('outline-badge', className)}>\n      {translate('quality_profiles.built_in')}\n    </div>\n  );\n\n  const overlay = (\n    <span>\n      {translate('quality_profiles.built_in.description.1')}{' '}\n      {translate('quality_profiles.built_in.description.2')}\n    </span>\n  );\n\n  return <Tooltip overlay={tooltip ? overlay : undefined}>{badge}</Tooltip>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport IssueTypeIcon from '../../../components/ui/IssueTypeIcon';\nimport { formatMeasure } from '../../../helpers/measures';\nimport { getRulesUrl } from '../../../helpers/urls';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  count: number | null;\n  organization: string | null;\n  qprofile: string;\n  total: number | null;\n  type: string;\n}\n\nexport default function ProfileRulesRowOfType(props: Props) {\n  const activeRulesUrl = getRulesUrl(\n    { qprofile: props.qprofile, activation: 'true', types: props.type },\n    props.organization\n  );\n  const inactiveRulesUrl = getRulesUrl(\n    { qprofile: props.qprofile, activation: 'false', types: props.type },\n    props.organization\n  );\n  let inactiveCount = null;\n  if (props.count != null && props.total != null) {\n    inactiveCount = props.total - props.count;\n  }\n\n  return (\n    <tr>\n      <td>\n        <span>\n          <IssueTypeIcon query={props.type} className=\"little-spacer-right\" />\n          {translate('issue.type', props.type, 'plural')}\n        </span>\n      </td>\n      <td className=\"thin nowrap text-right\">\n        {props.count != null && (\n          <Link to={activeRulesUrl}>{formatMeasure(props.count, 'SHORT_INT', null)}</Link>\n        )}\n      </td>\n      <td className=\"thin nowrap text-right\">\n        {inactiveCount != null &&\n          (inactiveCount > 0 ? (\n            <Link to={inactiveRulesUrl} className=\"small text-muted\">\n              {formatMeasure(inactiveCount, 'SHORT_INT', null)}\n            </Link>\n          ) : (\n            <span className=\"note text-muted\">0</span>\n          ))}\n      </td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { formatMeasure } from '../../../helpers/measures';\nimport { getRulesUrl } from '../../../helpers/urls';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  count: number | null;\n  organization: string | null;\n  qprofile: string;\n  total: number | null;\n}\n\nexport default function ProfileRulesRowTotal(props: Props) {\n  const activeRulesUrl = getRulesUrl(\n    { qprofile: props.qprofile, activation: 'true' },\n    props.organization\n  );\n  const inactiveRulesUrl = getRulesUrl(\n    { qprofile: props.qprofile, activation: 'false' },\n    props.organization\n  );\n  let inactiveCount = null;\n  if (props.count != null && props.total != null) {\n    inactiveCount = props.total - props.count;\n  }\n\n  return (\n    <tr>\n      <td>\n        <strong>{translate('total')}</strong>\n      </td>\n      <td className=\"thin nowrap text-right\">\n        {props.count != null && (\n          <Link to={activeRulesUrl}>\n            <strong>{formatMeasure(props.count, 'SHORT_INT', null)}</strong>\n          </Link>\n        )}\n      </td>\n      <td className=\"thin nowrap text-right\">\n        {inactiveCount != null &&\n          (inactiveCount > 0 ? (\n            <Link to={inactiveRulesUrl} className=\"small text-muted\">\n              <strong>{formatMeasure(inactiveCount, 'SHORT_INT', null)}</strong>\n            </Link>\n          ) : (\n            <span className=\"note text-muted\">0</span>\n          ))}\n      </td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { getDeprecatedActiveRulesUrl } from '../../../helpers/urls';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  activeDeprecatedRules: number;\n  organization: string | null;\n  profile: string;\n}\n\nexport default function ProfileRulesDeprecatedWarning(props: Props) {\n  return (\n    <div className=\"quality-profile-rules-deprecated clearfix\">\n      <span className=\"pull-left\">\n        {translate('quality_profiles.deprecated_rules')}\n        <Tooltip overlay={translate('quality_profiles.deprecated_rules_description')}>\n          <i className=\"icon-help spacer-left\" />\n        </Tooltip>\n      </span>\n      <Link\n        className=\"pull-right\"\n        to={getDeprecatedActiveRulesUrl({ qprofile: props.profile }, props.organization)}>\n        {props.activeDeprecatedRules}\n      </Link>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { getRulesUrl } from '../../../helpers/urls';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  language: string;\n  organization: string | null;\n  profile: string;\n  sonarway: string;\n  sonarWayMissingRules: number;\n}\n\nexport default function ProfileRulesSonarWayComparison(props: Props) {\n  const url = getRulesUrl(\n    {\n      qprofile: props.profile,\n      activation: 'false',\n      compareToProfile: props.sonarway,\n      languages: props.language\n    },\n    props.organization\n  );\n\n  return (\n    <div className=\"quality-profile-rules-sonarway-missing clearfix\">\n      <span className=\"pull-left\">\n        {translate('quality_profiles.sonarway_missing_rules')}\n        <Tooltip overlay={translate('quality_profiles.sonarway_missing_rules_description')}>\n          <i className=\"icon-help spacer-left\" />\n        </Tooltip>\n      </span>\n      <Link className=\"pull-right\" to={url}>\n        {props.sonarWayMissingRules}\n      </Link>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { keyBy } from 'lodash';\nimport ProfileRulesRowOfType from './ProfileRulesRowOfType';\nimport ProfileRulesRowTotal from './ProfileRulesRowTotal';\nimport ProfileRulesDeprecatedWarning from './ProfileRulesDeprecatedWarning';\nimport ProfileRulesSonarWayComparison from './ProfileRulesSonarWayComparison';\nimport { searchRules, takeFacet } from '../../../api/rules';\nimport { getQualityProfile } from '../../../api/quality-profiles';\nimport { getRulesUrl } from '../../../helpers/urls';\nimport { translate } from '../../../helpers/l10n';\nimport { Profile } from '../types';\n\nconst TYPES = ['BUG', 'VULNERABILITY', 'CODE_SMELL'];\n\ninterface Props {\n  organization: string | null;\n  profile: Profile;\n}\n\ninterface ByType {\n  val: string;\n  count: number | null;\n}\n\ninterface State {\n  activatedTotal: number | null;\n  activatedByType: { [type: string]: ByType };\n  allByType: { [type: string]: ByType };\n  compareToSonarWay: { profile: string; profileName: string; missingRuleCount: number } | null;\n  loading: boolean;\n  total: number | null;\n}\n\nexport default class ProfileRules extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  state: State = {\n    activatedTotal: null,\n    activatedByType: keyBy(TYPES.map(t => ({ val: t, count: null })), 'val'),\n    allByType: keyBy(TYPES.map(t => ({ val: t, count: null })), 'val'),\n    compareToSonarWay: null,\n    loading: true,\n    total: null\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadRules();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.profile !== this.props.profile) {\n      this.loadRules();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadProfile() {\n    if (this.props.profile.isBuiltIn) {\n      return Promise.resolve(null);\n    }\n    return getQualityProfile({\n      compareToSonarWay: true,\n      profile: this.props.profile.key\n    });\n  }\n\n  loadAllRules() {\n    return searchRules({\n      languages: this.props.profile.language,\n      facets: 'types',\n      organization: this.props.organization || undefined,\n      ps: 1\n    });\n  }\n\n  loadActivatedRules() {\n    return searchRules({\n      activation: 'true',\n      facets: 'types',\n      organization: this.props.organization || undefined,\n      ps: 1,\n      qprofile: this.props.profile.key\n    });\n  }\n\n  loadRules() {\n    this.setState({ loading: true });\n    Promise.all([this.loadAllRules(), this.loadActivatedRules(), this.loadProfile()]).then(\n      responses => {\n        if (this.mounted) {\n          const [allRules, activatedRules, showProfile] = responses;\n          this.setState({\n            activatedTotal: activatedRules.total,\n            allByType: keyBy<ByType>(takeFacet(allRules, 'types'), 'val'),\n            activatedByType: keyBy<ByType>(takeFacet(activatedRules, 'types'), 'val'),\n            compareToSonarWay: showProfile && showProfile.compareToSonarWay,\n            loading: false,\n            total: allRules.total\n          });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  getRulesCountForType(type: string) {\n    return this.state.activatedByType && this.state.activatedByType[type]\n      ? this.state.activatedByType[type].count\n      : null;\n  }\n\n  getRulesTotalForType(type: string) {\n    return this.state.allByType && this.state.allByType[type]\n      ? this.state.allByType[type].count\n      : null;\n  }\n\n  render() {\n    const { organization, profile } = this.props;\n    const { compareToSonarWay } = this.state;\n    const activateMoreUrl = getRulesUrl(\n      { qprofile: profile.key, activation: 'false' },\n      organization\n    );\n\n    return (\n      <div className=\"boxed-group quality-profile-rules\">\n        <div className=\"quality-profile-rules-distribution\">\n          <table className=\"data condensed\">\n            <thead>\n              <tr>\n                <th>\n                  <h2>{translate('rules')}</h2>\n                </th>\n                <th>{translate('active')}</th>\n                <th>{translate('inactive')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              <ProfileRulesRowTotal\n                count={this.state.activatedTotal}\n                organization={organization}\n                qprofile={profile.key}\n                total={this.state.total}\n              />\n              {TYPES.map(type => (\n                <ProfileRulesRowOfType\n                  key={type}\n                  count={this.getRulesCountForType(type)}\n                  organization={organization}\n                  qprofile={profile.key}\n                  total={this.getRulesTotalForType(type)}\n                  type={type}\n                />\n              ))}\n            </tbody>\n          </table>\n\n          {profile.actions &&\n            profile.actions.edit &&\n            !profile.isBuiltIn && (\n              <div className=\"text-right big-spacer-top\">\n                <Link to={activateMoreUrl} className=\"button js-activate-rules\">\n                  {translate('quality_profiles.activate_more')}\n                </Link>\n              </div>\n            )}\n        </div>\n        {profile.activeDeprecatedRuleCount > 0 && (\n          <ProfileRulesDeprecatedWarning\n            activeDeprecatedRules={profile.activeDeprecatedRuleCount}\n            organization={organization}\n            profile={profile.key}\n          />\n        )}\n        {compareToSonarWay != null &&\n          compareToSonarWay.missingRuleCount > 0 && (\n            <ProfileRulesSonarWayComparison\n              language={profile.language}\n              organization={organization}\n              profile={profile.key}\n              sonarway={compareToSonarWay.profile}\n              sonarWayMissingRules={compareToSonarWay.missingRuleCount}\n            />\n          )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { find, without } from 'lodash';\nimport Modal from '../../../components/controls/Modal';\nimport SelectList, { Filter } from '../../../components/SelectList/SelectList';\nimport { translate } from '../../../helpers/l10n';\nimport { Profile } from '../types';\nimport {\n  getProfileProjects,\n  associateProject,\n  dissociateProject,\n  ProfileProject\n} from '../../../api/quality-profiles';\n\ninterface Props {\n  onClose: () => void;\n  organization: string | null;\n  profile: Profile;\n}\n\ninterface State {\n  projects: ProfileProject[];\n  selectedProjects: string[];\n}\n\nexport default class ChangeProjectsForm extends React.PureComponent<Props> {\n  container?: HTMLElement | null;\n  state: State = { projects: [], selectedProjects: [] };\n\n  componentDidMount() {\n    this.handleSearch('', Filter.Selected);\n  }\n\n  handleSearch = (query: string, selected: Filter) => {\n    return getProfileProjects({\n      key: this.props.profile.key,\n      organization: this.props.organization,\n      pageSize: 100,\n      query: query !== '' ? query : undefined,\n      selected\n    }).then(\n      data => {\n        this.setState({\n          projects: data.results,\n          selectedProjects: data.results\n            .filter(project => project.selected)\n            .map(project => project.key)\n        });\n      },\n      () => {}\n    );\n  };\n\n  handleSelect = (key: string) => {\n    return associateProject(this.props.profile.key, key).then(() => {\n      this.setState((state: State) => ({\n        selectedProjects: [...state.selectedProjects, key]\n      }));\n    });\n  };\n\n  handleUnselect = (key: string) => {\n    return dissociateProject(this.props.profile.key, key).then(() => {\n      this.setState((state: State) => ({ selectedProjects: without(state.selectedProjects, key) }));\n    });\n  };\n\n  handleCloseClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    event.preventDefault();\n    this.props.onClose();\n  };\n\n  renderElement = (key: string): React.ReactNode => {\n    const project = find(this.state.projects, { key });\n    return project === undefined ? key : project.name;\n  };\n\n  render() {\n    const header = translate('projects');\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <div className=\"modal-head\">\n          <h2>{header}</h2>\n        </div>\n\n        <div className=\"modal-body\" id=\"profile-projects\">\n          <SelectList\n            elements={this.state.projects.map(project => project.key)}\n            labelAll={translate('quality_gates.projects.all')}\n            labelSelected={translate('quality_gates.projects.with')}\n            labelUnselected={translate('quality_gates.projects.without')}\n            onSearch={this.handleSearch}\n            onSelect={this.handleSelect}\n            onUnselect={this.handleUnselect}\n            renderElement={this.renderElement}\n            selectedElements={this.state.selectedProjects}\n          />\n        </div>\n\n        <div className=\"modal-foot\">\n          <a href=\"#\" onClick={this.handleCloseClick}>\n            {translate('close')}\n          </a>\n        </div>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport ChangeProjectsForm from './ChangeProjectsForm';\nimport { Profile } from '../types';\nimport { getProfileProjects } from '../../../api/quality-profiles';\nimport QualifierIcon from '../../../components/shared/QualifierIcon';\nimport { Button } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  organization: string | null;\n  profile: Profile;\n  updateProfiles: () => Promise<void>;\n}\n\ninterface State {\n  formOpen: boolean;\n  loading: boolean;\n  more?: boolean;\n  projects: Array<{ key: string; name: string; uuid: string }> | null;\n}\n\nexport default class ProfileProjects extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  state: State = {\n    formOpen: false,\n    loading: true,\n    projects: null\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadProjects();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.profile !== this.props.profile) {\n      this.loadProjects();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadProjects() {\n    if (this.props.profile.isDefault) {\n      this.setState({ loading: false });\n      return;\n    }\n\n    const data = { key: this.props.profile.key };\n    getProfileProjects(data).then(\n      (r: any) => {\n        if (this.mounted) {\n          this.setState({\n            projects: r.results,\n            more: r.more,\n            loading: false\n          });\n        }\n      },\n      () => {}\n    );\n  }\n\n  handleChangeClick = () => {\n    this.setState({ formOpen: true });\n  };\n\n  closeForm = () => {\n    this.setState({ formOpen: false });\n    this.props.updateProfiles();\n  };\n\n  renderDefault() {\n    if (this.state.loading) {\n      return <i className=\"spinner\" />;\n    }\n\n    return (\n      <div>\n        <span className=\"badge spacer-right\">{translate('default')}</span>\n        {translate('quality_profiles.projects_for_default')}\n      </div>\n    );\n  }\n\n  renderProjects() {\n    if (this.state.loading) {\n      return <i className=\"spinner\" />;\n    }\n\n    const { projects } = this.state;\n\n    if (projects == null) {\n      return null;\n    }\n\n    if (projects.length === 0) {\n      return <div>{translate('quality_profiles.no_projects_associated_to_profile')}</div>;\n    }\n\n    return (\n      <ul>\n        {projects.map(project => (\n          <li className=\"spacer-top js-profile-project\" data-key={project.key} key={project.uuid}>\n            <Link\n              className=\"link-with-icon\"\n              to={{ pathname: '/dashboard', query: { id: project.key } }}>\n              <QualifierIcon qualifier=\"TRK\" /> <span>{project.name}</span>\n            </Link>\n          </li>\n        ))}\n      </ul>\n    );\n  }\n\n  render() {\n    const { profile } = this.props;\n    return (\n      <div className=\"boxed-group quality-profile-projects\">\n        {profile.actions &&\n          profile.actions.associateProjects && (\n            <div className=\"boxed-group-actions\">\n              <Button className=\"js-change-projects\" onClick={this.handleChangeClick}>\n                {translate('quality_profiles.change_projects')}\n              </Button>\n            </div>\n          )}\n\n        <header className=\"boxed-group-header\">\n          <h2>{translate('projects')}</h2>\n        </header>\n\n        <div className=\"boxed-group-inner\">\n          {profile.isDefault ? this.renderDefault() : this.renderProjects()}\n        </div>\n\n        {this.state.formOpen && (\n          <ChangeProjectsForm\n            onClose={this.closeForm}\n            organization={this.props.organization}\n            profile={profile}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ProfileLink from '../components/ProfileLink';\nimport BuiltInQualityProfileBadge from '../components/BuiltInQualityProfileBadge';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n\ninterface Props {\n  className?: string;\n  depth: number;\n  displayLink?: boolean;\n  extendsBuiltIn?: boolean;\n  language: string;\n  organization: string | null;\n  profile: {\n    activeRuleCount: number;\n    isBuiltIn: boolean;\n    key: string;\n    language: string;\n    name: string;\n    overridingRuleCount?: number;\n  };\n}\n\nexport default function ProfileInheritanceBox({ displayLink = true, ...props }: Props) {\n  const { profile, className, extendsBuiltIn } = props;\n  const offset = 25 * props.depth;\n\n  return (\n    <tr className={className}>\n      <td>\n        <div style={{ paddingLeft: offset }}>\n          {displayLink ? (\n            <ProfileLink\n              language={props.language}\n              name={profile.name}\n              organization={props.organization}>\n              {profile.name}\n            </ProfileLink>\n          ) : (\n            profile.name\n          )}\n          {profile.isBuiltIn && <BuiltInQualityProfileBadge className=\"spacer-left\" />}\n          {extendsBuiltIn && (\n            <Tooltip overlay={translate('quality_profiles.extends_built_in')}>\n              <i className=\"icon-help spacer-left\" />\n            </Tooltip>\n          )}\n        </div>\n      </td>\n\n      <td>{translateWithParameters('quality_profile.x_active_rules', profile.activeRuleCount)}</td>\n\n      <td>\n        {profile.overridingRuleCount != null && (\n          <p>\n            {translateWithParameters(\n              'quality_profiles.x_overridden_rules',\n              profile.overridingRuleCount\n            )}\n          </p>\n        )}\n      </td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { sortBy } from 'lodash';\nimport { Profile } from '../types';\nimport { changeProfileParent } from '../../../api/quality-profiles';\nimport Modal from '../../../components/controls/Modal';\nimport Select from '../../../components/controls/Select';\nimport { SubmitButton, ResetButtonLink } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  onChange: () => void;\n  onClose: () => void;\n  onRequestFail: (reasong: any) => void;\n  profile: Profile;\n  profiles: Profile[];\n}\n\ninterface State {\n  loading: boolean;\n  selected: string | null;\n}\n\nexport default class ChangeParentForm extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    loading: false,\n    selected: null\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleSelectChange = (option: { value: string }) => {\n    this.setState({ selected: option.value });\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n\n    const parent = this.state.selected;\n\n    if (parent != null) {\n      this.setState({ loading: true });\n      changeProfileParent(this.props.profile.key, parent)\n        .then(this.props.onChange)\n        .catch((error: any) => {\n          if (this.mounted) {\n            this.setState({ loading: false });\n          }\n          this.props.onRequestFail(error);\n        });\n    }\n  };\n\n  render() {\n    const { profiles } = this.props;\n\n    const options = [\n      { label: translate('none'), value: '' },\n      ...sortBy(profiles, 'name').map(profile => ({\n        label: profile.isBuiltIn\n          ? `${profile.name} (${translate('quality_profiles.built_in')})`\n          : profile.name,\n        value: profile.key\n      }))\n    ];\n\n    const submitDisabled =\n      this.state.loading ||\n      this.state.selected == null ||\n      this.state.selected === this.props.profile.parentKey;\n\n    return (\n      <Modal\n        contentLabel={translate('quality_profiles.change_parent')}\n        onRequestClose={this.props.onClose}>\n        <form id=\"change-profile-parent-form\" onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-head\">\n            <h2>{translate('quality_profiles.change_parent')}</h2>\n          </div>\n          <div className=\"modal-body\">\n            <div className=\"modal-field\">\n              <label htmlFor=\"change-profile-parent\">\n                {translate('quality_profiles.parent')} <em className=\"mandatory\">*</em>\n              </label>\n              <Select\n                clearable={false}\n                name=\"parentKey\"\n                onChange={this.handleSelectChange}\n                options={options}\n                value={\n                  this.state.selected != null\n                    ? this.state.selected\n                    : this.props.profile.parentKey || ''\n                }\n              />\n            </div>\n          </div>\n          <div className=\"modal-foot\">\n            {this.state.loading && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={submitDisabled} id=\"change-profile-parent-submit\">\n              {translate('change_verb')}\n            </SubmitButton>\n            <ResetButtonLink id=\"change-profile-parent-cancel\" onClick={this.props.onClose}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </div>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport ProfileInheritanceBox from './ProfileInheritanceBox';\nimport ChangeParentForm from './ChangeParentForm';\nimport { Profile } from '../types';\nimport { getProfileInheritance } from '../../../api/quality-profiles';\nimport { Button } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  onRequestFail: (reason: any) => void;\n  organization: string | null;\n  profile: Profile;\n  profiles: Profile[];\n  updateProfiles: () => Promise<void>;\n}\n\ninterface ProfileInheritanceDetails {\n  activeRuleCount: number;\n  isBuiltIn: boolean;\n  key: string;\n  language: string;\n  name: string;\n  overridingRuleCount?: number;\n}\n\ninterface State {\n  ancestors?: Array<ProfileInheritanceDetails>;\n  children?: Array<ProfileInheritanceDetails>;\n  formOpen: boolean;\n  loading: boolean;\n  profile?: ProfileInheritanceDetails;\n}\n\nexport default class ProfileInheritance extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  state: State = {\n    formOpen: false,\n    loading: true\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadData();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.profile !== this.props.profile) {\n      this.loadData();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadData() {\n    getProfileInheritance(this.props.profile.key).then(\n      r => {\n        if (this.mounted) {\n          const { ancestors, children } = r;\n          this.setState({\n            children,\n            ancestors: ancestors.reverse(),\n            profile: r.profile,\n            loading: false\n          });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  handleChangeParentClick = () => {\n    this.setState({ formOpen: true });\n  };\n\n  closeForm = () => {\n    this.setState({ formOpen: false });\n  };\n\n  handleParentChange = () => {\n    this.props.updateProfiles();\n    this.closeForm();\n  };\n\n  render() {\n    const { profile, profiles } = this.props;\n    const { ancestors } = this.state;\n\n    const highlightCurrent =\n      !this.state.loading &&\n      ancestors != null &&\n      this.state.children != null &&\n      (ancestors.length > 0 || this.state.children.length > 0);\n\n    const currentClassName = classNames('js-inheritance-current', {\n      selected: highlightCurrent\n    });\n\n    const extendsBuiltIn = ancestors != null && ancestors.some(profile => profile.isBuiltIn);\n\n    return (\n      <div className=\"boxed-group quality-profile-inheritance\">\n        {profile.actions &&\n          profile.actions.edit &&\n          !profile.isBuiltIn && (\n            <div className=\"boxed-group-actions\">\n              <Button\n                className=\"pull-right js-change-parent\"\n                onClick={this.handleChangeParentClick}>\n                {translate('quality_profiles.change_parent')}\n              </Button>\n            </div>\n          )}\n\n        <header className=\"boxed-group-header\">\n          <h2>{translate('quality_profiles.profile_inheritance')}</h2>\n        </header>\n\n        <div className=\"boxed-group-inner\">\n          {this.state.loading ? (\n            <i className=\"spinner\" />\n          ) : (\n            <table className=\"data zebra\">\n              <tbody>\n                {ancestors != null &&\n                  ancestors.map((ancestor, index) => (\n                    <ProfileInheritanceBox\n                      className=\"js-inheritance-ancestor\"\n                      depth={index}\n                      key={ancestor.key}\n                      language={profile.language}\n                      organization={this.props.organization}\n                      profile={ancestor}\n                    />\n                  ))}\n\n                {this.state.profile != null && (\n                  <ProfileInheritanceBox\n                    className={currentClassName}\n                    depth={ancestors ? ancestors.length : 0}\n                    displayLink={false}\n                    extendsBuiltIn={extendsBuiltIn}\n                    language={profile.language}\n                    organization={this.props.organization}\n                    profile={this.state.profile}\n                  />\n                )}\n\n                {this.state.children != null &&\n                  this.state.children.map(child => (\n                    <ProfileInheritanceBox\n                      className=\"js-inheritance-child\"\n                      depth={ancestors ? ancestors.length + 1 : 0}\n                      key={child.key}\n                      language={profile.language}\n                      organization={this.props.organization}\n                      profile={child}\n                    />\n                  ))}\n              </tbody>\n            </table>\n          )}\n        </div>\n\n        {this.state.formOpen && (\n          <ChangeParentForm\n            onChange={this.handleParentChange}\n            onClose={this.closeForm}\n            onRequestFail={this.props.onRequestFail}\n            profile={profile}\n            profiles={profiles.filter(p => p !== profile && p.language === profile.language)}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { stringify } from 'querystring';\nimport * as React from 'react';\nimport { translate } from '../../../helpers/l10n';\nimport { Profile, Exporter } from '../types';\n\ninterface Props {\n  exporters: Exporter[];\n  organization: string | null;\n  profile: Profile;\n}\n\nexport default class ProfileExporters extends React.PureComponent<Props> {\n  getExportUrl(exporter: Exporter) {\n    const { organization, profile } = this.props;\n\n    const path = '/api/qualityprofiles/export';\n    const parameters = {\n      exporterKey: exporter.key,\n      language: profile.language,\n      qualityProfile: profile.name\n    };\n    if (organization) {\n      Object.assign(parameters, { organization });\n    }\n    return (window as any).baseUrl + path + '?' + stringify(parameters);\n  }\n\n  render() {\n    const { exporters, profile } = this.props;\n    const exportersForLanguage = exporters.filter(e => e.languages.includes(profile.language));\n\n    if (exportersForLanguage.length === 0) {\n      return null;\n    }\n\n    return (\n      <div className=\"boxed-group quality-profile-exporters\">\n        <h2>{translate('quality_profiles.exporters')}</h2>\n        <div className=\"boxed-group-inner\">\n          <ul>\n            {exportersForLanguage.map((exporter, index) => (\n              <li\n                key={exporter.key}\n                data-key={exporter.key}\n                className={index > 0 ? 'spacer-top' : undefined}>\n                <a href={this.getExportUrl(exporter)} target=\"_blank\">\n                  {exporter.name}\n                </a>\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { User } from './ProfilePermissions';\nimport { removeUser } from '../../../api/quality-profiles';\nimport SimpleModal, { ChildrenProps } from '../../../components/controls/SimpleModal';\nimport { DeleteButton, SubmitButton, ResetButtonLink } from '../../../components/ui/buttons';\nimport Avatar from '../../../components/ui/Avatar';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  onDelete: (user: User) => void;\n  organization?: string;\n  profile: { language: string; name: string };\n  user: User;\n}\n\ninterface State {\n  deleteModal: boolean;\n}\n\nexport default class ProfilePermissionsUser extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { deleteModal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleDeleteClick = () => {\n    this.setState({ deleteModal: true });\n  };\n\n  handleDeleteModalClose = () => {\n    if (this.mounted) {\n      this.setState({ deleteModal: false });\n    }\n  };\n\n  handleDelete = () => {\n    const { organization, profile, user } = this.props;\n\n    return removeUser({\n      language: profile.language,\n      login: user.login,\n      organization,\n      qualityProfile: profile.name\n    }).then(() => {\n      this.handleDeleteModalClose();\n      this.props.onDelete(user);\n    });\n  };\n\n  renderDeleteModal = (props: ChildrenProps) => (\n    <div>\n      <header className=\"modal-head\">\n        <h2>{translate('users.remove')}</h2>\n      </header>\n\n      <div className=\"modal-body\">\n        <FormattedMessage\n          defaultMessage={translate('users.remove.confirmation')}\n          id=\"users.remove.confirmation\"\n          values={{\n            user: <strong>{this.props.user.name}</strong>\n          }}\n        />\n      </div>\n\n      <footer className=\"modal-foot\">\n        {props.submitting && <i className=\"spinner spacer-right\" />}\n        <SubmitButton\n          className=\"button-red\"\n          disabled={props.submitting}\n          onClick={props.onSubmitClick}>\n          {translate('remove')}\n        </SubmitButton>\n        <ResetButtonLink onClick={props.onCloseClick}>{translate('cancel')}</ResetButtonLink>\n      </footer>\n    </div>\n  );\n\n  render() {\n    const { user } = this.props;\n\n    return (\n      <div className=\"clearfix big-spacer-bottom\">\n        <DeleteButton\n          className=\"pull-right spacer-top spacer-left spacer-right button-small\"\n          onClick={this.handleDeleteClick}\n        />\n        <Avatar className=\"pull-left spacer-right\" hash={user.avatar} name={user.name} size={32} />\n        <div className=\"overflow-hidden\">\n          <strong>{user.name}</strong>\n          <div className=\"note\">{user.login}</div>\n        </div>\n\n        {this.state.deleteModal && (\n          <SimpleModal\n            header={translate('users.remove')}\n            onClose={this.handleDeleteModalClose}\n            onSubmit={this.handleDelete}>\n            {this.renderDeleteModal}\n          </SimpleModal>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Group } from './ProfilePermissions';\nimport { removeGroup } from '../../../api/quality-profiles';\nimport SimpleModal, { ChildrenProps } from '../../../components/controls/SimpleModal';\nimport GroupIcon from '../../../components/icons-components/GroupIcon';\nimport { DeleteButton, Button, ResetButtonLink } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  group: Group;\n  onDelete: (group: Group) => void;\n  organization?: string;\n  profile: { language: string; name: string };\n}\n\ninterface State {\n  deleteModal: boolean;\n}\n\nexport default class ProfilePermissionsGroup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { deleteModal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleDeleteClick = () => {\n    this.setState({ deleteModal: true });\n  };\n\n  handleDeleteModalClose = () => {\n    if (this.mounted) {\n      this.setState({ deleteModal: false });\n    }\n  };\n\n  handleDelete = () => {\n    const { group, organization, profile } = this.props;\n\n    return removeGroup({\n      group: group.name,\n      language: profile.language,\n      organization,\n      qualityProfile: profile.name\n    }).then(() => {\n      this.handleDeleteModalClose();\n      this.props.onDelete(group);\n    });\n  };\n\n  renderDeleteModal = (props: ChildrenProps) => (\n    <div>\n      <header className=\"modal-head\">\n        <h2>{translate('groups.remove')}</h2>\n      </header>\n\n      <div className=\"modal-body\">\n        <FormattedMessage\n          defaultMessage={translate('groups.remove.confirmation')}\n          id=\"groups.remove.confirmation\"\n          values={{\n            user: <strong>{this.props.group.name}</strong>\n          }}\n        />\n      </div>\n\n      <footer className=\"modal-foot\">\n        {props.submitting && <i className=\"spinner spacer-right\" />}\n        <Button className=\"button-red\" disabled={props.submitting} onClick={props.onSubmitClick}>\n          {translate('remove')}\n        </Button>\n        <ResetButtonLink onClick={props.onCloseClick}>{translate('cancel')}</ResetButtonLink>\n      </footer>\n    </div>\n  );\n\n  render() {\n    const { group } = this.props;\n\n    return (\n      <div className=\"clearfix big-spacer-bottom\">\n        <DeleteButton\n          className=\"pull-right spacer-top spacer-left spacer-right button-small\"\n          onClick={this.handleDeleteClick}\n        />\n        <GroupIcon className=\"pull-left spacer-right\" size={32} />\n        <div className=\"overflow-hidden\" style={{ lineHeight: '32px' }}>\n          <strong>{group.name}</strong>\n        </div>\n\n        {this.state.deleteModal && (\n          <SimpleModal\n            header={translate('group.remove')}\n            onClose={this.handleDeleteModalClose}\n            onSubmit={this.handleDelete}>\n            {this.renderDeleteModal}\n          </SimpleModal>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { debounce, identity } from 'lodash';\nimport { User, Group } from './ProfilePermissions';\nimport Select from '../../../components/controls/Select';\nimport Avatar from '../../../components/ui/Avatar';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport GroupIcon from '../../../components/icons-components/GroupIcon';\n\ntype Option = User | Group;\ntype OptionWithValue = Option & { value: string };\n\ninterface Props {\n  onChange: (option: OptionWithValue) => void;\n  onSearch: (query: string) => Promise<Option[]>;\n  selected?: Option;\n}\n\ninterface State {\n  loading: boolean;\n  query: string;\n  searchResults: Option[];\n}\n\nexport default class ProfilePermissionsFormSelect extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.handleSearch = debounce(this.handleSearch, 250);\n    this.state = { loading: false, query: '', searchResults: [] };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.handleSearch(this.state.query);\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleSearch = (query: string) => {\n    this.setState({ loading: true });\n    this.props.onSearch(query).then(\n      searchResults => {\n        if (this.mounted) {\n          this.setState({ loading: false, searchResults });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleInputChange = (query: string) => {\n    this.setState({ query });\n    if (query.length > 1) {\n      this.handleSearch(query);\n    }\n  };\n\n  render() {\n    const noResultsText =\n      this.state.query.length === 1\n        ? translateWithParameters('select2.tooShort', 2)\n        : translate('no_results');\n\n    // create a uniq string both for users and groups\n    const options = this.state.searchResults.map(r => ({ ...r, value: getStringValue(r) }));\n\n    return (\n      <Select\n        autofocus={true}\n        className=\"Select-big\"\n        clearable={false}\n        isLoading={this.state.loading}\n        // disable default react-select filtering\n        filterOptions={identity}\n        noResultsText={noResultsText}\n        optionRenderer={optionRenderer}\n        options={options}\n        onChange={this.props.onChange}\n        onInputChange={this.handleInputChange}\n        placeholder=\"\"\n        searchable={true}\n        value={this.props.selected && getStringValue(this.props.selected)}\n        valueRenderer={optionRenderer}\n      />\n    );\n  }\n}\n\nfunction isUser(option: Option): option is User {\n  return (option as User).login !== undefined;\n}\n\nfunction getStringValue(option: Option) {\n  return isUser(option) ? `user:${option.login}` : `group:${option.name}`;\n}\n\nfunction optionRenderer(option: OptionWithValue) {\n  return isUser(option) ? (\n    <div>\n      <Avatar hash={option.avatar} name={option.name} size={16} />\n      <strong className=\"spacer-left\">{option.name}</strong>\n      <span className=\"note little-spacer-left\">{option.login}</span>\n    </div>\n  ) : (\n    <div>\n      <GroupIcon size={16} />\n      <strong className=\"spacer-left\">{option.name}</strong>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { User, Group } from './ProfilePermissions';\nimport ProfilePermissionsFormSelect from './ProfilePermissionsFormSelect';\nimport {\n  searchUsers,\n  searchGroups,\n  addUser,\n  addGroup,\n  SearchUsersGroupsParameters\n} from '../../../api/quality-profiles';\nimport Modal from '../../../components/controls/Modal';\nimport { SubmitButton, ResetButtonLink } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  onClose: () => void;\n  onGroupAdd: (group: Group) => void;\n  onUserAdd: (user: User) => void;\n  organization?: string;\n  profile: { language: string; name: string };\n}\n\ninterface State {\n  selected?: User | Group;\n  submitting: boolean;\n}\n\nexport default class ProfilePermissionsForm extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { submitting: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopSubmitting = () => {\n    if (this.mounted) {\n      this.setState({ submitting: false });\n    }\n  };\n\n  handleUserAdd = (user: User) =>\n    addUser({\n      language: this.props.profile.language,\n      login: user.login,\n      organization: this.props.organization,\n      qualityProfile: this.props.profile.name\n    }).then(() => this.props.onUserAdd(user), this.stopSubmitting);\n\n  handleGroupAdd = (group: Group) =>\n    addGroup({\n      group: group.name,\n      language: this.props.profile.language,\n      organization: this.props.organization,\n      qualityProfile: this.props.profile.name\n    }).then(() => this.props.onGroupAdd(group), this.stopSubmitting);\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    const { selected } = this.state;\n    if (selected) {\n      this.setState({ submitting: true });\n      if ((selected as User).login !== undefined) {\n        this.handleUserAdd(selected as User);\n      } else {\n        this.handleGroupAdd(selected as Group);\n      }\n    }\n  };\n\n  handleSearch = (q: string) => {\n    const { organization, profile } = this.props;\n    const parameters: SearchUsersGroupsParameters = {\n      language: profile.language,\n      organization,\n      q,\n      qualityProfile: profile.name,\n      selected: 'deselected'\n    };\n    return Promise.all([searchUsers(parameters), searchGroups(parameters)]).then(\n      ([usersResponse, groupsResponse]) => [...usersResponse.users, ...groupsResponse.groups]\n    );\n  };\n\n  handleValueChange = (selected: User | Group) => {\n    this.setState({ selected });\n  };\n\n  render() {\n    const header = translate('quality_profiles.grant_permissions_to_user_or_group');\n    const submitDisabled = !this.state.selected || this.state.submitting;\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n        <form onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-body\">\n            <div className=\"modal-large-field\">\n              <label>{translate('quality_profiles.search_description')}</label>\n              <ProfilePermissionsFormSelect\n                onChange={this.handleValueChange}\n                onSearch={this.handleSearch}\n                selected={this.state.selected}\n              />\n            </div>\n          </div>\n          <footer className=\"modal-foot\">\n            {this.state.submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={submitDisabled}>{translate('add_verb')}</SubmitButton>\n            <ResetButtonLink onClick={this.props.onClose}>{translate('cancel')}</ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { sortBy, uniqBy } from 'lodash';\nimport ProfilePermissionsUser from './ProfilePermissionsUser';\nimport ProfilePermissionsGroup from './ProfilePermissionsGroup';\nimport ProfilePermissionsForm from './ProfilePermissionsForm';\nimport {\n  searchUsers,\n  searchGroups,\n  SearchUsersGroupsParameters\n} from '../../../api/quality-profiles';\nimport { Button } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n\nexport interface User {\n  avatar?: string;\n  login: string;\n  name: string;\n}\n\nexport interface Group {\n  name: string;\n}\n\ninterface Props {\n  organization?: string;\n  profile: { language: string; name: string };\n}\n\ninterface State {\n  addUserForm: boolean;\n  groups?: Group[];\n  loading: boolean;\n  users?: User[];\n}\n\nexport default class ProfilePermissions extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { addUserForm: false, loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchUsersAndGroups();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.organization !== this.props.organization ||\n      prevProps.profile !== this.props.profile\n    ) {\n      this.fetchUsersAndGroups();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchUsersAndGroups() {\n    this.setState({ loading: true });\n    const { organization, profile } = this.props;\n    const parameters: SearchUsersGroupsParameters = {\n      language: profile.language,\n      organization,\n      qualityProfile: profile.name,\n      selected: 'selected'\n    };\n    Promise.all([searchUsers(parameters), searchGroups(parameters)]).then(\n      ([usersResponse, groupsResponse]) => {\n        if (this.mounted) {\n          this.setState({\n            groups: groupsResponse.groups,\n            loading: false,\n            users: usersResponse.users\n          });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  handleAddUserButtonClick = () => {\n    this.setState({ addUserForm: true });\n  };\n\n  handleAddUserFormClose = () => {\n    if (this.mounted) {\n      this.setState({ addUserForm: false });\n    }\n  };\n\n  handleUserAdd = (addedUser: User) => {\n    if (this.mounted) {\n      this.setState((state: State) => ({\n        addUserForm: false,\n        users: state.users && uniqBy([...state.users, addedUser], user => user.login)\n      }));\n    }\n  };\n\n  handleUserDelete = (removedUser: User) => {\n    if (this.mounted) {\n      this.setState((state: State) => ({\n        users: state.users && state.users.filter(user => user !== removedUser)\n      }));\n    }\n  };\n\n  handleGroupAdd = (addedGroup: Group) => {\n    if (this.mounted) {\n      this.setState((state: State) => ({\n        addUserForm: false,\n        groups: state.groups && uniqBy([...state.groups, addedGroup], group => group.name)\n      }));\n    }\n  };\n\n  handleGroupDelete = (removedGroup: Group) => {\n    if (this.mounted) {\n      this.setState((state: State) => ({\n        groups: state.groups && state.groups.filter(group => group !== removedGroup)\n      }));\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"boxed-group\">\n        <h2>{translate('permissions.page')}</h2>\n        <div className=\"boxed-group-inner\">\n          <p className=\"note\">{translate('quality_profiles.default_permissions')}</p>\n\n          {this.state.loading ? (\n            <div className=\"big-spacer-top\">\n              <i className=\"spinner\" />\n            </div>\n          ) : (\n            <div className=\"big-spacer-top\">\n              {this.state.users &&\n                sortBy(this.state.users, 'name').map(user => (\n                  <ProfilePermissionsUser\n                    key={user.login}\n                    onDelete={this.handleUserDelete}\n                    organization={this.props.organization}\n                    profile={this.props.profile}\n                    user={user}\n                  />\n                ))}\n              {this.state.groups &&\n                sortBy(this.state.groups, 'name').map(group => (\n                  <ProfilePermissionsGroup\n                    group={group}\n                    key={group.name}\n                    onDelete={this.handleGroupDelete}\n                    organization={this.props.organization}\n                    profile={this.props.profile}\n                  />\n                ))}\n              <div className=\"text-right\">\n                <Button onClick={this.handleAddUserButtonClick}>\n                  {translate('quality_profiles.grant_permissions_to_more_users')}\n                </Button>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {this.state.addUserForm && (\n          <ProfilePermissionsForm\n            onClose={this.handleAddUserFormClose}\n            onGroupAdd={this.handleGroupAdd}\n            onUserAdd={this.handleUserAdd}\n            organization={this.props.organization}\n            profile={this.props.profile}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ProfileRules from './ProfileRules';\nimport ProfileProjects from './ProfileProjects';\nimport ProfileInheritance from './ProfileInheritance';\nimport ProfileExporters from './ProfileExporters';\nimport ProfilePermissions from './ProfilePermissions';\nimport { Exporter, Profile } from '../types';\n\ninterface Props {\n  exporters: Exporter[];\n  onRequestFail: (reasong: any) => void;\n  organization: string | null;\n  profile: Profile;\n  profiles: Profile[];\n  updateProfiles: () => Promise<void>;\n}\n\nexport default function ProfileDetails(props: Props) {\n  const { profile } = props;\n  return (\n    <div>\n      <div className=\"quality-profile-grid\">\n        <div className=\"quality-profile-grid-left\">\n          <ProfileRules {...props} />\n          <ProfileExporters {...props} />\n          {profile.actions &&\n            profile.actions.edit &&\n            !profile.isBuiltIn && (\n              <ProfilePermissions\n                organization={props.organization || undefined}\n                profile={profile}\n              />\n            )}\n        </div>\n        <div className=\"quality-profile-grid-right\">\n          <ProfileInheritance {...props} />\n          <ProfileProjects {...props} />\n        </div>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { map } from 'lodash';\nimport { csvEscape } from '../helpers/csv';\nimport {\n  request,\n  checkStatus,\n  parseJSON,\n  getJSON,\n  post,\n  postJSON,\n  RequestData\n} from '../helpers/request';\nimport { Paging } from '../app/types';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface ProfileActions {\n  associateProjects?: boolean;\n  copy?: boolean;\n  delete?: boolean;\n  edit?: boolean;\n  setAsDefault?: boolean;\n}\n\nexport interface Actions {\n  create?: boolean;\n}\n\nexport interface Profile {\n  actions?: ProfileActions;\n  key: string;\n  name: string;\n  language: string;\n  languageName: string;\n  isInherited?: boolean;\n  parentKey?: string;\n  parentName?: string;\n  isDefault?: boolean;\n  activeRuleCount: number;\n  activeDeprecatedRuleCount: number;\n  rulesUpdatedAt?: string;\n  lastUsed?: string;\n  userUpdatedAt?: string;\n  organization: string;\n  isBuiltIn?: boolean;\n  projectCount?: number;\n}\n\nexport interface SearchQualityProfilesParameters {\n  defaults?: boolean;\n  language?: string;\n  organization?: string;\n  project?: string;\n  qualityProfile?: string;\n}\n\nexport interface SearchQualityProfilesResponse {\n  actions?: Actions;\n  profiles: Profile[];\n}\n\nexport function searchQualityProfiles(\n  parameters: SearchQualityProfilesParameters\n): Promise<SearchQualityProfilesResponse> {\n  return getJSON('/api/qualityprofiles/search', parameters).catch(throwGlobalError);\n}\n\nexport function getQualityProfile(data: {\n  compareToSonarWay?: boolean;\n  profile: string;\n}): Promise<any> {\n  return getJSON('/api/qualityprofiles/show', data);\n}\n\nexport function createQualityProfile(data: RequestData): Promise<any> {\n  return request('/api/qualityprofiles/create')\n    .setMethod('post')\n    .setData(data)\n    .submit()\n    .then(checkStatus)\n    .then(parseJSON);\n}\n\nexport function restoreQualityProfile(data: RequestData): Promise<any> {\n  return request('/api/qualityprofiles/restore')\n    .setMethod('post')\n    .setData(data)\n    .submit()\n    .then(checkStatus)\n    .then(parseJSON);\n}\n\nexport interface ProfileProject {\n  id: number;\n  key: string;\n  name: string;\n  selected: boolean;\n}\n\nexport function getProfileProjects(\n  data: RequestData\n): Promise<{ more: boolean; results: ProfileProject[] }> {\n  return getJSON('/api/qualityprofiles/projects', data).catch(throwGlobalError);\n}\n\nexport function getProfileInheritance(profileKey: string): Promise<any> {\n  return getJSON('/api/qualityprofiles/inheritance', { profileKey }).catch(throwGlobalError);\n}\n\nexport function setDefaultProfile(profileKey: string): Promise<void> {\n  return post('/api/qualityprofiles/set_default', { profileKey });\n}\n\nexport function renameProfile(key: string, name: string): Promise<void> {\n  return post('/api/qualityprofiles/rename', { key, name });\n}\n\nexport function copyProfile(fromKey: string, toName: string): Promise<any> {\n  return postJSON('/api/qualityprofiles/copy', { fromKey, toName });\n}\n\nexport function deleteProfile(profileKey: string): Promise<void> {\n  return post('/api/qualityprofiles/delete', { profileKey });\n}\n\nexport function changeProfileParent(profileKey: string, parentKey: string): Promise<void> {\n  return post('/api/qualityprofiles/change_parent', { profileKey, parentKey });\n}\n\nexport function getImporters(): Promise<\n  Array<{ key: string; languages: Array<string>; name: string }>\n> {\n  return getJSON('/api/qualityprofiles/importers').then(r => r.importers, throwGlobalError);\n}\n\nexport function getExporters(): Promise<any> {\n  return getJSON('/api/qualityprofiles/exporters').then(r => r.exporters);\n}\n\nexport function getProfileChangelog(data: RequestData): Promise<any> {\n  return getJSON('/api/qualityprofiles/changelog', data);\n}\n\nexport function compareProfiles(leftKey: string, rightKey: string): Promise<any> {\n  return getJSON('/api/qualityprofiles/compare', { leftKey, rightKey });\n}\n\nexport function associateProject(profileKey: string, projectKey: string) {\n  return post('/api/qualityprofiles/add_project', { profileKey, projectKey }).catch(\n    throwGlobalError\n  );\n}\n\nexport function dissociateProject(profileKey: string, projectKey: string) {\n  return post('/api/qualityprofiles/remove_project', { profileKey, projectKey }).catch(\n    throwGlobalError\n  );\n}\n\nexport interface SearchUsersGroupsParameters {\n  language: string;\n  organization?: string;\n  qualityProfile: string;\n  q?: string;\n  selected?: 'all' | 'selected' | 'deselected';\n}\n\nexport interface SearchUsersResponse {\n  users: Array<{\n    avatar?: string;\n    login: string;\n    name: string;\n    selected?: boolean;\n  }>;\n  paging: Paging;\n}\n\nexport function searchUsers(parameters: SearchUsersGroupsParameters): Promise<SearchUsersResponse> {\n  return getJSON('/api/qualityprofiles/search_users', parameters).catch(throwGlobalError);\n}\n\nexport interface SearchGroupsResponse {\n  groups: Array<{ name: string }>;\n  paging: Paging;\n}\n\nexport function searchGroups(\n  parameters: SearchUsersGroupsParameters\n): Promise<SearchGroupsResponse> {\n  return getJSON('/api/qualityprofiles/search_groups', parameters).catch(throwGlobalError);\n}\n\nexport interface AddRemoveUserParameters {\n  language: string;\n  login: string;\n  organization?: string;\n  qualityProfile: string;\n}\n\nexport function addUser(parameters: AddRemoveUserParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/add_user', parameters).catch(throwGlobalError);\n}\n\nexport function removeUser(parameters: AddRemoveUserParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/remove_user', parameters).catch(throwGlobalError);\n}\n\nexport interface AddRemoveGroupParameters {\n  group: string;\n  language: string;\n  organization?: string;\n  qualityProfile: string;\n}\n\nexport function addGroup(parameters: AddRemoveGroupParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/add_group', parameters).catch(throwGlobalError);\n}\n\nexport function removeGroup(parameters: AddRemoveGroupParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/remove_group', parameters).catch(throwGlobalError);\n}\n\nexport interface BulkActivateParameters {\n  /* eslint-disable camelcase */\n  activation?: boolean;\n  active_severities?: string;\n  asc?: boolean;\n  available_since?: string;\n  compareToProfile?: string;\n  inheritance?: string;\n  is_template?: string;\n  languages?: string;\n  organization: string | undefined;\n  q?: string;\n  qprofile?: string;\n  repositories?: string;\n  rule_key?: string;\n  s?: string;\n  severities?: string;\n  statuses?: string;\n  tags?: string;\n  targetKey: string;\n  targetSeverity?: string;\n  template_key?: string;\n  types?: string;\n  /* eslint-enable camelcase */\n}\n\nexport function bulkActivateRules(data: BulkActivateParameters) {\n  return postJSON('/api/qualityprofiles/activate_rules', data);\n}\n\nexport function bulkDeactivateRules(data: BulkActivateParameters) {\n  return postJSON('/api/qualityprofiles/deactivate_rules', data);\n}\n\nexport function activateRule(data: {\n  key: string;\n  organization: string | undefined;\n  params?: { [key: string]: string };\n  reset?: boolean;\n  rule: string;\n  severity?: string;\n}) {\n  const params =\n    data.params && map(data.params, (value, key) => `${key}=${csvEscape(value)}`).join(';');\n  return post('/api/qualityprofiles/activate_rule', { ...data, params }).catch(throwGlobalError);\n}\n\nexport function deactivateRule(data: {\n  key: string;\n  organization: string | undefined;\n  rule: string;\n}) {\n  return post('/api/qualityprofiles/deactivate_rule', data).catch(throwGlobalError);\n}\n"],"sourceRoot":""}