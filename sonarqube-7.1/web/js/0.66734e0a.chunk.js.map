{"version":3,"sources":["webpack:///./src/main/js/components/ui/IssueTypeIcon.tsx","webpack:///./src/main/js/components/shared/SeverityHelper.tsx","webpack:///./src/main/js/components/shared/SeverityIcon.js","webpack:///./src/main/js/components/tags/TagsList.tsx","webpack:///./src/main/js/components/common/MultiSelectOption.tsx","webpack:///./src/main/js/components/common/MultiSelect.tsx","webpack:///./src/main/js/components/common/MarkdownTips.tsx","webpack:///./src/main/js/components/tags/TagsSelector.tsx","webpack:///./src/main/js/components/common/BubblePopup.tsx","webpack:///./src/main/js/components/common/BubblePopupHelper.tsx"],"names":["_icons_components_CodeSmellIcon__WEBPACK_IMPORTED_MODULE_3__","__webpack_require__","IssueTypeIcon","_a","icon","className","query","size","toLowerCase","react__WEBPACK_IMPORTED_MODULE_0__","_icons_components_BugIcon__WEBPACK_IMPORTED_MODULE_1__","_icons_components_VulnerabilityIcon__WEBPACK_IMPORTED_MODULE_2__","_helpers_l10n__WEBPACK_IMPORTED_MODULE_2__","SeverityHelper","severity","_SeverityIcon__WEBPACK_IMPORTED_MODULE_1__","Object","classnames__WEBPACK_IMPORTED_MODULE_1__","classnames__WEBPACK_IMPORTED_MODULE_1___default","n","SeverityIcon","props","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","_icons_components_DropdownIcon__WEBPACK_IMPORTED_MODULE_3__","TagsList","_b","allowUpdate","tags","title","join","_super","MultiSelectOption","_this","apply","this","arguments","handleSelect","evt","stopPropagation","preventDefault","currentTarget","blur","disabled","onSelectChange","element","selected","handleHover","onHover","MultiSelectOption_extends","prototype","render","classnames","icon-checkbox-checked","icon-checkbox-invisible","activeClass","active","index_js_exposed","href","onClick","onFocus","onMouseOver","custom","renderLabel","MultiSelect_MultiSelect","MultiSelect","call","mounted","handleSelectChange","item","onSelectItem","onUnselectItem","handleSearchChange","value","onSearchQuery","validateSearchInput","handleElementHover","setState","prevState","activeIdx","getAllElements","indexOf","handleKeyboard","keyCode","selectNextElement","selectPreviousElement","state","toggleSelect","loading","onSearch","then","stopLoading","isNewElement","onSelect","onUnselect","elem","selectedElements","elements","length","updateSelectedElements","filterSelected","slice","updateUnselectedElements","listSize","unselectedElements","lodash_js_exposed","concat","setElementActive","idx","allElements","MultiSelect_extends","componentDidMount","container","addEventListener","componentWillReceiveProps","nextProps","totalElements","componentDidUpdate","searchInput","focus","componentWillUnmount","removeEventListener","allowSelection","_c","allowNewElements","_d","footerNode","_e","activeElement","showNewElement","infiniteList","listClasses","menu-vertically-limited","spacer-top","with-top-separator","with-bottom-separator","Boolean","ref","div","SearchBox","autoFocus","onChange","placeholder","map","common_MultiSelectOption","key","l10n","defaultProps","filter","includes","MarkdownTips","__extends","handleClick","window","open","_helpers_urls__WEBPACK_IMPORTED_MODULE_1__","TagsSelector","_common_BubblePopup__WEBPACK_IMPORTED_MODULE_1__","customClass","position","_common_MultiSelect__WEBPACK_IMPORTED_MODULE_2__","_helpers_l10n__WEBPACK_IMPORTED_MODULE_3__","selectedTags","validateTag","replace","BubblePopup","popupClass","popupStyle","__assign","style","children","BubblePopupHelper","top","right","handleKey","event","togglePopup","handleOutsideClick","popupContainer","contains","target","getPosition","isOpen","containerPos","getBoundingClientRect","offset","vertical","horizontal","height","left","role","tabIndex","popup","popupPosition"],"mappings":"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","file":"js/0.66734e0a.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport BugIcon from '../icons-components/BugIcon';\nimport VulnerabilityIcon from '../icons-components/VulnerabilityIcon';\nimport CodeSmellIcon from '../icons-components/CodeSmellIcon';\n\ninterface Props {\n  className?: string;\n  query: string;\n  size?: number;\n}\n\nexport default function IssueTypeIcon({ className, query, size }: Props) {\n  let icon;\n\n  switch (query.toLowerCase()) {\n    case 'bug':\n    case 'bugs':\n    case 'new_bugs':\n      icon = <BugIcon size={size} />;\n      break;\n    case 'vulnerability':\n    case 'vulnerabilities':\n    case 'new_vulnerabilities':\n      icon = <VulnerabilityIcon size={size} />;\n      break;\n    case 'code_smell':\n    case 'code_smells':\n    case 'new_code_smells':\n      icon = <CodeSmellIcon size={size} />;\n      break;\n  }\n\n  if (!icon) {\n    return null;\n  }\n\n  return className ? <span className={className}>{icon}</span> : icon;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SeverityIcon from './SeverityIcon';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  className?: string;\n  // TODO avoid passing nil values\n  severity: string | undefined | null;\n}\n\nexport default function SeverityHelper({ className, severity }: Props) {\n  if (!severity) {\n    return null;\n  }\n  return (\n    <span className={className}>\n      <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n      {translate('severity', severity)}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n//@flow\nimport React from 'react';\nimport classNames from 'classnames';\n\nexport default function SeverityIcon(props /*: { severity: ?string, className?: string } */) {\n  if (!props.severity) {\n    return null;\n  }\n  const className = classNames('icon-severity-' + props.severity.toLowerCase(), props.className);\n  return <i className={className} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport './TagsList.css';\nimport DropdownIcon from '../icons-components/DropdownIcon';\n\ninterface Props {\n  allowUpdate?: boolean;\n  className?: string;\n  tags: string[];\n}\n\nexport default function TagsList({ allowUpdate = false, className, tags }: Props) {\n  return (\n    <span className={classNames('tags-list', className)} title={tags.join(', ')}>\n      <i className=\"icon-tags\" />\n      <span className=\"text-ellipsis\">{tags.join(', ')}</span>\n      {allowUpdate && <DropdownIcon />}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\n\ninterface Props {\n  active?: boolean;\n  custom?: boolean;\n  disabled?: boolean;\n  element: string;\n  onHover: (elem: string) => void;\n  onSelectChange: (elem: string, selected: boolean) => void;\n  renderLabel: (element: string) => React.ReactNode;\n  selected?: boolean;\n}\n\nexport default class MultiSelectOption extends React.PureComponent<Props> {\n  handleSelect = (evt: React.SyntheticEvent<HTMLAnchorElement>) => {\n    evt.stopPropagation();\n    evt.preventDefault();\n    evt.currentTarget.blur();\n\n    if (!this.props.disabled) {\n      this.props.onSelectChange(this.props.element, !this.props.selected);\n    }\n  };\n\n  handleHover = () => this.props.onHover(this.props.element);\n\n  render() {\n    const { selected, disabled } = this.props;\n    const className = classNames('icon-checkbox', {\n      'icon-checkbox-checked': selected,\n      'icon-checkbox-invisible': disabled\n    });\n    const activeClass = classNames({ active: this.props.active, disabled });\n\n    return (\n      <li>\n        <a\n          className={activeClass}\n          href=\"#\"\n          onClick={this.handleSelect}\n          onFocus={this.handleHover}\n          onMouseOver={this.handleHover}>\n          <i className={className} /> {this.props.custom && '+ '}\n          {this.props.renderLabel(this.props.element)}\n        </a>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { difference } from 'lodash';\nimport MultiSelectOption from './MultiSelectOption';\nimport SearchBox from '../controls/SearchBox';\nimport { translateWithParameters } from '../../helpers/l10n';\n\ninterface Props {\n  allowNewElements?: boolean;\n  allowSelection?: boolean;\n  elements: string[];\n  filterSelected?: (query: string, selectedElements: string[]) => string[];\n  footerNode?: React.ReactNode;\n  listSize?: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  placeholder: string;\n  renderLabel?: (element: string) => React.ReactNode;\n  selectedElements: string[];\n  validateSearchInput?: (value: string) => string;\n}\n\ninterface State {\n  activeIdx: number;\n  loading: boolean;\n  query: string;\n  selectedElements: string[];\n  unselectedElements: string[];\n}\n\ninterface DefaultProps {\n  filterSelected: (query: string, selectedElements: string[]) => string[];\n  listSize: number;\n  renderLabel: (element: string) => React.ReactNode;\n  validateSearchInput: (value: string) => string;\n}\n\ntype PropsWithDefault = Props & DefaultProps;\n\nexport default class MultiSelect extends React.PureComponent<Props, State> {\n  container?: HTMLDivElement | null;\n  searchInput?: HTMLInputElement | null;\n  mounted = false;\n\n  static defaultProps: DefaultProps = {\n    filterSelected: (query: string, selectedElements: string[]) =>\n      selectedElements.filter(elem => elem.includes(query)),\n    listSize: 0,\n    renderLabel: (element: string) => element,\n    validateSearchInput: (value: string) => value\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      activeIdx: 0,\n      loading: true,\n      query: '',\n      selectedElements: [],\n      unselectedElements: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.onSearchQuery('');\n    this.updateSelectedElements(this.props as PropsWithDefault);\n    this.updateUnselectedElements(this.props as PropsWithDefault);\n    if (this.container) {\n      this.container.addEventListener('keydown', this.handleKeyboard, true);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: PropsWithDefault) {\n    if (\n      this.props.elements !== nextProps.elements ||\n      this.props.selectedElements !== nextProps.selectedElements\n    ) {\n      this.updateSelectedElements(nextProps);\n      this.updateUnselectedElements(nextProps);\n\n      const totalElements = this.getAllElements(nextProps, this.state).length;\n      if (this.state.activeIdx >= totalElements) {\n        this.setState({ activeIdx: totalElements - 1 });\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.searchInput) {\n      this.searchInput.focus();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.container) {\n      this.container.removeEventListener('keydown', this.handleKeyboard);\n    }\n  }\n\n  handleSelectChange = (item: string, selected: boolean) => {\n    if (selected) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  handleSearchChange = (value: string) => {\n    this.onSearchQuery((this.props as PropsWithDefault).validateSearchInput(value));\n  };\n\n  handleElementHover = (element: string) => {\n    this.setState((prevState, props) => {\n      return { activeIdx: this.getAllElements(props, prevState).indexOf(element) };\n    });\n  };\n\n  handleKeyboard = (evt: KeyboardEvent) => {\n    switch (evt.keyCode) {\n      case 40: // down\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectNextElement);\n        break;\n      case 38: // up\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectPreviousElement);\n        break;\n      case 37: // left\n      case 39: // right\n        evt.stopPropagation();\n        break;\n      case 13: // enter\n        if (this.state.activeIdx >= 0) {\n          this.toggleSelect(this.getAllElements(this.props, this.state)[this.state.activeIdx]);\n        }\n        break;\n    }\n  };\n\n  onSearchQuery = (query: string) => {\n    this.setState({ activeIdx: 0, loading: true, query });\n    this.props.onSearch(query).then(this.stopLoading, this.stopLoading);\n  };\n\n  onSelectItem = (item: string) => {\n    if (this.isNewElement(item, this.props)) {\n      this.onSearchQuery('');\n    }\n    this.props.onSelect(item);\n  };\n\n  onUnselectItem = (item: string) => this.props.onUnselect(item);\n\n  isNewElement = (elem: string, { selectedElements, elements }: Props) =>\n    elem.length > 0 && selectedElements.indexOf(elem) === -1 && elements.indexOf(elem) === -1;\n\n  updateSelectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (state.query) {\n        return {\n          selectedElements: props.filterSelected(state.query, props.selectedElements)\n        };\n      } else {\n        return { selectedElements: [...props.selectedElements] };\n      }\n    });\n  };\n\n  updateUnselectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (props.listSize === 0) {\n        return { unselectedElements: difference(props.elements, props.selectedElements) };\n      } else if (props.listSize < state.selectedElements.length) {\n        return { unselectedElements: [] };\n      } else {\n        return {\n          unselectedElements: difference(props.elements, props.selectedElements).slice(\n            0,\n            props.listSize - state.selectedElements.length\n          )\n        };\n      }\n    });\n  };\n\n  getAllElements = (props: Props, state: State) => {\n    if (this.isNewElement(state.query, props)) {\n      return [...state.selectedElements, ...state.unselectedElements, state.query];\n    } else {\n      return [...state.selectedElements, ...state.unselectedElements];\n    }\n  };\n\n  setElementActive = (idx: number) => this.setState({ activeIdx: idx });\n\n  selectNextElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx < 0 || activeIdx >= allElements.length - 1) {\n      return { activeIdx: 0 };\n    } else {\n      return { activeIdx: activeIdx + 1 };\n    }\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx <= 0) {\n      const lastIdx = allElements.length - 1;\n      return { activeIdx: lastIdx };\n    } else {\n      return { activeIdx: activeIdx - 1 };\n    }\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  toggleSelect = (item: string) => {\n    if (this.props.selectedElements.indexOf(item) === -1) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  render() {\n    const { allowSelection = true, allowNewElements = true, footerNode = '' } = this.props;\n    const { renderLabel } = this.props as PropsWithDefault;\n    const { query, activeIdx, selectedElements, unselectedElements } = this.state;\n    const activeElement = this.getAllElements(this.props, this.state)[activeIdx];\n    const showNewElement = allowNewElements && this.isNewElement(query, this.props);\n    const infiniteList = this.props.listSize === 0;\n    const listClasses = classNames('menu', {\n      'menu-vertically-limited': infiniteList,\n      'spacer-top': infiniteList,\n      'with-top-separator': infiniteList,\n      'with-bottom-separator': Boolean(footerNode)\n    });\n\n    return (\n      <div className=\"multi-select\" ref={div => (this.container = div)}>\n        <div className=\"menu-search\">\n          <SearchBox\n            autoFocus={true}\n            className=\"little-spacer-top\"\n            loading={this.state.loading}\n            onChange={this.handleSearchChange}\n            placeholder={this.props.placeholder}\n            value={query}\n          />\n        </div>\n        <ul className={listClasses}>\n          {selectedElements.length > 0 &&\n            selectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n                selected={true}\n              />\n            ))}\n          {unselectedElements.length > 0 &&\n            unselectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                disabled={!allowSelection}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n              />\n            ))}\n          {showNewElement && (\n            <MultiSelectOption\n              active={activeElement === query}\n              custom={true}\n              element={query}\n              key={query}\n              onHover={this.handleElementHover}\n              onSelectChange={this.handleSelectChange}\n              renderLabel={renderLabel}\n            />\n          )}\n          {!showNewElement &&\n            selectedElements.length < 1 &&\n            unselectedElements.length < 1 && (\n              <li className=\"spacer-left\">{translateWithParameters('no_results_for_x', query)}</li>\n            )}\n        </ul>\n        {footerNode}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getMarkdownHelpUrl } from '../../helpers/urls';\nimport { translate } from '../../helpers/l10n';\n\nexport default class MarkdownTips extends React.PureComponent {\n  handleClick(evt: React.SyntheticEvent<HTMLAnchorElement>) {\n    evt.preventDefault();\n    window.open(getMarkdownHelpUrl(), 'Markdown', 'height=300,width=600,scrollbars=1,resizable=1');\n  }\n\n  render() {\n    return (\n      <div className=\"markdown-tips\">\n        <a className=\"little-spacer-right\" href=\"#\" onClick={this.handleClick}>\n          {translate('markdown.helplink')}\n        </a>\n        {':'}\n        <span className=\"spacer-left\">*{translate('bold')}*</span>\n        <span className=\"spacer-left\">``{translate('code')}``</span>\n        <span className=\"spacer-left\">* {translate('bulleted_point')}</span>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport BubblePopup, { BubblePopupPosition } from '../common/BubblePopup';\nimport MultiSelect from '../common/MultiSelect';\nimport { translate } from '../../helpers/l10n';\nimport './TagsList.css';\n\ninterface Props {\n  listSize: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  position: BubblePopupPosition;\n  selectedTags: string[];\n  tags: string[];\n}\n\nexport default function TagsSelector(props: Props) {\n  return (\n    <BubblePopup\n      customClass=\"bubble-popup-bottom-right bubble-popup-menu abs-width-300\"\n      position={props.position}>\n      <MultiSelect\n        elements={props.tags}\n        listSize={props.listSize}\n        onSearch={props.onSearch}\n        onSelect={props.onSelect}\n        onUnselect={props.onUnselect}\n        placeholder={translate('search.search_for_tags')}\n        selectedElements={props.selectedTags}\n        validateSearchInput={validateTag}\n      />\n    </BubblePopup>\n  );\n}\n\nexport function validateTag(value: string) {\n  // Allow only a-z, 0-9, '+', '-', '#', '.'\n  return value.toLowerCase().replace(/[^-a-z0-9+#.]/gi, '');\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\n\nexport interface BubblePopupPosition {\n  top?: number;\n  left?: number;\n  right?: number;\n}\n\ninterface Props {\n  customClass?: string;\n  children: React.ReactNode;\n  position: BubblePopupPosition;\n}\n\nexport default function BubblePopup(props: Props) {\n  const popupClass = classNames('bubble-popup', props.customClass);\n  const popupStyle = { ...props.position };\n\n  return (\n    <div className={popupClass} style={popupStyle}>\n      {props.children}\n      <div className=\"bubble-popup-arrow\" />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\n\ninterface Props {\n  className?: string;\n  children?: React.ReactNode;\n  isOpen: boolean;\n  offset?: { vertical: number; horizontal: number };\n  popup: JSX.Element;\n  position: 'bottomleft' | 'bottomright';\n  togglePopup: (show: boolean) => void;\n}\n\ninterface State {\n  position: { top: number; left?: number; right?: number };\n}\n\nexport default class BubblePopupHelper extends React.PureComponent<Props, State> {\n  container?: HTMLElement | null;\n  popupContainer?: HTMLElement | null;\n  state: State = {\n    position: { top: 0, right: 0 }\n  };\n\n  componentDidMount() {\n    this.setState({ position: this.getPosition(this.props) });\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (!this.props.isOpen && nextProps.isOpen) {\n      window.addEventListener('keydown', this.handleKey, false);\n      window.addEventListener('click', this.handleOutsideClick, false);\n    } else if (this.props.isOpen && !nextProps.isOpen) {\n      window.removeEventListener('keydown', this.handleKey);\n      window.removeEventListener('click', this.handleOutsideClick);\n    }\n  }\n\n  handleKey = (event: KeyboardEvent) => {\n    // Escape key\n    if (event.keyCode === 27) {\n      this.props.togglePopup(false);\n    }\n  };\n\n  handleOutsideClick = (event: MouseEvent) => {\n    if (!this.popupContainer || !this.popupContainer.contains(event.target as Node)) {\n      this.props.togglePopup(false);\n    }\n  };\n\n  handleClick(event: React.SyntheticEvent<HTMLElement>) {\n    event.stopPropagation();\n  }\n\n  getPosition(props: Props) {\n    if (this.container) {\n      const containerPos = this.container.getBoundingClientRect();\n      const { position } = props;\n      const offset = props.offset || { vertical: 0, horizontal: 0 };\n      if (position === 'bottomleft') {\n        return { top: containerPos.height + offset.vertical, left: offset.horizontal };\n      } else {\n        // if (position === 'bottomright')\n        return { top: containerPos.height + offset.vertical, right: offset.horizontal };\n      }\n    } else {\n      return { top: 0, right: 0 };\n    }\n  }\n\n  render() {\n    return (\n      <div\n        className={classNames(this.props.className, 'bubble-popup-helper')}\n        onClick={this.handleClick}\n        ref={container => (this.container = container)}\n        role=\"tooltip\"\n        tabIndex={0}>\n        {this.props.children}\n        {this.props.isOpen && (\n          <div ref={popupContainer => (this.popupContainer = popupContainer)}>\n            {React.cloneElement(this.props.popup, {\n              popupPosition: this.state.position\n            })}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n"],"sourceRoot":""}