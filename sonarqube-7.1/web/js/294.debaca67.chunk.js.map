{"version":3,"sources":["webpack:///./src/main/js/apps/users/components/UserScmAccountInput.tsx","webpack:///./src/main/js/apps/users/components/UserForm.tsx","webpack:///./src/main/js/apps/users/Header.tsx","webpack:///./src/main/js/apps/users/Search.tsx","webpack:///./src/main/js/apps/users/components/TokensFormModal.tsx","webpack:///./src/main/js/apps/users/components/DeactivateForm.tsx","webpack:///./src/main/js/apps/users/components/PasswordForm.tsx","webpack:///./src/main/js/apps/users/components/UserActions.tsx","webpack:///./src/main/js/apps/users/components/GroupsForm.tsx","webpack:///./src/main/js/apps/users/components/UserGroups.tsx","webpack:///./src/main/js/apps/users/components/UserListItemIdentity.tsx","webpack:///./src/main/js/apps/users/components/UserScmAccounts.tsx","webpack:///./src/main/js/apps/users/components/UserListItem.tsx","webpack:///./src/main/js/apps/users/UsersList.tsx","webpack:///./src/main/js/apps/users/utils.ts","webpack:///./src/main/js/apps/users/UsersApp.tsx","webpack:///./src/main/js/apps/users/UsersAppContainer.tsx"],"names":["_super","UserScmAccountInput","_this","apply","this","arguments","handleChange","event","props","onChange","idx","currentTarget","value","handleRemove","onRemove","UserScmAccountInput_extends","prototype","render","index_js_exposed","maxLength","type","scmAccount","buttons","onClick","UserForm","call","mounted","handleError","error","includes","response","status","Object","request","then","errorMsg","setState","submitting","throwGlobalError","handleEmailChange","email","handleLoginChange","login","handleNameChange","name","handlePasswordChange","password","handleCreateUser","preventDefault","api_users","state","undefined","lodash_js_exposed","scmAccounts","onUpdateUsers","onClose","handleUpdateUser","join","handleAddScmAccount","_a","concat","handleUpdateScmAccount","slice","handleRemoveScmAccount","user","UserForm_extends","componentDidMount","componentWillUnmount","header","l10n","Modal","contentLabel","onRequestClose","autoComplete","id","onSubmit","className","htmlFor","autoFocus","minLength","required","map","scm","components_UserScmAccountInput","key","disabled","Header","openUserForm","handleOpenUserForm","handleCloseUserForm","Header_extends","DeferredSpinner","loading","components_UserForm","Search","handleSearch","search","updateQuery","Search_extends","query","SearchBox","placeholder","TokensFormModal","handleCloseClick","evt","TokensFormModal_extends","TokensForm","updateTokensCount","href","DeactivateForm","handleDeactivate","DeactivateForm_extends","PasswordForm","confirmPassword","newPassword","oldPassword","handleConfirmPasswordChange","handleNewPasswordChange","handleOldPasswordChange","handleChangePassword","length","previousPassword","addGlobalSuccessMessage","PasswordForm_extends","isCurrentUser","UserActions","handleOpenDeactivateForm","openForm","handleOpenPasswordForm","handleOpenUpdateForm","handleCloseForm","renderActions","ActionsDropdown","menuClassName","local","destructive","UserActions_extends","components_DeactivateForm","components_PasswordForm","GroupsForm","groups","selectedGroups","selected","data","filter","group","handleSelect","user_groups","handleUnselect","handleClose","renderElement","description","GroupsForm_extends","SelectList","Selected","elements","onSearch","onSelect","onUnselect","selectedElements","UserGroups","showMore","handleOpenForm","toggleShowMore","UserGroups_extends","limit","UserGroups_GROUPS_LIMIT","tooltip","BulletListIcon","components_GroupsForm","UserListItemIdentity_UserListItemIdentity","identityProvider","externalProvider","UserListItemIdentity_ExternalProvider","style","background-color","backgroundColor","color","colors","theme","alt","src","urls","iconPath","width","height","externalIdentity","UserScmAccounts","UserScmAccounts_extends","UserScmAccounts_SCM_LIMIT","UserListItem","openTokenForm","handleOpenTokensForm","handleCloseTokensForm","UserListItem_extends","organizationsEnabled","Avatar","hash","avatar","size","components_UserScmAccounts","components_UserGroups","tokensCount","components_UserActions","components_TokensFormModal","UsersList_UsersList","currentUser","identityProviders","users","components_UserListItem","find","provider","isLoggedIn","utils_parseQuery","urlQuery","helpers_query","utils_serializeQuery","UsersApp","finishLoading","fetchIdentityProviders","fetchUsers","location","q","paging","fetchMoreUsers","p","pageIndex","newQuery","UsersApp_assign","context","router","push","UsersApp_extends","componentWillReceiveProps","nextProps","Helmet_default","a","title","users_Header","users_Search","ListFooter","count","total","ready","loadMore","contextTypes","prop_types","isRequired","__webpack_exports__","es","rootReducer","users_UsersApp"],"mappings":"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","file":"js/294.debaca67.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DeleteButton } from '../../../components/ui/buttons';\n\nexport interface Props {\n  idx: number;\n  scmAccount: string;\n  onChange: (idx: number, scmAccount: string) => void;\n  onRemove: (idx: number) => void;\n}\n\nexport default class UserScmAccountInput extends React.PureComponent<Props> {\n  handleChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.props.onChange(this.props.idx, event.currentTarget.value);\n\n  handleRemove = () => this.props.onRemove(this.props.idx);\n\n  render() {\n    return (\n      <div>\n        <input\n          maxLength={255}\n          onChange={this.handleChange}\n          type=\"text\"\n          value={this.props.scmAccount}\n        />\n        <DeleteButton onClick={this.handleRemove} />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { uniq } from 'lodash';\nimport UserScmAccountInput from './UserScmAccountInput';\nimport { createUser, updateUser } from '../../../api/users';\nimport { User } from '../../../app/types';\nimport throwGlobalError from '../../../app/utils/throwGlobalError';\nimport Modal from '../../../components/controls/Modal';\nimport { Button, ResetButtonLink, SubmitButton } from '../../../components/ui/buttons';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { parseError } from '../../../helpers/request';\n\nexport interface Props {\n  user?: User;\n  onClose: () => void;\n  onUpdateUsers: () => void;\n}\n\ninterface State {\n  email: string;\n  error?: string;\n  login: string;\n  name: string;\n  password: string;\n  scmAccounts: string[];\n  submitting: boolean;\n}\n\nexport default class UserForm extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    const { user } = props;\n    if (user) {\n      this.state = {\n        email: user.email || '',\n        login: user.login,\n        name: user.name,\n        password: '',\n        scmAccounts: user.scmAccounts || [],\n        submitting: false\n      };\n    } else {\n      this.state = {\n        email: '',\n        login: '',\n        name: '',\n        password: '',\n        scmAccounts: [],\n        submitting: false\n      };\n    }\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleError = (error: { response: Response }) => {\n    if (!this.mounted || ![400, 500].includes(error.response.status)) {\n      return throwGlobalError(error);\n    } else {\n      return parseError(error).then(\n        errorMsg => this.setState({ error: errorMsg, submitting: false }),\n        throwGlobalError\n      );\n    }\n  };\n\n  handleEmailChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.setState({ email: event.currentTarget.value });\n\n  handleLoginChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.setState({ login: event.currentTarget.value });\n\n  handleNameChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.setState({ name: event.currentTarget.value });\n\n  handlePasswordChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.setState({ password: event.currentTarget.value });\n\n  handleCreateUser = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    createUser({\n      email: this.state.email || undefined,\n      login: this.state.login,\n      name: this.state.name,\n      password: this.state.password,\n      scmAccount: uniq(this.state.scmAccounts)\n    }).then(() => {\n      this.props.onUpdateUsers();\n      this.props.onClose();\n    }, this.handleError);\n  };\n\n  handleUpdateUser = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    updateUser({\n      email: this.state.email,\n      login: this.state.login,\n      name: this.state.name,\n      scmAccount: uniq(this.state.scmAccounts).join(',')\n    }).then(() => {\n      this.props.onUpdateUsers();\n      this.props.onClose();\n    }, this.handleError);\n  };\n\n  handleAddScmAccount = () => {\n    this.setState(({ scmAccounts }) => ({ scmAccounts: scmAccounts.concat('') }));\n  };\n\n  handleUpdateScmAccount = (idx: number, scmAccount: string) =>\n    this.setState(({ scmAccounts: oldScmAccounts }) => {\n      const scmAccounts = oldScmAccounts.slice();\n      scmAccounts[idx] = scmAccount;\n      return { scmAccounts };\n    });\n\n  handleRemoveScmAccount = (idx: number) =>\n    this.setState(({ scmAccounts }) => ({\n      scmAccounts: scmAccounts.slice(0, idx).concat(scmAccounts.slice(idx + 1))\n    }));\n\n  render() {\n    const { user } = this.props;\n    const { error, submitting } = this.state;\n\n    const header = user ? translate('users.update_user') : translate('users.create_user');\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <form\n          autoComplete=\"off\"\n          id=\"user-form\"\n          onSubmit={this.props.user ? this.handleUpdateUser : this.handleCreateUser}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n\n          <div className=\"modal-body\">\n            {error && <p className=\"alert alert-danger\">{error}</p>}\n\n            {!user && (\n              <div className=\"modal-field\">\n                <label htmlFor=\"create-user-login\">\n                  {translate('login')}\n                  <em className=\"mandatory\">*</em>\n                </label>\n                {/* keep this fake field to hack browser autofill */}\n                <input className=\"hidden\" name=\"login-fake\" type=\"text\" />\n                <input\n                  autoFocus={true}\n                  id=\"create-user-login\"\n                  maxLength={255}\n                  minLength={3}\n                  name=\"login\"\n                  onChange={this.handleLoginChange}\n                  required={true}\n                  type=\"text\"\n                  value={this.state.login}\n                />\n                <p className=\"note\">{translateWithParameters('users.minimum_x_characters', 3)}</p>\n              </div>\n            )}\n            <div className=\"modal-field\">\n              <label htmlFor=\"create-user-name\">\n                {translate('name')}\n                <em className=\"mandatory\">*</em>\n              </label>\n              {/* keep this fake field to hack browser autofill */}\n              <input className=\"hidden\" name=\"name-fake\" type=\"text\" />\n              <input\n                autoFocus={!!user}\n                id=\"create-user-name\"\n                maxLength={200}\n                name=\"name\"\n                onChange={this.handleNameChange}\n                required={true}\n                type=\"text\"\n                value={this.state.name}\n              />\n            </div>\n            <div className=\"modal-field\">\n              <label htmlFor=\"create-user-email\">{translate('users.email')}</label>\n              {/* keep this fake field to hack browser autofill */}\n              <input className=\"hidden\" name=\"email-fake\" type=\"email\" />\n              <input\n                id=\"create-user-email\"\n                maxLength={100}\n                name=\"email\"\n                onChange={this.handleEmailChange}\n                type=\"email\"\n                value={this.state.email}\n              />\n            </div>\n            {!user && (\n              <div className=\"modal-field\">\n                <label htmlFor=\"create-user-password\">\n                  {translate('password')}\n                  <em className=\"mandatory\">*</em>\n                </label>\n                {/* keep this fake field to hack browser autofill */}\n                <input className=\"hidden\" name=\"password-fake\" type=\"password\" />\n                <input\n                  id=\"create-user-password\"\n                  maxLength={50}\n                  name=\"password\"\n                  onChange={this.handlePasswordChange}\n                  required={true}\n                  type=\"password\"\n                  value={this.state.password}\n                />\n              </div>\n            )}\n            <div className=\"modal-field\">\n              <label>{translate('my_profile.scm_accounts')}</label>\n              {this.state.scmAccounts.map((scm, idx) => (\n                <UserScmAccountInput\n                  idx={idx}\n                  key={idx}\n                  onChange={this.handleUpdateScmAccount}\n                  onRemove={this.handleRemoveScmAccount}\n                  scmAccount={scm}\n                />\n              ))}\n              <div className=\"spacer-bottom\">\n                <Button onClick={this.handleAddScmAccount} type=\"reset\">\n                  {translate('add_verb')}\n                </Button>\n              </div>\n              <p className=\"note\">{translate('user.login_or_email_used_as_scm_account')}</p>\n            </div>\n          </div>\n\n          <footer className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton className=\"js-confirm\" disabled={submitting}>\n              {user ? translate('update_verb') : translate('create')}\n            </SubmitButton>\n            <ResetButtonLink className=\"js-modal-close\" onClick={this.props.onClose}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport UserForm from './components/UserForm';\nimport DeferredSpinner from '../../components/common/DeferredSpinner';\nimport { Button } from '../../components/ui/buttons';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  loading: boolean;\n  onUpdateUsers: () => void;\n}\n\ninterface State {\n  openUserForm: boolean;\n}\n\nexport default class Header extends React.PureComponent<Props, State> {\n  state: State = { openUserForm: false };\n\n  handleOpenUserForm = () => {\n    this.setState({ openUserForm: true });\n  };\n\n  handleCloseUserForm = () => {\n    this.setState({ openUserForm: false });\n  };\n\n  render() {\n    return (\n      <header className=\"page-header\" id=\"users-header\">\n        <h1 className=\"page-title\">{translate('users.page')}</h1>\n        <DeferredSpinner loading={this.props.loading} />\n\n        <div className=\"page-actions\">\n          <Button id=\"users-create\" onClick={this.handleOpenUserForm}>\n            {translate('users.create_user')}\n          </Button>\n        </div>\n\n        <p className=\"page-description\">{translate('users.page.description')}</p>\n        {this.state.openUserForm && (\n          <UserForm onClose={this.handleCloseUserForm} onUpdateUsers={this.props.onUpdateUsers} />\n        )}\n      </header>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Query } from './utils';\nimport SearchBox from '../../components/controls/SearchBox';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  query: Query;\n  updateQuery: (newQuery: Partial<Query>) => void;\n}\n\nexport default class Search extends React.PureComponent<Props> {\n  handleSearch = (search: string) => {\n    this.props.updateQuery({ search });\n  };\n\n  render() {\n    const { query } = this.props;\n\n    return (\n      <div id=\"users-search\" className=\"panel panel-vertical bordered-bottom spacer-bottom\">\n        <SearchBox\n          minLength={2}\n          onChange={this.handleSearch}\n          placeholder={translate('search.search_by_login_or_name')}\n          value={query.search}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n/*\n * SonarQube\n * Copyright (C) 2009-2017 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport TokensForm from './TokensForm';\nimport { User } from '../../../app/types';\nimport Modal from '../../../components/controls/Modal';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  user: User;\n  onClose: () => void;\n  updateTokensCount: (login: string, tokensCount: number) => void;\n}\n\nexport default class TokensFormModal extends React.PureComponent<Props> {\n  handleCloseClick = (evt: React.SyntheticEvent<HTMLAnchorElement>) => {\n    evt.preventDefault();\n    this.props.onClose();\n  };\n\n  render() {\n    const header = translate('users.tokens');\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n        <div className=\"modal-body modal-container\">\n          <TokensForm\n            login={this.props.user.login}\n            updateTokensCount={this.props.updateTokensCount}\n          />\n        </div>\n        <footer className=\"modal-foot\">\n          <a className=\"js-modal-close\" href=\"#\" onClick={this.handleCloseClick}>\n            {translate('Done')}\n          </a>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { deactivateUser } from '../../../api/users';\nimport { User } from '../../../app/types';\nimport Modal from '../../../components/controls/Modal';\nimport { SubmitButton, ResetButtonLink } from '../../../components/ui/buttons';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n\nexport interface Props {\n  onClose: () => void;\n  onUpdateUsers: () => void;\n  user: User;\n}\n\ninterface State {\n  submitting: boolean;\n}\n\nexport default class DeactivateForm extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { submitting: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleDeactivate = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    deactivateUser({ login: this.props.user.login }).then(\n      () => {\n        this.props.onUpdateUsers();\n        this.props.onClose();\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n        }\n      }\n    );\n  };\n\n  render() {\n    const { user } = this.props;\n    const { submitting } = this.state;\n\n    const header = translate('users.deactivate_user');\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <form autoComplete=\"off\" id=\"deactivate-user-form\" onSubmit={this.handleDeactivate}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n          <div className=\"modal-body\">\n            {translateWithParameters('users.deactivate_user.confirmation', user.name, user.login)}\n          </div>\n          <footer className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton className=\"js-confirm button-red\" disabled={submitting}>\n              {translate('users.deactivate')}\n            </SubmitButton>\n            <ResetButtonLink className=\"js-modal-close\" onClick={this.props.onClose}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { changePassword } from '../../../api/users';\nimport { User } from '../../../app/types';\nimport addGlobalSuccessMessage from '../../../app/utils/addGlobalSuccessMessage';\nimport throwGlobalError from '../../../app/utils/throwGlobalError';\nimport Modal from '../../../components/controls/Modal';\nimport { SubmitButton, ResetButtonLink } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\nimport { parseError } from '../../../helpers/request';\n\ninterface Props {\n  isCurrentUser: boolean;\n  user: User;\n  onClose: () => void;\n}\n\ninterface State {\n  confirmPassword: string;\n  error?: string;\n  newPassword: string;\n  oldPassword: string;\n  submitting: boolean;\n}\n\nexport default class PasswordForm extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    confirmPassword: '',\n    newPassword: '',\n    oldPassword: '',\n    submitting: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleError = (error: { response: Response }) => {\n    if (!this.mounted || error.response.status !== 400) {\n      return throwGlobalError(error);\n    } else {\n      return parseError(error).then(\n        errorMsg => this.setState({ error: errorMsg, submitting: false }),\n        throwGlobalError\n      );\n    }\n  };\n\n  handleConfirmPasswordChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.setState({ confirmPassword: event.currentTarget.value });\n\n  handleNewPasswordChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.setState({ newPassword: event.currentTarget.value });\n\n  handleOldPasswordChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.setState({ oldPassword: event.currentTarget.value });\n\n  handleChangePassword = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    if (\n      this.state.newPassword.length > 0 &&\n      this.state.newPassword === this.state.confirmPassword\n    ) {\n      this.setState({ submitting: true });\n      changePassword({\n        login: this.props.user.login,\n        password: this.state.newPassword,\n        previousPassword: this.state.oldPassword\n      }).then(() => {\n        addGlobalSuccessMessage(translate('my_profile.password.changed'));\n        this.props.onClose();\n      }, this.handleError);\n    }\n  };\n\n  render() {\n    const { error, submitting, newPassword, confirmPassword } = this.state;\n\n    const header = translate('my_profile.password.title');\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <form autoComplete=\"off\" id=\"user-password-form\" onSubmit={this.handleChangePassword}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n          <div className=\"modal-body\">\n            {error && <p className=\"alert alert-danger\">{error}</p>}\n            {this.props.isCurrentUser && (\n              <div className=\"modal-field\">\n                <label htmlFor=\"old-user-password\">\n                  {translate('my_profile.password.old')}\n                  <em className=\"mandatory\">*</em>\n                </label>\n                {/* keep this fake field to hack browser autofill */}\n                <input className=\"hidden\" name=\"old-password-fake\" type=\"password\" />\n                <input\n                  id=\"old-user-password\"\n                  maxLength={50}\n                  name=\"old-password\"\n                  onChange={this.handleOldPasswordChange}\n                  required={true}\n                  type=\"password\"\n                  value={this.state.oldPassword}\n                />\n              </div>\n            )}\n            <div className=\"modal-field\">\n              <label htmlFor=\"user-password\">\n                {translate('my_profile.password.new')}\n                <em className=\"mandatory\">*</em>\n              </label>\n              {/* keep this fake field to hack browser autofill */}\n              <input className=\"hidden\" name=\"password-fake\" type=\"password\" />\n              <input\n                id=\"user-password\"\n                maxLength={50}\n                name=\"password\"\n                onChange={this.handleNewPasswordChange}\n                required={true}\n                type=\"password\"\n                value={this.state.newPassword}\n              />\n            </div>\n            <div className=\"modal-field\">\n              <label htmlFor=\"confirm-user-password\">\n                {translate('my_profile.password.confirm')}\n                <em className=\"mandatory\">*</em>\n              </label>\n              {/* keep this fake field to hack browser autofill */}\n              <input className=\"hidden\" name=\"confirm-password-fake\" type=\"password\" />\n              <input\n                id=\"confirm-user-password\"\n                maxLength={50}\n                name=\"confirm-password\"\n                onChange={this.handleConfirmPasswordChange}\n                required={true}\n                type=\"password\"\n                value={this.state.confirmPassword}\n              />\n            </div>\n          </div>\n          <footer className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton\n              className=\"js-confirm\"\n              disabled={submitting || !newPassword || newPassword !== confirmPassword}>\n              {translate('change_verb')}\n            </SubmitButton>\n            <ResetButtonLink className=\"js-modal-close\" onClick={this.props.onClose}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport DeactivateForm from './DeactivateForm';\nimport PasswordForm from './PasswordForm';\nimport UserForm from './UserForm';\nimport { User } from '../../../app/types';\nimport ActionsDropdown, {\n  ActionsDropdownItem,\n  ActionsDropdownDivider\n} from '../../../components/controls/ActionsDropdown';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  isCurrentUser: boolean;\n  onUpdateUsers: () => void;\n  user: User;\n}\n\ninterface State {\n  openForm?: string;\n}\n\nexport default class UserActions extends React.PureComponent<Props, State> {\n  state: State = {};\n\n  handleOpenDeactivateForm = () => this.setState({ openForm: 'deactivate' });\n  handleOpenPasswordForm = () => this.setState({ openForm: 'password' });\n  handleOpenUpdateForm = () => this.setState({ openForm: 'update' });\n  handleCloseForm = () => this.setState({ openForm: undefined });\n\n  renderActions = () => {\n    const { user } = this.props;\n    return (\n      <ActionsDropdown menuClassName=\"dropdown-menu-right\">\n        <ActionsDropdownItem className=\"js-user-update\" onClick={this.handleOpenUpdateForm}>\n          {translate('update_details')}\n        </ActionsDropdownItem>\n        {user.local && (\n          <ActionsDropdownItem\n            className=\"js-user-change-password\"\n            onClick={this.handleOpenPasswordForm}>\n            {translate('my_profile.password.title')}\n          </ActionsDropdownItem>\n        )}\n        <ActionsDropdownDivider />\n        <ActionsDropdownItem\n          className=\"js-user-deactivate\"\n          destructive={true}\n          onClick={this.handleOpenDeactivateForm}>\n          {translate('users.deactivate')}\n        </ActionsDropdownItem>\n      </ActionsDropdown>\n    );\n  };\n\n  render() {\n    const { openForm } = this.state;\n    const { isCurrentUser, onUpdateUsers, user } = this.props;\n\n    return (\n      <>\n        {this.renderActions()}\n        {openForm === 'deactivate' && (\n          <DeactivateForm\n            onClose={this.handleCloseForm}\n            onUpdateUsers={onUpdateUsers}\n            user={user}\n          />\n        )}\n        {openForm === 'password' && (\n          <PasswordForm isCurrentUser={isCurrentUser} onClose={this.handleCloseForm} user={user} />\n        )}\n        {openForm === 'update' && (\n          <UserForm onClose={this.handleCloseForm} onUpdateUsers={onUpdateUsers} user={user} />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { find, without } from 'lodash';\nimport { User } from '../../../app/types';\nimport Modal from '../../../components/controls/Modal';\nimport SelectList, { Filter } from '../../../components/SelectList/SelectList';\nimport { translate } from '../../../helpers/l10n';\nimport { getUserGroups, UserGroup } from '../../../api/users';\nimport { addUserToGroup, removeUserFromGroup } from '../../../api/user_groups';\n\ninterface Props {\n  onClose: () => void;\n  onUpdateUsers: () => void;\n  user: User;\n}\n\ninterface State {\n  error: string;\n  groups: UserGroup[];\n  selectedGroups: string[];\n}\n\nexport default class GroupsForm extends React.PureComponent<Props> {\n  container?: HTMLDivElement | null;\n  state: State = { error: '', groups: [], selectedGroups: [] };\n\n  componentDidMount() {\n    this.handleSearch('', Filter.Selected);\n  }\n\n  handleSearch = (query: string, selected: Filter) => {\n    return getUserGroups(this.props.user.login, undefined, query, selected).then(data => {\n      this.setState({\n        groups: data.groups,\n        selectedGroups: data.groups.filter(group => group.selected).map(group => group.name)\n      });\n    });\n  };\n\n  handleSelect = (name: string) => {\n    return addUserToGroup({\n      name,\n      login: this.props.user.login\n    }).then(() => {\n      this.setState((state: State) => ({ selectedGroups: [...state.selectedGroups, name] }));\n    });\n  };\n\n  handleUnselect = (name: string) => {\n    return removeUserFromGroup({\n      name,\n      login: this.props.user.login\n    }).then(() => {\n      this.setState((state: State) => ({\n        selectedGroups: without(state.selectedGroups, name)\n      }));\n    });\n  };\n\n  handleCloseClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    event.preventDefault();\n    this.handleClose();\n  };\n\n  handleClose = () => {\n    this.props.onUpdateUsers();\n    this.props.onClose();\n  };\n\n  renderElement = (name: string): React.ReactNode => {\n    const group = find(this.state.groups, { name });\n    return (\n      <div className=\"select-list-list-item\">\n        {group === undefined ? (\n          name\n        ) : (\n          <>\n            {group.name}\n            <br />\n            <span className=\"note\">{group.description}</span>\n          </>\n        )}\n      </div>\n    );\n  };\n\n  render() {\n    const header = translate('users.update_groups');\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.handleClose}>\n        <div className=\"modal-head\">\n          <h2>{header}</h2>\n        </div>\n\n        <div className=\"modal-body\">\n          {this.state.error !== '' && (\n            <div className=\"alert alert-danger\">\n              <p>{this.state.error}</p>\n            </div>\n          )}\n          <SelectList\n            elements={this.state.groups.map(group => group.name)}\n            onSearch={this.handleSearch}\n            onSelect={this.handleSelect}\n            onUnselect={this.handleUnselect}\n            renderElement={this.renderElement}\n            selectedElements={this.state.selectedGroups}\n          />\n        </div>\n\n        <footer className=\"modal-foot\">\n          <a className=\"js-modal-close\" href=\"#\" onClick={this.handleCloseClick}>\n            {translate('Done')}\n          </a>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport GroupsForm from './GroupsForm';\nimport BulletListIcon from '../../../components/icons-components/BulletListIcon';\nimport { User } from '../../../app/types';\nimport { ButtonIcon } from '../../../components/ui/buttons';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n\ninterface Props {\n  groups: string[];\n  onUpdateUsers: () => void;\n  user: User;\n}\n\ninterface State {\n  openForm: boolean;\n  showMore: boolean;\n}\n\nconst GROUPS_LIMIT = 3;\n\nexport default class UserGroups extends React.PureComponent<Props, State> {\n  state: State = { openForm: false, showMore: false };\n\n  handleOpenForm = () => this.setState({ openForm: true });\n  handleCloseForm = () => this.setState({ openForm: false });\n\n  toggleShowMore = (evt: React.SyntheticEvent<HTMLAnchorElement>) => {\n    evt.preventDefault();\n    this.setState(state => ({ showMore: !state.showMore }));\n  };\n\n  render() {\n    const { groups } = this.props;\n    const limit = groups.length > GROUPS_LIMIT ? GROUPS_LIMIT - 1 : GROUPS_LIMIT;\n    return (\n      <ul>\n        {groups.slice(0, limit).map(group => (\n          <li key={group} className=\"little-spacer-bottom\">\n            {group}\n          </li>\n        ))}\n        {groups.length > GROUPS_LIMIT &&\n          this.state.showMore &&\n          groups.slice(limit).map(group => (\n            <li key={group} className=\"little-spacer-bottom\">\n              {group}\n            </li>\n          ))}\n        <li className=\"little-spacer-bottom\">\n          {groups.length > GROUPS_LIMIT &&\n            !this.state.showMore && (\n              <a\n                className=\"js-user-more-groups spacer-right\"\n                href=\"#\"\n                onClick={this.toggleShowMore}>\n                {translateWithParameters('more_x', groups.length - limit)}\n              </a>\n            )}\n          <ButtonIcon\n            className=\"js-user-groups button-small\"\n            onClick={this.handleOpenForm}\n            tooltip={translate('users.update_groups')}>\n            <BulletListIcon />\n          </ButtonIcon>\n        </li>\n        {this.state.openForm && (\n          <GroupsForm\n            onClose={this.handleCloseForm}\n            onUpdateUsers={this.props.onUpdateUsers}\n            user={this.props.user}\n          />\n        )}\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as theme from '../../../app/theme';\nimport { IdentityProvider, User } from '../../../app/types';\nimport { getTextColor } from '../../../helpers/colors';\nimport { getBaseUrl } from '../../../helpers/urls';\n\ninterface Props {\n  identityProvider?: IdentityProvider;\n  user: User;\n}\n\nexport default function UserListItemIdentity({ identityProvider, user }: Props) {\n  return (\n    <td>\n      <div>\n        <strong className=\"js-user-name\">{user.name}</strong>\n        <span className=\"js-user-login note little-spacer-left\">{user.login}</span>\n      </div>\n      {user.email && <div className=\"js-user-email little-spacer-top\">{user.email}</div>}\n      {!user.local &&\n        user.externalProvider !== 'sonarqube' && (\n          <ExternalProvider identityProvider={identityProvider} user={user} />\n        )}\n    </td>\n  );\n}\n\nexport function ExternalProvider({ identityProvider, user }: Props) {\n  if (!identityProvider) {\n    return (\n      <div className=\"js-user-identity-provider little-spacer-top\">\n        <span>\n          {user.externalProvider}: {user.externalIdentity}\n        </span>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"js-user-identity-provider little-spacer-top\">\n      <div\n        className=\"identity-provider\"\n        style={{\n          'background-color': identityProvider.backgroundColor,\n          color: getTextColor(identityProvider.backgroundColor, theme.secondFontColor)\n        }}>\n        <img\n          alt={identityProvider.name}\n          className=\"little-spacer-right\"\n          src={getBaseUrl() + identityProvider.iconPath}\n          width=\"14\"\n          height=\"14\"\n        />\n        {user.externalIdentity}\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translateWithParameters } from '../../../helpers/l10n';\n\ninterface Props {\n  scmAccounts: string[];\n}\n\ninterface State {\n  showMore: boolean;\n}\n\nconst SCM_LIMIT = 3;\n\nexport default class UserScmAccounts extends React.PureComponent<Props, State> {\n  state: State = { showMore: false };\n\n  toggleShowMore = (evt: React.SyntheticEvent<HTMLAnchorElement>) => {\n    evt.preventDefault();\n    this.setState(state => ({ showMore: !state.showMore }));\n  };\n\n  render() {\n    const { scmAccounts } = this.props;\n    const limit = scmAccounts.length > SCM_LIMIT ? SCM_LIMIT - 1 : SCM_LIMIT;\n    return (\n      <ul>\n        {scmAccounts.slice(0, limit).map((scmAccount, idx) => (\n          <li key={idx} className=\"little-spacer-bottom\">\n            {scmAccount}\n          </li>\n        ))}\n        {scmAccounts.length > SCM_LIMIT &&\n          (this.state.showMore ? (\n            scmAccounts.slice(limit).map((scmAccount, idx) => (\n              <li key={idx + limit} className=\"little-spacer-bottom\">\n                {scmAccount}\n              </li>\n            ))\n          ) : (\n            <li className=\"little-spacer-bottom\">\n              <a className=\"js-user-more-scm\" href=\"#\" onClick={this.toggleShowMore}>\n                {translateWithParameters('more_x', scmAccounts.length - limit)}\n              </a>\n            </li>\n          ))}\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport TokensFormModal from './TokensFormModal';\nimport UserActions from './UserActions';\nimport UserGroups from './UserGroups';\nimport UserListItemIdentity from './UserListItemIdentity';\nimport UserScmAccounts from './UserScmAccounts';\nimport { IdentityProvider, User } from '../../../app/types';\nimport BulletListIcon from '../../../components/icons-components/BulletListIcon';\nimport Avatar from '../../../components/ui/Avatar';\nimport { ButtonIcon } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  identityProvider?: IdentityProvider;\n  isCurrentUser: boolean;\n  onUpdateUsers: () => void;\n  organizationsEnabled: boolean;\n  updateTokensCount: (login: string, tokensCount: number) => void;\n  user: User;\n}\n\ninterface State {\n  openTokenForm: boolean;\n}\n\nexport default class UserListItem extends React.PureComponent<Props, State> {\n  state: State = { openTokenForm: false };\n\n  handleOpenTokensForm = () => this.setState({ openTokenForm: true });\n  handleCloseTokensForm = () => this.setState({ openTokenForm: false });\n\n  render() {\n    const { identityProvider, onUpdateUsers, organizationsEnabled, user } = this.props;\n\n    return (\n      <tr>\n        <td className=\"thin nowrap\">\n          <Avatar hash={user.avatar} name={user.name} size={36} />\n        </td>\n        <UserListItemIdentity identityProvider={identityProvider} user={user} />\n        <td>\n          <UserScmAccounts scmAccounts={user.scmAccounts || []} />\n        </td>\n        {!organizationsEnabled && (\n          <td>\n            <UserGroups groups={user.groups || []} user={user} onUpdateUsers={onUpdateUsers} />\n          </td>\n        )}\n        <td>\n          {user.tokensCount}\n          <ButtonIcon\n            className=\"js-user-tokens spacer-left button-small\"\n            onClick={this.handleOpenTokensForm}\n            tooltip={translate('users.update_tokens')}>\n            <BulletListIcon />\n          </ButtonIcon>\n        </td>\n        <td className=\"thin nowrap text-right\">\n          <UserActions\n            isCurrentUser={this.props.isCurrentUser}\n            onUpdateUsers={onUpdateUsers}\n            user={user}\n          />\n        </td>\n        {this.state.openTokenForm && (\n          <TokensFormModal\n            user={user}\n            onClose={this.handleCloseTokensForm}\n            updateTokensCount={this.props.updateTokensCount}\n          />\n        )}\n      </tr>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport UserListItem from './components/UserListItem';\nimport { IdentityProvider, User } from '../../app/types';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  currentUser: { isLoggedIn: boolean; login?: string };\n  identityProviders: IdentityProvider[];\n  onUpdateUsers: () => void;\n  organizationsEnabled: boolean;\n  updateTokensCount: (login: string, tokensCount: number) => void;\n  users: User[];\n}\n\nexport default function UsersList({\n  currentUser,\n  identityProviders,\n  onUpdateUsers,\n  organizationsEnabled,\n  updateTokensCount,\n  users\n}: Props) {\n  return (\n    <div className=\"boxed-group boxed-group-inner\">\n      <table id=\"users-list\" className=\"data zebra\">\n        <thead>\n          <tr>\n            <th />\n            <th className=\"nowrap\" />\n            <th className=\"nowrap\">{translate('my_profile.scm_accounts')}</th>\n            {!organizationsEnabled && <th className=\"nowrap\">{translate('my_profile.groups')}</th>}\n            <th className=\"nowrap\">{translate('users.tokens')}</th>\n            <th className=\"nowrap\">&nbsp;</th>\n          </tr>\n        </thead>\n        <tbody>\n          {users.map(user => (\n            <UserListItem\n              identityProvider={identityProviders.find(\n                provider => user.externalProvider === provider.key\n              )}\n              isCurrentUser={currentUser.isLoggedIn && currentUser.login === user.login}\n              key={user.login}\n              onUpdateUsers={onUpdateUsers}\n              organizationsEnabled={organizationsEnabled}\n              updateTokensCount={updateTokensCount}\n              user={user}\n            />\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { memoize } from 'lodash';\nimport { cleanQuery, parseAsString, RawQuery, serializeString } from '../../helpers/query';\n\nexport interface Query {\n  search: string;\n}\n\nexport const parseQuery = memoize((urlQuery: RawQuery): Query => ({\n  search: parseAsString(urlQuery['search'])\n}));\n\nexport const serializeQuery = memoize((query: Query): RawQuery =>\n  cleanQuery({\n    search: query.search ? serializeString(query.search) : undefined\n  })\n);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport Helmet from 'react-helmet';\nimport { Location } from 'history';\nimport Header from './Header';\nimport Search from './Search';\nimport UsersList from './UsersList';\nimport { parseQuery, Query, serializeQuery } from './utils';\nimport ListFooter from '../../components/controls/ListFooter';\nimport { getIdentityProviders, searchUsers } from '../../api/users';\nimport { Paging, IdentityProvider, User } from '../../app/types';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  currentUser: { isLoggedIn: boolean; login?: string };\n  location: Location;\n  organizationsEnabled: boolean;\n}\n\ninterface State {\n  identityProviders: IdentityProvider[];\n  loading: boolean;\n  paging?: Paging;\n  users: User[];\n}\n\nexport default class UsersApp extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  static contextTypes = {\n    router: PropTypes.object.isRequired\n  };\n\n  state: State = { identityProviders: [], loading: true, users: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchIdentityProviders();\n    this.fetchUsers();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.location.query.search !== this.props.location.query.search) {\n      this.fetchUsers(nextProps);\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  finishLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  fetchIdentityProviders = () =>\n    getIdentityProviders().then(\n      ({ identityProviders }) => {\n        if (this.mounted) {\n          this.setState({ identityProviders });\n        }\n      },\n      () => {}\n    );\n\n  fetchUsers = ({ location } = this.props) => {\n    this.setState({ loading: true });\n    searchUsers({ q: parseQuery(location.query).search }).then(({ paging, users }) => {\n      if (this.mounted) {\n        this.setState({ loading: false, paging, users });\n      }\n    }, this.finishLoading);\n  };\n\n  fetchMoreUsers = () => {\n    const { paging } = this.state;\n    if (paging) {\n      this.setState({ loading: true });\n      searchUsers({\n        p: paging.pageIndex + 1,\n        q: parseQuery(this.props.location.query).search\n      }).then(({ paging, users }) => {\n        if (this.mounted) {\n          this.setState(state => ({ loading: false, users: [...state.users, ...users], paging }));\n        }\n      }, this.finishLoading);\n    }\n  };\n\n  updateQuery = (newQuery: Partial<Query>) => {\n    const query = serializeQuery({ ...parseQuery(this.props.location.query), ...newQuery });\n    this.context.router.push({ ...this.props.location, query });\n  };\n\n  updateTokensCount = (login: string, tokensCount: number) => {\n    this.setState(state => ({\n      users: state.users.map(user => (user.login === login ? { ...user, tokensCount } : user))\n    }));\n  };\n\n  render() {\n    const query = parseQuery(this.props.location.query);\n    const { loading, paging, users } = this.state;\n    return (\n      <div id=\"users-page\" className=\"page page-limited\">\n        <Helmet title={translate('users.page')} />\n        <Header loading={loading} onUpdateUsers={this.fetchUsers} />\n        <Search query={query} updateQuery={this.updateQuery} />\n        <UsersList\n          currentUser={this.props.currentUser}\n          identityProviders={this.state.identityProviders}\n          onUpdateUsers={this.fetchUsers}\n          organizationsEnabled={this.props.organizationsEnabled}\n          updateTokensCount={this.updateTokensCount}\n          users={users}\n        />\n        {paging !== undefined && (\n          <ListFooter\n            count={users.length}\n            total={paging.total}\n            ready={!loading}\n            loadMore={this.fetchMoreUsers}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { Location } from 'history';\nimport UsersApp from './UsersApp';\nimport { areThereCustomOrganizations, getCurrentUser } from '../../store/rootReducer';\n\ninterface OwnProps {\n  location: Location;\n}\n\ninterface StateToProps {\n  currentUser: { isLoggedIn: boolean; login?: string };\n  organizationsEnabled: boolean;\n}\n\nconst mapStateToProps = (state: any) => ({\n  currentUser: getCurrentUser(state),\n  organizationsEnabled: areThereCustomOrganizations(state)\n});\n\nexport default connect<StateToProps, {}, OwnProps>(mapStateToProps)(UsersApp);\n"],"sourceRoot":""}