{"version":3,"sources":["webpack:///./src/main/js/apps/sessions/components/EmailAlreadyExists.tsx"],"names":["EmailAlreadyExists","_super","_this","apply","this","arguments","mounted","state","identityProviders","loading","fetchIdentityProviders","setState","Object","_api_users__WEBPACK_IMPORTED_MODULE_2__","then","_a","renderIdentityProvier","provider","login","identityProvider","find","p","key","react__WEBPACK_IMPORTED_MODULE_0__","className","style","backgroundColor","color","_helpers_colors__WEBPACK_IMPORTED_MODULE_4__","_app_theme__WEBPACK_IMPORTED_MODULE_3__","alt","name","src","_helpers_urls__WEBPACK_IMPORTED_MODULE_6__","iconPath","width","height","__extends","prototype","componentDidMount","componentWillUnmount","render","query","props","location","id","react_intl__WEBPACK_IMPORTED_MODULE_1__","defaultMessage","_helpers_l10n__WEBPACK_IMPORTED_MODULE_5__","values","email","existingProvider","existingLogin","href"],"mappings":"ubA6CAA,EAAA,SAAAC,GAAA,SAAAD,IAAA,IAAAE,EAAA,OAAAD,KAAAE,MAAAC,KAAAC,YAoGCD,YAnGCF,EAAOI,SAAS,EAChBJ,EAAKK,OAA6BC,qBAAaC,SAAS,GAWxDP,EAAsBQ,uBAAG,WACnBR,EAASS,UAAUF,SAAU,IACXG,OAAAC,EAAA,EAAAD,GAAKE,KACzB,SAAsBC,OAAnBP,EAAAO,EAAiBP,kBACVN,EAAQI,SACVJ,EAASS,UAAoBH,oBAASC,SAAW,KAGzD,WACUP,EAAQI,SACVJ,EAASS,UAAUF,SAAW,OAM1CP,EAAqBc,sBAAG,SAAiBC,EAAeC,GACtD,IAAsBC,EAAAjB,EAAaK,MAAkBC,kBAAKY,KAAC,SAACC,GAAI,OAACA,EAAIC,MAAaL,IAElF,OAA0BE,EAAAI,EAAA,qBAEbC,UAAoB,oBACxBC,OACYC,gBAAkBP,EAAgBO,gBAC5CC,MAAcf,OAAAgB,EAAA,EAAAhB,CAAiBO,EAAgBO,gBAAOG,EAAA,mBAE7DN,EAAA,qBACKO,IAAkBX,EAAKY,KACjBP,UAAsB,sBAC5BQ,IAAcpB,OAAAqB,EAAA,EAAArB,GAAmBO,EAASe,SACxCC,MAAK,KACJC,OACN,OAGFlB,GACFK,EAAA,yBAC2B,cAAhBN,GAA4BA,EAAA,IAG3CC,IA+CFhB,EAAA,OApGgDmC,EAAArC,EAAiCC,GAI/ED,EAAAsC,UAAiBC,kBAAjB,WACMnC,KAAQE,SAAQ,EAChBF,KACNM,0BAEAV,EAAAsC,UAAoBE,qBAApB,WACMpC,KAAQE,SACd,GA4CAN,EAAAsC,UAAMG,OAAN,WACU,IAAAC,EAAAtC,KAAAuC,MAAAC,SAA8BF,MAE/B,OACLnB,EAAA,qBAAOsB,GAAK,KAAUrB,UAAsB,uBAC1CD,EAAA,qBAAOsB,GAAQ,QAAUrB,UAAc,eACrCD,EAAA,qBAAcC,UAAwC,yCACpDD,EAAA,mBAAYC,UAAuB,wBACjCD,EAAA,cAAiBuB,EAAA,GACDC,eAAWnC,OAAAoC,EAAA,EAAApC,CAAmC,mCAC1DiC,GAAkC,kCAC9BI,QAASC,MAAE3B,EAAA,4BAAcmB,EAE/BQ,WACC9C,KAAsBY,sBAAM0B,EAAiBS,iBAAOT,EACrDU,gBAEN7B,EAAA,qBAAcC,UAAmC,oCAC/CD,EAAA,mBAAYC,UAAuB,wBAAWZ,OAAAoC,EAAA,EAAApC,CAAwC,oCACjFR,KAAsBY,sBAAM0B,EAASzB,SAAOyB,EAC7CxB,QAENK,EAAA,qBAAcC,UAAsB,uBACxBZ,OAAAoC,EAAA,EAAApC,CAAmC,mCAC7CW,EAAA,oBAAaC,UAAc,eACzBD,EAAA,oBAAaC,UAAa,cAAWZ,OAAAoC,EAAA,EAAApC,CAAyC,oCAC9EW,EAAA,oBAAaC,UAAa,cAAWZ,OAAAoC,EAAA,EAAApC,CAAyC,oCAC9EW,EAAA,oBAAaC,UAAa,cAAWZ,OAAAoC,EAAA,EAAApC,CAEnC,sCAENW,EAAA,qBAAcC,UAA4B,6BACxCD,EAAA,mBACWC,UAAqB,qBAC1B6B,KAAiBzC,OAAAqB,EAAA,EAAArB,GAAA,kBAAuB8B,EAASzB,SAAuB,yBAClEL,OAAAoC,EAAA,EAAApC,CACR,aACJW,EAAA,mBAAYC,UAA4B,4BAAK6B,KAAczC,OAAAqB,EAAA,EAAArB,GAAM,KACrDA,OAAAoC,EAAA,EAAApC,CAMtB,eACDZ,EApGD,CAAqDuB,EAAA","file":"js/287.df51a1e1.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { getIdentityProviders } from '../../../api/users';\nimport * as theme from '../../../app/theme';\nimport { IdentityProvider } from '../../../app/types';\nimport { getTextColor } from '../../../helpers/colors';\nimport { translate } from '../../../helpers/l10n';\nimport { getBaseUrl } from '../../../helpers/urls';\n\ninterface Props {\n  location: {\n    query: {\n      email: string;\n      login: string;\n      provider: string;\n      existingLogin: string;\n      existingProvider: string;\n    };\n  };\n}\n\ninterface State {\n  identityProviders: IdentityProvider[];\n  loading: boolean;\n}\n\nexport default class EmailAlreadyExists extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { identityProviders: [], loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchIdentityProviders();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchIdentityProviders = () => {\n    this.setState({ loading: true });\n    getIdentityProviders().then(\n      ({ identityProviders }) => {\n        if (this.mounted) {\n          this.setState({ identityProviders, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  renderIdentityProvier = (provider: string, login: string) => {\n    const identityProvider = this.state.identityProviders.find(p => p.key === provider);\n\n    return identityProvider ? (\n      <div\n        className=\"identity-provider\"\n        style={{\n          backgroundColor: identityProvider.backgroundColor,\n          color: getTextColor(identityProvider.backgroundColor, theme.secondFontColor)\n        }}>\n        <img\n          alt={identityProvider.name}\n          className=\"little-spacer-right\"\n          src={getBaseUrl() + identityProvider.iconPath}\n          width=\"14\"\n          height=\"14\"\n        />\n        {login}\n      </div>\n    ) : (\n      <div>\n        {provider !== 'sonarqube' && provider} {login}\n      </div>\n    );\n  };\n\n  render() {\n    const { query } = this.props.location;\n\n    return (\n      <div id=\"bd\" className=\"page-wrapper-simple\">\n        <div id=\"nonav\" className=\"page-simple\">\n          <div className=\"big-spacer-bottom js-existing-account\">\n            <p className=\"little-spacer-bottom\">\n              <FormattedMessage\n                defaultMessage={translate('sessions.email_already_exists.1')}\n                id=\"sessions.email_already_exists.1\"\n                values={{ email: <strong>{query.email}</strong> }}\n              />\n            </p>\n            {this.renderIdentityProvier(query.existingProvider, query.existingLogin)}\n          </div>\n\n          <div className=\"big-spacer-bottom js-new-account\">\n            <p className=\"little-spacer-bottom\">{translate('sessions.email_already_exists.2')}</p>\n            {this.renderIdentityProvier(query.provider, query.login)}\n          </div>\n\n          <div className=\"alert alert-warning\">\n            {translate('sessions.email_already_exists.3')}\n            <ul className=\"list-styled\">\n              <li className=\"spacer-top\">{translate('sessions.email_already_exists.4')}</li>\n              <li className=\"spacer-top\">{translate('sessions.email_already_exists.5')}</li>\n              <li className=\"spacer-top\">{translate('sessions.email_already_exists.6')}</li>\n            </ul>\n          </div>\n\n          <div className=\"big-spacer-top text-right\">\n            <a\n              className=\"button js-continue\"\n              href={`${getBaseUrl()}/sessions/init/${query.provider}?allowEmailShift=true`}>\n              {translate('continue')}\n            </a>\n            <a className=\"big-spacer-left js-cancel\" href={getBaseUrl() + '/'}>\n              {translate('cancel')}\n            </a>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n"],"sourceRoot":""}