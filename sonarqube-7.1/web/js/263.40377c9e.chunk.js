(window.webpackJsonp=window.webpackJsonp||[]).push([[263],{1130:function(e,t,n){},1171:function(e,t,n){"use strict";n.r(t);var o=n(6),r=n(0),a=n.n(r),c=n(22),i=n.n(c),l=n(2);function s(e){var t=e.children,n=e.title;return r.createElement("span",{className:"code-truncated",title:n},t)}var p=n(15),u=n(53),m=n(59),d=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e};function h(e){var t=e.branchLike,n=e.component,o=e.rootComponent,a=e.previous,c=e.canBrowse,i=void 0!==c&&c,h="DIR"===n.qualifier&&a&&"DIR"===a.qualifier&&void 0!==a?function(e){for(var t=e.slice(0).sort(),n=t[0],o=n.length,r=t[t.length-1],a=0;a<o&&n.charAt(a)===r.charAt(a);)a++;var c=n.substr(0,a),i=c.split(/[\s\\/]/),l=i[i.length-1];return c.substr(0,c.length-l.length)}([n.name+"/",a.name+"/"]):"",f=h?r.createElement("span",null,r.createElement("span",{style:{color:p.secondFontColor}},h),r.createElement("span",null,n.name.substr(h.length))):n.name,b=null;if(n.refKey&&"SVW"!==n.qualifier)b=r.createElement(l.Link,{to:{pathname:"/dashboard",query:{id:n.refKey}},className:"link-with-icon"},r.createElement(u.a,{qualifier:n.qualifier})," ",r.createElement("span",null,f));else if(i){var y=d({id:o.key},Object(m.c)(t));n.key!==o.key&&Object.assign(y,{selected:n.key}),b=r.createElement(l.Link,{to:{pathname:"/code",query:y},className:"link-with-icon"},r.createElement(u.a,{qualifier:n.qualifier})," ",r.createElement("span",null,f))}else b=r.createElement("span",null,r.createElement(u.a,{qualifier:n.qualifier})," ",f);return r.createElement(s,{title:function(e){return"FIL"!==e.qualifier&&"UTS"!==e.qualifier||!e.path?e.name+"\n\n"+e.key:e.path+"\n\n"+e.key}(n)},b)}var f=n(1002);function b(e){var t=e.component,n=e.metricKey,o=e.metricType,a="TRK"===t.qualifier,c="releasability_rating"===n,i=a&&c?"alert_status":n,l=a&&c?"LEVEL":o,s=Array.isArray(t.measures)&&t.measures.find(function(e){return e.metric===i});return s?r.createElement(f.a,{value:s.value,metricKey:i,metricType:l}):r.createElement("span",null)}var y=n(245),v=n(1),g=n(38);function E(e){var t=e.component,n=e.branchLike;return r.createElement(l.Link,{className:"link-no-underline",title:Object(v.l)("code.open_component_page"),to:Object(g.c)(t.refKey||t.key,n)},r.createElement(y.a,null))}var O=n(5);function k(){return a.a.createElement("svg",{width:"9",height:"14",viewBox:"0 0 288 448"},a.a.createElement("path",{fill:p.darkBlue,d:"M120 216v-112q0-3.5-2.25-5.75t-5.75-2.25-5.75 2.25-2.25 5.75v112q0 3.5 2.25 5.75t5.75 2.25 5.75-2.25 2.25-5.75zM288 304q0 6.5-4.75 11.25t-11.25 4.75h-107.25l-12.75 120.75q-0.5 3-2.625 5.125t-5.125 2.125h-0.25q-6.75 0-8-6.75l-19-121.25h-101q-6.5 0-11.25-4.75t-4.75-11.25q0-30.75 19.625-55.375t44.375-24.625v-128q-13 0-22.5-9.5t-9.5-22.5 9.5-22.5 22.5-9.5h160q13 0 22.5 9.5t9.5 22.5-9.5 22.5-22.5 9.5v128q24.75 0 44.375 24.625t19.625 55.375z"}))}var _,j=(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){e.preventDefault(),e.currentTarget.blur(),t.context.workspace.openComponent({branchLike:t.props.branchLike,key:t.props.component.key,name:t.props.component.path,qualifier:t.props.component.qualifier})},t}return j(t,e),t.prototype.render=function(){return r.createElement("a",{className:"link-no-underline",href:"#",onClick:this.handleClick,title:Object(v.l)("component_viewer.open_in_workspace")},r.createElement(k,null))},t.contextTypes={workspace:O.object.isRequired},t}(r.PureComponent),q=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return q(t,e),t.prototype.componentDidMount=function(){this.handleUpdate()},t.prototype.componentDidUpdate=function(){this.handleUpdate()},t.prototype.handleUpdate=function(){var e=this;this.props.selected&&setTimeout(function(){e.handleScroll()},0)},t.prototype.handleScroll=function(){if(this.node){var e=this.node.getBoundingClientRect(),t=e.top,n=e.bottom;n>window.innerHeight-10?window.scrollTo(0,n-window.innerHeight+window.pageYOffset+10):t<200&&window.scrollTo(0,t+window.pageYOffset-200)}},t.prototype.render=function(){var e=this,t=this.props,n=t.branchLike,a=t.component,c=t.rootComponent,i=t.selected,l=void 0!==i&&i,s=t.previous,p=t.canBrowse,u=void 0!==p&&p,m=["VW","SVW"].includes(c.qualifier),d="APP"===c.qualifier,f=null;if(!a.refKey||"SVW"===a.qualifier)switch(a.qualifier){case"FIL":case"UTS":f=r.createElement(w,{branchLike:n,component:a});break;default:f=r.createElement(E,{branchLike:n,component:a})}var y=m?[{metric:"releasability_rating",type:"RATING"},{metric:"reliability_rating",type:"RATING"},{metric:"security_rating",type:"RATING"},{metric:"sqale_rating",type:"RATING"},{metric:"ncloc",type:"SHORT_INT"}]:[d&&{metric:"alert_status",type:"LEVEL"},{metric:"ncloc",type:"SHORT_INT"},{metric:"bugs",type:"SHORT_INT"},{metric:"vulnerabilities",type:"SHORT_INT"},{metric:"code_smells",type:"SHORT_INT"},{metric:"coverage",type:"PERCENT"},{metric:"duplicated_lines_density",type:"PERCENT"}].filter(Boolean);return r.createElement("tr",{className:o({selected:l}),ref:function(t){return e.node=t}},r.createElement("td",{className:"thin nowrap"},r.createElement("span",{className:"spacer-right"},f)),r.createElement("td",{className:"code-name-cell"},r.createElement(h,{branchLike:n,component:a,rootComponent:c,previous:s,canBrowse:u})),y.map(function(e){return r.createElement("td",{key:e.metric,className:"thin nowrap text-right"},r.createElement("div",{className:"code-components-cell"},r.createElement(b,{component:a,metricKey:e.metric,metricType:e.type})))}))},t}(r.PureComponent);function C(){return r.createElement("tr",null,r.createElement("td",{colSpan:2},Object(v.l)("no_results")),r.createElement("td",{colSpan:6}))}function L(e){var t=e.baseComponent,n=e.rootComponent,o="VW"===n.qualifier||"SVW"===n.qualifier,a="APP"===n.qualifier,c=o?[Object(v.l)("metric_domain.Releasability"),Object(v.l)("metric_domain.Reliability"),Object(v.l)("metric_domain.Security"),Object(v.l)("metric_domain.Maintainability"),Object(v.l)("metric","ncloc","name")]:[a&&Object(v.l)("metric.alert_status.name"),Object(v.l)("metric","ncloc","name"),Object(v.l)("metric","bugs","name"),Object(v.l)("metric","vulnerabilities","name"),Object(v.l)("metric","code_smells","name"),Object(v.l)("metric","coverage","name"),Object(v.l)("metric","duplicated_lines_density","short_name")].filter(Boolean);return r.createElement("thead",null,r.createElement("tr",{className:"code-components-header"},r.createElement("th",{className:"thin nowrap"}," "),r.createElement("th",null," "),c.map(function(e){return r.createElement("th",{key:e,className:"thin nowrap text-right code-components-cell"},t&&e)})))}function N(e){var t=e.baseComponent,n=e.branchLike,o=e.components,a=e.rootComponent,c=e.selected;return r.createElement("table",{className:"data zebra"},r.createElement(L,{baseComponent:t,rootComponent:a}),t&&r.createElement("tbody",null,r.createElement(S,{branchLike:n,component:t,key:t.key,rootComponent:a}),r.createElement("tr",{className:"blank"},r.createElement("td",{colSpan:8}," "))),r.createElement("tbody",null,o.length?o.map(function(e,t,o){return r.createElement(S,{branchLike:n,canBrowse:!0,component:e,key:e.key,previous:t>0?o[t-1]:void 0,rootComponent:a,selected:e===c})}):r.createElement(C,null)))}function P(e){var t=e.branchLike,n=e.breadcrumbs,o=e.rootComponent;return r.createElement("ul",{className:"code-breadcrumbs"},n.map(function(e,a){return r.createElement("li",{key:e.key},r.createElement(h,{branchLike:t,canBrowse:a<n.length-1,component:e,rootComponent:o}))}))}var T=n(33),I=n(47),x=n(3),R=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),V=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},W=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={query:"",loading:!1},t.handleKeyDown=function(e){switch(e.keyCode){case 13:e.preventDefault(),t.handleSelectCurrent();break;case 38:e.preventDefault(),t.handleSelectPrevious();break;case 40:e.preventDefault(),t.handleSelectNext()}},t.handleSearch=function(e){if(t.mounted){var n=t.props,o=n.branchLike,r=n.component,a=n.onError;t.setState({loading:!0});var c=["VW","SVW","APP"].includes(r.qualifier)?"SVW,TRK":"BRC,UTS,FIL";Object(T.u)(r.key,V({q:e,s:"qualifier,name",qualifiers:c},Object(m.c)(o))).then(function(e){t.mounted&&t.setState({results:e.components,selectedIndex:e.components.length>0?0:void 0,loading:!1})}).catch(function(e){t.mounted&&(t.setState({loading:!1}),Object(x.parseError)(e).then(a))})}},t.handleQueryChange=function(e){t.setState({query:e}),0===e.length?t.setState({results:void 0}):t.handleSearch(e)},t}return R(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillReceiveProps=function(e){e.location!==this.props.location&&this.setState({query:"",loading:!1,results:void 0,selectedIndex:void 0})},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.handleSelectNext=function(){var e=this.state,t=e.selectedIndex,n=e.results;null!=n&&null!=t&&t<n.length-1&&this.setState({selectedIndex:t+1})},t.prototype.handleSelectPrevious=function(){var e=this.state,t=e.selectedIndex;null!=e.results&&null!=t&&t>0&&this.setState({selectedIndex:t-1})},t.prototype.handleSelectCurrent=function(){var e=this.props,t=e.branchLike,n=e.component,o=this.state,r=o.results,a=o.selectedIndex;if(null!=r&&null!=a){var c=r[a];c.refKey?this.context.router.push(Object(g.r)(c.refKey)):this.context.router.push({pathname:"/code",query:V({id:n.key,selected:c.key},Object(m.c)(t))})}},t.prototype.render=function(){var e=this.props.component,t=this.state,n=t.loading,a=t.selectedIndex,c=t.results,i=null!=a&&null!=c?c[a]:void 0,l=o("code-search",{"code-search-with-results":null!=c}),s=["VW","SVW","APP"].includes(e.qualifier);return r.createElement("div",{id:"code-search",className:l},r.createElement(I.a,{minLength:3,onChange:this.handleQueryChange,onKeyDown:this.handleKeyDown,placeholder:Object(v.l)(s?"code.search_placeholder.portfolio":"code.search_placeholder"),value:this.state.query}),n&&r.createElement("i",{className:"spinner spacer-left"}),null!=c&&r.createElement("div",{className:"boxed-group boxed-group-inner spacer-top"},r.createElement(N,{branchLike:this.props.branchLike,components:c,rootComponent:e,selected:i})))},t.contextTypes={router:O.object.isRequired},t}(r.PureComponent),A={},D={},K={};function U(e){A[e.key]=e}function B(e,t,n,o){var r=M(e);r&&(t=r.children.concat(t)),D[e]={children:t,total:n,page:o}}function M(e){return D[e]}function H(e,t){K[e]=t}function F(e){return K[e]}var z=n(4),G=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},J=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&(n[o[r]]=e[o[r]])}return n},Q=["ncloc","code_smells","bugs","vulnerabilities","coverage","duplicated_lines_density","alert_status"],Y=["releasability_rating","alert_status","reliability_rating","security_rating","sqale_rating","ncloc"],X=100;function Z(e,t,n){return function e(t,n,o,r){return Object(T.h)(t,n,G({p:o,ps:X},Object(m.c)(r))).then(function(a){return a.paging.total>a.paging.pageSize*a.paging.pageIndex?e(t,n,o+1,r).then(function(e){return a.components.concat(e)}):a.components})}(e,t,1,n)}function $(e,t){return function(n){var o=n.components,r=n.total,a=J(n,["components","total"]),c=o.find(function(e){return"DIR"===e.qualifier&&"/"===e.name});return c?Z(c.key,e,t).then(function(e){var t=Object(z.without)(e.concat(o),c),n=r+e.length-1;return G({components:t,total:n},a)}):Promise.resolve(G({components:o,total:r},a))}}function ee(e){return{components:e.components,total:e.paging.total,page:e.paging.pageIndex}}function te(e){return e.filter(function(e){return!("DIR"===e.qualifier&&"/"===e.name)})}function ne(e){e.forEach(U)}function oe(e,t){var n=F(e);n&&t.forEach(function(e){var t=n.concat([e]);H(e.key,t)})}function re(e){return e?Y:Q}function ae(e,t,n){var o=function(e){return A[e]}(e);if(o)return Promise.resolve(o);var r=re(t);return Object(T.i)(G({componentKey:e,metricKeys:r.join()},Object(m.c)(n))).then(function(e){return U(e),e})}function ce(e,t,n){var o=M(e);if(o)return Promise.resolve({components:o.children,total:o.total,page:o.page});var r=re(t);return Object(T.h)(e,r,G({ps:X,s:"qualifier,name"},Object(m.c)(n))).then(ee).then($(r,n)).then(function(t){return B(e,t.components,t.total,t.page),ne(t.components),oe(e,t.components),t})}function ie(e,t,n){return Promise.all([ae(e,t,n),ce(e,t,n),function(e,t){var n=F(e);return n?Promise.resolve(n):Object(T.g)(G({component:e},Object(m.c)(t))).then(te).then(function(t){return H(e,t),t})}(e,n)]).then(function(e){return{component:e[0],components:e[1].components,total:e[1].total,page:e[1].page,breadcrumbs:e[2]}})}var le=n(78),se=n(1038),pe=(n(1130),function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),ue=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={loading:!0,breadcrumbs:[],total:0,page:0},t.handleLoadMore=function(){var e=t.state,n=e.baseComponent,o=e.components,r=e.page;if(n&&o){var a=["VW","SVW"].includes(t.props.component.qualifier);(function(e,t,n,o){var r=re(n);return Object(T.h)(e,r,G({ps:X,p:t},Object(m.c)(o))).then(ee).then($(r,o)).then(function(t){return B(e,t.components,t.total,t.page),ne(t.components),oe(e,t.components),t})})(n.key,r+1,a,t.props.branchLike).then(function(e){t.mounted&&t.setState({components:o.concat(e.components),page:e.page,total:e.total})}).catch(function(e){t.mounted&&(t.setState({loading:!1}),Object(x.parseError)(e).then(t.handleError))})}},t.handleError=function(e){t.mounted&&t.setState({error:e})},t}return pe(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.handleComponentChange()},t.prototype.componentDidUpdate=function(e){e.component===this.props.component&&Object(m.h)(e.branchLike,this.props.branchLike)?e.location!==this.props.location&&this.handleUpdate():this.handleComponentChange()},t.prototype.componentWillUnmount=function(){A={},D={},K={},this.mounted=!1},t.prototype.handleComponentChange=function(){var e=this,t=this.props,n=t.branchLike,o=t.component;H(o.key,o.breadcrumbs),this.setState({loading:!0});var r=["VW","SVW"].includes(o.qualifier);ce(o.key,r,n).then(function(){U(o),e.mounted&&e.handleUpdate()}).catch(function(t){e.mounted&&(e.setState({loading:!1}),Object(x.parseError)(t).then(e.handleError))})},t.prototype.loadComponent=function(e){var t=this;this.setState({loading:!0}),ie(e,["VW","SVW"].includes(this.props.component.qualifier),this.props.branchLike).then(function(e){t.mounted&&(["FIL","UTS"].includes(e.component.qualifier)?t.setState({loading:!1,sourceViewer:e.component,breadcrumbs:e.breadcrumbs,searchResults:void 0}):t.setState({loading:!1,baseComponent:e.component,components:e.components,breadcrumbs:e.breadcrumbs,total:e.total,page:e.page,sourceViewer:void 0,searchResults:void 0}))}).catch(function(e){t.mounted&&(t.setState({loading:!1}),Object(x.parseError)(e).then(t.handleError))})},t.prototype.handleUpdate=function(){var e=this.props,t=e.component,n=e.location.query.selected||t.key;this.loadComponent(n)},t.prototype.render=function(){var e=this.props,t=e.branchLike,n=e.component,a=e.location,c=this.state,l=c.loading,s=c.error,p=c.baseComponent,u=c.components,m=c.breadcrumbs,d=c.total,h=c.sourceViewer,f=m.length>1,b=o("boxed-group","boxed-group-inner","spacer-top",{"new-loading":l});return r.createElement("div",{className:"page page-limited"},r.createElement(i.a,{title:Object(v.l)("code.page")}),s&&r.createElement("div",{className:"alert alert-danger"},s),r.createElement(W,{branchLike:t,component:n,location:a,onError:this.handleError}),r.createElement("div",{className:"code-components"},f&&r.createElement(P,{branchLike:t,breadcrumbs:m,rootComponent:n}),void 0===h&&void 0!==u&&r.createElement("div",{className:b},r.createElement(N,{baseComponent:p,branchLike:t,components:u,rootComponent:n})),void 0===h&&void 0!==u&&r.createElement(le.a,{count:u.length,total:d,loadMore:this.handleLoadMore}),void 0!==h&&r.createElement("div",{className:"spacer-top"},r.createElement(se.a,{branchLike:t,component:h.key}))))},t}(r.PureComponent);t.default=ue}}]);
//# sourceMappingURL=263.40377c9e.chunk.js.map