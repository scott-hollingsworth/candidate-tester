{"version":3,"sources":["webpack:///./src/main/js/api/rules.ts","webpack:///./src/main/js/components/common/ScreenPositionHelper.tsx","webpack:///./src/main/js/components/controls/DateRangeInput.tsx","webpack:///./src/main/js/components/shared/Organization.tsx","webpack:///./src/main/js/components/facet/FacetFooter.tsx","webpack:///./src/main/js/components/controls/SearchSelect.tsx","webpack:///./src/main/js/components/common/EmptySearch.tsx","webpack:///./src/main/js/components/common/FiltersHeader.tsx","webpack:///./src/main/js/components/shared/TypeHelper.tsx","webpack:///./src/main/js/components/common/PageCounter.tsx","webpack:///./src/main/js/apps/issues/components/BulkChangeModal.tsx","webpack:///./src/main/js/apps/issues/components/ComponentBreadcrumbs.tsx","webpack:///./src/main/js/apps/issues/components/ListItem.tsx","webpack:///./src/main/js/apps/issues/components/IssuesList.tsx","webpack:///./src/main/js/apps/issues/components/IssuesSourceViewer.tsx","webpack:///./src/main/js/apps/issues/components/MyIssuesFilter.tsx","webpack:///./src/main/js/apps/issues/components/NoMyIssues.tsx","webpack:///./src/main/js/apps/issues/components/IssuesCounter.tsx","webpack:///./src/main/js/apps/issues/components/ReloadButton.tsx","webpack:///./src/main/js/apps/issues/components/PageActions.tsx","webpack:///./src/main/js/apps/issues/conciseIssuesList/ConciseIssueLocationBadge.tsx","webpack:///./src/main/js/apps/issues/conciseIssuesList/ConciseIssueLocations.tsx","webpack:///./src/main/js/apps/issues/conciseIssuesList/ConciseIssueLocationsNavigatorLocation.tsx","webpack:///./src/main/js/apps/issues/conciseIssuesList/CrossFileLocationsNavigator.tsx","webpack:///./src/main/js/apps/issues/conciseIssuesList/ConciseIssueLocationsNavigator.tsx","webpack:///./src/main/js/apps/issues/conciseIssuesList/ConciseIssueBox.tsx","webpack:///./src/main/js/apps/issues/conciseIssuesList/ConciseIssueComponent.tsx","webpack:///./src/main/js/apps/issues/conciseIssuesList/ConciseIssue.tsx","webpack:///./src/main/js/apps/issues/conciseIssuesList/ConciseIssuesList.tsx","webpack:///./src/main/js/apps/issues/conciseIssuesList/BackButton.tsx","webpack:///./src/main/js/apps/issues/conciseIssuesList/ConciseIssuesListHeader.tsx","webpack:///./src/main/js/apps/issues/sidebar/AssigneeFacet.tsx","webpack:///./src/main/js/apps/issues/sidebar/AuthorFacet.tsx","webpack:///./src/main/js/components/charts/bar-chart.js","webpack:///./src/main/js/apps/issues/sidebar/CreationDateFacet.tsx","webpack:///./src/main/js/apps/issues/sidebar/DirectoryFacet.tsx","webpack:///./src/main/js/apps/issues/sidebar/FacetMode.tsx","webpack:///./src/main/js/apps/issues/sidebar/FileFacet.tsx","webpack:///./src/main/js/apps/issues/sidebar/LanguageFacetFooter.tsx","webpack:///./src/main/js/apps/issues/sidebar/LanguageFacet.tsx","webpack:///./src/main/js/apps/issues/sidebar/ModuleFacet.tsx","webpack:///./src/main/js/apps/issues/sidebar/ProjectFacet.tsx","webpack:///./src/main/js/apps/issues/sidebar/ResolutionFacet.tsx","webpack:///./src/main/js/apps/issues/sidebar/RuleFacet.tsx","webpack:///./src/main/js/apps/issues/sidebar/SeverityFacet.tsx","webpack:///./src/main/js/apps/issues/sidebar/StatusFacet.tsx","webpack:///./src/main/js/apps/issues/sidebar/TagFacet.tsx","webpack:///./src/main/js/apps/issues/sidebar/TypeFacet.tsx","webpack:///./src/main/js/apps/issues/sidebar/Sidebar.tsx","webpack:///./src/main/js/apps/issues/actions.ts","webpack:///./src/main/js/apps/issues/components/App.tsx","webpack:///./src/main/js/components/facet/FacetBox.tsx","webpack:///./src/main/js/components/facet/FacetItem.tsx","webpack:///./src/main/js/components/facet/FacetHeader.tsx","webpack:///./src/main/js/components/facet/FacetItemsList.tsx"],"names":["_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_1__","__webpack_require__","getRulesApp","data","Object","_helpers_request__WEBPACK_IMPORTED_MODULE_0__","catch","searchRules","takeFacet","response","property","facet","facets","find","values","getRuleDetails","parameters","getRuleTags","then","r","tags","createRule","rule","error","status","Promise","reject","deleteRule","updateRule","ScreenPositionHelper","_super","props","_this","call","this","getPosition","containerPos","container","getBoundingClientRect","top","window","pageYOffset","left","pageXOffset","debouncedOnResize","lodash__WEBPACK_IMPORTED_MODULE_1__","forceUpdate","__extends","prototype","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","render","react__WEBPACK_IMPORTED_MODULE_0__","className","ref","children","DateRangeInput","apply","arguments","handleFromChange","from","onChange","to","setTimeout","toDateInput","focus","handleToChange","setState","defineProperty","value","classnames__WEBPACK_IMPORTED_MODULE_1__","_DateInput__WEBPACK_IMPORTED_MODULE_2__","currentMonth","data-test","highlightTo","maxDate","placeholder","_helpers_l10n__WEBPACK_IMPORTED_MODULE_3__","highlightFrom","minDate","element","_ui_OrganizationLink__WEBPACK_IMPORTED_MODULE_3__","Organization","_a","link","organization","shouldBeDisplayed","linkClassName","name","react_redux__WEBPACK_IMPORTED_MODULE_1__","state","ownProps","_store_rootReducer__WEBPACK_IMPORTED_MODULE_2__","organizationKey","FacetFooter","_controls_SearchSelect__WEBPACK_IMPORTED_MODULE_1__","__assign","autofocus","SearchSelect","mounted","handleSearch","query","currentQuery","onSearch","options","loading","handleChange","option","Array","isArray","onMultiSelect","onSelect","handleInputChange","length","minimumQueryLength","defaultOptions","handleFilterOption","undefined","resetOnBlur","Component","canCreate","_components_controls_Select__WEBPACK_IMPORTED_MODULE_2__","clearable","escapeClearsValue","filterOption","isLoading","multi","noResultsText","onBlurResetsInput","onInputChange","optionRenderer","renderOption","promptTextCreator","searchable","valueRenderer","EmptySearch","_helpers_l10n__WEBPACK_IMPORTED_MODULE_1__","_helpers_l10n__WEBPACK_IMPORTED_MODULE_2__","FiltersHeader","displayReset","onReset","_ui_buttons__WEBPACK_IMPORTED_MODULE_1__","id","onClick","TypeHelper","_ui_IssueTypeIcon__WEBPACK_IMPORTED_MODULE_1__","type","_helpers_measures__WEBPACK_IMPORTED_MODULE_2__","PageCounter","current","label","total","BulkChangeModal_AssigneeSelect","BulkChangeModal_TagSelect","BulkChangeModal","loadIssues","fetchIssues","additionalFields","ps","getDefaultAssignee","currentUser","issues","app_types","filter","issue","assignee","login","push","avatar","l10n","handleCloseClick","event","preventDefault","currentTarget","blur","onClose","handleAssigneeSearch","utils","handleAssigneeSelect","handleTagsSearch","api_issues","q","map","tag","handleTagsSelect","field","handleFieldCheck","checked","_b","handleFieldChange","handleSelectFieldChange","handleSubmit","lodash_js_exposed","add_tags","addTags","t","join","assign","comment","do_transition","transition","remove_tags","removeTags","sendNotifications","notifications","set_severity","severity","set_type","x","issueKeys","key","submitting","onDone","throwGlobalError","renderCancelButton","index_js_exposed","href","renderLoading","renderCheckbox","Checkbox","onCheck","renderAffected","affected","renderField","input","htmlFor","renderAssigneeOption","Avatar","hash","size","renderAssigneeField","BulkChangeModal_hasAction","renderTypeField","IssueTypeIcon","Select","renderSeverityField","SeverityHelper","renderTagOption","renderTagsField","allowCreate","initialTags","BulkChangeModal_promptCreateTag","renderTransitionsField","transitions","getAvailableTransitions","style","float","display","cursor","count","renderCommentField","Tooltip","overlay","rows","width","MarkdownTips","renderNotificationsField","renderForm","paging","limitReached","pageIndex","pageSize","onSubmit","buttons","disabled","component","BulkChangeModal_extends","all","forEach","keys","Modal","contentLabel","onRequestClose","action","actions","includes","ComponentBreadcrumbs_ComponentBreadcrumbs","branchLike","selectedFlowIndex","selectedLocationIndex","displayOrganization","qualifier","displayProject","displaySubProject","selectedLocation","componentKey","componentName","componentLongName","title","projectName","es","urls","project","helpers_path","subProject","subProjectName","ListItem","similarIssues","handleFilter","onFilterChange","issuesReset","startsWith","substr","ListItem_assign","types","severities","statuses","resolution","resolved","resolutions","assigned","assignees","rules","projects","projectUuid","subProjectUuid","modules","files","componentUuid","ListItem_extends","previousIssue","displayComponent","Issue","displayLocationsLink","onFilter","onPopupToggle","openPopup","selected","IssuesList","IssuesList_extends","selectedIssue","index","components_ListItem","onIssueChange","onIssueCheck","onIssueClick","IssuesSourceViewer","scrollToIssue","smooth","node","querySelector","openIssue","handleScroll","offset","innerHeight","scrolling","topOffset","bottomOffset","handleLoaded","IssuesSourceViewer_extends","componentDidUpdate","prevProps","shouldScrollBackToIssue","locations","aroundLine","textRange","startLine","endLine","highlightedLocations","location","highlightedLocationMessage","locationsNavigator","text","msg","allMessagesEmpty","every","resolve","SourceViewer","displayAllIssues","displayIssueLocationsCount","displayIssueLocationsLink","displayLocationMarkers","onIssueSelect","onLoaded","onLocationSelect","scroll","MyIssuesFilter","handleClick","myIssues","onMyIssuesChange","MyIssuesFilter_extends","NoMyIssues_NoMyIssues","IssuesCounter_IssuesCounter","ReloadButton_icon","height","viewBox","d","ReloadButton_ReloadButton","classnames","PageActions","PageActions_extends","renderShortcuts","selectedIndex","DeferredSpinner","onReload","canSetHome","HomePageSelect","currentPage","onSonarCloud","MyIssues","Issues","ConciseIssueLocationBadge_ConciseIssueLocationBadge","mouseEnterDelay","measures","LocationIndex","ConciseIssueLocations","collapsed","handleExpandClick","ConciseIssueLocations_extends","renderExpandButton","secondaryLocations","flows","badges","flow","onFlowSelect","slice","ConciseIssueLocationsNavigatorLocation","ConciseIssueLocationsNavigatorLocation_extends","LocationMessage","message","CrossFileLocationsNavigator","handleMoreLocationsClick","groupByFile","currentComponent","currentComponentName","groups","currentLocations","currentFirstLocationIndex","firstLocationIndex","renderLocation","conciseIssuesList_ConciseIssueLocationsNavigatorLocation","renderGroup","group","groupIndex","_c","onlyFirst","_d","onlyLast","lastLocationIndex","CrossFileLocationsNavigator_extends","componentWillReceiveProps","nextProps","nextLocations","firstGroup","lastGroup","ConciseIssueLocationsNavigator","ConciseIssueLocationsNavigator_extends","locationComponents","concat","conciseIssuesList_CrossFileLocationsNavigator","ConciseIssueBox","rootElement","messageElement","ConciseIssueBox_extends","clickAttributesMain","role","tabIndex","clickAttributesTitle","ConciseIssueBox_assign","conciseIssuesList_ConciseIssueLocations","conciseIssuesList_ConciseIssueLocationsNavigator","ConciseIssueComponent_ConciseIssueComponent","path","ConciseIssue","ConciseIssue_extends","conciseIssuesList_ConciseIssueBox","ConciseIssuesList","scrollableElement","document","parent","ConciseIssuesList_extends","conciseIssuesList_ConciseIssue","BackButton_icon","BackButton_BackButton","ConciseIssuesListHeader_ConciseIssuesListHeader","displayBackButton","onBackClick","AssigneeFacet","handleItemClick","itemValue","newValue","handleHeaderClick","onToggle","handleClear","handleSelect","AssigneeFacet_extends","isAssigneeActive","getAssigneeName","referencedUsers","getStat","stats","getValues","user","renderList","FacetItemsList","FacetItem","active","stat","facetMode","renderFooter","FacetBox","FacetHeader","onClear","open","defaultProps","AuthorFacet","authors","AuthorFacet_extends","author","bar_chart_BarChart","create_react_class_default","displayName","propTypes","prop_types_default","a","arrayOf","object","isRequired","xTicks","any","xValues","number","padding","barsWidth","onBarClick","func","mixins","resize_mixin","getDefaultProps","getInitialState","point","renderXTicks","xScale","yScale","ticks","tick","Math","round","bandwidth","y","range","index_js_exposed_default","createElement","dy","bind","tooltip","renderXValues","renderBars","bars","maxY","rect","availableWidth","availableHeight","innerPadding","relativeInnerPadding","d3_array","d3_scale","domain","paddingInner","transform","CreationDateFacet","hasValue","createdAfter","createdAt","createdBefore","createdInLast","sinceLeakPeriod","resetTo","changes","CreationDateFacet_assign","handleBarClick","handlePeriodChange","handlePeriodClick","period","handleLeakPeriodClick","CreationDateFacet_extends","formatDate","context","intl","DateFormatter","renderBarChart","periods","start","endDate","startDate","dates","setDate","getDate","tooltipEndDate","Date","floor","maxValue","format","renderExactDate","DateTimeFormatter","date","DateFromNow","renderPeriodSelectors","renderPredefinedPeriods","renderInner","contextTypes","index_es","DirectoryFacet","directories","DirectoryFacet_extends","directory","renderName","QualifierIcon","dir","FacetMode","FacetMode_extends","mode","halfWidth","FileFacet","FileFacet_extends","file","getFileName","referencedComponents","LanguageFacetFooter_LanguageFacetFooter","LanguageFacetFooter","LanguageFacetFooter_extends","languages","language","sidebar_LanguageFacetFooter","react_redux_es","rootReducer","LanguageFacet","LanguageFacet_extends","getLanguageName","referencedLanguages","ModuleFacet","ModuleFacet_extends","module","getModuleName","ProjectFacet","components","qualifiers","refId","ProjectFacet_extends","getProjectName","ResolutionFacet","renderItem","isFacetItemActive","getFacetItemName","ResolutionFacet_extends","RuleFacet","api_rules","f","langName","RuleFacet_extends","getRuleName","referencedRules","SeverityFacet","SeverityFacet_extends","StatusFacet","renderStatus","StatusFacet_extends","toLowerCase","TagFacet","TagFacet_extends","renderTag","TypeFacet","TypeFacet_extends","Sidebar","Sidebar_extends","openFacets","displayProjectsFacet","displayModulesFacet","displayDirectoriesFacet","displayFilesFacet","displayAuthorFacet","sidebar_FacetMode","sidebar_TypeFacet","onFacetToggle","sidebar_SeverityFacet","sidebar_ResolutionFacet","sidebar_StatusFacet","sidebar_CreationDateFacet","sidebar_RuleFacet","sidebar_TagFacet","sidebar_ProjectFacet","sidebar_ModuleFacet","sidebar_DirectoryFacet","sidebar_FileFacet","sidebar_AssigneeFacet","sidebar_AuthorFacet","sidebar_LanguageFacet","actions_enableLocationsNavigator","actions_disableLocationsNavigator","actions_selectNextLocation","lastLocationIdx","actions_selectPreviousLocation","actions_selectNextFlow","actions_selectPreviousFlow","App_DEFAULT_QUERY","App_App","App","handleKeyDown","keymaster","keyCode","altKey","selectNextLocation","selectPreviousLocation","selectPreviousFlow","selectNextFlow","handleKeyUp","getOpenIssue","selectNextIssue","getSelectedIndex","selectPreviousIssue","issueKey","pathname","App_assign","branches","scrollToSelectedIssue","router","replace","closeIssue","openSelectedIssue","additional","requestFacets","requestOrganizations","componentKeys","s","sort","asc","fetchIssuesPage","p","fetchIssuesUntil","done","nextResponse","fetchMoreIssues","fetchIssuesForComponent","_component","_from","isSameComponent","lastIssue","nextIssues","fetchFacet","other","App_rest","users","isFiltered","serialized","getCheckedIssues","handleFilterChange","handleMyIssuesChange","closeFacet","handleFacetToggle","handleReset","handlePopupToggle","popupName","samePopup","handleIssueCheck","lastChecked","shiftKey","currentIssueIndex","indexOf","lastSelectedIndex","shouldCheck","min","end","max","i","handleIssueChange","candidate","openBulkChange","bulkChange","closeBulkChange","handleBulkChangeClick","handleBulkChangeSelectedClick","handleBulkChangeDone","fetchFirstIssues","handleReload","onBranchesChange","handleReloadAndOpenFirst","selectLocation","nextIndex","onCheckAll","selectFlow","App_extends","isLoggedIn","body","classList","add","documentElement","footer","getElementById","attachShortcuts","handleRequiredAuthentication","prevState","prevQuery","detachShortcuts","remove","findIndex","renderBulkChange","isAllChecked","thirdState","isChecked","Dropdown","onToggleClick","components_BulkChangeModal","renderFacets","components_MyIssuesFilter","sidebar_Sidebar","renderConciseIssuesList","conciseIssuesList_ConciseIssuesList","ListFooter","loadMore","renderSide","components_IssuesList","common_EmptySearch","renderShortcutsForLocations","hasSeveralFlows","Helmet_default","components_PageActions","Boolean","components_IssuesSourceViewer","prop_types","data-property","search-navigator-facet-half","data-facet","renderHelper","helper","_controls_Tooltip__WEBPACK_IMPORTED_MODULE_3__","_icons_components_HelpIcon__WEBPACK_IMPORTED_MODULE_2__","renderValueIndicator","_helpers_l10n__WEBPACK_IMPORTED_MODULE_5__","showClearButton","_icons_components_OpenCloseIcon__WEBPACK_IMPORTED_MODULE_1__","_ui_buttons__WEBPACK_IMPORTED_MODULE_4__"],"mappings":"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","file":"js/268.c0ee6e84.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { post, getJSON, postJSON } from '../helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { Rule, RuleDetails, RuleActivation } from '../app/types';\n\nexport interface GetRulesAppResponse {\n  canWrite?: boolean;\n  repositories: { key: string; language: string; name: string }[];\n}\n\nexport function getRulesApp(data: {\n  organization: string | undefined;\n}): Promise<GetRulesAppResponse> {\n  return getJSON('/api/rules/app', data).catch(throwGlobalError);\n}\n\nexport interface SearchRulesResponse {\n  actives?: { [rule: string]: RuleActivation[] };\n  facets?: { property: string; values: { count: number; val: string }[] }[];\n  p: number;\n  ps: number;\n  rules: Rule[];\n  total: number;\n}\n\nexport function searchRules(data: {\n  organization: string | undefined;\n  [x: string]: any;\n}): Promise<SearchRulesResponse> {\n  return getJSON('/api/rules/search', data).catch(throwGlobalError);\n}\n\nexport function takeFacet(response: any, property: string) {\n  const facet = response.facets.find((facet: any) => facet.property === property);\n  return facet ? facet.values : [];\n}\n\nexport function getRuleDetails(parameters: {\n  actives?: boolean;\n  key: string;\n  organization: string | undefined;\n}): Promise<{ actives?: RuleActivation[]; rule: RuleDetails }> {\n  return getJSON('/api/rules/show', parameters).catch(throwGlobalError);\n}\n\nexport function getRuleTags(parameters: {\n  organization: string | undefined;\n  ps?: number;\n  q: string;\n}): Promise<string[]> {\n  return getJSON('/api/rules/tags', parameters).then(r => r.tags, throwGlobalError);\n}\n\nexport function createRule(data: {\n  custom_key: string;\n  markdown_description: string;\n  name: string;\n  organization: string | undefined;\n  params?: string;\n  prevent_reactivation?: boolean;\n  severity?: string;\n  status?: string;\n  template_key: string;\n  type?: string;\n}): Promise<RuleDetails> {\n  return postJSON('/api/rules/create', data).then(\n    r => r.rule,\n    error => {\n      // do not show global error if the status code is 409\n      // this case should be handled inside a component\n      if (error && error.response && error.response.status === 409) {\n        return Promise.reject(error.response);\n      } else {\n        return throwGlobalError(error);\n      }\n    }\n  );\n}\n\nexport function deleteRule(parameters: { key: string; organization: string | undefined }) {\n  return post('/api/rules/delete', parameters).catch(throwGlobalError);\n}\n\nexport function updateRule(data: {\n  key: string;\n  markdown_description?: string;\n  markdown_note?: string;\n  name?: string;\n  organization: string | undefined;\n  params?: string;\n  remediation_fn_base_effort?: string;\n  remediation_fn_type?: string;\n  remediation_fy_gap_multiplier?: string;\n  severity?: string;\n  status?: string;\n  tags?: string;\n}): Promise<RuleDetails> {\n  return postJSON('/api/rules/update', data).then(r => r.rule, throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { debounce } from 'lodash';\n\ninterface Props {\n  className?: string;\n  children: (position: { top: number; left: number }) => React.ReactElement<any>;\n}\n\nexport default class ScreenPositionHelper extends React.PureComponent<Props> {\n  container?: HTMLDivElement;\n  debouncedOnResize: () => void;\n\n  constructor(props: Props) {\n    super(props);\n    this.debouncedOnResize = debounce(() => this.forceUpdate(), 250);\n  }\n\n  componentDidMount() {\n    this.forceUpdate();\n    window.addEventListener('resize', this.debouncedOnResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.debouncedOnResize);\n  }\n\n  getPosition = () => {\n    const containerPos = this.container && this.container.getBoundingClientRect();\n    if (!containerPos) {\n      return { top: 0, left: 0 };\n    }\n    return {\n      top: window.pageYOffset + containerPos.top,\n      left: window.pageXOffset + containerPos.left\n    };\n  };\n\n  render() {\n    return (\n      <div\n        className={this.props.className}\n        ref={container => (this.container = container as HTMLDivElement)}>\n        {this.props.children(this.getPosition())}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport DateInput from './DateInput';\nimport { translate } from '../../helpers/l10n';\n\ntype DateRange = { from?: Date; to?: Date };\n\ninterface Props {\n  className?: string;\n  maxDate?: Date;\n  minDate?: Date;\n  onChange: (date: DateRange) => void;\n  value?: DateRange;\n}\n\nexport default class DateRangeInput extends React.PureComponent<Props> {\n  toDateInput?: DateInput | null;\n\n  get from() {\n    return this.props.value && this.props.value.from;\n  }\n\n  get to() {\n    return this.props.value && this.props.value.to;\n  }\n\n  handleFromChange = (from: Date | undefined) => {\n    this.props.onChange({ from, to: this.to });\n\n    // use `setTimeout` to work around the immediate closing of the `toDateInput`\n    setTimeout(() => {\n      if (from && !this.to && this.toDateInput) {\n        this.toDateInput.focus();\n      }\n    }, 0);\n  };\n\n  handleToChange = (to: Date | undefined) => {\n    this.setState({ to });\n    this.props.onChange({ from: this.from, to });\n  };\n\n  render() {\n    return (\n      <div className={classNames('display-inline-flex-center', this.props.className)}>\n        <DateInput\n          currentMonth={this.to}\n          data-test=\"from\"\n          highlightTo={this.to}\n          maxDate={this.to}\n          onChange={this.handleFromChange}\n          placeholder={translate('start_date')}\n          value={this.from}\n        />\n        <span className=\"note little-spacer-left little-spacer-right\">{translate('to_')}</span>\n        <DateInput\n          currentMonth={this.from}\n          data-test=\"to\"\n          highlightFrom={this.from}\n          minDate={this.from}\n          onChange={this.handleToChange}\n          placeholder={translate('end_date')}\n          ref={element => (this.toDateInput = element)}\n          value={this.to}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { getOrganizationByKey, areThereCustomOrganizations } from '../../store/rootReducer';\nimport OrganizationLink from '../ui/OrganizationLink';\n\ninterface OwnProps {\n  organizationKey: string;\n}\n\ninterface Props {\n  link?: boolean;\n  linkClassName?: string;\n  organization: { key: string; name: string } | null;\n  shouldBeDisplayed: boolean;\n}\n\nfunction Organization(props: Props) {\n  const { link = true, organization, shouldBeDisplayed } = props;\n\n  if (!shouldBeDisplayed || !organization) {\n    return null;\n  }\n\n  return (\n    <span>\n      {link ? (\n        <OrganizationLink className={props.linkClassName} organization={organization}>\n          {organization.name}\n        </OrganizationLink>\n      ) : (\n        organization.name\n      )}\n      <span className=\"slash-separator\" />\n    </span>\n  );\n}\n\nconst mapStateToProps = (state: any, ownProps: OwnProps) => ({\n  organization: getOrganizationByKey(state, ownProps.organizationKey),\n  shouldBeDisplayed: areThereCustomOrganizations(state)\n});\n\nexport default connect<any, any, any>(mapStateToProps)(Organization);\n\nexport const UnconnectedOrganization = Organization;\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SearchSelect from '../controls/SearchSelect';\n\ntype Option = { label: string; value: string };\n\ninterface Props {\n  minimumQueryLength?: number;\n  onSearch: (query: string) => Promise<Option[]>;\n  onSelect: (option: Option) => void;\n  renderOption?: (option: Object) => JSX.Element;\n}\n\nexport default function FacetFooter(props: Props) {\n  return (\n    <div className=\"search-navigator-facet-footer\">\n      <SearchSelect autofocus={false} {...props} />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { debounce } from 'lodash';\nimport Select, { Creatable } from '../../components/controls/Select';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\n\ninterface Props<T> {\n  autofocus?: boolean;\n  canCreate?: boolean;\n  clearable?: boolean;\n  defaultOptions?: T[];\n  minimumQueryLength?: number;\n  multi?: boolean;\n  onSearch: (query: string) => Promise<T[]>;\n  onSelect?: (option: T) => void;\n  onMultiSelect?: (options: T[]) => void;\n  promptTextCreator?: (label: string) => string;\n  renderOption?: (option: T) => JSX.Element;\n  resetOnBlur?: boolean;\n  value?: T | T[];\n}\n\ninterface State<T> {\n  loading: boolean;\n  options: T[];\n  query: string;\n}\n\nexport default class SearchSelect<T extends { value: string }> extends React.PureComponent<\n  Props<T>,\n  State<T>\n> {\n  mounted = false;\n\n  constructor(props: Props<T>) {\n    super(props);\n    this.state = { loading: false, options: props.defaultOptions || [], query: '' };\n    this.handleSearch = debounce(this.handleSearch, 250);\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  get autofocus() {\n    return this.props.autofocus !== undefined ? this.props.autofocus : true;\n  }\n\n  get minimumQueryLength() {\n    return this.props.minimumQueryLength !== undefined ? this.props.minimumQueryLength : 2;\n  }\n\n  get resetOnBlur() {\n    return this.props.resetOnBlur !== undefined ? this.props.resetOnBlur : true;\n  }\n\n  handleSearch = (query: string) => {\n    // Ignore the result if the query changed\n    const currentQuery = query;\n    this.props.onSearch(currentQuery).then(\n      options => {\n        if (this.mounted) {\n          this.setState(state => ({\n            loading: false,\n            options: state.query === currentQuery ? options : state.options\n          }));\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleChange = (option: T | T[]) => {\n    if (Array.isArray(option)) {\n      if (this.props.onMultiSelect) {\n        this.props.onMultiSelect(option);\n      }\n    } else if (this.props.onSelect) {\n      this.props.onSelect(option);\n    }\n  };\n\n  handleInputChange = (query: string) => {\n    if (query.length >= this.minimumQueryLength) {\n      this.setState({ loading: true, query });\n      this.handleSearch(query);\n    } else {\n      // `onInputChange` is called with an empty string after a user selects a value\n      // in this case we shouldn't reset `options`, because it also resets select value :(\n      const options = (query.length === 0 && this.props.defaultOptions) || [];\n      this.setState({ options, query });\n    }\n  };\n\n  // disable internal filtering\n  handleFilterOption = () => true;\n\n  render() {\n    const Component = this.props.canCreate ? Creatable : Select;\n    return (\n      <Component\n        autofocus={this.autofocus}\n        className=\"input-super-large\"\n        clearable={this.props.clearable}\n        escapeClearsValue={false}\n        filterOption={this.handleFilterOption}\n        isLoading={this.state.loading}\n        multi={this.props.multi}\n        noResultsText={\n          this.state.query.length < this.minimumQueryLength\n            ? translateWithParameters('select2.tooShort', this.minimumQueryLength)\n            : translate('select2.noMatches')\n        }\n        onBlurResetsInput={this.resetOnBlur}\n        onChange={this.handleChange}\n        onInputChange={this.handleInputChange}\n        optionRenderer={this.props.renderOption}\n        options={this.state.options}\n        placeholder={translate('search_verb')}\n        promptTextCreator={this.props.promptTextCreator}\n        searchable={true}\n        value={this.props.value}\n        valueRenderer={this.props.renderOption}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../helpers/l10n';\nimport './EmptySearch.css';\n\nexport default function EmptySearch() {\n  return (\n    <div className=\"empty-search\">\n      <h3>{translate('no_results_search')}</h3>\n      <p className=\"big-spacer-top\">{translate('no_results_search.2')}</p>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from '../ui/buttons';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  displayReset: boolean;\n  onReset: () => void;\n}\n\nexport default function FiltersHeader({ displayReset, onReset }: Props) {\n  return (\n    <div className=\"search-navigator-filters-header\">\n      {displayReset && (\n        <div className=\"pull-right\">\n          <Button className=\"button-red\" id=\"coding-rules-clear-all-filters\" onClick={onReset}>\n            {translate('clear_all_filters')}\n          </Button>\n        </div>\n      )}\n\n      <h3>{translate('filters')}</h3>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport IssueTypeIcon from '../ui/IssueTypeIcon';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  className?: string;\n  type: string;\n}\n\nexport default function TypeHelper(props: Props) {\n  return (\n    <span className={props.className}>\n      <IssueTypeIcon className=\"little-spacer-right\" query={props.type} />\n      {translate('issue.type', props.type)}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { formatMeasure } from '../../helpers/measures';\n\ninterface Props {\n  className?: string;\n  current?: number;\n  label: string;\n  total: number;\n}\n\nexport default function PageCounter({ className, current, label, total }: Props) {\n  return (\n    <div className={classNames('display-inline-block', className)}>\n      <strong className=\"little-spacer-right\">\n        {current !== undefined && formatMeasure(current + 1, 'INT') + ' / '}\n        <span className=\"js-page-counter-total\">{formatMeasure(total, 'INT')}</span>\n      </strong>\n      {label}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { pickBy, sortBy } from 'lodash';\nimport { searchAssignees } from '../utils';\nimport { searchIssueTags, bulkChangeIssues } from '../../../api/issues';\nimport { Component, CurrentUser, Issue, Paging, isLoggedIn } from '../../../app/types';\nimport throwGlobalError from '../../../app/utils/throwGlobalError';\nimport MarkdownTips from '../../../components/common/MarkdownTips';\nimport SearchSelect from '../../../components/controls/SearchSelect';\nimport Checkbox from '../../../components/controls/Checkbox';\nimport Modal from '../../../components/controls/Modal';\nimport Select from '../../../components/controls/Select';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport Avatar from '../../../components/ui/Avatar';\nimport { SubmitButton } from '../../../components/ui/buttons';\nimport IssueTypeIcon from '../../../components/ui/IssueTypeIcon';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n\ninterface AssigneeOption {\n  avatar?: string;\n  email?: string;\n  label: string;\n  value: string;\n}\n\ninterface TagOption {\n  label: string;\n  value: string;\n}\n\ninterface Props {\n  component: Component | undefined;\n  currentUser: CurrentUser;\n  fetchIssues: (x: {}) => Promise<{ issues: Issue[]; paging: Paging }>;\n  onClose: () => void;\n  onDone: () => void;\n  organization: { key: string } | undefined;\n}\n\ninterface FormFields {\n  addTags?: Array<{ label: string; value: string }>;\n  assignee?: AssigneeOption;\n  comment?: string;\n  notifications?: boolean;\n  organization?: string;\n  removeTags?: Array<{ label: string; value: string }>;\n  severity?: string;\n  transition?: string;\n  type?: string;\n}\n\ninterface State extends FormFields {\n  initialTags: Array<{ label: string; value: string }>;\n  issues: Issue[];\n  // used for initial loading of issues\n  loading: boolean;\n  paging?: Paging;\n  // used when submitting a form\n  submitting: boolean;\n}\n\ntype AssigneeSelectType = new () => SearchSelect<AssigneeOption>;\nconst AssigneeSelect = SearchSelect as AssigneeSelectType;\n\ntype TagSelectType = new () => SearchSelect<TagOption>;\nconst TagSelect = SearchSelect as TagSelectType;\n\nexport default class BulkChangeModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    let organization = props.component && props.component.organization;\n    if (props.organization && !organization) {\n      organization = props.organization.key;\n    }\n    this.state = { initialTags: [], issues: [], loading: true, submitting: false, organization };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n\n    Promise.all([\n      this.loadIssues(),\n      searchIssueTags({ organization: this.state.organization })\n    ]).then(\n      ([issues, tags]) => {\n        if (this.mounted) {\n          this.setState({\n            initialTags: tags.map(tag => ({ label: tag, value: tag })),\n            issues: issues.issues,\n            loading: false,\n            paging: issues.paging\n          });\n        }\n      },\n      () => {}\n    );\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadIssues = () => this.props.fetchIssues({ additionalFields: 'actions,transitions', ps: 250 });\n\n  getDefaultAssignee = () => {\n    const { currentUser } = this.props;\n    const { issues } = this.state;\n    const options = [];\n\n    if (isLoggedIn(currentUser)) {\n      const canBeAssignedToMe =\n        issues.filter(issue => issue.assignee !== currentUser.login).length > 0;\n      if (canBeAssignedToMe) {\n        options.push({\n          avatar: currentUser.avatar,\n          label: currentUser.name,\n          value: currentUser.login\n        });\n      }\n    }\n\n    const canBeUnassigned = issues.filter(issue => issue.assignee).length > 0;\n    if (canBeUnassigned) {\n      options.push({ label: translate('unassigned'), value: '' });\n    }\n\n    return options;\n  };\n\n  handleCloseClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.onClose();\n  };\n\n  handleAssigneeSearch = (query: string) => {\n    return searchAssignees(query, this.state.organization);\n  };\n\n  handleAssigneeSelect = (assignee: AssigneeOption) => {\n    this.setState({ assignee });\n  };\n\n  handleTagsSearch = (query: string) => {\n    return searchIssueTags({ organization: this.state.organization, q: query }).then(tags =>\n      tags.map(tag => ({ label: tag, value: tag }))\n    );\n  };\n\n  handleTagsSelect = (field: 'addTags' | 'removeTags') => (\n    options: Array<{ label: string; value: string }>\n  ) => {\n    this.setState<keyof FormFields>({ [field]: options });\n  };\n\n  handleFieldCheck = (field: keyof FormFields) => (checked: boolean) => {\n    if (!checked) {\n      this.setState<keyof FormFields>({ [field]: undefined });\n    } else if (field === 'notifications') {\n      this.setState<keyof FormFields>({ [field]: true });\n    }\n  };\n\n  handleFieldChange = (field: 'comment' | 'transition') => (\n    event: React.SyntheticEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) => {\n    this.setState<keyof FormFields>({ [field]: event.currentTarget.value });\n  };\n\n  handleSelectFieldChange = (field: 'severity' | 'type') => (data: { value: string } | null) => {\n    if (data) {\n      this.setState<keyof FormFields>({ [field]: data.value });\n    } else {\n      this.setState<keyof FormFields>({ [field]: undefined });\n    }\n  };\n\n  handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    /* eslint-disable camelcase */\n    const query = pickBy(\n      {\n        add_tags: this.state.addTags && this.state.addTags.map(t => t.value).join(),\n        assign: this.state.assignee,\n        comment: this.state.comment,\n        do_transition: this.state.transition,\n        remove_tags: this.state.removeTags && this.state.removeTags.map(t => t.value).join(),\n        sendNotifications: this.state.notifications,\n        set_severity: this.state.severity,\n        set_type: this.state.type\n      },\n      x => x !== undefined\n    );\n    /* eslint-enable camelcase */\n    const issueKeys = this.state.issues.map(issue => issue.key);\n\n    this.setState({ submitting: true });\n    bulkChangeIssues(issueKeys, query).then(\n      () => {\n        this.setState({ submitting: false });\n        this.props.onDone();\n      },\n      error => {\n        this.setState({ submitting: false });\n        throwGlobalError(error);\n      }\n    );\n  };\n\n  getAvailableTransitions(issues: Issue[]) {\n    const transitions: { [x: string]: number } = {};\n    issues.forEach(issue => {\n      if (issue.transitions) {\n        issue.transitions.forEach(t => {\n          if (transitions[t] !== undefined) {\n            transitions[t]++;\n          } else {\n            transitions[t] = 1;\n          }\n        });\n      }\n    });\n    return sortBy(Object.keys(transitions)).map(transition => ({\n      transition,\n      count: transitions[transition]\n    }));\n  }\n\n  renderCancelButton = () => (\n    <a href=\"#\" id=\"bulk-change-cancel\" onClick={this.handleCloseClick}>\n      {translate('cancel')}\n    </a>\n  );\n\n  renderLoading = () => (\n    <div>\n      <div className=\"modal-head\">\n        <h2>{translate('bulk_change')}</h2>\n      </div>\n      <div className=\"modal-body\">\n        <div className=\"text-center\">\n          <i className=\"spinner spinner-margin\" />\n        </div>\n      </div>\n      <div className=\"modal-foot\">{this.renderCancelButton()}</div>\n    </div>\n  );\n\n  renderCheckbox = (field: keyof FormFields) => (\n    <Checkbox checked={this.state[field] !== undefined} onCheck={this.handleFieldCheck(field)} />\n  );\n\n  renderAffected = (affected: number) => (\n    <div className=\"pull-right note\">\n      ({translateWithParameters('issue_bulk_change.x_issues', affected)})\n    </div>\n  );\n\n  renderField = (\n    field: 'addTags' | 'assignee' | 'removeTags' | 'severity' | 'type',\n    label: string,\n    affected: number | undefined,\n    input: React.ReactNode\n  ) => (\n    <div className=\"modal-field\" id={`issues-bulk-change-${field}`}>\n      <label htmlFor={field}>{translate(label)}</label>\n      {input}\n      {affected !== undefined && this.renderAffected(affected)}\n    </div>\n  );\n\n  renderAssigneeOption = (option: AssigneeOption) => {\n    return (\n      <span>\n        {option.avatar !== undefined && (\n          <Avatar className=\"spacer-right\" hash={option.avatar} name={option.label} size={16} />\n        )}\n        {option.label}\n      </span>\n    );\n  };\n\n  renderAssigneeField = () => {\n    const affected = this.state.issues.filter(hasAction('assign')).length;\n\n    if (affected === 0) {\n      return null;\n    }\n\n    const input = (\n      <AssigneeSelect\n        clearable={true}\n        defaultOptions={this.getDefaultAssignee()}\n        onSearch={this.handleAssigneeSearch}\n        onSelect={this.handleAssigneeSelect}\n        renderOption={this.renderAssigneeOption}\n        resetOnBlur={false}\n        value={this.state.assignee}\n      />\n    );\n\n    return this.renderField('assignee', 'issue.assign.formlink', affected, input);\n  };\n\n  renderTypeField = () => {\n    const affected = this.state.issues.filter(hasAction('set_type')).length;\n\n    if (affected === 0) {\n      return null;\n    }\n\n    const types = ['BUG', 'VULNERABILITY', 'CODE_SMELL'];\n    const options = types.map(type => ({ label: translate('issue.type', type), value: type }));\n\n    const optionRenderer = (option: { label: string; value: string }) => (\n      <span>\n        <IssueTypeIcon className=\"little-spacer-right\" query={option.value} />\n        {option.label}\n      </span>\n    );\n\n    const input = (\n      <Select\n        clearable={true}\n        onChange={this.handleSelectFieldChange('type')}\n        optionRenderer={optionRenderer}\n        options={options}\n        searchable={false}\n        value={this.state.type}\n        valueRenderer={optionRenderer}\n      />\n    );\n\n    return this.renderField('type', 'issue.set_type', affected, input);\n  };\n\n  renderSeverityField = () => {\n    const affected = this.state.issues.filter(hasAction('set_severity')).length;\n\n    if (affected === 0) {\n      return null;\n    }\n\n    const severities = ['BLOCKER', 'CRITICAL', 'MAJOR', 'MINOR', 'INFO'];\n    const options = severities.map(severity => ({\n      label: translate('severity', severity),\n      value: severity\n    }));\n\n    const input = (\n      <Select\n        clearable={true}\n        onChange={this.handleSelectFieldChange('severity')}\n        optionRenderer={(option: { value: string }) => <SeverityHelper severity={option.value} />}\n        options={options}\n        searchable={false}\n        value={this.state.severity}\n        valueRenderer={(option: { value: string }) => <SeverityHelper severity={option.value} />}\n      />\n    );\n\n    return this.renderField('severity', 'issue.set_severity', affected, input);\n  };\n\n  renderTagOption = (option: TagOption) => {\n    return <span>{option.label}</span>;\n  };\n\n  renderTagsField = (field: 'addTags' | 'removeTags', label: string, allowCreate: boolean) => {\n    const { initialTags } = this.state;\n    const affected = this.state.issues.filter(hasAction('set_tags')).length;\n\n    if (initialTags === undefined || affected === 0) {\n      return null;\n    }\n\n    const input = (\n      <TagSelect\n        canCreate={allowCreate}\n        clearable={true}\n        defaultOptions={this.state.initialTags}\n        minimumQueryLength={0}\n        multi={true}\n        onMultiSelect={this.handleTagsSelect(field)}\n        onSearch={this.handleTagsSearch}\n        promptTextCreator={promptCreateTag}\n        renderOption={this.renderTagOption}\n        resetOnBlur={false}\n        value={this.state[field]}\n      />\n    );\n\n    return this.renderField(field, label, affected, input);\n  };\n\n  renderTransitionsField = () => {\n    const transitions = this.getAvailableTransitions(this.state.issues);\n\n    if (transitions.length === 0) {\n      return null;\n    }\n\n    return (\n      <div className=\"modal-field\">\n        <label>{translate('issue.transition')}</label>\n        {transitions.map(transition => (\n          <span key={transition.transition}>\n            <input\n              checked={this.state.transition === transition.transition}\n              id={`transition-${transition.transition}`}\n              name=\"do_transition.transition\"\n              onChange={this.handleFieldChange('transition')}\n              type=\"radio\"\n              value={transition.transition}\n            />\n            <label\n              htmlFor={`transition-${transition.transition}`}\n              style={{ float: 'none', display: 'inline', left: 0, cursor: 'pointer' }}>\n              {translate('issue.transition', transition.transition)}\n            </label>\n            {this.renderAffected(transition.count)}\n            <br />\n          </span>\n        ))}\n      </div>\n    );\n  };\n\n  renderCommentField = () => {\n    const affected = this.state.issues.filter(hasAction('comment')).length;\n\n    if (affected === 0) {\n      return null;\n    }\n\n    return (\n      <div className=\"modal-field\">\n        <label htmlFor=\"comment\">\n          {translate('issue.comment.formlink')}\n          <Tooltip overlay={translate('issue_bulk_change.comment.help')}>\n            <i className=\"icon-help little-spacer-left\" />\n          </Tooltip>\n        </label>\n        <div>\n          <textarea\n            id=\"comment\"\n            onChange={this.handleFieldChange('comment')}\n            rows={4}\n            style={{ width: '100%' }}\n            value={this.state.comment || ''}\n          />\n        </div>\n        <div className=\"pull-right\">\n          <MarkdownTips />\n        </div>\n      </div>\n    );\n  };\n\n  renderNotificationsField = () => (\n    <div className=\"modal-field\">\n      <label htmlFor=\"send-notifications\">{translate('issue.send_notifications')}</label>\n      {this.renderCheckbox('notifications')}\n    </div>\n  );\n\n  renderForm = () => {\n    const { issues, paging, submitting } = this.state;\n\n    const limitReached = paging !== undefined && paging.total > paging.pageIndex * paging.pageSize;\n\n    return (\n      <form id=\"bulk-change-form\" onSubmit={this.handleSubmit}>\n        <div className=\"modal-head\">\n          <h2>{translateWithParameters('issue_bulk_change.form.title', issues.length)}</h2>\n        </div>\n\n        <div className=\"modal-body\">\n          {limitReached && (\n            <div className=\"alert alert-warning\">\n              {translateWithParameters('issue_bulk_change.max_issues_reached', issues.length)}\n            </div>\n          )}\n\n          {this.renderAssigneeField()}\n          {this.renderTypeField()}\n          {this.renderSeverityField()}\n          {this.renderTagsField('addTags', 'issue.add_tags', true)}\n          {this.renderTagsField('removeTags', 'issue.remove_tags', false)}\n          {this.renderTransitionsField()}\n          {this.renderCommentField()}\n          {this.renderNotificationsField()}\n        </div>\n\n        <div className=\"modal-foot\">\n          {submitting && <i className=\"spinner spacer-right\" />}\n          <SubmitButton disabled={submitting} id=\"bulk-change-submit\">\n            {translate('apply')}\n          </SubmitButton>\n          {this.renderCancelButton()}\n        </div>\n      </form>\n    );\n  };\n\n  render() {\n    return (\n      <Modal contentLabel=\"modal\" onRequestClose={this.props.onClose}>\n        {this.state.loading ? this.renderLoading() : this.renderForm()}\n      </Modal>\n    );\n  }\n}\n\nfunction hasAction(action: string) {\n  return (issue: Issue) => issue.actions && issue.actions.includes(action);\n}\n\nfunction promptCreateTag(label: string) {\n  return `+ ${label}`;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { getSelectedLocation } from '../utils';\nimport { BranchLike, Component, Issue } from '../../../app/types';\nimport Organization from '../../../components/shared/Organization';\nimport { collapsePath, limitComponentName } from '../../../helpers/path';\nimport { getBranchLikeUrl, getCodeUrl } from '../../../helpers/urls';\n\ninterface Props {\n  branchLike?: BranchLike;\n  component?: Component;\n  issue: Pick<\n    Issue,\n    | 'component'\n    | 'componentLongName'\n    | 'flows'\n    | 'organization'\n    | 'project'\n    | 'projectName'\n    | 'secondaryLocations'\n    | 'subProject'\n    | 'subProjectName'\n  >;\n  organization: { key: string } | undefined;\n  selectedFlowIndex?: number;\n  selectedLocationIndex?: number;\n}\n\nexport default function ComponentBreadcrumbs({\n  branchLike,\n  component,\n  issue,\n  organization,\n  selectedFlowIndex,\n  selectedLocationIndex\n}: Props) {\n  const displayOrganization =\n    !organization && (!component || ['VW', 'SVW'].includes(component.qualifier));\n  const displayProject = !component || !['TRK', 'BRC', 'DIR'].includes(component.qualifier);\n  const displaySubProject = !component || !['BRC', 'DIR'].includes(component.qualifier);\n\n  const selectedLocation = getSelectedLocation(issue, selectedFlowIndex, selectedLocationIndex);\n  const componentKey = selectedLocation ? selectedLocation.component : issue.component;\n  const componentName = selectedLocation ? selectedLocation.componentName : issue.componentLongName;\n\n  return (\n    <div className=\"component-name text-ellipsis\">\n      {displayOrganization && (\n        <Organization linkClassName=\"link-no-underline\" organizationKey={issue.organization} />\n      )}\n\n      {displayProject && (\n        <span title={issue.projectName}>\n          <Link className=\"link-no-underline\" to={getBranchLikeUrl(issue.project, branchLike)}>\n            {limitComponentName(issue.projectName)}\n          </Link>\n          <span className=\"slash-separator\" />\n        </span>\n      )}\n\n      {displaySubProject &&\n        issue.subProject !== undefined &&\n        issue.subProjectName !== undefined && (\n          <span title={issue.subProjectName}>\n            <Link className=\"link-no-underline\" to={getBranchLikeUrl(issue.subProject, branchLike)}>\n              {limitComponentName(issue.subProjectName)}\n            </Link>\n            <span className=\"slash-separator\" />\n          </span>\n        )}\n\n      <Link className=\"link-no-underline\" to={getCodeUrl(issue.project, branchLike, componentKey)}>\n        <span title={componentName}>{collapsePath(componentName || '')}</span>\n      </Link>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ComponentBreadcrumbs from './ComponentBreadcrumbs';\nimport { Query } from '../utils';\nimport { BranchLike, Issue as IssueType, Component } from '../../../app/types';\nimport Issue from '../../../components/issue/Issue';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  checked: boolean;\n  component: Component | undefined;\n  issue: IssueType;\n  onChange: (issue: IssueType) => void;\n  onCheck: ((issueKey: string, event: Event) => void) | undefined;\n  onClick: (issueKey: string) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  onPopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  openPopup: string | undefined;\n  organization: { key: string } | undefined;\n  previousIssue: IssueType | undefined;\n  selected: boolean;\n}\n\ninterface State {\n  similarIssues: boolean;\n}\n\nexport default class ListItem extends React.PureComponent<Props, State> {\n  state: State = { similarIssues: false };\n\n  handleFilter = (property: string, issue: IssueType) => {\n    const { onFilterChange } = this.props;\n\n    const issuesReset = { issues: [] };\n\n    if (property.startsWith('tag###')) {\n      const tag = property.substr(6);\n      onFilterChange({ ...issuesReset, tags: [tag] });\n    } else {\n      switch (property) {\n        case 'type':\n          onFilterChange({ ...issuesReset, types: [issue.type] });\n          break;\n        case 'severity':\n          onFilterChange({ ...issuesReset, severities: [issue.severity] });\n          break;\n        case 'status':\n          onFilterChange({ ...issuesReset, statuses: [issue.status] });\n          break;\n        case 'resolution':\n          if (issue.resolution) {\n            onFilterChange({ ...issuesReset, resolved: true, resolutions: [issue.resolution] });\n          } else {\n            onFilterChange({ ...issuesReset, resolved: false, resolutions: [] });\n          }\n          break;\n        case 'assignee':\n          if (issue.assignee) {\n            onFilterChange({ ...issuesReset, assigned: true, assignees: [issue.assignee] });\n          } else {\n            onFilterChange({ ...issuesReset, assigned: false, assignees: [] });\n          }\n          break;\n        case 'rule':\n          onFilterChange({ ...issuesReset, rules: [issue.rule] });\n          break;\n        case 'project':\n          onFilterChange({ ...issuesReset, projects: [issue.projectUuid] });\n          break;\n        case 'module':\n          if (issue.subProjectUuid) {\n            onFilterChange({ ...issuesReset, modules: [issue.subProjectUuid] });\n          }\n          break;\n        case 'file':\n          onFilterChange({ ...issuesReset, files: [issue.componentUuid] });\n      }\n    }\n  };\n\n  render() {\n    const { branchLike, component, issue, previousIssue } = this.props;\n\n    const displayComponent = !previousIssue || previousIssue.component !== issue.component;\n\n    return (\n      <div className=\"issues-workspace-list-item\">\n        {displayComponent && (\n          <div className=\"issues-workspace-list-component\">\n            <ComponentBreadcrumbs\n              branchLike={branchLike}\n              component={component}\n              issue={this.props.issue}\n              organization={this.props.organization}\n            />\n          </div>\n        )}\n        <Issue\n          branchLike={branchLike}\n          checked={this.props.checked}\n          displayLocationsLink={false}\n          issue={issue}\n          onChange={this.props.onChange}\n          onCheck={this.props.onCheck}\n          onClick={this.props.onClick}\n          onFilter={this.handleFilter}\n          onPopupToggle={this.props.onPopupToggle}\n          openPopup={this.props.openPopup}\n          selected={this.props.selected}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ListItem from './ListItem';\nimport { Query } from '../utils';\nimport { BranchLike, Component, Issue } from '../../../app/types';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  checked: string[];\n  component: Component | undefined;\n  issues: Issue[];\n  onFilterChange: (changes: Partial<Query>) => void;\n  onIssueChange: (issue: Issue) => void;\n  onIssueCheck: ((issueKey: string, event: Event) => void) | undefined;\n  onIssueClick: (issueKey: string) => void;\n  onPopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  openPopup: { issue: string; name: string } | undefined;\n  organization: { key: string } | undefined;\n  selectedIssue: Issue | undefined;\n}\n\nexport default class IssuesList extends React.PureComponent<Props> {\n  render() {\n    const { branchLike, checked, component, issues, openPopup, selectedIssue } = this.props;\n\n    return (\n      <div>\n        {issues.map((issue, index) => (\n          <ListItem\n            branchLike={branchLike}\n            checked={checked.includes(issue.key)}\n            component={component}\n            issue={issue}\n            key={issue.key}\n            onChange={this.props.onIssueChange}\n            onCheck={this.props.onIssueCheck}\n            onClick={this.props.onIssueClick}\n            onFilterChange={this.props.onFilterChange}\n            onPopupToggle={this.props.onPopupToggle}\n            openPopup={openPopup && openPopup.issue === issue.key ? openPopup.name : undefined}\n            organization={this.props.organization}\n            previousIssue={index > 0 ? issues[index - 1] : undefined}\n            selected={selectedIssue != null && selectedIssue.key === issue.key}\n          />\n        ))}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getLocations, getSelectedLocation } from '../utils';\nimport { BranchLike, Issue } from '../../../app/types';\nimport SourceViewer from '../../../components/SourceViewer/SourceViewer';\nimport { scrollToElement } from '../../../helpers/scrolling';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  loadIssues: (component: string, from: number, to: number) => Promise<Issue[]>;\n  locationsNavigator: boolean;\n  onIssueChange: (issue: Issue) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onLocationSelect: (index: number) => void;\n  openIssue: Issue;\n  selectedFlowIndex: number | undefined;\n  selectedLocationIndex: number | undefined;\n}\n\nexport default class IssuesSourceViewer extends React.PureComponent<Props> {\n  node?: HTMLElement | null;\n\n  componentDidUpdate(prevProps: Props) {\n    const { openIssue, selectedLocationIndex } = this.props;\n\n    // Scroll back to the issue when the selected location is set to -1\n    const shouldScrollBackToIssue =\n      selectedLocationIndex === -1 && selectedLocationIndex !== prevProps.selectedLocationIndex;\n    if (\n      prevProps.openIssue.component === openIssue.component &&\n      (prevProps.openIssue !== openIssue || shouldScrollBackToIssue)\n    ) {\n      this.scrollToIssue();\n    }\n  }\n\n  scrollToIssue = (smooth = true) => {\n    if (this.node) {\n      const element = this.node.querySelector(`[data-issue=\"${this.props.openIssue.key}\"]`);\n      if (element) {\n        this.handleScroll(element, smooth);\n      }\n    }\n  };\n\n  handleScroll = (element: Element, smooth = true) => {\n    const offset = window.innerHeight / 2;\n    scrollToElement(element, { topOffset: offset - 100, bottomOffset: offset, smooth });\n  };\n\n  handleLoaded = () => {\n    this.scrollToIssue(false);\n  };\n\n  render() {\n    const { openIssue, selectedFlowIndex, selectedLocationIndex } = this.props;\n\n    const locations = getLocations(openIssue, selectedFlowIndex);\n    const selectedLocation = getSelectedLocation(\n      openIssue,\n      selectedFlowIndex,\n      selectedLocationIndex\n    );\n\n    const component = selectedLocation ? selectedLocation.component : openIssue.component;\n\n    // if location is selected, show (and load) code around it\n    // otherwise show code around the open issue\n    const aroundLine = selectedLocation\n      ? selectedLocation.textRange.startLine\n      : openIssue.textRange && openIssue.textRange.endLine;\n\n    // replace locations in another file with `undefined` to keep the same location indexes\n    const highlightedLocations = locations.map(\n      location => (location.component === component ? location : undefined)\n    );\n\n    const highlightedLocationMessage =\n      this.props.locationsNavigator && selectedLocationIndex !== undefined\n        ? selectedLocation && { index: selectedLocationIndex, text: selectedLocation.msg }\n        : undefined;\n\n    const allMessagesEmpty = locations !== undefined && locations.every(location => !location.msg);\n\n    // do not load issues when open another file for a location\n    const loadIssues =\n      component === openIssue.component ? this.props.loadIssues : () => Promise.resolve([]);\n    const selectedIssue = component === openIssue.component ? openIssue.key : undefined;\n\n    return (\n      <div ref={node => (this.node = node)}>\n        <SourceViewer\n          aroundLine={aroundLine}\n          branchLike={this.props.branchLike}\n          component={component}\n          displayAllIssues={true}\n          displayIssueLocationsCount={false}\n          displayIssueLocationsLink={false}\n          displayLocationMarkers={!allMessagesEmpty}\n          highlightedLocationMessage={highlightedLocationMessage}\n          highlightedLocations={highlightedLocations}\n          loadIssues={loadIssues}\n          onIssueChange={this.props.onIssueChange}\n          onIssueSelect={this.props.onIssueSelect}\n          onLoaded={this.handleLoaded}\n          onLocationSelect={this.props.onLocationSelect}\n          scroll={this.handleScroll}\n          selectedIssue={selectedIssue}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  myIssues: boolean;\n  onMyIssuesChange: (myIssues: boolean) => void;\n}\n\nexport default class MyIssuesFilter extends React.PureComponent<Props> {\n  handleClick = (myIssues: boolean) => () => {\n    this.props.onMyIssuesChange(myIssues);\n  };\n\n  render() {\n    const { myIssues } = this.props;\n\n    return (\n      <div className=\"issues-my-issues-filter\">\n        <div className=\"button-group\">\n          <Button\n            className={myIssues ? 'button-active' : undefined}\n            onClick={this.handleClick(true)}>\n            {translate('issues.my_issues')}\n          </Button>\n          <Button\n            className={myIssues ? undefined : 'button-active'}\n            onClick={this.handleClick(false)}>\n            {translate('all')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../../helpers/l10n';\nimport '../../../components/common/EmptySearch.css';\n\nexport default function NoMyIssues() {\n  return (\n    <div className=\"empty-search\">\n      <h3>{translate('issues.no_my_issues')}</h3>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport PageCounter from '../../../components/common/PageCounter';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  className?: string;\n  current: number | undefined;\n  total: number;\n}\n\nexport default function IssuesCounter(props: Props) {\n  return (\n    <PageCounter\n      className=\"spacer-left flash flash-heavy\"\n      current={props.current}\n      label={translate('issues.issues')}\n      total={props.total}\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  className?: string;\n  onClick: () => void;\n}\n\n/* eslint-disable max-len */\nconst icon = (\n  <svg height=\"24\" viewBox=\"0 0 18 24\" width=\"18\">\n    <path d=\"M16.6454 8.1084c-.3-.5-.9-.7-1.4-.4-.5.3-.7.9-.4 1.4.9 1.6 1.1 3.4.6 5.1-.5 1.7-1.7 3.2-3.2 4-3.3 1.8-7.4.6-9.1-2.7-1.8-3.1-.8-6.9 2.1-8.8v3.3h2v-7h-7v2h3.9c-3.7 2.5-5 7.5-2.8 11.4 1.6 3 4.6 4.6 7.7 4.6 1.4 0 2.8-.3 4.2-1.1 2-1.1 3.5-3 4.2-5.2.6-2.2.3-4.6-.8-6.6z\" />\n  </svg>\n);\n/* eslint-enable max-len */\n\nexport default function ReloadButton(props: Props) {\n  const handleClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    props.onClick();\n  };\n\n  return (\n    <Tooltip overlay={translate('reload')}>\n      <a\n        className={classNames('concise-issues-list-header-button', props.className)}\n        href=\"#\"\n        onClick={handleClick}>\n        {icon}\n      </a>\n    </Tooltip>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport IssuesCounter from './IssuesCounter';\nimport ReloadButton from './ReloadButton';\nimport { HomePageType, Paging } from '../../../app/types';\nimport DeferredSpinner from '../../../components/common/DeferredSpinner';\nimport HomePageSelect from '../../../components/controls/HomePageSelect';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  canSetHome: boolean;\n  loading: boolean;\n  onReload: () => void;\n  onSonarCloud: boolean;\n  paging: Paging | undefined;\n  selectedIndex: number | undefined;\n}\n\nexport default class PageActions extends React.PureComponent<Props> {\n  renderShortcuts() {\n    return (\n      <span className=\"note big-spacer-right\">\n        <span className=\"big-spacer-right\">\n          <span className=\"shortcut-button little-spacer-right\">↑</span>\n          <span className=\"shortcut-button little-spacer-right\">↓</span>\n          {translate('issues.to_select_issues')}\n        </span>\n\n        <span>\n          <span className=\"shortcut-button little-spacer-right\">←</span>\n          <span className=\"shortcut-button little-spacer-right\">→</span>\n          {translate('issues.to_navigate')}\n        </span>\n      </span>\n    );\n  }\n\n  render() {\n    const { paging, selectedIndex } = this.props;\n\n    return (\n      <div className=\"pull-right\">\n        {this.renderShortcuts()}\n\n        <div className=\"issues-page-actions\">\n          <DeferredSpinner className=\"issues-main-header-spinner\" loading={this.props.loading}>\n            <ReloadButton onClick={this.props.onReload} />\n          </DeferredSpinner>\n          {paging != null && (\n            <IssuesCounter className=\"spacer-left\" current={selectedIndex} total={paging.total} />\n          )}\n        </div>\n\n        {this.props.canSetHome && (\n          <HomePageSelect\n            className=\"huge-spacer-left\"\n            currentPage={\n              this.props.onSonarCloud\n                ? { type: HomePageType.MyIssues }\n                : { type: HomePageType.Issues }\n            }\n          />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport LocationIndex from '../../../components/common/LocationIndex';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { translateWithParameters } from '../../../helpers/l10n';\nimport { formatMeasure } from '../../../helpers/measures';\n\ninterface Props {\n  count: number;\n  onClick?: () => void;\n  selected: boolean;\n}\n\nexport default function ConciseIssueLocationBadge(props: Props) {\n  return (\n    <Tooltip\n      mouseEnterDelay={0.5}\n      overlay={translateWithParameters(\n        'issue.this_issue_involves_x_code_locations',\n        formatMeasure(props.count, 'INT')\n      )}>\n      <LocationIndex onClick={props.onClick} selected={props.selected}>\n        {'+'}\n        {props.count}\n      </LocationIndex>\n    </Tooltip>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ConciseIssueLocationBadge from './ConciseIssueLocationBadge';\nimport { Issue } from '../../../app/types';\n\ninterface Props {\n  issue: Pick<Issue, 'flows' | 'secondaryLocations'>;\n  onFlowSelect: (index: number) => void;\n  selectedFlowIndex: number | undefined;\n}\n\ninterface State {\n  collapsed: boolean;\n}\n\nconst LIMIT = 3;\n\nexport default class ConciseIssueLocations extends React.PureComponent<Props, State> {\n  state: State = { collapsed: true };\n\n  handleExpandClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    this.setState({ collapsed: false });\n  };\n\n  renderExpandButton() {\n    return (\n      <a className=\"little-spacer-left link-no-underline\" href=\"#\" onClick={this.handleExpandClick}>\n        ...\n      </a>\n    );\n  }\n\n  render() {\n    const { secondaryLocations, flows } = this.props.issue;\n\n    const badges: JSX.Element[] = [];\n\n    if (secondaryLocations.length > 0) {\n      badges.push(\n        <ConciseIssueLocationBadge\n          count={secondaryLocations.length}\n          key=\"-1\"\n          selected={!this.props.selectedFlowIndex}\n        />\n      );\n    }\n\n    flows.forEach((flow, index) => {\n      badges.push(\n        <ConciseIssueLocationBadge\n          count={flow.length}\n          key={index}\n          onClick={() => this.props.onFlowSelect(index)}\n          selected={index === this.props.selectedFlowIndex}\n        />\n      );\n    });\n\n    return this.state.collapsed ? (\n      <div className=\"concise-issue-locations pull-right\">\n        {badges.slice(0, LIMIT)}\n        {badges.length > LIMIT && this.renderExpandButton()}\n      </div>\n    ) : (\n      <div className=\"concise-issue-locations spacer-top\">{badges}</div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport LocationIndex from '../../../components/common/LocationIndex';\nimport LocationMessage from '../../../components/common/LocationMessage';\n\ninterface Props {\n  index: number;\n  message: string | undefined;\n  onClick: (index: number) => void;\n  scroll: (element: Element) => void;\n  selected: boolean;\n}\n\nexport default class ConciseIssueLocationsNavigatorLocation extends React.PureComponent<Props> {\n  node?: HTMLElement | null;\n\n  componentDidMount() {\n    if (this.props.selected && this.node) {\n      this.props.scroll(this.node);\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (this.props.selected && prevProps.selected !== this.props.selected && this.node) {\n      this.props.scroll(this.node);\n    }\n  }\n\n  handleClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    this.props.onClick(this.props.index);\n  };\n\n  render() {\n    return (\n      <div className=\"little-spacer-top\" ref={node => (this.node = node)}>\n        <a\n          className=\"concise-issue-locations-navigator-location\"\n          href=\"#\"\n          onClick={this.handleClick}>\n          <LocationIndex selected={this.props.selected}>{this.props.index + 1}</LocationIndex>\n          <LocationMessage selected={this.props.selected}>{this.props.message}</LocationMessage>\n        </a>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ConciseIssueLocationsNavigatorLocation from './ConciseIssueLocationsNavigatorLocation';\nimport { Issue, FlowLocation } from '../../../app/types';\nimport { translateWithParameters } from '../../../helpers/l10n';\nimport { collapsePath } from '../../../helpers/path';\n\ninterface Props {\n  issue: Pick<Issue, 'key'>;\n  locations: FlowLocation[];\n  onLocationSelect: (index: number) => void;\n  scroll: (element: Element) => void;\n  selectedLocationIndex: number | undefined;\n}\n\ninterface State {\n  collapsed: boolean;\n}\n\ninterface LocationGroup {\n  component: string | undefined;\n  componentName: string | undefined;\n  firstLocationIndex: number;\n  locations: FlowLocation[];\n}\n\nexport default class CrossFileLocationsNavigator extends React.PureComponent<Props, State> {\n  state: State = { collapsed: true };\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.issue.key !== this.props.issue.key) {\n      this.setState({ collapsed: true });\n    }\n\n    // expand locations list as soon as a location in the middle of the list is selected\n    const { locations: nextLocations } = nextProps;\n    if (\n      nextProps.selectedLocationIndex &&\n      nextProps.selectedLocationIndex > 0 &&\n      nextLocations !== undefined &&\n      nextProps.selectedLocationIndex < nextLocations.length - 1\n    ) {\n      this.setState({ collapsed: false });\n    }\n  }\n\n  handleMoreLocationsClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ collapsed: false });\n  };\n\n  groupByFile = (locations: FlowLocation[]) => {\n    const groups: LocationGroup[] = [];\n\n    let currentLocations: FlowLocation[] = [];\n    let currentComponent: string | undefined;\n    let currentComponentName: string | undefined;\n    let currentFirstLocationIndex = 0;\n\n    for (let index = 0; index < locations.length; index++) {\n      const location = locations[index];\n      if (location.component === currentComponent) {\n        currentLocations.push(location);\n      } else {\n        if (currentLocations.length > 0) {\n          groups.push({\n            component: currentComponent,\n            componentName: currentComponentName,\n            firstLocationIndex: currentFirstLocationIndex,\n            locations: currentLocations\n          });\n        }\n        currentLocations = [location];\n        currentComponent = location.component;\n        currentComponentName = location.componentName;\n        currentFirstLocationIndex = index;\n      }\n    }\n\n    if (currentLocations.length > 0) {\n      groups.push({\n        component: currentComponent,\n        componentName: currentComponentName,\n        firstLocationIndex: currentFirstLocationIndex,\n        locations: currentLocations\n      });\n    }\n\n    return groups;\n  };\n\n  renderLocation = (index: number, message: string | undefined) => {\n    return (\n      <ConciseIssueLocationsNavigatorLocation\n        index={index}\n        key={index}\n        message={message}\n        onClick={this.props.onLocationSelect}\n        scroll={this.props.scroll}\n        selected={index === this.props.selectedLocationIndex}\n      />\n    );\n  };\n\n  renderGroup = (\n    group: LocationGroup,\n    groupIndex: number,\n    { onlyFirst = false, onlyLast = false } = {}\n  ) => {\n    const { firstLocationIndex } = group;\n    const lastLocationIndex = group.locations.length - 1;\n    return (\n      <div className=\"concise-issue-locations-navigator-file\" key={groupIndex}>\n        <div className=\"concise-issue-location-file\">\n          <i className=\"concise-issue-location-file-circle little-spacer-right\" />\n          {collapsePath(group.componentName || '', 15)}\n        </div>\n        {group.locations.length > 0 && (\n          <div className=\"concise-issue-location-file-locations\">\n            {onlyFirst && this.renderLocation(firstLocationIndex, group.locations[0].msg)}\n\n            {onlyLast &&\n              this.renderLocation(\n                firstLocationIndex + lastLocationIndex,\n                group.locations[lastLocationIndex].msg\n              )}\n\n            {!onlyFirst &&\n              !onlyLast &&\n              group.locations.map((location, index) =>\n                this.renderLocation(firstLocationIndex + index, location.msg)\n              )}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  render() {\n    const { locations } = this.props;\n    const groups = this.groupByFile(locations);\n\n    if (locations.length > 2 && groups.length > 1 && this.state.collapsed) {\n      const firstGroup = groups[0];\n      const lastGroup = groups[groups.length - 1];\n      return (\n        <div className=\"concise-issue-locations-navigator spacer-top\">\n          {this.renderGroup(firstGroup, 0, { onlyFirst: true })}\n          <div className=\"concise-issue-locations-navigator-file\">\n            <div className=\"concise-issue-location-file\">\n              <i className=\"concise-issue-location-file-circle-multiple little-spacer-right\" />\n              <a\n                className=\"concise-issue-location-file-more\"\n                href=\"#\"\n                onClick={this.handleMoreLocationsClick}>\n                {translateWithParameters('issues.x_more_locations', locations.length - 2)}\n              </a>\n            </div>\n          </div>\n          {this.renderGroup(lastGroup, groups.length - 1, { onlyLast: true })}\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"concise-issue-locations-navigator spacer-top\">\n          {groups.map((group, groupIndex) => this.renderGroup(group, groupIndex))}\n        </div>\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { uniq } from 'lodash';\nimport ConciseIssueLocationsNavigatorLocation from './ConciseIssueLocationsNavigatorLocation';\nimport CrossFileLocationsNavigator from './CrossFileLocationsNavigator';\nimport { getLocations } from '../utils';\nimport { Issue } from '../../../app/types';\n\ninterface Props {\n  issue: Pick<Issue, 'component' | 'key' | 'flows' | 'secondaryLocations'>;\n  onLocationSelect: (index: number) => void;\n  scroll: (element: Element) => void;\n  selectedFlowIndex: number | undefined;\n  selectedLocationIndex: number | undefined;\n}\n\nexport default class ConciseIssueLocationsNavigator extends React.PureComponent<Props> {\n  render() {\n    const locations = getLocations(this.props.issue, this.props.selectedFlowIndex);\n\n    if (!locations || locations.length === 0 || locations.every(location => !location.msg)) {\n      return null;\n    }\n\n    const locationComponents = [\n      this.props.issue.component,\n      ...locations.map(location => location.component)\n    ];\n    const isCrossFile = uniq(locationComponents).length > 1;\n\n    if (isCrossFile) {\n      return (\n        <CrossFileLocationsNavigator\n          issue={this.props.issue}\n          locations={locations}\n          onLocationSelect={this.props.onLocationSelect}\n          scroll={this.props.scroll}\n          selectedLocationIndex={this.props.selectedLocationIndex}\n        />\n      );\n    } else {\n      return (\n        <div className=\"concise-issue-locations-navigator spacer-top\">\n          {locations.map((location, index) => (\n            <ConciseIssueLocationsNavigatorLocation\n              index={index}\n              key={index}\n              message={location.msg}\n              onClick={this.props.onLocationSelect}\n              scroll={this.props.scroll}\n              selected={index === this.props.selectedLocationIndex}\n            />\n          ))}\n        </div>\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport ConciseIssueLocations from './ConciseIssueLocations';\nimport ConciseIssueLocationsNavigator from './ConciseIssueLocationsNavigator';\nimport { Issue } from '../../../app/types';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport TypeHelper from '../../../components/shared/TypeHelper';\n\ninterface Props {\n  issue: Issue;\n  onClick: (issueKey: string) => void;\n  onFlowSelect: (index: number) => void;\n  onLocationSelect: (index: number) => void;\n  scroll: (element: Element, bottomOffset?: number) => void;\n  selected: boolean;\n  selectedFlowIndex: number | undefined;\n  selectedLocationIndex: number | undefined;\n}\n\nexport default class ConciseIssueBox extends React.PureComponent<Props> {\n  messageElement?: HTMLElement | null;\n  rootElement?: HTMLElement | null;\n\n  componentDidMount() {\n    if (this.props.selected) {\n      this.handleScroll();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (this.props.selected && prevProps.selected !== this.props.selected) {\n      this.handleScroll();\n    }\n  }\n\n  handleScroll = () => {\n    const { selectedFlowIndex } = this.props;\n    const { flows, secondaryLocations } = this.props.issue;\n\n    const locations =\n      selectedFlowIndex !== undefined\n        ? flows[selectedFlowIndex]\n        : flows.length > 0 ? flows[0] : secondaryLocations;\n\n    if (!locations || locations.length < 15) {\n      // if there are no locations, or there are just few\n      // then ensuse that the whole box is visible\n      if (this.rootElement) this.props.scroll(this.rootElement);\n    } else if (this.messageElement) {\n      // otherwise scroll until the the message element is located on top\n      this.props.scroll(this.messageElement, window.innerHeight - 250);\n    }\n  };\n\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    this.props.onClick(this.props.issue.key);\n  };\n\n  render() {\n    const { issue, selected } = this.props;\n\n    const clickAttributesMain = selected\n      ? {}\n      : { onClick: this.handleClick, role: 'listitem', tabIndex: 0 };\n\n    const clickAttributesTitle = selected\n      ? { onClick: this.handleClick, role: 'listitem', tabIndex: 0 }\n      : {};\n\n    return (\n      <div\n        className={classNames('concise-issue-box', 'clearfix', { selected })}\n        ref={node => (this.rootElement = node)}\n        {...clickAttributesMain}>\n        <div\n          className=\"concise-issue-box-message\"\n          {...clickAttributesTitle}\n          ref={node => (this.messageElement = node)}>\n          {issue.message}\n        </div>\n        <div className=\"concise-issue-box-attributes\">\n          <TypeHelper type={issue.type} />\n          <SeverityHelper className=\"big-spacer-left\" severity={issue.severity} />\n          <ConciseIssueLocations\n            issue={issue}\n            onFlowSelect={this.props.onFlowSelect}\n            selectedFlowIndex={this.props.selectedFlowIndex}\n          />\n        </div>\n        {selected && (\n          <ConciseIssueLocationsNavigator\n            issue={issue}\n            onLocationSelect={this.props.onLocationSelect}\n            scroll={this.props.scroll}\n            selectedFlowIndex={this.props.selectedFlowIndex}\n            selectedLocationIndex={this.props.selectedLocationIndex}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { collapsePath } from '../../../helpers/path';\n\ninterface Props {\n  path: string;\n}\n\nexport default function ConciseIssueComponent(props: Props) {\n  return (\n    <div className=\"concise-issue-component note text-ellipsis\">{collapsePath(props.path, 20)}</div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ConciseIssueBox from './ConciseIssueBox';\nimport ConciseIssueComponent from './ConciseIssueComponent';\nimport { Issue } from '../../../app/types';\n\ninterface Props {\n  issue: Issue;\n  onFlowSelect: (index: number) => void;\n  onLocationSelect: (index: number) => void;\n  onSelect: (issueKey: string) => void;\n  previousIssue: Issue | undefined;\n  scroll: (element: Element) => void;\n  selected: boolean;\n  selectedFlowIndex: number | undefined;\n  selectedLocationIndex: number | undefined;\n}\n\nexport default class ConciseIssue extends React.PureComponent<Props> {\n  render() {\n    const { issue, previousIssue, selected } = this.props;\n\n    const displayComponent = !previousIssue || previousIssue.component !== issue.component;\n\n    return (\n      <div>\n        {displayComponent && <ConciseIssueComponent path={issue.componentLongName} />}\n        <ConciseIssueBox\n          issue={issue}\n          onClick={this.props.onSelect}\n          onFlowSelect={this.props.onFlowSelect}\n          onLocationSelect={this.props.onLocationSelect}\n          scroll={this.props.scroll}\n          selected={selected}\n          selectedFlowIndex={selected ? this.props.selectedFlowIndex : undefined}\n          selectedLocationIndex={selected ? this.props.selectedLocationIndex : undefined}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ConciseIssue from './ConciseIssue';\nimport { Issue } from '../../../app/types';\nimport { scrollToElement } from '../../../helpers/scrolling';\n\ninterface Props {\n  issues: Issue[];\n  onFlowSelect: (index: number) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onLocationSelect: (index: number) => void;\n  selected: string | undefined;\n  selectedFlowIndex: number | undefined;\n  selectedLocationIndex: number | undefined;\n}\n\nexport default class ConciseIssuesList extends React.PureComponent<Props> {\n  handleScroll = (element: Element, bottomOffset = 100) => {\n    const scrollableElement = document.querySelector('.layout-page-side');\n    if (element && scrollableElement) {\n      scrollToElement(element, { topOffset: 150, bottomOffset, parent: scrollableElement });\n    }\n  };\n\n  render() {\n    return (\n      <div>\n        {this.props.issues.map((issue, index) => (\n          <ConciseIssue\n            issue={issue}\n            key={issue.key}\n            onFlowSelect={this.props.onFlowSelect}\n            onLocationSelect={this.props.onLocationSelect}\n            onSelect={this.props.onIssueSelect}\n            previousIssue={index > 0 ? this.props.issues[index - 1] : undefined}\n            scroll={this.handleScroll}\n            selected={issue.key === this.props.selected}\n            selectedFlowIndex={this.props.selectedFlowIndex}\n            selectedLocationIndex={this.props.selectedLocationIndex}\n          />\n        ))}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  className?: string;\n  onClick: () => void;\n}\n\n/* eslint-disable max-len */\nconst icon = (\n  <svg height=\"24\" viewBox=\"0 0 21 24\" width=\"21\">\n    <path d=\"M3.845 12.9992l5.993 5.993.052.056c.049.061.093.122.129.191.082.159.121.339.111.518-.006.102-.028.203-.064.298-.149.39-.537.652-.954.644-.102-.002-.204-.019-.301-.052-.148-.05-.273-.135-.387-.241l-8.407-8.407 8.407-8.407.056-.052c.061-.048.121-.092.19-.128.116-.06.237-.091.366-.108.076-.004.075-.004.153-.003.155.015.3.052.437.129.088.051.169.115.239.19.246.266.33.656.214.999-.051.149-.135.273-.241.387l-5.983 5.984c5.287-.044 10.577-.206 15.859.013.073.009.091.009.163.027.187.047.359.15.49.292.075.081.136.175.18.276.044.101.072.209.081.319.032.391-.175.775-.521.962-.097.052-.202.089-.311.107-.073.012-.091.01-.165.013H3.845z\" />\n  </svg>\n);\n/* eslint-enable max-len */\n\nexport default function BackButton(props: Props) {\n  const handleClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    props.onClick();\n  };\n\n  return (\n    <Tooltip overlay={translate('issues.return_to_list')}>\n      <a\n        className={classNames('concise-issues-list-header-button', props.className)}\n        href=\"#\"\n        onClick={handleClick}>\n        {icon}\n      </a>\n    </Tooltip>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport BackButton from './BackButton';\nimport ReloadButton from '../components/ReloadButton';\nimport IssuesCounter from '../components/IssuesCounter';\nimport { Paging } from '../../../app/types';\n\ninterface Props {\n  displayBackButton?: boolean;\n  loading: boolean;\n  onBackClick: () => void;\n  onReload: () => void;\n  paging: Paging | undefined;\n  selectedIndex: number | undefined;\n}\n\nexport default function ConciseIssuesListHeader(props: Props) {\n  const { displayBackButton = true, paging, selectedIndex } = props;\n\n  return (\n    <header className=\"layout-page-header-panel concise-issues-list-header\">\n      <div className=\"layout-page-header-panel-inner concise-issues-list-header-inner\">\n        {displayBackButton && <BackButton className=\"pull-left\" onClick={props.onBackClick} />}\n        {props.loading ? (\n          <i className=\"spinner pull-right\" />\n        ) : (\n          <ReloadButton className=\"pull-right\" onClick={props.onReload} />\n        )}\n        {paging && <IssuesCounter current={selectedIndex} total={paging.total} />}\n      </div>\n    </header>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { sortBy, uniq, without } from 'lodash';\nimport { searchAssignees, formatFacetStat, Query, ReferencedUser } from '../utils';\nimport { Component } from '../../../app/types';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetFooter from '../../../components/facet/FacetFooter';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport Avatar from '../../../components/ui/Avatar';\nimport { translate } from '../../../helpers/l10n';\n\nexport interface Props {\n  assigned: boolean;\n  assignees: string[];\n  component: Component | undefined;\n  facetMode: string;\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: string) => void;\n  open: boolean;\n  organization: { key: string } | undefined;\n  stats: { [x: string]: number } | undefined;\n  referencedUsers: { [login: string]: ReferencedUser };\n}\n\nexport default class AssigneeFacet extends React.PureComponent<Props> {\n  property = 'assignees';\n\n  static defaultProps = {\n    open: true\n  };\n\n  handleItemClick = (itemValue: string) => {\n    if (itemValue === '') {\n      // unassigned\n      this.props.onChange({ assigned: !this.props.assigned, assignees: [] });\n    } else {\n      // defined assignee\n      const { assignees } = this.props;\n      const newValue = sortBy(\n        assignees.includes(itemValue) ? without(assignees, itemValue) : [...assignees, itemValue]\n      );\n      this.props.onChange({ assigned: true, assignees: newValue });\n    }\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.property);\n  };\n\n  handleClear = () => {\n    this.props.onChange({ assigned: true, assignees: [] });\n  };\n\n  handleSearch = (query: string) => {\n    let organization = this.props.component && this.props.component.organization;\n    if (this.props.organization && !organization) {\n      organization = this.props.organization.key;\n    }\n    return searchAssignees(query, organization);\n  };\n\n  handleSelect = (option: { value: string }) => {\n    const { assignees } = this.props;\n    this.props.onChange({ assigned: true, [this.property]: uniq([...assignees, option.value]) });\n  };\n\n  isAssigneeActive(assignee: string) {\n    return assignee === '' ? !this.props.assigned : this.props.assignees.includes(assignee);\n  }\n\n  getAssigneeName(assignee: string) {\n    if (assignee === '') {\n      return translate('unassigned');\n    } else {\n      const { referencedUsers } = this.props;\n      if (referencedUsers[assignee]) {\n        return (\n          <span>\n            <Avatar\n              className=\"little-spacer-right\"\n              hash={referencedUsers[assignee].avatar}\n              name={referencedUsers[assignee].name}\n              size={16}\n            />\n            {referencedUsers[assignee].name}\n          </span>\n        );\n      } else {\n        return assignee;\n      }\n    }\n  }\n\n  getStat(assignee: string) {\n    const { stats } = this.props;\n    return stats ? stats[assignee] : undefined;\n  }\n\n  getValues() {\n    const values = this.props.assignees.map(assignee => {\n      const user = this.props.referencedUsers[assignee];\n      return user ? user.name : assignee;\n    });\n    if (!this.props.assigned) {\n      values.push(translate('unassigned'));\n    }\n    return values;\n  }\n\n  renderOption = (option: { avatar: string; label: string }) => {\n    return (\n      <span>\n        {option.avatar !== undefined && (\n          <Avatar\n            className=\"little-spacer-right\"\n            hash={option.avatar}\n            name={option.label}\n            size={16}\n          />\n        )}\n        {option.label}\n      </span>\n    );\n  };\n\n  renderList() {\n    const { stats } = this.props;\n\n    if (!stats) {\n      return null;\n    }\n\n    const assignees = sortBy(\n      Object.keys(stats),\n      // put unassigned first\n      key => (key === '' ? 0 : 1),\n      // the sort by number\n      key => -stats[key]\n    );\n\n    return (\n      <FacetItemsList>\n        {assignees.map(assignee => (\n          <FacetItem\n            active={this.isAssigneeActive(assignee)}\n            key={assignee}\n            name={this.getAssigneeName(assignee)}\n            onClick={this.handleItemClick}\n            stat={formatFacetStat(this.getStat(assignee), this.props.facetMode)}\n            value={assignee}\n          />\n        ))}\n      </FacetItemsList>\n    );\n  }\n\n  renderFooter() {\n    if (!this.props.stats) {\n      return null;\n    }\n\n    return (\n      <FacetFooter\n        onSearch={this.handleSearch}\n        onSelect={this.handleSelect}\n        renderOption={this.renderOption}\n      />\n    );\n  }\n\n  render() {\n    return (\n      <FacetBox property={this.property}>\n        <FacetHeader\n          name={translate('issues.facet', this.property)}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getValues()}\n        />\n\n        {this.props.open && this.renderList()}\n        {this.props.open && this.renderFooter()}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { sortBy, without } from 'lodash';\nimport { formatFacetStat, Query } from '../utils';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  facetMode: string;\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: string) => void;\n  open: boolean;\n  stats: { [x: string]: number } | undefined;\n  authors: string[];\n}\n\nexport default class AuthorFacet extends React.PureComponent<Props> {\n  property = 'authors';\n\n  static defaultProps = {\n    open: true\n  };\n\n  handleItemClick = (itemValue: string) => {\n    const { authors } = this.props;\n    const newValue = sortBy(\n      authors.includes(itemValue) ? without(authors, itemValue) : [...authors, itemValue]\n    );\n    this.props.onChange({ [this.property]: newValue });\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.property);\n  };\n\n  handleClear = () => {\n    this.props.onChange({ [this.property]: [] });\n  };\n\n  getStat(author: string) {\n    const { stats } = this.props;\n    return stats ? stats[author] : undefined;\n  }\n\n  renderList() {\n    const { stats } = this.props;\n\n    if (!stats) {\n      return null;\n    }\n\n    const authors = sortBy(Object.keys(stats), key => -stats[key]);\n\n    return (\n      <FacetItemsList>\n        {authors.map(author => (\n          <FacetItem\n            active={this.props.authors.includes(author)}\n            key={author}\n            name={author}\n            onClick={this.handleItemClick}\n            stat={formatFacetStat(this.getStat(author), this.props.facetMode)}\n            value={author}\n          />\n        ))}\n      </FacetItemsList>\n    );\n  }\n\n  render() {\n    return (\n      <FacetBox property={this.property}>\n        <FacetHeader\n          name={translate('issues.facet', this.property)}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.props.authors}\n        />\n\n        {this.props.open && this.renderList()}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport React from 'react';\nimport createReactClass from 'create-react-class';\nimport PropTypes from 'prop-types';\nimport { max } from 'd3-array';\nimport { scaleLinear, scaleBand } from 'd3-scale';\nimport Tooltip from '../controls/Tooltip';\nimport { ResizeMixin } from '../mixins/resize-mixin';\n\nexport const BarChart = createReactClass({\n  displayName: 'BarChart',\n\n  propTypes: {\n    data: PropTypes.arrayOf(PropTypes.object).isRequired,\n    xTicks: PropTypes.arrayOf(PropTypes.any),\n    xValues: PropTypes.arrayOf(PropTypes.any),\n    height: PropTypes.number,\n    padding: PropTypes.arrayOf(PropTypes.number),\n    barsWidth: PropTypes.number.isRequired,\n    onBarClick: PropTypes.func\n  },\n\n  mixins: [ResizeMixin],\n\n  getDefaultProps() {\n    return {\n      xTicks: [],\n      xValues: [],\n      padding: [10, 10, 10, 10]\n    };\n  },\n\n  getInitialState() {\n    return { width: this.props.width, height: this.props.height };\n  },\n\n  componentDidUpdate(prevProps) {\n    if (this.props.width && prevProps.width !== this.props.width) {\n      this.setState({ width: this.props.width });\n    }\n    if (this.props.height && prevProps.height !== this.props.height) {\n      this.setState({ height: this.props.height });\n    }\n  },\n\n  handleClick(point) {\n    this.props.onBarClick(point);\n  },\n\n  renderXTicks(xScale, yScale) {\n    if (!this.props.xTicks.length) {\n      return null;\n    }\n    const ticks = this.props.xTicks.map((tick, index) => {\n      const point = this.props.data[index];\n      const x = Math.round(xScale(point.x) + xScale.bandwidth() / 2);\n      const y = yScale.range()[0];\n      const d = this.props.data[index];\n      const text = (\n        <text\n          className=\"bar-chart-tick\"\n          dy=\"1.5em\"\n          key={index}\n          onClick={this.props.onBarClick && this.handleClick.bind(this, point)}\n          style={{ cursor: this.props.onBarClick ? 'pointer' : 'default' }}\n          x={x}\n          y={y}>\n          {tick}\n        </text>\n      );\n      return (\n        <Tooltip key={index} overlay={d.tooltip || undefined}>\n          {text}\n        </Tooltip>\n      );\n    });\n    return <g>{ticks}</g>;\n  },\n\n  renderXValues(xScale, yScale) {\n    if (!this.props.xValues.length) {\n      return null;\n    }\n    const ticks = this.props.xValues.map((value, index) => {\n      const point = this.props.data[index];\n      const x = Math.round(xScale(point.x) + xScale.bandwidth() / 2);\n      const y = yScale(point.y);\n      const d = this.props.data[index];\n      const text = (\n        <text\n          className=\"bar-chart-tick\"\n          dy=\"-1em\"\n          key={index}\n          onClick={this.props.onBarClick && this.handleClick.bind(this, point)}\n          style={{ cursor: this.props.onBarClick ? 'pointer' : 'default' }}\n          x={x}\n          y={y}>\n          {value}\n        </text>\n      );\n      return (\n        <Tooltip key={index} overlay={d.tooltip || undefined}>\n          {text}\n        </Tooltip>\n      );\n    });\n    return <g>{ticks}</g>;\n  },\n\n  renderBars(xScale, yScale) {\n    const bars = this.props.data.map((d, index) => {\n      const x = Math.round(xScale(d.x));\n      const maxY = yScale.range()[0];\n      const y = Math.round(yScale(d.y)) - /* minimum bar height */ 1;\n      const height = maxY - y;\n      const rect = (\n        <rect\n          className=\"bar-chart-bar\"\n          height={height}\n          key={index}\n          onClick={this.props.onBarClick && this.handleClick.bind(this, d)}\n          style={{ cursor: this.props.onBarClick ? 'pointer' : 'default' }}\n          width={this.props.barsWidth}\n          x={x}\n          y={y}\n        />\n      );\n      return (\n        <Tooltip key={index} overlay={d.tooltip || undefined}>\n          {rect}\n        </Tooltip>\n      );\n    });\n    return <g>{bars}</g>;\n  },\n\n  render() {\n    if (!this.state.width || !this.state.height) {\n      return <div />;\n    }\n\n    const availableWidth = this.state.width - this.props.padding[1] - this.props.padding[3];\n    const availableHeight = this.state.height - this.props.padding[0] - this.props.padding[2];\n\n    const innerPadding =\n      (availableWidth - this.props.barsWidth * this.props.data.length) /\n      (this.props.data.length - 1);\n    const relativeInnerPadding = innerPadding / (innerPadding + this.props.barsWidth);\n\n    const maxY = max(this.props.data, d => d.y);\n    const xScale = scaleBand()\n      .domain(this.props.data.map(d => d.x))\n      .range([0, availableWidth])\n      .paddingInner(relativeInnerPadding);\n    const yScale = scaleLinear()\n      .domain([0, maxY])\n      .range([availableHeight, 0]);\n\n    return (\n      <svg className=\"bar-chart\" height={this.state.height} width={this.state.width}>\n        <g transform={`translate(${this.props.padding[3]}, ${this.props.padding[0]})`}>\n          {this.renderXTicks(xScale, yScale)}\n          {this.renderXValues(xScale, yScale)}\n          {this.renderBars(xScale, yScale)}\n        </g>\n      </svg>\n    );\n  }\n});\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { max } from 'lodash';\nimport { intlShape } from 'react-intl';\nimport { Query } from '../utils';\nimport { Component } from '../../../app/types';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport { longFormatterOption } from '../../../components/intl/DateFormatter';\nimport DateFromNow from '../../../components/intl/DateFromNow';\nimport DateTimeFormatter from '../../../components/intl/DateTimeFormatter';\nimport { BarChart } from '../../../components/charts/bar-chart';\nimport DateRangeInput from '../../../components/controls/DateRangeInput';\nimport { isSameDay, parseDate } from '../../../helpers/dates';\nimport { translate } from '../../../helpers/l10n';\nimport { formatMeasure } from '../../../helpers/measures';\n\ninterface Props {\n  component: Component | undefined;\n  createdAfter: Date | undefined;\n  createdAt: string;\n  createdBefore: Date | undefined;\n  createdInLast: string;\n  facetMode: string;\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: string) => void;\n  open: boolean;\n  sinceLeakPeriod: boolean;\n  stats: { [x: string]: number } | undefined;\n}\n\nexport default class CreationDateFacet extends React.PureComponent<Props> {\n  property = 'createdAt';\n\n  static defaultProps = {\n    open: true\n  };\n\n  static contextTypes = {\n    intl: intlShape\n  };\n\n  hasValue = () =>\n    this.props.createdAfter !== undefined ||\n    this.props.createdAt.length > 0 ||\n    this.props.createdBefore !== undefined ||\n    this.props.createdInLast.length > 0 ||\n    this.props.sinceLeakPeriod;\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.property);\n  };\n\n  handleClear = () => {\n    this.resetTo({});\n  };\n\n  resetTo = (changes: Partial<Query>) => {\n    this.props.onChange({\n      createdAfter: undefined,\n      createdAt: undefined,\n      createdBefore: undefined,\n      createdInLast: undefined,\n      sinceLeakPeriod: undefined,\n      ...changes\n    });\n  };\n\n  handleBarClick = ({\n    createdAfter,\n    createdBefore\n  }: {\n    createdAfter: Date;\n    createdBefore?: Date;\n  }) => {\n    this.resetTo({ createdAfter, createdBefore });\n  };\n\n  handlePeriodChange = ({ from, to }: { from?: Date; to?: Date }) => {\n    this.resetTo({ createdAfter: from, createdBefore: to });\n  };\n\n  handlePeriodClick = (period: string) => this.resetTo({ createdInLast: period });\n\n  handleLeakPeriodClick = () => this.resetTo({ sinceLeakPeriod: true });\n\n  getValues() {\n    const { createdAfter, createdAt, createdBefore, createdInLast, sinceLeakPeriod } = this.props;\n    const { formatDate } = this.context.intl;\n    const values = [];\n    if (createdAfter) {\n      values.push(formatDate(createdAfter, longFormatterOption));\n    }\n    if (createdAt) {\n      values.push(formatDate(createdAt, longFormatterOption));\n    }\n    if (createdBefore) {\n      values.push(formatDate(createdBefore, longFormatterOption));\n    }\n    if (createdInLast === '1w') {\n      values.push(translate('issues.facet.createdAt.last_week'));\n    }\n    if (createdInLast === '1m') {\n      values.push(translate('issues.facet.createdAt.last_month'));\n    }\n    if (createdInLast === '1y') {\n      values.push(translate('issues.facet.createdAt.last_year'));\n    }\n    if (sinceLeakPeriod) {\n      values.push(translate('issues.leak_period'));\n    }\n    return values;\n  }\n\n  renderBarChart() {\n    const { createdBefore, stats } = this.props;\n\n    if (!stats) {\n      return null;\n    }\n\n    const periods = Object.keys(stats);\n\n    if (periods.length < 2 || periods.every(period => !stats[period])) {\n      return null;\n    }\n\n    const { formatDate } = this.context.intl;\n    const data = periods.map((start, index) => {\n      const startDate = parseDate(start);\n      let endDate;\n      if (index < periods.length - 1) {\n        endDate = parseDate(periods[index + 1]);\n        endDate.setDate(endDate.getDate() - 1);\n      } else {\n        endDate = createdBefore ? parseDate(createdBefore) : undefined;\n      }\n\n      const tooltipEndDate = endDate || new Date();\n      const tooltip = (\n        <React.Fragment>\n          {formatMeasure(stats[start], 'SHORT_INT')}\n          <br />\n          {formatDate(startDate, longFormatterOption)}\n          {!isSameDay(tooltipEndDate, startDate) &&\n            ` - ${formatDate(tooltipEndDate, longFormatterOption)}`}\n        </React.Fragment>\n      );\n\n      return {\n        createdAfter: startDate,\n        createdBefore: endDate,\n        tooltip,\n        x: index,\n        y: stats[start]\n      };\n    });\n\n    const barsWidth = Math.floor(250 / data.length);\n    const width = barsWidth * data.length - 1 + 10;\n\n    const maxValue = max(data.map(d => d.y));\n    const format = this.props.facetMode === 'count' ? 'SHORT_INT' : 'SHORT_WORK_DUR';\n    const xValues = data.map(d => (d.y === maxValue ? formatMeasure(maxValue, format) : ''));\n\n    return (\n      <BarChart\n        barsWidth={barsWidth - 1}\n        data={data}\n        height={75}\n        onBarClick={this.handleBarClick}\n        padding={[25, 0, 5, 10]}\n        width={width}\n        xValues={xValues}\n      />\n    );\n  }\n\n  renderExactDate() {\n    return (\n      <div className=\"search-navigator-facet-container\">\n        <DateTimeFormatter date={this.props.createdAt} />\n        <br />\n        <span className=\"note\">\n          <DateFromNow date={this.props.createdAt} />\n        </span>\n      </div>\n    );\n  }\n\n  renderPeriodSelectors() {\n    const { createdAfter, createdBefore } = this.props;\n    return (\n      <div className=\"search-navigator-date-facet-selection\">\n        <DateRangeInput\n          onChange={this.handlePeriodChange}\n          value={{ from: createdAfter, to: createdBefore }}\n        />\n      </div>\n    );\n  }\n\n  renderPredefinedPeriods() {\n    const { component, createdInLast, sinceLeakPeriod } = this.props;\n    return (\n      <div className=\"spacer-top issues-predefined-periods\">\n        <FacetItem\n          active={!this.hasValue()}\n          name={translate('issues.facet.createdAt.all')}\n          onClick={this.handlePeriodClick}\n          value=\"\"\n        />\n        {component ? (\n          <FacetItem\n            active={sinceLeakPeriod}\n            name={translate('issues.leak_period')}\n            onClick={this.handleLeakPeriodClick}\n            value=\"\"\n          />\n        ) : (\n          <>\n            <FacetItem\n              active={createdInLast === '1w'}\n              name={translate('issues.facet.createdAt.last_week')}\n              onClick={this.handlePeriodClick}\n              value=\"1w\"\n            />\n            <FacetItem\n              active={createdInLast === '1m'}\n              name={translate('issues.facet.createdAt.last_month')}\n              onClick={this.handlePeriodClick}\n              value=\"1m\"\n            />\n            <FacetItem\n              active={createdInLast === '1y'}\n              name={translate('issues.facet.createdAt.last_year')}\n              onClick={this.handlePeriodClick}\n              value=\"1y\"\n            />\n          </>\n        )}\n      </div>\n    );\n  }\n\n  renderInner() {\n    const { createdAt } = this.props;\n    return createdAt ? (\n      this.renderExactDate()\n    ) : (\n      <div>\n        {this.renderBarChart()}\n        {this.renderPeriodSelectors()}\n        {this.renderPredefinedPeriods()}\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <FacetBox property={this.property}>\n        <FacetHeader\n          name={translate('issues.facet', this.property)}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getValues()}\n        />\n\n        {this.props.open && this.renderInner()}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { sortBy, without } from 'lodash';\nimport { formatFacetStat, Query, ReferencedComponent } from '../utils';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport QualifierIcon from '../../../components/shared/QualifierIcon';\nimport { translate } from '../../../helpers/l10n';\nimport { collapsePath } from '../../../helpers/path';\n\ninterface Props {\n  directories: string[];\n  facetMode: string;\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: string) => void;\n  open: boolean;\n  referencedComponents: { [componentKey: string]: ReferencedComponent };\n  stats: { [x: string]: number } | undefined;\n}\n\nexport default class DirectoryFacet extends React.PureComponent<Props> {\n  property = 'directories';\n\n  static defaultProps = {\n    open: true\n  };\n\n  handleItemClick = (itemValue: string) => {\n    const { directories } = this.props;\n    const newValue = sortBy(\n      directories.includes(itemValue)\n        ? without(directories, itemValue)\n        : [...directories, itemValue]\n    );\n    this.props.onChange({ [this.property]: newValue });\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.property);\n  };\n\n  handleClear = () => {\n    this.props.onChange({ [this.property]: [] });\n  };\n\n  getStat(directory: string) {\n    const { stats } = this.props;\n    return stats ? stats[directory] : undefined;\n  }\n\n  renderName(directory: string) {\n    return (\n      <span>\n        <QualifierIcon className=\"little-spacer-right\" qualifier=\"DIR\" />\n        {directory}\n      </span>\n    );\n  }\n\n  renderList() {\n    const { stats } = this.props;\n\n    if (!stats) {\n      return null;\n    }\n\n    const directories = sortBy(Object.keys(stats), key => -stats[key]);\n\n    return (\n      <FacetItemsList>\n        {directories.map(directory => (\n          <FacetItem\n            active={this.props.directories.includes(directory)}\n            key={directory}\n            name={this.renderName(directory)}\n            onClick={this.handleItemClick}\n            stat={formatFacetStat(this.getStat(directory), this.props.facetMode)}\n            value={directory}\n          />\n        ))}\n      </FacetItemsList>\n    );\n  }\n\n  render() {\n    const values = this.props.directories.map(dir => collapsePath(dir));\n    return (\n      <FacetBox property={this.property}>\n        <FacetHeader\n          name={translate('issues.facet', this.property)}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={values}\n        />\n\n        {this.props.open && this.renderList()}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Query } from '../utils';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  facetMode: string;\n  onChange: (changes: Partial<Query>) => void;\n}\n\nexport default class FacetMode extends React.PureComponent<Props> {\n  property = 'facetMode';\n\n  handleItemClick = (itemValue: string) => {\n    this.props.onChange({ [this.property]: itemValue });\n  };\n\n  render() {\n    const { facetMode } = this.props;\n    const modes = ['count', 'effort'];\n\n    return (\n      <FacetBox property={this.property}>\n        <FacetHeader name={translate('issues.facet.mode')} open={false} />\n\n        <FacetItemsList>\n          {modes.map(mode => (\n            <FacetItem\n              active={facetMode === mode}\n              halfWidth={true}\n              key={mode}\n              name={translate('issues.facet.mode', mode)}\n              onClick={this.handleItemClick}\n              value={mode}\n            />\n          ))}\n        </FacetItemsList>\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { sortBy, without } from 'lodash';\nimport { formatFacetStat, Query, ReferencedComponent } from '../utils';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport QualifierIcon from '../../../components/shared/QualifierIcon';\nimport { translate } from '../../../helpers/l10n';\nimport { collapsePath } from '../../../helpers/path';\n\ninterface Props {\n  facetMode: string;\n  files: string[];\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: string) => void;\n  open: boolean;\n  referencedComponents: { [componentKey: string]: ReferencedComponent };\n  stats: { [x: string]: number } | undefined;\n}\n\nexport default class FileFacet extends React.PureComponent<Props> {\n  property = 'files';\n\n  static defaultProps = {\n    open: true\n  };\n\n  handleItemClick = (itemValue: string) => {\n    const { files } = this.props;\n    const newValue = sortBy(\n      files.includes(itemValue) ? without(files, itemValue) : [...files, itemValue]\n    );\n    this.props.onChange({ [this.property]: newValue });\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.property);\n  };\n\n  handleClear = () => {\n    this.props.onChange({ [this.property]: [] });\n  };\n\n  getStat(file: string) {\n    const { stats } = this.props;\n    return stats ? stats[file] : undefined;\n  }\n\n  getFileName(file: string) {\n    const { referencedComponents } = this.props;\n    return referencedComponents[file] ? collapsePath(referencedComponents[file].path, 15) : file;\n  }\n\n  renderName(file: string) {\n    const name = this.getFileName(file);\n    return (\n      <span>\n        <QualifierIcon className=\"little-spacer-right\" qualifier=\"FIL\" />\n        {name}\n      </span>\n    );\n  }\n\n  renderList() {\n    const { stats } = this.props;\n\n    if (!stats) {\n      return null;\n    }\n\n    const files = sortBy(Object.keys(stats), key => -stats[key]);\n\n    return (\n      <FacetItemsList>\n        {files.map(file => (\n          <FacetItem\n            active={this.props.files.includes(file)}\n            key={file}\n            name={this.renderName(file)}\n            onClick={this.handleItemClick}\n            stat={formatFacetStat(this.getStat(file), this.props.facetMode)}\n            value={file}\n          />\n        ))}\n      </FacetItemsList>\n    );\n  }\n\n  render() {\n    const values = this.props.files.map(file => this.getFileName(file));\n    return (\n      <FacetBox property={this.property}>\n        <FacetHeader\n          name={translate('issues.facet', this.property)}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={values}\n        />\n\n        {this.props.open && this.renderList()}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport Select from '../../../components/controls/Select';\nimport { translate } from '../../../helpers/l10n';\nimport { getLanguages } from '../../../store/rootReducer';\n\ninterface Props {\n  languages: Array<{ key: string; name: string }>;\n  onSelect: (value: string) => void;\n}\n\nclass LanguageFacetFooter extends React.PureComponent<Props> {\n  handleChange = (option: { value: string }) => {\n    this.props.onSelect(option.value);\n  };\n\n  render() {\n    const options = this.props.languages.map(language => ({\n      label: language.name,\n      value: language.key\n    }));\n\n    return (\n      <div className=\"search-navigator-facet-footer\">\n        <Select\n          className=\"input-super-large\"\n          clearable={false}\n          noResultsText={translate('select2.noMatches')}\n          onChange={this.handleChange}\n          options={options}\n          placeholder={translate('search.search_for_languages')}\n          searchable={true}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: any) => ({\n  languages: Object.values(getLanguages(state))\n});\n\nexport default connect(mapStateToProps)(LanguageFacetFooter);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { sortBy, uniq, without } from 'lodash';\nimport LanguageFacetFooter from './LanguageFacetFooter';\nimport { formatFacetStat, Query, ReferencedLanguage } from '../utils';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  facetMode: string;\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: string) => void;\n  open: boolean;\n  stats: { [x: string]: number } | undefined;\n  referencedLanguages: { [languageKey: string]: ReferencedLanguage };\n  languages: string[];\n}\n\nexport default class LanguageFacet extends React.PureComponent<Props> {\n  property = 'languages';\n\n  static defaultProps = {\n    open: true\n  };\n\n  handleItemClick = (itemValue: string) => {\n    const { languages } = this.props;\n    const newValue = sortBy(\n      languages.includes(itemValue) ? without(languages, itemValue) : [...languages, itemValue]\n    );\n    this.props.onChange({ [this.property]: newValue });\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.property);\n  };\n\n  handleClear = () => {\n    this.props.onChange({ [this.property]: [] });\n  };\n\n  getLanguageName(language: string) {\n    const { referencedLanguages } = this.props;\n    return referencedLanguages[language] ? referencedLanguages[language].name : language;\n  }\n\n  getStat(language: string) {\n    const { stats } = this.props;\n    return stats ? stats[language] : undefined;\n  }\n\n  handleSelect = (language: string) => {\n    const { languages } = this.props;\n    this.props.onChange({ [this.property]: uniq([...languages, language]) });\n  };\n\n  renderList() {\n    const { stats } = this.props;\n\n    if (!stats) {\n      return null;\n    }\n\n    const languages = sortBy(Object.keys(stats), key => -stats[key]);\n\n    return (\n      <FacetItemsList>\n        {languages.map(language => (\n          <FacetItem\n            active={this.props.languages.includes(language)}\n            key={language}\n            name={this.getLanguageName(language)}\n            onClick={this.handleItemClick}\n            stat={formatFacetStat(this.getStat(language), this.props.facetMode)}\n            value={language}\n          />\n        ))}\n      </FacetItemsList>\n    );\n  }\n\n  renderFooter() {\n    if (!this.props.stats) {\n      return null;\n    }\n\n    return <LanguageFacetFooter onSelect={this.handleSelect} />;\n  }\n\n  render() {\n    const values = this.props.languages.map(language => this.getLanguageName(language));\n    return (\n      <FacetBox property={this.property}>\n        <FacetHeader\n          name={translate('issues.facet', this.property)}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={values}\n        />\n\n        {this.props.open && this.renderList()}\n        {this.props.open && this.renderFooter()}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { sortBy, without } from 'lodash';\nimport { formatFacetStat, Query, ReferencedComponent } from '../utils';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport QualifierIcon from '../../../components/shared/QualifierIcon';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  facetMode: string;\n  modules: string[];\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: string) => void;\n  open: boolean;\n  referencedComponents: { [componentKey: string]: ReferencedComponent };\n  stats: { [x: string]: number } | undefined;\n}\n\nexport default class ModuleFacet extends React.PureComponent<Props> {\n  property = 'modules';\n\n  static defaultProps = {\n    open: true\n  };\n\n  handleItemClick = (itemValue: string) => {\n    const { modules } = this.props;\n    const newValue = sortBy(\n      modules.includes(itemValue) ? without(modules, itemValue) : [...modules, itemValue]\n    );\n    this.props.onChange({ [this.property]: newValue });\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.property);\n  };\n\n  handleClear = () => {\n    this.props.onChange({ [this.property]: [] });\n  };\n\n  getStat(module: string) {\n    const { stats } = this.props;\n    return stats ? stats[module] : undefined;\n  }\n\n  getModuleName(module: string) {\n    const { referencedComponents } = this.props;\n    return referencedComponents[module] ? referencedComponents[module].name : module;\n  }\n\n  renderName(module: string) {\n    return (\n      <span>\n        <QualifierIcon className=\"little-spacer-right\" qualifier=\"BRC\" />\n        {this.getModuleName(module)}\n      </span>\n    );\n  }\n\n  renderList() {\n    const { stats } = this.props;\n\n    if (!stats) {\n      return null;\n    }\n\n    const modules = sortBy(Object.keys(stats), key => -stats[key]);\n\n    return (\n      <FacetItemsList>\n        {modules.map(module => (\n          <FacetItem\n            active={this.props.modules.includes(module)}\n            key={module}\n            name={this.renderName(module)}\n            onClick={this.handleItemClick}\n            stat={formatFacetStat(this.getStat(module), this.props.facetMode)}\n            value={module}\n          />\n        ))}\n      </FacetItemsList>\n    );\n  }\n\n  render() {\n    const values = this.props.modules.map(module => this.getModuleName(module));\n    return (\n      <FacetBox property={this.property}>\n        <FacetHeader\n          name={translate('issues.facet', this.property)}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={values}\n        />\n\n        {this.props.open && this.renderList()}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { sortBy, uniq, without } from 'lodash';\nimport { formatFacetStat, Query, ReferencedComponent } from '../utils';\nimport { searchProjects, getTree } from '../../../api/components';\nimport { Component } from '../../../app/types';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport FacetFooter from '../../../components/facet/FacetFooter';\nimport Organization from '../../../components/shared/Organization';\nimport QualifierIcon from '../../../components/shared/QualifierIcon';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  component: Component | undefined;\n  facetMode: string;\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: string) => void;\n  open: boolean;\n  organization: { key: string } | undefined;\n  projects: string[];\n  referencedComponents: { [componentKey: string]: ReferencedComponent };\n  stats: { [x: string]: number } | undefined;\n}\n\nexport default class ProjectFacet extends React.PureComponent<Props> {\n  property = 'projects';\n\n  static defaultProps = {\n    open: true\n  };\n\n  handleItemClick = (itemValue: string) => {\n    const { projects } = this.props;\n    const newValue = sortBy(\n      projects.includes(itemValue) ? without(projects, itemValue) : [...projects, itemValue]\n    );\n    this.props.onChange({ [this.property]: newValue });\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.property);\n  };\n\n  handleClear = () => {\n    this.props.onChange({ [this.property]: [] });\n  };\n\n  handleSearch = (query: string) => {\n    const { component, organization } = this.props;\n    if (component && ['VW', 'SVW', 'APP'].includes(component.qualifier)) {\n      return getTree(component.key, { ps: 50, q: query, qualifiers: 'TRK' }).then(response =>\n        response.components.map((component: any) => ({\n          label: component.name,\n          organization: component.organization,\n          value: component.refId\n        }))\n      );\n    }\n\n    return searchProjects({\n      ps: 50,\n      filter: query ? `query = \"${query}\"` : '',\n      organization: organization && organization.key\n    }).then(response =>\n      response.components.map(component => ({\n        label: component.name,\n        organization: component.organization,\n        value: component.id\n      }))\n    );\n  };\n\n  handleSelect = (option: { value: string }) => {\n    const { projects } = this.props;\n    this.props.onChange({ [this.property]: uniq([...projects, option.value]) });\n  };\n\n  getStat(project: string) {\n    const { stats } = this.props;\n    return stats ? stats[project] : undefined;\n  }\n\n  getProjectName(project: string) {\n    const { referencedComponents } = this.props;\n    return referencedComponents[project] ? referencedComponents[project].name : project;\n  }\n\n  renderName(project: string) {\n    const { organization, referencedComponents } = this.props;\n    return referencedComponents[project] ? (\n      <span>\n        <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n        {!organization && (\n          <Organization link={false} organizationKey={referencedComponents[project].organization} />\n        )}\n        {referencedComponents[project].name}\n      </span>\n    ) : (\n      <span>\n        <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n        {project}\n      </span>\n    );\n  }\n\n  renderOption = (option: { label: string; organization: string }) => {\n    return (\n      <span>\n        <Organization link={false} organizationKey={option.organization} />\n        {option.label}\n      </span>\n    );\n  };\n\n  renderList() {\n    const { stats } = this.props;\n\n    if (!stats) {\n      return null;\n    }\n\n    const projects = sortBy(Object.keys(stats), key => -stats[key]);\n\n    return (\n      <FacetItemsList>\n        {projects.map(project => (\n          <FacetItem\n            active={this.props.projects.includes(project)}\n            key={project}\n            name={this.renderName(project)}\n            onClick={this.handleItemClick}\n            stat={formatFacetStat(this.getStat(project), this.props.facetMode)}\n            value={project}\n          />\n        ))}\n      </FacetItemsList>\n    );\n  }\n\n  renderFooter() {\n    if (!this.props.stats) {\n      return null;\n    }\n\n    return (\n      <FacetFooter\n        minimumQueryLength={3}\n        onSearch={this.handleSearch}\n        onSelect={this.handleSelect}\n        renderOption={this.renderOption}\n      />\n    );\n  }\n\n  render() {\n    const values = this.props.projects.map(project => this.getProjectName(project));\n    return (\n      <FacetBox property={this.property}>\n        <FacetHeader\n          name={translate('issues.facet', this.property)}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={values}\n        />\n\n        {this.props.open && this.renderList()}\n        {this.props.open && this.renderFooter()}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { orderBy, without } from 'lodash';\nimport { formatFacetStat, Query } from '../utils';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  facetMode: string;\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: string) => void;\n  open: boolean;\n  resolved: boolean;\n  resolutions: string[];\n  stats: { [x: string]: number } | undefined;\n}\n\nexport default class ResolutionFacet extends React.PureComponent<Props> {\n  property = 'resolutions';\n\n  static defaultProps = {\n    open: true\n  };\n\n  handleItemClick = (itemValue: string) => {\n    if (itemValue === '') {\n      // unresolved\n      this.props.onChange({ resolved: !this.props.resolved, resolutions: [] });\n    } else {\n      // defined resolution\n      const { resolutions } = this.props;\n      const newValue = orderBy(\n        resolutions.includes(itemValue)\n          ? without(resolutions, itemValue)\n          : [...resolutions, itemValue]\n      );\n      this.props.onChange({ resolved: true, resolutions: newValue });\n    }\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.property);\n  };\n\n  handleClear = () => {\n    this.props.onChange({ resolved: false, resolutions: [] });\n  };\n\n  isFacetItemActive(resolution: string) {\n    return resolution === '' ? !this.props.resolved : this.props.resolutions.includes(resolution);\n  }\n\n  getFacetItemName(resolution: string) {\n    return resolution === '' ? translate('unresolved') : translate('issue.resolution', resolution);\n  }\n\n  getStat(resolution: string) {\n    const { stats } = this.props;\n    return stats ? stats[resolution] : undefined;\n  }\n\n  renderItem = (resolution: string) => {\n    const active = this.isFacetItemActive(resolution);\n    const stat = this.getStat(resolution);\n\n    return (\n      <FacetItem\n        active={active}\n        disabled={stat === 0 && !active}\n        halfWidth={true}\n        key={resolution}\n        name={this.getFacetItemName(resolution)}\n        onClick={this.handleItemClick}\n        stat={formatFacetStat(stat, this.props.facetMode)}\n        value={resolution}\n      />\n    );\n  };\n\n  render() {\n    const resolutions = ['', 'FIXED', 'FALSE-POSITIVE', 'WONTFIX', 'REMOVED'];\n    const values = this.props.resolutions.map(resolution => this.getFacetItemName(resolution));\n\n    return (\n      <FacetBox property={this.property}>\n        <FacetHeader\n          name={translate('issues.facet', this.property)}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={values}\n        />\n\n        {this.props.open && <FacetItemsList>{resolutions.map(this.renderItem)}</FacetItemsList>}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { sortBy, uniq, without } from 'lodash';\nimport { formatFacetStat, Query } from '../utils';\nimport { searchRules } from '../../../api/rules';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport FacetFooter from '../../../components/facet/FacetFooter';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  facetMode: string;\n  languages: string[];\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: string) => void;\n  open: boolean;\n  organization: string | undefined;\n  referencedRules: { [ruleKey: string]: { name: string } };\n  rules: string[];\n  stats: { [x: string]: number } | undefined;\n}\n\nexport default class RuleFacet extends React.PureComponent<Props> {\n  property = 'rules';\n\n  static defaultProps = {\n    open: true\n  };\n\n  handleItemClick = (itemValue: string) => {\n    const { rules } = this.props;\n    const newValue = sortBy(\n      rules.includes(itemValue) ? without(rules, itemValue) : [...rules, itemValue]\n    );\n    this.props.onChange({ [this.property]: newValue });\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.property);\n  };\n\n  handleClear = () => {\n    this.props.onChange({ [this.property]: [] });\n  };\n\n  handleSearch = (query: string) => {\n    const { languages, organization } = this.props;\n    return searchRules({\n      f: 'name,langName',\n      languages: languages.length ? languages.join() : undefined,\n      organization,\n      q: query\n    }).then(response =>\n      response.rules.map(rule => ({ label: `(${rule.langName}) ${rule.name}`, value: rule.key }))\n    );\n  };\n\n  handleSelect = (option: { value: string }) => {\n    const { rules } = this.props;\n    this.props.onChange({ [this.property]: uniq([...rules, option.value]) });\n  };\n\n  getRuleName(rule: string): string {\n    const { referencedRules } = this.props;\n    return referencedRules[rule] ? referencedRules[rule].name : rule;\n  }\n\n  getStat(rule: string) {\n    const { stats } = this.props;\n    return stats ? stats[rule] : undefined;\n  }\n\n  renderList() {\n    const { stats } = this.props;\n\n    if (!stats) {\n      return null;\n    }\n\n    const rules = sortBy(Object.keys(stats), key => -stats[key], key => this.getRuleName(key));\n\n    return (\n      <FacetItemsList>\n        {rules.map(rule => (\n          <FacetItem\n            active={this.props.rules.includes(rule)}\n            key={rule}\n            name={this.getRuleName(rule)}\n            onClick={this.handleItemClick}\n            stat={formatFacetStat(this.getStat(rule), this.props.facetMode)}\n            value={rule}\n          />\n        ))}\n      </FacetItemsList>\n    );\n  }\n\n  renderFooter() {\n    if (!this.props.stats) {\n      return null;\n    }\n\n    return <FacetFooter onSearch={this.handleSearch} onSelect={this.handleSelect} />;\n  }\n\n  render() {\n    const values = this.props.rules.map(rule => this.getRuleName(rule));\n    return (\n      <FacetBox property={this.property}>\n        <FacetHeader\n          name={translate('issues.facet', this.property)}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={values}\n        />\n\n        {this.props.open && this.renderList()}\n        {this.props.open && this.renderFooter()}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { orderBy, without } from 'lodash';\nimport { formatFacetStat, Query } from '../utils';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  facetMode: string;\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: string) => void;\n  open: boolean;\n  severities: string[];\n  stats: { [x: string]: number } | undefined;\n}\n\nexport default class SeverityFacet extends React.PureComponent<Props> {\n  property = 'severities';\n\n  static defaultProps = {\n    open: true\n  };\n\n  handleItemClick = (itemValue: string) => {\n    const { severities } = this.props;\n    const newValue = orderBy(\n      severities.includes(itemValue) ? without(severities, itemValue) : [...severities, itemValue]\n    );\n    this.props.onChange({ [this.property]: newValue });\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.property);\n  };\n\n  handleClear = () => {\n    this.props.onChange({ [this.property]: [] });\n  };\n\n  getStat(severity: string) {\n    const { stats } = this.props;\n    return stats ? stats[severity] : undefined;\n  }\n\n  renderItem = (severity: string) => {\n    const active = this.props.severities.includes(severity);\n    const stat = this.getStat(severity);\n\n    return (\n      <FacetItem\n        active={active}\n        disabled={stat === 0 && !active}\n        halfWidth={true}\n        key={severity}\n        name={<SeverityHelper severity={severity} />}\n        onClick={this.handleItemClick}\n        stat={formatFacetStat(stat, this.props.facetMode)}\n        value={severity}\n      />\n    );\n  };\n\n  render() {\n    const severities = ['BLOCKER', 'MINOR', 'CRITICAL', 'INFO', 'MAJOR'];\n    const values = this.props.severities.map(severity => translate('severity', severity));\n\n    return (\n      <FacetBox property={this.property}>\n        <FacetHeader\n          name={translate('issues.facet', this.property)}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={values}\n        />\n\n        {this.props.open && <FacetItemsList>{severities.map(this.renderItem)}</FacetItemsList>}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { orderBy, without } from 'lodash';\nimport { formatFacetStat, Query } from '../utils';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  facetMode: string;\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: string) => void;\n  open: boolean;\n  stats: { [x: string]: number } | undefined;\n  statuses: string[];\n}\n\nexport default class StatusFacet extends React.PureComponent<Props> {\n  property = 'statuses';\n\n  static defaultProps = {\n    open: true\n  };\n\n  handleItemClick = (itemValue: string) => {\n    const { statuses } = this.props;\n    const newValue = orderBy(\n      statuses.includes(itemValue) ? without(statuses, itemValue) : [...statuses, itemValue]\n    );\n    this.props.onChange({ [this.property]: newValue });\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.property);\n  };\n\n  handleClear = () => {\n    this.props.onChange({ [this.property]: [] });\n  };\n\n  getStat(status: string) {\n    const { stats } = this.props;\n    return stats ? stats[status] : undefined;\n  }\n\n  renderStatus(status: string) {\n    return (\n      <span>\n        <i className={`icon-status-${status.toLowerCase()}`} /> {translate('issue.status', status)}\n      </span>\n    );\n  }\n\n  renderItem = (status: string) => {\n    const active = this.props.statuses.includes(status);\n    const stat = this.getStat(status);\n\n    return (\n      <FacetItem\n        active={active}\n        disabled={stat === 0 && !active}\n        halfWidth={true}\n        key={status}\n        name={this.renderStatus(status)}\n        onClick={this.handleItemClick}\n        stat={formatFacetStat(stat, this.props.facetMode)}\n        value={status}\n      />\n    );\n  };\n\n  render() {\n    const statuses = ['OPEN', 'RESOLVED', 'REOPENED', 'CLOSED', 'CONFIRMED'];\n    const values = this.props.statuses.map(status => translate('issue.status', status));\n\n    return (\n      <FacetBox property={this.property}>\n        <FacetHeader\n          name={translate('issues.facet', this.property)}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={values}\n        />\n\n        {this.props.open && <FacetItemsList>{statuses.map(this.renderItem)}</FacetItemsList>}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { sortBy, uniq, without } from 'lodash';\nimport { formatFacetStat, Query } from '../utils';\nimport { searchIssueTags } from '../../../api/issues';\nimport { Component } from '../../../app/types';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetFooter from '../../../components/facet/FacetFooter';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  component: Component | undefined;\n  facetMode: string;\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: string) => void;\n  open: boolean;\n  organization: { key: string } | undefined;\n  stats: { [x: string]: number } | undefined;\n  tags: string[];\n}\n\nexport default class TagFacet extends React.PureComponent<Props> {\n  property = 'tags';\n\n  static defaultProps = {\n    open: true\n  };\n\n  handleItemClick = (itemValue: string) => {\n    const { tags } = this.props;\n    const newValue = sortBy(\n      tags.includes(itemValue) ? without(tags, itemValue) : [...tags, itemValue]\n    );\n    this.props.onChange({ [this.property]: newValue });\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.property);\n  };\n\n  handleClear = () => {\n    this.props.onChange({ [this.property]: [] });\n  };\n\n  handleSearch = (query: string) => {\n    let organization = this.props.component && this.props.component.organization;\n    if (this.props.organization && !organization) {\n      organization = this.props.organization.key;\n    }\n    return searchIssueTags({ organization, ps: 50, q: query }).then(tags =>\n      tags.map(tag => ({ label: tag, value: tag }))\n    );\n  };\n\n  handleSelect = (option: { value: string }) => {\n    const { tags } = this.props;\n    this.props.onChange({ [this.property]: uniq([...tags, option.value]) });\n  };\n\n  getStat(tag: string) {\n    const { stats } = this.props;\n    return stats ? stats[tag] : undefined;\n  }\n\n  renderTag(tag: string) {\n    return (\n      <span>\n        <i className=\"icon-tags icon-gray little-spacer-right\" />\n        {tag}\n      </span>\n    );\n  }\n\n  renderList() {\n    const { stats } = this.props;\n\n    if (!stats) {\n      return null;\n    }\n\n    const tags = sortBy(Object.keys(stats), key => -stats[key]);\n\n    return (\n      <FacetItemsList>\n        {tags.map(tag => (\n          <FacetItem\n            active={this.props.tags.includes(tag)}\n            key={tag}\n            name={this.renderTag(tag)}\n            onClick={this.handleItemClick}\n            stat={formatFacetStat(this.getStat(tag), this.props.facetMode)}\n            value={tag}\n          />\n        ))}\n      </FacetItemsList>\n    );\n  }\n\n  renderFooter() {\n    if (!this.props.stats) {\n      return null;\n    }\n\n    return <FacetFooter onSearch={this.handleSearch} onSelect={this.handleSelect} />;\n  }\n\n  render() {\n    return (\n      <FacetBox property={this.property}>\n        <FacetHeader\n          name={translate('issues.facet', this.property)}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.props.tags}\n        />\n\n        {this.props.open && this.renderList()}\n\n        {this.props.open && this.renderFooter()}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { orderBy, without } from 'lodash';\nimport { formatFacetStat, Query } from '../utils';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport IssueTypeIcon from '../../../components/ui/IssueTypeIcon';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  facetMode: string;\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: string) => void;\n  open: boolean;\n  stats: { [x: string]: number } | undefined;\n  types: string[];\n}\n\nexport default class TypeFacet extends React.PureComponent<Props> {\n  property = 'types';\n\n  static defaultProps = {\n    open: true\n  };\n\n  handleItemClick = (itemValue: string) => {\n    const { types } = this.props;\n    const newValue = orderBy(\n      types.includes(itemValue) ? without(types, itemValue) : [...types, itemValue]\n    );\n    this.props.onChange({ [this.property]: newValue });\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.property);\n  };\n\n  handleClear = () => {\n    this.props.onChange({ [this.property]: [] });\n  };\n\n  getStat(type: string) {\n    const { stats } = this.props;\n    return stats ? stats[type] : undefined;\n  }\n\n  renderItem = (type: string) => {\n    const active = this.props.types.includes(type);\n    const stat = this.getStat(type);\n\n    return (\n      <FacetItem\n        active={active}\n        disabled={stat === 0 && !active}\n        key={type}\n        name={\n          <span>\n            <IssueTypeIcon query={type} /> {translate('issue.type', type)}\n          </span>\n        }\n        onClick={this.handleItemClick}\n        stat={formatFacetStat(stat, this.props.facetMode)}\n        value={type}\n      />\n    );\n  };\n\n  render() {\n    const types = ['BUG', 'VULNERABILITY', 'CODE_SMELL'];\n    const values = this.props.types.map(type => translate('issue.type', type));\n\n    return (\n      <FacetBox property={this.property}>\n        <FacetHeader\n          name={translate('issues.facet', this.property)}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={values}\n        />\n\n        {this.props.open && <FacetItemsList>{types.map(this.renderItem)}</FacetItemsList>}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport AssigneeFacet from './AssigneeFacet';\nimport AuthorFacet from './AuthorFacet';\nimport CreationDateFacet from './CreationDateFacet';\nimport DirectoryFacet from './DirectoryFacet';\nimport FacetMode from './FacetMode';\nimport FileFacet from './FileFacet';\nimport LanguageFacet from './LanguageFacet';\nimport ModuleFacet from './ModuleFacet';\nimport ProjectFacet from './ProjectFacet';\nimport ResolutionFacet from './ResolutionFacet';\nimport RuleFacet from './RuleFacet';\nimport SeverityFacet from './SeverityFacet';\nimport StatusFacet from './StatusFacet';\nimport TagFacet from './TagFacet';\nimport TypeFacet from './TypeFacet';\nimport { Query, Facet, ReferencedComponent, ReferencedUser, ReferencedLanguage } from '../utils';\nimport { Component } from '../../../app/types';\n\nexport interface Props {\n  component: Component | undefined;\n  facets: { [facet: string]: Facet };\n  myIssues: boolean;\n  onFacetToggle: (property: string) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  openFacets: { [facet: string]: boolean };\n  organization: { key: string } | undefined;\n  query: Query;\n  referencedComponents: { [componentKey: string]: ReferencedComponent };\n  referencedLanguages: { [languageKey: string]: ReferencedLanguage };\n  referencedRules: { [ruleKey: string]: { name: string } };\n  referencedUsers: { [login: string]: ReferencedUser };\n}\n\nexport default class Sidebar extends React.PureComponent<Props> {\n  render() {\n    const { component, facets, openFacets, query } = this.props;\n\n    const displayProjectsFacet =\n      !component || !['TRK', 'BRC', 'DIR', 'DEV_PRJ'].includes(component.qualifier);\n    const displayModulesFacet = component !== undefined && component.qualifier !== 'DIR';\n    const displayDirectoriesFacet = component !== undefined && component.qualifier !== 'DIR';\n    const displayFilesFacet = component !== undefined;\n    const displayAuthorFacet = !component || component.qualifier !== 'DEV';\n\n    return (\n      <div className=\"search-navigator-facets-list\">\n        <FacetMode facetMode={query.facetMode} onChange={this.props.onFilterChange} />\n        <TypeFacet\n          facetMode={query.facetMode}\n          onChange={this.props.onFilterChange}\n          onToggle={this.props.onFacetToggle}\n          open={!!openFacets.types}\n          stats={facets.types}\n          types={query.types}\n        />\n        <SeverityFacet\n          facetMode={query.facetMode}\n          onChange={this.props.onFilterChange}\n          onToggle={this.props.onFacetToggle}\n          open={!!openFacets.severities}\n          severities={query.severities}\n          stats={facets.severities}\n        />\n        <ResolutionFacet\n          facetMode={query.facetMode}\n          onChange={this.props.onFilterChange}\n          onToggle={this.props.onFacetToggle}\n          open={!!openFacets.resolutions}\n          resolutions={query.resolutions}\n          resolved={query.resolved}\n          stats={facets.resolutions}\n        />\n        <StatusFacet\n          facetMode={query.facetMode}\n          onChange={this.props.onFilterChange}\n          onToggle={this.props.onFacetToggle}\n          open={!!openFacets.statuses}\n          stats={facets.statuses}\n          statuses={query.statuses}\n        />\n        <CreationDateFacet\n          component={component}\n          createdAfter={query.createdAfter}\n          createdAt={query.createdAt}\n          createdBefore={query.createdBefore}\n          createdInLast={query.createdInLast}\n          facetMode={query.facetMode}\n          onChange={this.props.onFilterChange}\n          onToggle={this.props.onFacetToggle}\n          open={!!openFacets.createdAt}\n          sinceLeakPeriod={query.sinceLeakPeriod}\n          stats={facets.createdAt}\n        />\n        <RuleFacet\n          facetMode={query.facetMode}\n          languages={query.languages}\n          onChange={this.props.onFilterChange}\n          onToggle={this.props.onFacetToggle}\n          open={!!openFacets.rules}\n          organization={this.props.organization && this.props.organization.key}\n          referencedRules={this.props.referencedRules}\n          rules={query.rules}\n          stats={facets.rules}\n        />\n        <TagFacet\n          component={component}\n          facetMode={query.facetMode}\n          onChange={this.props.onFilterChange}\n          onToggle={this.props.onFacetToggle}\n          open={!!openFacets.tags}\n          organization={this.props.organization}\n          stats={facets.tags}\n          tags={query.tags}\n        />\n        {displayProjectsFacet && (\n          <ProjectFacet\n            component={component}\n            facetMode={query.facetMode}\n            onChange={this.props.onFilterChange}\n            onToggle={this.props.onFacetToggle}\n            open={!!openFacets.projects}\n            organization={this.props.organization}\n            projects={query.projects}\n            referencedComponents={this.props.referencedComponents}\n            stats={facets.projects}\n          />\n        )}\n        {displayModulesFacet && (\n          <ModuleFacet\n            facetMode={query.facetMode}\n            modules={query.modules}\n            onChange={this.props.onFilterChange}\n            onToggle={this.props.onFacetToggle}\n            open={!!openFacets.modules}\n            referencedComponents={this.props.referencedComponents}\n            stats={facets.modules}\n          />\n        )}\n        {displayDirectoriesFacet && (\n          <DirectoryFacet\n            directories={query.directories}\n            facetMode={query.facetMode}\n            onChange={this.props.onFilterChange}\n            onToggle={this.props.onFacetToggle}\n            open={!!openFacets.directories}\n            referencedComponents={this.props.referencedComponents}\n            stats={facets.directories}\n          />\n        )}\n        {displayFilesFacet && (\n          <FileFacet\n            facetMode={query.facetMode}\n            files={query.files}\n            onChange={this.props.onFilterChange}\n            onToggle={this.props.onFacetToggle}\n            open={!!openFacets.files}\n            referencedComponents={this.props.referencedComponents}\n            stats={facets.files}\n          />\n        )}\n        {!this.props.myIssues && (\n          <AssigneeFacet\n            assigned={query.assigned}\n            assignees={query.assignees}\n            component={component}\n            facetMode={query.facetMode}\n            onChange={this.props.onFilterChange}\n            onToggle={this.props.onFacetToggle}\n            open={!!openFacets.assignees}\n            organization={this.props.organization}\n            referencedUsers={this.props.referencedUsers}\n            stats={facets.assignees}\n          />\n        )}\n        {displayAuthorFacet && (\n          <AuthorFacet\n            authors={query.authors}\n            facetMode={query.facetMode}\n            onChange={this.props.onFilterChange}\n            onToggle={this.props.onFacetToggle}\n            open={!!openFacets.authors}\n            stats={facets.authors}\n          />\n        )}\n        <LanguageFacet\n          facetMode={query.facetMode}\n          languages={query.languages}\n          onChange={this.props.onFilterChange}\n          onToggle={this.props.onFacetToggle}\n          open={!!openFacets.languages}\n          referencedLanguages={this.props.referencedLanguages}\n          stats={facets.languages}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { State } from './components/App';\nimport { allLocationsEmpty } from './utils';\n\nexport function enableLocationsNavigator(state: State): Partial<State> | undefined {\n  const { openIssue, selectedLocationIndex } = state;\n  if (openIssue && (openIssue.secondaryLocations.length > 0 || openIssue.flows.length > 0)) {\n    const selectedFlowIndex =\n      state.selectedFlowIndex || (openIssue.flows.length > 0 ? 0 : undefined);\n\n    if (!allLocationsEmpty(openIssue, selectedFlowIndex)) {\n      return {\n        locationsNavigator: true,\n        selectedFlowIndex,\n        // Also reset index = -1 to 0, we don't want to start on the issue when enabling the location navigator\n        selectedLocationIndex:\n          !selectedLocationIndex || selectedLocationIndex < 0 ? 0 : selectedLocationIndex\n      };\n    }\n  }\n  return undefined;\n}\n\nexport function disableLocationsNavigator(): Partial<State> {\n  return { locationsNavigator: false };\n}\n\nexport function selectLocation(nextIndex: number | undefined) {\n  return (state: State): Partial<State> | undefined => {\n    const { selectedLocationIndex: index, openIssue } = state;\n    if (openIssue) {\n      if (!state.locationsNavigator) {\n        if (nextIndex !== undefined) {\n          return { locationsNavigator: true, selectedLocationIndex: nextIndex };\n        }\n      } else if (index !== undefined) {\n        // disable locations when selecting (clicking) the same location\n        return {\n          locationsNavigator: nextIndex !== index,\n          selectedLocationIndex: nextIndex\n        };\n      }\n    }\n    return undefined;\n  };\n}\n\nexport function selectNextLocation(state: State): Partial<State> | undefined {\n  const { selectedFlowIndex, selectedLocationIndex: index, openIssue } = state;\n  if (openIssue) {\n    const locations =\n      selectedFlowIndex !== undefined\n        ? openIssue.flows[selectedFlowIndex]\n        : openIssue.secondaryLocations;\n    const lastLocationIdx = locations.length - 1;\n    if (index === lastLocationIdx) {\n      // -1 to jump back to the issue itself\n      return { selectedLocationIndex: -1 };\n    }\n    return {\n      selectedLocationIndex: index !== undefined && index < lastLocationIdx ? index + 1 : index\n    };\n  }\n  return undefined;\n}\n\nexport function selectPreviousLocation(state: State): Partial<State> | undefined {\n  const { selectedFlowIndex, selectedLocationIndex: index, openIssue } = state;\n  if (openIssue) {\n    if (index === -1) {\n      const locations =\n        selectedFlowIndex !== undefined\n          ? openIssue.flows[selectedFlowIndex]\n          : openIssue.secondaryLocations;\n      const lastLocationIdx = locations.length - 1;\n      return { selectedLocationIndex: lastLocationIdx };\n    }\n    return { selectedLocationIndex: index !== undefined && index > 0 ? index - 1 : index };\n  }\n  return undefined;\n}\n\nexport function selectFlow(nextIndex?: number) {\n  return (): Partial<State> => {\n    return { selectedFlowIndex: nextIndex, selectedLocationIndex: 0 };\n  };\n}\n\nexport function selectNextFlow(state: State): Partial<State> | undefined {\n  const { openIssue, selectedFlowIndex } = state;\n  if (\n    openIssue &&\n    selectedFlowIndex !== undefined &&\n    openIssue.flows.length > selectedFlowIndex + 1\n  ) {\n    return { selectedFlowIndex: selectedFlowIndex + 1, selectedLocationIndex: 0 };\n  }\n  return undefined;\n}\n\nexport function selectPreviousFlow(state: State): Partial<State> | undefined {\n  const { openIssue, selectedFlowIndex } = state;\n  if (openIssue && selectedFlowIndex !== undefined && selectedFlowIndex > 0) {\n    return { selectedFlowIndex: selectedFlowIndex - 1, selectedLocationIndex: 0 };\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Helmet from 'react-helmet';\nimport * as classNames from 'classnames';\nimport * as key from 'keymaster';\nimport { keyBy, union, without } from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport BulkChangeModal from './BulkChangeModal';\nimport ComponentBreadcrumbs from './ComponentBreadcrumbs';\nimport IssuesList from './IssuesList';\nimport IssuesSourceViewer from './IssuesSourceViewer';\nimport MyIssuesFilter from './MyIssuesFilter';\nimport NoMyIssues from './NoMyIssues';\nimport PageActions from './PageActions';\nimport ConciseIssuesList from '../conciseIssuesList/ConciseIssuesList';\nimport ConciseIssuesListHeader from '../conciseIssuesList/ConciseIssuesListHeader';\nimport Sidebar from '../sidebar/Sidebar';\nimport * as actions from '../actions';\nimport {\n  areMyIssuesSelected,\n  areQueriesEqual,\n  Facet,\n  getOpen,\n  mapFacet,\n  parseFacets,\n  parseQuery,\n  Query,\n  RawFacet,\n  ReferencedComponent,\n  ReferencedLanguage,\n  ReferencedUser,\n  saveMyIssues,\n  serializeQuery\n} from '../utils';\nimport { Component, CurrentUser, Issue, Paging, BranchLike } from '../../../app/types';\nimport handleRequiredAuthentication from '../../../app/utils/handleRequiredAuthentication';\nimport Dropdown from '../../../components/controls/Dropdown';\nimport ListFooter from '../../../components/controls/ListFooter';\nimport EmptySearch from '../../../components/common/EmptySearch';\nimport FiltersHeader from '../../../components/common/FiltersHeader';\nimport ScreenPositionHelper from '../../../components/common/ScreenPositionHelper';\nimport { Button } from '../../../components/ui/buttons';\nimport {\n  isShortLivingBranch,\n  isSameBranchLike,\n  getBranchLikeQuery,\n  isPullRequest\n} from '../../../helpers/branches';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { RawQuery } from '../../../helpers/query';\nimport { scrollToElement } from '../../../helpers/scrolling';\nimport Checkbox from '../../../components/controls/Checkbox';\n\nimport '../styles.css';\n\ninterface Props {\n  branchLike?: BranchLike;\n  component?: Component;\n  currentUser: CurrentUser;\n  fetchIssues: (\n    query: RawQuery,\n    requestOrganizations?: boolean\n  ) => Promise<{\n    components: ReferencedComponent[];\n    facets: RawFacet[];\n    issues: Issue[];\n    languages: ReferencedLanguage[];\n    paging: Paging;\n    rules: { name: string }[];\n    users: ReferencedUser[];\n  }>;\n  location: { pathname: string; query: RawQuery };\n  myIssues?: boolean;\n  onBranchesChange: () => void;\n  onSonarCloud: boolean;\n  organization?: { key: string };\n}\n\nexport interface State {\n  bulkChange?: 'all' | 'selected';\n  checked: string[];\n  facets: { [facet: string]: Facet };\n  issues: Issue[];\n  lastChecked?: string;\n  loading: boolean;\n  locationsNavigator: boolean;\n  myIssues: boolean;\n  openFacets: { [facet: string]: boolean };\n  openIssue?: Issue;\n  openPopup?: { issue: string; name: string };\n  paging?: Paging;\n  query: Query;\n  referencedComponents: { [componentKey: string]: ReferencedComponent };\n  referencedLanguages: { [languageKey: string]: ReferencedLanguage };\n  referencedRules: { [ruleKey: string]: { name: string } };\n  referencedUsers: { [login: string]: ReferencedUser };\n  selected?: string;\n  selectedFlowIndex?: number;\n  selectedLocationIndex?: number;\n}\n\nconst DEFAULT_QUERY = { resolved: 'false' };\n\nexport default class App extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  static contextTypes = {\n    router: PropTypes.object.isRequired\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      checked: [],\n      facets: {},\n      issues: [],\n      loading: true,\n      locationsNavigator: false,\n      myIssues: props.myIssues || areMyIssuesSelected(props.location.query),\n      openFacets: { severities: true, types: true },\n      query: parseQuery(props.location.query),\n      referencedComponents: {},\n      referencedLanguages: {},\n      referencedRules: {},\n      referencedUsers: {},\n      selected: getOpen(props.location.query)\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n\n    if (this.state.myIssues && !this.props.currentUser.isLoggedIn) {\n      handleRequiredAuthentication();\n      return;\n    }\n\n    document.body.classList.add('white-page');\n    // $FlowFixMe\n    document.documentElement.classList.add('white-page');\n\n    const footer = document.getElementById('footer');\n    if (footer) {\n      footer.classList.add('page-footer-with-sidebar');\n    }\n\n    this.attachShortcuts();\n    this.fetchFirstIssues();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    const openIssue = this.getOpenIssue(nextProps, this.state.issues);\n\n    if (openIssue && openIssue.key !== this.state.selected) {\n      this.setState({\n        locationsNavigator: false,\n        selected: openIssue.key,\n        selectedFlowIndex: undefined,\n        selectedLocationIndex: undefined\n      });\n    }\n\n    if (!openIssue) {\n      this.setState({ selectedFlowIndex: undefined, selectedLocationIndex: undefined });\n    }\n\n    this.setState({\n      myIssues: nextProps.myIssues || areMyIssuesSelected(nextProps.location.query),\n      openIssue,\n      query: parseQuery(nextProps.location.query)\n    });\n  }\n\n  componentDidUpdate(prevProps: Props, prevState: State) {\n    const { query } = this.props.location;\n    const { query: prevQuery } = prevProps.location;\n    if (\n      prevProps.component !== this.props.component ||\n      !isSameBranchLike(prevProps.branchLike, this.props.branchLike) ||\n      !areQueriesEqual(prevQuery, query) ||\n      areMyIssuesSelected(prevQuery) !== areMyIssuesSelected(query)\n    ) {\n      this.fetchFirstIssues();\n    } else if (\n      !this.state.openIssue &&\n      (prevState.selected !== this.state.selected || prevState.openIssue)\n    ) {\n      // if user simply selected another issue\n      // or if he went from the source code back to the list of issues\n      this.scrollToSelectedIssue();\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachShortcuts();\n\n    document.body.classList.remove('white-page');\n    // $FlowFixMe\n    document.documentElement.classList.remove('white-page');\n\n    const footer = document.getElementById('footer');\n    if (footer) {\n      footer.classList.remove('page-footer-with-sidebar');\n    }\n\n    this.mounted = false;\n  }\n\n  attachShortcuts() {\n    key.setScope('issues');\n    key('up', 'issues', () => {\n      this.selectPreviousIssue();\n      return false;\n    });\n    key('down', 'issues', () => {\n      this.selectNextIssue();\n      return false;\n    });\n    key('right', 'issues', () => {\n      this.openSelectedIssue();\n      return false;\n    });\n    key('left', 'issues', () => {\n      if (this.state.query.issues.length !== 1) {\n        this.closeIssue();\n      }\n      return false;\n    });\n    window.addEventListener('keydown', this.handleKeyDown);\n    window.addEventListener('keyup', this.handleKeyUp);\n  }\n\n  detachShortcuts() {\n    key.deleteScope('issues');\n    window.removeEventListener('keydown', this.handleKeyDown);\n    window.removeEventListener('keyup', this.handleKeyUp);\n  }\n\n  handleKeyDown = (event: KeyboardEvent) => {\n    if (key.getScope() !== 'issues') {\n      return;\n    }\n    if (event.keyCode === 18) {\n      // alt\n      event.preventDefault();\n      this.setState(actions.enableLocationsNavigator);\n    } else if (event.keyCode === 40 && event.altKey) {\n      // alt + down\n      event.preventDefault();\n      this.selectNextLocation();\n    } else if (event.keyCode === 38 && event.altKey) {\n      // alt + up\n      event.preventDefault();\n      this.selectPreviousLocation();\n    } else if (event.keyCode === 37 && event.altKey) {\n      // alt + left\n      event.preventDefault();\n      this.selectPreviousFlow();\n    } else if (event.keyCode === 39 && event.altKey) {\n      // alt + right\n      event.preventDefault();\n      this.selectNextFlow();\n    }\n  };\n\n  handleKeyUp = (event: KeyboardEvent) => {\n    if (key.getScope() !== 'issues') {\n      return;\n    }\n    if (event.keyCode === 18) {\n      // alt\n      this.setState(actions.disableLocationsNavigator);\n    }\n  };\n\n  getSelectedIndex() {\n    const { issues = [], selected } = this.state;\n    const index = issues.findIndex(issue => issue.key === selected);\n    return index !== -1 ? index : undefined;\n  }\n\n  getOpenIssue = (props: Props, issues: Issue[]) => {\n    const open = getOpen(props.location.query);\n    return open ? issues.find(issue => issue.key === open) : undefined;\n  };\n\n  selectNextIssue = () => {\n    const { issues } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    if (selectedIndex !== undefined && selectedIndex < issues.length - 1) {\n      if (this.state.openIssue) {\n        this.openIssue(issues[selectedIndex + 1].key);\n      } else {\n        this.setState({\n          selected: issues[selectedIndex + 1].key,\n          selectedFlowIndex: undefined,\n          selectedLocationIndex: undefined\n        });\n      }\n    }\n  };\n\n  selectPreviousIssue = () => {\n    const { issues } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    if (selectedIndex !== undefined && selectedIndex > 0) {\n      if (this.state.openIssue) {\n        this.openIssue(issues[selectedIndex - 1].key);\n      } else {\n        this.setState({\n          selected: issues[selectedIndex - 1].key,\n          selectedFlowIndex: undefined,\n          selectedLocationIndex: undefined\n        });\n      }\n    }\n  };\n\n  openIssue = (issueKey: string) => {\n    const path = {\n      pathname: this.props.location.pathname,\n      query: {\n        ...serializeQuery(this.state.query),\n        ...getBranchLikeQuery(this.props.branchLike),\n        id: this.props.component && this.props.component.key,\n        myIssues: this.state.myIssues ? 'true' : undefined,\n        open: issueKey\n      }\n    };\n    if (this.state.openIssue) {\n      if (path.query.open && path.query.open === this.state.openIssue.key) {\n        this.setState(\n          {\n            locationsNavigator: false,\n            selectedFlowIndex: undefined,\n            selectedLocationIndex: undefined\n          },\n          this.scrollToSelectedIssue\n        );\n      } else {\n        this.context.router.replace(path);\n      }\n    } else {\n      this.context.router.push(path);\n    }\n  };\n\n  closeIssue = () => {\n    if (this.state.query) {\n      this.context.router.push({\n        pathname: this.props.location.pathname,\n        query: {\n          ...serializeQuery(this.state.query),\n          ...getBranchLikeQuery(this.props.branchLike),\n          id: this.props.component && this.props.component.key,\n          myIssues: this.state.myIssues ? 'true' : undefined,\n          open: undefined\n        }\n      });\n      this.scrollToSelectedIssue(false);\n    }\n  };\n\n  openSelectedIssue = () => {\n    const { selected } = this.state;\n    if (selected) {\n      this.openIssue(selected);\n    }\n  };\n\n  scrollToSelectedIssue = (smooth = true) => {\n    const { selected } = this.state;\n    if (selected) {\n      const element = document.querySelector(`[data-issue=\"${selected}\"]`);\n      if (element) {\n        scrollToElement(element, { topOffset: 250, bottomOffset: 100, smooth });\n      }\n    }\n  };\n\n  fetchIssues = (additional: RawQuery, requestFacets = false, requestOrganizations = true) => {\n    const { component, organization } = this.props;\n    const { myIssues, openFacets, query } = this.state;\n\n    const facets = requestFacets\n      ? Object.keys(openFacets)\n          .filter(facet => openFacets[facet])\n          .map(mapFacet)\n          .join(',')\n      : undefined;\n\n    const parameters = {\n      ...getBranchLikeQuery(this.props.branchLike),\n      componentKeys: component && component.key,\n      s: 'FILE_LINE',\n      ...serializeQuery(query),\n      ps: '100',\n      organization: organization && organization.key,\n      facets,\n      ...additional\n    };\n\n    // only sorting by CREATION_DATE is allowed, so let's sort DESC\n    if (query.sort) {\n      Object.assign(parameters, { asc: 'false' });\n    }\n\n    if (myIssues) {\n      Object.assign(parameters, { assignees: '__me__' });\n    }\n\n    return this.props.fetchIssues(parameters, requestOrganizations);\n  };\n\n  fetchFirstIssues() {\n    this.setState({ checked: [], loading: true });\n    return this.fetchIssues({}, true).then(\n      ({ facets, issues, paging, ...other }) => {\n        if (this.mounted) {\n          const openIssue = this.getOpenIssue(this.props, issues);\n          this.setState({\n            facets: parseFacets(facets),\n            loading: false,\n            issues,\n            openIssue,\n            paging,\n            referencedComponents: keyBy(other.components, 'uuid'),\n            referencedLanguages: keyBy(other.languages, 'key'),\n            referencedRules: keyBy(other.rules, 'key'),\n            referencedUsers: keyBy(other.users, 'login'),\n            selected: issues.length > 0 ? (openIssue ? openIssue.key : issues[0].key) : undefined,\n            selectedFlowIndex: undefined,\n            selectedLocationIndex: undefined\n          });\n        }\n        return issues;\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n        return [];\n      }\n    );\n  }\n\n  fetchIssuesPage = (p: number) => {\n    return this.fetchIssues({ p });\n  };\n\n  fetchIssuesUntil = (\n    p: number,\n    done: (issues: Issue[], paging: Paging) => boolean\n  ): Promise<{ issues: Issue[]; paging: Paging }> => {\n    return this.fetchIssuesPage(p).then(response => {\n      const { issues, paging } = response;\n\n      return done(issues, paging)\n        ? { issues, paging }\n        : this.fetchIssuesUntil(p + 1, done).then(nextResponse => {\n            return {\n              issues: [...issues, ...nextResponse.issues],\n              paging: nextResponse.paging\n            };\n          });\n    });\n  };\n\n  fetchMoreIssues = () => {\n    const { paging } = this.state;\n\n    if (!paging) {\n      return;\n    }\n\n    const p = paging.pageIndex + 1;\n\n    this.setState({ loading: true });\n    this.fetchIssuesPage(p).then(\n      response => {\n        if (this.mounted) {\n          this.setState(state => ({\n            loading: false,\n            issues: [...state.issues, ...response.issues],\n            paging: response.paging\n          }));\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  fetchIssuesForComponent = (_component: string, _from: number, to: number) => {\n    const { issues, openIssue, paging } = this.state;\n\n    if (!openIssue || !paging) {\n      return Promise.reject(undefined);\n    }\n\n    const isSameComponent = (issue: Issue) => issue.component === openIssue.component;\n\n    const done = (issues: Issue[], paging: Paging) => {\n      if (paging.total <= paging.pageIndex * paging.pageSize) {\n        return true;\n      }\n      const lastIssue = issues[issues.length - 1];\n      if (lastIssue.component !== openIssue.component) {\n        return true;\n      }\n      return lastIssue.textRange !== undefined && lastIssue.textRange.endLine > to;\n    };\n\n    if (done(issues, paging)) {\n      return Promise.resolve(issues.filter(isSameComponent));\n    }\n\n    this.setState({ loading: true });\n    return this.fetchIssuesUntil(paging.pageIndex + 1, done).then(\n      response => {\n        const nextIssues = [...issues, ...response.issues];\n        if (this.mounted) {\n          this.setState({\n            issues: nextIssues,\n            loading: false,\n            paging: response.paging\n          });\n        }\n        return nextIssues.filter(isSameComponent);\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n        return [];\n      }\n    );\n  };\n\n  fetchFacet = (facet: string) => {\n    const requestOrganizations = facet === 'projects';\n    return this.fetchIssues({ ps: 1, facets: mapFacet(facet) }, false, requestOrganizations).then(\n      ({ facets, ...other }) => {\n        if (this.mounted) {\n          this.setState(state => ({\n            facets: { ...state.facets, ...parseFacets(facets) },\n            referencedComponents: {\n              ...state.referencedComponents,\n              ...keyBy(other.components, 'uuid')\n            },\n            referencedLanguages: { ...state.referencedLanguages, ...keyBy(other.languages, 'key') },\n            referencedRules: { ...state.referencedRules, ...keyBy(other.rules, 'key') },\n            referencedUsers: { ...state.referencedUsers, ...keyBy(other.users, 'login') }\n          }));\n        }\n      },\n      () => {}\n    );\n  };\n\n  isFiltered = () => {\n    const serialized = serializeQuery(this.state.query);\n    return !areQueriesEqual(serialized, DEFAULT_QUERY);\n  };\n\n  getCheckedIssues = () => {\n    const issues = this.state.checked\n      .map(checked => this.state.issues.find(issue => issue.key === checked))\n      .filter((issue): issue is Issue => issue !== undefined);\n    const paging = { pageIndex: 1, pageSize: issues.length, total: issues.length };\n    return Promise.resolve({ issues, paging });\n  };\n\n  handleFilterChange = (changes: Partial<Query>) => {\n    this.context.router.push({\n      pathname: this.props.location.pathname,\n      query: {\n        ...serializeQuery({ ...this.state.query, ...changes }),\n        ...getBranchLikeQuery(this.props.branchLike),\n        id: this.props.component && this.props.component.key,\n        myIssues: this.state.myIssues ? 'true' : undefined\n      }\n    });\n  };\n\n  handleMyIssuesChange = (myIssues: boolean) => {\n    this.closeFacet('assignees');\n    if (!this.props.component) {\n      saveMyIssues(myIssues);\n    }\n    this.context.router.push({\n      pathname: this.props.location.pathname,\n      query: {\n        ...serializeQuery({ ...this.state.query, assigned: true, assignees: [] }),\n        ...getBranchLikeQuery(this.props.branchLike),\n        id: this.props.component && this.props.component.key,\n        myIssues: myIssues ? 'true' : undefined\n      }\n    });\n  };\n\n  closeFacet = (property: string) => {\n    this.setState(state => ({\n      openFacets: { ...state.openFacets, [property]: false }\n    }));\n  };\n\n  handleFacetToggle = (property: string) => {\n    this.setState(state => ({\n      openFacets: { ...state.openFacets, [property]: !state.openFacets[property] }\n    }));\n    if (!this.state.facets[property]) {\n      this.fetchFacet(property);\n    }\n  };\n\n  handleReset = () => {\n    this.context.router.push({\n      pathname: this.props.location.pathname,\n      query: {\n        ...DEFAULT_QUERY,\n        ...getBranchLikeQuery(this.props.branchLike),\n        id: this.props.component && this.props.component.key,\n        myIssues: this.state.myIssues ? 'true' : undefined\n      }\n    });\n  };\n\n  handlePopupToggle = (issue: string, popupName: string, open?: boolean) => {\n    this.setState((state: State) => {\n      const samePopup =\n        state.openPopup && state.openPopup.name === popupName && state.openPopup.issue === issue;\n      if (open !== false && !samePopup) {\n        return { openPopup: { issue, name: popupName } };\n      } else if (open !== true && samePopup) {\n        return { openPopup: undefined };\n      }\n      return state;\n    });\n  };\n\n  handleIssueCheck = (issue: string, event: MouseEvent) => {\n    // Selecting multiple issues with shift+click\n    const { lastChecked } = this.state;\n    if (event.shiftKey && lastChecked) {\n      this.setState(state => {\n        const issueKeys = state.issues.map(issue => issue.key);\n        const currentIssueIndex = issueKeys.indexOf(issue);\n        const lastSelectedIndex = issueKeys.indexOf(lastChecked);\n        const shouldCheck = state.checked.includes(lastChecked);\n        let { checked } = state;\n        if (currentIssueIndex < 0) {\n          return null;\n        }\n        const start = Math.min(currentIssueIndex, lastSelectedIndex);\n        const end = Math.max(currentIssueIndex, lastSelectedIndex);\n        for (let i = start; i < end + 1; i++) {\n          checked = shouldCheck\n            ? union(checked, [state.issues[i].key])\n            : without(checked, state.issues[i].key);\n        }\n        return { checked };\n      });\n    } else {\n      this.setState(state => ({\n        lastChecked: issue,\n        checked: state.checked.includes(issue)\n          ? without(state.checked, issue)\n          : [...state.checked, issue]\n      }));\n    }\n  };\n\n  handleIssueChange = (issue: Issue) => {\n    this.setState(state => ({\n      issues: state.issues.map(candidate => (candidate.key === issue.key ? issue : candidate))\n    }));\n  };\n\n  openBulkChange = (mode: 'all' | 'selected') => {\n    this.setState({ bulkChange: mode });\n    key.setScope('issues-bulk-change');\n  };\n\n  closeBulkChange = () => {\n    key.setScope('issues');\n    this.setState({ bulkChange: undefined });\n  };\n\n  handleBulkChangeClick = () => {\n    this.openBulkChange('all');\n  };\n\n  handleBulkChangeSelectedClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.openBulkChange('selected');\n  };\n\n  handleBulkChangeDone = () => {\n    this.fetchFirstIssues();\n    this.closeBulkChange();\n  };\n\n  handleReload = () => {\n    this.fetchFirstIssues();\n    if (isShortLivingBranch(this.props.branchLike) || isPullRequest(this.props.branchLike)) {\n      this.props.onBranchesChange();\n    }\n  };\n\n  handleReloadAndOpenFirst = () => {\n    this.fetchFirstIssues().then(\n      issues => {\n        if (issues.length > 0) {\n          this.openIssue(issues[0].key);\n        }\n      },\n      () => {}\n    );\n  };\n\n  selectLocation = (index?: number) => {\n    this.setState(actions.selectLocation(index));\n  };\n\n  selectNextLocation = () => {\n    this.setState(actions.selectNextLocation);\n  };\n\n  selectPreviousLocation = () => {\n    this.setState(actions.selectPreviousLocation);\n  };\n\n  onCheckAll = (checked: boolean) => {\n    if (checked) {\n      this.setState(state => ({ checked: state.issues.map(issue => issue.key) }));\n    } else {\n      this.setState({ checked: [] });\n    }\n  };\n\n  selectFlow = (index?: number) => {\n    this.setState(actions.selectFlow(index));\n  };\n\n  selectNextFlow = () => {\n    this.setState(actions.selectNextFlow);\n  };\n\n  selectPreviousFlow = () => {\n    this.setState(actions.selectPreviousFlow);\n  };\n\n  renderBulkChange(openIssue: Issue | undefined) {\n    const { component, currentUser } = this.props;\n    const { bulkChange, checked, paging, issues } = this.state;\n\n    const isAllChecked = checked.length > 0 && issues.length === checked.length;\n    const thirdState = checked.length > 0 && !isAllChecked;\n    const isChecked = isAllChecked || thirdState;\n\n    if (!currentUser.isLoggedIn || openIssue) {\n      return null;\n    }\n\n    return (\n      <div className=\"pull-left\">\n        <Checkbox\n          checked={isChecked}\n          className=\"spacer-right vertical-middle\"\n          id=\"issues-selection\"\n          onCheck={this.onCheckAll}\n          thirdState={thirdState}\n        />\n        {checked.length > 0 ? (\n          <Dropdown>\n            {({ onToggleClick, open }) => (\n              <div className={classNames('dropdown display-inline-block', { open })}>\n                <Button id=\"issues-bulk-change\" onClick={onToggleClick}>\n                  {translate('bulk_change')}\n                  <i className=\"icon-dropdown little-spacer-left\" />\n                </Button>\n                <ul className=\"dropdown-menu\">\n                  <li>\n                    <a href=\"#\" onClick={this.handleBulkChangeClick}>\n                      {translateWithParameters('issues.bulk_change', paging ? paging.total : 0)}\n                    </a>\n                  </li>\n                  <li>\n                    <a href=\"#\" onClick={this.handleBulkChangeSelectedClick}>\n                      {translateWithParameters('issues.bulk_change_selected', checked.length)}\n                    </a>\n                  </li>\n                </ul>\n              </div>\n            )}\n          </Dropdown>\n        ) : (\n          <Button id=\"issues-bulk-change\" onClick={this.handleBulkChangeClick}>\n            {translate('bulk_change')}\n          </Button>\n        )}\n        {bulkChange && (\n          <BulkChangeModal\n            component={component}\n            currentUser={currentUser}\n            fetchIssues={bulkChange === 'all' ? this.fetchIssues : this.getCheckedIssues}\n            onClose={this.closeBulkChange}\n            onDone={this.handleBulkChangeDone}\n            organization={this.props.organization}\n          />\n        )}\n      </div>\n    );\n  }\n\n  renderFacets() {\n    const { component, currentUser, onSonarCloud } = this.props;\n    const { query } = this.state;\n\n    return (\n      <div className=\"layout-page-filters\">\n        {currentUser.isLoggedIn &&\n          !onSonarCloud && (\n            <MyIssuesFilter\n              myIssues={this.state.myIssues}\n              onMyIssuesChange={this.handleMyIssuesChange}\n            />\n          )}\n        <FiltersHeader displayReset={this.isFiltered()} onReset={this.handleReset} />\n        <Sidebar\n          component={component}\n          facets={this.state.facets}\n          myIssues={this.state.myIssues}\n          onFacetToggle={this.handleFacetToggle}\n          onFilterChange={this.handleFilterChange}\n          openFacets={this.state.openFacets}\n          organization={this.props.organization}\n          query={query}\n          referencedComponents={this.state.referencedComponents}\n          referencedLanguages={this.state.referencedLanguages}\n          referencedRules={this.state.referencedRules}\n          referencedUsers={this.state.referencedUsers}\n        />\n      </div>\n    );\n  }\n\n  renderConciseIssuesList() {\n    const { issues, paging, query } = this.state;\n\n    return (\n      <div className=\"layout-page-filters\">\n        <ConciseIssuesListHeader\n          displayBackButton={query.issues.length !== 1}\n          loading={this.state.loading}\n          onBackClick={this.closeIssue}\n          onReload={this.handleReloadAndOpenFirst}\n          paging={paging}\n          selectedIndex={this.getSelectedIndex()}\n        />\n        <ConciseIssuesList\n          issues={issues}\n          onFlowSelect={this.selectFlow}\n          onIssueSelect={this.openIssue}\n          onLocationSelect={this.selectLocation}\n          selected={this.state.selected}\n          selectedFlowIndex={this.state.selectedFlowIndex}\n          selectedLocationIndex={this.state.selectedLocationIndex}\n        />\n        {paging &&\n          paging.total > 0 && (\n            <ListFooter\n              count={issues.length}\n              loadMore={this.fetchMoreIssues}\n              total={paging.total}\n            />\n          )}\n      </div>\n    );\n  }\n\n  renderSide(openIssue: Issue | undefined) {\n    return (\n      <ScreenPositionHelper className=\"layout-page-side-outer\">\n        {({ top }) => (\n          <div className=\"layout-page-side\" style={{ top }}>\n            <div className=\"layout-page-side-inner\">\n              {openIssue ? this.renderConciseIssuesList() : this.renderFacets()}\n            </div>\n          </div>\n        )}\n      </ScreenPositionHelper>\n    );\n  }\n\n  renderList() {\n    const { branchLike, component, currentUser, organization } = this.props;\n    const { issues, openIssue, paging } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    const selectedIssue = selectedIndex !== undefined ? issues[selectedIndex] : undefined;\n\n    if (!paging || openIssue) {\n      return null;\n    }\n\n    return (\n      <div>\n        {paging.total > 0 && (\n          <IssuesList\n            branchLike={branchLike}\n            checked={this.state.checked}\n            component={component}\n            issues={issues}\n            onFilterChange={this.handleFilterChange}\n            onIssueChange={this.handleIssueChange}\n            onIssueCheck={currentUser.isLoggedIn ? this.handleIssueCheck : undefined}\n            onIssueClick={this.openIssue}\n            onPopupToggle={this.handlePopupToggle}\n            openPopup={this.state.openPopup}\n            organization={organization}\n            selectedIssue={selectedIssue}\n          />\n        )}\n\n        {paging.total > 0 && (\n          <ListFooter count={issues.length} loadMore={this.fetchMoreIssues} total={paging.total} />\n        )}\n\n        {paging.total === 0 &&\n          (this.state.myIssues && !this.isFiltered() ? <NoMyIssues /> : <EmptySearch />)}\n      </div>\n    );\n  }\n\n  renderShortcutsForLocations() {\n    const { openIssue } = this.state;\n    if (!openIssue || (!openIssue.secondaryLocations.length && !openIssue.flows.length)) {\n      return null;\n    }\n    const hasSeveralFlows = openIssue.flows.length > 1;\n    return (\n      <div className=\"pull-right note\">\n        <span className=\"shortcut-button little-spacer-right\">alt</span>\n        <span className=\"little-spacer-right\">{'+'}</span>\n        <span className=\"shortcut-button little-spacer-right\">↑</span>\n        <span className=\"shortcut-button little-spacer-right\">↓</span>\n        {hasSeveralFlows && (\n          <span>\n            <span className=\"shortcut-button little-spacer-right\">←</span>\n            <span className=\"shortcut-button little-spacer-right\">→</span>\n          </span>\n        )}\n        {translate('issues.to_navigate_issue_locations')}\n      </div>\n    );\n  }\n\n  render() {\n    const { component } = this.props;\n    const { openIssue, paging } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    return (\n      <div className=\"layout-page issues\" id=\"issues-page\">\n        <Helmet title={translate('issues.page')} />\n\n        {this.renderSide(openIssue)}\n\n        <div className=\"layout-page-main\">\n          <div className=\"layout-page-header-panel layout-page-main-header issues-main-header\">\n            <div className=\"layout-page-header-panel-inner layout-page-main-header-inner\">\n              <div className=\"layout-page-main-inner\">\n                {this.renderBulkChange(openIssue)}\n                {openIssue ? (\n                  <div className=\"pull-left width-60\">\n                    <ComponentBreadcrumbs\n                      branchLike={this.props.branchLike}\n                      component={component}\n                      issue={openIssue}\n                      organization={this.props.organization}\n                      selectedFlowIndex={this.state.selectedFlowIndex}\n                      selectedLocationIndex={this.state.selectedLocationIndex}\n                    />\n                  </div>\n                ) : (\n                  <PageActions\n                    canSetHome={Boolean(\n                      !this.props.organization &&\n                        !this.props.component &&\n                        (!this.props.onSonarCloud || this.props.myIssues)\n                    )}\n                    loading={this.state.loading}\n                    onReload={this.handleReload}\n                    onSonarCloud={this.props.onSonarCloud}\n                    paging={paging}\n                    selectedIndex={selectedIndex}\n                  />\n                )}\n                {this.renderShortcutsForLocations()}\n              </div>\n            </div>\n          </div>\n\n          <div className=\"layout-page-main-inner\">\n            <div>\n              {openIssue ? (\n                <IssuesSourceViewer\n                  branchLike={this.props.branchLike}\n                  loadIssues={this.fetchIssuesForComponent}\n                  locationsNavigator={this.state.locationsNavigator}\n                  onIssueChange={this.handleIssueChange}\n                  onIssueSelect={this.openIssue}\n                  onLocationSelect={this.selectLocation}\n                  openIssue={openIssue}\n                  selectedFlowIndex={this.state.selectedFlowIndex}\n                  selectedLocationIndex={this.state.selectedLocationIndex}\n                />\n              ) : (\n                this.renderList()\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\n\ninterface Props {\n  className?: string;\n  children: React.ReactNode;\n  property: string;\n}\n\nexport default function FacetBox(props: Props) {\n  return (\n    <div\n      className={classNames('search-navigator-facet-box', props.className)}\n      data-property={props.property}>\n      {props.children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\n\nexport interface Props {\n  active?: boolean;\n  className?: string;\n  disabled?: boolean;\n  halfWidth?: boolean;\n  name: React.ReactNode;\n  onClick: (x: string) => void;\n  stat?: React.ReactNode;\n  value: string;\n}\n\nexport default class FacetItem extends React.PureComponent<Props> {\n  static defaultProps = {\n    disabled: false,\n    halfWidth: false\n  };\n\n  handleClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.onClick(this.props.value);\n  };\n\n  render() {\n    const className = classNames('facet', 'search-navigator-facet', this.props.className, {\n      active: this.props.active,\n      'search-navigator-facet-half': this.props.halfWidth\n    });\n\n    return this.props.disabled ? (\n      <span className={className} data-facet={this.props.value}>\n        <span className=\"facet-name\">{this.props.name}</span>\n        {this.props.stat != null && <span className=\"facet-stat\">{this.props.stat}</span>}\n      </span>\n    ) : (\n      <a className={className} data-facet={this.props.value} href=\"#\" onClick={this.handleClick}>\n        <span className=\"facet-name\">{this.props.name}</span>\n        {this.props.stat != null && <span className=\"facet-stat\">{this.props.stat}</span>}\n      </a>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport OpenCloseIcon from '../icons-components/OpenCloseIcon';\nimport HelpIcon from '../icons-components/HelpIcon';\nimport Tooltip from '../controls/Tooltip';\nimport { Button } from '../ui/buttons';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\n\ninterface Props {\n  helper?: string;\n  name: string;\n  onClear?: () => void;\n  onClick?: () => void;\n  open: boolean;\n  values?: string[];\n}\n\nexport default class FacetHeader extends React.PureComponent<Props> {\n  handleClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.onClick) {\n      this.props.onClick();\n    }\n  };\n\n  renderHelper() {\n    if (!this.props.helper) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={this.props.helper}>\n        <span>\n          <HelpIcon className=\"spacer-left text-info\" />\n        </span>\n      </Tooltip>\n    );\n  }\n\n  renderValueIndicator() {\n    const { values } = this.props;\n    if (this.props.open || !values || !values.length) {\n      return null;\n    }\n    const value =\n      values.length === 1 ? values[0] : translateWithParameters('x_selected', values.length);\n    return (\n      <span className=\"badge badge-secondary is-rounded text-ellipsis\" title={value}>\n        {value}\n      </span>\n    );\n  }\n\n  render() {\n    const showClearButton =\n      this.props.values != null && this.props.values.length > 0 && this.props.onClear != null;\n\n    return (\n      <div className=\"search-navigator-facet-header-wrapper\">\n        {this.props.onClick ? (\n          <span className=\"search-navigator-facet-header\">\n            <a href=\"#\" onClick={this.handleClick}>\n              <OpenCloseIcon className=\"little-spacer-right\" open={this.props.open} />\n              {this.props.name}\n            </a>\n            {this.renderHelper()}\n          </span>\n        ) : (\n          <span className=\"search-navigator-facet-header\">\n            {this.props.name}\n            {this.renderHelper()}\n          </span>\n        )}\n\n        <span className=\"search-navigator-facet-header-value spacer-left spacer-right \">\n          {this.renderValueIndicator()}\n        </span>\n\n        {showClearButton && (\n          <Button\n            className=\"search-navigator-facet-header-button button-small button-red\"\n            onClick={this.props.onClear}>\n            {translate('clear')}\n          </Button>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\n\ninterface Props {\n  children?: React.ReactNode;\n}\n\nexport default function FacetItemsList(props: Props) {\n  return <div className=\"search-navigator-facet-list\">{props.children}</div>;\n}\n"],"sourceRoot":""}