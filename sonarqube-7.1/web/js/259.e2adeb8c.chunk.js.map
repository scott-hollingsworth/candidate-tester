{"version":3,"sources":["webpack:///./src/main/js/apps/account/components/Password.js","webpack:///./src/main/js/apps/account/components/Tokens.tsx","webpack:///./src/main/js/apps/account/components/Security.js"],"names":["_super","Password","_this","apply","this","arguments","state","success","errors","handleSuccessfulChange","oldPassword","value","password","passwordConfirmation","setState","handleFailedChange","e","response","json","then","r","focus","setErrors","map","msg","handleChangePassword","preventDefault","user","props","previousPassword","Object","l10n","users","login","catch","Password_extends","prototype","render","_a","index_js_exposed_default","a","createElement","className","onSubmit","i","key","htmlFor","ref","elem","autoComplete","id","name","required","type","index_js_exposed","Tokens_Tokens","TokensForm","__webpack_exports__","es","rootReducer","Helmet_default","title","local","components_Password"],"mappings":"0bAuBA,SAAAA,GAAA,SAAAC,IAAA,IAAAC,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAmHCD,YAlHCF,EAAKI,OACIC,SAAO,EACRC,OACN,MAEFN,EAAsBO,uBAAG,WACnBP,EAAYQ,YAAMC,MAAM,GACxBT,EAASU,SAAMD,MAAM,GACrBT,EAAqBW,qBAAMF,MAAM,GACjCT,EAASY,UAAUP,SAAM,EAAQC,OACvC,QAEAN,EAAkBa,mBAAG,SAACC,GACnBA,EAASC,SAAOC,OAAKC,KAAC,SAACC,GAClBlB,EAAYQ,YAASW,QACrBnB,EAAUoB,UAAAF,EAASZ,OAAIe,IAAC,SAACP,GAAI,OAACA,EAAIQ,UAI1CtB,EAASoB,UAAG,SAAMd,GACZN,EAASY,UACJP,SAAO,EACRC,OAEVA,KAEAN,EAAoBuB,qBAAG,SAACT,GACrBA,EAAkBU,iBAEX,IAAAC,EAAAzB,EAAA0B,MAAoBD,KACNE,EAAO3B,EAAYQ,YAAOC,MAClCC,EAAOV,EAASU,SAAOD,MAGzBC,IAFqBV,EAAqBW,qBAAOF,OAGvDT,EAASU,SAASS,QAClBnB,EAAUoB,WAAWQ,OAAAC,EAAA,EAAAD,CAA8C,8CAEzDA,OAAAE,EAAA,EAAAF,EAAQG,MAAMN,EAAMM,MAAUrB,WAAkBiB,iBAAGA,IAC1DV,KAAKjB,EAAwBO,wBAC5ByB,MAAKhC,EAAqBa,qBA0ExCb,EAAA,OAnHsCiC,EAAAlC,EAASD,GA6C7CC,EAAAmC,UAAMC,OAAN,eAAAnC,EAqECE,KApEOkC,EAAAlC,KAAgCE,MAA9BC,EAAA+B,EAAO/B,QAAEC,EAAA8B,EAAsB9B,OAEhC,OACL+B,EAAAC,EAAAC,cAAA,WAAkBC,UAAc,eAC9BH,EAAAC,EAAAC,cAAA,MAAaC,UAAgB,iBAAWZ,OAAAC,EAAA,EAAAD,CAAmC,8BAAAS,EAAAC,EAAAC,cAAA,QAE5DC,UAAoB,oBAASC,SAAMvC,KAAqBqB,sBACzDlB,GACVgC,EAAAC,EAAAC,cAAA,OAAcC,UAAsB,uBAAWZ,OAAAC,EAAA,EAAAD,CAChD,gCAEMtB,KACKe,IAAC,SAAEP,EAAG4B,GAAK,OACnBL,EAAAC,EAAAC,cAAA,OAAQI,IAAGD,EAAWF,UAAqB,sBAG5C1B,KAEHuB,EAAAC,EAAAC,cAAA,OAAcC,UAAc,eAC1BH,EAAAC,EAAAC,cAAA,SAAcK,QAAe,gBACjBhB,OAAAC,EAAA,EAAAD,CAA2B,2BACrCS,EAAAC,EAAAC,cAAA,MAAaC,UAAY,aACnB,MAAAH,EAAAC,EAAAC,cAAA,SAEHM,IAAE,SAAIC,GAAI,OAAK9C,EAAYQ,YAAQsC,GAC1BC,aAAM,MAChBC,GAAe,eACbC,KAAe,eACXC,UAAM,EACVC,KAEF,cARJd,EAAAC,EAAAC,cAAA,OASYC,UAAc,eAC1BH,EAAAC,EAAAC,cAAA,SAAcK,QAAW,YACbhB,OAAAC,EAAA,EAAAD,CAA2B,2BACrCS,EAAAC,EAAAC,cAAA,MAAaC,UAAY,aACnB,MAAAH,EAAAC,EAAAC,cAAA,SAEHM,IAAE,SAAIC,GAAI,OAAK9C,EAASU,SAAQoC,GACvBC,aAAM,MAChBC,GAAW,WACTC,KAAW,WACPC,UAAM,EACVC,KAEF,cACNd,EAAAC,EAAAC,cAAA,OAAcC,UAAc,eAC1BH,EAAAC,EAAAC,cAAA,SAAcK,QAAwB,yBAC1BhB,OAAAC,EAAA,EAAAD,CAA+B,+BACzCS,EAAAC,EAAAC,cAAA,MAAaC,UAAY,aACnB,MAAAH,EAAAC,EAAAC,cAAA,SAEHM,IAAE,SAAIC,GAAI,OAAK9C,EAAqBW,qBAAQmC,GACnCC,aAAM,MAChBC,GAAwB,wBACtBC,KAAwB,wBACpBC,UAAM,EACVC,KAEF,cACNd,EAAAC,EAAAC,cAAA,OAAcC,UAAc,eAC1BH,EAAAC,EAAAC,cAAA,UAAUS,GAAkB,kBAAKG,KAAS,UAC9BvB,OAAAC,EAAA,EAAAD,CAMtB,mCACD7B,EAnHD,CAmHCqD,EAAA,qBC/Ga,SAAAC,EAAiCjB,OAAdL,EAAAK,EAAKL,MAC7B,OACLqB,EAAA,qBAAcZ,UAAc,eAC1BY,EAAA,wBAAcxB,OAAAC,EAAA,EAAAD,CAAsB,iBACpCwB,EAAA,qBAAcZ,UAAoB,qBAChCY,EAAA,qBAAcZ,UAA8C,+CAChDZ,OAAAC,EAAA,EAAAD,CACN,kCAENwB,EAAA,cAAUE,EAAA,GAAMvB,MAIxBA,iBCDAwB,EAAA,QAAA3B,OAAA4B,EAAA,QAAA5B,CAAuB,SAAKxB,GAAI,OAAOqB,KAAgBG,OAAA6B,EAAA,eAAA7B,CAAUxB,KAAjE,CAZA,SAAuBsB,GACb,IAAAD,EAAAC,EAAeD,KAEhB,OACLY,EAAAC,EAAAC,cAAA,OAAcC,UAAiC,kCAC7CH,EAAAC,EAAAC,cAAOmB,EAAApB,GAAMqB,MAAW/B,OAAAC,EAAA,EAAAD,CAA2B,yBACnDS,EAAAC,EAAAC,cAAOc,GAAMtB,MAAMN,EAAUM,QACxBN,EAAMmC,OAAIvB,EAAAC,EAAAC,cAASsB,GAAKpC,KAGnCA","file":"js/259.e2adeb8c.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport React, { Component } from 'react';\nimport { changePassword } from '../../../api/users';\nimport { translate } from '../../../helpers/l10n';\n\nexport default class Password extends Component {\n  state = {\n    success: false,\n    errors: null\n  };\n\n  handleSuccessfulChange = () => {\n    this.oldPassword.value = '';\n    this.password.value = '';\n    this.passwordConfirmation.value = '';\n    this.setState({ success: true, errors: null });\n  };\n\n  handleFailedChange = e => {\n    e.response.json().then(r => {\n      this.oldPassword.focus();\n      this.setErrors(r.errors.map(e => e.msg));\n    });\n  };\n\n  setErrors = errors => {\n    this.setState({\n      success: false,\n      errors\n    });\n  };\n\n  handleChangePassword = e => {\n    e.preventDefault();\n\n    const { user } = this.props;\n    const previousPassword = this.oldPassword.value;\n    const password = this.password.value;\n    const passwordConfirmation = this.passwordConfirmation.value;\n\n    if (password !== passwordConfirmation) {\n      this.password.focus();\n      this.setErrors([translate('user.password_doesnt_match_confirmation')]);\n    } else {\n      changePassword({ login: user.login, password, previousPassword })\n        .then(this.handleSuccessfulChange)\n        .catch(this.handleFailedChange);\n    }\n  };\n\n  render() {\n    const { success, errors } = this.state;\n\n    return (\n      <section className=\"boxed-group\">\n        <h2 className=\"spacer-bottom\">{translate('my_profile.password.title')}</h2>\n\n        <form className=\"boxed-group-inner\" onSubmit={this.handleChangePassword}>\n          {success && (\n            <div className=\"alert alert-success\">{translate('my_profile.password.changed')}</div>\n          )}\n\n          {errors &&\n            errors.map((e, i) => (\n              <div key={i} className=\"alert alert-danger\">\n                {e}\n              </div>\n            ))}\n\n          <div className=\"modal-field\">\n            <label htmlFor=\"old_password\">\n              {translate('my_profile.password.old')}\n              <em className=\"mandatory\">*</em>\n            </label>\n            <input\n              ref={elem => (this.oldPassword = elem)}\n              autoComplete=\"off\"\n              id=\"old_password\"\n              name=\"old_password\"\n              required={true}\n              type=\"password\"\n            />\n          </div>\n          <div className=\"modal-field\">\n            <label htmlFor=\"password\">\n              {translate('my_profile.password.new')}\n              <em className=\"mandatory\">*</em>\n            </label>\n            <input\n              ref={elem => (this.password = elem)}\n              autoComplete=\"off\"\n              id=\"password\"\n              name=\"password\"\n              required={true}\n              type=\"password\"\n            />\n          </div>\n          <div className=\"modal-field\">\n            <label htmlFor=\"password_confirmation\">\n              {translate('my_profile.password.confirm')}\n              <em className=\"mandatory\">*</em>\n            </label>\n            <input\n              ref={elem => (this.passwordConfirmation = elem)}\n              autoComplete=\"off\"\n              id=\"password_confirmation\"\n              name=\"password_confirmation\"\n              required={true}\n              type=\"password\"\n            />\n          </div>\n          <div className=\"modal-field\">\n            <button id=\"change-password\" type=\"submit\">\n              {translate('my_profile.password.submit')}\n            </button>\n          </div>\n        </form>\n      </section>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport TokenForm from '../../users/components/TokensForm';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  login: string;\n}\n\nexport default function Tokens({ login }: Props) {\n  return (\n    <div className=\"boxed-group\">\n      <h2>{translate('users.tokens')}</h2>\n      <div className=\"boxed-group-inner\">\n        <div className=\"big-spacer-bottom big-spacer-right markdown\">\n          {translate('my_account.tokens_description')}\n        </div>\n\n        <TokenForm login={login} />\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport React from 'react';\nimport Helmet from 'react-helmet';\nimport { connect } from 'react-redux';\nimport Password from './Password';\nimport Tokens from './Tokens';\nimport { translate } from '../../../helpers/l10n';\nimport { getCurrentUser } from '../../../store/rootReducer';\n\nfunction Security(props) {\n  const { user } = props;\n\n  return (\n    <div className=\"account-body account-container\">\n      <Helmet title={translate('my_account.security')} />\n      <Tokens login={user.login} />\n      {user.local && <Password user={user} />}\n    </div>\n  );\n}\n\nexport default connect(state => ({ user: getCurrentUser(state) }))(Security);\n"],"sourceRoot":""}