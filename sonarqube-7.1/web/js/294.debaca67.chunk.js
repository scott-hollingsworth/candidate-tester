(window.webpackJsonp=window.webpackJsonp||[]).push([[294],{1175:function(e,t,n){"use strict";n.r(t);var r,o=n(10),a=n(0),s=n(5),c=n(22),l=n.n(c),i=n(4),u=n(11),p=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleChange=function(e){return t.props.onChange(t.props.idx,e.currentTarget.value)},t.handleRemove=function(){return t.props.onRemove(t.props.idx)},t}return p(t,e),t.prototype.render=function(){return a.createElement("div",null,a.createElement("input",{maxLength:255,onChange:this.handleChange,type:"text",value:this.props.scmAccount}),a.createElement(u.c,{onClick:this.handleRemove}))},t}(a.PureComponent),d=n(88),h=n(13),f=n(20),g=n(1),y=n(3),E=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),b=function(e){function t(t){var n=e.call(this,t)||this;n.mounted=!1,n.handleError=function(e){return n.mounted&&[400,500].includes(e.response.status)?Object(y.parseError)(e).then(function(e){return n.setState({error:e,submitting:!1})},h.a):Object(h.a)(e)},n.handleEmailChange=function(e){return n.setState({email:e.currentTarget.value})},n.handleLoginChange=function(e){return n.setState({login:e.currentTarget.value})},n.handleNameChange=function(e){return n.setState({name:e.currentTarget.value})},n.handlePasswordChange=function(e){return n.setState({password:e.currentTarget.value})},n.handleCreateUser=function(e){e.preventDefault(),n.setState({submitting:!0}),Object(d.b)({email:n.state.email||void 0,login:n.state.login,name:n.state.name,password:n.state.password,scmAccount:Object(i.uniq)(n.state.scmAccounts)}).then(function(){n.props.onUpdateUsers(),n.props.onClose()},n.handleError)},n.handleUpdateUser=function(e){e.preventDefault(),n.setState({submitting:!0}),Object(d.j)({email:n.state.email,login:n.state.login,name:n.state.name,scmAccount:Object(i.uniq)(n.state.scmAccounts).join(",")}).then(function(){n.props.onUpdateUsers(),n.props.onClose()},n.handleError)},n.handleAddScmAccount=function(){n.setState(function(e){return{scmAccounts:e.scmAccounts.concat("")}})},n.handleUpdateScmAccount=function(e,t){return n.setState(function(n){var r=n.scmAccounts.slice();return r[e]=t,{scmAccounts:r}})},n.handleRemoveScmAccount=function(e){return n.setState(function(t){var n=t.scmAccounts;return{scmAccounts:n.slice(0,e).concat(n.slice(e+1))}})};var r=t.user;return n.state=r?{email:r.email||"",login:r.login,name:r.name,password:"",scmAccounts:r.scmAccounts||[],submitting:!1}:{email:"",login:"",name:"",password:"",scmAccounts:[],submitting:!1},n}return E(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this,t=this.props.user,n=this.state,r=n.error,o=n.submitting,s=t?Object(g.l)("users.update_user"):Object(g.l)("users.create_user");return a.createElement(f.a,{contentLabel:s,onRequestClose:this.props.onClose},a.createElement("form",{autoComplete:"off",id:"user-form",onSubmit:this.props.user?this.handleUpdateUser:this.handleCreateUser},a.createElement("header",{className:"modal-head"},a.createElement("h2",null,s)),a.createElement("div",{className:"modal-body"},r&&a.createElement("p",{className:"alert alert-danger"},r),!t&&a.createElement("div",{className:"modal-field"},a.createElement("label",{htmlFor:"create-user-login"},Object(g.l)("login"),a.createElement("em",{className:"mandatory"},"*")),a.createElement("input",{className:"hidden",name:"login-fake",type:"text"}),a.createElement("input",{autoFocus:!0,id:"create-user-login",maxLength:255,minLength:3,name:"login",onChange:this.handleLoginChange,required:!0,type:"text",value:this.state.login}),a.createElement("p",{className:"note"},Object(g.m)("users.minimum_x_characters",3))),a.createElement("div",{className:"modal-field"},a.createElement("label",{htmlFor:"create-user-name"},Object(g.l)("name"),a.createElement("em",{className:"mandatory"},"*")),a.createElement("input",{className:"hidden",name:"name-fake",type:"text"}),a.createElement("input",{autoFocus:!!t,id:"create-user-name",maxLength:200,name:"name",onChange:this.handleNameChange,required:!0,type:"text",value:this.state.name})),a.createElement("div",{className:"modal-field"},a.createElement("label",{htmlFor:"create-user-email"},Object(g.l)("users.email")),a.createElement("input",{className:"hidden",name:"email-fake",type:"email"}),a.createElement("input",{id:"create-user-email",maxLength:100,name:"email",onChange:this.handleEmailChange,type:"email",value:this.state.email})),!t&&a.createElement("div",{className:"modal-field"},a.createElement("label",{htmlFor:"create-user-password"},Object(g.l)("password"),a.createElement("em",{className:"mandatory"},"*")),a.createElement("input",{className:"hidden",name:"password-fake",type:"password"}),a.createElement("input",{id:"create-user-password",maxLength:50,name:"password",onChange:this.handlePasswordChange,required:!0,type:"password",value:this.state.password})),a.createElement("div",{className:"modal-field"},a.createElement("label",null,Object(g.l)("my_profile.scm_accounts")),this.state.scmAccounts.map(function(t,n){return a.createElement(m,{idx:n,key:n,onChange:e.handleUpdateScmAccount,onRemove:e.handleRemoveScmAccount,scmAccount:t})}),a.createElement("div",{className:"spacer-bottom"},a.createElement(u.a,{onClick:this.handleAddScmAccount,type:"reset"},Object(g.l)("add_verb"))),a.createElement("p",{className:"note"},Object(g.l)("user.login_or_email_used_as_scm_account")))),a.createElement("footer",{className:"modal-foot"},o&&a.createElement("i",{className:"spinner spacer-right"}),a.createElement(u.f,{className:"js-confirm",disabled:o},t?Object(g.l)("update_verb"):Object(g.l)("create")),a.createElement(u.e,{className:"js-modal-close",onClick:this.props.onClose},Object(g.l)("cancel")))))},t}(a.PureComponent),v=n(32),O=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={openUserForm:!1},t.handleOpenUserForm=function(){t.setState({openUserForm:!0})},t.handleCloseUserForm=function(){t.setState({openUserForm:!1})},t}return O(t,e),t.prototype.render=function(){return a.createElement("header",{className:"page-header",id:"users-header"},a.createElement("h1",{className:"page-title"},Object(g.l)("users.page")),a.createElement(v.a,{loading:this.props.loading}),a.createElement("div",{className:"page-actions"},a.createElement(u.a,{id:"users-create",onClick:this.handleOpenUserForm},Object(g.l)("users.create_user"))),a.createElement("p",{className:"page-description"},Object(g.l)("users.page.description")),this.state.openUserForm&&a.createElement(b,{onClose:this.handleCloseUserForm,onUpdateUsers:this.props.onUpdateUsers}))},t}(a.PureComponent),w=n(47),C=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleSearch=function(e){t.props.updateQuery({search:e})},t}return C(t,e),t.prototype.render=function(){var e=this.props.query;return a.createElement("div",{id:"users-search",className:"panel panel-vertical bordered-bottom spacer-bottom"},a.createElement(w.a,{minLength:2,onChange:this.handleSearch,placeholder:Object(g.l)("search.search_by_login_or_name"),value:e.search}))},t}(a.PureComponent),N=n(1086),P=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCloseClick=function(e){e.preventDefault(),t.props.onClose()},t}return P(t,e),t.prototype.render=function(){var e=Object(g.l)("users.tokens");return a.createElement(f.a,{contentLabel:e,onRequestClose:this.props.onClose},a.createElement("header",{className:"modal-head"},a.createElement("h2",null,e)),a.createElement("div",{className:"modal-body modal-container"},a.createElement(N.a,{login:this.props.user.login,updateTokensCount:this.props.updateTokensCount})),a.createElement("footer",{className:"modal-foot"},a.createElement("a",{className:"js-modal-close",href:"#",onClick:this.handleCloseClick},Object(g.l)("Done"))))},t}(a.PureComponent),S=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={submitting:!1},t.handleDeactivate=function(e){e.preventDefault(),t.setState({submitting:!0}),Object(d.c)({login:t.props.user.login}).then(function(){t.props.onUpdateUsers(),t.props.onClose()},function(){t.mounted&&t.setState({submitting:!1})})},t}return S(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props.user,t=this.state.submitting,n=Object(g.l)("users.deactivate_user");return a.createElement(f.a,{contentLabel:n,onRequestClose:this.props.onClose},a.createElement("form",{autoComplete:"off",id:"deactivate-user-form",onSubmit:this.handleDeactivate},a.createElement("header",{className:"modal-head"},a.createElement("h2",null,n)),a.createElement("div",{className:"modal-body"},Object(g.m)("users.deactivate_user.confirmation",e.name,e.login)),a.createElement("footer",{className:"modal-foot"},t&&a.createElement("i",{className:"spinner spacer-right"}),a.createElement(u.f,{className:"js-confirm button-red",disabled:t},Object(g.l)("users.deactivate")),a.createElement(u.e,{className:"js-modal-close",onClick:this.props.onClose},Object(g.l)("cancel")))))},t}(a.PureComponent),F=n(264),A=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={confirmPassword:"",newPassword:"",oldPassword:"",submitting:!1},t.handleError=function(e){return t.mounted&&400===e.response.status?Object(y.parseError)(e).then(function(e){return t.setState({error:e,submitting:!1})},h.a):Object(h.a)(e)},t.handleConfirmPasswordChange=function(e){return t.setState({confirmPassword:e.currentTarget.value})},t.handleNewPasswordChange=function(e){return t.setState({newPassword:e.currentTarget.value})},t.handleOldPasswordChange=function(e){return t.setState({oldPassword:e.currentTarget.value})},t.handleChangePassword=function(e){e.preventDefault(),t.state.newPassword.length>0&&t.state.newPassword===t.state.confirmPassword&&(t.setState({submitting:!0}),Object(d.a)({login:t.props.user.login,password:t.state.newPassword,previousPassword:t.state.oldPassword}).then(function(){Object(F.a)(Object(g.l)("my_profile.password.changed")),t.props.onClose()},t.handleError))},t}return A(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.state,t=e.error,n=e.submitting,r=e.newPassword,o=e.confirmPassword,s=Object(g.l)("my_profile.password.title");return a.createElement(f.a,{contentLabel:s,onRequestClose:this.props.onClose},a.createElement("form",{autoComplete:"off",id:"user-password-form",onSubmit:this.handleChangePassword},a.createElement("header",{className:"modal-head"},a.createElement("h2",null,s)),a.createElement("div",{className:"modal-body"},t&&a.createElement("p",{className:"alert alert-danger"},t),this.props.isCurrentUser&&a.createElement("div",{className:"modal-field"},a.createElement("label",{htmlFor:"old-user-password"},Object(g.l)("my_profile.password.old"),a.createElement("em",{className:"mandatory"},"*")),a.createElement("input",{className:"hidden",name:"old-password-fake",type:"password"}),a.createElement("input",{id:"old-user-password",maxLength:50,name:"old-password",onChange:this.handleOldPasswordChange,required:!0,type:"password",value:this.state.oldPassword})),a.createElement("div",{className:"modal-field"},a.createElement("label",{htmlFor:"user-password"},Object(g.l)("my_profile.password.new"),a.createElement("em",{className:"mandatory"},"*")),a.createElement("input",{className:"hidden",name:"password-fake",type:"password"}),a.createElement("input",{id:"user-password",maxLength:50,name:"password",onChange:this.handleNewPasswordChange,required:!0,type:"password",value:this.state.newPassword})),a.createElement("div",{className:"modal-field"},a.createElement("label",{htmlFor:"confirm-user-password"},Object(g.l)("my_profile.password.confirm"),a.createElement("em",{className:"mandatory"},"*")),a.createElement("input",{className:"hidden",name:"confirm-password-fake",type:"password"}),a.createElement("input",{id:"confirm-user-password",maxLength:50,name:"confirm-password",onChange:this.handleConfirmPasswordChange,required:!0,type:"password",value:this.state.confirmPassword}))),a.createElement("footer",{className:"modal-foot"},n&&a.createElement("i",{className:"spinner spacer-right"}),a.createElement(u.f,{className:"js-confirm",disabled:n||!r||r!==o},Object(g.l)("change_verb")),a.createElement(u.e,{className:"js-modal-close",onClick:this.props.onClose},Object(g.l)("cancel")))))},t}(a.PureComponent),T=n(31),q=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.handleOpenDeactivateForm=function(){return t.setState({openForm:"deactivate"})},t.handleOpenPasswordForm=function(){return t.setState({openForm:"password"})},t.handleOpenUpdateForm=function(){return t.setState({openForm:"update"})},t.handleCloseForm=function(){return t.setState({openForm:void 0})},t.renderActions=function(){var e=t.props.user;return a.createElement(T.c,{menuClassName:"dropdown-menu-right"},a.createElement(T.b,{className:"js-user-update",onClick:t.handleOpenUpdateForm},Object(g.l)("update_details")),e.local&&a.createElement(T.b,{className:"js-user-change-password",onClick:t.handleOpenPasswordForm},Object(g.l)("my_profile.password.title")),a.createElement(T.a,null),a.createElement(T.b,{className:"js-user-deactivate",destructive:!0,onClick:t.handleOpenDeactivateForm},Object(g.l)("users.deactivate")))},t}return q(t,e),t.prototype.render=function(){var e=this.state.openForm,t=this.props,n=t.isCurrentUser,r=t.onUpdateUsers,o=t.user;return a.createElement(a.Fragment,null,this.renderActions(),"deactivate"===e&&a.createElement(k,{onClose:this.handleCloseForm,onUpdateUsers:r,user:o}),"password"===e&&a.createElement(x,{isCurrentUser:n,onClose:this.handleCloseForm,user:o}),"update"===e&&a.createElement(b,{onClose:this.handleCloseForm,onUpdateUsers:r,user:o}))},t}(a.PureComponent),M=n(131),D=n(52),R=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={error:"",groups:[],selectedGroups:[]},t.handleSearch=function(e,n){return Object(d.f)(t.props.user.login,void 0,e,n).then(function(e){t.setState({groups:e.groups,selectedGroups:e.groups.filter(function(e){return e.selected}).map(function(e){return e.name})})})},t.handleSelect=function(e){return Object(D.a)({name:e,login:t.props.user.login}).then(function(){t.setState(function(t){return{selectedGroups:t.selectedGroups.concat([e])}})})},t.handleUnselect=function(e){return Object(D.e)({name:e,login:t.props.user.login}).then(function(){t.setState(function(t){return{selectedGroups:Object(i.without)(t.selectedGroups,e)}})})},t.handleCloseClick=function(e){e.preventDefault(),t.handleClose()},t.handleClose=function(){t.props.onUpdateUsers(),t.props.onClose()},t.renderElement=function(e){var n=Object(i.find)(t.state.groups,{name:e});return a.createElement("div",{className:"select-list-list-item"},void 0===n?e:a.createElement(a.Fragment,null,n.name,a.createElement("br",null),a.createElement("span",{className:"note"},n.description)))},t}return R(t,e),t.prototype.componentDidMount=function(){this.handleSearch("",M.a.Selected)},t.prototype.render=function(){var e=Object(g.l)("users.update_groups");return a.createElement(f.a,{contentLabel:e,onRequestClose:this.handleClose},a.createElement("div",{className:"modal-head"},a.createElement("h2",null,e)),a.createElement("div",{className:"modal-body"},""!==this.state.error&&a.createElement("div",{className:"alert alert-danger"},a.createElement("p",null,this.state.error)),a.createElement(M.b,{elements:this.state.groups.map(function(e){return e.name}),onSearch:this.handleSearch,onSelect:this.handleSelect,onUnselect:this.handleUnselect,renderElement:this.renderElement,selectedElements:this.state.selectedGroups})),a.createElement("footer",{className:"modal-foot"},a.createElement("a",{className:"js-modal-close",href:"#",onClick:this.handleCloseClick},Object(g.l)("Done"))))},t}(a.PureComponent),G=n(258),I=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),W=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={openForm:!1,showMore:!1},t.handleOpenForm=function(){return t.setState({openForm:!0})},t.handleCloseForm=function(){return t.setState({openForm:!1})},t.toggleShowMore=function(e){e.preventDefault(),t.setState(function(e){return{showMore:!e.showMore}})},t}return I(t,e),t.prototype.render=function(){var e=this.props.groups,t=e.length>3?2:3;return a.createElement("ul",null,e.slice(0,t).map(function(e){return a.createElement("li",{key:e,className:"little-spacer-bottom"},e)}),e.length>3&&this.state.showMore&&e.slice(t).map(function(e){return a.createElement("li",{key:e,className:"little-spacer-bottom"},e)}),a.createElement("li",{className:"little-spacer-bottom"},e.length>3&&!this.state.showMore&&a.createElement("a",{className:"js-user-more-groups spacer-right",href:"#",onClick:this.toggleShowMore},Object(g.m)("more_x",e.length-t)),a.createElement(u.b,{className:"js-user-groups button-small",onClick:this.handleOpenForm,tooltip:Object(g.l)("users.update_groups")},a.createElement(G.a,null))),this.state.openForm&&a.createElement(z,{onClose:this.handleCloseForm,onUpdateUsers:this.props.onUpdateUsers,user:this.props.user}))},t}(a.PureComponent),Q=n(15),J=n(188),B=n(38);function H(e){var t=e.identityProvider,n=e.user;return a.createElement("td",null,a.createElement("div",null,a.createElement("strong",{className:"js-user-name"},n.name),a.createElement("span",{className:"js-user-login note little-spacer-left"},n.login)),n.email&&a.createElement("div",{className:"js-user-email little-spacer-top"},n.email),!n.local&&"sonarqube"!==n.externalProvider&&a.createElement(K,{identityProvider:t,user:n}))}function K(e){var t=e.identityProvider,n=e.user;return t?a.createElement("div",{className:"js-user-identity-provider little-spacer-top"},a.createElement("div",{className:"identity-provider",style:{"background-color":t.backgroundColor,color:Object(J.a)(t.backgroundColor,Q.secondFontColor)}},a.createElement("img",{alt:t.name,className:"little-spacer-right",src:Object(B.b)()+t.iconPath,width:"14",height:"14"}),n.externalIdentity)):a.createElement("div",{className:"js-user-identity-provider little-spacer-top"},a.createElement("span",null,n.externalProvider,": ",n.externalIdentity))}var V=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showMore:!1},t.toggleShowMore=function(e){e.preventDefault(),t.setState(function(e){return{showMore:!e.showMore}})},t}return V(t,e),t.prototype.render=function(){var e=this.props.scmAccounts,t=e.length>3?2:3;return a.createElement("ul",null,e.slice(0,t).map(function(e,t){return a.createElement("li",{key:t,className:"little-spacer-bottom"},e)}),e.length>3&&(this.state.showMore?e.slice(t).map(function(e,n){return a.createElement("li",{key:n+t,className:"little-spacer-bottom"},e)}):a.createElement("li",{className:"little-spacer-bottom"},a.createElement("a",{className:"js-user-more-scm",href:"#",onClick:this.toggleShowMore},Object(g.m)("more_x",e.length-t)))))},t}(a.PureComponent),Y=n(70),Z=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={openTokenForm:!1},t.handleOpenTokensForm=function(){return t.setState({openTokenForm:!0})},t.handleCloseTokensForm=function(){return t.setState({openTokenForm:!1})},t}return Z(t,e),t.prototype.render=function(){var e=this.props,t=e.identityProvider,n=e.onUpdateUsers,r=e.organizationsEnabled,o=e.user;return a.createElement("tr",null,a.createElement("td",{className:"thin nowrap"},a.createElement(Y.a,{hash:o.avatar,name:o.name,size:36})),a.createElement(H,{identityProvider:t,user:o}),a.createElement("td",null,a.createElement(X,{scmAccounts:o.scmAccounts||[]})),!r&&a.createElement("td",null,a.createElement(W,{groups:o.groups||[],user:o,onUpdateUsers:n})),a.createElement("td",null,o.tokensCount,a.createElement(u.b,{className:"js-user-tokens spacer-left button-small",onClick:this.handleOpenTokensForm,tooltip:Object(g.l)("users.update_tokens")},a.createElement(G.a,null))),a.createElement("td",{className:"thin nowrap text-right"},a.createElement(L,{isCurrentUser:this.props.isCurrentUser,onUpdateUsers:n,user:o})),this.state.openTokenForm&&a.createElement(U,{user:o,onClose:this.handleCloseTokensForm,updateTokensCount:this.props.updateTokensCount}))},t}(a.PureComponent);function ee(e){var t=e.currentUser,n=e.identityProviders,r=e.onUpdateUsers,o=e.organizationsEnabled,s=e.updateTokensCount,c=e.users;return a.createElement("div",{className:"boxed-group boxed-group-inner"},a.createElement("table",{id:"users-list",className:"data zebra"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null),a.createElement("th",{className:"nowrap"}),a.createElement("th",{className:"nowrap"},Object(g.l)("my_profile.scm_accounts")),!o&&a.createElement("th",{className:"nowrap"},Object(g.l)("my_profile.groups")),a.createElement("th",{className:"nowrap"},Object(g.l)("users.tokens")),a.createElement("th",{className:"nowrap"}," "))),a.createElement("tbody",null,c.map(function(e){return a.createElement($,{identityProvider:n.find(function(t){return e.externalProvider===t.key}),isCurrentUser:t.isLoggedIn&&t.login===e.login,key:e.login,onUpdateUsers:r,organizationsEnabled:o,updateTokensCount:s,user:e})}))))}var te=n(8),ne=Object(i.memoize)(function(e){return{search:Object(te.h)(e.search)}}),re=Object(i.memoize)(function(e){return Object(te.a)({search:e.search?Object(te.m)(e.search):void 0})}),oe=n(78),ae=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),se=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={identityProviders:[],loading:!0,users:[]},t.finishLoading=function(){t.mounted&&t.setState({loading:!1})},t.fetchIdentityProviders=function(){return Object(d.e)().then(function(e){var n=e.identityProviders;t.mounted&&t.setState({identityProviders:n})},function(){})},t.fetchUsers=function(e){var n=(void 0===e?t.props:e).location;t.setState({loading:!0}),Object(d.g)({q:ne(n.query).search}).then(function(e){var n=e.paging,r=e.users;t.mounted&&t.setState({loading:!1,paging:n,users:r})},t.finishLoading)},t.fetchMoreUsers=function(){var e=t.state.paging;e&&(t.setState({loading:!0}),Object(d.g)({p:e.pageIndex+1,q:ne(t.props.location.query).search}).then(function(e){var n=e.paging,r=e.users;t.mounted&&t.setState(function(e){return{loading:!1,users:e.users.concat(r),paging:n}})},t.finishLoading))},t.updateQuery=function(e){var n=re(se({},ne(t.props.location.query),e));t.context.router.push(se({},t.props.location,{query:n}))},t.updateTokensCount=function(e,n){t.setState(function(t){return{users:t.users.map(function(t){return t.login===e?se({},t,{tokensCount:n}):t})}})},t}return ae(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.fetchIdentityProviders(),this.fetchUsers()},t.prototype.componentWillReceiveProps=function(e){e.location.query.search!==this.props.location.query.search&&this.fetchUsers(e)},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=ne(this.props.location.query),t=this.state,n=t.loading,r=t.paging,o=t.users;return a.createElement("div",{id:"users-page",className:"page page-limited"},a.createElement(l.a,{title:Object(g.l)("users.page")}),a.createElement(_,{loading:n,onUpdateUsers:this.fetchUsers}),a.createElement(j,{query:e,updateQuery:this.updateQuery}),a.createElement(ee,{currentUser:this.props.currentUser,identityProviders:this.state.identityProviders,onUpdateUsers:this.fetchUsers,organizationsEnabled:this.props.organizationsEnabled,updateTokensCount:this.updateTokensCount,users:o}),void 0!==r&&a.createElement(oe.a,{count:o.length,total:r.total,ready:!n,loadMore:this.fetchMoreUsers}))},t.contextTypes={router:s.object.isRequired},t}(a.PureComponent),le=n(7);t.default=Object(o.connect)(function(e){return{currentUser:Object(le.getCurrentUser)(e),organizationsEnabled:Object(le.areThereCustomOrganizations)(e)}})(ce)}}]);
//# sourceMappingURL=294.debaca67.chunk.js.map