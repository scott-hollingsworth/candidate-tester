{"version":3,"sources":["webpack:///./src/main/js/apps/component/components/App.tsx"],"names":["App","_super","_this","apply","this","arguments","scrollToLine","line","props","location","query","row","document","querySelector","rect","getBoundingClientRect","topOffset","window","innerHeight","goal","top","scrollTo","__extends","prototype","render","_a","branch","id","pullRequest","finalLine","Number","undefined","fakeBranchLike","isMain","mergeBranch","name","type","_app_types__WEBPACK_IMPORTED_MODULE_1__","SHORT","base","key","title","react__WEBPACK_IMPORTED_MODULE_0__","className","_components_SourceViewer_SourceViewer__WEBPACK_IMPORTED_MODULE_2__","aroundLine","branchLike","component","highlightedLine","onLoaded"],"mappings":"yZAkCAA,EAAA,SAAAC,GAAA,SAAAD,IAAA,IAAAE,EAAA,OAAAD,KAAAE,MAAAC,KAAAC,YA8CCD,YA7CCF,EAAYI,aAAG,WACL,IAAAC,EAAAL,EAAAM,MAAAC,SAAAC,MAAmCH,KAC3C,GAAQA,EAAE,CACR,IAASI,EAAWC,SAAcC,cAAC,kCAAsCN,EAAM,MAC/E,GAAOI,EAAE,CACP,IAAUG,EAAMH,EAAyBI,wBAC1BC,EAASC,OAAYC,YAAI,EAAM,GACpCC,EAAOL,EAAIM,IAAaJ,EAC5BC,OAASI,SAAE,EAAQF,MAqCjCjB,EAAA,OA9CiCoB,EAAAtB,EAA0BC,GAczDD,EAAAuB,UAAMC,OAAN,WACQ,IAAAC,EAAArB,KAAAI,MAAAC,SAA6DC,MAA3DgB,EAAAD,EAAMC,OAAEC,EAAAF,EAAEE,GAAEpB,EAAAkB,EAAIlB,KAAEqB,EAAAH,EAA0CG,YAErDC,EAAStB,EAAOuB,OAAQvB,QAAWwB,EAKhCC,OAA0DD,EAYrE,OAXGL,EACMM,GACNC,QAAO,EACFC,YAAI,GACXC,KAAQT,EACRU,KAAYC,EAAA,EACKC,OACHV,IACNI,GAASO,KAAI,GAAQb,OAAI,GAAKc,IAAaZ,EAAOa,MAAsB,KAItFC,EAAA,qBAAcC,UAAoB,qBAChCD,EAAA,cAAaE,EAAA,GACDC,WAAWhB,EACXiB,WAAgBd,EACjBe,UAAIpB,EACEqB,gBAAWnB,EAClBoB,SAAM7C,KAItBE,iBACDN,EA9CD,CAAsC0C,EAAA","file":"js/265.cb406da2.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { PullRequest, BranchType, ShortLivingBranch } from '../../../app/types';\nimport SourceViewer from '../../../components/SourceViewer/SourceViewer';\n\ninterface Props {\n  location: {\n    query: {\n      branch?: string;\n      id: string;\n      line?: string;\n      pullRequest?: string;\n    };\n  };\n}\n\nexport default class App extends React.PureComponent<Props> {\n  scrollToLine = () => {\n    const { line } = this.props.location.query;\n    if (line) {\n      const row = document.querySelector(`.source-line[data-line-number=\"${line}\"]`);\n      if (row) {\n        const rect = row.getBoundingClientRect();\n        const topOffset = window.innerHeight / 2 - 60;\n        const goal = rect.top - topOffset;\n        window.scrollTo(0, goal);\n      }\n    }\n  };\n\n  render() {\n    const { branch, id, line, pullRequest } = this.props.location.query;\n\n    const finalLine = line ? Number(line) : undefined;\n\n    // TODO find a way to avoid creating this fakeBranchLike\n    // probably the best way would be to drop this page completely\n    // and redirect to the Code page\n    let fakeBranchLike: ShortLivingBranch | PullRequest | undefined = undefined;\n    if (branch) {\n      fakeBranchLike = {\n        isMain: false,\n        mergeBranch: '',\n        name: branch,\n        type: BranchType.SHORT\n      } as ShortLivingBranch;\n    } else if (pullRequest) {\n      fakeBranchLike = { base: '', branch: '', key: pullRequest, title: '' } as PullRequest;\n    }\n\n    return (\n      <div className=\"page page-limited\">\n        <SourceViewer\n          aroundLine={finalLine}\n          branchLike={fakeBranchLike}\n          component={id}\n          highlightedLine={finalLine}\n          onLoaded={this.scrollToLine}\n        />\n      </div>\n    );\n  }\n}\n"],"sourceRoot":""}