{"version":3,"sources":["webpack:///./src/main/js/apps/marketplace/Header.tsx","webpack:///./src/main/js/apps/marketplace/components/EditionBoxBadge.tsx","webpack:///./src/main/js/apps/marketplace/components/EditionBox.tsx","webpack:///./src/main/js/apps/marketplace/components/LicenseEditionForm.tsx","webpack:///./src/main/js/apps/marketplace/components/UninstallEditionForm.tsx","webpack:///./src/main/js/apps/marketplace/utils.ts","webpack:///./src/main/js/apps/marketplace/EditionBoxes.tsx","webpack:///./src/main/js/apps/marketplace/Footer.tsx","webpack:///./src/main/js/apps/marketplace/components/PluginChangeLogItem.tsx","webpack:///./src/main/js/apps/marketplace/components/PluginChangeLog.tsx","webpack:///./src/main/js/apps/marketplace/components/PluginChangeLogButton.tsx","webpack:///./src/main/js/apps/marketplace/components/PluginDescription.tsx","webpack:///./src/main/js/apps/marketplace/components/PluginLicense.tsx","webpack:///./src/main/js/apps/marketplace/components/PluginOrganization.tsx","webpack:///./src/main/js/apps/marketplace/components/PluginUpdateButton.tsx","webpack:///./src/main/js/apps/marketplace/components/PluginActions.tsx","webpack:///./src/main/js/apps/marketplace/components/PluginStatus.tsx","webpack:///./src/main/js/apps/marketplace/components/PluginUrls.tsx","webpack:///./src/main/js/apps/marketplace/components/PluginAvailable.tsx","webpack:///./src/main/js/apps/marketplace/components/PluginUpdateItem.tsx","webpack:///./src/main/js/apps/marketplace/components/PluginUpdates.tsx","webpack:///./src/main/js/apps/marketplace/components/PluginInstalled.tsx","webpack:///./src/main/js/apps/marketplace/PluginsList.tsx","webpack:///./src/main/js/apps/marketplace/Search.tsx","webpack:///./src/main/js/apps/marketplace/App.tsx","webpack:///./src/main/js/apps/marketplace/AppContainer.tsx","webpack:///./src/main/js/components/common/BubblePopup.tsx","webpack:///./src/main/js/components/common/BubblePopupHelper.tsx"],"names":["Header_Header","index_js_exposed","id","className","Object","l10n","EditionBoxBadge_EditionBoxBadge","_a","editionKey","status","isInstalled","currentEditionKey","isProgressing","nextEditionKey","includes","installationStatus","CheckIcon","size","_super","EditionBox","_this","apply","this","arguments","handleAction","props","onAction","edition","EditionBox_extends","prototype","render","disableAction","displayAction","editionStatus","key","name","textDescription","href","homeUrl","target","buttons","disabled","onClick","actionLabel","LicenseEditionForm","mounted","state","license","submitting","handleLicenseChange","setState","handleConfirmClick","marketplace","then","updateEditionStatus","onClose","LicenseEditionForm_extends","componentDidMount","componentWillUnmount","isDowngrade","_b","header","Modal","contentLabel","onRequestClose","LicenseEditionSet","editions","updateLicense","UninstallEditionForm","loading","UninstallEditionForm_assign","undefined","catch","UninstallEditionForm_extends","currentEdition","utils_isPluginAvailable","plugin","release","utils_isPluginInstalled","version","utils_isPluginPending","updatedAt","utils_EDITIONS_ORDER","utils_parseQuery","lodash_js_exposed","urlQuery","filter","helpers_query","search","utils_serializeQuery","query","EditionBoxes","openUninstallForm","handleOpenLicenseForm","installEdition","handleCloseLicenseForm","handleOpenUninstallForm","handleCloseUninstallForm","EditionBoxes_extends","renderForms","sortedEditions","installedIdx","canInstall","canUninstall","installEditionIdx","findIndex","components_LicenseEditionForm","components_UninstallEditionForm","find","index_es","defaultMessage","values","url","indexOf","utils_sortEditions","inProgressStatus","nextIdx","currentIdx","components_EditionBox","slice","map","idx","Footer_Footer","total","PluginChangeLogItem_PluginChangeLogItem","update","Tooltip","overlay","DateFormatter","date","changeLogUrl","description","PluginChangeLog_PluginChangeLog","popupPosition","BubblePopup","position","customClass","previousUpdates","previousUpdate","PluginChangeLogButton","changelogOpen","toggleChangelog","show","handleClick","PluginChangeLogButton_extends","BubblePopupHelper","isOpen","popup","togglePopup","components_PluginDescription","category","PluginLicense_PluginLicense","PluginOrganization_PluginOrganization","organizationName","organization","organizationUrl","PluginUpdateButton","PluginUpdateButton_extends","PluginActions","acceptTerms","doPluginAction","apiAction","refreshPending","handleInstall","api_plugins","handleUpdate","handleUninstall","handleTermsCheck","checked","PluginActions_extends","renderBundled","homepageUrl","updates","length","components_PluginUpdateButton","editionBundled","termsAndConditionsUrl","Checkbox","onCheck","htmlFor","PluginStatus_PluginStatus","components_PluginActions","PluginUrls_PluginUrls","issueTrackerUrl","PluginAvailable_PluginAvailable","readOnly","components_PluginChangeLogButton","requires","requiredPlugin","join","PluginUpdateItem","handleChangelogClick","event","preventDefault","stopPropagation","PluginUpdateItem_extends","PluginUpdates_PluginUpdates","components_PluginUpdateItem","PluginInstalled_PluginInstalled","PluginsList","getPluginStatus","pending","installing","updating","removing","p","renderPlugin","PluginsList_extends","plugins","Search","handleSearch","updateQuery","handleFilterChange","Search_extends","updateCenterActive","radioOptions","label","value","tooltip","RadioToggle","options","SearchBox","onChange","placeholder","App","call","fetchQueryPlugins","location","fetchFunction","fetchAllPlugins","loadingPlugins","stopLoadingPlugins","Promise","all","installed","available","concat","newQuery","App_assign","context","router","push","pathname","App_extends","fetchPendingPlugins","componentDidUpdate","prevProps","standaloneMode","pendingPlugins","filteredPlugins","s","toLowerCase","utils_filterPlugins","Helmet_default","a","title","marketplace_EditionBoxes","editionsReadOnly","loadingEditions","setEditionStatus","marketplace_Search","marketplace_PluginsList","contextTypes","prop_types","isRequired","AppContainer_mapDispatchToProps","actions","__webpack_exports__","es","rootReducer","standalone","marketplace_App","popupClass","classnames__WEBPACK_IMPORTED_MODULE_1__","popupStyle","__assign","react__WEBPACK_IMPORTED_MODULE_0__","style","children","top","right","handleKey","keyCode","handleOutsideClick","popupContainer","contains","__extends","getPosition","componentWillReceiveProps","nextProps","window","addEventListener","removeEventListener","container","containerPos","getBoundingClientRect","offset","vertical","horizontal","height","left","ref","role","tabIndex"],"mappings":"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","file":"js/269.0d28fa9d.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../helpers/l10n';\n\nexport default function Header() {\n  return (\n    <header id=\"marketplace-header\" className=\"page-header\">\n      <h1 className=\"page-title\">{translate('marketplace.page')}</h1>\n      <p className=\"page-description\">{translate('marketplace.page.description')}</p>\n    </header>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport CheckIcon from '../../../components/icons-components/CheckIcon';\nimport { EditionStatus } from '../../../api/marketplace';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  editionKey: string;\n  status: EditionStatus;\n}\n\nexport default function EditionBoxBadge({ editionKey, status }: Props) {\n  const isInstalled =\n    status.currentEditionKey === editionKey ||\n    (!status.currentEditionKey && editionKey === 'community');\n  const isProgressing =\n    status.nextEditionKey === editionKey || (!status.nextEditionKey && editionKey === 'community');\n  const inProgressStatus = [\n    'AUTOMATIC_READY',\n    'AUTOMATIC_IN_PROGRESS',\n    'UNINSTALL_IN_PROGRESS'\n  ].includes(status.installationStatus);\n\n  if (inProgressStatus) {\n    if (isProgressing) {\n      return (\n        <span className=\"marketplace-edition-badge badge badge-normal-size\">\n          {status.installationStatus === 'AUTOMATIC_IN_PROGRESS'\n            ? translate('marketplace.installing')\n            : translate('marketplace.pending')}\n        </span>\n      );\n    }\n  } else if (isInstalled) {\n    return (\n      <span className=\"marketplace-edition-badge badge badge-normal-size display-flex-center\">\n        <CheckIcon size={14} className=\"little-spacer-right\" />\n        {translate('marketplace.installed')}\n      </span>\n    );\n  }\n\n  return null;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport EditionBoxBadge from './EditionBoxBadge';\nimport { Edition, EditionStatus } from '../../../api/marketplace';\nimport { Button } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  actionLabel: string;\n  disableAction: boolean;\n  displayAction: boolean;\n  edition: Edition;\n  editionStatus?: EditionStatus;\n  onAction: (edition: Edition) => void;\n}\n\nexport default class EditionBox extends React.PureComponent<Props> {\n  handleAction = () => {\n    this.props.onAction(this.props.edition);\n  };\n\n  render() {\n    const { disableAction, displayAction, edition, editionStatus } = this.props;\n    return (\n      <div className=\"boxed-group boxed-group-inner marketplace-edition\">\n        {editionStatus && <EditionBoxBadge editionKey={edition.key} status={editionStatus} />}\n        <div>\n          <h3 className=\"spacer-bottom\">{edition.name}</h3>\n          <p>{edition.textDescription}</p>\n        </div>\n        <div className=\"marketplace-edition-action spacer-top\">\n          <a href={edition.homeUrl} target=\"_blank\">\n            {translate('marketplace.learn_more')}\n          </a>\n          {displayAction && (\n            <Button disabled={disableAction} onClick={this.handleAction}>\n              {this.props.actionLabel}\n            </Button>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport LicenseEditionSet from './LicenseEditionSet';\nimport { Edition, EditionStatus, applyLicense } from '../../../api/marketplace';\nimport Modal from '../../../components/controls/Modal';\nimport { Button, ResetButtonLink } from '../../../components/ui/buttons';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n\nexport interface Props {\n  edition: Edition;\n  editions: Edition[];\n  isDowngrade: boolean;\n  onClose: () => void;\n  updateEditionStatus: (editionStatus: EditionStatus) => void;\n}\n\ninterface State {\n  license: string;\n  status?: string;\n  submitting: boolean;\n}\n\nexport default class LicenseEditionForm extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { license: '', submitting: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleLicenseChange = (license: string, status?: string) => {\n    if (this.mounted) {\n      this.setState({ license, status });\n    }\n  };\n\n  handleConfirmClick = () => {\n    const { license, status } = this.state;\n    if (license && status) {\n      this.setState({ submitting: true });\n      applyLicense({ license }).then(\n        editionStatus => {\n          this.props.updateEditionStatus(editionStatus);\n          this.props.onClose();\n        },\n        () => {\n          if (this.mounted) {\n            this.setState({ submitting: false });\n          }\n        }\n      );\n    }\n  };\n\n  render() {\n    const { edition, isDowngrade } = this.props;\n    const { license, submitting, status } = this.state;\n\n    const header = isDowngrade\n      ? translateWithParameters('marketplace.downgrade_to_x', edition.name)\n      : translateWithParameters('marketplace.upgrade_to_x', edition.name);\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n\n        <LicenseEditionSet\n          className=\"modal-body\"\n          edition={edition}\n          editions={this.props.editions}\n          updateLicense={this.handleLicenseChange}\n        />\n\n        <footer className=\"modal-foot\">\n          {submitting && <i className=\"spinner spacer-right\" />}\n          {status && (\n            <Button\n              className=\"js-confirm\"\n              disabled={!license || submitting}\n              onClick={this.handleConfirmClick}>\n              {status === 'AUTOMATIC_INSTALL'\n                ? translate('marketplace.install')\n                : translate('save')}\n            </Button>\n          )}\n          <ResetButtonLink onClick={this.props.onClose}>{translate('cancel')}</ResetButtonLink>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Edition, EditionStatus, uninstallEdition } from '../../../api/marketplace';\nimport Modal from '../../../components/controls/Modal';\nimport { Button, ResetButtonLink } from '../../../components/ui/buttons';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n\nexport interface Props {\n  edition?: Edition;\n  editionStatus: EditionStatus;\n  onClose: () => void;\n  updateEditionStatus: (editionStatus: EditionStatus) => void;\n}\n\ninterface State {\n  loading: boolean;\n}\n\nexport default class UninstallEditionForm extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleConfirmClick = () => {\n    this.setState({ loading: true });\n    uninstallEdition()\n      .then(() => {\n        this.props.updateEditionStatus({\n          ...this.props.editionStatus,\n          currentEditionKey: undefined,\n          installationStatus: 'UNINSTALL_IN_PROGRESS'\n        });\n        this.props.onClose();\n      })\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      });\n  };\n\n  render() {\n    const { edition } = this.props;\n    const { loading } = this.state;\n    const currentEdition = edition ? edition.name : translate('marketplace.commercial_edition');\n    const header = translateWithParameters('marketplace.downgrade_to_community_edition');\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n\n        <div className=\"modal-body\">\n          <p>{translateWithParameters('marketplace.uninstall_x_confirmation', currentEdition)}</p>\n        </div>\n\n        <footer className=\"modal-foot\">\n          {loading && <i className=\"spinner spacer-right\" />}\n          <Button disabled={loading} onClick={this.handleConfirmClick}>\n            {translate('marketplace.downgrade')}\n          </Button>\n          <ResetButtonLink className=\"js-modal-close\" onClick={this.props.onClose}>\n            {translate('cancel')}\n          </ResetButtonLink>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { memoize, sortBy } from 'lodash';\nimport { Plugin, PluginAvailable, PluginInstalled, PluginPending } from '../../api/plugins';\nimport { cleanQuery, parseAsString, RawQuery, serializeString } from '../../helpers/query';\nimport { Edition } from '../../api/marketplace';\n\nexport interface Query {\n  filter: string;\n  search?: string;\n}\n\nexport function isPluginAvailable(plugin: Plugin): plugin is PluginAvailable {\n  return (plugin as any).release !== undefined;\n}\n\nexport function isPluginInstalled(plugin: Plugin): plugin is PluginInstalled {\n  return isPluginPending(plugin) && (plugin as any).updatedAt !== undefined;\n}\n\nexport function isPluginPending(plugin: Plugin): plugin is PluginPending {\n  return (plugin as any).version !== undefined;\n}\n\nexport function filterPlugins(plugins: Plugin[], search: string): Plugin[] {\n  const s = search.toLowerCase();\n  return plugins.filter(plugin => {\n    return (\n      plugin.name.toLowerCase().includes(s) ||\n      (plugin.description || '').toLowerCase().includes(s) ||\n      (plugin.category || '').toLowerCase().includes(s)\n    );\n  });\n}\n\nconst EDITIONS_ORDER = ['community', 'developer', 'enterprise', 'datacenter'];\nexport function sortEditions(editions: Edition[]): Edition[] {\n  return sortBy(editions, edition => EDITIONS_ORDER.indexOf(edition.key));\n}\n\nexport const DEFAULT_FILTER = 'all';\nexport const parseQuery = memoize((urlQuery: RawQuery): Query => ({\n  filter: parseAsString(urlQuery['filter']) || DEFAULT_FILTER,\n  search: parseAsString(urlQuery['search'])\n}));\n\nexport const serializeQuery = memoize((query: Query): RawQuery =>\n  cleanQuery({\n    filter: query.filter === DEFAULT_FILTER ? undefined : serializeString(query.filter),\n    search: query.search ? serializeString(query.search) : undefined\n  })\n);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport EditionBox from './components/EditionBox';\nimport LicenseEditionForm from './components/LicenseEditionForm';\nimport UninstallEditionForm from './components/UninstallEditionForm';\nimport { sortEditions } from './utils';\nimport { Edition, EditionStatus } from '../../api/marketplace';\nimport { translate } from '../../helpers/l10n';\n\nexport interface Props {\n  canInstall: boolean;\n  canUninstall: boolean;\n  editions?: Edition[];\n  editionStatus?: EditionStatus;\n  loading: boolean;\n  updateCenterActive: boolean;\n  updateEditionStatus: (editionStatus: EditionStatus) => void;\n}\n\ninterface State {\n  installEdition?: Edition;\n  openUninstallForm: boolean;\n}\n\nexport default class EditionBoxes extends React.PureComponent<Props, State> {\n  state: State = { openUninstallForm: false };\n\n  handleOpenLicenseForm = (edition: Edition) => this.setState({ installEdition: edition });\n  handleCloseLicenseForm = () => this.setState({ installEdition: undefined });\n\n  handleOpenUninstallForm = () => this.setState({ openUninstallForm: true });\n  handleCloseUninstallForm = () => this.setState({ openUninstallForm: false });\n\n  renderForms(sortedEditions: Edition[], installedIdx?: number) {\n    const { canInstall, canUninstall, editionStatus } = this.props;\n    const { installEdition, openUninstallForm } = this.state;\n    const installEditionIdx =\n      installEdition && sortedEditions.findIndex(edition => edition.key === installEdition.key);\n\n    if (canInstall && installEdition) {\n      return (\n        <LicenseEditionForm\n          edition={installEdition}\n          editions={sortedEditions}\n          isDowngrade={\n            installedIdx !== undefined &&\n            installEditionIdx !== undefined &&\n            installEditionIdx < installedIdx\n          }\n          onClose={this.handleCloseLicenseForm}\n          updateEditionStatus={this.props.updateEditionStatus}\n        />\n      );\n    }\n\n    if (canUninstall && openUninstallForm && editionStatus && editionStatus.currentEditionKey) {\n      return (\n        <UninstallEditionForm\n          edition={sortedEditions.find(edition => edition.key === editionStatus.currentEditionKey)}\n          editionStatus={editionStatus}\n          onClose={this.handleCloseUninstallForm}\n          updateEditionStatus={this.props.updateEditionStatus}\n        />\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    const { canInstall, canUninstall, editions, loading } = this.props;\n\n    if (loading) {\n      return <i className=\"big-spacer-bottom spinner\" />;\n    }\n\n    if (!editions) {\n      return (\n        <div className=\"spacer-bottom marketplace-editions\">\n          <span className=\"alert alert-info\">\n            <FormattedMessage\n              defaultMessage={translate('marketplace.editions_unavailable')}\n              id=\"marketplace.editions_unavailable\"\n              values={{\n                url: (\n                  <a href=\"https://redirect.sonarsource.com/editions/editions.html\" target=\"_blank\">\n                    SonarSource.com\n                  </a>\n                )\n              }}\n            />\n          </span>\n        </div>\n      );\n    }\n\n    const sortedEditions = sortEditions(editions);\n    const status = this.props.editionStatus || { installationStatus: 'NONE' };\n    const inProgressStatus = [\n      'AUTOMATIC_IN_PROGRESS',\n      'AUTOMATIC_READY',\n      'UNINSTALL_IN_PROGRESS'\n    ].includes(status.installationStatus);\n    const installedIdx = sortedEditions.findIndex(\n      edition => edition.key === status.currentEditionKey\n    );\n    const nextIdx = sortedEditions.findIndex(edition => edition.key === status.nextEditionKey);\n    const currentIdx = inProgressStatus ? nextIdx : installedIdx;\n    return (\n      <div className=\"spacer-bottom marketplace-editions\">\n        <EditionBox\n          actionLabel={translate('marketplace.downgrade')}\n          disableAction={inProgressStatus}\n          displayAction={canUninstall && currentIdx > 0}\n          edition={sortedEditions[0]}\n          editionStatus={status}\n          key={sortedEditions[0].key}\n          onAction={this.handleOpenUninstallForm}\n        />\n        {sortedEditions\n          .slice(1)\n          .map((edition, idx) => (\n            <EditionBox\n              actionLabel={\n                currentIdx > idx + 1\n                  ? translate('marketplace.downgrade')\n                  : translate('marketplace.upgrade')\n              }\n              disableAction={inProgressStatus}\n              displayAction={canInstall && currentIdx !== idx + 1}\n              edition={edition}\n              editionStatus={status}\n              key={edition.key}\n              onAction={this.handleOpenLicenseForm}\n            />\n          ))}\n\n        {this.renderForms(sortedEditions, installedIdx)}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translateWithParameters } from '../../helpers/l10n';\n\ninterface Props {\n  total: number;\n}\n\nexport default function Footer({ total }: Props) {\n  return (\n    <footer className=\"spacer-top note text-center\">\n      {translateWithParameters('x_show', total)}\n    </footer>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport DateFormatter from '../../../components/intl/DateFormatter';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { Release, Update } from '../../../api/plugins';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  release: Release;\n  update: Update;\n}\n\nexport default function PluginChangeLogItem({ release, update }: Props) {\n  return (\n    <li className=\"big-spacer-bottom\">\n      <div className=\"little-spacer-bottom\">\n        {update.status === 'COMPATIBLE' || !update.status ? (\n          <span className=\"js-plugin-changelog-version badge badge-success spacer-right\">\n            {release.version}\n          </span>\n        ) : (\n          <Tooltip overlay={translate('marketplace.update_status', update.status)}>\n            <span className=\"js-plugin-changelog-version badge badge-warning spacer-right\">\n              {release.version}\n            </span>\n          </Tooltip>\n        )}\n        <span className=\"js-plugin-changelog-date note spacer-right\">\n          <DateFormatter date={release.date} />\n        </span>\n        {release.changeLogUrl && (\n          <a className=\"js-plugin-changelog-link\" href={release.changeLogUrl} target=\"_blank\">\n            {translate('marketplace.release_notes')}\n          </a>\n        )}\n      </div>\n      <div className=\"js-plugin-changelog-description\">{release.description}</div>\n    </li>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport PluginChangeLogItem from './PluginChangeLogItem';\nimport BubblePopup from '../../../components/common/BubblePopup';\nimport { Release, Update } from '../../../api/plugins';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  popupPosition?: any;\n  release: Release;\n  update: Update;\n}\n\nexport default function PluginChangeLog({ popupPosition, release, update }: Props) {\n  return (\n    <BubblePopup position={popupPosition} customClass=\"bubble-popup-bottom-right\">\n      <div className=\"abs-width-300 bubble-popup-container\">\n        <div className=\"bubble-popup-title\">{translate('changelog')}</div>\n        <ul className=\"js-plugin-changelog-list\">\n          {update.previousUpdates &&\n            update.previousUpdates.map(\n              previousUpdate =>\n                previousUpdate.release ? (\n                  <PluginChangeLogItem\n                    key={previousUpdate.release.version}\n                    release={previousUpdate.release}\n                    update={previousUpdate}\n                  />\n                ) : null\n            )}\n          <PluginChangeLogItem release={release} update={update} />\n        </ul>\n      </div>\n    </BubblePopup>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport PluginChangeLog from './PluginChangeLog';\nimport { Release, Update } from '../../../api/plugins';\nimport BubblePopupHelper from '../../../components/common/BubblePopupHelper';\nimport { Button } from '../../../components/ui/buttons';\n\ninterface Props {\n  release: Release;\n  update: Update;\n}\n\ninterface State {\n  changelogOpen: boolean;\n}\n\nexport default class PluginChangeLogButton extends React.PureComponent<Props, State> {\n  state: State = { changelogOpen: false };\n\n  toggleChangelog = (show?: boolean) => {\n    if (show !== undefined) {\n      this.setState({ changelogOpen: show });\n    } else {\n      this.setState(state => ({ changelogOpen: !state.changelogOpen }));\n    }\n  };\n\n  handleClick = () => {\n    this.toggleChangelog();\n  };\n\n  render() {\n    return (\n      <div className=\"display-inline-block little-spacer-left\">\n        <Button\n          className=\"button-link js-changelog issue-rule icon-ellipsis-h\"\n          onClick={this.handleClick}\n        />\n        <BubblePopupHelper\n          isOpen={this.state.changelogOpen}\n          popup={<PluginChangeLog release={this.props.release} update={this.props.update} />}\n          position=\"bottomright\"\n          togglePopup={this.toggleChangelog}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Plugin } from '../../../api/plugins';\n\ninterface Props {\n  plugin: Plugin;\n}\n\nconst PluginDescription = (props: Props) => {\n  return (\n    <td className=\"text-top width-25 big-spacer-right\">\n      <div>\n        <strong className=\"js-plugin-name\">{props.plugin.name}</strong>\n        {props.plugin.category && (\n          <span className=\"js-plugin-category badge spacer-left\">{props.plugin.category}</span>\n        )}\n      </div>\n      <div className=\"js-plugin-description little-spacer-top\">{props.plugin.description}</div>\n    </td>\n  );\n};\n\nexport default PluginDescription;\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  license?: string;\n}\n\nexport default function PluginLicense({ license }: Props) {\n  if (!license) {\n    return null;\n  }\n  return (\n    <Tooltip overlay={license}>\n      <li className=\"little-spacer-bottom marketplace-plugin-license\">\n        <FormattedMessage\n          defaultMessage={translate('marketplace.licensed_under_x')}\n          id=\"marketplace.licensed_under_x\"\n          values={{\n            license: <span className=\"js-plugin-license\">{license}</span>\n          }}\n        />\n      </li>\n    </Tooltip>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { translate } from '../../../helpers/l10n';\nimport { Plugin } from '../../../api/plugins';\n\ninterface Props {\n  plugin: Plugin;\n}\n\nexport default function PluginOrganization({ plugin }: Props) {\n  if (!plugin.organizationName) {\n    return null;\n  }\n  return (\n    <li className=\"little-spacer-bottom\">\n      <FormattedMessage\n        defaultMessage={translate('marketplace.developed_by_x')}\n        id=\"marketplace.developed_by_x\"\n        values={{\n          organization: plugin.organizationUrl ? (\n            <a className=\"js-plugin-organization\" href={plugin.organizationUrl} target=\"_blank\">\n              {plugin.organizationName}\n            </a>\n          ) : (\n            <span className=\"js-plugin-organization\">{plugin.organizationName}</span>\n          )\n        }}\n      />\n    </li>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Update } from '../../../api/plugins';\nimport { Button } from '../../../components/ui/buttons';\nimport { translateWithParameters } from '../../../helpers/l10n';\n\ninterface Props {\n  disabled: boolean;\n  onClick: (update: Update) => void;\n  update: Update;\n}\n\nexport default class PluginUpdateButton extends React.PureComponent<Props> {\n  handleClick = () => {\n    this.props.onClick(this.props.update);\n  };\n\n  render() {\n    const { disabled, update } = this.props;\n    if (update.status !== 'COMPATIBLE' || !update.release) {\n      return null;\n    }\n    return (\n      <Button\n        className=\"js-update little-spacer-bottom\"\n        disabled={disabled}\n        onClick={this.handleClick}>\n        {translateWithParameters('marketplace.update_to_x', update.release.version)}\n      </Button>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport PluginUpdateButton from './PluginUpdateButton';\nimport { isPluginAvailable, isPluginInstalled } from '../utils';\nimport { Plugin, installPlugin, updatePlugin, uninstallPlugin } from '../../../api/plugins';\nimport Checkbox from '../../../components/controls/Checkbox';\nimport CheckIcon from '../../../components/icons-components/CheckIcon';\nimport { Button } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  plugin: Plugin;\n  refreshPending: () => void;\n}\n\ninterface State {\n  acceptTerms: boolean;\n  loading: boolean;\n}\n\nexport default class PluginActions extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { acceptTerms: false, loading: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  doPluginAction = (apiAction: (data: { key: string }) => Promise<void | Response>) => {\n    this.setState({ loading: true });\n    apiAction({ key: this.props.plugin.key }).then(\n      () => {\n        this.props.refreshPending();\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleInstall = () => this.doPluginAction(installPlugin);\n  handleUpdate = () => this.doPluginAction(updatePlugin);\n  handleUninstall = () => this.doPluginAction(uninstallPlugin);\n  handleTermsCheck = (checked: boolean) => this.setState({ acceptTerms: checked });\n\n  renderBundled() {\n    const { plugin } = this.props;\n\n    return (\n      <div className=\"js-actions\">\n        {isPluginAvailable(plugin) && (\n          <div>\n            <p className=\"little-spacer-bottom\">\n              {translate('marketplace.available_under_commercial_license')}\n            </p>\n            <a href={plugin.homepageUrl} target=\"_blank\">\n              {translate('marketplace.learn_more')}\n            </a>\n          </div>\n        )}\n        {isPluginInstalled(plugin) && (\n          <p>\n            <CheckIcon className=\"little-spacer-right\" />\n            {translate('marketplace.installed')}\n          </p>\n        )}\n        {isPluginInstalled(plugin) &&\n          plugin.updates &&\n          plugin.updates.length > 0 && (\n            <div className=\"spacer-top\">\n              {plugin.updates.map((update, idx) => (\n                <PluginUpdateButton\n                  disabled={this.state.loading}\n                  key={idx}\n                  onClick={this.handleUpdate}\n                  update={update}\n                />\n              ))}\n            </div>\n          )}\n      </div>\n    );\n  }\n\n  render() {\n    const { plugin } = this.props;\n\n    if (plugin.editionBundled) {\n      return this.renderBundled();\n    }\n\n    const { loading } = this.state;\n    return (\n      <div className=\"js-actions\">\n        {isPluginAvailable(plugin) &&\n          plugin.termsAndConditionsUrl && (\n            <p className=\"little-spacer-bottom\">\n              <Checkbox\n                checked={this.state.acceptTerms}\n                className=\"js-terms\"\n                id={'plugin-terms-' + plugin.key}\n                onCheck={this.handleTermsCheck}>\n                <label className=\"little-spacer-left\" htmlFor={'plugin-terms-' + plugin.key}>\n                  {translate('marketplace.i_accept_the')}\n                </label>\n              </Checkbox>\n              <a\n                className=\"js-plugin-terms nowrap little-spacer-left\"\n                href={plugin.termsAndConditionsUrl}\n                target=\"_blank\">\n                {translate('marketplace.terms_and_conditions')}\n              </a>\n            </p>\n          )}\n        {loading && <i className=\"spinner spacer-right little-spacer-top little-spacer-bottom\" />}\n        {isPluginInstalled(plugin) && (\n          <div className=\"display-inlin-block\">\n            {plugin.updates &&\n              plugin.updates.map((update, idx) => (\n                <PluginUpdateButton\n                  disabled={loading}\n                  key={idx}\n                  onClick={this.handleUpdate}\n                  update={update}\n                />\n              ))}\n            <Button\n              className=\"js-uninstall button-red little-spacer-left\"\n              disabled={loading}\n              onClick={this.handleUninstall}>\n              {translate('marketplace.uninstall')}\n            </Button>\n          </div>\n        )}\n        {isPluginAvailable(plugin) && (\n          <Button\n            className=\"js-install\"\n            disabled={loading || (plugin.termsAndConditionsUrl != null && !this.state.acceptTerms)}\n            onClick={this.handleInstall}>\n            {translate('marketplace.install')}\n          </Button>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport PluginActions from './PluginActions';\nimport { Plugin } from '../../../api/plugins';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  plugin: Plugin;\n  refreshPending: () => void;\n  status?: string;\n}\n\nexport default function PluginStatus({ plugin, refreshPending, status }: Props) {\n  return (\n    <td className=\"text-top text-right width-20 little-spacer-left\">\n      {status === 'installing' && (\n        <p className=\"text-success\">{translate('marketplace.install_pending')}</p>\n      )}\n\n      {status === 'updating' && (\n        <p className=\"text-success\">{translate('marketplace.update_pending')}</p>\n      )}\n\n      {status === 'removing' && (\n        <p className=\"text-danger\">{translate('marketplace.uninstall_pending')}</p>\n      )}\n\n      {status == null && <PluginActions plugin={plugin} refreshPending={refreshPending} />}\n    </td>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Plugin } from '../../../api/plugins';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  plugin: Plugin;\n}\n\nexport default function PluginUrls({ plugin }: Props) {\n  if (!plugin.homepageUrl && !plugin.issueTrackerUrl) {\n    return null;\n  }\n  return (\n    <li className=\"little-spacer-bottom\">\n      <ul className=\"list-inline\">\n        {plugin.homepageUrl && (\n          <li>\n            <a className=\"js-plugin-homepage\" href={plugin.homepageUrl} target=\"_blank\">\n              {translate('marketplace.homepage')}\n            </a>\n          </li>\n        )}\n        {plugin.issueTrackerUrl && (\n          <li>\n            <a className=\"js-plugin-issues\" href={plugin.issueTrackerUrl} target=\"_blank\">\n              {translate('marketplace.issue_tracker')}\n            </a>\n          </li>\n        )}\n      </ul>\n    </li>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport PluginChangeLogButton from './PluginChangeLogButton';\nimport PluginDescription from './PluginDescription';\nimport PluginLicense from './PluginLicense';\nimport PluginOrganization from './PluginOrganization';\nimport PluginStatus from './PluginStatus';\nimport PluginUrls from './PluginUrls';\nimport { PluginAvailable as IPluginAvailable } from '../../../api/plugins';\nimport { translateWithParameters } from '../../../helpers/l10n';\n\ninterface Props {\n  plugin: IPluginAvailable;\n  readOnly: boolean;\n  refreshPending: () => void;\n  status?: string;\n}\n\nexport default function PluginAvailable({ plugin, readOnly, refreshPending, status }: Props) {\n  return (\n    <tr>\n      <PluginDescription plugin={plugin} />\n      <td className=\"text-top big-spacer-right\">\n        <ul>\n          <li className=\"display-flex-row little-spacer-bottom\">\n            <div className=\"pull-left spacer-right\">\n              <span className=\"badge badge-success\">{plugin.release.version}</span>\n            </div>\n            <div>\n              {plugin.release.description}\n              <PluginChangeLogButton release={plugin.release} update={plugin.update} />\n              {plugin.update.requires.length > 0 && (\n                <p className=\"little-spacer-top\">\n                  <strong>\n                    {translateWithParameters(\n                      'marketplace.installing_this_plugin_will_also_install_x',\n                      plugin.update.requires.map(requiredPlugin => requiredPlugin.name).join(', ')\n                    )}\n                  </strong>\n                </p>\n              )}\n            </div>\n          </li>\n        </ul>\n      </td>\n\n      <td className=\"text-top width-20\">\n        <ul>\n          <PluginUrls plugin={plugin} />\n          <PluginLicense license={plugin.license} />\n          <PluginOrganization plugin={plugin} />\n        </ul>\n      </td>\n\n      {!readOnly && (\n        <PluginStatus plugin={plugin} status={status} refreshPending={refreshPending} />\n      )}\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport PluginChangeLogButton from './PluginChangeLogButton';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { Release, Update } from '../../../api/plugins';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  update: Update;\n  release: Release;\n}\n\ninterface State {\n  changelogOpen: boolean;\n}\n\nexport default class PluginUpdateItem extends React.PureComponent<Props, State> {\n  state: State = { changelogOpen: false };\n\n  handleChangelogClick = (event: React.SyntheticEvent<HTMLButtonElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    this.toggleChangelog();\n  };\n\n  toggleChangelog = (show?: boolean) => {\n    if (show !== undefined) {\n      this.setState({ changelogOpen: show });\n    } else {\n      this.setState(state => ({ changelogOpen: !state.changelogOpen }));\n    }\n  };\n\n  render() {\n    const { release, update } = this.props;\n    return (\n      <li key={release.version} className=\"display-flex-row little-spacer-bottom\">\n        <div className=\"pull-left spacer-right\">\n          {update.status === 'COMPATIBLE' ? (\n            <span className=\"js-update-version badge badge-success\">{release.version}</span>\n          ) : (\n            <Tooltip overlay={translate('marketplace.update_status', update.status)}>\n              <span className=\"js-update-version badge badge-warning\">{release.version}</span>\n            </Tooltip>\n          )}\n        </div>\n        <div>\n          {release.description}\n          <PluginChangeLogButton release={release} update={update} />\n        </div>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport PluginUpdateItem from './PluginUpdateItem';\nimport { Update } from '../../../api/plugins';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  updates?: Update[];\n}\n\nexport default function PluginUpdates({ updates }: Props) {\n  if (!updates || updates.length <= 0) {\n    return null;\n  }\n  return (\n    <li className=\"spacer-top\">\n      <strong>{translate('marketplace.updates')}:</strong>\n      <ul className=\"little-spacer-top\">\n        {updates.map(\n          update =>\n            update.release ? (\n              <PluginUpdateItem\n                key={update.release.version}\n                release={update.release}\n                update={update}\n              />\n            ) : null\n        )}\n      </ul>\n    </li>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport PluginDescription from './PluginDescription';\nimport PluginLicense from './PluginLicense';\nimport PluginOrganization from './PluginOrganization';\nimport PluginStatus from './PluginStatus';\nimport PluginUpdates from './PluginUpdates';\nimport PluginUrls from './PluginUrls';\nimport { PluginInstalled as IPluginInstalled } from '../../../api/plugins';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  plugin: IPluginInstalled;\n  readOnly: boolean;\n  refreshPending: () => void;\n  status?: string;\n}\n\nexport default function PluginInstalled({ plugin, readOnly, refreshPending, status }: Props) {\n  return (\n    <tr>\n      <PluginDescription plugin={plugin} />\n      <td className=\"text-top big-spacer-right\">\n        <ul>\n          <li className=\"little-spacer-bottom\">\n            <strong className=\"js-plugin-installed-version little-spacer-right\">\n              {plugin.version}\n            </strong>\n            {translate('marketplace._installed')}\n          </li>\n          <PluginUpdates updates={plugin.updates} />\n        </ul>\n      </td>\n\n      <td className=\"text-top width-20\">\n        <ul>\n          <PluginUrls plugin={plugin} />\n          <PluginLicense license={plugin.license} />\n          <PluginOrganization plugin={plugin} />\n        </ul>\n      </td>\n\n      {!readOnly && (\n        <PluginStatus plugin={plugin} status={status} refreshPending={refreshPending} />\n      )}\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport PluginAvailable from './components/PluginAvailable';\nimport PluginInstalled from './components/PluginInstalled';\nimport { isPluginAvailable, isPluginInstalled } from './utils';\nimport { Plugin, PluginPending } from '../../api/plugins';\n\ninterface Props {\n  plugins: Plugin[];\n  pending: {\n    installing: PluginPending[];\n    updating: PluginPending[];\n    removing: PluginPending[];\n  };\n  readOnly: boolean;\n  refreshPending: () => void;\n}\n\nexport default class PluginsList extends React.PureComponent<Props> {\n  getPluginStatus = (plugin: Plugin): string | undefined => {\n    const { installing, updating, removing } = this.props.pending;\n    if (installing.find(p => p.key === plugin.key)) {\n      return 'installing';\n    }\n    if (updating.find(p => p.key === plugin.key)) {\n      return 'updating';\n    }\n    if (removing.find(p => p.key === plugin.key)) {\n      return 'removing';\n    }\n    return undefined;\n  };\n\n  renderPlugin = (plugin: Plugin) => {\n    const status = this.getPluginStatus(plugin);\n    if (isPluginInstalled(plugin)) {\n      return (\n        <PluginInstalled\n          plugin={plugin}\n          readOnly={this.props.readOnly}\n          refreshPending={this.props.refreshPending}\n          status={status}\n        />\n      );\n    }\n    if (isPluginAvailable(plugin)) {\n      return (\n        <PluginAvailable\n          plugin={plugin}\n          readOnly={this.props.readOnly}\n          refreshPending={this.props.refreshPending}\n          status={status}\n        />\n      );\n    }\n    return null;\n  };\n\n  render() {\n    return (\n      <div className=\"boxed-group boxed-group-inner\" id=\"marketplace-plugins\">\n        <ul>\n          {this.props.plugins.map(plugin => (\n            <li className=\"panel panel-vertical\" key={plugin.key}>\n              <table className=\"marketplace-plugin-table\">\n                <tbody>{this.renderPlugin(plugin)}</tbody>\n              </table>\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Query } from './utils';\nimport RadioToggle from '../../components/controls/RadioToggle';\nimport SearchBox from '../../components/controls/SearchBox';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  query: Query;\n  updateCenterActive: boolean;\n  updateQuery: (newQuery: Partial<Query>) => void;\n}\n\nexport default class Search extends React.PureComponent<Props> {\n  handleSearch = (search: string) => {\n    this.props.updateQuery({ search });\n  };\n\n  handleFilterChange = (filter: string) => this.props.updateQuery({ filter });\n\n  render() {\n    const { query, updateCenterActive } = this.props;\n    const radioOptions = [\n      { label: translate('marketplace.all'), value: 'all' },\n      { label: translate('marketplace.installed'), value: 'installed' },\n      {\n        disabled: !updateCenterActive,\n        label: translate('marketplace.updates_only'),\n        tooltip: !updateCenterActive ? translate('marketplace.not_activated') : undefined,\n        value: 'updates'\n      }\n    ];\n    return (\n      <div className=\"big-spacer-bottom\" id=\"marketplace-search\">\n        <div className=\"display-inline-block text-top nowrap abs-width-240 spacer-right\">\n          <RadioToggle\n            name=\"marketplace-filter\"\n            onCheck={this.handleFilterChange}\n            options={radioOptions}\n            value={query.filter}\n          />\n        </div>\n        <SearchBox\n          onChange={this.handleSearch}\n          placeholder={translate('marketplace.search')}\n          value={query.search}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { sortBy, uniqBy } from 'lodash';\nimport Helmet from 'react-helmet';\nimport Header from './Header';\nimport EditionBoxes from './EditionBoxes';\nimport Footer from './Footer';\nimport PluginsList from './PluginsList';\nimport Search from './Search';\nimport { filterPlugins, parseQuery, Query, serializeQuery } from './utils';\nimport {\n  getAvailablePlugins,\n  getInstalledPluginsWithUpdates,\n  getPluginUpdates,\n  Plugin,\n  PluginPendingResult,\n  getInstalledPlugins\n} from '../../api/plugins';\nimport { Edition, EditionStatus } from '../../api/marketplace';\nimport { RawQuery } from '../../helpers/query';\nimport { translate } from '../../helpers/l10n';\nimport './style.css';\n\nexport interface Props {\n  editions?: Edition[];\n  editionsReadOnly: boolean;\n  editionStatus?: EditionStatus;\n  fetchPendingPlugins: () => void;\n  loadingEditions: boolean;\n  location: { pathname: string; query: RawQuery };\n  pendingPlugins: PluginPendingResult;\n  standaloneMode: boolean;\n  setEditionStatus: (editionStatus: EditionStatus) => void;\n  updateCenterActive: boolean;\n}\n\ninterface State {\n  loadingPlugins: boolean;\n  plugins: Plugin[];\n}\n\nexport default class App extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  static contextTypes = {\n    router: PropTypes.object.isRequired\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      loadingPlugins: true,\n      plugins: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.props.fetchPendingPlugins();\n    this.fetchQueryPlugins();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.location.query.filter !== this.props.location.query.filter) {\n      this.fetchQueryPlugins();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchQueryPlugins = () => {\n    const query = parseQuery(this.props.location.query);\n    let fetchFunction = this.fetchAllPlugins;\n\n    if (query.filter === 'updates') {\n      fetchFunction = getPluginUpdates;\n    } else if (query.filter === 'installed') {\n      fetchFunction = getInstalledPlugins;\n    }\n\n    this.setState({ loadingPlugins: true });\n    fetchFunction().then((plugins: Plugin[]) => {\n      if (this.mounted) {\n        this.setState({\n          loadingPlugins: false,\n          plugins: sortBy(plugins, 'name')\n        });\n      }\n    }, this.stopLoadingPlugins);\n  };\n\n  fetchAllPlugins = (): Promise<Plugin[] | void> => {\n    return Promise.all([getInstalledPluginsWithUpdates(), getAvailablePlugins()]).then(\n      ([installed, available]) => uniqBy([...installed, ...available.plugins], 'key'),\n      this.stopLoadingPlugins\n    );\n  };\n\n  updateQuery = (newQuery: Partial<Query>) => {\n    const query = serializeQuery({ ...parseQuery(this.props.location.query), ...newQuery });\n    this.context.router.push({ pathname: this.props.location.pathname, query });\n  };\n\n  stopLoadingPlugins = () => {\n    if (this.mounted) {\n      this.setState({ loadingPlugins: false });\n    }\n  };\n\n  render() {\n    const { editions, editionStatus, standaloneMode, pendingPlugins } = this.props;\n    const { loadingPlugins, plugins } = this.state;\n    const query = parseQuery(this.props.location.query);\n    const filteredPlugins = query.search ? filterPlugins(plugins, query.search) : plugins;\n\n    return (\n      <div className=\"page page-limited\" id=\"marketplace-page\">\n        <Helmet title={translate('marketplace.page')} />\n        <Header />\n        <EditionBoxes\n          canInstall={standaloneMode && !this.props.editionsReadOnly}\n          canUninstall={standaloneMode}\n          editionStatus={editionStatus}\n          editions={editions}\n          loading={this.props.loadingEditions}\n          updateCenterActive={this.props.updateCenterActive}\n          updateEditionStatus={this.props.setEditionStatus}\n        />\n        <Search\n          query={query}\n          updateCenterActive={this.props.updateCenterActive}\n          updateQuery={this.updateQuery}\n        />\n        {loadingPlugins && <i className=\"spinner\" />}\n        {!loadingPlugins && (\n          <PluginsList\n            pending={pendingPlugins}\n            plugins={filteredPlugins}\n            readOnly={!standaloneMode}\n            refreshPending={this.props.fetchPendingPlugins}\n          />\n        )}\n        {!loadingPlugins && <Footer total={filteredPlugins.length} />}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport App from './App';\nimport {\n  getAppState,\n  getGlobalSettingValue,\n  getMarketplaceState,\n  getMarketplaceEditions,\n  getMarketplaceEditionStatus,\n  getMarketplacePendingPlugins\n} from '../../store/rootReducer';\nimport { Edition, EditionStatus } from '../../api/marketplace';\nimport { setEditionStatus, fetchPendingPlugins } from '../../store/marketplace/actions';\nimport { RawQuery } from '../../helpers/query';\nimport { PluginPendingResult } from '../../api/plugins';\n\ninterface OwnProps {\n  location: { pathname: string; query: RawQuery };\n}\n\ninterface StateToProps {\n  editions?: Edition[];\n  editionsReadOnly: boolean;\n  editionStatus?: EditionStatus;\n  loadingEditions: boolean;\n  pendingPlugins: PluginPendingResult;\n  standaloneMode: boolean;\n  updateCenterActive: boolean;\n}\n\ninterface DispatchToProps {\n  setEditionStatus: (editionStatus: EditionStatus) => void;\n  fetchPendingPlugins: () => void;\n}\n\nconst mapStateToProps = (state: any) => ({\n  editions: getMarketplaceEditions(state),\n  editionsReadOnly: getMarketplaceState(state).readOnly,\n  editionStatus: getMarketplaceEditionStatus(state),\n  loadingEditions: getMarketplaceState(state).loading,\n  pendingPlugins: getMarketplacePendingPlugins(state),\n  standaloneMode: getAppState(state).standalone,\n  updateCenterActive:\n    (getGlobalSettingValue(state, 'sonar.updatecenter.activate') || {}).value === 'true'\n});\n\nconst mapDispatchToProps = { setEditionStatus, fetchPendingPlugins };\n\nexport default connect<StateToProps, DispatchToProps, OwnProps>(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\n\nexport interface BubblePopupPosition {\n  top?: number;\n  left?: number;\n  right?: number;\n}\n\ninterface Props {\n  customClass?: string;\n  children: React.ReactNode;\n  position: BubblePopupPosition;\n}\n\nexport default function BubblePopup(props: Props) {\n  const popupClass = classNames('bubble-popup', props.customClass);\n  const popupStyle = { ...props.position };\n\n  return (\n    <div className={popupClass} style={popupStyle}>\n      {props.children}\n      <div className=\"bubble-popup-arrow\" />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\n\ninterface Props {\n  className?: string;\n  children?: React.ReactNode;\n  isOpen: boolean;\n  offset?: { vertical: number; horizontal: number };\n  popup: JSX.Element;\n  position: 'bottomleft' | 'bottomright';\n  togglePopup: (show: boolean) => void;\n}\n\ninterface State {\n  position: { top: number; left?: number; right?: number };\n}\n\nexport default class BubblePopupHelper extends React.PureComponent<Props, State> {\n  container?: HTMLElement | null;\n  popupContainer?: HTMLElement | null;\n  state: State = {\n    position: { top: 0, right: 0 }\n  };\n\n  componentDidMount() {\n    this.setState({ position: this.getPosition(this.props) });\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (!this.props.isOpen && nextProps.isOpen) {\n      window.addEventListener('keydown', this.handleKey, false);\n      window.addEventListener('click', this.handleOutsideClick, false);\n    } else if (this.props.isOpen && !nextProps.isOpen) {\n      window.removeEventListener('keydown', this.handleKey);\n      window.removeEventListener('click', this.handleOutsideClick);\n    }\n  }\n\n  handleKey = (event: KeyboardEvent) => {\n    // Escape key\n    if (event.keyCode === 27) {\n      this.props.togglePopup(false);\n    }\n  };\n\n  handleOutsideClick = (event: MouseEvent) => {\n    if (!this.popupContainer || !this.popupContainer.contains(event.target as Node)) {\n      this.props.togglePopup(false);\n    }\n  };\n\n  handleClick(event: React.SyntheticEvent<HTMLElement>) {\n    event.stopPropagation();\n  }\n\n  getPosition(props: Props) {\n    if (this.container) {\n      const containerPos = this.container.getBoundingClientRect();\n      const { position } = props;\n      const offset = props.offset || { vertical: 0, horizontal: 0 };\n      if (position === 'bottomleft') {\n        return { top: containerPos.height + offset.vertical, left: offset.horizontal };\n      } else {\n        // if (position === 'bottomright')\n        return { top: containerPos.height + offset.vertical, right: offset.horizontal };\n      }\n    } else {\n      return { top: 0, right: 0 };\n    }\n  }\n\n  render() {\n    return (\n      <div\n        className={classNames(this.props.className, 'bubble-popup-helper')}\n        onClick={this.handleClick}\n        ref={container => (this.container = container)}\n        role=\"tooltip\"\n        tabIndex={0}>\n        {this.props.children}\n        {this.props.isOpen && (\n          <div ref={popupContainer => (this.popupContainer = popupContainer)}>\n            {React.cloneElement(this.props.popup, {\n              popupPosition: this.state.position\n            })}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n"],"sourceRoot":""}