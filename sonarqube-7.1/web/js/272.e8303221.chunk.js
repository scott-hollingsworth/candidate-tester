(window.webpackJsonp=window.webpackJsonp||[]).push([[272],{1002:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(0),i=n(1021),a=n(1006),o=n(242),s=n(25),c=n(50);function l(e){var t=e.className,n=e.decimals,l=e.metricKey,u=e.metricType,p=e.small,m=e.value;if(void 0===m)return r.createElement("span",null,"–");if("LEVEL"===u)return r.createElement(o.a,{className:t,level:m,small:p});if("RATING"!==u){var d=Object(c.formatMeasure)(m,u,{decimals:n});return r.createElement("span",{className:t},null!=d?d:"–")}var f=Object(i.b)(l,Number(m)),h=r.createElement(a.a,{small:p,value:m});return f?r.createElement(s.a,{overlay:f},r.createElement("span",{className:t},h)):h}},1010:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),i=n(15);function a(e){var t=e.className,n=e.fill,a=void 0===n?i.green:n,o=e.size,s=void 0===o?16:o;return r.createElement("svg",{className:t,width:s,height:s,viewBox:"0 0 16 16",version:"1.1",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve"},r.createElement("path",{style:{fill:a},d:"M12.607 6.554q0-0.25-0.161-0.411l-0.813-0.804q-0.17-0.17-0.402-0.17t-0.402 0.17l-3.643 3.634-2.018-2.018q-0.17-0.17-0.402-0.17t-0.402 0.17l-0.813 0.804q-0.161 0.161-0.161 0.411 0 0.241 0.161 0.402l3.232 3.232q0.17 0.17 0.402 0.17 0.241 0 0.411-0.17l4.848-4.848q0.161-0.161 0.161-0.402zM14.857 8q0 1.866-0.92 3.442t-2.496 2.496-3.442 0.92-3.442-0.92-2.496-2.496-0.92-3.442 0.92-3.442 2.496-2.496 3.442-0.92 3.442 0.92 2.496 2.496 0.92 3.442z"}))}},1012:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1020);function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(r).default}}),Object.defineProperty(t,"AutoSizer",{enumerable:!0,get:function(){return i(r).default}})},1014:function(e,t,n){"use strict";n.d(t,"d",function(){return o}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return c}),n.d(t,"c",function(){return l}),n.d(t,"a",function(){return u}),n.d(t,"g",function(){return p}),n.d(t,"b",function(){return m});var r=n(3),i=n(13),a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};function o(e){return Object(r.getJSON)("/api/measures/component",e).then(function(e){return e.component.measures},i.a)}function s(e,t,n){void 0===n&&(n={});var i=a({},n,{componentKey:e,metricKeys:t.join(",")});return Object(r.getJSON)("/api/measures/component",i)}function c(e,t){return Object(r.getJSON)("/api/measures/search",{projectKeys:e.join(),metricKeys:t.join()}).then(function(e){return e.measures})}function l(e){return Object(r.getJSON)("/api/custom_measures/search",e).then(function(e){return{customMeasures:e.customMeasures,paging:{pageIndex:e.p,pageSize:e.ps,total:e.total}}},i.a)}function u(e){return Object(r.postJSON)("/api/custom_measures/create",e).catch(i.a)}function p(e){return Object(r.post)("/api/custom_measures/update",e).catch(i.a)}function m(e){return Object(r.post)("/api/custom_measures/delete",e).catch(i.a)}},1016:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},1017:function(e,t,n){"use strict";var r=n(60),i=n(71),a=n(1016);e.exports=function(){function e(e,t,n,r,o,s){s!==a&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},1018:function(e,t,n){"use strict";Object.defineProperty(t,"babelPluginFlowReactPropTypes_proptype_Size",{value:{height:n(992).number.isRequired,width:n(992).number.isRequired},configurable:!0})},1019:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;t="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var n="undefined"!=typeof document&&document.attachEvent;if(!n){var r=(g=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||function(e){return t.setTimeout(e,20)},function(e){return g(e)}),i=(y=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.clearTimeout,function(e){return y(e)}),a=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,r=t.lastElementChild,i=n.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,i.style.width=n.offsetWidth+1+"px",i.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},o=function(e){if(!(e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;a(this),this.__resizeRAF__&&i(this.__resizeRAF__),this.__resizeRAF__=r(function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach(function(n){n.call(t,e)}))})}},s=!1,c="",l="animationstart",u="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),m="",d=document.createElement("fakeelement");if(void 0!==d.style.animationName&&(s=!0),!1===s)for(var f=0;f<u.length;f++)if(void 0!==d.style[u[f]+"AnimationName"]){m=u[f],c="-"+m.toLowerCase()+"-",l=p[f],s=!0;break}var h="resizeanim",b="@"+c+"keyframes "+h+" { from { opacity: 0; } to { opacity: 0; } } ",_=c+"animation: 1ms "+h+"; "}var y;var g;return{addResizeListener:function(r,i){if(n)r.attachEvent("onresize",i);else{if(!r.__resizeTriggers__){var s=t.getComputedStyle(r);s&&"static"==s.position&&(r.style.position="relative"),function(){if(!document.getElementById("detectElementResize")){var t=(b||"")+".resize-triggers { "+(_||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.id="detectElementResize",r.type="text/css",null!=e&&r.setAttribute("nonce",e),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t)),n.appendChild(r)}}(),r.__resizeLast__={},r.__resizeListeners__=[],(r.__resizeTriggers__=document.createElement("div")).className="resize-triggers",r.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',r.appendChild(r.__resizeTriggers__),a(r),r.addEventListener("scroll",o,!0),l&&(r.__resizeTriggers__.__animationListener__=function(e){e.animationName==h&&a(r)},r.__resizeTriggers__.addEventListener(l,r.__resizeTriggers__.__animationListener__))}r.__resizeListeners__.push(i)}},removeResizeListener:function(e,t){if(n)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",o,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(l,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}},1020:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(0)),a=o(n(1019));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(1018).babelPluginFlowReactPropTypes_proptype_Size||n(992).any;var c=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={height:r.props.defaultHeight||0,width:r.props.defaultWidth||0},r._onResize=function(){var e=r.props,t=e.disableHeight,n=e.disableWidth,i=e.onResize;if(r._parentNode){var a=r._parentNode.offsetHeight||0,o=r._parentNode.offsetWidth||0,s=window.getComputedStyle(r._parentNode)||{},c=parseInt(s.paddingLeft,10)||0,l=parseInt(s.paddingRight,10)||0,u=parseInt(s.paddingTop,10)||0,p=parseInt(s.paddingBottom,10)||0,m=a-u-p,d=o-c-l;(!t&&r.state.height!==m||!n&&r.state.width!==d)&&(r.setState({height:a-u-p,width:o-c-l}),i({height:a,width:o}))}},r._setRef=function(e){r._autoSizer=e},s(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.PureComponent),r(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode instanceof HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=(0,a.default)(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.disableHeight,r=e.disableWidth,a=this.state,o=a.height,s=a.width,c={overflow:"visible"},l={};return n||(c.height=0,l.height=o),r||(c.width=0,l.width=s),i.default.createElement("div",{ref:this._setRef,style:c},t(l))}}]),t}();c.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1},c.propTypes={children:n(992).func.isRequired,defaultHeight:n(992).number,defaultWidth:n(992).number,disableHeight:n(992).bool.isRequired,disableWidth:n(992).bool.isRequired,nonce:n(992).string,onResize:n(992).func.isRequired},t.default=c},1021:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s});var r=n(50),i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a=["sqale_rating","reliability_rating","security_rating"];function o(e,t){return i({},e,{metric:t[e.metric],leak:function(e){if(!e||!e.periods)return;var t=e.periods.find(function(e){return 1===e.index});return t&&t.value}(e)})}function s(e,t){var n=Object(r.isDiffMetric)(e)?e.substr(4):e;if(a.includes(n))return Object(r.getRatingTooltip)(n,t)}},1044:function(e,t,n){"use strict";var r,i=n(10),a=n(0),o=n(4),s=n(1e3),c=n(1011),l=n(25),u=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=[10,10,10,10],m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.renderBar=function(e,t,n,r){var i=this.props,o=i.alignTicks,s=i.padding,c=void 0===s?p:s,l=Math.round(n(e))+1,u=n.range()[0]+(o?c[3]:0),m=Math.round(r(t)+r.bandwidth()/2);return a.createElement("rect",{className:"bar-chart-bar",x:u,y:m,width:l,height:10})},t.prototype.renderValue=function(e,t,n,r){var i=this.props,o=i.alignTicks,s=i.padding,c=void 0===s?p:s,u=i.yValues,m=u&&u[t];if(!m)return null;var d=n(e)+(o?c[3]:0),f=Math.round(r(t)+r.bandwidth()/2+5);return a.createElement(l.a,{overlay:this.props.yTooltips&&this.props.yTooltips[t]},a.createElement("text",{className:"bar-chart-tick histogram-value",x:d,y:f,dx:"1em",dy:"0.3em"},m))},t.prototype.renderTick=function(e,t,n){var r=this.props,i=r.alignTicks,o=r.yTicks,s=o&&o[e];if(!s)return null;var c=t.range()[0],l=Math.round(n(e)+n.bandwidth()/2+5),u=i?"histogram-tick-start":"histogram-tick";return a.createElement("text",{className:"bar-chart-tick "+u,x:c,y:l,dx:i?0:"-1em",dy:"0.3em"},s)},t.prototype.renderBars=function(e,t){var n=this;return a.createElement("g",null,this.props.bars.map(function(r,i){return a.createElement("g",{key:i},n.renderBar(r,i,e,t),n.renderValue(r,i,e,t),n.renderTick(i,e,t))}))},t.prototype.render=function(){var e=this.props,t=e.bars,n=e.width,r=e.height,i=e.padding,o=void 0===i?p:i,l=n-o[1]-o[3],u=Object(c.b)().domain([0,Object(s.e)(t)]).range([0,l]),m=r-o[0]-o[2],d=Object(c.a)().domain(t.map(function(e,t){return t})).rangeRound([0,m]);return a.createElement("svg",{className:"bar-chart",width:this.props.width,height:this.props.height},a.createElement("g",{transform:"translate("+(this.props.alignTicks?4:o[3])+", "+o[0]+")"},this.renderBars(u,d)))},t}(a.PureComponent),d=n(50),f=n(1);function h(e){return e.length>10?e.substr(0,7)+"...":e}var b=n(7);t.a=Object(i.connect)(function(e){return{languages:Object(b.getLanguages)(e)}})(function(e){var t=e.distribution.split(";").map(function(e){var t=e.split("=");return{language:t[0],lines:parseInt(t[1],10)}}),n=(t=Object(o.sortBy)(t,function(e){return-e.lines})).map(function(e){return e.lines}),r=t.map(function(t){return function(t){if("<null>"===t)return Object(f.l)("unknown");var n=Object(o.find)(e.languages,{key:t});return n?n.name:t}(t.language)}).map(h),i=t.map(function(e){return e.lines>1e3?Object(d.formatMeasure)(e.lines,"INT"):""}),s=t.map(function(e){return Object(d.formatMeasure)(e.lines,"SHORT_INT")});return a.createElement(m,{alignTicks:e.alignTicks,bars:n,height:25*t.length,padding:[0,60,0,80],yTicks:r,yTooltips:i,yValues:s,width:e.width})})},1064:function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(4),o=n(5),s=n(1012),c=n.n(s),l=n(6),u=n.n(l),p=n(248);function m(e){var t=e.style,n=e.translatedName,r=e.value;return i.a.createElement("tr",{className:"overview-analysis-graph-tooltip-line"},i.a.createElement("td",{className:"thin"},i.a.createElement(p.a,{className:"little-spacer-right line-chart-legend line-chart-legend-"+t})),i.a.createElement("td",{className:"overview-analysis-graph-tooltip-value text-right little-spacer-right thin"},r),i.a.createElement("td",{className:"text-ellipsis overview-analysis-graph-tooltip-description"},n))}var d,f=n(994),h=n(147),b=(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.render=function(){var e,t=this,n=this.props.tooltipIdx,r=this.props.tooltipPos;return r>this.props.graphWidth-160&&(r-=160,e="bubble-popup-right"),i.a.createElement(f.a,{customClass:u()(e,"disabled-pointer-events"),position:{top:16,left:r,width:160}},i.a.createElement("div",{className:"overview-analysis-graph-tooltip"},i.a.createElement("div",{className:"overview-analysis-graph-tooltip-title"},i.a.createElement(h.a,{date:this.props.selectedDate,long:!0})),i.a.createElement("table",{className:"width-100"},i.a.createElement("tbody",null,this.props.series.map(function(e,r){var a=e.data[n];return!a||!a.y&&0!==a.y?null:i.a.createElement(m,{key:e.name,style:r.toString(),translatedName:e.translatedName,value:t.props.formatValue(a.y)})})))))},t}(i.a.PureComponent),y=n(1074),g=n(1009),v=n(130),E=n(50),O=n(59),j=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),N=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},w=[4,0,4,0],T=1,x=3,S=function(e){function t(t){var n=e.call(this,t)||this;n.formatValue=function(e){return Object(E.formatMeasure)(e,Object(E.getShortType)(Object(g.l)(n.state.series)))},n.getDisplayedMetrics=function(e,t){var n=Object(g.j)(e,t);return!n||n.length<=0?Object(g.j)(g.b,t):n},n.getSeries=function(e,t,r,i){var o=e;if(!o)return[];var s=n.getDisplayedMetrics(t,r),c=Object(a.minBy)(s.map(function(e){return o[e].find(function(e){return e.value||0===e.value})}),"date"),l=s.map(function(e){return{metric:e,history:c?o[e].filter(function(e){return e.date>=c.date}):o[e]}});return Object(g.h)(l,t,i,s)},n.handleClick=function(){n.context.router.push({pathname:"/project/activity",query:N({id:n.props.project},Object(O.c)(n.props.branchLike))})},n.updateTooltip=function(e,t,r){return n.setState({selectedDate:e,tooltipXPos:t,tooltipIdx:r})};var r=Object(v.b)(),i=Object(v.a)(),o=Object(g.v)(n.getSeries(t.history,r,i,t.metrics),T,x);return n.state={customMetrics:i,graph:r,selectedDate:null,series:o.length>0?o[0]:[],tooltipIdx:null,tooltipXPos:null},n}return j(t,e),t.prototype.componentWillReceiveProps=function(e){if(e.history!==this.props.history||e.metrics!==this.props.metrics){var t=Object(v.b)(),n=Object(v.a)(),r=Object(g.v)(this.getSeries(e.history,t,n,e.metrics),T,x);this.setState({customMetrics:n,graph:t,series:r.length>0?r[0]:[]})}},t.prototype.renderTimeline=function(){var e=this,t=this.state,n=t.graph,r=t.selectedDate,a=t.series,o=t.tooltipIdx,s=t.tooltipXPos;return i.a.createElement(c.a,{disableHeight:!0},function(t){var c=t.width;return i.a.createElement("div",null,i.a.createElement(y.a,{endDate:null,startDate:null,height:80,width:c,hideGrid:!0,hideXAxis:!0,interpolate:"linear",metricType:Object(g.l)(a),padding:w,series:a,showAreas:["coverage","duplications"].includes(n),updateTooltip:e.updateTooltip}),null!=r&&null!=s&&null!=o&&i.a.createElement(_,{formatValue:e.formatValue,graph:n,graphWidth:c,metrics:e.props.metrics,selectedDate:r,series:a,tooltipIdx:o,tooltipPos:s}))})},t.prototype.render=function(){var e=this.state.series;return Object(g.o)(e)?i.a.createElement("div",{className:"overview-analysis-graph big-spacer-bottom spacer-top",onClick:this.handleClick,tabIndex:0,role:"link"},this.renderTimeline()):this.props.renderWhenEmpty?this.props.renderWhenEmpty():null},t.contextTypes={router:o.object},t}(i.a.PureComponent);t.a=S},1109:function(e,t,n){},1176:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(10),a=n(2),o=n(1044),s=n(1002),c=n(1),l=n(38);function u(e){var t=e.component,n=e.measures,i=n.projects,u=n.ncloc,p=n.ncloc_language_distribution;return r.createElement("section",{className:"big-spacer-bottom",id:"portfolio-summary"},t.description&&r.createElement("div",{className:"big-spacer-bottom"},t.description),r.createElement("ul",{className:"portfolio-grid"},r.createElement("li",null,r.createElement("div",{className:"portfolio-measure-secondary-value"},r.createElement(a.Link,{to:Object(l.f)(t.key,"projects")},r.createElement(s.a,{metricKey:"projects",metricType:"SHORT_INT",value:i}))),r.createElement("div",{className:"spacer-top text-muted"},Object(c.l)("projects"))),r.createElement("li",null,r.createElement("div",{className:"portfolio-measure-secondary-value"},r.createElement(a.Link,{to:Object(l.f)(t.key,"ncloc")},r.createElement(s.a,{metricKey:"ncloc",metricType:"SHORT_INT",value:u}))),r.createElement("div",{className:"spacer-top text-muted"},Object(c.l)("metric.ncloc.name")))),p&&r.createElement("div",{className:"big-spacer-top"},r.createElement(o.a,{distribution:p,width:260})))}var p=n(1010),m=n(3),d=n(13);var f,h=n(11),b=(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),_=function(e){function t(t){var n=e.call(this,t)||this;return n.mounted=!1,n.stopLoading=function(){n.mounted&&n.setState({loading:!1})},n.handleSubscription=function(e){n.mounted&&n.setState({loading:!1,subscribed:e})},n.handleSubscribe=function(){var e;n.setState({loading:!0}),(e=n.props.component,Object(m.post)("/api/governance_reports/subscribe",{componentKey:e}).catch(d.a)).then(function(){return n.handleSubscription(!0)}).catch(n.stopLoading)},n.handleUnsubscribe=function(){var e;n.setState({loading:!0}),(e=n.props.component,Object(m.post)("/api/governance_reports/unsubscribe",{componentKey:e}).catch(d.a)).then(function(){return n.handleSubscription(!1)}).catch(n.stopLoading)},n.getEffectiveFrequencyText=function(){var e=n.props.status.componentFrequency||n.props.status.globalFrequency;return Object(c.l)("report.frequency",e,"effective")},n.renderLoading=function(){return n.state.loading&&r.createElement("i",{className:"spacer-left spinner"})},n.renderWhenSubscribed=function(){return r.createElement("div",{className:"js-subscribed"},r.createElement("div",{className:"spacer-bottom"},r.createElement(p.a,{className:"pull-left spacer-right"}),r.createElement("div",{className:"overflow-hidden"},Object(c.m)("report.subscribed",n.getEffectiveFrequencyText()))),r.createElement(h.a,{onClick:n.handleUnsubscribe},Object(c.l)("report.unsubscribe")),n.renderLoading())},n.renderWhenNotSubscribed=function(){return r.createElement("div",{className:"js-not-subscribed"},r.createElement("p",{className:"spacer-bottom"},Object(c.m)("report.unsubscribed",n.getEffectiveFrequencyText())),r.createElement(h.a,{className:"js-report-subscribe",onClick:n.handleSubscribe},Object(c.l)("report.subscribe")),n.renderLoading())},n.state={subscribed:t.status.subscribed,loading:!1},n}return b(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillReceiveProps=function(e){e.status.subscribed!==this.props.status.subscribed&&this.setState({subscribed:e.status.subscribed})},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e,t=!!this.props.currentUser.email,n=this.state.subscribed;return e=t?n?this.renderWhenSubscribed():this.renderWhenNotSubscribed():r.createElement("p",{className:"note js-no-email"},Object(c.l)("report.no_email_to_subscribe")),r.createElement("div",{className:"big-spacer-top js-report-subscription"},e)},t}(r.PureComponent),y=n(7),g=Object(i.connect)(function(e){return{currentUser:Object(y.getCurrentUser)(e)}})(_),v=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={loading:!0},t.renderHeader=function(){return r.createElement("h4",null,Object(c.l)("report.page"))},t}return v(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.loadStatus()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.loadStatus=function(){var e,t=this;(e=this.props.component.key,Object(m.getJSON)("/api/governance_reports/status",{componentKey:e}).catch(d.a)).then(function(e){t.mounted&&t.setState({status:e,loading:!1})},function(){t.mounted&&t.setState({loading:!1})})},t.prototype.render=function(){var e=this.props.component,t=this.state,n=t.status;return t.loading?r.createElement("div",null,this.renderHeader(),r.createElement("i",{className:"spinner"})):n?r.createElement("div",null,this.renderHeader(),!n.canDownload&&r.createElement("div",{className:"note js-report-cant-download"},Object(c.l)("report.cant_download")),n.canDownload&&r.createElement("div",{className:"js-report-can-download"},Object(c.l)("report.can_download"),r.createElement("div",{className:"spacer-top"},r.createElement("a",{className:"button js-report-download",href:function(e){return window.baseUrl+"/api/governance_reports/download?componentKey="+encodeURIComponent(e)}(e.key),target:"_blank",download:e.name+" - Executive Report.pdf"},Object(c.l)("report.print")))),n.canSubscribe&&r.createElement(g,{component:e.key,status:n})):null},t}(r.PureComponent),O=n(4),j=n(53),N=n(50);function w(e){var t=e.component,n=e.subComponents,i=e.total,o=n.length;if(!o)return null;var u=Object(O.max)(n.map(function(e){return Number(e.measures.ncloc||0)})),p={pathname:"/code",query:{id:t}};return r.createElement("div",{className:"panel panel-white portfolio-sub-components",id:"portfolio-sub-components"},r.createElement("table",{className:"data zebra"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null," "),r.createElement("th",{className:"text-center portfolio-sub-components-cell"},Object(c.l)("metric_domain.Releasability")),r.createElement("th",{className:"text-center portfolio-sub-components-cell"},Object(c.l)("metric_domain.Reliability")),r.createElement("th",{className:"text-center portfolio-sub-components-cell"},Object(c.l)("metric_domain.Security")),r.createElement("th",{className:"text-center portfolio-sub-components-cell"},Object(c.l)("metric_domain.Maintainability")),r.createElement("th",{className:"text-center portfolio-sub-components-cell"},Object(c.l)("metric.ncloc.name")))),r.createElement("tbody",null,n.map(function(e){return r.createElement("tr",{key:e.key},r.createElement("td",null,r.createElement(a.Link,{to:Object(l.r)(e.refKey||e.key),className:"link-with-icon"},r.createElement(j.a,{qualifier:e.qualifier})," ",e.name)),"TRK"===e.qualifier?T(e.measures,"alert_status","LEVEL"):T(e.measures,"releasability_rating","RATING"),T(e.measures,"reliability_rating","RATING"),T(e.measures,"security_rating","RATING"),T(e.measures,"sqale_rating","RATING"),function(e,t){var n=Number(e.ncloc||0),i=t>0?Math.max(1,Math.round(n/t*50)):0;return r.createElement("td",{className:"text-right"},r.createElement("span",{className:"note"},r.createElement(s.a,{metricKey:"ncloc",metricType:"SHORT_INT",value:e.ncloc})),t>0&&r.createElement("svg",{width:"50",height:"16",className:"spacer-left"},r.createElement("rect",{className:"bar-chart-bar",x:"0",y:"3",width:i,height:"10"})))}(e.measures,u))}))),i>o&&r.createElement("footer",{className:"spacer-top note text-center"},Object(c.m)("x_of_y_shown",Object(N.formatMeasure)(o,"INT"),Object(N.formatMeasure)(i,"INT")),r.createElement(a.Link,{to:p,className:"spacer-left"},Object(c.l)("show_more"))))}function T(e,t,n){return r.createElement("td",{className:"text-center"},r.createElement(s.a,{metricKey:t,metricType:n,value:e[t]}))}var x=n(27),S=n(237),k=n(1006);function z(e){var t=e.lastChange;if(!t)return r.createElement("div",{className:"portfolio-freshness"}," ");var n=JSON.parse(t);return r.createElement("div",{className:"portfolio-freshness"},r.createElement(x.b,{defaultMessage:Object(c.l)("portfolio.was_x_y"),id:"portfolio.was_x_y",values:{rating:r.createElement(k.a,{value:n.value,small:!0}),date:r.createElement(S.a,{date:n.date})}}))}function R(e){var t=e.component,n=e.measures,i=n.releasability_rating,o=n.last_change_on_releasability_rating,u=n.releasability_effort;return r.createElement("div",{className:"portfolio-box portfolio-releasability"},r.createElement("h2",{className:"portfolio-box-title"},Object(c.l)("metric_domain.Releasability")),i&&r.createElement(a.Link,{to:Object(l.f)(t,"alert_status"),className:"portfolio-box-rating"},r.createElement(k.a,{value:i})),r.createElement(z,{lastChange:o}),u&&Number(u)>0&&r.createElement("div",{className:"portfolio-effort"},r.createElement(a.Link,{to:Object(l.f)(t,"alert_status")},r.createElement("span",null,r.createElement(s.a,{className:"little-spacer-right",metricKey:"projects",metricType:"SHORT_INT",value:u}),1===Number(u)?"project":"projects"))," ",r.createElement("span",{className:"level level-ERROR level-small"},Object(c.l)("metric.level.ERROR"))))}function P(e){var t=e.component,n=e.effort,i=e.metricKey;return r.createElement("div",{className:"portfolio-effort"},r.createElement(x.b,{defaultMessage:Object(c.l)("portfolio.x_in_y"),id:"portfolio.x_in_y",values:{projects:r.createElement(a.Link,{to:Object(l.f)(t,i)},r.createElement("span",null,r.createElement(s.a,{className:"little-spacer-right",metricKey:"projects",metricType:"SHORT_INT",value:String(n.projects)}),Object(c.l)("projects_"))),rating:r.createElement(k.a,{small:!0,value:n.rating})}}))}var L=n(249);function C(e){var t=e.component,n=e.metric;return r.createElement(a.Link,{className:"button button-small spacer-left text-text-bottom",to:Object(l.f)(t,n)},r.createElement(L.a,{size:14}))}var M=n(276);function q(e){var t=e.component,n=e.metric;return r.createElement(a.Link,{className:"button button-small spacer-left text-text-bottom",to:Object(l.o)(t,n)},r.createElement(M.HistoryIcon,{size:14}))}function W(e){var t=e.component,n=e.metric,i=e.value;return r.createElement(a.Link,{to:Object(l.p)(t,n),className:"portfolio-box-rating"},r.createElement(k.a,{value:i}))}function A(e){var t=e.component,n=e.measures,i=n.reliability_rating,a=n.last_change_on_reliability_rating,o=n.reliability_rating_effort,s=o?JSON.parse(o):void 0;return r.createElement("div",{className:"portfolio-box portfolio-reliability"},r.createElement("h2",{className:"portfolio-box-title"},Object(c.l)("metric_domain.Reliability"),r.createElement(C,{component:t,metric:"Reliability"}),r.createElement(q,{component:t,metric:"reliability_rating"})),i&&r.createElement(W,{component:t,metric:"reliability_rating",value:i}),r.createElement(z,{lastChange:a}),s&&r.createElement(P,{component:t,effort:s,metricKey:"reliability_rating"}))}function I(e){var t=e.component,n=e.measures,i=n.security_rating,a=n.last_change_on_security_rating,o=n.security_rating_effort,s=o?JSON.parse(o):void 0;return r.createElement("div",{className:"portfolio-box portfolio-security"},r.createElement("h2",{className:"portfolio-box-title"},Object(c.l)("metric_domain.Security"),r.createElement(C,{component:t,metric:"Security"}),r.createElement(q,{component:t,metric:"security_rating"})),i&&r.createElement(W,{component:t,metric:"security_rating",value:i}),r.createElement(z,{lastChange:a}),s&&r.createElement(P,{component:t,effort:s,metricKey:"security_rating"}))}function H(e){var t=e.component,n=e.measures,i=n.sqale_rating,a=n.last_change_on_maintainability_rating,o=n.maintainability_rating_effort,s=o?JSON.parse(o):void 0;return r.createElement("div",{className:"portfolio-box portfolio-maintainability"},r.createElement("h2",{className:"portfolio-box-title"},Object(c.l)("metric_domain.Maintainability"),r.createElement(C,{component:t,metric:"Maintainability"}),r.createElement(q,{component:t,metric:"sqale_rating"})),i&&r.createElement(W,{component:t,metric:"sqale_rating",value:i}),r.createElement(z,{lastChange:a}),s&&r.createElement(P,{component:t,effort:s,metricKey:"sqale_rating"}))}var D=n(1009),K=n(1064),F=n(1073),U=n(28),J=n(130),B=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),V=K.a,G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={loading:!0},t.fetchHistory=function(){var e=t.props.component,n=Object(D.j)(Object(J.b)(),Object(J.a)());return(!n||n.length<=0)&&(n=Object(D.j)(D.b,[])),t.setState({loading:!0}),Object(F.a)({component:e,metrics:n.join()}).then(function(e){if(t.mounted){var n={};e.measures.forEach(function(e){var t=e.history.map(function(e){return{date:Object(U.e)(e.date),value:e.value}});n[e.metric]=t}),t.setState({history:n,loading:!1})}},function(){t.mounted&&t.setState({loading:!1})})},t.renderWhenEmpty=function(){return r.createElement("div",{className:"note"},Object(c.l)("component_measures.no_history"))},t}return B(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.fetchHistory()},t.prototype.componentDidUpdate=function(e){e.component!==this.props.component&&this.fetchHistory()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){return r.createElement("div",{className:"big-spacer-bottom"},r.createElement("h4",null,Object(c.l)("project_activity.page")),this.state.loading?r.createElement("i",{className:"spinner"}):void 0!==this.state.history&&r.createElement(V,{history:this.state.history,metrics:this.props.metrics,project:this.props.component,renderWhenEmpty:this.renderWhenEmpty}))},t}(r.PureComponent);var X=["projects","ncloc","ncloc_language_distribution","releasability_rating","releasability_effort","sqale_rating","maintainability_rating_effort","reliability_rating","reliability_rating_effort","security_rating","security_rating_effort","last_change_on_releasability_rating","last_change_on_maintainability_rating","last_change_on_security_rating","last_change_on_reliability_rating"],Y=["ncloc","releasability_rating","security_rating","reliability_rating","sqale_rating","alert_status"];function Q(e){var t={};return e.forEach(function(e){t[e.metric]=e.value}),t}var Z=n(1014),$=n(33),ee=n(43);n(1109);n.d(t,"App",function(){return re});var te=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={loading:!0},t.isEmpty=function(){return void 0===t.state.measures||void 0===t.state.measures.ncloc},t.isNotComputed=function(){return t.state.measures&&void 0===t.state.measures.reliability_rating},t}return te(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.props.fetchMetrics(),this.fetchData()},t.prototype.componentDidUpdate=function(e){e.component!==this.props.component&&this.fetchData()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.fetchData=function(){var e=this;this.setState({loading:!0}),Promise.all([Object(Z.d)({componentKey:this.props.component.key,metricKeys:X.join()}),Object($.h)(this.props.component.key,Y,{ps:20,s:"qualifier"})]).then(function(t){var n=t[0],r=t[1];e.mounted&&e.setState({loading:!1,measures:Q(n),subComponents:r.components.map(function(e){return ne({},e,{measures:Q(e.measures)})}),totalSubComponents:r.paging.total})},function(){e.mounted&&e.setState({loading:!1})})},t.prototype.renderSpinner=function(){return r.createElement("div",{className:"page page-limited"},r.createElement("div",{className:"text-center"},r.createElement("i",{className:"spinner spinner-margin"})))},t.prototype.renderEmpty=function(){return r.createElement("div",{className:"empty-search"},r.createElement("h3",null,Object(c.l)("portfolio.empty")),r.createElement("p",null,Object(c.l)("portfolio.empty.hint")))},t.prototype.renderWhenNotComputed=function(){return r.createElement("div",{className:"empty-search"},r.createElement("h3",null,Object(c.l)("portfolio.not_computed")))},t.prototype.renderMain=function(){var e=this.props.component,t=this.state,n=t.measures,i=t.subComponents,a=t.totalSubComponents;return this.isEmpty()?this.renderEmpty():this.isNotComputed()?this.renderWhenNotComputed():r.createElement("div",null,r.createElement("div",{className:"portfolio-boxes"},r.createElement(R,{component:e.key,measures:n}),r.createElement(A,{component:e.key,measures:n}),r.createElement(I,{component:e.key,measures:n}),r.createElement(H,{component:e.key,measures:n})),void 0!==i&&void 0!==a&&r.createElement(w,{component:e.key,subComponents:i,total:a}))},t.prototype.render=function(){var e=this.props.component,t=this.state,n=t.loading,i=t.measures;return n?this.renderSpinner():r.createElement("div",{className:"page page-limited"},r.createElement("div",{className:"page-with-sidebar"},r.createElement("div",{className:"page-main"},this.renderMain()),r.createElement("aside",{className:"page-sidebar-fixed"},r.createElement("div",{className:"portfolio-meta-card"},r.createElement("h4",{className:"portfolio-meta-header"},Object(c.l)("overview.about_this_portfolio")),!this.isEmpty()&&!this.isNotComputed()&&r.createElement(u,{component:e,measures:i})),r.createElement("div",{className:"portfolio-meta-card"},r.createElement(G,{component:e.key,metrics:this.props.metrics})),r.createElement("div",{className:"portfolio-meta-card"},r.createElement(E,{component:e})))))},t}(r.PureComponent),ie={fetchMetrics:ee.e};t.default=Object(i.connect)(function(e){return{metrics:Object(y.getMetrics)(e)}},ie)(re)},992:function(e,t,n){e.exports=n(1017)()}}]);
//# sourceMappingURL=272.e8303221.chunk.js.map