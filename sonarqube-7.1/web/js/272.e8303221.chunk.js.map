{"version":3,"sources":["webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./src/main/js/components/icons-components/AlertSuccessIcon.tsx","webpack:///./node_modules/react-virtualized/dist/commonjs/AutoSizer/index.js","webpack:///./src/main/js/api/measures.ts","webpack:///./node_modules/react-virtualized/node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack:///./node_modules/react-virtualized/node_modules/prop-types/factoryWithThrowingShims.js","webpack:///./node_modules/react-virtualized/dist/commonjs/AutoSizer/types.js","webpack:///./node_modules/react-virtualized/dist/commonjs/vendor/detectElementResize.js","webpack:///./node_modules/react-virtualized/dist/commonjs/AutoSizer/AutoSizer.js","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./src/main/js/components/charts/Histogram.tsx","webpack:///./src/main/js/components/charts/LanguageDistribution.tsx","webpack:///./src/main/js/components/charts/LanguageDistributionContainer.tsx","webpack:///./src/main/js/components/preview-graph/PreviewGraphTooltipsContent.js","webpack:///./src/main/js/components/preview-graph/PreviewGraphTooltips.js","webpack:///./src/main/js/components/preview-graph/PreviewGraph.js","webpack:///./src/main/js/apps/portfolio/components/Summary.tsx","webpack:///./src/main/js/apps/portfolio/components/Subscription.tsx","webpack:///./src/main/js/api/report.ts","webpack:///./src/main/js/apps/portfolio/components/SubscriptionContainer.tsx","webpack:///./src/main/js/apps/portfolio/components/Report.tsx","webpack:///./src/main/js/apps/portfolio/components/WorstProjects.tsx","webpack:///./src/main/js/apps/portfolio/components/RatingFreshness.tsx","webpack:///./src/main/js/apps/portfolio/components/ReleasabilityBox.tsx","webpack:///./src/main/js/apps/portfolio/components/Effort.tsx","webpack:///./src/main/js/apps/portfolio/components/MeasuresButtonLink.tsx","webpack:///./src/main/js/apps/portfolio/components/HistoryButtonLink.tsx","webpack:///./src/main/js/apps/portfolio/components/MainRating.tsx","webpack:///./src/main/js/apps/portfolio/components/ReliabilityBox.tsx","webpack:///./src/main/js/apps/portfolio/components/SecurityBox.tsx","webpack:///./src/main/js/apps/portfolio/components/MaintainabilityBox.tsx","webpack:///./src/main/js/apps/portfolio/components/Activity.tsx","webpack:///./src/main/js/apps/portfolio/utils.ts","webpack:///./src/main/js/apps/portfolio/components/App.tsx","webpack:///./node_modules/react-virtualized/node_modules/prop-types/index.js"],"names":["_helpers_measures__WEBPACK_IMPORTED_MODULE_5__","__webpack_require__","Measure","_a","className","decimals","metricKey","metricType","small","value","undefined","react__WEBPACK_IMPORTED_MODULE_0__","_ui_Level__WEBPACK_IMPORTED_MODULE_3__","level","formattedValue","Object","tooltip","_utils__WEBPACK_IMPORTED_MODULE_1__","Number","rating","_ui_Rating__WEBPACK_IMPORTED_MODULE_2__","_controls_Tooltip__WEBPACK_IMPORTED_MODULE_4__","overlay","_app_theme__WEBPACK_IMPORTED_MODULE_1__","AlertSuccessIcon","_b","fill","_c","size","width","height","viewBox","version","xmlnsXlink","xmlSpace","style","d","defineProperty","exports","_AutoSizer","_interopRequireDefault","obj","__esModule","default","enumerable","get","getMeasures","data","_helpers_request__WEBPACK_IMPORTED_MODULE_0__","then","r","component","measures","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_1__","getMeasuresAndMeta","componentKey","metrics","additional","__assign","metricKeys","join","getMeasuresForProjects","projectKeys","getCustomMeasures","customMeasures","paging","pageIndex","p","pageSize","ps","total","createCustomMeasure","catch","updateCustomMeasure","deleteCustomMeasure","module","emptyFunction","invariant","ReactPropTypesSecret","shim","props","propName","componentName","location","propFullName","secret","getShim","isRequired","ReactPropTypes","array","bool","func","number","object","string","symbol","any","arrayOf","element","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","configurable","nonce","_window","window","self","this","attachEvent","document","requestFrame","raf","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","fn","setTimeout","cancelFrame","cancel","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","clearTimeout","id","resetTriggers","triggers","__resizeTriggers__","expand","firstElementChild","contract","lastElementChild","expandChild","scrollLeft","scrollWidth","scrollTop","scrollHeight","offsetWidth","offsetHeight","scrollListener","e","target","indexOf","__resizeRAF__","__resizeLast__","checkTriggers","__resizeListeners__","forEach","call","animation","keyframeprefix","animationstartevent","domPrefixes","split","startEvents","pfx","elm","createElement","animationName","i","length","toLowerCase","animationKeyframes","animationStyle","addResizeListener","elementStyle","getComputedStyle","position","getElementById","css","head","getElementsByTagName","type","setAttribute","styleSheet","cssText","appendChild","createTextNode","createStyles","innerHTML","addEventListener","__animationListener__","push","removeResizeListener","detachEvent","splice","removeEventListener","removeChild","_createClass","defineProperties","descriptor","writable","key","Constructor","protoProps","staticProps","prototype","_react2","_detectElementResize2","_possibleConstructorReturn","ReferenceError","babelPluginFlowReactPropTypes_proptype_Size","AutoSizer","_React$PureComponent","_ref","_temp","_this","instance","TypeError","_classCallCheck","_len","arguments","args","Array","_key","__proto__","getPrototypeOf","apply","concat","state","defaultHeight","defaultWidth","_onResize","_this$props","disableHeight","disableWidth","onResize","_parentNode","paddingLeft","parseInt","paddingRight","paddingTop","paddingBottom","newHeight","newWidth","setState","_setRef","autoSizer","_autoSizer","subClass","superClass","create","constructor","setPrototypeOf","_inherits","PureComponent","parentNode","HTMLElement","_detectElementResize","_props","children","_state","outerStyle","overflow","childParams","ref","defaultProps","propTypes","KNOWN_RATINGS","enhanceMeasure","measure","metric","leak","periods","period","find","index","getLeakValue","getRatingTooltip","finalMetricKey","_helpers_measures__WEBPACK_IMPORTED_MODULE_0__","substr","includes","Histogram_DEFAULT_PADDING","_super","Histogram","Histogram_extends","renderBar","xScale","yScale","alignTicks","padding","Math","round","x","range","y","bandwidth","index_js_exposed","renderValue","yValues","Histogram_BAR_HEIGHT","Tooltip","yTooltips","dx","dy","renderTick","yTicks","tick","historyTickClass","renderBars","bars","map","render","availableWidth","d3_scale","domain","d3_array","availableHeight","_","rangeRound","transform","LanguageDistribution_cutLanguageName","name","__webpack_exports__","es","languages","rootReducer","distribution","point","tokens","language","lines","lodash_js_exposed","langKey","l10n","lang","getLanguageName","charts_Histogram","PreviewGraphTooltipsContent_PreviewGraphTooltipsContent","translatedName","index_js_exposed_default","a","ChartLegendIcon","PreviewGraphTooltips","PreviewGraphTooltips_extends","customClass","tooltipIdx","left","tooltipPos","graphWidth","BubblePopup","classnames_default","top","DateFormatter","date","selectedDate","long","series","serie","idx","toString","formatValue","PreviewGraph_GRAPH_PADDING","PreviewGraph_MAX_GRAPH_NB","PreviewGraph_MAX_SERIES_PER_GRAPH","PreviewGraph_PreviewGraph","PreviewGraph","utils","getDisplayedMetrics","graph","customMetrics","getSeries","history","myHistory","displayedMetrics","firstValid","measureHistory","filter","handleClick","context","router","pathname","query","PreviewGraph_assign","project","branches","branchLike","updateTooltip","tooltipXPos","storage","PreviewGraph_extends","componentWillReceiveProps","nextProps","renderTimeline","AutoSizer_default","AdvancedTimeline","endDate","startDate","hideGrid","hideXAxis","interpolate","showAreas","preview_graph_PreviewGraphTooltips","onClick","tabIndex","role","renderWhenEmpty","contextTypes","prop_types","Summary_Summary","projects","ncloc","nclocDistribution","description","react_router_es","to","urls","LanguageDistributionContainer","Subscription","mounted","stopLoading","loading","handleSubscription","subscribed","handleSubscribe","request","throwGlobalError","handleUnsubscribe","getEffectiveFrequencyText","effectiveFrequency","status","componentFrequency","globalFrequency","renderLoading","renderWhenSubscribed","buttons","renderWhenNotSubscribed","Subscription_extends","componentDidMount","componentWillUnmount","inner","hasEmail","currentUser","email","SubscriptionContainer","components_Subscription","Report","renderHeader","Report_extends","loadStatus","canDownload","href","baseUrl","encodeURIComponent","report_getReportUrl","download","canSubscribe","WorstProjects_WorstProjects","subComponents","count","maxLoc","projectsPageUrl","refKey","QualifierIcon","qualifier","WorstProjects_renderCell","barWidth","max","WorstProjects_renderNcloc","helpers_measures","RatingFreshness_RatingFreshness","lastChange","JSON","parse","index_es","defaultMessage","values","Rating","DateFromNow","ReleasabilityBox_ReleasabilityBox","lastReleasabilityChange","effort","Effort_Effort","String","MeasuresButtonLink_MeasuresButtonLink","BubblesIcon","HistoryButtonLink_HistoryButtonLink","icons","MainRating_MainRating","ReliabilityBox_ReliabilityBox","lastReliabilityChange","rawEffort","SecurityBox_SecurityBox","lastSecurityChange","MaintainabilityBox_MaintainabilityBox","lastMaintainabilityChange","Activity_AnyPreviewGraph","Activity","fetchHistory","graphMetrics","time_machine","timeMachine","history_1","analysis","dates","Activity_extends","componentDidUpdate","prevProps","PORTFOLIO_METRICS","SUB_COMPONENTS_METRICS","convertMeasures","result","App_App","App","isEmpty","isNotComputed","App_extends","fetchMetrics","fetchData","Promise","all","api_measures","components","s","App_assign","totalSubComponents","renderSpinner","renderEmpty","renderWhenNotComputed","renderMain","components_Activity","components_Report","App_mapDispatchToProps","rootActions"],"mappings":"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","file":"js/272.e8303221.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getRatingTooltip } from './utils';\nimport Rating from '../ui/Rating';\nimport Level from '../ui/Level';\nimport Tooltips from '../controls/Tooltip';\nimport { formatMeasure } from '../../helpers/measures';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span>{'–'}</span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, { decimals });\n    return <span className={className}>{formattedValue != null ? formattedValue : '–'}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltips overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltips>\n    );\n  }\n  return rating;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { IconProps } from './types';\nimport * as theme from '../../app/theme';\n\nexport default function AlertSuccessIcon({ className, fill = theme.green, size = 16 }: IconProps) {\n  return (\n    <svg\n      className={className}\n      width={size}\n      height={size}\n      viewBox=\"0 0 16 16\"\n      version=\"1.1\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      xmlSpace=\"preserve\">\n      <path\n        style={{ fill }}\n        d=\"M12.607 6.554q0-0.25-0.161-0.411l-0.813-0.804q-0.17-0.17-0.402-0.17t-0.402 0.17l-3.643 3.634-2.018-2.018q-0.17-0.17-0.402-0.17t-0.402 0.17l-0.813 0.804q-0.161 0.161-0.161 0.411 0 0.241 0.161 0.402l3.232 3.232q0.17 0.17 0.402 0.17 0.241 0 0.411-0.17l4.848-4.848q0.161-0.161 0.161-0.402zM14.857 8q0 1.866-0.92 3.442t-2.496 2.496-3.442 0.92-3.442-0.92-2.496-2.496-0.92-3.442 0.92-3.442 2.496-2.496 3.442-0.92 3.442 0.92 2.496 2.496 0.92 3.442z\"\n      />\n    </svg>\n  );\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _AutoSizer = require('./AutoSizer');\n\nObject.defineProperty(exports, 'default', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_AutoSizer).default;\n  }\n});\nObject.defineProperty(exports, 'AutoSizer', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_AutoSizer).default;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, RequestData, postJSON, post } from '../helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { Measure, MeasurePeriod } from '../helpers/measures';\nimport { Metric, CustomMeasure, Paging, BranchParameters } from '../app/types';\nimport { Period } from '../helpers/periods';\n\nexport function getMeasures(\n  data: { componentKey: string; metricKeys: string } & BranchParameters\n): Promise<{ metric: string; value?: string }[]> {\n  return getJSON('/api/measures/component', data).then(r => r.component.measures, throwGlobalError);\n}\n\nexport interface MeasureComponent {\n  key: string;\n  description?: string;\n  measures: Measure[];\n  name: string;\n  qualifier: string;\n}\n\nexport function getMeasuresAndMeta(\n  componentKey: string,\n  metrics: string[],\n  additional: RequestData = {}\n): Promise<{ component: MeasureComponent; metrics?: Metric[]; periods?: Period[] }> {\n  const data = { ...additional, componentKey, metricKeys: metrics.join(',') };\n  return getJSON('/api/measures/component', data);\n}\n\ninterface MeasuresForProjects {\n  component: string;\n  metric: string;\n  periods?: MeasurePeriod[];\n  value?: string;\n}\n\nexport function getMeasuresForProjects(\n  projectKeys: string[],\n  metricKeys: string[]\n): Promise<MeasuresForProjects[]> {\n  return getJSON('/api/measures/search', {\n    projectKeys: projectKeys.join(),\n    metricKeys: metricKeys.join()\n  }).then(r => r.measures);\n}\n\nexport function getCustomMeasures(data: {\n  f?: string;\n  p?: number;\n  projectKey: string;\n  ps?: number;\n}): Promise<{ customMeasures: CustomMeasure[]; paging: Paging }> {\n  return getJSON('/api/custom_measures/search', data).then(\n    r =>\n      ({\n        customMeasures: r.customMeasures,\n        paging: { pageIndex: r.p, pageSize: r.ps, total: r.total }\n      } as any),\n    throwGlobalError\n  );\n}\n\nexport function createCustomMeasure(data: {\n  description?: string;\n  metricKey: string;\n  projectKey: string;\n  value: string;\n}): Promise<CustomMeasure> {\n  return postJSON('/api/custom_measures/create', data).catch(throwGlobalError);\n}\n\nexport function updateCustomMeasure(data: { description?: string; id: string; value?: string }) {\n  return post('/api/custom_measures/update', data).catch(throwGlobalError);\n}\n\nexport function deleteCustomMeasure(data: { id: string }) {\n  return post('/api/custom_measures/delete', data).catch(throwGlobalError);\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar emptyFunction = require('fbjs/lib/emptyFunction');\nvar invariant = require('fbjs/lib/invariant');\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    invariant(\n      false,\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim\n  };\n\n  ReactPropTypes.checkPropTypes = emptyFunction;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","\"use strict\";\n\nif (typeof exports !== \"undefined\") Object.defineProperty(exports, \"babelPluginFlowReactPropTypes_proptype_Size\", {\n  value: {\n    height: require(\"prop-types\").number.isRequired,\n    width: require(\"prop-types\").number.isRequired\n  },\n  configurable: true\n});","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = createDetectElementResize;\n/**\n * Detect Element Resize.\n * https://github.com/sdecima/javascript-detect-element-resize\n * Sebastian Decima\n *\n * Forked from version 0.5.3; includes the following modifications:\n * 1) Guard against unsafe 'window' and 'document' references (to support SSR).\n * 2) Defer initialization code via a top-level function wrapper (to support SSR).\n * 3) Avoid unnecessary reflows by not measuring size for scroll events bubbling from children.\n * 4) Add nonce for style element.\n **/\n\nfunction createDetectElementResize(nonce) {\n  // Check `document` and `window` in case of server-side rendering\n  var _window;\n  if (typeof window !== 'undefined') {\n    _window = window;\n  } else if (typeof self !== 'undefined') {\n    _window = self;\n  } else {\n    _window = this;\n  }\n\n  var attachEvent = typeof document !== 'undefined' && document.attachEvent;\n\n  if (!attachEvent) {\n    var requestFrame = function () {\n      var raf = _window.requestAnimationFrame || _window.mozRequestAnimationFrame || _window.webkitRequestAnimationFrame || function (fn) {\n        return _window.setTimeout(fn, 20);\n      };\n      return function (fn) {\n        return raf(fn);\n      };\n    }();\n\n    var cancelFrame = function () {\n      var cancel = _window.cancelAnimationFrame || _window.mozCancelAnimationFrame || _window.webkitCancelAnimationFrame || _window.clearTimeout;\n      return function (id) {\n        return cancel(id);\n      };\n    }();\n\n    var resetTriggers = function resetTriggers(element) {\n      var triggers = element.__resizeTriggers__,\n          expand = triggers.firstElementChild,\n          contract = triggers.lastElementChild,\n          expandChild = expand.firstElementChild;\n      contract.scrollLeft = contract.scrollWidth;\n      contract.scrollTop = contract.scrollHeight;\n      expandChild.style.width = expand.offsetWidth + 1 + 'px';\n      expandChild.style.height = expand.offsetHeight + 1 + 'px';\n      expand.scrollLeft = expand.scrollWidth;\n      expand.scrollTop = expand.scrollHeight;\n    };\n\n    var checkTriggers = function checkTriggers(element) {\n      return element.offsetWidth != element.__resizeLast__.width || element.offsetHeight != element.__resizeLast__.height;\n    };\n\n    var scrollListener = function scrollListener(e) {\n      // Don't measure (which forces) reflow for scrolls that happen inside of children!\n      if (e.target.className.indexOf('contract-trigger') < 0 && e.target.className.indexOf('expand-trigger') < 0) {\n        return;\n      }\n\n      var element = this;\n      resetTriggers(this);\n      if (this.__resizeRAF__) {\n        cancelFrame(this.__resizeRAF__);\n      }\n      this.__resizeRAF__ = requestFrame(function () {\n        if (checkTriggers(element)) {\n          element.__resizeLast__.width = element.offsetWidth;\n          element.__resizeLast__.height = element.offsetHeight;\n          element.__resizeListeners__.forEach(function (fn) {\n            fn.call(element, e);\n          });\n        }\n      });\n    };\n\n    /* Detect CSS Animations support to detect element display/re-attach */\n    var animation = false,\n        keyframeprefix = '',\n        animationstartevent = 'animationstart',\n        domPrefixes = 'Webkit Moz O ms'.split(' '),\n        startEvents = 'webkitAnimationStart animationstart oAnimationStart MSAnimationStart'.split(' '),\n        pfx = '';\n    {\n      var elm = document.createElement('fakeelement');\n      if (elm.style.animationName !== undefined) {\n        animation = true;\n      }\n\n      if (animation === false) {\n        for (var i = 0; i < domPrefixes.length; i++) {\n          if (elm.style[domPrefixes[i] + 'AnimationName'] !== undefined) {\n            pfx = domPrefixes[i];\n            keyframeprefix = '-' + pfx.toLowerCase() + '-';\n            animationstartevent = startEvents[i];\n            animation = true;\n            break;\n          }\n        }\n      }\n    }\n\n    var animationName = 'resizeanim';\n    var animationKeyframes = '@' + keyframeprefix + 'keyframes ' + animationName + ' { from { opacity: 0; } to { opacity: 0; } } ';\n    var animationStyle = keyframeprefix + 'animation: 1ms ' + animationName + '; ';\n  }\n\n  var createStyles = function createStyles() {\n    if (!document.getElementById('detectElementResize')) {\n      //opacity:0 works around a chrome bug https://code.google.com/p/chromium/issues/detail?id=286360\n      var css = (animationKeyframes ? animationKeyframes : '') + '.resize-triggers { ' + (animationStyle ? animationStyle : '') + 'visibility: hidden; opacity: 0; } ' + '.resize-triggers, .resize-triggers > div, .contract-trigger:before { content: \" \"; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',\n          head = document.head || document.getElementsByTagName('head')[0],\n          style = document.createElement('style');\n\n      style.id = 'detectElementResize';\n      style.type = 'text/css';\n\n      if (nonce != null) {\n        style.setAttribute('nonce', nonce);\n      }\n\n      if (style.styleSheet) {\n        style.styleSheet.cssText = css;\n      } else {\n        style.appendChild(document.createTextNode(css));\n      }\n\n      head.appendChild(style);\n    }\n  };\n\n  var addResizeListener = function addResizeListener(element, fn) {\n    if (attachEvent) {\n      element.attachEvent('onresize', fn);\n    } else {\n      if (!element.__resizeTriggers__) {\n        var elementStyle = _window.getComputedStyle(element);\n        if (elementStyle && elementStyle.position == 'static') {\n          element.style.position = 'relative';\n        }\n        createStyles();\n        element.__resizeLast__ = {};\n        element.__resizeListeners__ = [];\n        (element.__resizeTriggers__ = document.createElement('div')).className = 'resize-triggers';\n        element.__resizeTriggers__.innerHTML = '<div class=\"expand-trigger\"><div></div></div>' + '<div class=\"contract-trigger\"></div>';\n        element.appendChild(element.__resizeTriggers__);\n        resetTriggers(element);\n        element.addEventListener('scroll', scrollListener, true);\n\n        /* Listen for a css animation to detect element display/re-attach */\n        if (animationstartevent) {\n          element.__resizeTriggers__.__animationListener__ = function animationListener(e) {\n            if (e.animationName == animationName) {\n              resetTriggers(element);\n            }\n          };\n          element.__resizeTriggers__.addEventListener(animationstartevent, element.__resizeTriggers__.__animationListener__);\n        }\n      }\n      element.__resizeListeners__.push(fn);\n    }\n  };\n\n  var removeResizeListener = function removeResizeListener(element, fn) {\n    if (attachEvent) {\n      element.detachEvent('onresize', fn);\n    } else {\n      element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn), 1);\n      if (!element.__resizeListeners__.length) {\n        element.removeEventListener('scroll', scrollListener, true);\n        if (element.__resizeTriggers__.__animationListener__) {\n          element.__resizeTriggers__.removeEventListener(animationstartevent, element.__resizeTriggers__.__animationListener__);\n          element.__resizeTriggers__.__animationListener__ = null;\n        }\n        try {\n          element.__resizeTriggers__ = !element.removeChild(element.__resizeTriggers__);\n        } catch (e) {\n          // Preact compat; see developit/preact-compat/issues/228\n        }\n      }\n    }\n  };\n\n  return {\n    addResizeListener: addResizeListener,\n    removeResizeListener: removeResizeListener\n  };\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _detectElementResize = require('../vendor/detectElementResize');\n\nvar _detectElementResize2 = _interopRequireDefault(_detectElementResize);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar babelPluginFlowReactPropTypes_proptype_Size = require('./types').babelPluginFlowReactPropTypes_proptype_Size || require('prop-types').any;\n\n/**\n * Decorator component that automatically adjusts the width and height of a single child.\n * Child component should not be declared as a child but should rather be specified by a `ChildComponent` property.\n * All other properties will be passed through to the child component.\n */\n\nvar AutoSizer = function (_React$PureComponent) {\n  _inherits(AutoSizer, _React$PureComponent);\n\n  function AutoSizer() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, AutoSizer);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = AutoSizer.__proto__ || Object.getPrototypeOf(AutoSizer)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      height: _this.props.defaultHeight || 0,\n      width: _this.props.defaultWidth || 0\n    }, _this._onResize = function () {\n      var _this$props = _this.props,\n          disableHeight = _this$props.disableHeight,\n          disableWidth = _this$props.disableWidth,\n          onResize = _this$props.onResize;\n\n\n      if (_this._parentNode) {\n        // Guard against AutoSizer component being removed from the DOM immediately after being added.\n        // This can result in invalid style values which can result in NaN values if we don't handle them.\n        // See issue #150 for more context.\n\n        var height = _this._parentNode.offsetHeight || 0;\n        var width = _this._parentNode.offsetWidth || 0;\n\n        var style = window.getComputedStyle(_this._parentNode) || {};\n        var paddingLeft = parseInt(style.paddingLeft, 10) || 0;\n        var paddingRight = parseInt(style.paddingRight, 10) || 0;\n        var paddingTop = parseInt(style.paddingTop, 10) || 0;\n        var paddingBottom = parseInt(style.paddingBottom, 10) || 0;\n\n        var newHeight = height - paddingTop - paddingBottom;\n        var newWidth = width - paddingLeft - paddingRight;\n\n        if (!disableHeight && _this.state.height !== newHeight || !disableWidth && _this.state.width !== newWidth) {\n          _this.setState({\n            height: height - paddingTop - paddingBottom,\n            width: width - paddingLeft - paddingRight\n          });\n\n          onResize({ height: height, width: width });\n        }\n      }\n    }, _this._setRef = function (autoSizer) {\n      _this._autoSizer = autoSizer;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(AutoSizer, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var nonce = this.props.nonce;\n\n      if (this._autoSizer && this._autoSizer.parentNode instanceof HTMLElement) {\n        // Delay access of parentNode until mount.\n        // This handles edge-cases where the component has already been unmounted before its ref has been set,\n        // As well as libraries like react-lite which have a slightly different lifecycle.\n        this._parentNode = this._autoSizer.parentNode;\n\n        // Defer requiring resize handler in order to support server-side rendering.\n        // See issue #41\n        this._detectElementResize = (0, _detectElementResize2.default)(nonce);\n        this._detectElementResize.addResizeListener(this._parentNode, this._onResize);\n\n        this._onResize();\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this._detectElementResize && this._parentNode) {\n        this._detectElementResize.removeResizeListener(this._parentNode, this._onResize);\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          children = _props.children,\n          disableHeight = _props.disableHeight,\n          disableWidth = _props.disableWidth;\n      var _state = this.state,\n          height = _state.height,\n          width = _state.width;\n\n      // Outer div should not force width/height since that may prevent containers from shrinking.\n      // Inner component should overflow and use calculated width/height.\n      // See issue #68 for more information.\n\n      var outerStyle = { overflow: 'visible' };\n      var childParams = {};\n\n      if (!disableHeight) {\n        outerStyle.height = 0;\n        childParams.height = height;\n      }\n\n      if (!disableWidth) {\n        outerStyle.width = 0;\n        childParams.width = width;\n      }\n\n      /**\n       * TODO: Avoid rendering children before the initial measurements have been collected.\n       * At best this would just be wasting cycles.\n       * Add this check into version 10 though as it could break too many ref callbacks in version 9.\n       * Note that if default width/height props were provided this would still work with SSR.\n      if (\n        height !== 0 &&\n        width !== 0\n      ) {\n        child = children({ height, width })\n      }\n      */\n\n      return _react2.default.createElement(\n        'div',\n        { ref: this._setRef, style: outerStyle },\n        children(childParams)\n      );\n    }\n  }]);\n\n  return AutoSizer;\n}(_react2.default.PureComponent);\n\nAutoSizer.defaultProps = {\n  onResize: function onResize() {},\n  disableHeight: false,\n  disableWidth: false\n};\nAutoSizer.propTypes = {\n  children: require('prop-types').func.isRequired,\n  defaultHeight: require('prop-types').number,\n  defaultWidth: require('prop-types').number,\n  disableHeight: require('prop-types').bool.isRequired,\n  disableWidth: require('prop-types').bool.isRequired,\n  nonce: require('prop-types').string,\n  onResize: require('prop-types').func.isRequired\n};\nexports.default = AutoSizer;","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport {\n  getRatingTooltip as nextGetRatingTooltip,\n  isDiffMetric,\n  Measure,\n  MeasureEnhanced\n} from '../../helpers/measures';\nimport { Metric } from '../../app/types';\n\nconst KNOWN_RATINGS = ['sqale_rating', 'reliability_rating', 'security_rating'];\n\nexport function enhanceMeasure(\n  measure: Measure,\n  metrics: { [key: string]: Metric }\n): MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: Measure | undefined): string | undefined {\n  if (!measure || !measure.periods) {\n    return undefined;\n  }\n  const period = measure.periods.find(period => period.index === 1);\n  return period && period.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { max } from 'd3-array';\nimport { scaleLinear, scaleBand, ScaleLinear, ScaleBand } from 'd3-scale';\nimport Tooltip from '../controls/Tooltip';\n\ninterface Props {\n  alignTicks?: boolean;\n  bars: number[];\n  height: number;\n  padding?: [number, number, number, number];\n  yTicks?: string[];\n  yTooltips?: string[];\n  yValues?: string[];\n  width: number;\n}\n\nconst BAR_HEIGHT = 10;\nconst DEFAULT_PADDING = [10, 10, 10, 10];\n\ntype XScale = ScaleLinear<number, number>;\ntype YScale = ScaleBand<number>;\n\nexport default class Histogram extends React.PureComponent<Props> {\n  renderBar(d: number, index: number, xScale: XScale, yScale: YScale) {\n    const { alignTicks, padding = DEFAULT_PADDING } = this.props;\n\n    const width = Math.round(xScale(d)) + /* minimum bar width */ 1;\n    const x = xScale.range()[0] + (alignTicks ? padding[3] : 0);\n    const y = Math.round(yScale(index)! + yScale.bandwidth() / 2);\n\n    return <rect className=\"bar-chart-bar\" x={x} y={y} width={width} height={BAR_HEIGHT} />;\n  }\n\n  renderValue(d: number, index: number, xScale: XScale, yScale: YScale) {\n    const { alignTicks, padding = DEFAULT_PADDING, yValues } = this.props;\n\n    const value = yValues && yValues[index];\n\n    if (!value) {\n      return null;\n    }\n\n    const x = xScale(d) + (alignTicks ? padding[3] : 0);\n    const y = Math.round(yScale(index)! + yScale.bandwidth() / 2 + BAR_HEIGHT / 2);\n\n    return (\n      <Tooltip overlay={this.props.yTooltips && this.props.yTooltips[index]}>\n        <text className=\"bar-chart-tick histogram-value\" x={x} y={y} dx=\"1em\" dy=\"0.3em\">\n          {value}\n        </text>\n      </Tooltip>\n    );\n  }\n\n  renderTick(index: number, xScale: XScale, yScale: YScale) {\n    const { alignTicks, yTicks } = this.props;\n\n    const tick = yTicks && yTicks[index];\n\n    if (!tick) {\n      return null;\n    }\n\n    const x = xScale.range()[0];\n    const y = Math.round(yScale(index)! + yScale.bandwidth() / 2 + BAR_HEIGHT / 2);\n    const historyTickClass = alignTicks ? 'histogram-tick-start' : 'histogram-tick';\n\n    return (\n      <text\n        className={'bar-chart-tick ' + historyTickClass}\n        x={x}\n        y={y}\n        dx={alignTicks ? 0 : '-1em'}\n        dy=\"0.3em\">\n        {tick}\n      </text>\n    );\n  }\n\n  renderBars(xScale: XScale, yScale: YScale) {\n    return (\n      <g>\n        {this.props.bars.map((d, index) => {\n          return (\n            <g key={index}>\n              {this.renderBar(d, index, xScale, yScale)}\n              {this.renderValue(d, index, xScale, yScale)}\n              {this.renderTick(index, xScale, yScale)}\n            </g>\n          );\n        })}\n      </g>\n    );\n  }\n\n  render() {\n    const { bars, width, height, padding = DEFAULT_PADDING } = this.props;\n\n    const availableWidth = width - padding[1] - padding[3];\n    const xScale: XScale = scaleLinear()\n      .domain([0, max(bars)!])\n      .range([0, availableWidth]);\n\n    const availableHeight = height - padding[0] - padding[2];\n    const yScale: YScale = scaleBand<number>()\n      .domain(bars.map((_, index) => index))\n      .rangeRound([0, availableHeight]);\n\n    return (\n      <svg className=\"bar-chart\" width={this.props.width} height={this.props.height}>\n        <g transform={`translate(${this.props.alignTicks ? 4 : padding[3]}, ${padding[0]})`}>\n          {this.renderBars(xScale, yScale)}\n        </g>\n      </svg>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { find, sortBy } from 'lodash';\nimport Histogram from './Histogram';\nimport { formatMeasure } from '../../helpers/measures';\nimport { Language } from '../../api/languages';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  alignTicks?: boolean;\n  distribution: string;\n  languages?: Language[];\n  width: number;\n}\n\nexport default function LanguageDistribution(props: Props) {\n  let distribution = props.distribution.split(';').map(point => {\n    const tokens = point.split('=');\n    return { language: tokens[0], lines: parseInt(tokens[1], 10) };\n  });\n\n  distribution = sortBy(distribution, d => -d.lines);\n\n  const data = distribution.map(d => d.lines);\n  const yTicks = distribution.map(d => getLanguageName(d.language)).map(cutLanguageName);\n  const yTooltips = distribution.map(d => (d.lines > 1000 ? formatMeasure(d.lines, 'INT') : ''));\n  const yValues = distribution.map(d => formatMeasure(d.lines, 'SHORT_INT'));\n\n  return (\n    <Histogram\n      alignTicks={props.alignTicks}\n      bars={data}\n      height={distribution.length * 25}\n      padding={[0, 60, 0, 80]}\n      yTicks={yTicks}\n      yTooltips={yTooltips}\n      yValues={yValues}\n      width={props.width}\n    />\n  );\n\n  function getLanguageName(langKey: string) {\n    if (langKey === '<null>') {\n      return translate('unknown');\n    }\n    const lang = find(props.languages, { key: langKey });\n    return lang ? lang.name : langKey;\n  }\n}\n\nfunction cutLanguageName(name: string) {\n  return name.length > 10 ? `${name.substr(0, 7)}...` : name;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport LanguageDistribution from './LanguageDistribution';\nimport { getLanguages } from '../../store/rootReducer';\n\nconst mapStateToProps = (state: any) => ({\n  languages: getLanguages(state)\n});\n\nexport default connect<any, any, any>(mapStateToProps)(LanguageDistribution);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport ChartLegendIcon from '../icons-components/ChartLegendIcon';\n\n/*::\ntype Props = {\n  style: string,\n  translatedName: string,\n  value: string\n};\n*/\n\nexport default function PreviewGraphTooltipsContent({ style, translatedName, value } /*: Props */) {\n  return (\n    <tr className=\"overview-analysis-graph-tooltip-line\">\n      <td className=\"thin\">\n        <ChartLegendIcon\n          className={'little-spacer-right line-chart-legend line-chart-legend-' + style}\n        />\n      </td>\n      <td className=\"overview-analysis-graph-tooltip-value text-right little-spacer-right thin\">\n        {value}\n      </td>\n      <td className=\"text-ellipsis overview-analysis-graph-tooltip-description\">\n        {translatedName}\n      </td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport React from 'react';\nimport classNames from 'classnames';\nimport PreviewGraphTooltipsContent from './PreviewGraphTooltipsContent';\nimport BubblePopup from '../common/BubblePopup';\nimport DateFormatter from '../intl/DateFormatter';\n/*:: import type { Metric } from '../types'; */\n/*:: import type { Serie } from '../charts/AdvancedTimeline'; */\n\n/*::\ntype Props = {\n  formatValue: (number | string) => string,\n  graph: string,\n  graphWidth: number,\n  metrics: Array<Metric>,\n  selectedDate: Date,\n  series: Array<Serie & { translatedName: string }>,\n  tooltipIdx: number,\n  tooltipPos: number\n};\n*/\n\nconst TOOLTIP_WIDTH = 160;\n\nexport default class PreviewGraphTooltips extends React.PureComponent {\n  /*:: props: Props; */\n\n  render() {\n    const { tooltipIdx } = this.props;\n    const top = 16;\n    let left = this.props.tooltipPos;\n    let customClass;\n    if (left > this.props.graphWidth - TOOLTIP_WIDTH) {\n      left -= TOOLTIP_WIDTH;\n      customClass = 'bubble-popup-right';\n    }\n\n    return (\n      <BubblePopup\n        customClass={classNames(customClass, 'disabled-pointer-events')}\n        position={{ top, left, width: TOOLTIP_WIDTH }}>\n        <div className=\"overview-analysis-graph-tooltip\">\n          <div className=\"overview-analysis-graph-tooltip-title\">\n            <DateFormatter date={this.props.selectedDate} long={true} />\n          </div>\n          <table className=\"width-100\">\n            <tbody>\n              {this.props.series.map((serie, idx) => {\n                const point = serie.data[tooltipIdx];\n                if (!point || (!point.y && point.y !== 0)) {\n                  return null;\n                }\n                return (\n                  <PreviewGraphTooltipsContent\n                    key={serie.name}\n                    style={idx.toString()}\n                    translatedName={serie.translatedName}\n                    value={this.props.formatValue(point.y)}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </BubblePopup>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { minBy } from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer';\nimport PreviewGraphTooltips from './PreviewGraphTooltips';\nimport AdvancedTimeline from '../charts/AdvancedTimeline';\nimport {\n  DEFAULT_GRAPH,\n  getDisplayedHistoryMetrics,\n  generateSeries,\n  getSeriesMetricType,\n  hasHistoryDataValue,\n  splitSeriesInGraphs\n} from '../../apps/projectActivity/utils';\nimport { getCustomGraph, getGraph } from '../../helpers/storage';\nimport { formatMeasure, getShortType } from '../../helpers/measures';\nimport { getBranchLikeQuery } from '../../helpers/branches';\n/*:: import type { Serie } from '../charts/AdvancedTimeline'; */\n/*:: import type { History, Metric } from '../../apps/overview/types'; */\n\n/*::\ntype Props = {\n  branchLike?: { id?: string; name: string },\n  history: ?History,\n  metrics: { [string]: Metric },\n  project: string,\n  renderWhenEmpty?: () => void\n};\n*/\n\n/*::\ntype State = {\n  customMetrics: Array<string>,\n  graph: string,\n  selectedDate: ?Date,\n  series: Array<Serie>,\n  tooltipIdx: ?number,\n  tooltipXPos: ?number\n};\n*/\n\nconst GRAPH_PADDING = [4, 0, 4, 0];\nconst MAX_GRAPH_NB = 1;\nconst MAX_SERIES_PER_GRAPH = 3;\n\nexport default class PreviewGraph extends React.PureComponent {\n  /*:: props: Props; */\n  /*:: state: State; */\n\n  static contextTypes = {\n    router: PropTypes.object\n  };\n\n  constructor(props /*: Props */) {\n    super(props);\n    const graph = getGraph();\n    const customMetrics = getCustomGraph();\n    const series = splitSeriesInGraphs(\n      this.getSeries(props.history, graph, customMetrics, props.metrics),\n      MAX_GRAPH_NB,\n      MAX_SERIES_PER_GRAPH\n    );\n    this.state = {\n      customMetrics,\n      graph,\n      selectedDate: null,\n      series: series.length > 0 ? series[0] : [],\n      tooltipIdx: null,\n      tooltipXPos: null\n    };\n  }\n\n  componentWillReceiveProps(nextProps /*: Props */) {\n    if (nextProps.history !== this.props.history || nextProps.metrics !== this.props.metrics) {\n      const graph = getGraph();\n      const customMetrics = getCustomGraph();\n      const series = splitSeriesInGraphs(\n        this.getSeries(nextProps.history, graph, customMetrics, nextProps.metrics),\n        MAX_GRAPH_NB,\n        MAX_SERIES_PER_GRAPH\n      );\n      this.setState({\n        customMetrics,\n        graph,\n        series: series.length > 0 ? series[0] : []\n      });\n    }\n  }\n\n  formatValue = (tick /*: number | string */) =>\n    formatMeasure(tick, getShortType(getSeriesMetricType(this.state.series)));\n\n  getDisplayedMetrics = (graph /*: string */, customMetrics /*: Array<string> */) => {\n    const metrics /*: Array<string> */ = getDisplayedHistoryMetrics(graph, customMetrics);\n    if (!metrics || metrics.length <= 0) {\n      return getDisplayedHistoryMetrics(DEFAULT_GRAPH, customMetrics);\n    }\n    return metrics;\n  };\n\n  getSeries = (\n    history /*: ?History */,\n    graph /*: string */,\n    customMetrics /*: Array<string> */,\n    metrics /*: { [string]: Metric } */\n  ) => {\n    const myHistory = history;\n    if (!myHistory) {\n      return [];\n    }\n    const displayedMetrics = this.getDisplayedMetrics(graph, customMetrics);\n    const firstValid = minBy(\n      displayedMetrics.map(metric => myHistory[metric].find(p => p.value || p.value === 0)),\n      'date'\n    );\n    const measureHistory = displayedMetrics.map(metric => ({\n      metric,\n      history: firstValid\n        ? myHistory[metric].filter(p => p.date >= firstValid.date)\n        : myHistory[metric]\n    }));\n    return generateSeries(measureHistory, graph, metrics, displayedMetrics);\n  };\n\n  handleClick = () => {\n    this.context.router.push({\n      pathname: '/project/activity',\n      query: { id: this.props.project, ...getBranchLikeQuery(this.props.branchLike) }\n    });\n  };\n\n  updateTooltip = (\n    selectedDate /*: ?Date */,\n    tooltipXPos /*: ?number */,\n    tooltipIdx /*: ?number */\n  ) => this.setState({ selectedDate, tooltipXPos, tooltipIdx });\n\n  renderTimeline() {\n    const { graph, selectedDate, series, tooltipIdx, tooltipXPos } = this.state;\n    return (\n      <AutoSizer disableHeight={true}>\n        {({ width }) => (\n          <div>\n            <AdvancedTimeline\n              endDate={null}\n              startDate={null}\n              height={80}\n              width={width}\n              hideGrid={true}\n              hideXAxis={true}\n              interpolate=\"linear\"\n              metricType={getSeriesMetricType(series)}\n              padding={GRAPH_PADDING}\n              series={series}\n              showAreas={['coverage', 'duplications'].includes(graph)}\n              updateTooltip={this.updateTooltip}\n            />\n            {selectedDate != null &&\n              tooltipXPos != null &&\n              tooltipIdx != null && (\n                <PreviewGraphTooltips\n                  formatValue={this.formatValue}\n                  graph={graph}\n                  graphWidth={width}\n                  metrics={this.props.metrics}\n                  selectedDate={selectedDate}\n                  series={series}\n                  tooltipIdx={tooltipIdx}\n                  tooltipPos={tooltipXPos}\n                />\n              )}\n          </div>\n        )}\n      </AutoSizer>\n    );\n  }\n\n  render() {\n    const { series } = this.state;\n    if (!hasHistoryDataValue(series)) {\n      return this.props.renderWhenEmpty ? this.props.renderWhenEmpty() : null;\n    }\n\n    return (\n      <div\n        className=\"overview-analysis-graph big-spacer-bottom spacer-top\"\n        onClick={this.handleClick}\n        tabIndex={0}\n        role=\"link\">\n        {this.renderTimeline()}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport LanguageDistributionContainer from '../../../components/charts/LanguageDistributionContainer';\nimport Measure from '../../../components/measure/Measure';\nimport { translate } from '../../../helpers/l10n';\nimport { getComponentDrilldownUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: { description?: string; key: string };\n  measures: { [key: string]: string | undefined };\n}\n\nexport default function Summary({ component, measures }: Props) {\n  const { projects, ncloc } = measures;\n  const nclocDistribution = measures['ncloc_language_distribution'];\n\n  return (\n    <section className=\"big-spacer-bottom\" id=\"portfolio-summary\">\n      {component.description && <div className=\"big-spacer-bottom\">{component.description}</div>}\n\n      <ul className=\"portfolio-grid\">\n        <li>\n          <div className=\"portfolio-measure-secondary-value\">\n            <Link to={getComponentDrilldownUrl(component.key, 'projects')}>\n              <Measure metricKey=\"projects\" metricType=\"SHORT_INT\" value={projects} />\n            </Link>\n          </div>\n          <div className=\"spacer-top text-muted\">{translate('projects')}</div>\n        </li>\n        <li>\n          <div className=\"portfolio-measure-secondary-value\">\n            <Link to={getComponentDrilldownUrl(component.key, 'ncloc')}>\n              <Measure metricKey=\"ncloc\" metricType=\"SHORT_INT\" value={ncloc} />\n            </Link>\n          </div>\n          <div className=\"spacer-top text-muted\">{translate('metric.ncloc.name')}</div>\n        </li>\n      </ul>\n\n      {nclocDistribution && (\n        <div className=\"big-spacer-top\">\n          <LanguageDistributionContainer distribution={nclocDistribution} width={260} />\n        </div>\n      )}\n    </section>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport AlertSuccessIcon from '../../../components/icons-components/AlertSuccessIcon';\nimport { ReportStatus, subscribe, unsubscribe } from '../../../api/report';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { Button } from '../../../components/ui/buttons';\n\ninterface Props {\n  component: string;\n  currentUser: { email?: string };\n  status: ReportStatus;\n}\n\ninterface State {\n  loading: boolean;\n  subscribed?: boolean;\n}\n\nexport default class Subscription extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = { subscribed: props.status.subscribed, loading: false };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.status.subscribed !== this.props.status.subscribed) {\n      this.setState({ subscribed: nextProps.status.subscribed });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  handleSubscription = (subscribed: boolean) => {\n    if (this.mounted) {\n      this.setState({ loading: false, subscribed });\n    }\n  };\n\n  handleSubscribe = () => {\n    this.setState({ loading: true });\n    subscribe(this.props.component)\n      .then(() => this.handleSubscription(true))\n      .catch(this.stopLoading);\n  };\n\n  handleUnsubscribe = () => {\n    this.setState({ loading: true });\n    unsubscribe(this.props.component)\n      .then(() => this.handleSubscription(false))\n      .catch(this.stopLoading);\n  };\n\n  getEffectiveFrequencyText = () => {\n    const effectiveFrequency =\n      this.props.status.componentFrequency || this.props.status.globalFrequency;\n    return translate('report.frequency', effectiveFrequency, 'effective');\n  };\n\n  renderLoading = () => this.state.loading && <i className=\"spacer-left spinner\" />;\n\n  renderWhenSubscribed = () => (\n    <div className=\"js-subscribed\">\n      <div className=\"spacer-bottom\">\n        <AlertSuccessIcon className=\"pull-left spacer-right\" />\n        <div className=\"overflow-hidden\">\n          {translateWithParameters('report.subscribed', this.getEffectiveFrequencyText())}\n        </div>\n      </div>\n      <Button onClick={this.handleUnsubscribe}>{translate('report.unsubscribe')}</Button>\n      {this.renderLoading()}\n    </div>\n  );\n\n  renderWhenNotSubscribed = () => (\n    <div className=\"js-not-subscribed\">\n      <p className=\"spacer-bottom\">\n        {translateWithParameters('report.unsubscribed', this.getEffectiveFrequencyText())}\n      </p>\n      <Button className=\"js-report-subscribe\" onClick={this.handleSubscribe}>\n        {translate('report.subscribe')}\n      </Button>\n      {this.renderLoading()}\n    </div>\n  );\n\n  render() {\n    const hasEmail = !!this.props.currentUser.email;\n    const { subscribed } = this.state;\n\n    let inner;\n    if (hasEmail) {\n      inner = subscribed ? this.renderWhenSubscribed() : this.renderWhenNotSubscribed();\n    } else {\n      inner = <p className=\"note js-no-email\">{translate('report.no_email_to_subscribe')}</p>;\n    }\n\n    return <div className=\"big-spacer-top js-report-subscription\">{inner}</div>;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\n/*\n* SonarQube\n* Copyright (C) 2009-2016 SonarSource SA\n* mailto:contact AT sonarsource DOT com\n*\n* This program is free software; you can redistribute it and/or\n* modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post } from '../helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface ReportStatus {\n  canDownload?: boolean;\n  canSubscribe: boolean;\n  componentFrequency?: string;\n  globalFrequency: string;\n  subscribed?: boolean;\n}\n\nexport function getReportStatus(component: string): Promise<ReportStatus> {\n  return getJSON('/api/governance_reports/status', { componentKey: component }).catch(\n    throwGlobalError\n  );\n}\n\nexport function getReportUrl(component: string): string {\n  return (\n    (window as any).baseUrl +\n    '/api/governance_reports/download?componentKey=' +\n    encodeURIComponent(component)\n  );\n}\n\nexport function subscribe(component: string): Promise<void | Response> {\n  return post('/api/governance_reports/subscribe', { componentKey: component }).catch(\n    throwGlobalError\n  );\n}\n\nexport function unsubscribe(component: string): Promise<void | Response> {\n  return post('/api/governance_reports/unsubscribe', { componentKey: component }).catch(\n    throwGlobalError\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport Subscription from './Subscription';\nimport { getCurrentUser } from '../../../store/rootReducer';\n\nconst mapStateToProps = (state: any) => ({\n  currentUser: getCurrentUser(state)\n});\n\nexport default connect<any, any, any>(mapStateToProps)(Subscription);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SubscriptionContainer from './SubscriptionContainer';\nimport { getReportStatus, ReportStatus, getReportUrl } from '../../../api/report';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  component: { key: string; name: string };\n}\n\ninterface State {\n  loading: boolean;\n  status?: ReportStatus;\n}\n\nexport default class Report extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadStatus();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadStatus() {\n    getReportStatus(this.props.component.key).then(\n      status => {\n        if (this.mounted) {\n          this.setState({ status, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  renderHeader = () => <h4>{translate('report.page')}</h4>;\n\n  render() {\n    const { component } = this.props;\n    const { status, loading } = this.state;\n\n    if (loading) {\n      return (\n        <div>\n          {this.renderHeader()}\n          <i className=\"spinner\" />\n        </div>\n      );\n    }\n\n    if (!status) {\n      return null;\n    }\n\n    return (\n      <div>\n        {this.renderHeader()}\n\n        {!status.canDownload && (\n          <div className=\"note js-report-cant-download\">{translate('report.cant_download')}</div>\n        )}\n\n        {status.canDownload && (\n          <div className=\"js-report-can-download\">\n            {translate('report.can_download')}\n            <div className=\"spacer-top\">\n              <a\n                className=\"button js-report-download\"\n                href={getReportUrl(component.key)}\n                target=\"_blank\"\n                download={component.name + ' - Executive Report.pdf'}>\n                {translate('report.print')}\n              </a>\n            </div>\n          </div>\n        )}\n\n        {status.canSubscribe && <SubscriptionContainer component={component.key} status={status} />}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { max } from 'lodash';\nimport { SubComponent } from '../types';\nimport Measure from '../../../components/measure/Measure';\nimport QualifierIcon from '../../../components/shared/QualifierIcon';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { formatMeasure } from '../../../helpers/measures';\nimport { getProjectUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  subComponents: SubComponent[];\n  total: number;\n}\n\nexport default function WorstProjects({ component, subComponents, total }: Props) {\n  const count = subComponents.length;\n\n  if (!count) {\n    return null;\n  }\n\n  const maxLoc = max(\n    subComponents.map(component => Number(component.measures['ncloc'] || 0))\n  ) as number;\n\n  const projectsPageUrl = { pathname: '/code', query: { id: component } };\n\n  return (\n    <div className=\"panel panel-white portfolio-sub-components\" id=\"portfolio-sub-components\">\n      <table className=\"data zebra\">\n        <thead>\n          <tr>\n            <th>&nbsp;</th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric_domain.Releasability')}\n            </th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric_domain.Reliability')}\n            </th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric_domain.Security')}\n            </th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric_domain.Maintainability')}\n            </th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric.ncloc.name')}\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          {subComponents.map(component => (\n            <tr key={component.key}>\n              <td>\n                <Link\n                  to={getProjectUrl(component.refKey || component.key)}\n                  className=\"link-with-icon\">\n                  <QualifierIcon qualifier={component.qualifier} /> {component.name}\n                </Link>\n              </td>\n              {component.qualifier === 'TRK'\n                ? renderCell(component.measures, 'alert_status', 'LEVEL')\n                : renderCell(component.measures, 'releasability_rating', 'RATING')}\n              {renderCell(component.measures, 'reliability_rating', 'RATING')}\n              {renderCell(component.measures, 'security_rating', 'RATING')}\n              {renderCell(component.measures, 'sqale_rating', 'RATING')}\n              {renderNcloc(component.measures, maxLoc)}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      {total > count && (\n        <footer className=\"spacer-top note text-center\">\n          {translateWithParameters(\n            'x_of_y_shown',\n            formatMeasure(count, 'INT'),\n            formatMeasure(total, 'INT')\n          )}\n          <Link to={projectsPageUrl} className=\"spacer-left\">\n            {translate('show_more')}\n          </Link>\n        </footer>\n      )}\n    </div>\n  );\n}\n\nfunction renderCell(measures: { [key: string]: string | undefined }, metric: string, type: string) {\n  return (\n    <td className=\"text-center\">\n      <Measure metricKey={metric} metricType={type} value={measures[metric]} />\n    </td>\n  );\n}\n\nfunction renderNcloc(measures: { [key: string]: string | undefined }, maxLoc: number) {\n  const ncloc = Number(measures['ncloc'] || 0);\n  const barWidth = maxLoc > 0 ? Math.max(1, Math.round(ncloc / maxLoc * 50)) : 0;\n  return (\n    <td className=\"text-right\">\n      <span className=\"note\">\n        <Measure metricKey=\"ncloc\" metricType=\"SHORT_INT\" value={measures['ncloc']} />\n      </span>\n      {maxLoc > 0 && (\n        <svg width=\"50\" height=\"16\" className=\"spacer-left\">\n          <rect className=\"bar-chart-bar\" x=\"0\" y=\"3\" width={barWidth} height=\"10\" />\n        </svg>\n      )}\n    </td>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport DateFromNow from '../../../components/intl/DateFromNow';\nimport Rating from '../../../components/ui/Rating';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  lastChange?: string;\n}\n\nexport default function RatingFreshness({ lastChange }: Props) {\n  if (!lastChange) {\n    return <div className=\"portfolio-freshness\">&nbsp;</div>;\n  }\n\n  const data = JSON.parse(lastChange);\n\n  return (\n    <div className=\"portfolio-freshness\">\n      <FormattedMessage\n        defaultMessage={translate('portfolio.was_x_y')}\n        id=\"portfolio.was_x_y\"\n        values={{\n          rating: <Rating value={data.value} small={true} />,\n          date: <DateFromNow date={data.date} />\n        }}\n      />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport RatingFreshness from './RatingFreshness';\nimport Rating from '../../../components/ui/Rating';\nimport Measure from '../../../components/measure/Measure';\nimport { translate } from '../../../helpers/l10n';\nimport { getComponentDrilldownUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  measures: { [key: string]: string | undefined };\n}\n\nexport default function ReleasabilityBox({ component, measures }: Props) {\n  const rating = measures['releasability_rating'];\n  const lastReleasabilityChange = measures['last_change_on_releasability_rating'];\n  const effort = measures['releasability_effort'];\n\n  return (\n    <div className=\"portfolio-box portfolio-releasability\">\n      <h2 className=\"portfolio-box-title\">{translate('metric_domain.Releasability')}</h2>\n\n      {rating && (\n        <Link\n          to={getComponentDrilldownUrl(component, 'alert_status')}\n          className=\"portfolio-box-rating\">\n          <Rating value={rating} />\n        </Link>\n      )}\n\n      <RatingFreshness lastChange={lastReleasabilityChange} />\n\n      {effort &&\n        Number(effort) > 0 && (\n          <div className=\"portfolio-effort\">\n            <Link to={getComponentDrilldownUrl(component, 'alert_status')}>\n              <span>\n                <Measure\n                  className=\"little-spacer-right\"\n                  metricKey=\"projects\"\n                  metricType=\"SHORT_INT\"\n                  value={effort}\n                />\n                {Number(effort) === 1 ? 'project' : 'projects'}\n              </span>\n            </Link>{' '}\n            <span className=\"level level-ERROR level-small\">{translate('metric.level.ERROR')}</span>\n          </div>\n        )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { FormattedMessage } from 'react-intl';\nimport Rating from '../../../components/ui/Rating';\nimport Measure from '../../../components/measure/Measure';\nimport { translate } from '../../../helpers/l10n';\nimport { getComponentDrilldownUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  effort: { projects: number; rating: number };\n  metricKey: string;\n}\n\nexport default function Effort({ component, effort, metricKey }: Props) {\n  return (\n    <div className=\"portfolio-effort\">\n      <FormattedMessage\n        defaultMessage={translate('portfolio.x_in_y')}\n        id=\"portfolio.x_in_y\"\n        values={{\n          projects: (\n            <Link to={getComponentDrilldownUrl(component, metricKey)}>\n              <span>\n                <Measure\n                  className=\"little-spacer-right\"\n                  metricKey=\"projects\"\n                  metricType=\"SHORT_INT\"\n                  value={String(effort.projects)}\n                />\n                {translate('projects_')}\n              </span>\n            </Link>\n          ),\n          rating: <Rating small={true} value={effort.rating} />\n        }}\n      />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport BubblesIcon from '../../../components/icons-components/BubblesIcon';\nimport { getComponentDrilldownUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  metric: string;\n}\n\nexport default function MeasuresButtonLink({ component, metric }: Props) {\n  return (\n    <Link\n      className=\"button button-small spacer-left text-text-bottom\"\n      to={getComponentDrilldownUrl(component, metric)}>\n      <BubblesIcon size={14} />\n    </Link>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { HistoryIcon } from '../../../components/icons-components/icons';\nimport { getMeasureHistoryUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  metric: string;\n}\n\nexport default function HistoryButtonLink({ component, metric }: Props) {\n  return (\n    <Link\n      className=\"button button-small spacer-left text-text-bottom\"\n      to={getMeasureHistoryUrl(component, metric)}>\n      <HistoryIcon size={14} />\n    </Link>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Rating from '../../../components/ui/Rating';\nimport { getMeasureTreemapUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  metric: string;\n  value: string;\n}\n\nexport default function MainRating({ component, metric, value }: Props) {\n  return (\n    <Link to={getMeasureTreemapUrl(component, metric)} className=\"portfolio-box-rating\">\n      <Rating value={value} />\n    </Link>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Effort from './Effort';\nimport MeasuresButtonLink from './MeasuresButtonLink';\nimport HistoryButtonLink from './HistoryButtonLink';\nimport MainRating from './MainRating';\nimport RatingFreshness from './RatingFreshness';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  component: string;\n  measures: { [key: string]: string | undefined };\n}\n\nexport default function ReliabilityBox({ component, measures }: Props) {\n  const rating = measures['reliability_rating'];\n  const lastReliabilityChange = measures['last_change_on_reliability_rating'];\n  const rawEffort = measures['reliability_rating_effort'];\n  const effort = rawEffort ? JSON.parse(rawEffort) : undefined;\n\n  return (\n    <div className=\"portfolio-box portfolio-reliability\">\n      <h2 className=\"portfolio-box-title\">\n        {translate('metric_domain.Reliability')}\n        <MeasuresButtonLink component={component} metric=\"Reliability\" />\n        <HistoryButtonLink component={component} metric=\"reliability_rating\" />\n      </h2>\n\n      {rating && <MainRating component={component} metric=\"reliability_rating\" value={rating} />}\n\n      <RatingFreshness lastChange={lastReliabilityChange} />\n\n      {effort && <Effort component={component} effort={effort} metricKey=\"reliability_rating\" />}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Effort from './Effort';\nimport MeasuresButtonLink from './MeasuresButtonLink';\nimport HistoryButtonLink from './HistoryButtonLink';\nimport RatingFreshness from './RatingFreshness';\nimport MainRating from './MainRating';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  component: string;\n  measures: { [key: string]: string | undefined };\n}\n\nexport default function SecurityBox({ component, measures }: Props) {\n  const rating = measures['security_rating'];\n  const lastSecurityChange = measures['last_change_on_security_rating'];\n  const rawEffort = measures['security_rating_effort'];\n  const effort = rawEffort ? JSON.parse(rawEffort) : undefined;\n\n  return (\n    <div className=\"portfolio-box portfolio-security\">\n      <h2 className=\"portfolio-box-title\">\n        {translate('metric_domain.Security')}\n        <MeasuresButtonLink component={component} metric=\"Security\" />\n        <HistoryButtonLink component={component} metric=\"security_rating\" />\n      </h2>\n\n      {rating && <MainRating component={component} metric=\"security_rating\" value={rating} />}\n\n      <RatingFreshness lastChange={lastSecurityChange} />\n\n      {effort && <Effort component={component} effort={effort} metricKey=\"security_rating\" />}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Effort from './Effort';\nimport MainRating from './MainRating';\nimport MeasuresButtonLink from './MeasuresButtonLink';\nimport HistoryButtonLink from './HistoryButtonLink';\nimport RatingFreshness from './RatingFreshness';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  component: string;\n  measures: { [key: string]: string | undefined };\n}\n\nexport default function MaintainabilityBox({ component, measures }: Props) {\n  const rating = measures['sqale_rating'];\n  const lastMaintainabilityChange = measures['last_change_on_maintainability_rating'];\n  const rawEffort = measures['maintainability_rating_effort'];\n  const effort = rawEffort ? JSON.parse(rawEffort) : undefined;\n\n  return (\n    <div className=\"portfolio-box portfolio-maintainability\">\n      <h2 className=\"portfolio-box-title\">\n        {translate('metric_domain.Maintainability')}\n        <MeasuresButtonLink component={component} metric=\"Maintainability\" />\n        <HistoryButtonLink component={component} metric=\"sqale_rating\" />\n      </h2>\n\n      {rating && <MainRating component={component} metric={'sqale_rating'} value={rating} />}\n\n      <RatingFreshness lastChange={lastMaintainabilityChange} />\n\n      {effort && <Effort component={component} effort={effort} metricKey={'sqale_rating'} />}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getDisplayedHistoryMetrics, DEFAULT_GRAPH } from '../../projectActivity/utils';\nimport PreviewGraph from '../../../components/preview-graph/PreviewGraph';\nimport { getAllTimeMachineData, History } from '../../../api/time-machine';\nimport { Metric } from '../../../app/types';\nimport { parseDate } from '../../../helpers/dates';\nimport { translate } from '../../../helpers/l10n';\nimport { getCustomGraph, getGraph } from '../../../helpers/storage';\n\nconst AnyPreviewGraph = PreviewGraph as any;\n\ninterface Props {\n  component: string;\n  metrics: { [key: string]: Metric };\n}\n\ninterface State {\n  history?: History;\n  loading: boolean;\n}\n\nexport default class Activity extends React.PureComponent<Props> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchHistory();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.component !== this.props.component) {\n      this.fetchHistory();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchHistory = () => {\n    const { component } = this.props;\n\n    let graphMetrics: string[] = getDisplayedHistoryMetrics(getGraph(), getCustomGraph());\n    if (!graphMetrics || graphMetrics.length <= 0) {\n      graphMetrics = getDisplayedHistoryMetrics(DEFAULT_GRAPH, []);\n    }\n\n    this.setState({ loading: true });\n    return getAllTimeMachineData({ component, metrics: graphMetrics.join() }).then(\n      timeMachine => {\n        if (this.mounted) {\n          const history: History = {};\n          timeMachine.measures.forEach(measure => {\n            const measureHistory = measure.history.map(analysis => ({\n              date: parseDate(analysis.date),\n              value: analysis.value\n            }));\n            history[measure.metric] = measureHistory;\n          });\n          this.setState({ history, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  renderWhenEmpty = () => <div className=\"note\">{translate('component_measures.no_history')}</div>;\n\n  render() {\n    return (\n      <div className=\"big-spacer-bottom\">\n        <h4>{translate('project_activity.page')}</h4>\n\n        {this.state.loading ? (\n          <i className=\"spinner\" />\n        ) : (\n          this.state.history !== undefined && (\n            <AnyPreviewGraph\n              history={this.state.history}\n              metrics={this.props.metrics}\n              project={this.props.component}\n              renderWhenEmpty={this.renderWhenEmpty}\n            />\n          )\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function getNextRating(rating: number): number | undefined {\n  return rating > 1 ? rating - 1 : undefined;\n}\n\nfunction getWorstSeverity(data: string): { severity: string; count: number } | undefined {\n  const SEVERITY_ORDER = ['BLOCKER', 'CRITICAL', 'MAJOR', 'MINOR', 'INFO'];\n\n  const severities: { [key: string]: number } = {};\n  data.split(';').forEach(equality => {\n    const [key, count] = equality.split('=');\n    severities[key] = Number(count);\n  });\n\n  for (let i = 0; i < SEVERITY_ORDER.length; i++) {\n    const count = severities[SEVERITY_ORDER[i]];\n    if (count > 0) {\n      return { severity: SEVERITY_ORDER[i], count };\n    }\n  }\n\n  return undefined;\n}\n\nexport function getEffortToNextRating(\n  measures: Array<{ metric: { key: string }; value: string }>,\n  metricKey: string\n) {\n  const measure = measures.find(measure => measure.metric.key === metricKey);\n  if (!measure) {\n    return undefined;\n  }\n  return getWorstSeverity(measure.value);\n}\n\nexport const PORTFOLIO_METRICS = [\n  'projects',\n  'ncloc',\n  'ncloc_language_distribution',\n\n  'releasability_rating',\n  'releasability_effort',\n\n  'sqale_rating',\n  'maintainability_rating_effort',\n\n  'reliability_rating',\n  'reliability_rating_effort',\n\n  'security_rating',\n  'security_rating_effort',\n\n  'last_change_on_releasability_rating',\n  'last_change_on_maintainability_rating',\n  'last_change_on_security_rating',\n  'last_change_on_reliability_rating'\n];\n\nexport const SUB_COMPONENTS_METRICS = [\n  'ncloc',\n  'releasability_rating',\n  'security_rating',\n  'reliability_rating',\n  'sqale_rating',\n  'alert_status'\n];\n\nexport function convertMeasures(measures: Array<{ metric: string; value?: string }>) {\n  const result: { [key: string]: string | undefined } = {};\n  measures.forEach(measure => {\n    result[measure.metric] = measure.value;\n  });\n  return result;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport Summary from './Summary';\nimport Report from './Report';\nimport WorstProjects from './WorstProjects';\nimport ReleasabilityBox from './ReleasabilityBox';\nimport ReliabilityBox from './ReliabilityBox';\nimport SecurityBox from './SecurityBox';\nimport MaintainabilityBox from './MaintainabilityBox';\nimport Activity from './Activity';\nimport { SubComponent } from '../types';\nimport { PORTFOLIO_METRICS, SUB_COMPONENTS_METRICS, convertMeasures } from '../utils';\nimport { getMeasures } from '../../../api/measures';\nimport { getChildren } from '../../../api/components';\nimport { translate } from '../../../helpers/l10n';\nimport { fetchMetrics } from '../../../store/rootActions';\nimport { getMetrics } from '../../../store/rootReducer';\nimport { Metric, Component } from '../../../app/types';\nimport '../styles.css';\n\ninterface OwnProps {\n  component: Component;\n}\n\ninterface StateToProps {\n  metrics: { [key: string]: Metric };\n}\n\ninterface DispatchToProps {\n  fetchMetrics: () => void;\n}\n\ntype Props = StateToProps & DispatchToProps & OwnProps;\n\ninterface State {\n  loading: boolean;\n  measures?: { [key: string]: string | undefined };\n  subComponents?: SubComponent[];\n  totalSubComponents?: number;\n}\n\nexport class App extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.props.fetchMetrics();\n    this.fetchData();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.component !== this.props.component) {\n      this.fetchData();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchData() {\n    this.setState({ loading: true });\n    Promise.all([\n      getMeasures({ componentKey: this.props.component.key, metricKeys: PORTFOLIO_METRICS.join() }),\n      getChildren(this.props.component.key, SUB_COMPONENTS_METRICS, { ps: 20, s: 'qualifier' })\n    ]).then(\n      ([measures, subComponents]) => {\n        if (this.mounted) {\n          this.setState({\n            loading: false,\n            measures: convertMeasures(measures),\n            subComponents: subComponents.components.map((component: any) => ({\n              ...component,\n              measures: convertMeasures(component.measures)\n            })),\n            totalSubComponents: subComponents.paging.total\n          });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  isEmpty = () => this.state.measures === undefined || this.state.measures['ncloc'] === undefined;\n\n  isNotComputed = () =>\n    this.state.measures && this.state.measures['reliability_rating'] === undefined;\n\n  renderSpinner() {\n    return (\n      <div className=\"page page-limited\">\n        <div className=\"text-center\">\n          <i className=\"spinner spinner-margin\" />\n        </div>\n      </div>\n    );\n  }\n\n  renderEmpty() {\n    return (\n      <div className=\"empty-search\">\n        <h3>{translate('portfolio.empty')}</h3>\n        <p>{translate('portfolio.empty.hint')}</p>\n      </div>\n    );\n  }\n\n  renderWhenNotComputed() {\n    return (\n      <div className=\"empty-search\">\n        <h3>{translate('portfolio.not_computed')}</h3>\n      </div>\n    );\n  }\n\n  renderMain() {\n    const { component } = this.props;\n    const { measures, subComponents, totalSubComponents } = this.state;\n\n    if (this.isEmpty()) {\n      return this.renderEmpty();\n    }\n\n    if (this.isNotComputed()) {\n      return this.renderWhenNotComputed();\n    }\n\n    return (\n      <div>\n        <div className=\"portfolio-boxes\">\n          <ReleasabilityBox component={component.key} measures={measures!} />\n          <ReliabilityBox component={component.key} measures={measures!} />\n          <SecurityBox component={component.key} measures={measures!} />\n          <MaintainabilityBox component={component.key} measures={measures!} />\n        </div>\n\n        {subComponents !== undefined &&\n          totalSubComponents !== undefined && (\n            <WorstProjects\n              component={component.key}\n              subComponents={subComponents}\n              total={totalSubComponents}\n            />\n          )}\n      </div>\n    );\n  }\n\n  render() {\n    const { component } = this.props;\n    const { loading, measures } = this.state;\n\n    if (loading) {\n      return this.renderSpinner();\n    }\n\n    return (\n      <div className=\"page page-limited\">\n        <div className=\"page-with-sidebar\">\n          <div className=\"page-main\">{this.renderMain()}</div>\n\n          <aside className=\"page-sidebar-fixed\">\n            <div className=\"portfolio-meta-card\">\n              <h4 className=\"portfolio-meta-header\">\n                {translate('overview.about_this_portfolio')}\n              </h4>\n              {!this.isEmpty() &&\n                !this.isNotComputed() && <Summary component={component} measures={measures!} />}\n            </div>\n\n            <div className=\"portfolio-meta-card\">\n              <Activity component={component.key} metrics={this.props.metrics} />\n            </div>\n\n            <div className=\"portfolio-meta-card\">\n              <Report component={component} />\n            </div>\n          </aside>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapDispatchToProps: DispatchToProps = { fetchMetrics };\n\nconst mapStateToProps = (state: any): StateToProps => ({\n  metrics: getMetrics(state)\n});\n\nexport default connect<StateToProps, DispatchToProps, Props>(mapStateToProps, mapDispatchToProps)(\n  App\n);\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var REACT_ELEMENT_TYPE = (typeof Symbol === 'function' &&\n    Symbol.for &&\n    Symbol.for('react.element')) ||\n    0xeac7;\n\n  var isValidElement = function(object) {\n    return typeof object === 'object' &&\n      object !== null &&\n      object.$$typeof === REACT_ELEMENT_TYPE;\n  };\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(isValidElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n"],"sourceRoot":""}