{"version":3,"sources":["webpack:///./src/main/js/api/rules.ts","webpack:///./src/main/js/apps/coding-rules/components/RemoveExtendedDescriptionModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsDescription.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsTagsPopup.tsx","webpack:///./src/main/js/components/icons-components/RuleScopeIcon.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsMeta.tsx","webpack:///./src/main/js/apps/coding-rules/components/SimilarRulesFilter.tsx"],"names":["_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_1__","__webpack_require__","getRulesApp","data","Object","_helpers_request__WEBPACK_IMPORTED_MODULE_0__","catch","searchRules","takeFacet","response","property","facet","facets","find","values","getRuleDetails","parameters","getRuleTags","then","r","tags","createRule","rule","error","status","Promise","reject","deleteRule","updateRule","RemoveExtendedDescriptionModal_RemoveExtendedDescriptionModal","_a","onCancel","onSubmit","header","l10n","index_js_exposed","SimpleModal","onClose","onCloseClick","onFormSubmit","submitting","className","buttons","disabled","id","onClick","RuleDetailsDescription_RuleDetailsDescription","_super","RuleDetailsDescription","_this","apply","this","arguments","mounted","state","description","descriptionForm","removeDescriptionModal","handleDescriptionChange","event","setState","currentTarget","value","handleCancelClick","handleSaveClick","updateDescription","handleRemoveDescriptionClick","handleCancelRemoving","handleConfirmRemoving","text","rules","key","props","ruleDetails","markdown_note","organization","onChange","handleExtendDescriptionClick","mdNote","renderDescription","undefined","htmlNote","dangerouslySetInnerHTML","__html","canWrite","renderForm","colSpan","autoFocus","rows","style","width","marginBottom","MarkdownTips","RuleDetailsDescription_extends","prototype","componentDidMount","componentWillUnmount","render","htmlDesc","templateKey","RuleDetailsTagsPopup_LIST_SIZE","RuleDetailsTagsPopup","searchResult","onSearch","query","q","ps","Math","min","length","lodash_js_exposed","concat","sysTags","onSelect","tag","setTags","onUnselect","RuleDetailsTagsPopup_extends","availableTags","TagsSelector","listSize","position","popupPosition","selectedTags","RuleScopeIcon_RuleScopeIcon","_b","fill","_c","size","height","viewBox","version","xmlnsXlink","xmlSpace","d","RuleDetailsMeta_RuleDetailsMeta","RuleDetailsMeta","tagsPopup","handleTagsClick","handleTagsPopupToggle","show","renderType","Tooltip","overlay","type","data-meta","IssueTypeIcon","renderSeverity","SeverityHelper","severity","renderStatus","renderTags","allTags","BubblePopupHelper","isOpen","popup","components_RuleDetailsTagsPopup","onTagsChange","togglePopup","TagsList","allowUpdate","renderCreationDate","DateFormatter","date","createdAt","renderRepository","referencedRepositories","repository","repo","name","langName","renderTemplate","isTemplate","renderParentTemplate","es","to","urls","renderRemediation","debtRemFnType","debtRemFnOffset","debtRemFnCoeff","effortToFixDescription","renderScope","scope","types","Main","RuleDetailsMeta_extends","LinkIcon","hideSimilarRulesFilter","SimilarRulesFilter","onFilterChange","handleLanguageClick","preventDefault","blur","closeDropdown","languages","lang","handleTypeClick","handleSeverityClick","severities","handleTagClick","dataset","__extends","react__WEBPACK_IMPORTED_MODULE_0__","_components_controls_Dropdown__WEBPACK_IMPORTED_MODULE_2__","onToggleClick","open","classnames__WEBPACK_IMPORTED_MODULE_1__","href","_helpers_l10n__WEBPACK_IMPORTED_MODULE_3__","data-field","_components_shared_SeverityHelper__WEBPACK_IMPORTED_MODULE_4__","map","data-tag"],"mappings":"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","file":"js/7.b116b9ba.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { post, getJSON, postJSON } from '../helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { Rule, RuleDetails, RuleActivation } from '../app/types';\n\nexport interface GetRulesAppResponse {\n  canWrite?: boolean;\n  repositories: { key: string; language: string; name: string }[];\n}\n\nexport function getRulesApp(data: {\n  organization: string | undefined;\n}): Promise<GetRulesAppResponse> {\n  return getJSON('/api/rules/app', data).catch(throwGlobalError);\n}\n\nexport interface SearchRulesResponse {\n  actives?: { [rule: string]: RuleActivation[] };\n  facets?: { property: string; values: { count: number; val: string }[] }[];\n  p: number;\n  ps: number;\n  rules: Rule[];\n  total: number;\n}\n\nexport function searchRules(data: {\n  organization: string | undefined;\n  [x: string]: any;\n}): Promise<SearchRulesResponse> {\n  return getJSON('/api/rules/search', data).catch(throwGlobalError);\n}\n\nexport function takeFacet(response: any, property: string) {\n  const facet = response.facets.find((facet: any) => facet.property === property);\n  return facet ? facet.values : [];\n}\n\nexport function getRuleDetails(parameters: {\n  actives?: boolean;\n  key: string;\n  organization: string | undefined;\n}): Promise<{ actives?: RuleActivation[]; rule: RuleDetails }> {\n  return getJSON('/api/rules/show', parameters).catch(throwGlobalError);\n}\n\nexport function getRuleTags(parameters: {\n  organization: string | undefined;\n  ps?: number;\n  q: string;\n}): Promise<string[]> {\n  return getJSON('/api/rules/tags', parameters).then(r => r.tags, throwGlobalError);\n}\n\nexport function createRule(data: {\n  custom_key: string;\n  markdown_description: string;\n  name: string;\n  organization: string | undefined;\n  params?: string;\n  prevent_reactivation?: boolean;\n  severity?: string;\n  status?: string;\n  template_key: string;\n  type?: string;\n}): Promise<RuleDetails> {\n  return postJSON('/api/rules/create', data).then(\n    r => r.rule,\n    error => {\n      // do not show global error if the status code is 409\n      // this case should be handled inside a component\n      if (error && error.response && error.response.status === 409) {\n        return Promise.reject(error.response);\n      } else {\n        return throwGlobalError(error);\n      }\n    }\n  );\n}\n\nexport function deleteRule(parameters: { key: string; organization: string | undefined }) {\n  return post('/api/rules/delete', parameters).catch(throwGlobalError);\n}\n\nexport function updateRule(data: {\n  key: string;\n  markdown_description?: string;\n  markdown_note?: string;\n  name?: string;\n  organization: string | undefined;\n  params?: string;\n  remediation_fn_base_effort?: string;\n  remediation_fn_type?: string;\n  remediation_fy_gap_multiplier?: string;\n  severity?: string;\n  status?: string;\n  tags?: string;\n}): Promise<RuleDetails> {\n  return postJSON('/api/rules/update', data).then(r => r.rule, throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SimpleModal from '../../../components/controls/SimpleModal';\nimport { SubmitButton, ResetButtonLink } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  onCancel: () => void;\n  onSubmit: () => void;\n}\n\nexport default function RemoveExtendedDescriptionModal({ onCancel, onSubmit }: Props) {\n  const header = translate('coding_rules.remove_extended_description');\n  return (\n    <SimpleModal header={header} onClose={onCancel} onSubmit={onSubmit}>\n      {({ onCloseClick, onFormSubmit, submitting }) => (\n        <form onSubmit={onFormSubmit}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n\n          <div className=\"modal-body\">\n            {translate('coding_rules.remove_extended_description.confirm')}\n          </div>\n\n          <footer className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton\n              className=\"button-red\"\n              disabled={submitting}\n              id=\"coding-rules-detail-extend-description-remove-submit\">\n              {translate('remove')}\n            </SubmitButton>\n            <ResetButtonLink onClick={onCloseClick}>{translate('cancel')}</ResetButtonLink>\n          </footer>\n        </form>\n      )}\n    </SimpleModal>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport RemoveExtendedDescriptionModal from './RemoveExtendedDescriptionModal';\nimport { updateRule } from '../../../api/rules';\nimport { RuleDetails } from '../../../app/types';\nimport MarkdownTips from '../../../components/common/MarkdownTips';\nimport { Button, ResetButtonLink } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  canWrite: boolean | undefined;\n  onChange: (newRuleDetails: RuleDetails) => void;\n  organization: string | undefined;\n  ruleDetails: RuleDetails;\n}\n\ninterface State {\n  description: string;\n  descriptionForm: boolean;\n  removeDescriptionModal: boolean;\n  submitting: boolean;\n}\n\nexport default class RuleDetailsDescription extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    description: '',\n    descriptionForm: false,\n    submitting: false,\n    removeDescriptionModal: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleDescriptionChange = (event: React.SyntheticEvent<HTMLTextAreaElement>) =>\n    this.setState({ description: event.currentTarget.value });\n\n  handleCancelClick = () => {\n    this.setState({ descriptionForm: false });\n  };\n\n  handleSaveClick = () => {\n    this.updateDescription(this.state.description);\n  };\n\n  handleRemoveDescriptionClick = () => {\n    this.setState({ removeDescriptionModal: true });\n  };\n\n  handleCancelRemoving = () => this.setState({ removeDescriptionModal: false });\n\n  handleConfirmRemoving = () => {\n    this.setState({ removeDescriptionModal: false });\n    this.updateDescription('');\n  };\n\n  updateDescription = (text: string) => {\n    this.setState({ submitting: true });\n\n    updateRule({\n      key: this.props.ruleDetails.key,\n      /* eslint-disable camelcase */\n      markdown_note: text,\n      /* eslint-enable camelcase*/\n      organization: this.props.organization\n    }).then(\n      ruleDetails => {\n        this.props.onChange(ruleDetails);\n        if (this.mounted) {\n          this.setState({ submitting: false, descriptionForm: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n        }\n      }\n    );\n  };\n\n  handleExtendDescriptionClick = () => {\n    this.setState({\n      // set description` to the current `mdNote` each time the form is open\n      description: this.props.ruleDetails.mdNote || '',\n      descriptionForm: true\n    });\n  };\n\n  renderDescription = () => (\n    <div id=\"coding-rules-detail-description-extra\">\n      {this.props.ruleDetails.htmlNote !== undefined && (\n        <div\n          className=\"rule-desc spacer-bottom markdown\"\n          dangerouslySetInnerHTML={{ __html: this.props.ruleDetails.htmlNote }}\n        />\n      )}\n      {this.props.canWrite && (\n        <Button\n          id=\"coding-rules-detail-extend-description\"\n          onClick={this.handleExtendDescriptionClick}>\n          {translate('coding_rules.extend_description')}\n        </Button>\n      )}\n    </div>\n  );\n\n  renderForm = () => (\n    <div className=\"coding-rules-detail-extend-description-form\">\n      <table className=\"width100\">\n        <tbody>\n          <tr>\n            <td className=\"width100\" colSpan={2}>\n              <textarea\n                autoFocus={true}\n                id=\"coding-rules-detail-extend-description-text\"\n                onChange={this.handleDescriptionChange}\n                rows={4}\n                style={{ width: '100%', marginBottom: 4 }}\n                value={this.state.description}\n              />\n            </td>\n          </tr>\n          <tr>\n            <td>\n              <Button\n                disabled={this.state.submitting}\n                id=\"coding-rules-detail-extend-description-submit\"\n                onClick={this.handleSaveClick}>\n                {translate('save')}\n              </Button>\n              {this.props.ruleDetails.mdNote !== undefined && (\n                <>\n                  <Button\n                    className=\"button-red spacer-left\"\n                    disabled={this.state.submitting}\n                    id=\"coding-rules-detail-extend-description-remove\"\n                    onClick={this.handleRemoveDescriptionClick}>\n                    {translate('remove')}\n                  </Button>\n                  {this.state.removeDescriptionModal && (\n                    <RemoveExtendedDescriptionModal\n                      onCancel={this.handleCancelRemoving}\n                      onSubmit={this.handleConfirmRemoving}\n                    />\n                  )}\n                </>\n              )}\n              <ResetButtonLink\n                className=\"spacer-left\"\n                disabled={this.state.submitting}\n                id=\"coding-rules-detail-extend-description-cancel\"\n                onClick={this.handleCancelClick}>\n                {translate('cancel')}\n              </ResetButtonLink>\n              {this.state.submitting && <i className=\"spinner spacer-left\" />}\n            </td>\n            <td className=\"text-right\">\n              <MarkdownTips />\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n\n  render() {\n    const { ruleDetails } = this.props;\n\n    return (\n      <div className=\"js-rule-description\">\n        <div\n          className=\"coding-rules-detail-description rule-desc markdown\"\n          dangerouslySetInnerHTML={{ __html: ruleDetails.htmlDesc || '' }}\n        />\n\n        {!ruleDetails.templateKey && (\n          <div className=\"coding-rules-detail-description coding-rules-detail-description-extra\">\n            {!this.state.descriptionForm && this.renderDescription()}\n            {this.state.descriptionForm && this.props.canWrite && this.renderForm()}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { without, uniq, difference } from 'lodash';\nimport TagsSelector from '../../../components/tags/TagsSelector';\nimport { getRuleTags } from '../../../api/rules';\nimport { BubblePopupPosition } from '../../../components/common/BubblePopup';\n\ninterface Props {\n  organization: string | undefined;\n  popupPosition?: BubblePopupPosition;\n  setTags: (tags: string[]) => void;\n  sysTags: string[];\n  tags: string[];\n}\n\ninterface State {\n  searchResult: string[];\n}\n\nconst LIST_SIZE = 10;\n\nexport default class RuleDetailsTagsPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { searchResult: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onSearch = (query: string) => {\n    return getRuleTags({\n      q: query,\n      ps: Math.min(this.props.tags.length + LIST_SIZE, 100),\n      organization: this.props.organization\n    }).then(\n      tags => {\n        if (this.mounted) {\n          // systems tags can not be unset, don't display them in the results\n          this.setState({ searchResult: without(tags, ...this.props.sysTags) });\n        }\n      },\n      () => {}\n    );\n  };\n\n  onSelect = (tag: string) => {\n    this.props.setTags(uniq([...this.props.tags, tag]));\n  };\n\n  onUnselect = (tag: string) => {\n    this.props.setTags(without(this.props.tags, tag));\n  };\n\n  render() {\n    const availableTags = difference(this.state.searchResult, this.props.tags);\n    return (\n      <TagsSelector\n        listSize={LIST_SIZE}\n        onSearch={this.onSearch}\n        onSelect={this.onSelect}\n        onUnselect={this.onUnselect}\n        position={this.props.popupPosition || {}}\n        selectedTags={this.props.tags}\n        tags={availableTags}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { IconProps } from './types';\n\nexport default function RuleScopeIcon({ className, fill = 'currentColor', size = 16 }: IconProps) {\n  return (\n    <svg\n      className={className}\n      width={size}\n      height={size}\n      viewBox=\"0 0 16 16\"\n      version=\"1.1\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      xmlSpace=\"preserve\">\n      <path\n        style={{ fill }}\n        d=\"M8 3.071c2.724 0 4.929 2.204 4.929 4.929s-2.204 4.929-4.929 4.929c-2.724 0-4.929-2.204-4.929-4.929s2.204-4.929 4.929-4.929zM8 1.357c-3.669 0-6.643 2.974-6.643 6.643s2.974 6.643 6.643 6.643 6.643-2.974 6.643-6.643-2.974-6.643-6.643-6.643zM8 6.286c0.945 0 1.714 0.769 1.714 1.714s-0.769 1.714-1.714 1.714-1.714-0.769-1.714-1.714 0.769-1.714 1.714-1.714zM8 4.571c-1.893 0-3.429 1.535-3.429 3.429s1.535 3.429 3.429 3.429 3.429-1.535 3.429-3.429-1.535-3.429-3.429-3.429z\"\n      />\n    </svg>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport RuleDetailsTagsPopup from './RuleDetailsTagsPopup';\nimport SimilarRulesFilter from './SimilarRulesFilter';\nimport { Query } from '../query';\nimport { RuleDetails, RuleScope } from '../../../app/types';\nimport { getRuleUrl } from '../../../helpers/urls';\nimport LinkIcon from '../../../components/icons-components/LinkIcon';\nimport RuleScopeIcon from '../../../components/icons-components/RuleScopeIcon';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { translate } from '../../../helpers/l10n';\nimport IssueTypeIcon from '../../../components/ui/IssueTypeIcon';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport BubblePopupHelper from '../../../components/common/BubblePopupHelper';\nimport TagsList from '../../../components/tags/TagsList';\nimport DateFormatter from '../../../components/intl/DateFormatter';\nimport { Button } from '../../../components/ui/buttons';\n\ninterface Props {\n  canWrite: boolean | undefined;\n  hideSimilarRulesFilter?: boolean;\n  onFilterChange: (changes: Partial<Query>) => void;\n  onTagsChange: (tags: string[]) => void;\n  organization: string | undefined;\n  referencedRepositories: { [repository: string]: { key: string; language: string; name: string } };\n  ruleDetails: RuleDetails;\n}\n\ninterface State {\n  tagsPopup: boolean;\n}\n\nexport default class RuleDetailsMeta extends React.PureComponent<Props, State> {\n  state: State = { tagsPopup: false };\n\n  handleTagsClick = () => {\n    this.setState(state => ({ tagsPopup: !state.tagsPopup }));\n  };\n\n  handleTagsPopupToggle = (show: boolean) => this.setState({ tagsPopup: show });\n\n  renderType = () => {\n    const { ruleDetails } = this.props;\n    return (\n      <Tooltip overlay={translate('coding_rules.type.tooltip', ruleDetails.type)}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"type\">\n          <IssueTypeIcon className=\"little-spacer-right\" query={ruleDetails.type} />\n          {translate('issue.type', ruleDetails.type)}\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderSeverity = () => (\n    <Tooltip overlay={translate('default_severity')}>\n      <li className=\"coding-rules-detail-property\" data-meta=\"severity\">\n        <SeverityHelper\n          className=\"display-inline-flex-center\"\n          severity={this.props.ruleDetails.severity}\n        />\n      </li>\n    </Tooltip>\n  );\n\n  renderStatus = () => {\n    const { ruleDetails } = this.props;\n    if (ruleDetails.status === 'READY') {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('status')}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"status\">\n          <span className=\"badge badge-normal-size badge-danger-light\">\n            {translate('rules.status', ruleDetails.status)}\n          </span>\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderTags = () => {\n    const { canWrite, ruleDetails } = this.props;\n    const { sysTags = [], tags = [] } = ruleDetails;\n    const allTags = [...sysTags, ...tags];\n\n    return (\n      <li className=\"coding-rules-detail-property\" data-meta=\"tags\">\n        {this.props.canWrite ? (\n          <BubblePopupHelper\n            isOpen={this.state.tagsPopup}\n            popup={\n              <RuleDetailsTagsPopup\n                organization={this.props.organization}\n                setTags={this.props.onTagsChange}\n                sysTags={sysTags}\n                tags={allTags}\n              />\n            }\n            position=\"bottomleft\"\n            togglePopup={this.handleTagsPopupToggle}>\n            <Button className=\"button-link\" onClick={this.handleTagsClick}>\n              <TagsList\n                allowUpdate={canWrite}\n                tags={allTags.length > 0 ? allTags : [translate('coding_rules.no_tags')]}\n              />\n            </Button>\n          </BubblePopupHelper>\n        ) : (\n          <TagsList\n            allowUpdate={canWrite}\n            className=\"display-flex-center\"\n            tags={allTags.length > 0 ? allTags : [translate('coding_rules.no_tags')]}\n          />\n        )}\n      </li>\n    );\n  };\n\n  renderCreationDate = () => (\n    <li className=\"coding-rules-detail-property\" data-meta=\"available-since\">\n      <span className=\"little-spacer-right\">{translate('coding_rules.available_since')}</span>\n      <DateFormatter date={this.props.ruleDetails.createdAt} />\n    </li>\n  );\n\n  renderRepository = () => {\n    const { referencedRepositories, ruleDetails } = this.props;\n    const repository = referencedRepositories[ruleDetails.repo];\n    if (!repository) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('coding_rules.repository_language')}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"repository\">\n          {repository.name} ({ruleDetails.langName})\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderTemplate = () => {\n    if (!this.props.ruleDetails.isTemplate) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('coding_rules.rule_template.title')}>\n        <li className=\"coding-rules-detail-property\">{translate('coding_rules.rule_template')}</li>\n      </Tooltip>\n    );\n  };\n\n  renderParentTemplate = () => {\n    const { ruleDetails } = this.props;\n    if (!ruleDetails.templateKey) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('coding_rules.custom_rule.title')}>\n        <li className=\"coding-rules-detail-property\">\n          {translate('coding_rules.custom_rule')}\n          {' ('}\n          <Link to={getRuleUrl(ruleDetails.templateKey, this.props.organization)}>\n            {translate('coding_rules.show_template')}\n          </Link>\n          {')'}\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderRemediation = () => {\n    const { ruleDetails } = this.props;\n    if (!ruleDetails.debtRemFnType) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('coding_rules.remediation_function')}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"remediation-function\">\n          {translate('coding_rules.remediation_function', ruleDetails.debtRemFnType)}\n          {':'}\n          {ruleDetails.debtRemFnOffset !== undefined && ` ${ruleDetails.debtRemFnOffset}`}\n          {ruleDetails.debtRemFnCoeff !== undefined && ` +${ruleDetails.debtRemFnCoeff}`}\n          {ruleDetails.effortToFixDescription !== undefined &&\n            ` ${ruleDetails.effortToFixDescription}`}\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderScope = () => {\n    const scope = this.props.ruleDetails.scope || RuleScope.Main;\n    return (\n      <Tooltip overlay={translate('coding_rules.scope.title')}>\n        <li className=\"coding-rules-detail-property\">\n          <RuleScopeIcon className=\"little-spacer-right\" />\n          {translate('coding_rules.scope', scope)}\n        </li>\n      </Tooltip>\n    );\n  };\n\n  render() {\n    const { ruleDetails } = this.props;\n    return (\n      <div className=\"js-rule-meta\">\n        <header className=\"page-header\">\n          <div className=\"pull-right\">\n            <span className=\"note text-middle\">{ruleDetails.key}</span>\n            <Link\n              className=\"coding-rules-detail-permalink link-no-underline spacer-left text-middle\"\n              to={getRuleUrl(ruleDetails.key, this.props.organization)}>\n              <LinkIcon />\n            </Link>\n            {!this.props.hideSimilarRulesFilter && (\n              <SimilarRulesFilter onFilterChange={this.props.onFilterChange} rule={ruleDetails} />\n            )}\n          </div>\n          <h3 className=\"page-title coding-rules-detail-header\">\n            <big>{ruleDetails.name}</big>\n          </h3>\n        </header>\n\n        <ul className=\"coding-rules-detail-properties\">\n          {this.renderType()}\n          {this.renderSeverity()}\n          {this.renderStatus()}\n          {this.renderScope()}\n          {this.renderTags()}\n          {this.renderCreationDate()}\n          {this.renderRepository()}\n          {this.renderTemplate()}\n          {this.renderParentTemplate()}\n          {this.renderRemediation()}\n        </ul>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { Query } from '../query';\nimport { Rule } from '../../../app/types';\nimport Dropdown from '../../../components/controls/Dropdown';\nimport { translate } from '../../../helpers/l10n';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\n\ninterface Props {\n  onFilterChange: (changes: Partial<Query>) => void;\n  rule: Rule;\n}\n\nexport default class SimilarRulesFilter extends React.PureComponent<Props> {\n  closeDropdown?: () => void;\n\n  handleLanguageClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.closeDropdown) {\n      this.closeDropdown();\n    }\n    this.props.onFilterChange({ languages: [this.props.rule.lang] });\n  };\n\n  handleTypeClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.closeDropdown) {\n      this.closeDropdown();\n    }\n    this.props.onFilterChange({ types: [this.props.rule.type] });\n  };\n\n  handleSeverityClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.closeDropdown) {\n      this.closeDropdown();\n    }\n    if (this.props.rule.severity) {\n      this.props.onFilterChange({ severities: [this.props.rule.severity] });\n    }\n  };\n\n  handleTagClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.closeDropdown) {\n      this.closeDropdown();\n    }\n    const { tag } = event.currentTarget.dataset;\n    if (tag) {\n      this.props.onFilterChange({ tags: [tag] });\n    }\n  };\n\n  render() {\n    const { rule } = this.props;\n    const { tags = [], sysTags = [], severity } = rule;\n    const allTags = [...tags, ...sysTags];\n\n    return (\n      <Dropdown>\n        {({ closeDropdown, onToggleClick, open }) => {\n          this.closeDropdown = closeDropdown;\n          return (\n            <div className={classNames('dropdown display-inline-block', { open })}>\n              <a\n                className=\"js-rule-filter link-no-underline spacer-left dropdown-toggle\"\n                href=\"#\"\n                onClick={onToggleClick}>\n                <i className=\"icon-filter icon-half-transparent\" />\n                <i className=\"icon-dropdown little-spacer-left\" />\n              </a>\n              <div className=\"dropdown-menu dropdown-menu-right\">\n                <header className=\"dropdown-header\">\n                  {translate('coding_rules.filter_similar_rules')}\n                </header>\n                <ul className=\"menu\">\n                  <li>\n                    <a data-field=\"language\" href=\"#\" onClick={this.handleLanguageClick}>\n                      {rule.langName}\n                    </a>\n                  </li>\n\n                  <li>\n                    <a data-field=\"type\" href=\"#\" onClick={this.handleTypeClick}>\n                      {translate('issue.type', rule.type)}\n                    </a>\n                  </li>\n\n                  {severity && (\n                    <li>\n                      <a data-field=\"severity\" href=\"#\" onClick={this.handleSeverityClick}>\n                        <SeverityHelper severity={rule.severity} />\n                      </a>\n                    </li>\n                  )}\n\n                  {allTags.length > 0 && (\n                    <>\n                      <li className=\"divider\" />\n                      {allTags.map(tag => (\n                        <li key={tag}>\n                          <a data-field=\"tag\" data-tag={tag} href=\"#\" onClick={this.handleTagClick}>\n                            <i className=\"icon-tags icon-half-transparent little-spacer-right\" />\n                            {tag}\n                          </a>\n                        </li>\n                      ))}\n                    </>\n                  )}\n                </ul>\n              </div>\n            </div>\n          );\n        }}\n      </Dropdown>\n    );\n  }\n}\n"],"sourceRoot":""}