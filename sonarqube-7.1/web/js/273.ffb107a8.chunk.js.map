{"version":3,"sources":["webpack:///./node_modules/react-virtualized/dist/commonjs/AutoSizer/index.js","webpack:///./node_modules/react-virtualized/node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack:///./node_modules/react-virtualized/node_modules/prop-types/factoryWithThrowingShims.js","webpack:///./node_modules/react-virtualized/dist/commonjs/AutoSizer/types.js","webpack:///./node_modules/react-virtualized/dist/commonjs/vendor/detectElementResize.js","webpack:///./node_modules/react-virtualized/dist/commonjs/AutoSizer/AutoSizer.js","webpack:///./src/main/js/components/intl/TimeFormatter.tsx","webpack:///./src/main/js/components/controls/DateRangeInput.tsx","webpack:///./src/main/js/components/common/MultiSelectOption.tsx","webpack:///./src/main/js/components/common/MultiSelect.tsx","webpack:///./src/main/js/api/projectActivity.ts","webpack:///./src/main/js/apps/projectActivity/components/ProjectActivityEventSelectOption.js","webpack:///./src/main/js/apps/projectActivity/components/ProjectActivityEventSelectValue.js","webpack:///./src/main/js/apps/projectActivity/components/ProjectActivityDateInput.js","webpack:///./src/main/js/apps/projectActivity/components/ProjectActivityPageHeader.js","webpack:///./src/main/js/apps/projectActivity/components/EventInner.js","webpack:///./src/main/js/apps/projectActivity/components/forms/ChangeEventForm.js","webpack:///./src/main/js/apps/projectActivity/components/forms/RemoveEventForm.js","webpack:///./src/main/js/apps/projectActivity/components/Event.js","webpack:///./src/main/js/apps/projectActivity/components/Events.js","webpack:///./src/main/js/apps/projectActivity/components/forms/AddEventForm.js","webpack:///./src/main/js/apps/projectActivity/components/forms/RemoveAnalysisForm.js","webpack:///./src/main/js/components/intl/TimeTooltipFormatter.tsx","webpack:///./src/main/js/apps/projectActivity/components/ProjectActivityAnalysis.js","webpack:///./src/main/js/apps/projectActivity/components/ProjectActivityAnalysesList.js","webpack:///./src/main/js/apps/projectActivity/components/forms/AddGraphMetricPopup.tsx","webpack:///./src/main/js/apps/projectActivity/components/forms/AddGraphMetric.js","webpack:///./src/main/js/apps/projectActivity/components/ProjectActivityGraphsHeader.js","webpack:///./src/main/js/components/charts/ZoomTimeLine.js","webpack:///./src/main/js/apps/projectActivity/components/GraphsZoom.js","webpack:///./src/main/js/apps/projectActivity/components/GraphsTooltipsContent.js","webpack:///./src/main/js/apps/projectActivity/components/GraphsTooltipsContentEvents.js","webpack:///./src/main/js/apps/projectActivity/components/GraphsTooltipsContentCoverage.js","webpack:///./src/main/js/apps/projectActivity/components/GraphsTooltipsContentDuplication.js","webpack:///./src/main/js/apps/projectActivity/components/GraphsTooltipsContentIssues.js","webpack:///./src/main/js/apps/projectActivity/components/GraphsTooltips.js","webpack:///./src/main/js/apps/projectActivity/components/GraphsLegendItem.tsx","webpack:///./src/main/js/apps/projectActivity/components/GraphsLegendCustom.js","webpack:///./src/main/js/apps/projectActivity/components/GraphsLegendStatic.js","webpack:///./src/main/js/apps/projectActivity/components/GraphHistory.js","webpack:///./src/main/js/apps/projectActivity/components/GraphsHistory.js","webpack:///./src/main/js/apps/projectActivity/components/ProjectActivityGraphs.js","webpack:///./src/main/js/apps/projectActivity/components/ProjectActivityApp.js","webpack:///./src/main/js/apps/projectActivity/actions.js","webpack:///./src/main/js/apps/projectActivity/components/ProjectActivityAppContainer.js","webpack:///./node_modules/react-virtualized/node_modules/prop-types/index.js","webpack:///./src/main/js/components/common/BubblePopupHelper.tsx"],"names":["Object","defineProperty","exports","value","_AutoSizer","__webpack_require__","_interopRequireDefault","obj","__esModule","default","enumerable","get","module","emptyFunction","invariant","ReactPropTypesSecret","shim","props","propName","componentName","location","propFullName","secret","getShim","isRequired","ReactPropTypes","array","bool","func","number","object","string","symbol","any","arrayOf","element","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","height","width","configurable","nonce","_window","window","self","this","attachEvent","document","requestFrame","raf","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","fn","setTimeout","cancelFrame","cancel","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","clearTimeout","id","resetTriggers","triggers","__resizeTriggers__","expand","firstElementChild","contract","lastElementChild","expandChild","scrollLeft","scrollWidth","scrollTop","scrollHeight","style","offsetWidth","offsetHeight","scrollListener","e","target","className","indexOf","__resizeRAF__","__resizeLast__","checkTriggers","__resizeListeners__","forEach","call","animation","keyframeprefix","animationstartevent","domPrefixes","split","startEvents","pfx","elm","createElement","undefined","animationName","i","length","toLowerCase","animationKeyframes","animationStyle","addResizeListener","elementStyle","getComputedStyle","position","getElementById","css","head","getElementsByTagName","type","setAttribute","styleSheet","cssText","appendChild","createTextNode","createStyles","innerHTML","addEventListener","__animationListener__","push","removeResizeListener","detachEvent","splice","removeEventListener","removeChild","_createClass","defineProperties","descriptor","writable","key","Constructor","protoProps","staticProps","prototype","_react2","_detectElementResize2","_possibleConstructorReturn","ReferenceError","babelPluginFlowReactPropTypes_proptype_Size","AutoSizer","_React$PureComponent","_ref","_temp","_this","instance","TypeError","_classCallCheck","_len","arguments","args","Array","_key","__proto__","getPrototypeOf","apply","concat","state","defaultHeight","defaultWidth","_onResize","_this$props","disableHeight","disableWidth","onResize","_parentNode","paddingLeft","parseInt","paddingRight","paddingTop","paddingBottom","newHeight","newWidth","setState","_setRef","autoSizer","_autoSizer","subClass","superClass","create","constructor","setPrototypeOf","_inherits","PureComponent","parentNode","HTMLElement","_detectElementResize","_props","children","_state","outerStyle","overflow","childParams","ref","defaultProps","propTypes","formatterOption","hour","minute","longFormatterOption","second","TimeFormatter","_a","date","long","react__WEBPACK_IMPORTED_MODULE_0__","react_intl__WEBPACK_IMPORTED_MODULE_1__","__assign","_helpers_dates__WEBPACK_IMPORTED_MODULE_2__","DateRangeInput","_super","handleFromChange","from","onChange","to","toDateInput","focus","handleToChange","__extends","render","classnames__WEBPACK_IMPORTED_MODULE_1__","_DateInput__WEBPACK_IMPORTED_MODULE_2__","currentMonth","data-test","highlightTo","maxDate","placeholder","_helpers_l10n__WEBPACK_IMPORTED_MODULE_3__","highlightFrom","minDate","MultiSelectOption","handleSelect","evt","stopPropagation","preventDefault","currentTarget","blur","disabled","onSelectChange","selected","handleHover","onHover","MultiSelectOption_extends","classnames","icon-checkbox-checked","icon-checkbox-invisible","activeClass","active","index_js_exposed","href","onClick","onFocus","onMouseOver","custom","renderLabel","MultiSelect_MultiSelect","MultiSelect","mounted","handleSelectChange","item","onSelectItem","onUnselectItem","handleSearchChange","onSearchQuery","validateSearchInput","handleElementHover","prevState","activeIdx","getAllElements","handleKeyboard","keyCode","selectNextElement","selectPreviousElement","toggleSelect","query","loading","onSearch","then","stopLoading","isNewElement","onSelect","onUnselect","elem","selectedElements","elements","updateSelectedElements","filterSelected","slice","updateUnselectedElements","listSize","unselectedElements","lodash_js_exposed","setElementActive","idx","allElements","MultiSelect_extends","componentDidMount","container","componentWillReceiveProps","nextProps","totalElements","componentDidUpdate","searchInput","componentWillUnmount","_b","allowSelection","_c","allowNewElements","_d","footerNode","_e","activeElement","showNewElement","infiniteList","listClasses","menu-vertically-limited","spacer-top","with-top-separator","with-bottom-separator","Boolean","div","SearchBox","autoFocus","map","common_MultiSelectOption","l10n","filter","includes","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_1__","getProjectActivity","data","_helpers_request__WEBPACK_IMPORTED_MODULE_0__","catch","createEvent","analysis","name","category","description","r","event","deleteEvent","changeEvent","deleteAnalysis","ProjectActivityEventSelectOption","handleMouseDown","option","handleMouseEnter","handleMouseMove","isFocused","ProjectActivityEventSelectOption_extends","index_js_exposed_default","a","onMouseDown","onMouseEnter","onMouseMove","title","label","ProjectEventIcon","ProjectActivityEventSelectValue_ProjectActivityEventSelectValue","ProjectActivityDateInput","handleChange","handleResetClick","ProjectActivityDateInput_extends","ProjectActivityPageHeader","handleCategoryChange","updateQuery","ProjectActivityPageHeader_extends","eventTypes","project","qualifier","utils","options","Select","clearable","searchable","optionComponent","components_ProjectActivityEventSelectOption","valueComponent","components_ProjectActivityDateInput","EventInner_EventInner","Tooltip","mouseEnterDelay","overlay","ChangeEventForm","closeForm","onClose","changeInput","stopProcessing","processing","stopProcessingAndClose","handleSubmit","ChangeEventForm_extends","header","changeEventButtonText","Modal","contentLabel","onRequestClose","onSubmit","RemoveEventForm","RemoveEventForm_extends","removeEventButtonText","removeEventQuestion","Event","changing","deleting","startChanging","stopChanging","startDeleting","stopDeleting","Event_extends","canAdmin","isOther","isVersion","canChange","canDelete","isFirst","showActions","buttons","forms_ChangeEventForm","forms_RemoveEventForm","Events_Events","sortedEvents","events","components_Event","AddEventForm","open","openForm","addEvent","AddEventForm_extends","renderModal","addEventButtonText","linkComponent","ActionsDropdown","RemoveAnalysisForm","RemoveAnalysisForm_extends","destructive","TimeTooltipFormatter_TimeTooltipFormatter","parsedDate","helpers_dates","formattedTime","dateTime","toISOString","ProjectActivityAnalysis","handleClick","updateSelectedDate","ProjectActivityAnalysis_extends","analysisTitle","hasVersion","find","canAddVersion","canCreateVersion","canAddEvent","canDeleteAnalyses","classnames_default","data-date","valueOf","role","tabIndex","menuPosition","small","toggleClassName","forms_AddEventForm","addVersion","addCustomEvent","forms_RemoveAnalysisForm","ProjectActivityAnalysesList","handleScroll","updateStickyBadges","resetScrollTop","newScrollTop","forceBadgeAlignement","scrollContainer","badges","removeAttribute","classList","remove","scrollToDate","targetDate","analyses","Number","getAttribute","containerHeight","scrollDiff","Math","abs","offsetTop","badge","originOffsetTop","toString","contains","add","selectedDate","ProjectActivityAnalysesList_extends","getElementsByClassName","prevProps","byVersionByDay","hasFilteredData","keys","byDay","initializing","firstAnalysisKey","onScroll","version","days","first","day","data-day","DateFormatter","components_ProjectActivityAnalysis","analysesLoading","AddGraphMetricPopup_AddGraphMetricPopup","metricsTypeFilter","AddGraphMetricPopup_rest","sort","join","BubblePopup","customClass","popupPosition","AddGraphMetric","metrics","selectedMetrics","getLocalizedMetricNameFromKey","getPopupPos","containerPos","top","right","filterMetricsElements","metric","hidden","helpers_measures","getSelectedMetricsElements","toggleForm","Promise","resolve","addMetric","removeMetric","togglePopup","AddGraphMetric_extends","filteredMetrics","BubblePopupHelper","isOpen","offset","horizontal","vertical","popup","DropdownIcon","ProjectActivityGraphsHeader","handleGraphChange","graph","updateGraph","ProjectActivityGraphsHeader_extends","selectOptions","forms_AddGraphMetric","addCustomMetric","removeCustomMetric","ZoomTimeLine","getRatingScale","availableHeight","d3_scale","domain","range","getLevelScale","getYScale","flatData","metricType","d3_array","d","y","nice","getXScale","availableWidth","x","clamp","getScales","padding","series","serie","xScale","yScale","getEventMarker","size","half","handleDoubleClick","xDim","handleZoomUpdate","handleSelectionDrag","checkDelta","deltaX","max","min","handleSelectionHandleDrag","fixedX","handleDirection","handleNewZoomDragStart","overlayLeftPos","getBoundingClientRect","left","newZoomStart","round","handleNewZoomDrag","handleNewZoomDragEnd","xArray","xRange","startDate","invert","endDate","updateZoom","renderBaseLine","x1","x2","y1","y2","renderTicks","format","tickFormat","ticks","tick","index","nextTick","dy","renderLeak","leakPeriodDate","yRange","fill","theme","renderLines","lineGenerator","d3_shape","defined","basisCurve","curve","renderAreas","areaGenerator","y0","renderZoomHandle","react_draggable_default","axis","bounds","xPos","onDrag","fixedPos","direction","onStop","yDim","renderZoom","startX","endX","zoomBoxWidth","showZoomArea","react_draggable","onStart","floor","onDoubleClick","ZoomTimeLine_extends","transform","showXTicks","showAreas","GraphsZoom_GraphsZoom","AutoSizer_default","charts_ZoomTimeLine","graphEndDate","interpolate","metricsType","graphStartDate","updateGraphZoom","GraphsTooltipsContent_GraphsTooltipsContent","translatedName","ChartLegendIcon","GraphsTooltipsContentEvents_GraphsTooltipsContentEvents","addSeparator","colSpan","GraphsTooltipsContentCoverage_GraphsTooltipsContentCoverage","measuresHistory","tooltipIdx","uncovered","measure","coverage","history","uncoveredValue","coverageValue","GraphsTooltipsContentDuplication_GraphsTooltipsContentDuplication","duplicationDensity","duplicationDensityValue","GraphsTooltipsContentIssues_METRIC_RATING","bugs","vulnerabilities","code_smells","GraphsTooltipsContentIssues_GraphsTooltipsContentIssues","rating","ratingValue","Rating","GraphsTooltips","GraphsTooltips_extends","renderContent","point","formatValue","tooltipPos","graphWidth","tooltipContent","DateTimeFormatter","GraphsLegendItem","GraphsLegendItem_extends","isActionable","legendClass","project-activity-graph-legend-actionable","showWarning","AlertWarnIcon","color","ClearIcon","GraphsLegendCustom_GraphsLegendCustom","hasData","legendItem","components_GraphsLegendItem","GraphsLegendStatic_GraphsLegendStatic","GraphHistory","tooltipXPos","formatTooltipValue","updateTooltip","GraphHistory_extends","isCustom","AdvancedTimeline","formatYTick","components_GraphsTooltips","GraphsHistory","getEvents","eventFilter","filteredEvents","reduce","acc","getSelectedDateEvents","GraphsHistory_extends","DeferredSpinner","graphs","components_GraphHistory","ProjectActivityGraphs_MAX_GRAPH_NB","ProjectActivityGraphs_MAX_SERIES_PER_GRAPH","ProjectActivityGraphs","getStateZoomDates","newSeries","newDates","firstValid","p","lastValid","getMetricsTypeFilter","customMetrics","storage","removedMetric","updateQueryDateRange","dates","sortedDates","ProjectActivityGraphs_assign","ProjectActivityGraphs_extends","newGraphs","newState","components_ProjectActivityGraphsHeader","components_GraphsHistory","ProjectActivityApp_ProjectActivityApp","configuration","showHistory","Helmet_default","components_ProjectActivityPageHeader","components_ProjectActivityAnalysesList","components_ProjectActivityGraphs","graphLoading","actions_assign","eventItem","ProjectActivityAppContainer_ProjectActivityAppContainer","ProjectActivityAppContainer","api_projectActivity","ProjectActivityAppContainer_rest","updateGraphData","fetchActivity","ps","additional","parameters","ProjectActivityAppContainer_assign","branches","branchLike","paging","fetchMeasuresHistory","time_machine","component","measures","loadAllActivities","prevResult","pageIndex","pageSize","total","nextPage","result","getTopLevelComponent","current","breadcrumbs","graphMetrics","newQuery","context","router","pathname","shouldRedirect","locationQuery","filtered","some","emptyCustomGraph","initialized","ProjectActivityAppContainer_extends","replace","firstLoadData","topLevelComponent","all","api_metrics","response","contextTypes","prop_types_default","handleKey","handleOutsideClick","popupContainer","getPosition"],"mappings":"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","file":"js/273.ffb107a8.chunk.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _AutoSizer = require('./AutoSizer');\n\nObject.defineProperty(exports, 'default', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_AutoSizer).default;\n  }\n});\nObject.defineProperty(exports, 'AutoSizer', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_AutoSizer).default;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar emptyFunction = require('fbjs/lib/emptyFunction');\nvar invariant = require('fbjs/lib/invariant');\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    invariant(\n      false,\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim\n  };\n\n  ReactPropTypes.checkPropTypes = emptyFunction;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","\"use strict\";\n\nif (typeof exports !== \"undefined\") Object.defineProperty(exports, \"babelPluginFlowReactPropTypes_proptype_Size\", {\n  value: {\n    height: require(\"prop-types\").number.isRequired,\n    width: require(\"prop-types\").number.isRequired\n  },\n  configurable: true\n});","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = createDetectElementResize;\n/**\n * Detect Element Resize.\n * https://github.com/sdecima/javascript-detect-element-resize\n * Sebastian Decima\n *\n * Forked from version 0.5.3; includes the following modifications:\n * 1)Guard against unsafe 'window' and 'document' references (to support SSR).\n * 2)Defer initialization code via a top-level function wrapper (to support SSR).\n * 3) Avoid unnecessary reflows by not measuring size for scroll events bubbling from children.\n * 4) Add nonce for style element.\n **/\n\nfunction createDetectElementResize(nonce) {\n  // Check `document` and `window` in case of server-side rendering\n  var _window;\n  if (typeof window !== 'undefined') {\n    _window = window;\n  } else if (typeof self !== 'undefined') {\n    _window = self;\n  } else {\n    _window = this;\n  }\n\n  var attachEvent = typeof document !== 'undefined' && document.attachEvent;\n\n  if (!attachEvent) {\n    var requestFrame = function () {\n      var raf = _window.requestAnimationFrame || _window.mozRequestAnimationFrame || _window.webkitRequestAnimationFrame || function (fn) {\n        return _window.setTimeout(fn, 20);\n      };\n      return function (fn) {\n        return raf(fn);\n      };\n    }();\n\n    var cancelFrame = function () {\n      var cancel = _window.cancelAnimationFrame || _window.mozCancelAnimationFrame || _window.webkitCancelAnimationFrame || _window.clearTimeout;\n      return function (id) {\n        return cancel(id);\n      };\n    }();\n\n    var resetTriggers = function resetTriggers(element) {\n      var triggers = element.__resizeTriggers__,\n          expand = triggers.firstElementChild,\n          contract = triggers.lastElementChild,\n          expandChild = expand.firstElementChild;\n      contract.scrollLeft = contract.scrollWidth;\n      contract.scrollTop = contract.scrollHeight;\n      expandChild.style.width = expand.offsetWidth + 1 + 'px';\n      expandChild.style.height = expand.offsetHeight + 1 + 'px';\n      expand.scrollLeft = expand.scrollWidth;\n      expand.scrollTop = expand.scrollHeight;\n    };\n\n    var checkTriggers = function checkTriggers(element) {\n      return element.offsetWidth != element.__resizeLast__.width || element.offsetHeight != element.__resizeLast__.height;\n    };\n\n    var scrollListener = function scrollListener(e) {\n      // Don't measure (which forces) reflow for scrolls that happen inside of children!\n      if (e.target.className.indexOf('contract-trigger') < 0 && e.target.className.indexOf('expand-trigger') < 0) {\n        return;\n      }\n\n      var element = this;\n      resetTriggers(this);\n      if (this.__resizeRAF__) {\n        cancelFrame(this.__resizeRAF__);\n      }\n      this.__resizeRAF__ = requestFrame(function () {\n        if (checkTriggers(element)) {\n          element.__resizeLast__.width = element.offsetWidth;\n          element.__resizeLast__.height = element.offsetHeight;\n          element.__resizeListeners__.forEach(function (fn) {\n            fn.call(element, e);\n          });\n        }\n      });\n    };\n\n    /* Detect CSS Animations support to detect element display/re-attach */\n    var animation = false,\n        keyframeprefix = '',\n        animationstartevent = 'animationstart',\n        domPrefixes = 'Webkit Moz O ms'.split(' '),\n        startEvents = 'webkitAnimationStart animationstart oAnimationStart MSAnimationStart'.split(' '),\n        pfx = '';\n    {\n      var elm = document.createElement('fakeelement');\n      if (elm.style.animationName !== undefined) {\n        animation = true;\n      }\n\n      if (animation === false) {\n        for (var i = 0; i < domPrefixes.length; i++) {\n          if (elm.style[domPrefixes[i] + 'AnimationName'] !== undefined) {\n            pfx = domPrefixes[i];\n            keyframeprefix = '-' + pfx.toLowerCase() + '-';\n            animationstartevent = startEvents[i];\n            animation = true;\n            break;\n          }\n        }\n      }\n    }\n\n    var animationName = 'resizeanim';\n    var animationKeyframes = '@' + keyframeprefix + 'keyframes ' + animationName + ' { from { opacity: 0; } to { opacity: 0; } } ';\n    var animationStyle = keyframeprefix + 'animation: 1ms ' + animationName + '; ';\n  }\n\n  var createStyles = function createStyles() {\n    if (!document.getElementById('detectElementResize')) {\n      //opacity:0 works around a chrome bug https://code.google.com/p/chromium/issues/detail?id=286360\n      var css = (animationKeyframes ? animationKeyframes : '') + '.resize-triggers { ' + (animationStyle ? animationStyle : '') + 'visibility: hidden; opacity: 0; } ' + '.resize-triggers, .resize-triggers > div, .contract-trigger:before { content: \" \"; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',\n          head = document.head || document.getElementsByTagName('head')[0],\n          style = document.createElement('style');\n\n      style.id = 'detectElementResize';\n      style.type = 'text/css';\n\n      if (nonce != null) {\n        style.setAttribute('nonce', nonce);\n      }\n\n      if (style.styleSheet) {\n        style.styleSheet.cssText = css;\n      } else {\n        style.appendChild(document.createTextNode(css));\n      }\n\n      head.appendChild(style);\n    }\n  };\n\n  var addResizeListener = function addResizeListener(element, fn) {\n    if (attachEvent) {\n      element.attachEvent('onresize', fn);\n    } else {\n      if (!element.__resizeTriggers__) {\n        var elementStyle = _window.getComputedStyle(element);\n        if (elementStyle && elementStyle.position == 'static') {\n          element.style.position = 'relative';\n        }\n        createStyles();\n        element.__resizeLast__ = {};\n        element.__resizeListeners__ = [];\n        (element.__resizeTriggers__ = document.createElement('div')).className = 'resize-triggers';\n        element.__resizeTriggers__.innerHTML = '<div class=\"expand-trigger\"><div></div></div>' + '<div class=\"contract-trigger\"></div>';\n        element.appendChild(element.__resizeTriggers__);\n        resetTriggers(element);\n        element.addEventListener('scroll', scrollListener, true);\n\n        /* Listen for a css animation to detect element display/re-attach */\n        if (animationstartevent) {\n          element.__resizeTriggers__.__animationListener__ = function animationListener(e) {\n            if (e.animationName == animationName) {\n              resetTriggers(element);\n            }\n          };\n          element.__resizeTriggers__.addEventListener(animationstartevent, element.__resizeTriggers__.__animationListener__);\n        }\n      }\n      element.__resizeListeners__.push(fn);\n    }\n  };\n\n  var removeResizeListener = function removeResizeListener(element, fn) {\n    if (attachEvent) {\n      element.detachEvent('onresize', fn);\n    } else {\n      element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn), 1);\n      if (!element.__resizeListeners__.length) {\n        element.removeEventListener('scroll', scrollListener, true);\n        if (element.__resizeTriggers__.__animationListener__) {\n          element.__resizeTriggers__.removeEventListener(animationstartevent, element.__resizeTriggers__.__animationListener__);\n          element.__resizeTriggers__.__animationListener__ = null;\n        }\n        try {\n          element.__resizeTriggers__ = !element.removeChild(element.__resizeTriggers__);\n        } catch (e) {\n          // Preact compat; see developit/preact-compat/issues/228\n        }\n      }\n    }\n  };\n\n  return {\n    addResizeListener: addResizeListener,\n    removeResizeListener: removeResizeListener\n  };\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _detectElementResize = require('../vendor/detectElementResize');\n\nvar _detectElementResize2 = _interopRequireDefault(_detectElementResize);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar babelPluginFlowReactPropTypes_proptype_Size = require('./types').babelPluginFlowReactPropTypes_proptype_Size || require('prop-types').any;\n\n/**\n * Decorator component that automatically adjusts the width and height of a single child.\n * Child component should not be declared as a child but should rather be specified by a `ChildComponent` property.\n * All other properties will be passed through to the child component.\n */\n\nvar AutoSizer = function (_React$PureComponent) {\n  _inherits(AutoSizer, _React$PureComponent);\n\n  function AutoSizer() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, AutoSizer);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = AutoSizer.__proto__ || Object.getPrototypeOf(AutoSizer)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      height: _this.props.defaultHeight || 0,\n      width: _this.props.defaultWidth || 0\n    }, _this._onResize = function () {\n      var _this$props = _this.props,\n          disableHeight = _this$props.disableHeight,\n          disableWidth = _this$props.disableWidth,\n          onResize = _this$props.onResize;\n\n\n      if (_this._parentNode) {\n        // Guard against AutoSizer component being removed from the DOM immediately after being added.\n        // This can result in invalid style values which can result in NaN values if we don't handle them.\n        // See issue #150 for more context.\n\n        var height = _this._parentNode.offsetHeight || 0;\n        var width = _this._parentNode.offsetWidth || 0;\n\n        var style = window.getComputedStyle(_this._parentNode) || {};\n        var paddingLeft = parseInt(style.paddingLeft, 10) || 0;\n        var paddingRight = parseInt(style.paddingRight, 10) || 0;\n        var paddingTop = parseInt(style.paddingTop, 10) || 0;\n        var paddingBottom = parseInt(style.paddingBottom, 10) || 0;\n\n        var newHeight = height - paddingTop - paddingBottom;\n        var newWidth = width - paddingLeft - paddingRight;\n\n        if (!disableHeight && _this.state.height !== newHeight || !disableWidth && _this.state.width !== newWidth) {\n          _this.setState({\n            height: height - paddingTop - paddingBottom,\n            width: width - paddingLeft - paddingRight\n          });\n\n          onResize({ height: height, width: width });\n        }\n      }\n    }, _this._setRef = function (autoSizer) {\n      _this._autoSizer = autoSizer;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(AutoSizer, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var nonce = this.props.nonce;\n\n      if (this._autoSizer && this._autoSizer.parentNode instanceof HTMLElement) {\n        // Delay access of parentNode until mount.\n        // This handles edge-cases where the component has already been unmounted before its ref has been set,\n        // As well as libraries like react-lite which have a slightly different lifecycle.\n        this._parentNode = this._autoSizer.parentNode;\n\n        // Defer requiring resize handler in order to support server-side rendering.\n        // See issue #41\n        this._detectElementResize = (0, _detectElementResize2.default)(nonce);\n        this._detectElementResize.addResizeListener(this._parentNode, this._onResize);\n\n        this._onResize();\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this._detectElementResize && this._parentNode) {\n        this._detectElementResize.removeResizeListener(this._parentNode, this._onResize);\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          children = _props.children,\n          disableHeight = _props.disableHeight,\n          disableWidth = _props.disableWidth;\n      var _state = this.state,\n          height = _state.height,\n          width = _state.width;\n\n      // Outer div should not force width/height since that may prevent containers from shrinking.\n      // Inner component should overflow and use calculated width/height.\n      // See issue #68 for more information.\n\n      var outerStyle = { overflow: 'visible' };\n      var childParams = {};\n\n      if (!disableHeight) {\n        outerStyle.height = 0;\n        childParams.height = height;\n      }\n\n      if (!disableWidth) {\n        outerStyle.width = 0;\n        childParams.width = width;\n      }\n\n      /**\n       * TODO: Avoid rendering children before the initial measurements have been collected.\n       * At best this would just be wasting cycles.\n       * Add this check into version 10 though as it could break too many ref callbacks in version 9.\n       * Note that if default width/height props were provided this would still work with SSR.\n      if (\n        height !== 0 &&\n        width !== 0\n      ) {\n        child = children({ height, width })\n      }\n      */\n\n      return _react2.default.createElement(\n        'div',\n        { ref: this._setRef, style: outerStyle },\n        children(childParams)\n      );\n    }\n  }]);\n\n  return AutoSizer;\n}(_react2.default.PureComponent);\n\nAutoSizer.defaultProps = {\n  onResize: function onResize() {},\n  disableHeight: false,\n  disableWidth: false\n};\nAutoSizer.propTypes = {\n  children: require('prop-types').func.isRequired,\n  defaultHeight: require('prop-types').number,\n  defaultWidth: require('prop-types').number,\n  disableHeight: require('prop-types').bool.isRequired,\n  disableWidth: require('prop-types').bool.isRequired,\n  nonce: require('prop-types').string,\n  onResize: require('prop-types').func.isRequired\n};\nexports.default = AutoSizer;","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedTime } from 'react-intl';\nimport { parseDate } from '../../helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n  long?: boolean;\n}\n\nexport const formatterOption = { hour: 'numeric', minute: 'numeric' };\n\nexport const longFormatterOption = { hour: 'numeric', minute: 'numeric', second: 'numeric' };\n\nexport default function TimeFormatter({ children, date, long }: Props) {\n  return (\n    <FormattedTime value={parseDate(date)} {...(long ? longFormatterOption : formatterOption)}>\n      {children}\n    </FormattedTime>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport DateInput from './DateInput';\nimport { translate } from '../../helpers/l10n';\n\ntype DateRange = { from?: Date; to?: Date };\n\ninterface Props {\n  className?: string;\n  maxDate?: Date;\n  minDate?: Date;\n  onChange: (date: DateRange) => void;\n  value?: DateRange;\n}\n\nexport default class DateRangeInput extends React.PureComponent<Props> {\n  toDateInput?: DateInput | null;\n\n  get from() {\n    return this.props.value && this.props.value.from;\n  }\n\n  get to() {\n    return this.props.value && this.props.value.to;\n  }\n\n  handleFromChange = (from: Date | undefined) => {\n    this.props.onChange({ from, to: this.to });\n\n    // use `setTimeout` to work around the immediate closing of the `toDateInput`\n    setTimeout(() => {\n      if (from && !this.to && this.toDateInput) {\n        this.toDateInput.focus();\n      }\n    }, 0);\n  };\n\n  handleToChange = (to: Date | undefined) => {\n    this.setState({ to });\n    this.props.onChange({ from: this.from, to });\n  };\n\n  render() {\n    return (\n      <div className={classNames('display-inline-flex-center', this.props.className)}>\n        <DateInput\n          currentMonth={this.to}\n          data-test=\"from\"\n          highlightTo={this.to}\n          maxDate={this.to}\n          onChange={this.handleFromChange}\n          placeholder={translate('start_date')}\n          value={this.from}\n        />\n        <span className=\"note little-spacer-left little-spacer-right\">{translate('to_')}</span>\n        <DateInput\n          currentMonth={this.from}\n          data-test=\"to\"\n          highlightFrom={this.from}\n          minDate={this.from}\n          onChange={this.handleToChange}\n          placeholder={translate('end_date')}\n          ref={element => (this.toDateInput = element)}\n          value={this.to}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\n\ninterface Props {\n  active?: boolean;\n  custom?: boolean;\n  disabled?: boolean;\n  element: string;\n  onHover: (elem: string) => void;\n  onSelectChange: (elem: string, selected: boolean) => void;\n  renderLabel: (element: string) => React.ReactNode;\n  selected?: boolean;\n}\n\nexport default class MultiSelectOption extends React.PureComponent<Props> {\n  handleSelect = (evt: React.SyntheticEvent<HTMLAnchorElement>) => {\n    evt.stopPropagation();\n    evt.preventDefault();\n    evt.currentTarget.blur();\n\n    if (!this.props.disabled) {\n      this.props.onSelectChange(this.props.element, !this.props.selected);\n    }\n  };\n\n  handleHover = () => this.props.onHover(this.props.element);\n\n  render() {\n    const { selected, disabled } = this.props;\n    const className = classNames('icon-checkbox', {\n      'icon-checkbox-checked': selected,\n      'icon-checkbox-invisible': disabled\n    });\n    const activeClass = classNames({ active: this.props.active, disabled });\n\n    return (\n      <li>\n        <a\n          className={activeClass}\n          href=\"#\"\n          onClick={this.handleSelect}\n          onFocus={this.handleHover}\n          onMouseOver={this.handleHover}>\n          <i className={className} /> {this.props.custom && '+ '}\n          {this.props.renderLabel(this.props.element)}\n        </a>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { difference } from 'lodash';\nimport MultiSelectOption from './MultiSelectOption';\nimport SearchBox from '../controls/SearchBox';\nimport { translateWithParameters } from '../../helpers/l10n';\n\ninterface Props {\n  allowNewElements?: boolean;\n  allowSelection?: boolean;\n  elements: string[];\n  filterSelected?: (query: string, selectedElements: string[]) => string[];\n  footerNode?: React.ReactNode;\n  listSize?: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  placeholder: string;\n  renderLabel?: (element: string) => React.ReactNode;\n  selectedElements: string[];\n  validateSearchInput?: (value: string) => string;\n}\n\ninterface State {\n  activeIdx: number;\n  loading: boolean;\n  query: string;\n  selectedElements: string[];\n  unselectedElements: string[];\n}\n\ninterface DefaultProps {\n  filterSelected: (query: string, selectedElements: string[]) => string[];\n  listSize: number;\n  renderLabel: (element: string) => React.ReactNode;\n  validateSearchInput: (value: string) => string;\n}\n\ntype PropsWithDefault = Props & DefaultProps;\n\nexport default class MultiSelect extends React.PureComponent<Props, State> {\n  container?: HTMLDivElement | null;\n  searchInput?: HTMLInputElement | null;\n  mounted = false;\n\n  static defaultProps: DefaultProps = {\n    filterSelected: (query: string, selectedElements: string[]) =>\n      selectedElements.filter(elem => elem.includes(query)),\n    listSize: 0,\n    renderLabel: (element: string) => element,\n    validateSearchInput: (value: string) => value\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      activeIdx: 0,\n      loading: true,\n      query: '',\n      selectedElements: [],\n      unselectedElements: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.onSearchQuery('');\n    this.updateSelectedElements(this.props as PropsWithDefault);\n    this.updateUnselectedElements(this.props as PropsWithDefault);\n    if (this.container) {\n      this.container.addEventListener('keydown', this.handleKeyboard, true);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: PropsWithDefault) {\n    if (\n      this.props.elements !== nextProps.elements ||\n      this.props.selectedElements !== nextProps.selectedElements\n    ) {\n      this.updateSelectedElements(nextProps);\n      this.updateUnselectedElements(nextProps);\n\n      const totalElements = this.getAllElements(nextProps, this.state).length;\n      if (this.state.activeIdx >= totalElements) {\n        this.setState({ activeIdx: totalElements - 1 });\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.searchInput) {\n      this.searchInput.focus();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.container) {\n      this.container.removeEventListener('keydown', this.handleKeyboard);\n    }\n  }\n\n  handleSelectChange = (item: string, selected: boolean) => {\n    if (selected) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  handleSearchChange = (value: string) => {\n    this.onSearchQuery((this.props as PropsWithDefault).validateSearchInput(value));\n  };\n\n  handleElementHover = (element: string) => {\n    this.setState((prevState, props) => {\n      return { activeIdx: this.getAllElements(props, prevState).indexOf(element) };\n    });\n  };\n\n  handleKeyboard = (evt: KeyboardEvent) => {\n    switch (evt.keyCode) {\n      case 40: // down\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectNextElement);\n        break;\n      case 38: // up\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectPreviousElement);\n        break;\n      case 37: // left\n      case 39: // right\n        evt.stopPropagation();\n        break;\n      case 13: // enter\n        if (this.state.activeIdx >= 0) {\n          this.toggleSelect(this.getAllElements(this.props, this.state)[this.state.activeIdx]);\n        }\n        break;\n    }\n  };\n\n  onSearchQuery = (query: string) => {\n    this.setState({ activeIdx: 0, loading: true, query });\n    this.props.onSearch(query).then(this.stopLoading, this.stopLoading);\n  };\n\n  onSelectItem = (item: string) => {\n    if (this.isNewElement(item, this.props)) {\n      this.onSearchQuery('');\n    }\n    this.props.onSelect(item);\n  };\n\n  onUnselectItem = (item: string) => this.props.onUnselect(item);\n\n  isNewElement = (elem: string, { selectedElements, elements }: Props) =>\n    elem.length > 0 && selectedElements.indexOf(elem) === -1 && elements.indexOf(elem) === -1;\n\n  updateSelectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (state.query) {\n        return {\n          selectedElements: props.filterSelected(state.query, props.selectedElements)\n        };\n      } else {\n        return { selectedElements: [...props.selectedElements] };\n      }\n    });\n  };\n\n  updateUnselectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (props.listSize === 0) {\n        return { unselectedElements: difference(props.elements, props.selectedElements) };\n      } else if (props.listSize < state.selectedElements.length) {\n        return { unselectedElements: [] };\n      } else {\n        return {\n          unselectedElements: difference(props.elements, props.selectedElements).slice(\n            0,\n            props.listSize - state.selectedElements.length\n          )\n        };\n      }\n    });\n  };\n\n  getAllElements = (props: Props, state: State) => {\n    if (this.isNewElement(state.query, props)) {\n      return [...state.selectedElements, ...state.unselectedElements, state.query];\n    } else {\n      return [...state.selectedElements, ...state.unselectedElements];\n    }\n  };\n\n  setElementActive = (idx: number) => this.setState({ activeIdx: idx });\n\n  selectNextElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx < 0 || activeIdx >= allElements.length - 1) {\n      return { activeIdx: 0 };\n    } else {\n      return { activeIdx: activeIdx + 1 };\n    }\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx <= 0) {\n      const lastIdx = allElements.length - 1;\n      return { activeIdx: lastIdx };\n    } else {\n      return { activeIdx: activeIdx - 1 };\n    }\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  toggleSelect = (item: string) => {\n    if (this.props.selectedElements.indexOf(item) === -1) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  render() {\n    const { allowSelection = true, allowNewElements = true, footerNode = '' } = this.props;\n    const { renderLabel } = this.props as PropsWithDefault;\n    const { query, activeIdx, selectedElements, unselectedElements } = this.state;\n    const activeElement = this.getAllElements(this.props, this.state)[activeIdx];\n    const showNewElement = allowNewElements && this.isNewElement(query, this.props);\n    const infiniteList = this.props.listSize === 0;\n    const listClasses = classNames('menu', {\n      'menu-vertically-limited': infiniteList,\n      'spacer-top': infiniteList,\n      'with-top-separator': infiniteList,\n      'with-bottom-separator': Boolean(footerNode)\n    });\n\n    return (\n      <div className=\"multi-select\" ref={div => (this.container = div)}>\n        <div className=\"menu-search\">\n          <SearchBox\n            autoFocus={true}\n            className=\"little-spacer-top\"\n            loading={this.state.loading}\n            onChange={this.handleSearchChange}\n            placeholder={this.props.placeholder}\n            value={query}\n          />\n        </div>\n        <ul className={listClasses}>\n          {selectedElements.length > 0 &&\n            selectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n                selected={true}\n              />\n            ))}\n          {unselectedElements.length > 0 &&\n            unselectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                disabled={!allowSelection}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n              />\n            ))}\n          {showNewElement && (\n            <MultiSelectOption\n              active={activeElement === query}\n              custom={true}\n              element={query}\n              key={query}\n              onHover={this.handleElementHover}\n              onSelectChange={this.handleSelectChange}\n              renderLabel={renderLabel}\n            />\n          )}\n          {!showNewElement &&\n            selectedElements.length < 1 &&\n            unselectedElements.length < 1 && (\n              <li className=\"spacer-left\">{translateWithParameters('no_results_for_x', query)}</li>\n            )}\n        </ul>\n        {footerNode}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, postJSON, post, RequestData } from '../helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { Paging, BranchParameters } from '../app/types';\n\nexport interface Event {\n  key: string;\n  name: string;\n  category: string;\n  description?: string;\n}\n\nexport interface Analysis {\n  key: string;\n  date: string;\n  events: Event[];\n}\n\nexport function getProjectActivity(\n  data: { project: string; category?: string; p?: number; ps?: number } & BranchParameters\n): Promise<{ analyses: Analysis[]; paging: Paging }> {\n  return getJSON('/api/project_analyses/search', data).catch(throwGlobalError);\n}\n\ninterface CreateEventResponse {\n  analysis: string;\n  key: string;\n  name: string;\n  category: string;\n  description?: string;\n}\n\nexport function createEvent(\n  analysis: string,\n  name: string,\n  category?: string,\n  description?: string\n): Promise<CreateEventResponse> {\n  const data: RequestData = { analysis, name };\n  if (category) {\n    data.category = category;\n  }\n  if (description) {\n    data.description = description;\n  }\n  return postJSON('/api/project_analyses/create_event', data).then(r => r.event, throwGlobalError);\n}\n\nexport function deleteEvent(event: string): Promise<void | Response> {\n  return post('/api/project_analyses/delete_event', { event }).catch(throwGlobalError);\n}\n\nexport function changeEvent(\n  event: string,\n  name?: string,\n  description?: string\n): Promise<CreateEventResponse> {\n  const data: RequestData = { event };\n  if (name) {\n    data.name = name;\n  }\n  if (description) {\n    data.description = description;\n  }\n  return postJSON('/api/project_analyses/update_event', data).then(r => r.event, throwGlobalError);\n}\n\nexport function deleteAnalysis(analysis: string): Promise<void | Response> {\n  return post('/api/project_analyses/delete', { analysis }).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n//@flow\nimport React from 'react';\nimport ProjectEventIcon from '../../../components/icons-components/ProjectEventIcon';\n\n/*::\nexport type Option = { label: string, value: string };\n*/\n\n/*::\ntype Props = {\n  option: Option,\n  children?: Element | Text,\n  className?: string,\n  isFocused?: boolean,\n  onFocus: (Option, MouseEvent) => void,\n  onSelect: (Option, MouseEvent) => void\n};\n*/\n\nexport default class ProjectActivityEventSelectOption extends React.PureComponent {\n  /*:: props: Props; */\n\n  handleMouseDown = (event /*: MouseEvent */) => {\n    event.preventDefault();\n    event.stopPropagation();\n    this.props.onSelect(this.props.option, event);\n  };\n\n  handleMouseEnter = (event /*: MouseEvent */) => {\n    this.props.onFocus(this.props.option, event);\n  };\n\n  handleMouseMove = (event /*: MouseEvent */) => {\n    if (this.props.isFocused) {\n      return;\n    }\n    this.props.onFocus(this.props.option, event);\n  };\n\n  render() {\n    const { option } = this.props;\n    return (\n      <div\n        className={this.props.className}\n        onMouseDown={this.handleMouseDown}\n        onMouseEnter={this.handleMouseEnter}\n        onMouseMove={this.handleMouseMove}\n        title={option.label}>\n        <ProjectEventIcon className={'project-activity-event-icon ' + option.value} />\n        <span className=\"little-spacer-left\">{this.props.children}</span>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n//@flow\nimport React from 'react';\nimport ProjectEventIcon from '../../../components/icons-components/ProjectEventIcon';\n/*:: import type { Option } from './ProjectActivityEventSelectOption'; */\n\n/*::\ntype Props = {\n  value: Option,\n  children?: Element | Text\n};\n*/\n\nexport default function ProjectActivityEventSelectValue(props /*: Props */) {\n  const { value } = props;\n  return (\n    <div className=\"Select-value\" title={value.label}>\n      <div className=\"Select-value-label\">\n        <ProjectEventIcon className={'project-activity-event-icon ' + value.value} />\n        <span className=\"little-spacer-left\">{props.children}</span>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport DateRangeInput from '../../../components/controls/DateRangeInput';\nimport { translate } from '../../../helpers/l10n';\n/*:: import type { RawQuery } from '../../../helpers/query'; */\n\n/*::\ntype Props = {\n  from: ?Date,\n  to: ?Date,\n  onChange: RawQuery => void\n};\n*/\n\nexport default class ProjectActivityDateInput extends React.PureComponent {\n  /*:: props: Props; */\n\n  handleChange = ({ from, to } /*: { from?: Date, to?: Date } */) => {\n    this.props.onChange({ from, to });\n  };\n\n  handleResetClick = () => {\n    this.props.onChange({ from: null, to: null });\n  };\n\n  render() {\n    return (\n      <div>\n        <DateRangeInput\n          onChange={this.handleChange}\n          value={{ from: this.props.from, to: this.props.to }}\n        />\n        <button\n          className=\"spacer-left\"\n          onClick={this.handleResetClick}\n          disabled={this.props.from == null && this.props.to == null}>\n          {translate('project_activity.reset_dates')}\n        </button>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport ProjectActivityEventSelectOption from './ProjectActivityEventSelectOption';\nimport ProjectActivityEventSelectValue from './ProjectActivityEventSelectValue';\nimport ProjectActivityDateInput from './ProjectActivityDateInput';\nimport { EVENT_TYPES, APPLICATION_EVENT_TYPES } from '../utils';\nimport Select from '../../../components/controls/Select';\nimport { translate } from '../../../helpers/l10n';\n/*:: import type { RawQuery } from '../../../helpers/query'; */\n\n/*::\ntype Props = {\n  category?: string,\n  from: ?Date,\n  project: { qualifier: string },\n  to: ?Date,\n  updateQuery: RawQuery => void\n};\n*/\n\nexport default class ProjectActivityPageHeader extends React.PureComponent {\n  /*:: options: Array<{ label: string, value: string }>; */\n  /*:: props: Props; */\n\n  handleCategoryChange = (option /*: ?{ value: string } */) =>\n    this.props.updateQuery({ category: option ? option.value : '' });\n\n  render() {\n    const eventTypes =\n      this.props.project.qualifier === 'APP' ? APPLICATION_EVENT_TYPES : EVENT_TYPES;\n    this.options = eventTypes.map(category => ({\n      label: translate('event.category', category),\n      value: category\n    }));\n\n    return (\n      <header className=\"page-header\">\n        {!['VW', 'SVW'].includes(this.props.project.qualifier) && (\n          <Select\n            className=\"input-medium pull-left big-spacer-right\"\n            placeholder={translate('project_activity.filter_events') + '...'}\n            clearable={true}\n            searchable={false}\n            value={this.props.category}\n            optionComponent={ProjectActivityEventSelectOption}\n            valueComponent={ProjectActivityEventSelectValue}\n            options={this.options}\n            onChange={this.handleCategoryChange}\n          />\n        )}\n        <ProjectActivityDateInput\n          className=\"pull-left\"\n          from={this.props.from}\n          to={this.props.to}\n          onChange={this.props.updateQuery}\n        />\n      </header>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport ProjectEventIcon from '../../../components/icons-components/ProjectEventIcon';\nimport { translate } from '../../../helpers/l10n';\n/*:: import type { Event as EventType } from '../types'; */\n\nexport default function EventInner(props /*: { event: EventType } */) {\n  const { event } = props;\n\n  return (\n    <div className=\"project-activity-event-inner\">\n      <div className=\"project-activity-event-inner-icon little-spacer-right\">\n        <ProjectEventIcon\n          className={'project-activity-event-icon margin-align ' + event.category}\n        />\n      </div>\n      <Tooltip mouseEnterDelay={0.5} overlay={event.name}>\n        <span className=\"project-activity-event-inner-text\">\n          <span className=\"note\">{translate('event.category', event.category)}:</span>{' '}\n          <strong title={event.description}>{event.name}</strong>\n        </span>\n      </Tooltip>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport Modal from '../../../../components/controls/Modal';\nimport { translate } from '../../../../helpers/l10n';\n/*:: import type { Event } from '../../types'; */\n\n/*::\ntype Props = {\n  changeEvent: (event: string, name: string) => Promise<*>,\n  changeEventButtonText: string,\n  event: Event,\n  onClose: () => void\n};\n*/\n\n/*::\ntype State = {\n  processing: boolean,\n  name: string\n};\n*/\n\nexport default class ChangeEventForm extends React.PureComponent {\n  /*:: mounted: boolean; */\n  /*:: props: Props; */\n  /*:: state: State; */\n\n  constructor(props /*: Props */) {\n    super(props);\n    this.state = {\n      processing: false,\n      name: props.event.name\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  closeForm = () => {\n    if (this.mounted) {\n      this.setState({ name: this.props.event.name });\n    }\n    this.props.onClose();\n  };\n\n  changeInput = (e /*: Object */) => {\n    if (this.mounted) {\n      this.setState({ name: e.target.value });\n    }\n  };\n\n  stopProcessing = () => {\n    if (this.mounted) {\n      this.setState({ processing: false });\n    }\n  };\n\n  stopProcessingAndClose = () => {\n    if (this.mounted) {\n      this.setState({ processing: false });\n    }\n    this.props.onClose();\n  };\n\n  handleSubmit = (e /*: Object */) => {\n    e.preventDefault();\n    this.setState({ processing: true });\n    this.props\n      .changeEvent(this.props.event.key, this.state.name)\n      .then(this.stopProcessingAndClose, this.stopProcessing);\n  };\n\n  render() {\n    const header = translate(this.props.changeEventButtonText);\n    return (\n      <Modal contentLabel={header} onRequestClose={this.closeForm}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"modal-body\">\n            <div className=\"modal-field\">\n              <label>{translate('name')}</label>\n              <input\n                value={this.state.name}\n                autoFocus={true}\n                disabled={this.state.processing}\n                type=\"text\"\n                onChange={this.changeInput}\n              />\n            </div>\n          </div>\n\n          <footer className=\"modal-foot\">\n            {this.state.processing ? (\n              <i className=\"spinner\" />\n            ) : (\n              <div>\n                <button type=\"submit\">{translate('change_verb')}</button>\n                <button type=\"reset\" className=\"button-link\" onClick={this.closeForm}>\n                  {translate('cancel')}\n                </button>\n              </div>\n            )}\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport Modal from '../../../../components/controls/Modal';\nimport { translate } from '../../../../helpers/l10n';\n/*:: import type { Event } from '../../types'; */\n\n/*::\ntype Props = {\n  analysis: string,\n  deleteEvent: (analysis: string, event: string) => Promise<*>,\n  event: Event,\n  removeEventButtonText: string,\n  removeEventQuestion: string,\n  onClose: () => void\n};\n*/\n\n/*::\ntype State = {\n  processing: boolean\n};\n*/\n\nexport default class RemoveEventForm extends React.PureComponent {\n  /*:: mounted: boolean; */\n  /*:: props: Props; */\n  state /*: State */ = {\n    processing: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  closeForm = () => {\n    this.props.onClose();\n  };\n\n  stopProcessing = () => {\n    if (this.mounted) {\n      this.setState({ processing: false });\n    }\n  };\n\n  stopProcessingAndClose = () => {\n    if (this.mounted) {\n      this.setState({ processing: false });\n    }\n    this.props.onClose();\n  };\n\n  handleSubmit = (e /*: Object */) => {\n    e.preventDefault();\n    this.setState({ processing: true });\n    this.props\n      .deleteEvent(this.props.analysis, this.props.event.key)\n      .then(this.stopProcessingAndClose, this.stopProcessing);\n  };\n\n  render() {\n    const header = translate(this.props.removeEventButtonText);\n    return (\n      <Modal contentLabel={header} onRequestClose={this.closeForm}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"modal-body\">{translate(this.props.removeEventQuestion)}</div>\n\n          <footer className=\"modal-foot\">\n            {this.state.processing ? (\n              <i className=\"spinner\" />\n            ) : (\n              <div>\n                <button type=\"submit\" className=\"button-red\" autoFocus={true}>\n                  {translate('delete')}\n                </button>\n                <button type=\"reset\" className=\"button-link\" onClick={this.closeForm}>\n                  {translate('cancel')}\n                </button>\n              </div>\n            )}\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport EventInner from './EventInner';\nimport ChangeEventForm from './forms/ChangeEventForm';\nimport RemoveEventForm from './forms/RemoveEventForm';\nimport { DeleteButton, EditButton } from '../../../components/ui/buttons';\n/*:: import type { Event as EventType } from '../types'; */\n\n/*::\ntype Props = {\n  analysis: string,\n  canAdmin: boolean,\n  changeEvent: (event: string, name: string) => Promise<*>,\n  deleteEvent: (analysis: string, event: string) => Promise<*>,\n  event: EventType,\n  isFirst: boolean\n};\n*/\n\n/*::\ntype State = {\n  changing: boolean,\n  deleting: boolean\n};\n*/\n\nexport default class Event extends React.PureComponent {\n  /*:: mounted: boolean; */\n  /*:: props: Props; */\n  state /*: State */ = {\n    changing: false,\n    deleting: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  startChanging = () => {\n    this.setState({ changing: true });\n  };\n\n  stopChanging = () => {\n    if (this.mounted) {\n      this.setState({ changing: false });\n    }\n  };\n\n  startDeleting = () => {\n    this.setState({ deleting: true });\n  };\n\n  stopDeleting = () => {\n    if (this.mounted) {\n      this.setState({ deleting: false });\n    }\n  };\n\n  render() {\n    const { event, canAdmin } = this.props;\n    const isOther = event.category === 'OTHER';\n    const isVersion = !isOther && event.category === 'VERSION';\n    const canChange = isOther || isVersion;\n    const canDelete = isOther || (isVersion && !this.props.isFirst);\n    const showActions = canAdmin && (canChange || canDelete);\n\n    return (\n      <div className=\"project-activity-event\">\n        <EventInner event={this.props.event} />\n\n        {showActions && (\n          <div className=\"project-activity-event-actions spacer-left\">\n            {canChange && (\n              <EditButton className=\"js-change-event button-small\" onClick={this.startChanging} />\n            )}\n            {canDelete && (\n              <DeleteButton className=\"js-delete-event button-small\" onClick={this.startDeleting} />\n            )}\n          </div>\n        )}\n\n        {this.state.changing && (\n          <ChangeEventForm\n            changeEventButtonText={\n              'project_activity.' + (isVersion ? 'change_version' : 'change_custom_event')\n            }\n            changeEvent={this.props.changeEvent}\n            event={this.props.event}\n            onClose={this.stopChanging}\n          />\n        )}\n\n        {this.state.deleting && (\n          <RemoveEventForm\n            analysis={this.props.analysis}\n            deleteEvent={this.props.deleteEvent}\n            event={this.props.event}\n            onClose={this.stopDeleting}\n            removeEventButtonText={\n              'project_activity.' + (isVersion ? 'remove_version' : 'remove_custom_event')\n            }\n            removeEventQuestion={`project_activity.${\n              isVersion ? 'remove_version' : 'remove_custom_event'\n            }.question`}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { sortBy } from 'lodash';\nimport Event from './Event';\n/*:: import type { Event as EventType } from '../types'; */\n\n/*::\ntype Props = {\n  analysis?: string,\n  canAdmin?: boolean,\n  changeEvent?: (event: string, name: string) => Promise<*>,\n  deleteEvent?: (analysis: string, event: string) => Promise<*>,\n  events: Array<EventType>,\n  isFirst?: boolean\n};\n*/\n\nexport default function Events(props /*: Props */) {\n  const sortedEvents = sortBy(\n    props.events,\n    // versions last\n    event => (event.category === 'VERSION' ? 1 : 0),\n    // then the rest sorted by category\n    'category'\n  );\n\n  return (\n    <div className=\"project-activity-events\">\n      {sortedEvents.map(event => (\n        <Event\n          analysis={props.analysis}\n          canAdmin={props.canAdmin}\n          changeEvent={props.changeEvent}\n          deleteEvent={props.deleteEvent}\n          event={event}\n          isFirst={props.isFirst}\n          key={event.key}\n        />\n      ))}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport Modal from '../../../../components/controls/Modal';\nimport { ActionsDropdownItem } from '../../../../components/controls/ActionsDropdown';\nimport { translate } from '../../../../helpers/l10n';\n/*:: import type { Analysis } from '../../types'; */\n\n/*::\ntype Props = {\n  addEvent: (analysis: string, name: string, category?: string) => Promise<*>,\n  analysis: Analysis,\n  addEventButtonText: string\n};\n*/\n\n/*::\ntype State = {\n  open: boolean,\n  processing: boolean,\n  name: string\n};\n*/\n\nexport default class AddEventForm extends React.PureComponent {\n  /*:: mounted: boolean; */\n  /*:: props: Props; */\n  state /*: State */ = {\n    open: false,\n    processing: false,\n    name: ''\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  openForm = () => {\n    this.setState({ open: true });\n  };\n\n  closeForm = () => {\n    if (this.mounted) {\n      this.setState({ open: false, name: '' });\n    }\n  };\n\n  changeInput = (e /*: Object */) => {\n    if (this.mounted) {\n      this.setState({ name: e.target.value });\n    }\n  };\n\n  stopProcessing = () => {\n    if (this.mounted) {\n      this.setState({ processing: false });\n    }\n  };\n\n  stopProcessingAndClose = () => {\n    if (this.mounted) {\n      this.setState({ open: false, processing: false, name: '' });\n    }\n  };\n\n  handleSubmit = (e /*: Object */) => {\n    e.preventDefault();\n    this.setState({ processing: true });\n    this.props\n      .addEvent(this.props.analysis.key, this.state.name)\n      .then(this.stopProcessingAndClose, this.stopProcessing);\n  };\n\n  renderModal() {\n    const header = translate(this.props.addEventButtonText);\n    return (\n      <Modal key=\"add-event-modal\" contentLabel={header} onRequestClose={this.closeForm}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"modal-body\">\n            <div className=\"modal-field\">\n              <label>{translate('name')}</label>\n              <input\n                value={this.state.name}\n                autoFocus={true}\n                disabled={this.state.processing}\n                type=\"text\"\n                onChange={this.changeInput}\n              />\n            </div>\n          </div>\n\n          <footer className=\"modal-foot\">\n            {this.state.processing ? (\n              <i className=\"spinner\" />\n            ) : (\n              <div>\n                <button type=\"submit\">{translate('save')}</button>\n                <button type=\"reset\" className=\"button-link\" onClick={this.closeForm}>\n                  {translate('cancel')}\n                </button>\n              </div>\n            )}\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n\n  render() {\n    const linkComponent = (\n      <ActionsDropdownItem className=\"js-add-event\" onClick={this.openForm}>\n        {translate(this.props.addEventButtonText)}\n      </ActionsDropdownItem>\n    );\n    if (this.state.open) {\n      return [linkComponent, this.renderModal()];\n    }\n    return linkComponent;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport Modal from '../../../../components/controls/Modal';\nimport { ActionsDropdownItem } from '../../../../components/controls/ActionsDropdown';\nimport { translate } from '../../../../helpers/l10n';\n/*:: import type { Analysis } from '../../types'; */\n\n/*::\ntype Props = {\n  analysis: Analysis,\n  deleteAnalysis: (analysis: string) => Promise<*>\n};\n*/\n\n/*::\ntype State = {\n  open: boolean,\n  processing: boolean\n};\n*/\n\nexport default class RemoveAnalysisForm extends React.PureComponent {\n  /*:: mounted: boolean; */\n  /*:: props: Props; */\n  state /*: State */ = {\n    open: false,\n    processing: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  openForm = () => {\n    this.setState({ open: true });\n  };\n\n  closeForm = () => {\n    if (this.mounted) {\n      this.setState({ open: false });\n    }\n  };\n\n  stopProcessing = () => {\n    if (this.mounted) {\n      this.setState({ processing: false });\n    }\n  };\n\n  stopProcessingAndClose = () => {\n    if (this.mounted) {\n      this.setState({ open: false, processing: false });\n    }\n  };\n\n  handleSubmit = (e /*: Event */) => {\n    e.preventDefault();\n    this.setState({ processing: true });\n    this.props\n      .deleteAnalysis(this.props.analysis.key)\n      .then(this.stopProcessingAndClose, this.stopProcessing);\n  };\n\n  renderModal() {\n    const header = translate('project_activity.delete_analysis');\n    return (\n      <Modal key=\"delete-analysis-modal\" contentLabel={header} onRequestClose={this.closeForm}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"modal-body\">{translate('project_activity.delete_analysis.question')}</div>\n\n          <footer className=\"modal-foot\">\n            {this.state.processing ? (\n              <i className=\"spinner\" />\n            ) : (\n              <div>\n                <button type=\"submit\" className=\"button-red\" autoFocus={true}>\n                  {translate('delete')}\n                </button>\n                <button type=\"reset\" className=\"button-link\" onClick={this.closeForm}>\n                  {translate('cancel')}\n                </button>\n              </div>\n            )}\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n\n  render() {\n    const linkComponent = (\n      <ActionsDropdownItem\n        className=\"js-delete-analysis\"\n        destructive={true}\n        onClick={this.openForm}>\n        {translate('project_activity.delete_analysis')}\n      </ActionsDropdownItem>\n    );\n    if (this.state.open) {\n      return [linkComponent, this.renderModal()];\n    }\n    return linkComponent;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport TimeFormatter from './TimeFormatter';\nimport Tooltip from '../controls/Tooltip';\nimport { parseDate } from '../../helpers/dates';\n\ninterface Props {\n  className?: string;\n  date: Date | string | number;\n}\n\nexport default function TimeTooltipFormatter({ className, date }: Props) {\n  const parsedDate = parseDate(date);\n  return (\n    <TimeFormatter date={parsedDate} long={false}>\n      {formattedTime => (\n        <Tooltip mouseEnterDelay={0.5} overlay={<TimeFormatter date={parsedDate} long={true} />}>\n          <time className={className} dateTime={parsedDate.toISOString()}>\n            {formattedTime}\n          </time>\n        </Tooltip>\n      )}\n    </TimeFormatter>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport classNames from 'classnames';\nimport Events from './Events';\nimport AddEventForm from './forms/AddEventForm';\nimport RemoveAnalysisForm from './forms/RemoveAnalysisForm';\nimport TimeTooltipFormatter from '../../../components/intl/TimeTooltipFormatter';\nimport ActionsDropdown, {\n  ActionsDropdownDivider\n} from '../../../components/controls/ActionsDropdown';\nimport { translate } from '../../../helpers/l10n';\n/*:: import type { Analysis } from '../types'; */\n\n/*::\ntype Props = {\n  addCustomEvent: (analysis: string, name: string, category?: string) => Promise<*>,\n  addVersion: (analysis: string, version: string) => Promise<*>,\n  analysis: Analysis,\n  canAdmin: boolean,\n  canDeleteAnalyses: boolean,\n  canCreateVersion: boolean,\n  changeEvent: (event: string, name: string) => Promise<*>,\n  deleteAnalysis: (analysis: string) => Promise<*>,\n  deleteEvent: (analysis: string, event: string) => Promise<*>,\n  isFirst: boolean,\n  selected: boolean,\n  updateSelectedDate: Date => void\n};\n*/\n\nexport default class ProjectActivityAnalysis extends React.PureComponent {\n  /*:: props: Props; */\n\n  handleClick = () => this.props.updateSelectedDate(this.props.analysis.date);\n\n  stopPropagation = (e /*: Event */) => e.stopPropagation();\n\n  render() {\n    const { analysis, isFirst, canAdmin } = this.props;\n    const { date, events } = analysis;\n    const analysisTitle = translate('project_activity.analysis');\n    const hasVersion = events.find(event => event.category === 'VERSION') != null;\n\n    const canAddVersion = canAdmin && !hasVersion && this.props.canCreateVersion;\n    const canAddEvent = canAdmin;\n    const canDeleteAnalyses = this.props.canDeleteAnalyses && !isFirst;\n\n    return (\n      <li\n        className={classNames('project-activity-analysis clearfix', {\n          selected: this.props.selected\n        })}\n        data-date={date.valueOf()}\n        onClick={this.handleClick}\n        role=\"listitem\"\n        tabIndex=\"0\">\n        <div className=\"project-activity-time spacer-right\">\n          <TimeTooltipFormatter className=\"text-middle\" date={date} />\n        </div>\n        <div className=\"project-activity-analysis-icon spacer-right\" title={analysisTitle} />\n\n        {(canAddVersion || canAddEvent || canDeleteAnalyses) && (\n          <div className=\"project-activity-analysis-actions big-spacer-right\">\n            <ActionsDropdown menuPosition=\"left\" small={true} toggleClassName=\"js-analysis-actions\">\n              {canAddVersion && (\n                <AddEventForm\n                  addEvent={this.props.addVersion}\n                  analysis={analysis}\n                  addEventButtonText=\"project_activity.add_version\"\n                />\n              )}\n              {canAddEvent && (\n                <AddEventForm\n                  addEvent={this.props.addCustomEvent}\n                  analysis={analysis}\n                  addEventButtonText=\"project_activity.add_custom_event\"\n                />\n              )}\n              {(canAddVersion || canAddEvent) && canDeleteAnalyses && <ActionsDropdownDivider />}\n              {canDeleteAnalyses && (\n                <RemoveAnalysisForm\n                  analysis={analysis}\n                  deleteAnalysis={this.props.deleteAnalysis}\n                />\n              )}\n            </ActionsDropdown>\n          </div>\n        )}\n\n        {events.length > 0 && (\n          <Events\n            analysis={analysis.key}\n            canAdmin={canAdmin}\n            canDeleteAnalyses={this.props.canDeleteAnalyses}\n            changeEvent={this.props.changeEvent}\n            deleteEvent={this.props.deleteEvent}\n            events={events}\n            isFirst={this.props.isFirst}\n          />\n        )}\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport classNames from 'classnames';\nimport { throttle } from 'lodash';\nimport ProjectActivityAnalysis from './ProjectActivityAnalysis';\nimport DateFormatter from '../../../components/intl/DateFormatter';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { translate } from '../../../helpers/l10n';\nimport { toShortNotSoISOString } from '../../../helpers/dates';\nimport {\n  activityQueryChanged,\n  getAnalysesByVersionByDay,\n  selectedDateQueryChanged\n} from '../utils';\n/*:: import type { RawQuery } from '../../../helpers/query'; */\n/*:: import type { Analysis, Query } from '../types'; */\n\n/*::\ntype Props = {\n  addCustomEvent: (analysis: string, name: string, category?: string) => Promise<*>,\n  addVersion: (analysis: string, version: string) => Promise<*>,\n  analyses: Array<Analysis>,\n  analysesLoading: boolean,\n  canAdmin: boolean,\n  canDeleteAnalyses: boolean,\n  className?: string,\n  changeEvent: (event: string, name: string) => Promise<*>,\n  deleteAnalysis: (analysis: string) => Promise<*>,\n  deleteEvent: (analysis: string, event: string) => Promise<*>,\n  initializing: boolean,\n  project: { qualifier: string },\n  query: Query,\n  updateQuery: Object => void\n};\n*/\n\nexport default class ProjectActivityAnalysesList extends React.PureComponent {\n  /*:: analyses: HTMLCollection<HTMLElement>; */\n  /*:: badges: HTMLCollection<HTMLElement>; */\n  /*:: props: Props; */\n  /*:: scrollContainer: HTMLElement; */\n\n  constructor(props /*: Props */) {\n    super(props);\n    this.handleScroll = throttle(this.handleScroll, 20);\n  }\n\n  componentDidMount() {\n    this.badges = document.getElementsByClassName('project-activity-version-badge');\n    this.analyses = document.getElementsByClassName('project-activity-analysis');\n  }\n\n  componentDidUpdate(prevProps /*: Props */) {\n    if (!this.scrollContainer) {\n      return;\n    }\n    if (\n      this.props.query.selectedDate &&\n      (selectedDateQueryChanged(prevProps.query, this.props.query) ||\n        prevProps.analyses !== this.props.analyses)\n    ) {\n      this.scrollToDate(this.props.query.selectedDate);\n    } else if (activityQueryChanged(prevProps.query, this.props.query)) {\n      this.resetScrollTop(0, true);\n    }\n  }\n\n  handleScroll = () => this.updateStickyBadges(true);\n\n  resetScrollTop = (newScrollTop /*: number */, forceBadgeAlignement /*: ?boolean */) => {\n    this.scrollContainer.scrollTop = newScrollTop;\n    for (let i = 1; i < this.badges.length; i++) {\n      this.badges[i].removeAttribute('originOffsetTop');\n      this.badges[i].classList.remove('sticky');\n    }\n    this.updateStickyBadges(forceBadgeAlignement);\n  };\n\n  scrollToDate = (targetDate /*: ?Date */) => {\n    if (!this.scrollContainer || !targetDate) {\n      return;\n    }\n    const date = targetDate.valueOf();\n    for (let i = 1; i < this.analyses.length; i++) {\n      if (Number(this.analyses[i].getAttribute('data-date')) === date) {\n        const containerHeight = this.scrollContainer.offsetHeight - 100;\n        const scrollDiff = Math.abs(this.scrollContainer.scrollTop - this.analyses[i].offsetTop);\n        // Center only the extremities and the ones outside of the container\n        if (scrollDiff > containerHeight || scrollDiff < 100) {\n          this.resetScrollTop(this.analyses[i].offsetTop - containerHeight / 2);\n        }\n        break;\n      }\n    }\n  };\n\n  updateStickyBadges = (forceBadgeAlignement /*: ?boolean */) => {\n    if (!this.scrollContainer || !this.badges) {\n      return;\n    }\n\n    const scrollTop = this.scrollContainer.scrollTop;\n    if (scrollTop == null) {\n      return;\n    }\n\n    let newScrollTop;\n    for (let i = 1; i < this.badges.length; i++) {\n      const badge = this.badges[i];\n      let originOffsetTop = badge.getAttribute('originOffsetTop');\n      if (originOffsetTop == null) {\n        // Set the originOffsetTop attribute, to avoid using getBoundingClientRect\n        originOffsetTop = badge.offsetTop;\n        badge.setAttribute('originOffsetTop', originOffsetTop.toString());\n      }\n      if (Number(originOffsetTop) < scrollTop + 18 + i * 2) {\n        if (forceBadgeAlignement && !badge.classList.contains('sticky')) {\n          newScrollTop = originOffsetTop;\n        }\n        badge.classList.add('sticky');\n      } else {\n        badge.classList.remove('sticky');\n      }\n    }\n\n    if (forceBadgeAlignement && newScrollTop != null) {\n      this.scrollContainer.scrollTop = newScrollTop - 6;\n    }\n  };\n\n  updateSelectedDate = (date /*: Date */) => this.props.updateQuery({ selectedDate: date });\n\n  render() {\n    const byVersionByDay = getAnalysesByVersionByDay(this.props.analyses, this.props.query);\n    const hasFilteredData =\n      byVersionByDay.length > 1 ||\n      (byVersionByDay.length === 1 && Object.keys(byVersionByDay[0].byDay).length > 0);\n    if (this.props.analyses.length === 0 || !hasFilteredData) {\n      return (\n        <div className={this.props.className}>\n          {this.props.initializing ? (\n            <div className=\"text-center\">\n              <i className=\"spinner\" />\n            </div>\n          ) : (\n            <span className=\"note\">{translate('no_results')}</span>\n          )}\n        </div>\n      );\n    }\n\n    const firstAnalysisKey = this.props.analyses[0].key;\n    const selectedDate = this.props.query.selectedDate\n      ? this.props.query.selectedDate.valueOf()\n      : null;\n\n    return (\n      <ul\n        className={classNames('project-activity-versions-list', this.props.className)}\n        onScroll={this.handleScroll}\n        ref={element => (this.scrollContainer = element)}\n        style={{ paddingTop: this.props.project.qualifier === 'TRK' ? 52 : undefined }}>\n        {byVersionByDay.map((version, idx) => {\n          const days = Object.keys(version.byDay);\n          if (days.length <= 0) {\n            return null;\n          }\n          return (\n            <li key={version.key || 'noversion'}>\n              {version.version && (\n                <div className={classNames('project-activity-version-badge', { first: idx === 0 })}>\n                  <Tooltip\n                    overlay={`${translate('version')} ${version.version}`}\n                    mouseEnterDelay={0.5}>\n                    <span className=\"badge\">{version.version}</span>\n                  </Tooltip>\n                </div>\n              )}\n              <ul className=\"project-activity-days-list\">\n                {days.map(day => (\n                  <li\n                    key={day}\n                    className=\"project-activity-day\"\n                    data-day={toShortNotSoISOString(Number(day))}>\n                    <div className=\"project-activity-date\">\n                      <DateFormatter date={Number(day)} long={true} />\n                    </div>\n                    <ul className=\"project-activity-analyses-list\">\n                      {version.byDay[day] != null &&\n                        version.byDay[day].map(analysis => (\n                          <ProjectActivityAnalysis\n                            addCustomEvent={this.props.addCustomEvent}\n                            addVersion={this.props.addVersion}\n                            analysis={analysis}\n                            canAdmin={this.props.canAdmin}\n                            canDeleteAnalyses={this.props.canDeleteAnalyses}\n                            canCreateVersion={this.props.project.qualifier === 'TRK'}\n                            changeEvent={this.props.changeEvent}\n                            deleteAnalysis={this.props.deleteAnalysis}\n                            deleteEvent={this.props.deleteEvent}\n                            isFirst={analysis.key === firstAnalysisKey}\n                            key={analysis.key}\n                            selected={analysis.date.valueOf() === selectedDate}\n                            updateSelectedDate={this.updateSelectedDate}\n                          />\n                        ))}\n                    </ul>\n                  </li>\n                ))}\n              </ul>\n            </li>\n          );\n        })}\n        {this.props.analysesLoading && (\n          <li className=\"text-center\">\n            <i className=\"spinner\" />\n          </li>\n        )}\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport BubblePopup from '../../../../components/common/BubblePopup';\nimport MultiSelect from '../../../../components/common/MultiSelect';\nimport { translate, translateWithParameters } from '../../../../helpers/l10n';\n\ninterface Props {\n  elements: string[];\n  filterSelected: (query: string, selectedElements: string[]) => string[];\n  metricsTypeFilter: string[];\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  popupPosition?: any;\n  renderLabel: (element: string) => React.ReactNode;\n  selectedElements: string[];\n}\n\nexport default function AddGraphMetricPopup({ elements, metricsTypeFilter, ...props }: Props) {\n  let footerNode: React.ReactNode = '';\n\n  if (props.selectedElements.length >= 6) {\n    footerNode = (\n      <span className=\"alert alert-info spacer-left spacer-right spacer-top\">\n        {translate('project_activity.graphs.custom.add_metric_info')}\n      </span>\n    );\n  } else if (metricsTypeFilter != null && metricsTypeFilter.length > 0) {\n    footerNode = (\n      <span className=\"alert alert-info spacer-left spacer-right spacer-top\">\n        {translateWithParameters(\n          'project_activity.graphs.custom.type_x_message',\n          metricsTypeFilter\n            .map((type: string) => translate('metric.type', type))\n            .sort()\n            .join(', ')\n        )}\n      </span>\n    );\n  }\n\n  return (\n    <BubblePopup\n      customClass=\"bubble-popup-bottom-right  bubble-popup-menu abs-width-300\"\n      position={props.popupPosition}>\n      <MultiSelect\n        allowNewElements={false}\n        allowSelection={props.selectedElements.length < 6}\n        elements={elements}\n        filterSelected={props.filterSelected}\n        footerNode={footerNode}\n        onSearch={props.onSearch}\n        onSelect={props.onSelect}\n        onUnselect={props.onUnselect}\n        placeholder={translate('search.search_for_tags')}\n        renderLabel={props.renderLabel}\n        selectedElements={props.selectedElements}\n      />\n    </BubblePopup>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { find, sortBy } from 'lodash';\nimport AddGraphMetricPopup from './AddGraphMetricPopup';\nimport DropdownIcon from '../../../../components/icons-components/DropdownIcon';\nimport BubblePopupHelper from '../../../../components/common/BubblePopupHelper';\nimport { isDiffMetric } from '../../../../helpers/measures';\nimport { getLocalizedMetricName, translate } from '../../../../helpers/l10n';\n/*:: import type { Metric } from '../../types'; */\n\n/*::\ntype Props = {\n  addMetric: (metric: string) => void,\n  className?: string,\n  metrics: Array<Metric>,\n  metricsTypeFilter: ?Array<string>,\n  removeMetric: (metric: string) => void,\n  selectedMetrics: Array<string>\n};\n*/\n\n/*::\ntype State = {\n  open: boolean,\n  query: string,\n};\n*/\n\nexport default class AddGraphMetric extends React.PureComponent {\n  /*:: props: Props; */\n  state /*: State */ = {\n    open: false,\n    metrics: [],\n    query: '',\n    selectedMetrics: []\n  };\n\n  filterSelected = (query /*: string*/, selectedElements /*: string[]*/) => {\n    return selectedElements.filter(element =>\n      this.getLocalizedMetricNameFromKey(element)\n        .toLowerCase()\n        .includes(query.toLowerCase())\n    );\n  };\n\n  getPopupPos = (containerPos /*: ClientRect*/) => ({\n    top: containerPos.height,\n    right: containerPos.width - 240\n  });\n\n  filterMetricsElements = (\n    { metricsTypeFilter, metrics, selectedMetrics } /*: Props */,\n    query /*: string*/\n  ) => {\n    return metrics\n      .filter(metric => {\n        if (\n          metric.hidden ||\n          isDiffMetric(metric.key) ||\n          ['DATA', 'DISTRIB'].includes(metric.type) ||\n          selectedMetrics.includes(metric.key) ||\n          !getLocalizedMetricName(metric)\n            .toLowerCase()\n            .includes(query.toLowerCase())\n        ) {\n          return false;\n        }\n        if (metricsTypeFilter && metricsTypeFilter.length > 0) {\n          return metricsTypeFilter.includes(metric.type);\n        }\n        return true;\n      })\n      .map(metric => metric.key);\n  };\n\n  getSelectedMetricsElements = (\n    metrics /*: Array<Metric> */,\n    selectedMetrics /*: Array<string> | null */,\n    query /*: string */\n  ) => {\n    const selected /*: Array<string> */ =\n      selectedMetrics === null ? this.props.selectedMetrics : selectedMetrics;\n    return metrics.filter(metric => selected.includes(metric.key)).map(metric => metric.key);\n  };\n\n  getLocalizedMetricNameFromKey = (key /*: string*/) => {\n    const metric = find(this.props.metrics, { key });\n    return metric === undefined ? key : getLocalizedMetricName(metric);\n  };\n\n  toggleForm = () => {\n    this.setState(state => {\n      return { open: !state.open };\n    });\n  };\n\n  onSearch = (query /*: string */) => {\n    this.setState({ query });\n    return Promise.resolve();\n  };\n\n  onSelect = (metric /*: string */) => {\n    this.props.addMetric(metric);\n    this.setState(state => {\n      return {\n        selectedMetrics: sortBy([...state.selectedMetrics, metric]),\n        metrics: this.filterMetricsElements(this.props, state.query)\n      };\n    });\n  };\n\n  onUnselect = (metric /*: string */) => {\n    this.props.removeMetric(metric);\n    this.setState(state => {\n      return {\n        metrics: sortBy([...state.metrics, metric]),\n        selectedMetrics: state.selectedMetrics.filter(selected => selected !== metric)\n      };\n    });\n  };\n\n  togglePopup = (open /*: boolean*/) => {\n    this.setState({ open });\n  };\n\n  render() {\n    const { query } = this.state;\n    const filteredMetrics = this.filterMetricsElements(this.props, query);\n    const selectedMetrics = this.getSelectedMetricsElements(\n      this.props.metrics,\n      this.props.selectedMetrics,\n      query\n    );\n    return (\n      <div className=\"display-inline-block\">\n        <BubblePopupHelper\n          isOpen={this.state.open}\n          offset={{ horizontal: 16, vertical: 0 }}\n          popup={\n            <AddGraphMetricPopup\n              elements={filteredMetrics}\n              filterSelected={this.filterSelected}\n              metricsTypeFilter={this.props.metricsTypeFilter}\n              onSearch={this.onSearch}\n              onSelect={this.onSelect}\n              onUnselect={this.onUnselect}\n              renderLabel={element => this.getLocalizedMetricNameFromKey(element)}\n              selectedElements={selectedMetrics}\n            />\n          }\n          position=\"bottomright\"\n          togglePopup={this.togglePopup}>\n          <button className=\"spacer-left\" onClick={this.toggleForm} type=\"button\">\n            <span>\n              <span className=\"text-ellipsis spacer-right\">\n                {translate('project_activity.graphs.custom.add')}\n              </span>\n              <DropdownIcon className=\"vertical-text-top\" />\n            </span>\n          </button>\n        </BubblePopupHelper>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport AddGraphMetric from './forms/AddGraphMetric';\nimport { isCustomGraph, GRAPH_TYPES } from '../utils';\nimport Select from '../../../components/controls/Select';\nimport { translate } from '../../../helpers/l10n';\n/*:: import type { Metric } from '../types'; */\n\n/*::\ntype Props = {\n  addCustomMetric: string => void,\n  removeCustomMetric: string => void,\n  graph: string,\n  metrics: Array<Metric>,\n  metricsTypeFilter: ?Array<string>,\n  selectedMetrics: Array<string>,\n  updateGraph: string => void\n};\n*/\n\nexport default class ProjectActivityGraphsHeader extends React.PureComponent {\n  /*:: props: Props; */\n\n  handleGraphChange = (option /*: { value: string } */) => {\n    if (option.value !== this.props.graph) {\n      this.props.updateGraph(option.value);\n    }\n  };\n\n  render() {\n    const selectOptions = GRAPH_TYPES.map(graph => ({\n      label: translate('project_activity.graphs', graph),\n      value: graph\n    }));\n\n    return (\n      <header className=\"page-header\">\n        <Select\n          className=\"pull-left input-medium\"\n          clearable={false}\n          onChange={this.handleGraphChange}\n          options={selectOptions}\n          searchable={false}\n          value={this.props.graph}\n        />\n        {isCustomGraph(this.props.graph) && (\n          <AddGraphMetric\n            addMetric={this.props.addCustomMetric}\n            className=\"pull-left spacer-left\"\n            metrics={this.props.metrics}\n            metricsTypeFilter={this.props.metricsTypeFilter}\n            removeMetric={this.props.removeCustomMetric}\n            selectedMetrics={this.props.selectedMetrics}\n          />\n        )}\n      </header>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport classNames from 'classnames';\nimport { flatten, sortBy, throttle } from 'lodash';\nimport { extent, max } from 'd3-array';\nimport { scaleLinear, scalePoint, scaleTime } from 'd3-scale';\nimport { line as d3Line, area, curveBasis } from 'd3-shape';\nimport Draggable, { DraggableCore } from 'react-draggable';\n/*:: import type { DraggableData } from 'react-draggable'; */\n/*:: import type { Point, Serie } from './AdvancedTimeline'; */\nimport * as theme from '../../app/theme';\n\n/*::\ntype Scale = Function;\n*/\n\n/*::\ntype Props = {\n  basisCurve?: boolean,\n  endDate: ?Date,\n  height: number,\n  width: number,\n  leakPeriodDate?: Date,\n  padding: Array<number>,\n  series: Array<Serie>,\n  showAreas?: boolean,\n  showXTicks?: boolean,\n  startDate: ?Date,\n  updateZoom: (start: ?Date, endDate: ?Date) => void\n};\n*/\n\n/*::\ntype State = {\n  overlayLeftPos: ?number,\n  newZoomStart: ?number\n};\n*/\n\nexport default class ZoomTimeLine extends React.PureComponent {\n  /*:: props: Props; */\n  /*:: state: State; */\n\n  static defaultProps = {\n    padding: [0, 0, 18, 0],\n    showXTicks: true\n  };\n\n  constructor(props /*: Props */) {\n    super(props);\n    this.state = { overlayLeftPos: null, newZoomStart: null };\n    this.handleZoomUpdate = throttle(this.handleZoomUpdate, 40);\n  }\n\n  getRatingScale = (availableHeight /*: number */) =>\n    scalePoint()\n      .domain([5, 4, 3, 2, 1])\n      .range([availableHeight, 0]);\n\n  getLevelScale = (availableHeight /*: number */) =>\n    scalePoint()\n      .domain(['ERROR', 'WARN', 'OK'])\n      .range([availableHeight, 0]);\n\n  getYScale = (availableHeight /*: number */, flatData /*: Array<Point> */) => {\n    if (this.props.metricType === 'RATING') {\n      return this.getRatingScale(availableHeight);\n    } else if (this.props.metricType === 'LEVEL') {\n      return this.getLevelScale(availableHeight);\n    } else {\n      return scaleLinear()\n        .range([availableHeight, 0])\n        .domain([0, max(flatData, d => d.y)])\n        .nice();\n    }\n  };\n\n  getXScale = (availableWidth /*: number */, flatData /*: Array<Point> */) =>\n    scaleTime()\n      .domain(extent(flatData, d => d.x))\n      .range([0, availableWidth])\n      .clamp(true);\n\n  getScales = () => {\n    const availableWidth = this.props.width - this.props.padding[1] - this.props.padding[3];\n    const availableHeight = this.props.height - this.props.padding[0] - this.props.padding[2];\n    const flatData = flatten(this.props.series.map((serie /*: Serie */) => serie.data));\n    return {\n      xScale: this.getXScale(availableWidth, flatData),\n      yScale: this.getYScale(availableHeight, flatData)\n    };\n  };\n\n  getEventMarker = (size /*: number */) => {\n    const half = size / 2;\n    return `M${half} 0 L${size} ${half} L ${half} ${size} L0 ${half} L${half} 0 L${size} ${half}`;\n  };\n\n  handleDoubleClick = (xScale /*: Scale */, xDim /*: Array<number> */) => () => {\n    this.handleZoomUpdate(xScale, xDim);\n  };\n\n  handleSelectionDrag = (\n    xScale /*: Scale */,\n    width /*: number */,\n    xDim /*: Array<number> */,\n    checkDelta /*: ?boolean */\n  ) => (e /*: Event */, data /*: DraggableData */) => {\n    if (!checkDelta || data.deltaX) {\n      const x = Math.max(xDim[0], Math.min(data.x, xDim[1] - width));\n      this.handleZoomUpdate(xScale, [x, width + x]);\n    }\n  };\n\n  handleSelectionHandleDrag = (\n    xScale /*: Scale */,\n    fixedX /*: number */,\n    xDim /*: Array<number> */,\n    handleDirection /*: string */,\n    checkDelta /*: ?boolean */\n  ) => (e /*: Event */, data /*: DraggableData */) => {\n    if (!checkDelta || data.deltaX) {\n      const x = Math.max(xDim[0], Math.min(data.x, xDim[1]));\n      this.handleZoomUpdate(xScale, handleDirection === 'right' ? [fixedX, x] : [x, fixedX]);\n    }\n  };\n\n  handleNewZoomDragStart = (xDim /*: Array<number> */) => (\n    e /*: Event */,\n    data /*: DraggableData */\n  ) => {\n    const overlayLeftPos = data.node.getBoundingClientRect().left;\n    this.setState({\n      overlayLeftPos,\n      newZoomStart: Math.round(Math.max(xDim[0], Math.min(data.x - overlayLeftPos, xDim[1])))\n    });\n  };\n\n  handleNewZoomDrag = (xScale /*: Scale */, xDim /*: Array<number> */) => (\n    e /*: Event */,\n    data /*: DraggableData */\n  ) => {\n    const { newZoomStart, overlayLeftPos } = this.state;\n    if (newZoomStart != null && overlayLeftPos != null && data.deltaX) {\n      this.handleZoomUpdate(\n        xScale,\n        sortBy([newZoomStart, Math.max(xDim[0], Math.min(data.x - overlayLeftPos, xDim[1]))])\n      );\n    }\n  };\n\n  handleNewZoomDragEnd = (xScale /*: Scale */, xDim /*: Array<number> */) => (\n    e /*: Event */,\n    data /*: DraggableData */\n  ) => {\n    const { newZoomStart, overlayLeftPos } = this.state;\n    if (newZoomStart != null && overlayLeftPos != null) {\n      const x = Math.round(Math.max(xDim[0], Math.min(data.x - overlayLeftPos, xDim[1])));\n      this.handleZoomUpdate(xScale, newZoomStart === x ? xDim : sortBy([newZoomStart, x]));\n      this.setState({ newZoomStart: null, overlayLeftPos: null });\n    }\n  };\n\n  handleZoomUpdate = (xScale /*: Scale */, xArray /*: Array<number> */) => {\n    const xRange = xScale.range();\n    const startDate =\n      xArray[0] > xRange[0] && xArray[0] < xRange[xRange.length - 1]\n        ? xScale.invert(xArray[0])\n        : null;\n    const endDate =\n      xArray[1] > xRange[0] && xArray[1] < xRange[xRange.length - 1]\n        ? xScale.invert(xArray[1])\n        : null;\n    if (this.props.startDate !== startDate || this.props.endDate !== endDate) {\n      this.props.updateZoom(startDate, endDate);\n    }\n  };\n\n  renderBaseLine = (xScale /*: Scale */, yScale /*: Scale */) => {\n    return (\n      <line\n        className=\"line-chart-grid\"\n        x1={xScale.range()[0]}\n        x2={xScale.range()[1]}\n        y1={yScale.range()[0]}\n        y2={yScale.range()[0]}\n      />\n    );\n  };\n\n  renderTicks = (xScale /*: Scale */, yScale /*: Scale */) => {\n    const format = xScale.tickFormat(7);\n    const ticks = xScale.ticks(7);\n    const y = yScale.range()[0];\n    return (\n      <g>\n        {ticks.slice(0, -1).map((tick, index) => {\n          const nextTick = index + 1 < ticks.length ? ticks[index + 1] : xScale.domain()[1];\n          const x = (xScale(tick) + xScale(nextTick)) / 2;\n          return (\n            <text key={index} className=\"chart-zoom-tick\" x={x} y={y} dy=\"1.3em\">\n              {format(tick)}\n            </text>\n          );\n        })}\n      </g>\n    );\n  };\n\n  renderLeak = (xScale /*: Scale */, yScale /*: Scale */) => {\n    if (!this.props.leakPeriodDate) {\n      return null;\n    }\n    const yRange = yScale.range();\n    return (\n      <rect\n        x={xScale(this.props.leakPeriodDate)}\n        y={yRange[yRange.length - 1]}\n        width={xScale.range()[1] - xScale(this.props.leakPeriodDate)}\n        height={yRange[0] - yRange[yRange.length - 1]}\n        fill={theme.leakColor}\n      />\n    );\n  };\n\n  renderLines = (xScale /*: Scale */, yScale /*: Scale */) => {\n    const lineGenerator = d3Line()\n      .defined(d => d.y || d.y === 0)\n      .x(d => xScale(d.x))\n      .y(d => yScale(d.y));\n    if (this.props.basisCurve) {\n      lineGenerator.curve(curveBasis);\n    }\n    return (\n      <g>\n        {this.props.series.map((serie, idx) => (\n          <path\n            key={serie.name}\n            className={classNames('line-chart-path', 'line-chart-path-' + idx)}\n            d={lineGenerator(serie.data)}\n          />\n        ))}\n      </g>\n    );\n  };\n\n  renderAreas = (xScale /*: Scale */, yScale /*: Scale */) => {\n    const areaGenerator = area()\n      .defined(d => d.y || d.y === 0)\n      .x(d => xScale(d.x))\n      .y1(d => yScale(d.y))\n      .y0(yScale(0));\n    if (this.props.basisCurve) {\n      areaGenerator.curve(curveBasis);\n    }\n    return (\n      <g>\n        {this.props.series.map((serie, idx) => (\n          <path\n            key={serie.name}\n            className={classNames('line-chart-area', 'line-chart-area-' + idx)}\n            d={areaGenerator(serie.data)}\n          />\n        ))}\n      </g>\n    );\n  };\n\n  renderZoomHandle = (\n    options /*: {\n    xScale: Scale,\n    xPos: number,\n    fixedPos: number,\n    yDim: Array<number>,\n    xDim: Array<number>,\n    direction: string\n  } */\n  ) => (\n    <Draggable\n      axis=\"x\"\n      bounds={{ left: options.xDim[0], right: options.xDim[1] }}\n      position={{ x: options.xPos, y: 0 }}\n      onDrag={this.handleSelectionHandleDrag(\n        options.xScale,\n        options.fixedPos,\n        options.xDim,\n        options.direction,\n        true\n      )}\n      onStop={this.handleSelectionHandleDrag(\n        options.xScale,\n        options.fixedPos,\n        options.xDim,\n        options.direction\n      )}>\n      <rect\n        className=\"zoom-selection-handle\"\n        x={-3}\n        y={options.yDim[1]}\n        height={options.yDim[0] - options.yDim[1] + 1}\n        width={6}\n      />\n    </Draggable>\n  );\n\n  renderZoom = (xScale /*: Scale */, yScale /*: Scale */) => {\n    const xRange = xScale.range();\n    const yRange = yScale.range();\n    const xDim = [xRange[0], xRange[xRange.length - 1]];\n    const yDim = [yRange[0], yRange[yRange.length - 1]];\n    const startX = Math.round(this.props.startDate ? xScale(this.props.startDate) : xDim[0]);\n    const endX = Math.round(this.props.endDate ? xScale(this.props.endDate) : xDim[1]);\n    const xArray = sortBy([startX, endX]);\n    const zoomBoxWidth = xArray[1] - xArray[0];\n    const showZoomArea =\n      this.state.newZoomStart == null ||\n      this.state.newZoomStart === startX ||\n      this.state.newZoomStart === endX;\n\n    return (\n      <g className=\"chart-zoom\">\n        <DraggableCore\n          onStart={this.handleNewZoomDragStart(xDim)}\n          onDrag={this.handleNewZoomDrag(xScale, xDim)}\n          onStop={this.handleNewZoomDragEnd(xScale, xDim)}>\n          <rect\n            className=\"zoom-overlay\"\n            x={xDim[0]}\n            y={yDim[1]}\n            height={yDim[0] - yDim[1]}\n            width={xDim[1] - xDim[0]}\n          />\n        </DraggableCore>\n        {showZoomArea && (\n          <Draggable\n            axis=\"x\"\n            bounds={{ left: xDim[0], right: Math.floor(xDim[1] - zoomBoxWidth) }}\n            position={{ x: xArray[0], y: 0 }}\n            onDrag={this.handleSelectionDrag(xScale, zoomBoxWidth, xDim, true)}\n            onStop={this.handleSelectionDrag(xScale, zoomBoxWidth, xDim)}>\n            <rect\n              className=\"zoom-selection\"\n              x={0}\n              y={yDim[1]}\n              height={yDim[0] - yDim[1] + 1}\n              width={zoomBoxWidth}\n              onDoubleClick={this.handleDoubleClick(xScale, xDim)}\n            />\n          </Draggable>\n        )}\n        {showZoomArea &&\n          this.renderZoomHandle({\n            xScale,\n            xPos: startX,\n            fixedPos: endX,\n            xDim,\n            yDim,\n            direction: 'left'\n          })}\n        {showZoomArea &&\n          this.renderZoomHandle({\n            xScale,\n            xPos: endX,\n            fixedPos: startX,\n            xDim,\n            yDim,\n            direction: 'right'\n          })}\n      </g>\n    );\n  };\n\n  render() {\n    if (!this.props.width || !this.props.height) {\n      return <div />;\n    }\n\n    const { xScale, yScale } = this.getScales();\n\n    return (\n      <svg className=\"line-chart \" width={this.props.width} height={this.props.height}>\n        <g transform={`translate(${this.props.padding[3]}, ${this.props.padding[0] + 2})`}>\n          {this.renderLeak(xScale, yScale)}\n          {this.renderBaseLine(xScale, yScale)}\n          {this.props.showXTicks && this.renderTicks(xScale, yScale)}\n          {this.props.showAreas && this.renderAreas(xScale, yScale)}\n          {this.renderLines(xScale, yScale)}\n          {this.renderZoom(xScale, yScale)}\n        </g>\n      </svg>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer';\nimport ZoomTimeLine from '../../../components/charts/ZoomTimeLine';\nimport { hasHistoryData } from '../utils';\n/*:: import type { Serie } from '../../../components/charts/AdvancedTimeline'; */\n\n/*::\ntype Props = {\n  graphEndDate: ?Date,\n  graphStartDate: ?Date,\n  leakPeriodDate?: Date,\n  loading: boolean,\n  metricsType: string,\n  series: Array<Serie>,\n  showAreas?: boolean,\n  updateGraphZoom: (from: ?Date, to: ?Date) => void\n};\n*/\n\nexport default function GraphsZoom(props /*: Props */) {\n  const { loading } = props;\n  if (loading || !hasHistoryData(props.series)) {\n    return null;\n  }\n\n  return (\n    <div className=\"project-activity-graph-zoom\">\n      <AutoSizer disableHeight={true}>\n        {({ width }) => (\n          <ZoomTimeLine\n            endDate={props.graphEndDate}\n            height={64}\n            width={width}\n            interpolate=\"linear\"\n            leakPeriodDate={props.leakPeriodDate}\n            metricType={props.metricsType}\n            padding={[0, 10, 18, 60]}\n            series={props.series}\n            showAreas={props.showAreas}\n            startDate={props.graphStartDate}\n            updateZoom={props.updateGraphZoom}\n          />\n        )}\n      </AutoSizer>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport classNames from 'classnames';\nimport ChartLegendIcon from '../../../components/icons-components/ChartLegendIcon';\n\n/*::\ntype Props = {\n  name: string,\n  style: string,\n  translatedName: string,\n  value: string\n};\n*/\n\nexport default function GraphsTooltipsContent({ name, style, translatedName, value } /*: Props */) {\n  return (\n    <tr key={name} className=\"project-activity-graph-tooltip-line\">\n      <td className=\"thin\">\n        <ChartLegendIcon\n          className={classNames('spacer-right line-chart-legend', 'line-chart-legend-' + style)}\n        />\n      </td>\n      <td className=\"project-activity-graph-tooltip-value text-right spacer-right thin\">{value}</td>\n      <td>{translatedName}</td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport ProjectEventIcon from '../../../components/icons-components/ProjectEventIcon';\nimport { translate } from '../../../helpers/l10n';\n/*:: import type { Event } from '../types'; */\n\n/*::\ntype Props = {\n  addSeparator: boolean,\n  events: Array<Event>\n};\n*/\n\nexport default function GraphsTooltipsContentEvents({ addSeparator, events } /*: Props */) {\n  return (\n    <tbody>\n      {addSeparator && (\n        <tr>\n          <td className=\"project-activity-graph-tooltip-separator\" colSpan=\"3\">\n            <hr />\n          </td>\n        </tr>\n      )}\n      <tr className=\"project-activity-graph-tooltip-line\">\n        <td colSpan=\"3\">\n          <span>{translate('events')}:</span>\n          {events.map(event => (\n            <span key={event.key} className=\"spacer-left\">\n              <ProjectEventIcon className={'project-activity-event-icon ' + event.category} />\n            </span>\n          ))}\n        </td>\n      </tr>\n    </tbody>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { formatMeasure } from '../../../helpers/measures';\nimport { translate } from '../../../helpers/l10n';\n/*:: import type { MeasureHistory } from '../types'; */\n\n/*::\ntype Props = {\n  addSeparator: boolean,\n  measuresHistory: Array<MeasureHistory>,\n  tooltipIdx: number\n};\n*/\n\nexport default function GraphsTooltipsContentCoverage(\n  { addSeparator, measuresHistory, tooltipIdx } /*: Props */\n) {\n  const uncovered = measuresHistory.find(measure => measure.metric === 'uncovered_lines');\n  const coverage = measuresHistory.find(measure => measure.metric === 'coverage');\n  if (!uncovered || !uncovered.history[tooltipIdx] || !coverage || !coverage.history[tooltipIdx]) {\n    return null;\n  }\n  const uncoveredValue = uncovered.history[tooltipIdx].value;\n  const coverageValue = coverage.history[tooltipIdx].value;\n  return (\n    <tbody>\n      {addSeparator && (\n        <tr>\n          <td className=\"project-activity-graph-tooltip-separator\" colSpan=\"3\">\n            <hr />\n          </td>\n        </tr>\n      )}\n      {uncoveredValue && (\n        <tr className=\"project-activity-graph-tooltip-line\">\n          <td\n            colSpan=\"2\"\n            className=\"project-activity-graph-tooltip-value text-right spacer-right thin\">\n            {formatMeasure(uncoveredValue, 'SHORT_INT')}\n          </td>\n          <td>{translate('metric.uncovered_lines.name')}</td>\n        </tr>\n      )}\n      {coverageValue && (\n        <tr className=\"project-activity-graph-tooltip-line\">\n          <td\n            colSpan=\"2\"\n            className=\"project-activity-graph-tooltip-value text-right spacer-right thin\">\n            {formatMeasure(coverageValue, 'PERCENT')}\n          </td>\n          <td>{translate('metric.coverage.name')}</td>\n        </tr>\n      )}\n    </tbody>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { formatMeasure } from '../../../helpers/measures';\nimport { translate } from '../../../helpers/l10n';\n/*:: import type { MeasureHistory } from '../types'; */\n\n/*::\ntype Props = {\n  addSeparator: boolean,\n  measuresHistory: Array<MeasureHistory>,\n  tooltipIdx: number\n};\n*/\n\nexport default function GraphsTooltipsContentDuplication(\n  { addSeparator, measuresHistory, tooltipIdx } /*: Props */\n) {\n  const duplicationDensity = measuresHistory.find(\n    measure => measure.metric === 'duplicated_lines_density'\n  );\n  if (!duplicationDensity || !duplicationDensity.history[tooltipIdx]) {\n    return null;\n  }\n  const duplicationDensityValue = duplicationDensity.history[tooltipIdx].value;\n  if (!duplicationDensityValue) {\n    return null;\n  }\n  return (\n    <tbody>\n      {addSeparator && (\n        <tr>\n          <td className=\"project-activity-graph-tooltip-separator\" colSpan=\"3\">\n            <hr />\n          </td>\n        </tr>\n      )}\n      <tr className=\"project-activity-graph-tooltip-line\">\n        <td\n          colSpan=\"2\"\n          className=\"project-activity-graph-tooltip-value text-right spacer-right thin\">\n          {formatMeasure(duplicationDensityValue, 'PERCENT')}\n        </td>\n        <td>{translate('metric.duplicated_lines_density.name')}</td>\n      </tr>\n    </tbody>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport classNames from 'classnames';\nimport ChartLegendIcon from '../../../components/icons-components/ChartLegendIcon';\nimport Rating from '../../../components/ui/Rating';\n/*:: import type { MeasureHistory } from '../types'; */\n\n/*::\ntype Props = {\n  measuresHistory: Array<MeasureHistory>,\n  name: string,\n  style: string,\n  tooltipIdx: number,\n  translatedName: string,\n  value: string\n};\n*/\n\nconst METRIC_RATING = {\n  bugs: 'reliability_rating',\n  vulnerabilities: 'security_rating',\n  code_smells: 'sqale_rating'\n};\n\nexport default function GraphsTooltipsContentIssues(props /*: Props */) {\n  const rating = props.measuresHistory.find(\n    measure => measure.metric === METRIC_RATING[props.name]\n  );\n  if (!rating || !rating.history[props.tooltipIdx]) {\n    return null;\n  }\n  const ratingValue = rating.history[props.tooltipIdx].value;\n  return (\n    <tr key={props.name} className=\"project-activity-graph-tooltip-issues-line\">\n      <td className=\"thin\">\n        <ChartLegendIcon\n          className={classNames(\n            'spacer-right line-chart-legend',\n            'line-chart-legend-' + props.style\n          )}\n        />\n      </td>\n      <td className=\"text-right spacer-right\">\n        <span className=\"project-activity-graph-tooltip-value\">{props.value}</span>\n        {ratingValue && <Rating className=\"spacer-left\" small={true} value={ratingValue} />}\n      </td>\n      <td>{props.translatedName}</td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport classNames from 'classnames';\nimport GraphsTooltipsContent from './GraphsTooltipsContent';\nimport GraphsTooltipsContentEvents from './GraphsTooltipsContentEvents';\nimport GraphsTooltipsContentCoverage from './GraphsTooltipsContentCoverage';\nimport GraphsTooltipsContentDuplication from './GraphsTooltipsContentDuplication';\nimport GraphsTooltipsContentIssues from './GraphsTooltipsContentIssues';\nimport { DEFAULT_GRAPH } from '../utils';\nimport BubblePopup from '../../../components/common/BubblePopup';\nimport DateTimeFormatter from '../../../components/intl/DateTimeFormatter';\n/*:: import type { Event, MeasureHistory } from '../types'; */\n/*:: import type { Serie } from '../../../components/charts/AdvancedTimeline'; */\n\n/*::\ntype Props = {\n  events: Array<Event>,\n  formatValue: (number | string) => string,\n  graph: string,\n  graphWidth: number,\n  measuresHistory: Array<MeasureHistory>,\n  selectedDate: Date,\n  series: Array<Serie & { translatedName: string }>,\n  tooltipIdx: number,\n  tooltipPos: number\n};\n*/\n\nconst TOOLTIP_WIDTH = 250;\n\nexport default class GraphsTooltips extends React.PureComponent {\n  /*:: props: Props; */\n\n  renderContent() {\n    const { tooltipIdx } = this.props;\n\n    return this.props.series.map((serie, idx) => {\n      const point = serie.data[tooltipIdx];\n      if (!point || (!point.y && point.y !== 0)) {\n        return null;\n      }\n      if (this.props.graph === DEFAULT_GRAPH) {\n        return (\n          <GraphsTooltipsContentIssues\n            key={serie.name}\n            measuresHistory={this.props.measuresHistory}\n            name={serie.name}\n            style={idx.toString()}\n            tooltipIdx={tooltipIdx}\n            translatedName={serie.translatedName}\n            value={this.props.formatValue(point.y)}\n          />\n        );\n      } else {\n        return (\n          <GraphsTooltipsContent\n            key={serie.name}\n            name={serie.name}\n            style={idx.toString()}\n            translatedName={serie.translatedName}\n            value={this.props.formatValue(point.y)}\n          />\n        );\n      }\n    });\n  }\n\n  render() {\n    const { events, measuresHistory, tooltipIdx } = this.props;\n    const top = 30;\n    let left = this.props.tooltipPos + 60;\n    let customClass;\n    if (left > this.props.graphWidth - TOOLTIP_WIDTH - 50) {\n      left -= TOOLTIP_WIDTH;\n      customClass = 'bubble-popup-right';\n    }\n    const tooltipContent = this.renderContent().filter(Boolean);\n    const addSeparator = tooltipContent.length > 0;\n    return (\n      <BubblePopup\n        customClass={classNames(customClass, 'disabled-pointer-events')}\n        position={{ top, left, width: TOOLTIP_WIDTH }}>\n        <div className=\"project-activity-graph-tooltip\">\n          <div className=\"project-activity-graph-tooltip-title spacer-bottom\">\n            <DateTimeFormatter date={this.props.selectedDate} />\n          </div>\n          <table className=\"width-100\">\n            <tbody>{tooltipContent}</tbody>\n            {this.props.graph === 'coverage' && (\n              <GraphsTooltipsContentCoverage\n                addSeparator={addSeparator}\n                measuresHistory={measuresHistory}\n                tooltipIdx={tooltipIdx}\n              />\n            )}\n            {this.props.graph === 'duplications' && (\n              <GraphsTooltipsContentDuplication\n                addSeparator={addSeparator}\n                measuresHistory={measuresHistory}\n                tooltipIdx={tooltipIdx}\n              />\n            )}\n            {events &&\n              events.length > 0 && (\n                <GraphsTooltipsContentEvents addSeparator={addSeparator} events={events} />\n              )}\n          </table>\n        </div>\n      </BubblePopup>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport * as theme from '../../../app/theme';\nimport AlertWarnIcon from '../../../components/icons-components/AlertWarnIcon';\nimport ChartLegendIcon from '../../../components/icons-components/ChartLegendIcon';\nimport { ButtonIcon } from '../../../components/ui/buttons';\nimport ClearIcon from '../../../components/icons-components/ClearIcon';\n\ninterface Props {\n  className?: string;\n  metric: string;\n  name: string;\n  showWarning?: boolean;\n  style: string;\n  removeMetric?: (metric: string) => void;\n}\n\nexport default class GraphsLegendItem extends React.PureComponent<Props> {\n  handleClick = () => {\n    if (this.props.removeMetric) {\n      this.props.removeMetric(this.props.metric);\n    }\n  };\n\n  render() {\n    const isActionable = this.props.removeMetric != null;\n    const legendClass = classNames(\n      { 'project-activity-graph-legend-actionable': isActionable },\n      this.props.className\n    );\n    return (\n      <span className={legendClass}>\n        {this.props.showWarning ? (\n          <AlertWarnIcon className=\"spacer-right\" />\n        ) : (\n          <ChartLegendIcon\n            className={classNames(\n              'text-middle spacer-right line-chart-legend',\n              'line-chart-legend-' + this.props.style\n            )}\n          />\n        )}\n        <span className=\"text-middle\">{this.props.name}</span>\n        {isActionable && (\n          <ButtonIcon\n            className=\"button-tiny spacer-left text-middle\"\n            color={theme.gray60}\n            onClick={this.handleClick}>\n            <ClearIcon size={12} />\n          </ButtonIcon>\n        )}\n      </span>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport GraphsLegendItem from './GraphsLegendItem';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { hasDataValues } from '../utils';\nimport { translate } from '../../../helpers/l10n';\n/*:: import type { Serie } from '../../../components/charts/AdvancedTimeline'; */\n\n/*::\ntype Props = {\n  removeMetric: string => void,\n  series: Array<Serie & { translatedName: string }>\n};\n*/\n\nexport default function GraphsLegendCustom({ removeMetric, series } /*: Props */) {\n  return (\n    <div className=\"project-activity-graph-legends\">\n      {series.map((serie, idx) => {\n        const hasData = hasDataValues(serie);\n        const legendItem = (\n          <GraphsLegendItem\n            metric={serie.name}\n            name={serie.translatedName}\n            showWarning={!hasData}\n            style={idx.toString()}\n            removeMetric={removeMetric}\n          />\n        );\n        if (!hasData) {\n          return (\n            <Tooltip\n              key={serie.name}\n              overlay={translate('project_activity.graphs.custom.metric_no_history')}>\n              <span className=\"spacer-left spacer-right\">{legendItem}</span>\n            </Tooltip>\n          );\n        }\n        return (\n          <span className=\"spacer-left spacer-right\" key={serie.name}>\n            {legendItem}\n          </span>\n        );\n      })}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport GraphsLegendItem from './GraphsLegendItem';\n\n/*::\ntype Props = {\n  series: Array<{ name: string, translatedName: string }>\n};\n*/\n\nexport default function GraphsLegendStatic({ series } /*: Props */) {\n  return (\n    <div className=\"project-activity-graph-legends\">\n      {series.map((serie, idx) => (\n        <GraphsLegendItem\n          className=\"big-spacer-left big-spacer-right\"\n          key={serie.name}\n          metric={serie.name}\n          name={serie.translatedName}\n          style={idx.toString()}\n        />\n      ))}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport React from 'react';\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer';\nimport GraphsTooltips from './GraphsTooltips';\nimport GraphsLegendCustom from './GraphsLegendCustom';\nimport GraphsLegendStatic from './GraphsLegendStatic';\nimport AdvancedTimeline from '../../../components/charts/AdvancedTimeline';\nimport { formatMeasure, getShortType } from '../../../helpers/measures';\n/*:: import type { Event, MeasureHistory } from '../types'; */\n/*:: import type { Serie } from '../../../components/charts/AdvancedTimeline'; */\n\n/*::\ntype Props = {\n  events: Array<Event>,\n  graph: string,\n  graphEndDate: ?Date,\n  graphStartDate: ?Date,\n  leakPeriodDate: Date,\n  isCustom: boolean,\n  measuresHistory: Array<MeasureHistory>,\n  metricsType: string,\n  removeCustomMetric: (metric: string) => void,\n  showAreas: boolean,\n  series: Array<Serie>,\n  selectedDate?: ?Date,\n  updateGraphZoom: (from: ?Date, to: ?Date) => void,\n  updateSelectedDate: (selectedDate: ?Date) => void,\n  updateTooltip: (selectedDate: ?Date) => void\n};\n*/\n\n/*::\ntype State = {\n  tooltipIdx: ?number,\n  tooltipXPos: ?number\n};\n*/\n\nexport default class GraphHistory extends React.PureComponent {\n  /*:: props: Props; */\n  state /*: State */ = {\n    tooltipIdx: null,\n    tooltipXPos: null\n  };\n\n  formatValue = (tick /*: string | number */) =>\n    formatMeasure(tick, getShortType(this.props.metricsType));\n\n  formatTooltipValue = (tick /*: string | number */) => formatMeasure(tick, this.props.metricsType);\n\n  updateTooltip = (\n    selectedDate /*: ?Date */,\n    tooltipXPos /*: ?number */,\n    tooltipIdx /*: ?number */\n  ) => {\n    this.props.updateTooltip(selectedDate);\n    this.setState({ tooltipXPos, tooltipIdx });\n  };\n\n  render() {\n    const { graph, selectedDate, series } = this.props;\n    const { tooltipIdx, tooltipXPos } = this.state;\n\n    return (\n      <div className=\"project-activity-graph-container\">\n        {this.props.isCustom ? (\n          <GraphsLegendCustom series={series} removeMetric={this.props.removeCustomMetric} />\n        ) : (\n          <GraphsLegendStatic series={series} />\n        )}\n        <div className=\"project-activity-graph\">\n          <AutoSizer>\n            {({ height, width }) => (\n              <div>\n                <AdvancedTimeline\n                  endDate={this.props.graphEndDate}\n                  height={height}\n                  width={width}\n                  interpolate=\"linear\"\n                  formatYTick={this.formatValue}\n                  leakPeriodDate={this.props.leakPeriodDate}\n                  metricType={this.props.metricsType}\n                  selectedDate={selectedDate}\n                  series={series}\n                  showAreas={this.props.showAreas}\n                  startDate={this.props.graphStartDate}\n                  updateSelectedDate={this.props.updateSelectedDate}\n                  updateTooltip={this.updateTooltip}\n                  updateZoom={this.props.updateGraphZoom}\n                />\n                {selectedDate != null &&\n                  tooltipXPos != null && (\n                    <GraphsTooltips\n                      events={this.props.events}\n                      formatValue={this.formatTooltipValue}\n                      graph={graph}\n                      graphWidth={width}\n                      measuresHistory={this.props.measuresHistory}\n                      selectedDate={selectedDate}\n                      series={series}\n                      tooltipIdx={tooltipIdx}\n                      tooltipPos={tooltipXPos}\n                    />\n                  )}\n              </div>\n            )}\n          </AutoSizer>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport React from 'react';\nimport { isEqual, sortBy } from 'lodash';\nimport GraphHistory from './GraphHistory';\nimport DeferredSpinner from '../../../components/common/DeferredSpinner';\nimport { EVENT_TYPES, getSeriesMetricType, hasHistoryData, isCustomGraph } from '../utils';\nimport { translate } from '../../../helpers/l10n';\nimport { parseDate } from '../../../helpers/dates';\n/*:: import type { Analysis, MeasureHistory } from '../types'; */\n/*:: import type { Serie } from '../../../components/charts/AdvancedTimeline'; */\n\n/*::\ntype Props = {\n  analyses: Array<Analysis>,\n  eventFilter: string,\n  graph: string,\n  graphs: Array<Array<Serie>>,\n  graphEndDate: ?Date,\n  graphStartDate: ?Date,\n  leakPeriodDate?: Date,\n  loading: boolean,\n  measuresHistory: Array<MeasureHistory>,\n  removeCustomMetric: (metric: string) => void,\n  selectedDate: ?Date,\n  series: Array<Serie>,\n  updateGraphZoom: (from: ?Date, to: ?Date) => void,\n  updateSelectedDate: (selectedDate: ?Date) => void\n};\n*/\n\n/*::\ntype State = {\n  selectedDate?: ?Date\n};\n*/\n\nexport default class GraphsHistory extends React.PureComponent {\n  /*:: props: Props; */\n  /*:: state: State; */\n\n  constructor(props /*: Props */) {\n    super(props);\n    this.state = {\n      selectedDate: props.selectedDate\n    };\n  }\n\n  componentWillReceiveProps(nextProps /*: Props */) {\n    if (!isEqual(nextProps.selectedDate, this.props.selectedDate)) {\n      this.setState({ selectedDate: nextProps.selectedDate });\n    }\n  }\n\n  getEvents = () => {\n    const { analyses, eventFilter } = this.props;\n    const filteredEvents = analyses.reduce((acc, analysis) => {\n      if (analysis.events.length <= 0) {\n        return acc;\n      }\n      let event;\n      if (eventFilter) {\n        event = analysis.events.filter(event => event.category === eventFilter)[0];\n      } else {\n        event = sortBy(analysis.events, event => EVENT_TYPES.indexOf(event.category))[0];\n      }\n      if (!event) {\n        return acc;\n      }\n      return acc.concat({\n        className: event.category,\n        name: event.name,\n        date: parseDate(analysis.date)\n      });\n    }, []);\n    return sortBy(filteredEvents, 'date');\n  };\n\n  getSelectedDateEvents = () => {\n    const { selectedDate } = this.state;\n    const { analyses } = this.props;\n    if (analyses && selectedDate) {\n      const analysis = analyses.find(\n        analysis => analysis.date.valueOf() === selectedDate.valueOf()\n      );\n      if (analysis) {\n        return analysis.events;\n      }\n    }\n    return [];\n  };\n\n  updateTooltip = (selectedDate /*: ?Date */) => this.setState({ selectedDate });\n\n  render() {\n    const { graph, loading, series } = this.props;\n    const isCustom = isCustomGraph(graph);\n\n    if (loading) {\n      return (\n        <div className=\"project-activity-graph-container\">\n          <div className=\"text-center\">\n            <DeferredSpinner className=\"\" loading={loading} />\n          </div>\n        </div>\n      );\n    }\n\n    if (!hasHistoryData(series)) {\n      return (\n        <div className=\"project-activity-graph-container\">\n          <div className=\"note text-center\">\n            {translate(\n              isCustom\n                ? 'project_activity.graphs.custom.no_history'\n                : 'component_measures.no_history'\n            )}\n          </div>\n        </div>\n      );\n    }\n    const events = this.getSelectedDateEvents();\n    const showAreas = ['coverage', 'duplications'].includes(graph);\n    return (\n      <div className=\"project-activity-graphs\">\n        {this.props.graphs.map((series, idx) => (\n          <GraphHistory\n            key={idx}\n            events={events}\n            graph={graph}\n            graphEndDate={this.props.graphEndDate}\n            graphStartDate={this.props.graphStartDate}\n            isCustom={isCustom}\n            leakPeriodDate={this.props.leakPeriodDate}\n            measuresHistory={this.props.measuresHistory}\n            metricsType={getSeriesMetricType(series)}\n            removeCustomMetric={this.props.removeCustomMetric}\n            selectedDate={this.state.selectedDate}\n            series={series}\n            showAreas={showAreas}\n            updateGraphZoom={this.props.updateGraphZoom}\n            updateSelectedDate={this.props.updateSelectedDate}\n            updateTooltip={this.updateTooltip}\n          />\n        ))}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { debounce, findLast, maxBy, minBy, sortBy } from 'lodash';\nimport ProjectActivityGraphsHeader from './ProjectActivityGraphsHeader';\nimport GraphsZoom from './GraphsZoom';\nimport GraphsHistory from './GraphsHistory';\nimport { getCustomGraph, saveCustomGraph, saveGraph } from '../../../helpers/storage';\nimport {\n  datesQueryChanged,\n  generateSeries,\n  getDisplayedHistoryMetrics,\n  getSeriesMetricType,\n  historyQueryChanged,\n  isCustomGraph,\n  splitSeriesInGraphs\n} from '../utils';\n/*:: import type { RawQuery } from '../../../helpers/query'; */\n/*:: import type { Analysis, MeasureHistory, Metric, Query } from '../types'; */\n/*:: import type { Serie } from '../../../components/charts/AdvancedTimeline'; */\n\n/*::\ntype Props = {\n  analyses: Array<Analysis>,\n  leakPeriodDate?: Date,\n  loading: boolean,\n  measuresHistory: Array<MeasureHistory>,\n  metrics: Array<Metric>,\n  query: Query,\n  updateQuery: RawQuery => void\n};\n*/\n\n/*::\ntype State = {\n  graphStartDate: ?Date,\n  graphEndDate: ?Date,\n  series: Array<Serie>,\n  graphs: Array<Array<Serie>>\n};\n*/\n\nconst MAX_GRAPH_NB = 2;\nconst MAX_SERIES_PER_GRAPH = 3;\n\nexport default class ProjectActivityGraphs extends React.PureComponent {\n  /*:: props: Props; */\n  /*:: state: State; */\n\n  constructor(props /*: Props */) {\n    super(props);\n    const series = generateSeries(\n      props.measuresHistory,\n      props.query.graph,\n      props.metrics,\n      getDisplayedHistoryMetrics(props.query.graph, props.query.customMetrics)\n    );\n    this.state = {\n      series,\n      graphs: splitSeriesInGraphs(series, MAX_GRAPH_NB, MAX_SERIES_PER_GRAPH),\n      ...this.getStateZoomDates(null, props, series)\n    };\n    this.updateQueryDateRange = debounce(this.updateQueryDateRange, 500);\n  }\n\n  componentWillReceiveProps(nextProps /*: Props */) {\n    let newSeries;\n    let newGraphs;\n    if (\n      nextProps.measuresHistory !== this.props.measuresHistory ||\n      historyQueryChanged(this.props.query, nextProps.query)\n    ) {\n      newSeries = generateSeries(\n        nextProps.measuresHistory,\n        nextProps.query.graph,\n        nextProps.metrics,\n        getDisplayedHistoryMetrics(nextProps.query.graph, nextProps.query.customMetrics)\n      );\n      newGraphs = splitSeriesInGraphs(newSeries, MAX_GRAPH_NB, MAX_SERIES_PER_GRAPH);\n    }\n\n    const newDates = this.getStateZoomDates(this.props, nextProps, newSeries);\n\n    if (newSeries || newDates) {\n      let newState = {};\n      if (newSeries) {\n        newState.series = newSeries;\n        newState.graphs = newGraphs;\n      }\n      if (newDates) {\n        newState = { ...newState, ...newDates };\n      }\n      this.setState(newState);\n    }\n  }\n\n  getStateZoomDates = (\n    props /*: ?Props */,\n    nextProps /*: Props */,\n    newSeries /*: ?Array<Serie> */\n  ) => {\n    const newDates = { from: nextProps.query.from || null, to: nextProps.query.to || null };\n    if (!props || datesQueryChanged(props.query, nextProps.query)) {\n      return { graphEndDate: newDates.to, graphStartDate: newDates.from };\n    }\n\n    if (newDates.to == null && newDates.from == null && newSeries != null) {\n      const series = newSeries ? newSeries : this.state.series;\n      const firstValid = minBy(series.map(serie => serie.data.find(p => p.y || p.y === 0)), 'x');\n      const lastValid = maxBy(\n        series.map(serie => findLast(serie.data, p => p.y || p.y === 0)),\n        'x'\n      );\n      return {\n        graphEndDate: lastValid ? lastValid.x : newDates.to,\n        graphStartDate: firstValid ? firstValid.x : newDates.from\n      };\n    }\n    return null;\n  };\n\n  getMetricsTypeFilter = () => {\n    if (this.state.graphs.length < MAX_GRAPH_NB) {\n      return null;\n    }\n    return this.state.graphs\n      .filter(graph => graph.length < MAX_SERIES_PER_GRAPH)\n      .map(graph => graph[0].type);\n  };\n\n  addCustomMetric = (metric /*: string */) => {\n    const customMetrics = [...this.props.query.customMetrics, metric];\n    saveCustomGraph(customMetrics);\n    this.props.updateQuery({ customMetrics });\n  };\n\n  removeCustomMetric = (removedMetric /*: string */) => {\n    const customMetrics = this.props.query.customMetrics.filter(metric => metric !== removedMetric);\n    saveCustomGraph(customMetrics);\n    this.props.updateQuery({ customMetrics });\n  };\n\n  updateGraph = (graph /*: string */) => {\n    saveGraph(graph);\n    if (isCustomGraph(graph) && this.props.query.customMetrics.length <= 0) {\n      this.props.updateQuery({ graph, customMetrics: getCustomGraph() });\n    } else {\n      this.props.updateQuery({ graph, customMetrics: [] });\n    }\n  };\n\n  updateGraphZoom = (graphStartDate /*: ?Date */, graphEndDate /*: ?Date */) => {\n    if (graphEndDate != null && graphStartDate != null) {\n      const msDiff = Math.abs(graphEndDate.valueOf() - graphStartDate.valueOf());\n      // 12 hours minimum between the two dates\n      if (msDiff < 1000 * 60 * 60 * 12) {\n        return;\n      }\n    }\n\n    this.setState({ graphStartDate, graphEndDate });\n    this.updateQueryDateRange([graphStartDate, graphEndDate]);\n  };\n\n  updateSelectedDate = (selectedDate /*: ?Date */) => this.props.updateQuery({ selectedDate });\n\n  updateQueryDateRange = (dates /*: Array<?Date> */) => {\n    if (dates[0] == null || dates[1] == null) {\n      this.props.updateQuery({ from: dates[0], to: dates[1] });\n    } else {\n      const sortedDates = sortBy(dates);\n      this.props.updateQuery({ from: sortedDates[0], to: sortedDates[1] });\n    }\n  };\n\n  render() {\n    const { leakPeriodDate, loading, metrics, query } = this.props;\n    const { graphEndDate, graphStartDate, series } = this.state;\n\n    return (\n      <div className=\"project-activity-layout-page-main-inner boxed-group boxed-group-inner\">\n        <ProjectActivityGraphsHeader\n          addCustomMetric={this.addCustomMetric}\n          graph={query.graph}\n          metrics={metrics}\n          metricsTypeFilter={this.getMetricsTypeFilter()}\n          removeCustomMetric={this.removeCustomMetric}\n          selectedMetrics={this.props.query.customMetrics}\n          updateGraph={this.updateGraph}\n        />\n        <GraphsHistory\n          analyses={this.props.analyses}\n          eventFilter={query.category}\n          graph={query.graph}\n          graphs={this.state.graphs}\n          graphEndDate={graphEndDate}\n          graphStartDate={graphStartDate}\n          leakPeriodDate={leakPeriodDate}\n          loading={loading}\n          measuresHistory={this.props.measuresHistory}\n          removeCustomMetric={this.removeCustomMetric}\n          selectedDate={this.props.query.selectedDate}\n          series={series}\n          updateGraphZoom={this.updateGraphZoom}\n          updateSelectedDate={this.updateSelectedDate}\n        />\n        <GraphsZoom\n          graphEndDate={graphEndDate}\n          graphStartDate={graphStartDate}\n          leakPeriodDate={leakPeriodDate}\n          loading={loading}\n          metricsType={getSeriesMetricType(series)}\n          series={series}\n          showAreas={['coverage', 'duplications'].includes(query.graph)}\n          updateGraphZoom={this.updateGraphZoom}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport Helmet from 'react-helmet';\nimport ProjectActivityPageHeader from './ProjectActivityPageHeader';\nimport ProjectActivityAnalysesList from './ProjectActivityAnalysesList';\nimport ProjectActivityGraphs from './ProjectActivityGraphs';\nimport { parseDate } from '../../../helpers/dates';\nimport { translate } from '../../../helpers/l10n';\nimport './projectActivity.css';\n/*:: import type { Analysis, MeasureHistory, Metric, Query } from '../types'; */\n\n/*::\ntype Props = {\n  addCustomEvent: (analysis: string, name: string, category?: string) => Promise<*>,\n  addVersion: (analysis: string, version: string) => Promise<*>,\n  analyses: Array<Analysis>,\n  analysesLoading: boolean,\n  changeEvent: (event: string, name: string) => Promise<*>,\n  deleteAnalysis: (analysis: string) => Promise<*>,\n  deleteEvent: (analysis: string, event: string) => Promise<*>,\n  graphLoading: boolean,\n  initializing: boolean,\n  project: {\n    configuration?: { showHistory: boolean },\n    key: string,\n    leakPeriodDate?: string,\n    qualifier: string\n  },\n  metrics: Array<Metric>,\n  measuresHistory: Array<MeasureHistory>,\n  query: Query,\n  updateQuery: (newQuery: Query) => void\n};\n*/\n\nexport default function ProjectActivityApp(props /*: Props */) {\n  const { analyses, measuresHistory, query } = props;\n  const { configuration } = props.project;\n  const canAdmin =\n    (props.project.qualifier === 'TRK' || props.project.qualifier === 'APP') &&\n    (configuration ? configuration.showHistory : false);\n  const canDeleteAnalyses = configuration ? configuration.showHistory : false;\n  return (\n    <div id=\"project-activity\" className=\"page page-limited\">\n      <Helmet title={translate('project_activity.page')} />\n\n      <ProjectActivityPageHeader\n        category={query.category}\n        from={query.from}\n        project={props.project}\n        to={query.to}\n        updateQuery={props.updateQuery}\n      />\n\n      <div className=\"layout-page project-activity-page\">\n        <div className=\"layout-page-side-outer project-activity-page-side-outer boxed-group\">\n          <ProjectActivityAnalysesList\n            addCustomEvent={props.addCustomEvent}\n            addVersion={props.addVersion}\n            analysesLoading={props.analysesLoading}\n            analyses={analyses}\n            canAdmin={canAdmin}\n            canDeleteAnalyses={canDeleteAnalyses}\n            className=\"boxed-group-inner\"\n            changeEvent={props.changeEvent}\n            deleteAnalysis={props.deleteAnalysis}\n            deleteEvent={props.deleteEvent}\n            initializing={props.initializing}\n            project={props.project}\n            query={props.query}\n            updateQuery={props.updateQuery}\n          />\n        </div>\n        <div className=\"project-activity-layout-page-main\">\n          <ProjectActivityGraphs\n            analyses={analyses}\n            leakPeriodDate={\n              props.project.leakPeriodDate ? parseDate(props.project.leakPeriodDate) : undefined\n            }\n            loading={props.graphLoading}\n            measuresHistory={measuresHistory}\n            metrics={props.metrics}\n            query={query}\n            updateQuery={props.updateQuery}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\n/*:: import type { Event } from './types'; */\n/*:: import type { State } from './components/ProjectActivityAppContainer'; */\n\nexport const addCustomEvent = (analysis /*: string */, event /*: Event */) => (\n  state /*: State */\n) => ({\n  analyses: state.analyses.map(item => {\n    if (item.key !== analysis) {\n      return item;\n    }\n    return { ...item, events: [...item.events, event] };\n  })\n});\n\nexport const deleteEvent = (analysis /*: string */, event /*: string */) => (\n  state /*: State */\n) => ({\n  analyses: state.analyses.map(item => {\n    if (item.key !== analysis) {\n      return item;\n    }\n    return {\n      ...item,\n      events: item.events.filter(eventItem => eventItem.key !== event)\n    };\n  })\n});\n\nexport const changeEvent = (analysis /*: string */, event /*: Event */) => (\n  state /*: State */\n) => ({\n  analyses: state.analyses.map(item => {\n    if (item.key !== analysis) {\n      return item;\n    }\n    return {\n      ...item,\n      events: item.events.map(\n        eventItem => (eventItem.key === event.key ? { ...eventItem, ...event } : eventItem)\n      )\n    };\n  })\n});\n\nexport const deleteAnalysis = (analysis /*: string */) => (state /*: State */) => ({\n  analyses: state.analyses.filter(item => item.key !== analysis)\n});\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ProjectActivityApp from './ProjectActivityApp';\nimport throwGlobalError from '../../../app/utils/throwGlobalError';\nimport { getAllTimeMachineData } from '../../../api/time-machine';\nimport { getAllMetrics } from '../../../api/metrics';\nimport * as api from '../../../api/projectActivity';\nimport * as actions from '../actions';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\nimport { parseDate } from '../../../helpers/dates';\nimport { getCustomGraph, getGraph } from '../../../helpers/storage';\nimport {\n  customMetricsChanged,\n  DEFAULT_GRAPH,\n  getHistoryMetrics,\n  isCustomGraph,\n  parseQuery,\n  serializeQuery,\n  serializeUrlQuery\n} from '../utils';\n/*:: import type { RawQuery } from '../../../helpers/query'; */\n/*:: import type { Analysis, MeasureHistory, Metric, Paging, Query } from '../types'; */\n\n/*::\ntype Component = {\n  breadcrumbs: Array<{ key: string, qualifier: string}>,\n  configuration?: { showHistory: boolean },\n  key: string,\n  leakPeriodDate?: string,\n  qualifier: string\n};\n\ntype Props = {\n  branchLike?: { id?: string; name: string },\n  location: { pathname: string, query: RawQuery },\n  component: Component\n};\n*/\n\n/*::\nexport type State = {\n  analyses: Array<Analysis>,\n  analysesLoading: boolean,\n  graphLoading: boolean,\n  initialized: boolean,\n  metrics: Array<Metric>,\n  measuresHistory: Array<MeasureHistory>,\n  paging?: Paging,\n  query: Query\n};\n*/\n\nexport default class ProjectActivityAppContainer extends React.PureComponent {\n  /*:: mounted: boolean; */\n  /*:: props: Props; */\n  /*:: state: State; */\n\n  static contextTypes = {\n    router: PropTypes.object.isRequired\n  };\n\n  constructor(props /*: Props */) {\n    super(props);\n    this.state = {\n      analyses: [],\n      analysesLoading: false,\n      graphLoading: true,\n      initialized: false,\n      measuresHistory: [],\n      metrics: [],\n      query: parseQuery(props.location.query)\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    if (this.shouldRedirect()) {\n      const newQuery = { ...this.state.query, graph: getGraph() };\n      if (isCustomGraph(newQuery.graph)) {\n        newQuery.customMetrics = getCustomGraph();\n      }\n      this.context.router.replace({\n        pathname: this.props.location.pathname,\n        query: {\n          ...serializeUrlQuery(newQuery),\n          ...getBranchLikeQuery(this.props.branchLike)\n        }\n      });\n    } else {\n      this.firstLoadData(this.state.query, this.props.component);\n    }\n  }\n\n  componentWillReceiveProps(nextProps /*: Props */) {\n    if (nextProps.location.query !== this.props.location.query) {\n      const query = parseQuery(nextProps.location.query);\n      if (query.graph !== this.state.query.graph || customMetricsChanged(this.state.query, query)) {\n        if (this.state.initialized) {\n          this.updateGraphData(query.graph, query.customMetrics);\n        } else {\n          this.firstLoadData(query, nextProps.component);\n        }\n      }\n      this.setState({ query });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  addCustomEvent = (analysis /*: string */, name /*: string */, category /*: ?string */) =>\n    api\n      .createEvent(analysis, name, category)\n      .then(\n        ({ analysis, ...event }) =>\n          this.mounted && this.setState(actions.addCustomEvent(analysis, event))\n      );\n\n  addVersion = (analysis /*: string */, version /*: string */) =>\n    this.addCustomEvent(analysis, version, 'VERSION');\n\n  changeEvent = (event /*: string */, name /*: string */) =>\n    api\n      .changeEvent(event, name)\n      .then(\n        ({ analysis, ...event }) =>\n          this.mounted && this.setState(actions.changeEvent(analysis, event))\n      );\n\n  deleteAnalysis = (analysis /*: string */) =>\n    api.deleteAnalysis(analysis).then(() => {\n      if (this.mounted) {\n        this.updateGraphData(this.state.query.graph, this.state.query.customMetrics);\n        this.setState(actions.deleteAnalysis(analysis));\n      }\n    });\n\n  deleteEvent = (analysis /*: string */, event /*: string */) =>\n    api\n      .deleteEvent(event)\n      .then(() => this.mounted && this.setState(actions.deleteEvent(analysis, event)));\n\n  fetchActivity = (\n    project /*: string */,\n    p /*: number */,\n    ps /*: number */,\n    additional /*: ?{\n      [string]: string\n    } */\n  ) => {\n    const parameters = { project, p, ps, ...getBranchLikeQuery(this.props.branchLike) };\n    return api\n      .getProjectActivity({ ...additional, ...parameters })\n      .then(({ analyses, paging }) => ({\n        analyses: analyses.map(analysis => ({ ...analysis, date: parseDate(analysis.date) })),\n        paging\n      }));\n  };\n\n  fetchMeasuresHistory = (metrics /*: Array<string> */) => {\n    if (metrics.length <= 0) {\n      return Promise.resolve([]);\n    }\n    return getAllTimeMachineData({\n      component: this.props.component.key,\n      metrics: metrics.join(),\n      ...getBranchLikeQuery(this.props.branchLike)\n    }).then(\n      ({ measures }) =>\n        measures.map(measure => ({\n          metric: measure.metric,\n          history: measure.history.map(analysis => ({\n            date: parseDate(analysis.date),\n            value: analysis.value\n          }))\n        })),\n      () => {}\n    );\n  };\n\n  loadAllActivities = (\n    project /*: string */,\n    prevResult /*: ?{ analyses: Array<Analysis>, paging: Paging } */\n  ) => {\n    if (\n      prevResult &&\n      prevResult.paging.pageIndex * prevResult.paging.pageSize >= prevResult.paging.total\n    ) {\n      return Promise.resolve(prevResult);\n    }\n    const nextPage = prevResult ? prevResult.paging.pageIndex + 1 : 1;\n    return this.fetchActivity(project, nextPage, 500).then(result => {\n      if (!prevResult) {\n        return this.loadAllActivities(project, result);\n      }\n      return this.loadAllActivities(project, {\n        analyses: prevResult.analyses.concat(result.analyses),\n        paging: result.paging\n      });\n    });\n  };\n\n  getTopLevelComponent = (component /*: Component */) => {\n    let current = component.breadcrumbs.length - 1;\n    while (\n      current > 0 &&\n      !['TRK', 'VW', 'APP'].includes(component.breadcrumbs[current].qualifier)\n    ) {\n      current--;\n    }\n    return component.breadcrumbs[current].key;\n  };\n\n  firstLoadData(query /*: Query */, component /*: Component */) {\n    const graphMetrics = getHistoryMetrics(query.graph, query.customMetrics);\n    const topLevelComponent = this.getTopLevelComponent(component);\n    Promise.all([\n      this.fetchActivity(topLevelComponent, 1, 100, serializeQuery(query)),\n      getAllMetrics(),\n      this.fetchMeasuresHistory(graphMetrics)\n    ]).then(\n      response => {\n        if (this.mounted) {\n          this.setState({\n            analyses: response[0].analyses,\n            analysesLoading: true,\n            graphLoading: false,\n            initialized: true,\n            measuresHistory: response[2],\n            metrics: response[1],\n            paging: response[0].paging\n          });\n\n          this.loadAllActivities(topLevelComponent).then(({ analyses, paging }) => {\n            if (this.mounted) {\n              this.setState({\n                analyses,\n                analysesLoading: false,\n                paging\n              });\n            }\n          });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ initialized: true, analysesLoading: false, graphLoading: false });\n        }\n      }\n    );\n  }\n\n  updateGraphData = (graph /*: string */, customMetrics /*: Array<string> */) => {\n    const graphMetrics = getHistoryMetrics(graph, customMetrics);\n    this.setState({ graphLoading: true });\n    this.fetchMeasuresHistory(graphMetrics).then(\n      (measuresHistory /*: Array<MeasureHistory> */) => {\n        if (this.mounted) {\n          this.setState({ graphLoading: false, measuresHistory });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ graphLoading: false, measuresHistory: [] });\n        }\n      }\n    );\n  };\n\n  updateQuery = (newQuery /*: Query */) => {\n    const query = serializeUrlQuery({\n      ...this.state.query,\n      ...newQuery\n    });\n    this.context.router.push({\n      pathname: this.props.location.pathname,\n      query: {\n        ...query,\n        ...getBranchLikeQuery(this.props.branchLike),\n        id: this.props.component.key\n      }\n    });\n  };\n\n  shouldRedirect = () => {\n    const locationQuery = this.props.location.query;\n    if (!locationQuery) {\n      return false;\n    }\n    const filtered = Object.keys(locationQuery).some(\n      key => key !== 'id' && locationQuery[key] !== ''\n    );\n\n    const graph = getGraph();\n    const emptyCustomGraph = isCustomGraph(graph) && getCustomGraph().length <= 0;\n\n    // if there is no filter, but there are saved preferences in the localStorage\n    // also don't redirect to custom if there is no metrics selected for it\n    return !filtered && graph != null && graph !== DEFAULT_GRAPH && !emptyCustomGraph;\n  };\n\n  render() {\n    if (this.shouldRedirect()) {\n      return null;\n    }\n\n    return (\n      <ProjectActivityApp\n        addCustomEvent={this.addCustomEvent}\n        addVersion={this.addVersion}\n        analyses={this.state.analyses}\n        analysesLoading={this.state.analysesLoading}\n        changeEvent={this.changeEvent}\n        deleteAnalysis={this.deleteAnalysis}\n        deleteEvent={this.deleteEvent}\n        graphLoading={!this.state.initialized || this.state.graphLoading}\n        initializing={!this.state.initialized}\n        metrics={this.state.metrics}\n        measuresHistory={this.state.measuresHistory}\n        project={this.props.component}\n        query={this.state.query}\n        updateQuery={this.updateQuery}\n      />\n    );\n  }\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var REACT_ELEMENT_TYPE = (typeof Symbol === 'function' &&\n    Symbol.for &&\n    Symbol.for('react.element')) ||\n    0xeac7;\n\n  var isValidElement = function(object) {\n    return typeof object === 'object' &&\n      object !== null &&\n      object.$$typeof === REACT_ELEMENT_TYPE;\n  };\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(isValidElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\n\ninterface Props {\n  className?: string;\n  children?: React.ReactNode;\n  isOpen: boolean;\n  offset?: { vertical: number; horizontal: number };\n  popup: JSX.Element;\n  position: 'bottomleft' | 'bottomright';\n  togglePopup: (show: boolean) => void;\n}\n\ninterface State {\n  position: { top: number; left?: number; right?: number };\n}\n\nexport default class BubblePopupHelper extends React.PureComponent<Props, State> {\n  container?: HTMLElement | null;\n  popupContainer?: HTMLElement | null;\n  state: State = {\n    position: { top: 0, right: 0 }\n  };\n\n  componentDidMount() {\n    this.setState({ position: this.getPosition(this.props) });\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (!this.props.isOpen && nextProps.isOpen) {\n      window.addEventListener('keydown', this.handleKey, false);\n      window.addEventListener('click', this.handleOutsideClick, false);\n    } else if (this.props.isOpen && !nextProps.isOpen) {\n      window.removeEventListener('keydown', this.handleKey);\n      window.removeEventListener('click', this.handleOutsideClick);\n    }\n  }\n\n  handleKey = (event: KeyboardEvent) => {\n    // Escape key\n    if (event.keyCode === 27) {\n      this.props.togglePopup(false);\n    }\n  };\n\n  handleOutsideClick = (event: MouseEvent) => {\n    if (!this.popupContainer || !this.popupContainer.contains(event.target as Node)) {\n      this.props.togglePopup(false);\n    }\n  };\n\n  handleClick(event: React.SyntheticEvent<HTMLElement>) {\n    event.stopPropagation();\n  }\n\n  getPosition(props: Props) {\n    if (this.container) {\n      const containerPos = this.container.getBoundingClientRect();\n      const { position } = props;\n      const offset = props.offset || { vertical: 0, horizontal: 0 };\n      if (position === 'bottomleft') {\n        return { top: containerPos.height + offset.vertical, left: offset.horizontal };\n      } else {\n        // if (position === 'bottomright')\n        return { top: containerPos.height + offset.vertical, right: offset.horizontal };\n      }\n    } else {\n      return { top: 0, right: 0 };\n    }\n  }\n\n  render() {\n    return (\n      <div\n        className={classNames(this.props.className, 'bubble-popup-helper')}\n        onClick={this.handleClick}\n        ref={container => (this.container = container)}\n        role=\"tooltip\"\n        tabIndex={0}>\n        {this.props.children}\n        {this.props.isOpen && (\n          <div ref={popupContainer => (this.popupContainer = popupContainer)}>\n            {React.cloneElement(this.props.popup, {\n              popupPosition: this.state.position\n            })}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n"],"sourceRoot":""}