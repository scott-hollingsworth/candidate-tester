(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1006:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0),a=n(6),c=n(50);n(379);function o(e){var t=e.className,n=e.muted,o=void 0!==n&&n,i=e.small,s=void 0!==i&&i,u=e.value;if(void 0===u)return r.createElement("span",null,"â€“");var l=Object(c.formatMeasure)(u,"RATING");return r.createElement("span",{className:a("rating","rating-"+l,{"rating-small":s,"rating-muted":o},t)},l)}},1009:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return u}),n.d(t,"d",function(){return l}),n.d(t,"g",function(){return f}),n.d(t,"e",function(){return h}),n.d(t,"f",function(){return m}),n.d(t,"m",function(){return g}),n.d(t,"n",function(){return v}),n.d(t,"o",function(){return y}),n.d(t,"p",function(){return O}),n.d(t,"q",function(){return b}),n.d(t,"s",function(){return j}),n.d(t,"h",function(){return x}),n.d(t,"v",function(){return D}),n.d(t,"l",function(){return E}),n.d(t,"i",function(){return k}),n.d(t,"j",function(){return P}),n.d(t,"k",function(){return T}),n.d(t,"r",function(){return M}),n.d(t,"t",function(){return w}),n.d(t,"u",function(){return I});var r=n(4),a=n(8),c=n(28),o=n(1),i=["VERSION","QUALITY_GATE","QUALITY_PROFILE","OTHER"],s=["QUALITY_GATE","OTHER"],u="issues",l=["issues","coverage","duplications","custom"],d={issues:["bugs","code_smells","vulnerabilities"],coverage:["lines_to_cover","uncovered_lines"],duplications:["ncloc","duplicated_lines"]},p={issues:d.issues.concat(["reliability_rating","security_rating","sqale_rating"]),coverage:d.coverage.concat(["coverage"]),duplications:d.duplications.concat(["duplicated_lines_density"])},f=function(e,t){return!Object(r.isEqual)(e.from,t.from)||!Object(r.isEqual)(e.to,t.to)},h=function(e,t){return e.category!==t.category||f(e,t)},m=function(e,t){return!Object(r.isEqual)(e.customMetrics,t.customMetrics)},g=function(e){return e.data.some(function(e){return e.y||0===e.y})},v=function(e){return e.some(function(e){return e.data&&e.data.length>1})},y=function(e){return e.some(function(e){return e.data&&e.data.length>1&&g(e)})};function O(e,t){return e.graph!==t.graph}var b=function(e){return"custom"===e},j=function(e,t){return!Object(r.isEqual)(e.selectedDate,t.selectedDate)},S=function(e,t){var n=t.find(function(e){return"lines_to_cover"===e.metric});return{data:n?e.history.map(function(e,t){return{x:e.date,y:Number(n.history[t].value)-Number(e.value)}}):[],name:"covered_lines",translatedName:Object(o.l)("project_activity.custom_metric.covered_lines"),type:"INT"}};function x(e,t,n,a){return a.length<=0||void 0===e?[]:Object(r.sortBy)(e.filter(function(e){return a.indexOf(e.metric)>=0}).map(function(r){if("uncovered_lines"===r.metric&&!b(t))return S(r,e);var a=function(e,t){return Array.isArray(t)?t.find(function(t){return t.key===e}):t[e]}(r.metric,n);return{data:r.history.map(function(e){return{x:e.date,y:a&&"LEVEL"===a.type?e.value:Number(e.value)}}),name:r.metric,translatedName:a?Object(o.e)(a):r.metric,type:a?a.type:"INT"}}),function(e){return a.indexOf("covered_lines"===e.name?"uncovered_lines":e.name)})}var D=function(e,t,n){return Object(r.flatMap)(Object(r.groupBy)(e,function(e){return e.type}),function(e){return Object(r.chunk)(e,n)}).slice(0,t)},E=function(e){return e.length>0?e[0].type:"INT"};function k(e,t){return e.reduce(function(e,n){var r=e[e.length-1],a=n.events.find(function(e){return"VERSION"===e.category});if(a){var o={version:a.name,key:a.key,byDay:{}};!r||Object.keys(r.byDay).length>0?e.push(o):e[e.length-1]=o,r=o}else r||(r={version:null,key:null,byDay:{}},e.push(r));var i=Object(c.f)(Object(c.e)(n.date)).getTime().toString(),s=!0;if(t.category||t.from||t.to){var u=!t.from||n.date>=t.from,l=!t.to||n.date<=t.to,d=!t.category||null!=n.events.find(function(e){return e.category===t.category});s=u&&l&&d}return s&&(r.byDay[i]||(r.byDay[i]=[]),r.byDay[i].push(n)),e},[])}var P=function(e,t){return b(e)?t:d[e]},T=function(e,t){return b(e)?t:p[e]},_=function(e){var t=Object(a.h)(e);return l.includes(t)?t:u},N=function(e){return e===u?void 0:e};function M(e){return{category:Object(a.h)(e.category),customMetrics:Object(a.b)(e.custom_metrics,a.h),from:Object(a.d)(e.from),graph:_(e.graph),project:Object(a.h)(e.id),to:Object(a.d)(e.to),selectedDate:Object(a.d)(e.selected_date)}}function w(e){return Object(a.a)({category:Object(a.m)(e.category),from:Object(a.j)(e.from),project:Object(a.m)(e.project),to:Object(a.j)(e.to)})}function I(e){return Object(a.a)({category:Object(a.m)(e.category),custom_metrics:Object(a.n)(e.customMetrics),from:Object(a.j)(e.from),graph:N(e.graph),id:Object(a.m)(e.project),to:Object(a.j)(e.to),selected_date:Object(a.j)(e.selectedDate)})}},1073:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),a=n(13),c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};function o(e,t){return function(e){return Object(r.getJSON)("/api/measures/search_history",e).catch(a.a)}(c({},e,{ps:1e3})).then(function(n){var r=t?{measures:t.measures.map(function(e,t){return c({},e,{history:e.history.concat(n.measures[t].history)})}),paging:n.paging}:n;return r.paging.pageIndex*r.paging.pageSize>=r.paging.total?r:o(c({},e,{p:r.paging.pageIndex+1}),r)})}},1074:function(e,t,n){"use strict";var r,a=n(0),c=n.n(a),o=n(6),i=n.n(o),s=n(4),u=n(1e3),l=n(1011),d=n(189),p=n(15),f=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},m=function(e){function t(t){var n=e.call(this,t)||this;n.getRatingScale=function(e){return Object(l.d)().domain([5,4,3,2,1]).range([e,0])},n.getLevelScale=function(e){return Object(l.d)().domain(["ERROR","WARN","OK"]).range([e,0])},n.getYScale=function(e,t,r){return"RATING"===e.metricType?n.getRatingScale(t):"LEVEL"===e.metricType?n.getLevelScale(t):Object(l.b)().range([t,0]).domain([0,Object(u.e)(r,function(e){return e.y})||1]).nice()},n.getXScale=function(e,t,n){var r=e.startDate,a=e.endDate,c=Object(u.d)(n,function(e){return e.x}),o=r&&r>c[0]?r:c[0],i=a&&a<c[1]?a:c[1],d=Object(l.e)().domain(Object(s.sortBy)([o,i])).range([0,t]).clamp(!1);return{xScale:d,maxXRange:c.map(d)}},n.getScales=function(e){var t=e.width-e.padding[1]-e.padding[3],r=e.height-e.padding[0]-e.padding[2],a=Object(s.flatten)(e.series.map(function(e){return e.data}));return h({},n.getXScale(e,t,a),{yScale:n.getYScale(e,r,a)})},n.getSelectedDatePos=function(e,t){var r=n.props.series[0];if(t&&r){var a=r.data.findIndex(function(e){return e.x.valueOf()===t.valueOf()}),c=e.range().sort(),o=e(t);if(a>=0&&o>=c[0]&&o<=c[1])return{selectedDate:t,selectedDateXPos:e(t),selectedDateIdx:a}}return{selectedDate:null,selectedDateXPos:null,selectedDateIdx:null}},n.getEventMarker=function(e){var t=e/2;return"M"+t+" 0 L"+e+" "+t+" L "+t+" "+e+" L0 "+t+" L"+t+" 0 L"+e+" "+t},n.getMouseOverlayPos=function(e){if(n.state.mouseOverlayPos)return n.state.mouseOverlayPos;var t=e.getBoundingClientRect();return n.setState({mouseOverlayPos:t}),t},n.handleWheel=function(e){e.preventDefault();var t=n.state,r=t.maxXRange,a=t.xScale,c=n.getMouseOverlayPos(e.target),o=(e.pageX-c.left)/c.width,i=a.range(),s=e.deltaMode?25/e.deltaMode*n.props.zoomSpeed:n.props.zoomSpeed,u=i[0]-Math.round(s*e.deltaY*o),l=i[1]+Math.round(s*e.deltaY*(1-o)),d=u>r[0]?a.invert(u):null,p=l<r[1]?a.invert(l):null;n.handleZoomUpdate(d,p)},n.handleZoomUpdate=function(e,t){n.props.updateZoom&&n.props.updateZoom(e,t)},n.handleMouseMove=function(e){var t=n.getMouseOverlayPos(e.target);n.updateTooltipPos(e.pageX-t.left)},n.handleMouseEnter=function(){return n.setState({mouseOver:!0})},n.handleMouseOut=function(e){var t=n.props.updateTooltip,r=e.relatedTarget&&"string"==typeof e.relatedTarget.className?e.relatedTarget.className:"";!t||r.includes("bubble-popup")||r.includes("graph-tooltip")||(n.setState({mouseOver:!1,selectedDate:null,selectedDateXPos:null,selectedDateIdx:null}),t(null,null,null))},n.handleClick=function(){var e=n.props.updateSelectedDate;e&&e(n.state.selectedDate)},n.updateTooltipPos=function(e){var t=n.props.series[0];if(n.state.mouseOver&&t){var r=n.props.updateTooltip,a=n.state.xScale.invert(e),c=(0,Object(u.c)(function(e){return e.x}).right)(t.data,a);if(c>=0){var o=t.data[c-1],i=t.data[c];(!i||o&&a-o.x<=i.x-a)&&c--;var s=t.data[c].x,l=n.state.xScale(s);n.setState({selectedDate:s,selectedDateXPos:l,selectedDateIdx:c}),r&&r(s,l,c)}}},n.renderHorizontalGrid=function(){var e=n.props.formatYTick,t=n.state,r=t.xScale,a=t.yScale,o="function"==typeof a.ticks?a.ticks(n.props.maxYTicksCount):a.domain();if(o.length||o.push(a.domain()[1]),e){var i=o.map(function(t){return e(t)});o.length>Object(s.uniq)(i).length&&(o=a.domain())}return c.a.createElement("g",null,o.map(function(t){return c.a.createElement("g",{key:t},null!=e&&c.a.createElement("text",{className:"line-chart-tick line-chart-tick-x",dx:"-1em",dy:"0.3em",textAnchor:"end",x:r.range()[0],y:a(t)},e(t)),c.a.createElement("line",{className:"line-chart-grid",x1:r.range()[0],x2:r.range()[1],y1:a(t),y2:a(t)}))}))},n.renderXAxisTicks=function(){var e=n.state,t=e.xScale,r=e.yScale,a=t.tickFormat(7),o=t.ticks(7),i=r.range()[0];return c.a.createElement("g",null,o.slice(0,-1).map(function(e,n){var r=n+1<o.length?o[n+1]:t.domain()[1],s=(t(e)+t(r))/2;return c.a.createElement("text",{key:n,className:"line-chart-tick",x:s,y:i,dy:"1.5em"},a(e))}))},n.renderLeak=function(){var e=n.state.yScale.range(),t=n.state.xScale.range(),r=t[t.length-1]-n.state.xScale(n.props.leakPeriodDate);return r<0?null:c.a.createElement("rect",{className:"leak-chart-rect",x:n.state.xScale(n.props.leakPeriodDate),y:e[e.length-1],width:r,height:e[0]-e[e.length-1],fill:p.leakColor})},n.renderLines=function(){var e=Object(d.d)().defined(function(e){return e.y||0===e.y}).x(function(e){return n.state.xScale(e.x)}).y(function(e){return n.state.yScale(e.y)});return n.props.basisCurve&&e.curve(d.c),c.a.createElement("g",null,n.props.series.map(function(t,n){return c.a.createElement("path",{key:t.name,className:i()("line-chart-path","line-chart-path-"+n),d:e(t.data)})}))},n.renderAreas=function(){var e=Object(d.b)().defined(function(e){return e.y||0===e.y}).x(function(e){return n.state.xScale(e.x)}).y1(function(e){return n.state.yScale(e.y)}).y0(n.state.yScale(0));return n.props.basisCurve&&e.curve(d.c),c.a.createElement("g",null,n.props.series.map(function(t,n){return c.a.createElement("path",{key:t.name,className:i()("line-chart-area","line-chart-area-"+n),d:e(t.data)})}))},n.renderEvents=function(){var e=n.props,t=e.events,r=e.eventSize;if(!t||!r)return null;var a=n.state,o=a.xScale,s=a.yScale,u=t.filter(function(e){return e.date>=o.domain()[0]&&e.date<=o.domain()[1]}),l=r/2;return c.a.createElement("g",null,u.map(function(e,t){return c.a.createElement("path",{d:n.getEventMarker(r),className:i()("line-chart-event",e.className),key:t+"-"+e.date.getTime(),transform:"translate("+(o(e.date)-l)+", "+(s.range()[0]+l)+")"})}))},n.renderSelectedDate=function(){var e=n.state,t=e.selectedDateIdx,r=e.selectedDateXPos,a=e.yScale,o=n.props.series[0];return null!=t&&null!=r&&o?c.a.createElement("g",null,c.a.createElement("line",{className:"line-tooltip",x1:r,x2:r,y1:a.range()[0],y2:a.range()[1]}),n.props.series.map(function(e,n){var o=e.data[t];return!o||!o.y&&0!==o.y?null:c.a.createElement("circle",{key:e.name,cx:r,cy:a(o.y),r:"4",className:i()("line-chart-dot","line-chart-dot-"+n)})})):null},n.renderClipPath=function(){return c.a.createElement("defs",null,c.a.createElement("clipPath",{id:"chart-clip"},c.a.createElement("rect",{width:n.state.xScale.range()[1],height:n.state.yScale.range()[0]+10,transform:"translate(0,-5)"})))},n.renderMouseEventsOverlay=function(e){var t={};return e&&(t.onWheel=n.handleWheel),n.props.updateTooltip&&(t.onMouseEnter=n.handleMouseEnter,t.onMouseMove=n.handleMouseMove,t.onMouseOut=n.handleMouseOut),n.props.updateSelectedDate&&(t.onClick=n.handleClick),c.a.createElement("rect",h({className:"chart-mouse-events-overlay",width:n.state.xScale.range()[1],height:n.state.yScale.range()[0]},t))};var r=n.getScales(t),a=n.getSelectedDatePos(r.xScale,t.selectedDate);return n.state=h({},r,a),n.updateTooltipPos=Object(s.throttle)(n.updateTooltipPos,40),n.handleZoomUpdate=Object(s.throttle)(n.handleZoomUpdate,40),n}return f(t,e),t.prototype.componentWillReceiveProps=function(e){var t,n;if(e.metricType===this.props.metricType&&e.startDate===this.props.startDate&&e.endDate===this.props.endDate&&e.width===this.props.width&&e.padding===this.props.padding&&e.height===this.props.height&&e.series===this.props.series||(t=this.getScales(e),null!=this.state.selectedDate&&(n=this.getSelectedDatePos(t.xScale,this.state.selectedDate))),!Object(s.isEqual)(e.selectedDate,this.props.selectedDate)){var r=t?t.xScale:this.state.xScale;n=this.getSelectedDatePos(r,e.selectedDate)}(t||n)&&(this.setState(h({},t||{},n||{})),n&&e.updateTooltip&&e.updateTooltip(n.selectedDate,n.selectedDateXPos,n.selectedDateIdx))},t.prototype.render=function(){if(!this.props.width||!this.props.height)return c.a.createElement("div",null);var e=!this.props.disableZoom&&null!=this.props.updateZoom,t=this.props.startDate||this.props.endDate;return c.a.createElement("svg",{className:i()("line-chart",{"chart-zoomed":t}),width:this.props.width,height:this.props.height},e&&this.renderClipPath(),c.a.createElement("g",{transform:"translate("+this.props.padding[3]+", "+this.props.padding[0]+")"},null!=this.props.leakPeriodDate&&this.renderLeak(),!this.props.hideGrid&&this.renderHorizontalGrid(),!this.props.hideXAxis&&this.renderXAxisTicks(),this.props.showAreas&&this.renderAreas(),this.renderLines(),this.props.showEventMarkers&&this.renderEvents(),this.renderSelectedDate(),this.renderMouseEventsOverlay(e)))},t.defaultProps={eventSize:8,maxYTicksCount:4,padding:[10,10,30,60],zoomSpeed:1},t}(c.a.PureComponent);t.a=m},994:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0),a=n(6),c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};function o(e){var t=a("bubble-popup",e.customClass),n=c({},e.position);return r.createElement("div",{className:t,style:n},e.children,r.createElement("div",{className:"bubble-popup-arrow"}))}}}]);
//# sourceMappingURL=4.fd049a00.chunk.js.map