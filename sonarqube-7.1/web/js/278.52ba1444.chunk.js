(window.webpackJsonp=window.webpackJsonp||[]).push([[278],{1005:function(e,t,n){"use strict";n.d(t,"i",function(){return i}),n.d(t,"h",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"f",function(){return s}),n.d(t,"l",function(){return u}),n.d(t,"b",function(){return p}),n.d(t,"n",function(){return d}),n.d(t,"c",function(){return m}),n.d(t,"o",function(){return f}),n.d(t,"e",function(){return h}),n.d(t,"k",function(){return y}),n.d(t,"m",function(){return g}),n.d(t,"a",function(){return b}),n.d(t,"g",function(){return O}),n.d(t,"j",function(){return j});var o=n(3),a=n(13),r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};function i(e){return Object(o.getJSON)("/api/qualitygates/list",e).catch(a.a)}function c(e){return Object(o.getJSON)("/api/qualitygates/show",e).catch(a.a)}function l(e){return Object(o.postJSON)("/api/qualitygates/create",e).catch(a.a)}function s(e){return Object(o.post)("/api/qualitygates/destroy",e).catch(a.a)}function u(e){return Object(o.post)("/api/qualitygates/rename",e).catch(a.a)}function p(e){return Object(o.postJSON)("/api/qualitygates/copy",e).catch(a.a)}function d(e){return Object(o.post)("/api/qualitygates/set_as_default",e).catch(a.a)}function m(e){return Object(o.postJSON)("/api/qualitygates/create_condition",e)}function f(e){return Object(o.postJSON)("/api/qualitygates/update_condition",e)}function h(e){return Object(o.post)("/api/qualitygates/delete_condition",e)}function y(e){return Object(o.getJSON)("/api/qualitygates/get_by_project",e).then(function(e){var t=e.qualityGate;return t&&r({},t,{isDefault:t.default})},a.a)}function g(e){return Object(o.getJSON)("/api/qualitygates/search",e).catch(a.a)}function b(e){return Object(o.post)("/api/qualitygates/select",e).catch(a.a)}function O(e){return Object(o.post)("/api/qualitygates/deselect",e).catch(a.a)}function j(e){return Object(o.getJSON)("/api/qualitygates/application_status",e).catch(a.a)}},1072:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),a=n(6),r=n(25),i=n(1);function c(e){var t=e.className,n=e.tooltip,c=void 0===n||n,l=o.createElement("div",{className:a("outline-badge",t)},Object(i.l)("quality_gates.built_in")),s=o.createElement("div",null,o.createElement("span",null,Object(i.l)("quality_gates.built_in.description.1")),o.createElement("span",{className:"little-spacer-left"},Object(i.l)("quality_gates.built_in.description.2")));return o.createElement(r.a,{overlay:c?s:void 0},l)}},1170:function(e,t,n){"use strict";n.r(t);var o,a=n(10),r=n(64),i=n(0),c=n.n(i),l=n(5),s=n.n(l),u=n(22),p=n.n(u),d=n(1072),m=n(1005),f=n(20),h=n(11),y=n(1),g=(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),b=function(e){function t(t){var n=e.call(this,t)||this;return n.mounted=!1,n.handleNameChange=function(e){n.setState({name:e.currentTarget.value})},n.handleFormSubmit=function(e){e.preventDefault();var t=n.props,o=t.qualityGate,a=t.organization,r=n.state.name;r&&(n.setState({loading:!0}),Object(m.l)({id:o.id,name:r,organization:a}).then(function(){n.props.onRename(o,r),n.props.onClose()},function(){n.mounted&&n.setState({loading:!1})}))},n.state={loading:!1,name:t.qualityGate.name},n}return g(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props.qualityGate,t=this.state,n=t.loading,o=t.name,a=Object(y.l)("quality_gates.rename"),r=n||!o||e&&e.name===o;return i.createElement(f.a,{contentLabel:a,onRequestClose:this.props.onClose},i.createElement("form",{id:"quality-gate-form",onSubmit:this.handleFormSubmit},i.createElement("div",{className:"modal-head"},i.createElement("h2",null,a)),i.createElement("div",{className:"modal-body"},i.createElement("div",{className:"modal-field"},i.createElement("label",{htmlFor:"quality-gate-form-name"},Object(y.l)("name"),i.createElement("em",{className:"mandatory"},"*")),i.createElement("input",{autoFocus:!0,id:"quality-gate-form-name",maxLength:100,onChange:this.handleNameChange,required:!0,size:50,type:"text",value:o}))),i.createElement("div",{className:"modal-foot"},n&&i.createElement("i",{className:"spinner spacer-right"}),i.createElement(h.f,{className:"js-confirm",disabled:r},Object(y.l)("rename")),i.createElement(h.e,{className:"js-modal-close",onClick:this.props.onClose},Object(y.l)("cancel")))))},t}(i.PureComponent),O=n(38),j=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),v=function(e){function t(t){var n=e.call(this,t)||this;return n.mounted=!1,n.handleNameChange=function(e){n.setState({name:e.currentTarget.value})},n.handleFormSubmit=function(e){e.preventDefault();var t=n.props,o=t.qualityGate,a=t.organization,r=n.state.name;r&&(n.setState({loading:!0}),Object(m.b)({id:o.id,name:r,organization:a}).then(function(e){n.props.onCopy(e),n.props.onClose(),n.context.router.push(Object(O.t)(String(e.id),n.props.organization))},function(){n.mounted&&n.setState({loading:!1})}))},n.state={loading:!1,name:t.qualityGate.name},n}return j(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props.qualityGate,t=this.state,n=t.loading,o=t.name,a=Object(y.l)("quality_gates.copy"),r=n||!o||e&&e.name===o;return i.createElement(f.a,{contentLabel:a,onRequestClose:this.props.onClose},i.createElement("form",{id:"quality-gate-form",onSubmit:this.handleFormSubmit},i.createElement("div",{className:"modal-head"},i.createElement("h2",null,a)),i.createElement("div",{className:"modal-body"},i.createElement("div",{className:"modal-field"},i.createElement("label",{htmlFor:"quality-gate-form-name"},Object(y.l)("name"),i.createElement("em",{className:"mandatory"},"*")),i.createElement("input",{autoFocus:!0,id:"quality-gate-form-name",maxLength:100,onChange:this.handleNameChange,required:!0,size:50,type:"text",value:o}))),i.createElement("div",{className:"modal-foot"},n&&i.createElement("i",{className:"spinner spacer-right"}),i.createElement(h.f,{className:"js-confirm",disabled:r},Object(y.l)("copy")),i.createElement(h.e,{className:"js-modal-close",onClick:this.props.onClose},Object(y.l)("cancel")))))},t.contextTypes={router:l.object},t}(i.PureComponent),_=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={loading:!1},t.handleFormSubmit=function(e){e.preventDefault();var n=t.props,o=n.organization,a=n.qualityGate;t.setState({loading:!0}),Object(m.f)({id:a.id,organization:o}).then(function(){t.props.onDelete(a),t.context.router.replace(Object(O.u)(o))},function(){t.mounted&&t.setState({loading:!1})})},t}return _(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props.qualityGate,t=Object(y.l)("quality_gates.delete");return i.createElement(f.a,{contentLabel:t,onRequestClose:this.props.onClose},i.createElement("form",{id:"delete-profile-form",onSubmit:this.handleFormSubmit},i.createElement("div",{className:"modal-head"},i.createElement("h2",null,t)),i.createElement("div",{className:"modal-body"},i.createElement("p",null,Object(y.m)("quality_gates.delete.confirm.message",e.name))),i.createElement("div",{className:"modal-foot"},this.state.loading&&i.createElement("i",{className:"spinner spacer-right"}),i.createElement(h.f,{className:"js-delete button-red",disabled:this.state.loading},Object(y.l)("delete")),i.createElement(h.e,{className:"js-modal-close",onClick:this.props.onClose},Object(y.l)("cancel")))))},t.contextTypes={router:l.object},t}(i.PureComponent),C=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={openPopup:void 0},t.handleRenameClick=function(){t.setState({openPopup:"rename"})},t.handleCopyClick=function(){t.setState({openPopup:"copy"})},t.handleSetAsDefaultClick=function(){var e=t.props,n=e.qualityGate,o=e.onSetAsDefault,a=e.organization;n.isDefault||Object(m.n)({id:n.id,organization:a}).then(function(){return Object(m.h)({id:n.id,organization:a})}).then(function(e){return o(e)},function(){})},t.handleDeleteClick=function(){t.setState({openPopup:"delete"})},t.handleClosePopup=function(){return t.setState({openPopup:void 0})},t}return C(t,e),t.prototype.render=function(){var e=this.props,t=e.organization,n=e.qualityGate,o=this.state.openPopup,a=n.actions||{};return i.createElement("div",{className:"layout-page-header-panel layout-page-main-header issues-main-header"},i.createElement("div",{className:"layout-page-header-panel-inner layout-page-main-header-inner"},i.createElement("div",{className:"layout-page-main-inner"},i.createElement("h2",{className:"pull-left"},n.name,n.isBuiltIn&&i.createElement(d.a,{className:"spacer-left"})),i.createElement("div",{className:"pull-right"},a.rename&&i.createElement(h.a,{id:"quality-gate-rename",onClick:this.handleRenameClick},Object(y.l)("rename")),a.copy&&i.createElement(h.a,{className:"little-spacer-left",id:"quality-gate-copy",onClick:this.handleCopyClick},Object(y.l)("copy")),a.setAsDefault&&i.createElement(h.a,{className:"little-spacer-left",id:"quality-gate-toggle-default",onClick:this.handleSetAsDefaultClick},Object(y.l)("set_as_default")),a.delete&&i.createElement(h.a,{className:"little-spacer-left button-red",id:"quality-gate-delete",onClick:this.handleDeleteClick},Object(y.l)("delete")),"rename"===o&&i.createElement(b,{onClose:this.handleClosePopup,onRename:this.props.onRename,organization:t,qualityGate:n}),"copy"===o&&i.createElement(v,{onClose:this.handleClosePopup,onCopy:this.props.onCopy,organization:t,qualityGate:n}),"delete"===o&&i.createElement(E,{onClose:this.handleClosePopup,onDelete:this.props.onDelete,organization:t,qualityGate:n})))))},t}(i.PureComponent),N=n(4),S=n(51);function w(e){var t=e.metrics,n=e.onSelect;var o=Object(N.omitBy)(t,function(e){return e.hidden}),a=[];return Object(N.sortBy)(Object(N.map)(o,function(e){return{value:e.key,label:Object(y.e)(e),domain:e.domain}}),"domain").forEach(function(e,t,n){var o=t>0?n[t-1]:null;o&&o.domain===e.domain||a.push({value:e.domain,label:Object(y.d)(e.domain),disabled:!0}),a.push(e)}),c.a.createElement("div",{className:"big-spacer-top panel bg-muted"},c.a.createElement(S.c,{id:"quality-gate-new-condition-metric",className:"text-middle input-large",options:a,placeholder:Object(y.l)("quality_gates.add_condition"),onChange:function(e){var t=e.value;n(t)}}))}var P=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={loading:!1},t.handleFormSubmit=function(e){e.preventDefault();var n=t.props,o=n.organization,a=n.condition;t.setState({loading:!0}),Object(m.e)({id:a.id,organization:o}).then(function(){return t.props.onDelete(a)},function(){t.mounted&&t.setState({loading:!1})})},t}return P(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props.metric,t=Object(y.l)("quality_gates.delete_condition");return i.createElement(f.a,{contentLabel:t,onRequestClose:this.props.onClose},i.createElement("form",{id:"delete-profile-form",onSubmit:this.handleFormSubmit},i.createElement("div",{className:"modal-head"},i.createElement("h2",null,t)),i.createElement("div",{className:"modal-body"},i.createElement("p",null,Object(y.m)("quality_gates.delete_condition.confirm.message",Object(y.e)(e)))),i.createElement("div",{className:"modal-foot"},this.state.loading&&i.createElement("i",{className:"spinner spacer-right"}),i.createElement(h.f,{className:"js-delete button-red",disabled:this.state.loading},Object(y.l)("delete")),i.createElement(h.e,{className:"js-modal-close",onClick:this.props.onClose},Object(y.l)("cancel")))))},t}(i.PureComponent),k=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleChange=function(e){t.props.onChange(e.currentTarget.value)},t.handleSelectChange=function(e){e?t.props.onChange(e.value):t.props.onChange("")},t}return k(t,e),t.prototype.renderRatingInput=function(){var e=this.props,t=e.name,n=e.value;return i.createElement(S.c,{className:"input-tiny text-middle",clearable:!0,name:t,onChange:this.handleSelectChange,options:[{label:"A",value:"1"},{label:"B",value:"2"},{label:"C",value:"3"},{label:"D",value:"4"}],placeholder:"",searchable:!1,value:n})},t.prototype.render=function(){var e=this.props,t=e.name,n=e.value,o=e.metric;return"RATING"===o.type?this.renderRatingInput():i.createElement("input",{name:t,type:"text",className:"input-tiny text-middle",value:n,"data-type":o.type,onChange:this.handleChange})},t}(i.PureComponent),G=n(46),A=n(50),R=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),x=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},T=function(e){function t(t){var n=e.call(this,t)||this;return n.handleOperatorChange=function(e){var t=e.value;return n.setState({changed:!0,op:t})},n.handlePeriodChange=function(e){var t=e?1:void 0;n.setState({changed:!0,period:t})},n.handleWarningChange=function(e){return n.setState({changed:!0,warning:e})},n.handleErrorChange=function(e){return n.setState({changed:!0,error:e})},n.handleSaveClick=function(){var e=n.props,t=e.qualityGate,o=e.condition,a=e.metric,r=e.organization,i=n.state.period,c={metric:o.metric,op:"RATING"===a.type?"GT":n.state.op,warning:n.state.warning,error:n.state.error};i&&"RATING"!==a.type&&(c.period=i),0===a.key.indexOf("new_")&&(c.period=1),Object(m.c)(x({gateId:t.id,organization:r},c)).then(n.handleConditionResponse,n.props.onError)},n.handleUpdateClick=function(){var e=n.props,t=e.condition,o=e.metric,a=e.organization,r=n.state.period,i={id:t.id,metric:t.metric,op:"RATING"===o.type?"GT":n.state.op,warning:n.state.warning,error:n.state.error};r&&"RATING"!==o.type&&(i.period=r),0===o.key.indexOf("new_")&&(i.period=1),Object(m.o)(x({organization:a},i)).then(n.handleConditionResponse,n.props.onError)},n.handleConditionResponse=function(e){n.setState({changed:!1}),n.props.onSaveCondition(n.props.condition,e),n.props.onResetError()},n.handleCancelClick=function(){n.props.onDeleteCondition(n.props.condition)},n.openDeleteConditionForm=function(){n.setState({openDeleteCondition:!0})},n.closeDeleteConditionForm=function(){n.setState({openDeleteCondition:!1})},n.state={changed:!1,period:t.condition.period,op:t.condition.op,openDeleteCondition:!1,warning:t.condition.warning||"",error:t.condition.error||""},n}return R(t,e),t.prototype.renderPeriodValue=function(){var e=this.props,t=e.condition,n=e.metric,o=!!this.state.period,a=0===t.metric.indexOf("new_"),r="RATING"===n.type;return a?i.createElement("span",{className:"note"},Object(y.l)("quality_gates.condition.leak.unconditional")):r?i.createElement("span",{className:"note"},Object(y.l)("quality_gates.condition.leak.never")):o?Object(y.l)("quality_gates.condition.leak.yes"):Object(y.l)("quality_gates.condition.leak.no")},t.prototype.renderPeriod=function(){var e=this.props,t=e.condition,n=e.metric,o=e.edit,a=0===t.metric.indexOf("new_"),r="RATING"===n.type,c=!!this.state.period;return r||a||!o?this.renderPeriodValue():i.createElement(G.a,{checked:c,onCheck:this.handlePeriodChange})},t.prototype.renderOperator=function(){var e=this.props,t=e.condition,n=e.edit,o=e.metric;if(!n&&t.op)return"RATING"===o.type?Object(y.l)("quality_gates.operator",t.op,"rating"):Object(y.l)("quality_gates.operator",t.op);if("RATING"===o.type)return i.createElement("span",{className:"note"},Object(y.l)("quality_gates.operator.GT.rating"));var a=["LT","GT","EQ","NE"].map(function(e){return{label:Object(y.l)("quality_gates.operator",e),value:e}});return i.createElement(S.c,{autofocus:!0,className:"input-medium",clearable:!1,name:"operator",onChange:this.handleOperatorChange,options:a,searchable:!1,value:this.state.op})},t.prototype.render=function(){var e=this.props,t=e.condition,n=e.edit,o=e.metric,a=e.organization;return i.createElement("tr",null,i.createElement("td",{className:"text-middle"},Object(y.e)(o),o.hidden&&i.createElement("span",{className:"text-danger little-spacer-left"},Object(y.l)("deprecated"))),i.createElement("td",{className:"thin text-middle nowrap"},this.renderPeriod()),i.createElement("td",{className:"thin text-middle nowrap"},this.renderOperator()),i.createElement("td",{className:"thin text-middle nowrap"},n?i.createElement(z,{metric:o,name:"warning",onChange:this.handleWarningChange,value:this.state.warning}):Object(A.formatMeasure)(t.warning,o.type)),i.createElement("td",{className:"thin text-middle nowrap"},n?i.createElement(z,{metric:o,name:"error",onChange:this.handleErrorChange,value:this.state.error}):Object(A.formatMeasure)(t.error,o.type)),n&&i.createElement("td",{className:"thin text-middle nowrap"},t.id?i.createElement("div",null,i.createElement(h.a,{className:"update-condition",disabled:!this.state.changed,onClick:this.handleUpdateClick},Object(y.l)("update_verb")),i.createElement(h.a,{className:"button-red delete-condition little-spacer-left",onClick:this.openDeleteConditionForm},Object(y.l)("delete")),this.state.openDeleteCondition&&i.createElement(D,{condition:t,metric:o,onClose:this.closeDeleteConditionForm,onDelete:this.props.onDeleteCondition,organization:a})):i.createElement("div",null,i.createElement(h.a,{className:"add-condition",onClick:this.handleSaveClick},Object(y.l)("add_verb")),i.createElement(h.e,{className:"cancel-add-condition spacer-left",onClick:this.handleCancelClick},Object(y.l)("cancel")))))},t}(i.PureComponent),I=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),F=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};var U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={error:null},t}return I(t,e),t.prototype.componentWillUpdate=function(e){e.qualityGate!==this.props.qualityGate&&this.setState({error:null})},t.prototype.handleError=function(e){var t=this;try{e.response.json().then(function(e){var n=e.errors.map(function(e){return e.msg}).join(". ");t.setState({error:n})})}catch(e){this.setState({error:Object(y.l)("default_error_message")})}},t.prototype.handleResetError=function(){this.setState({error:null})},t.prototype.render=function(){var e=this,t=this.props,n=t.qualityGate,o=t.conditions,a=t.metrics,r=t.edit,i=t.onAddCondition,l=t.onSaveCondition,s=t.onDeleteCondition,u=t.organization,p=o.filter(function(e){return a[e.metric]}),d=Object(N.sortBy)(p,function(e){return a[e.metric]&&a[e.metric].name}),m=[],f=p.filter(function(e){return null!=e.id});f.forEach(function(e){f.filter(function(t){return t.metric===e.metric&&t.period===e.period}).length>1&&m.push(e)});var h=Object(N.uniqBy)(m,function(e){return e.metric}).map(function(e){return F({},e,{metric:a[e.metric]})});return c.a.createElement("div",{className:"quality-gate-section",id:"quality-gate-conditions"},c.a.createElement("h3",{className:"spacer-bottom"},Object(y.l)("quality_gates.conditions")),c.a.createElement("div",{className:"big-spacer-bottom"},Object(y.l)("quality_gates.introduction")),this.state.error&&c.a.createElement("div",{className:"alert alert-danger"},this.state.error),h.length>0&&c.a.createElement("div",{className:"alert alert-warning"},c.a.createElement("p",null,Object(y.l)("quality_gates.duplicated_conditions")),c.a.createElement("ul",{className:"list-styled spacer-top"},h.map(function(e){return c.a.createElement("li",{key:e.metric.key},Object(y.e)(e.metric))}))),d.length?c.a.createElement("table",{className:"data zebra zebra-hover",id:"quality-gate-conditions"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{className:"nowrap"},Object(y.l)("quality_gates.conditions.metric")),c.a.createElement("th",{className:"thin nowrap"},Object(y.l)("quality_gates.conditions.leak")),c.a.createElement("th",{className:"thin nowrap"},Object(y.l)("quality_gates.conditions.operator")),c.a.createElement("th",{className:"thin nowrap"},Object(y.l)("quality_gates.conditions.warning")),c.a.createElement("th",{className:"thin nowrap"},Object(y.l)("quality_gates.conditions.error")),r&&c.a.createElement("th",null))),c.a.createElement("tbody",null,d.map(function(t,o){return c.a.createElement(T,{key:function(e,t){return e.id?e.id:"new-"+t}(t,o),qualityGate:n,condition:t,metric:a[t.metric],edit:r,onSaveCondition:l,onDeleteCondition:s,onError:e.handleError.bind(e),onResetError:e.handleResetError.bind(e),organization:u})}))):c.a.createElement("div",{className:"big-spacer-top"},Object(y.l)("quality_gates.no_conditions")),r&&c.a.createElement(w,{metrics:a,onSelect:i}))},t}(c.a.PureComponent),J=n(131),M=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={projects:[],selectedProjects:[]},t.handleSearch=function(e,n){return Object(m.m)({gateId:t.props.qualityGate.id,organization:t.props.organization,pageSize:100,query:""!==e?e:void 0,selected:n}).then(function(e){t.setState({projects:e.results,selectedProjects:e.results.filter(function(e){return e.selected}).map(function(e){return e.id})})})},t.handleSelect=function(e){return Object(m.a)({gateId:t.props.qualityGate.id,organization:t.props.organization,projectId:e}).then(function(){t.setState(function(t){return{selectedProjects:t.selectedProjects.concat([e])}})})},t.handleUnselect=function(e){return Object(m.g)({gateId:t.props.qualityGate.id,organization:t.props.organization,projectId:e}).then(function(){t.setState(function(t){return{selectedProjects:Object(N.without)(t.selectedProjects,e)}})},function(){})},t.renderElement=function(e){var n=Object(N.find)(t.state.projects,{id:e});return void 0===n?e:n.name},t}return M(t,e),t.prototype.componentDidMount=function(){this.handleSearch("",J.a.Selected)},t.prototype.render=function(){return c.a.createElement(J.b,{elements:this.state.projects.map(function(e){return e.id}),labelAll:Object(y.l)("quality_gates.projects.all"),labelSelected:Object(y.l)("quality_gates.projects.with"),labelUnselected:Object(y.l)("quality_gates.projects.without"),onSearch:this.handleSearch,onSelect:this.handleSelect,onUnselect:this.handleUnselect,renderElement:this.renderElement,selectedElements:this.state.selectedProjects})},t}(c.a.PureComponent),W=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype.render=function(){var e=this.props,t=e.gate,n=e.metrics,o=e.organization,a=this.props,r=a.onAddCondition,i=a.onDeleteCondition,l=a.onSaveCondition,s=t.conditions||[],u=t.actions||{},p=u.associateProjects?Object(y.l)("quality_gates.projects_for_default.edit"):Object(y.l)("quality_gates.projects_for_default");return c.a.createElement("div",{className:"layout-page-main-inner"},c.a.createElement(U,{qualityGate:t,conditions:s,metrics:n,edit:u.manageConditions,onAddCondition:r,onSaveCondition:l,onDeleteCondition:i,organization:o}),c.a.createElement("div",{id:"quality-gate-projects",className:"quality-gate-section"},c.a.createElement("h3",{className:"spacer-bottom"},Object(y.l)("quality_gates.projects")),t.isDefault?p:c.a.createElement(L,{qualityGate:t,edit:u.associateProjects,organization:o})))},t}(c.a.PureComponent),Q=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fetchDetails=function(){return Object(m.h)({id:t.props.params.id,organization:t.props.organization&&t.props.organization.key}).then(function(e){return t.props.onShow(e)},function(){})},t}return Q(t,e),t.prototype.componentDidMount=function(){this.props.fetchMetrics(),this.fetchDetails()},t.prototype.componentDidUpdate=function(e){e.params.id!==this.props.params.id&&this.fetchDetails()},t.prototype.render=function(){var e=this.props,t=e.organization,n=e.metrics,o=e.qualityGate,a=this.props,r=a.onAddCondition,i=a.onDeleteCondition,l=a.onSaveCondition;return o?c.a.createElement("div",{className:"layout-page-main"},c.a.createElement(p.a,{title:o.name}),c.a.createElement(q,{qualityGate:o,onRename:this.props.onRename,onCopy:this.props.onCopy,onSetAsDefault:this.props.onSetAsDefault,onDelete:this.props.onDelete,organization:t&&t.key}),c.a.createElement(B,{gate:o,metrics:n,onAddCondition:r,onSaveCondition:l,onDeleteCondition:i,organization:t&&t.key})):null},t.contextTypes={router:s.a.object.isRequired},t}(c.a.PureComponent),H=n(7),K=n(43),X=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};t.default=Object(a.connect)(function(e){return X({},Object(H.getQualityGatesAppState)(e),{metrics:Object(H.getMetrics)(e)})},function(e){return{onShow:function(t){return e(Object(r.t)(t))},onDelete:function(t){return e(Object(r.o)(t))},onRename:function(t,n){return e(Object(r.p)(t,n))},onCopy:function(t){return e(Object(r.m)(t))},onSetAsDefault:function(t){return e(Object(r.r)(t))},onAddCondition:function(t){return e(Object(r.k)(t))},onSaveCondition:function(t,n){return e(Object(r.q)(t,n))},onDeleteCondition:function(t){return e(Object(r.n)(t))},fetchMetrics:function(){return e(Object(K.e)())}}})(V)}}]);
//# sourceMappingURL=278.52ba1444.chunk.js.map