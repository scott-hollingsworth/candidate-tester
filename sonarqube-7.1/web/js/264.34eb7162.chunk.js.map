{"version":3,"sources":["webpack:///./src/main/js/helpers/csv.ts","webpack:///./src/main/js/components/common/ScreenPositionHelper.tsx","webpack:///./src/main/js/apps/quality-profiles/components/BuiltInQualityProfileBadge.tsx","webpack:///./src/main/js/components/facet/FacetFooter.tsx","webpack:///./src/main/js/components/controls/SearchSelect.tsx","webpack:///./src/main/js/components/common/FiltersHeader.tsx","webpack:///./src/main/js/components/shared/TypeHelper.tsx","webpack:///./src/main/js/components/common/PageCounter.tsx","webpack:///./src/main/js/apps/coding-rules/components/BulkChangeModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/BulkChange.tsx","webpack:///./src/main/js/apps/coding-rules/components/Facet.tsx","webpack:///./src/main/js/apps/coding-rules/components/ActivationSeverityFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/AvailableSinceFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/DefaultSeverityFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/InheritanceFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/LanguageFacetFooter.tsx","webpack:///./src/main/js/apps/coding-rules/components/LanguageFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/ProfileFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/RepositoryFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/StatusFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/TagFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/TemplateFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/TypeFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/FacetsList.tsx","webpack:///./src/main/js/apps/coding-rules/components/PageActions.tsx","webpack:///./src/main/js/helpers/latinize.ts","webpack:///./src/main/js/apps/coding-rules/components/CustomRuleFormModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/CustomRuleButton.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsCustomRules.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsIssues.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsParameters.tsx","webpack:///./src/main/js/apps/coding-rules/components/ActivationFormModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/ActivationButton.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleInheritanceIcon.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsProfiles.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetails.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleListItem.tsx","webpack:///./src/main/js/apps/coding-rules/components/App.tsx","webpack:///./src/main/js/api/quality-profiles.ts","webpack:///./src/main/js/components/facet/FacetBox.tsx","webpack:///./src/main/js/components/facet/FacetItem.tsx","webpack:///./src/main/js/components/facet/FacetHeader.tsx","webpack:///./src/main/js/components/facet/FacetItemsList.tsx"],"names":["csvEscape","value","replace","__webpack_require__","d","__webpack_exports__","ScreenPositionHelper","_super","props","_this","call","this","getPosition","containerPos","container","getBoundingClientRect","top","window","pageYOffset","left","pageXOffset","debouncedOnResize","Object","lodash__WEBPACK_IMPORTED_MODULE_1__","forceUpdate","__extends","prototype","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","render","react__WEBPACK_IMPORTED_MODULE_0__","className","ref","children","_helpers_l10n__WEBPACK_IMPORTED_MODULE_3__","BuiltInQualityProfileBadge","_a","_b","tooltip","badge","classnames__WEBPACK_IMPORTED_MODULE_1__","overlay","_components_controls_Tooltip__WEBPACK_IMPORTED_MODULE_2__","undefined","FacetFooter","_controls_SearchSelect__WEBPACK_IMPORTED_MODULE_1__","__assign","autofocus","SearchSelect","mounted","handleSearch","query","currentQuery","onSearch","then","options","setState","state","loading","handleChange","option","Array","isArray","onMultiSelect","onSelect","handleInputChange","length","minimumQueryLength","defaultOptions","handleFilterOption","defineProperty","resetOnBlur","Component","canCreate","_components_controls_Select__WEBPACK_IMPORTED_MODULE_2__","clearable","escapeClearsValue","filterOption","isLoading","multi","noResultsText","onBlurResetsInput","onChange","onInputChange","optionRenderer","renderOption","placeholder","promptTextCreator","searchable","valueRenderer","_helpers_l10n__WEBPACK_IMPORTED_MODULE_2__","FiltersHeader","displayReset","onReset","_ui_buttons__WEBPACK_IMPORTED_MODULE_1__","id","onClick","TypeHelper","_ui_IssueTypeIcon__WEBPACK_IMPORTED_MODULE_1__","type","_helpers_measures__WEBPACK_IMPORTED_MODULE_2__","PageCounter","current","label","total","BulkChangeModal","handleProfileSelect","selectedProfiles","map","getAvailableQualityProfiles","referencedProfiles","profiles","values","languages","filter","profile","includes","language","actions","edit","isBuiltIn","processResponse","response","result_1","failed","succeeded","results","concat","sendRequests","looper","Promise","resolve","data","coding_rules_query","method","action","quality_profiles","BulkChangeModal_assign","organization","targetKey","_i","profiles_1","key","handleFormSubmit","event","preventDefault","submitting","finished","renderResult","result","profileKey","index_js_exposed","classnames","alert-warning","alert-success","l10n","name","renderProfileSelect","languageName","Select","availableProfiles","push","BulkChangeModal_extends","header","measures","Modal","contentLabel","onRequestClose","onClose","onSubmit","htmlFor","buttons","disabled","BulkChange","apply","arguments","modal","getSelectedProfile","closeModal","handleActivateClick","currentTarget","blur","closeDropdown","handleActivateInProfileClick","handleDeactivateClick","handleDeactivateInProfileClick","BulkChange_extends","some","Boolean","activation","canChangeProfile","allowActivateOnProfile","allowDeactivateOnProfile","Dropdown","onToggleClick","open","href","components_BulkChangeModal","Facet","handleItemClick","itemValue","newValue","singleSelection","lodash_js_exposed","property","handleHeaderClick","onToggle","handleClear","getStat","stats","renderItem","active","stat","renderName","Facet_defaultRenderName","FacetItem","halfWidth","Facet_extends","renderTextName","items","keys","toLowerCase","FacetBox","search-navigator-facet-box-forbidden","FacetHeader","helper","disabledHelper","onClear","FacetItemsList","renderFooter","ActivationSeverityFacet","severity","SeverityHelper","ActivationSeverityFacet_extends","components_Facet","ActivationSeverityFacet_assign","constants","AvailableSinceFacet","availableSince","handlePeriodChange","date","getValues","context","intl","formatDate","DateFormatter","AvailableSinceFacet_extends","DateInput","contextTypes","index_es","DefaultSeverityFacet","DefaultSeverityFacet_extends","DefaultSeverityFacet_assign","InheritanceFacet","InheritanceFacet_extends","InheritanceFacet_rest","InheritanceFacet_assign","types","LanguageFacetFooter","LanguageFacetFooter_extends","referencedLanguages","LanguageFacet_LanguageFacet","LanguageFacet","getLanguageName","handleSelect","components_LanguageFacetFooter","LanguageFacet_extends","facetProps","LanguageFacet_rest","LanguageFacet_assign","components_LanguageFacet","es","rootReducer","ProfileFacet","selected","compareToProfile","activationSeverities","inheritance","handleActiveClick","stopPropagation","handleInactiveClick","getTextValue","renderActivation","isCompare","aria-checked","facet-toggle-active","role","tabIndex","ProfileFacet_extends","RepositoryFacet_RepositoryFacet","RepositoryFacet","languageKey","repositoryKey","repository","referencedRepositories","RepositoryFacet_extends","RepositoryFacet_rest","RepositoryFacet_assign","components_RepositoryFacet","StatusFacet","status","StatusFacet_extends","StatusFacet_assign","TagFacet","api_rules","ps","q","tags","tag","TagFacet_extends","TagFacet_rest","TagFacet_assign","TemplateFacet","changes","template","TemplateFacet_assign","TemplateFacet_extends","TemplateFacet_rest","String","TypeFacet","IssueTypeIcon","TypeFacet_extends","TypeFacet_assign","FacetsList_FacetsList","inheritanceDisabled","selectedProfile","isInherited","activationSeverityDisabled","onFilterChange","onFacetToggle","openFacets","facets","components_TypeFacet","components_TagFacet","repositories","components_DefaultSeverityFacet","severities","components_StatusFacet","statuses","components_AvailableSinceFacet","organizationsEnabled","components_TemplateFacet","components_ProfileFacet","components_InheritanceFacet","components_ActivationSeverityFacet","PageActions_PageActions","PageActions_Shortcuts","DeferredSpinner","ReloadButton","onReload","paging","selectedIndex","defaultDiacriticsRemovalap","base","letters","diacriticsMap","i","split","j","CustomRuleFormModal","prepareRequest","customRule","templateRule","params","csv","join","ruleData","markdown_description","description","CustomRuleFormModal_assign","custom_key","prevent_reactivation","reactivating","template_key","newRuleDetails","onDone","handleNameChange","str","change","keyModifiedByUser","a","handleKeyChange","handleDescriptionChange","handleTypeChange","handleSeverityChange","handleStatusChange","handleParameterChange","renderNameField","autoFocus","required","renderKeyField","title","renderDescriptionField","rows","MarkdownTips","renderTypeOption","renderTypeField","renderSeverityOption","renderSeverityField","renderStatusField","renderParameterField","param","defaultValue","dangerouslySetInnerHTML","__html","htmlDesc","extra","renderSubmitButton","mdDesc","CustomRuleFormModal_extends","_c","CustomRuleButton","handleClick","handleModalClose","handleDone","CustomRuleButton_extends","components_CustomRuleFormModal","RuleDetailsCustomRules","fetchRules","f","ruleDetails","rules","handleRuleCreate","handleRuleDelete","ruleKey","rule","renderRule","data-rule","react_router_es","to","urls","canChange","ConfirmButton","confirmButtonText","confirmData","isDestructive","modalBody","modalHeader","onConfirm","RuleDetailsCustomRules_extends","componentDidUpdate","prevProps","components_CustomRuleButton","RuleDetailsIssues","fetchIssues","issues","resolved","facet","components","projects","item","project","find","component","uuid","val","count","facet_1","renderTotal","path","totalItem","branchesEnabled","Tooltip","renderProject","projectUuids","RuleDetailsIssues_extends","colSpan","prop_types","RuleDetailsParameters","renderParameter","RuleDetailsParameters_extends","ActivationFormModal","getParams","_d","_e","getQualityProfilesWithDepth","utils","lang","ActivationFormModal_assign","depth","handleProfileChange","profilesWithDepth","ActivationFormModal_extends","isCustomRule","templateKey","activeInAllProfiles","isUpdateMode","repeat","ActivationButton","handleButtonClick","handleCloseModal","ActivationButton_extends","buttonText","components_ActivationFormModal","updateMode","RuleInheritanceIcon_RuleInheritanceIcon","icon-inheritance-overridden","Overridden","profileName","parentProfileName","RuleDetailsProfiles","fetchProfiles","handleActivate","onActivate","handleDeactivate","onDeactivate","handleRevert","reset","renderInheritedProfile","parentName","profilePath","inherit","Inherited","renderSeverity","parentActivation","originalParam","p","originalValue","renderParameters","renderActions","canEdit","hasParent","NotInherited","parentKey","isTemplate","components_ActivationButton","activations","qProfile","x","data-profile","RuleDetailsProfiles_extends","canActivate","RuleDetails","fetchRuleDetails","actives","handleRuleChange","handleTagsChange","oldTags","RuleDetails_assign","catch","handleDelete","onDelete","RuleDetails_extends","allowCustomRules","canWrite","isCustom","isEditable","RuleDetailsMeta","onTagsChange","RuleDetailsDescription","components_RuleDetailsParameters","components_RuleDetailsCustomRules","components_RuleDetailsProfiles","components_RuleDetailsIssues","RuleListItem","data_1","SeverityIcon","renderDeactivateButton","RuleListItem_extends","allTags","sysTags","langName","SimilarRulesFilter","App_PAGE_SIZE","App_App","App","attachShortcuts","keymaster","selectPreviousRule","selectNextRule","openSelectedRule","closeRule","detachShortcuts","getOpenRule","location","getFacetsToFetch","getFieldsToFetch","fields","getSearchParameters","App_assign","s","stopLoading","fetchInitialData","all","fetchFirstRules","makeFetchRequest","rawActives","rawFacets","entries","activations_1","App_parseActives","rawFacets_1","rawFacet","rawValue","App_parseFacets","pageIndex","pageSize","openRule","fetchMoreRules","nextPage","fetchFacet","getSelectedIndex","index","findIndex","getRulePath","pathname","router","scrollToSelectedRule","smooth","element","document","querySelector","scrolling","topOffset","bottomOffset","getRuleActivation","closeFacet","handleBack","handleFilterChange","handleFacetToggle","handleReload","handleReset","pickRuleAround","handleRuleActivate","handleRuleDeactivate","searchQuery","isFiltered","App_extends","body","classList","add","documentElement","footer","getElementById","componentWillReceiveProps","nextProps","prevState","remove","Helmet","style","SearchBox","minLength","components_BulkChange","components_RuleDetails","components_RuleListItem","ListFooter","loadMore","ready","isRequired","searchQualityProfiles","parameters","_helpers_request__WEBPACK_IMPORTED_MODULE_2__","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_3__","getQualityProfile","createQualityProfile","setMethod","setData","submit","restoreQualityProfile","getProfileProjects","getProfileInheritance","setDefaultProfile","renameProfile","copyProfile","fromKey","toName","deleteProfile","changeProfileParent","getImporters","r","importers","getExporters","exporters","getProfileChangelog","compareProfiles","leftKey","rightKey","associateProject","projectKey","dissociateProject","searchUsers","searchGroups","addUser","removeUser","addGroup","removeGroup","bulkActivateRules","bulkDeactivateRules","activateRule","lodash__WEBPACK_IMPORTED_MODULE_0__","_helpers_csv__WEBPACK_IMPORTED_MODULE_1__","deactivateRule","data-property","search-navigator-facet-half","data-facet","defaultProps","renderHelper","_controls_Tooltip__WEBPACK_IMPORTED_MODULE_3__","_icons_components_HelpIcon__WEBPACK_IMPORTED_MODULE_2__","renderValueIndicator","_helpers_l10n__WEBPACK_IMPORTED_MODULE_5__","showClearButton","_icons_components_OpenCloseIcon__WEBPACK_IMPORTED_MODULE_1__","_ui_buttons__WEBPACK_IMPORTED_MODULE_4__"],"mappings":"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","file":"js/264.34eb7162.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function csvEscape(value: string): string {\n  const escaped = value.replace(/\"/g, '\\\\\"');\n  return `\"${escaped}\"`;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { debounce } from 'lodash';\n\ninterface Props {\n  className?: string;\n  children: (position: { top: number; left: number }) => React.ReactElement<any>;\n}\n\nexport default class ScreenPositionHelper extends React.PureComponent<Props> {\n  container?: HTMLDivElement;\n  debouncedOnResize: () => void;\n\n  constructor(props: Props) {\n    super(props);\n    this.debouncedOnResize = debounce(() => this.forceUpdate(), 250);\n  }\n\n  componentDidMount() {\n    this.forceUpdate();\n    window.addEventListener('resize', this.debouncedOnResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.debouncedOnResize);\n  }\n\n  getPosition = () => {\n    const containerPos = this.container && this.container.getBoundingClientRect();\n    if (!containerPos) {\n      return { top: 0, left: 0 };\n    }\n    return {\n      top: window.pageYOffset + containerPos.top,\n      left: window.pageXOffset + containerPos.left\n    };\n  };\n\n  render() {\n    return (\n      <div\n        className={this.props.className}\n        ref={container => (this.container = container as HTMLDivElement)}>\n        {this.props.children(this.getPosition())}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  className?: string;\n  tooltip?: boolean;\n}\n\nexport default function BuiltInQualityProfileBadge({ className, tooltip = true }: Props) {\n  const badge = (\n    <div className={classNames('outline-badge', className)}>\n      {translate('quality_profiles.built_in')}\n    </div>\n  );\n\n  const overlay = (\n    <span>\n      {translate('quality_profiles.built_in.description.1')}{' '}\n      {translate('quality_profiles.built_in.description.2')}\n    </span>\n  );\n\n  return <Tooltip overlay={tooltip ? overlay : undefined}>{badge}</Tooltip>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SearchSelect from '../controls/SearchSelect';\n\ntype Option = { label: string; value: string };\n\ninterface Props {\n  minimumQueryLength?: number;\n  onSearch: (query: string) => Promise<Option[]>;\n  onSelect: (option: Option) => void;\n  renderOption?: (option: Object) => JSX.Element;\n}\n\nexport default function FacetFooter(props: Props) {\n  return (\n    <div className=\"search-navigator-facet-footer\">\n      <SearchSelect autofocus={false} {...props} />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { debounce } from 'lodash';\nimport Select, { Creatable } from '../../components/controls/Select';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\n\ninterface Props<T> {\n  autofocus?: boolean;\n  canCreate?: boolean;\n  clearable?: boolean;\n  defaultOptions?: T[];\n  minimumQueryLength?: number;\n  multi?: boolean;\n  onSearch: (query: string) => Promise<T[]>;\n  onSelect?: (option: T) => void;\n  onMultiSelect?: (options: T[]) => void;\n  promptTextCreator?: (label: string) => string;\n  renderOption?: (option: T) => JSX.Element;\n  resetOnBlur?: boolean;\n  value?: T | T[];\n}\n\ninterface State<T> {\n  loading: boolean;\n  options: T[];\n  query: string;\n}\n\nexport default class SearchSelect<T extends { value: string }> extends React.PureComponent<\n  Props<T>,\n  State<T>\n> {\n  mounted = false;\n\n  constructor(props: Props<T>) {\n    super(props);\n    this.state = { loading: false, options: props.defaultOptions || [], query: '' };\n    this.handleSearch = debounce(this.handleSearch, 250);\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  get autofocus() {\n    return this.props.autofocus !== undefined ? this.props.autofocus : true;\n  }\n\n  get minimumQueryLength() {\n    return this.props.minimumQueryLength !== undefined ? this.props.minimumQueryLength : 2;\n  }\n\n  get resetOnBlur() {\n    return this.props.resetOnBlur !== undefined ? this.props.resetOnBlur : true;\n  }\n\n  handleSearch = (query: string) => {\n    // Ignore the result if the query changed\n    const currentQuery = query;\n    this.props.onSearch(currentQuery).then(\n      options => {\n        if (this.mounted) {\n          this.setState(state => ({\n            loading: false,\n            options: state.query === currentQuery ? options : state.options\n          }));\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleChange = (option: T | T[]) => {\n    if (Array.isArray(option)) {\n      if (this.props.onMultiSelect) {\n        this.props.onMultiSelect(option);\n      }\n    } else if (this.props.onSelect) {\n      this.props.onSelect(option);\n    }\n  };\n\n  handleInputChange = (query: string) => {\n    if (query.length >= this.minimumQueryLength) {\n      this.setState({ loading: true, query });\n      this.handleSearch(query);\n    } else {\n      // `onInputChange` is called with an empty string after a user selects a value\n      // in this case we shouldn't reset `options`, because it also resets select value :(\n      const options = (query.length === 0 && this.props.defaultOptions) || [];\n      this.setState({ options, query });\n    }\n  };\n\n  // disable internal filtering\n  handleFilterOption = () => true;\n\n  render() {\n    const Component = this.props.canCreate ? Creatable : Select;\n    return (\n      <Component\n        autofocus={this.autofocus}\n        className=\"input-super-large\"\n        clearable={this.props.clearable}\n        escapeClearsValue={false}\n        filterOption={this.handleFilterOption}\n        isLoading={this.state.loading}\n        multi={this.props.multi}\n        noResultsText={\n          this.state.query.length < this.minimumQueryLength\n            ? translateWithParameters('select2.tooShort', this.minimumQueryLength)\n            : translate('select2.noMatches')\n        }\n        onBlurResetsInput={this.resetOnBlur}\n        onChange={this.handleChange}\n        onInputChange={this.handleInputChange}\n        optionRenderer={this.props.renderOption}\n        options={this.state.options}\n        placeholder={translate('search_verb')}\n        promptTextCreator={this.props.promptTextCreator}\n        searchable={true}\n        value={this.props.value}\n        valueRenderer={this.props.renderOption}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from '../ui/buttons';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  displayReset: boolean;\n  onReset: () => void;\n}\n\nexport default function FiltersHeader({ displayReset, onReset }: Props) {\n  return (\n    <div className=\"search-navigator-filters-header\">\n      {displayReset && (\n        <div className=\"pull-right\">\n          <Button className=\"button-red\" id=\"coding-rules-clear-all-filters\" onClick={onReset}>\n            {translate('clear_all_filters')}\n          </Button>\n        </div>\n      )}\n\n      <h3>{translate('filters')}</h3>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport IssueTypeIcon from '../ui/IssueTypeIcon';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  className?: string;\n  type: string;\n}\n\nexport default function TypeHelper(props: Props) {\n  return (\n    <span className={props.className}>\n      <IssueTypeIcon className=\"little-spacer-right\" query={props.type} />\n      {translate('issue.type', props.type)}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { formatMeasure } from '../../helpers/measures';\n\ninterface Props {\n  className?: string;\n  current?: number;\n  label: string;\n  total: number;\n}\n\nexport default function PageCounter({ className, current, label, total }: Props) {\n  return (\n    <div className={classNames('display-inline-block', className)}>\n      <strong className=\"little-spacer-right\">\n        {current !== undefined && formatMeasure(current + 1, 'INT') + ' / '}\n        <span className=\"js-page-counter-total\">{formatMeasure(total, 'INT')}</span>\n      </strong>\n      {label}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { Query, serializeQuery } from '../query';\nimport { Profile, bulkActivateRules, bulkDeactivateRules } from '../../../api/quality-profiles';\nimport Modal from '../../../components/controls/Modal';\nimport Select from '../../../components/controls/Select';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { formatMeasure } from '../../../helpers/measures';\nimport { SubmitButton, ResetButtonLink } from '../../../components/ui/buttons';\n\ninterface Props {\n  action: string;\n  onClose: () => void;\n  organization: string | undefined;\n  referencedProfiles: { [profile: string]: Profile };\n  profile?: Profile;\n  query: Query;\n  total: number;\n}\n\ninterface ActivationResult {\n  failed: number;\n  profile: string;\n  succeeded: number;\n}\n\ninterface State {\n  finished: boolean;\n  results: ActivationResult[];\n  selectedProfiles: any[];\n  submitting: boolean;\n}\n\nexport default class BulkChangeModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    // if there is only one possible option for profile, select it immediately\n    const selectedProfiles = [];\n    const availableProfiles = this.getAvailableQualityProfiles(props);\n    if (availableProfiles.length === 1) {\n      selectedProfiles.push(availableProfiles[0].key);\n    }\n\n    this.state = { finished: false, results: [], selectedProfiles, submitting: false };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleProfileSelect = (options: { value: string }[]) => {\n    const selectedProfiles = options.map(option => option.value);\n    this.setState({ selectedProfiles });\n  };\n\n  getAvailableQualityProfiles = ({ query, referencedProfiles } = this.props) => {\n    let profiles = Object.values(referencedProfiles);\n    if (query.languages.length > 0) {\n      profiles = profiles.filter(profile => query.languages.includes(profile.language));\n    }\n    return profiles\n      .filter(profile => profile.actions && profile.actions.edit)\n      .filter(profile => !profile.isBuiltIn);\n  };\n\n  processResponse = (profile: string, response: any) => {\n    if (this.mounted) {\n      const result: ActivationResult = {\n        failed: response.failed || 0,\n        profile,\n        succeeded: response.succeeded || 0\n      };\n      this.setState(state => ({ results: [...state.results, result] }));\n    }\n  };\n\n  sendRequests = () => {\n    let looper = Promise.resolve();\n\n    // serialize the query, but delete the `profile`\n    const data = serializeQuery(this.props.query);\n    delete data.profile;\n\n    const method = this.props.action === 'activate' ? bulkActivateRules : bulkDeactivateRules;\n\n    // if a profile is selected in the facet, pick it\n    // otherwise take all profiles selected in the dropdown\n    const profiles: string[] = this.props.profile\n      ? [this.props.profile.key]\n      : this.state.selectedProfiles;\n\n    for (const profile of profiles) {\n      looper = looper.then(() =>\n        method({ ...data, organization: this.props.organization, targetKey: profile }).then(\n          response => this.processResponse(profile, response)\n        )\n      );\n    }\n    return looper;\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    this.sendRequests().then(\n      () => {\n        if (this.mounted) {\n          this.setState({ finished: true, submitting: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n        }\n      }\n    );\n  };\n\n  renderResult = (result: ActivationResult) => {\n    const { profile: profileKey } = result;\n    const profile = this.props.referencedProfiles[profileKey];\n    if (!profile) {\n      return null;\n    }\n    return (\n      <div\n        className={classNames('alert', {\n          'alert-warning': result.failed > 0,\n          'alert-success': result.failed === 0\n        })}\n        key={result.profile}>\n        {result.failed\n          ? translateWithParameters(\n              'coding_rules.bulk_change.warning',\n              profile.name,\n              profile.language,\n              result.succeeded,\n              result.failed\n            )\n          : translateWithParameters(\n              'coding_rules.bulk_change.success',\n              profile.name,\n              profile.language,\n              result.succeeded\n            )}\n      </div>\n    );\n  };\n\n  renderProfileSelect = () => {\n    const profiles = this.getAvailableQualityProfiles();\n    const options = profiles.map(profile => ({\n      label: `${profile.name} - ${profile.languageName}`,\n      value: profile.key\n    }));\n    return (\n      <Select\n        multi={true}\n        onChange={this.handleProfileSelect}\n        options={options}\n        value={this.state.selectedProfiles}\n      />\n    );\n  };\n\n  render() {\n    const { action, profile, total } = this.props;\n    const header =\n      // prettier-ignore\n      action === 'activate'\n        ? `${translate('coding_rules.activate_in_quality_profile')} (${formatMeasure(total, 'INT')} ${translate('coding_rules._rules')})`\n        : `${translate('coding_rules.deactivate_in_quality_profile')} (${formatMeasure(total, 'INT')} ${translate('coding_rules._rules')})`;\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <form onSubmit={this.handleFormSubmit}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n\n          <div className=\"modal-body\">\n            {this.state.results.map(this.renderResult)}\n\n            {!this.state.finished &&\n              !this.state.submitting && (\n                <div className=\"modal-field\">\n                  <h3>\n                    <label htmlFor=\"coding-rules-bulk-change-profile\">\n                      {action === 'activate'\n                        ? translate('coding_rules.activate_in')\n                        : translate('coding_rules.deactivate_in')}\n                    </label>\n                  </h3>\n                  {profile ? (\n                    <h3 className=\"readonly-field\">\n                      {profile.name}\n                      {'  '}\n                      {translate('are_you_sure')}\n                    </h3>\n                  ) : (\n                    this.renderProfileSelect()\n                  )}\n                </div>\n              )}\n          </div>\n\n          <footer className=\"modal-foot\">\n            {this.state.submitting && <i className=\"spinner spacer-right\" />}\n            {!this.state.finished && (\n              <SubmitButton disabled={this.state.submitting} id=\"coding-rules-submit-bulk-change\">\n                {translate('apply')}\n              </SubmitButton>\n            )}\n            <ResetButtonLink onClick={this.props.onClose}>\n              {this.state.finished ? translate('close') : translate('cancel')}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport BulkChangeModal from './BulkChangeModal';\nimport { Query } from '../query';\nimport { Profile } from '../../../api/quality-profiles';\nimport Dropdown from '../../../components/controls/Dropdown';\nimport { Button } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  organization: string | undefined;\n  query: Query;\n  referencedProfiles: { [profile: string]: Profile };\n  total: number;\n}\n\ninterface State {\n  action?: string;\n  modal: boolean;\n  profile?: Profile;\n}\n\nexport default class BulkChange extends React.PureComponent<Props, State> {\n  closeDropdown?: () => void;\n  state: State = { modal: false };\n\n  getSelectedProfile = () => {\n    const { profile } = this.props.query;\n    return (profile && this.props.referencedProfiles[profile]) || undefined;\n  };\n\n  closeModal = () => this.setState({ action: undefined, modal: false, profile: undefined });\n\n  handleActivateClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.closeDropdown) {\n      this.closeDropdown();\n    }\n    this.setState({ action: 'activate', modal: true, profile: undefined });\n  };\n\n  handleActivateInProfileClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.closeDropdown) {\n      this.closeDropdown();\n    }\n    this.setState({ action: 'activate', modal: true, profile: this.getSelectedProfile() });\n  };\n\n  handleDeactivateClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.closeDropdown) {\n      this.closeDropdown();\n    }\n    this.setState({ action: 'deactivate', modal: true, profile: undefined });\n  };\n\n  handleDeactivateInProfileClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.closeDropdown) {\n      this.closeDropdown();\n    }\n    this.setState({ action: 'deactivate', modal: true, profile: this.getSelectedProfile() });\n  };\n\n  render() {\n    // show \"Bulk Change\" button only if user has at least one QP which he administrates\n    const canBulkChange = Object.values(this.props.referencedProfiles).some(profile =>\n      Boolean(profile.actions && profile.actions.edit)\n    );\n    if (!canBulkChange) {\n      return null;\n    }\n\n    const { activation } = this.props.query;\n    const profile = this.getSelectedProfile();\n    const canChangeProfile = Boolean(\n      profile && !profile.isBuiltIn && profile.actions && profile.actions.edit\n    );\n    const allowActivateOnProfile = canChangeProfile && activation === false;\n    const allowDeactivateOnProfile = canChangeProfile && activation === true;\n\n    return (\n      <>\n        <Dropdown>\n          {({ closeDropdown, onToggleClick, open }) => {\n            this.closeDropdown = closeDropdown;\n            return (\n              <div className={classNames('pull-left dropdown', { open })}>\n                <Button className=\"js-bulk-change\" onClick={onToggleClick}>\n                  {translate('bulk_change')}\n                </Button>\n                <ul className=\"dropdown-menu\">\n                  <li>\n                    <a href=\"#\" onClick={this.handleActivateClick}>\n                      {translate('coding_rules.activate_in')}\n                    </a>\n                  </li>\n                  {allowActivateOnProfile &&\n                    profile && (\n                      <li>\n                        <a href=\"#\" onClick={this.handleActivateInProfileClick}>\n                          {translate('coding_rules.activate_in')} <strong>{profile.name}</strong>\n                        </a>\n                      </li>\n                    )}\n                  <li>\n                    <a href=\"#\" onClick={this.handleDeactivateClick}>\n                      {translate('coding_rules.deactivate_in')}\n                    </a>\n                  </li>\n                  {allowDeactivateOnProfile &&\n                    profile && (\n                      <li>\n                        <a href=\"#\" onClick={this.handleDeactivateInProfileClick}>\n                          {translate('coding_rules.deactivate_in')} <strong>{profile.name}</strong>\n                        </a>\n                      </li>\n                    )}\n                </ul>\n              </div>\n            );\n          }}\n        </Dropdown>\n        {this.state.modal &&\n          this.state.action && (\n            <BulkChangeModal\n              action={this.state.action}\n              onClose={this.closeModal}\n              organization={this.props.organization}\n              profile={this.state.profile}\n              query={this.props.query}\n              referencedProfiles={this.props.referencedProfiles}\n              total={this.props.total}\n            />\n          )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { orderBy, without, sortBy } from 'lodash';\nimport * as classNames from 'classnames';\nimport { FacetKey } from '../query';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport { translate } from '../../../helpers/l10n';\nimport { formatMeasure } from '../../../helpers/measures';\n\nexport interface BasicProps {\n  onChange: (changes: { [x: string]: string | string[] | undefined }) => void;\n  onToggle: (facet: FacetKey) => void;\n  open: boolean;\n  stats?: { [x: string]: number };\n  values: string[];\n}\n\ninterface Props extends BasicProps {\n  disabled?: boolean;\n  disabledHelper?: string;\n  halfWidth?: boolean;\n  options?: string[];\n  property: FacetKey;\n  renderFooter?: () => React.ReactNode;\n  renderName?: (value: string) => React.ReactNode;\n  renderTextName?: (value: string) => string;\n  singleSelection?: boolean;\n}\n\nexport default class Facet extends React.PureComponent<Props> {\n  handleItemClick = (itemValue: string) => {\n    const { values } = this.props;\n    let newValue;\n    if (this.props.singleSelection) {\n      const value = values.length ? values[0] : undefined;\n      newValue = itemValue === value ? undefined : itemValue;\n    } else {\n      newValue = orderBy(\n        values.includes(itemValue) ? without(values, itemValue) : [...values, itemValue]\n      );\n    }\n    this.props.onChange({ [this.props.property]: newValue });\n  };\n\n  handleHeaderClick = () => this.props.onToggle(this.props.property);\n\n  handleClear = () => this.props.onChange({ [this.props.property]: [] });\n\n  getStat = (value: string) => this.props.stats && this.props.stats[value];\n\n  renderItem = (value: string) => {\n    const active = this.props.values.includes(value);\n    const stat = this.getStat(value);\n    const { renderName = defaultRenderName } = this.props;\n\n    return (\n      <FacetItem\n        active={active}\n        disabled={stat === 0 && !active}\n        halfWidth={this.props.halfWidth}\n        key={value}\n        name={renderName(value)}\n        onClick={this.handleItemClick}\n        stat={stat && formatMeasure(stat, 'SHORT_INT')}\n        value={value}\n      />\n    );\n  };\n\n  render() {\n    const { renderTextName = defaultRenderName, stats } = this.props;\n    const values = this.props.values.map(renderTextName);\n    const items =\n      this.props.options ||\n      (stats &&\n        sortBy(Object.keys(stats), key => -stats[key], key => renderTextName(key).toLowerCase()));\n\n    return (\n      <FacetBox\n        className={classNames({ 'search-navigator-facet-box-forbidden': this.props.disabled })}\n        property={this.props.property}>\n        <FacetHeader\n          helper={this.props.disabled ? this.props.disabledHelper : undefined}\n          name={translate('coding_rules.facet', this.props.property)}\n          onClear={this.handleClear}\n          onClick={this.props.disabled ? undefined : this.handleHeaderClick}\n          open={this.props.open && !this.props.disabled}\n          values={values}\n        />\n\n        {this.props.open &&\n          items !== undefined && <FacetItemsList>{items.map(this.renderItem)}</FacetItemsList>}\n\n        {this.props.open && this.props.renderFooter !== undefined && this.props.renderFooter()}\n      </FacetBox>\n    );\n  }\n}\n\nfunction defaultRenderName(value: string) {\n  return value;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Facet, { BasicProps } from './Facet';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { SEVERITIES } from '../../../helpers/constants';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props extends BasicProps {\n  disabled: boolean;\n}\n\nexport default class ActivationSeverityFacet extends React.PureComponent<Props> {\n  renderName = (severity: string) => <SeverityHelper severity={severity} />;\n\n  renderTextName = (severity: string) => translate('severity', severity);\n\n  render() {\n    return (\n      <Facet\n        {...this.props}\n        disabled={this.props.disabled}\n        disabledHelper={translate('coding_rules.filters.active_severity.inactive')}\n        halfWidth={true}\n        options={SEVERITIES}\n        property=\"activationSeverities\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { intlShape } from 'react-intl';\nimport { Query } from '../query';\nimport DateInput from '../../../components/controls/DateInput';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport { longFormatterOption } from '../../../components/intl/DateFormatter';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: keyof Query) => void;\n  open: boolean;\n  value?: Date;\n}\n\nexport default class AvailableSinceFacet extends React.PureComponent<Props> {\n  static contextTypes = {\n    intl: intlShape\n  };\n\n  handleHeaderClick = () => this.props.onToggle('availableSince');\n\n  handleClear = () => this.props.onChange({ availableSince: undefined });\n\n  handlePeriodChange = (date: Date | undefined) => {\n    this.props.onChange({ availableSince: date });\n  };\n\n  getValues = () =>\n    this.props.value\n      ? [this.context.intl.formatDate(this.props.value, longFormatterOption)]\n      : undefined;\n\n  render() {\n    return (\n      <FacetBox property=\"availableSince\">\n        <FacetHeader\n          name={translate('coding_rules.facet.available_since')}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getValues()}\n        />\n\n        {this.props.open && (\n          <DateInput\n            name=\"available-since\"\n            onChange={this.handlePeriodChange}\n            placeholder={translate('date')}\n            value={this.props.value}\n          />\n        )}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Facet, { BasicProps } from './Facet';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { SEVERITIES } from '../../../helpers/constants';\nimport { translate } from '../../../helpers/l10n';\n\nexport default class DefaultSeverityFacet extends React.PureComponent<BasicProps> {\n  renderName = (severity: string) => <SeverityHelper severity={severity} />;\n\n  renderTextName = (severity: string) => translate('severity', severity);\n\n  render() {\n    return (\n      <Facet\n        {...this.props}\n        halfWidth={true}\n        options={SEVERITIES}\n        property=\"severities\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Facet, { BasicProps } from './Facet';\nimport { RuleInheritance, Omit } from '../../../app/types';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props extends Omit<BasicProps, 'values'> {\n  disabled: boolean;\n  value: RuleInheritance | undefined;\n}\n\nexport default class InheritanceFacet extends React.PureComponent<Props> {\n  renderName = (value: RuleInheritance) =>\n    translate('coding_rules.filters.inheritance', value.toLowerCase());\n\n  render() {\n    const { value, ...props } = this.props;\n\n    return (\n      <Facet\n        {...props}\n        disabled={this.props.disabled}\n        disabledHelper={translate('coding_rules.filters.inheritance.inactive')}\n        options={Object.values(RuleInheritance)}\n        property=\"inheritance\"\n        renderName={this.renderName}\n        renderTextName={this.renderName}\n        singleSelection={true}\n        values={value ? [value] : []}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Select from '../../../components/controls/Select';\nimport { translate } from '../../../helpers/l10n';\n\ntype Option = { label: string; value: string };\n\ninterface Props {\n  referencedLanguages: { [language: string]: { key: string; name: string } };\n  onSelect: (value: string) => void;\n}\n\nexport default class LanguageFacetFooter extends React.PureComponent<Props> {\n  handleChange = (option: Option) => this.props.onSelect(option.value);\n\n  render() {\n    const options = Object.values(this.props.referencedLanguages).map(language => ({\n      label: language.name,\n      value: language.key\n    }));\n\n    return (\n      <div className=\"search-navigator-facet-footer\">\n        <Select\n          className=\"input-super-large\"\n          clearable={false}\n          noResultsText={translate('select2.noMatches')}\n          onChange={this.handleChange}\n          options={options}\n          placeholder={translate('search.search_for_languages')}\n          searchable={true}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { uniq } from 'lodash';\nimport Facet, { BasicProps } from './Facet';\nimport LanguageFacetFooter from './LanguageFacetFooter';\nimport { getLanguages } from '../../../store/rootReducer';\n\ninterface StateProps {\n  referencedLanguages: { [language: string]: { key: string; name: string } };\n}\n\ninterface Props extends BasicProps, StateProps {}\n\nclass LanguageFacet extends React.PureComponent<Props> {\n  getLanguageName = (language: string) => {\n    const { referencedLanguages } = this.props;\n    return referencedLanguages[language] ? referencedLanguages[language].name : language;\n  };\n\n  handleSelect = (language: string) => {\n    const { values } = this.props;\n    this.props.onChange({ languages: uniq([...values, language]) });\n  };\n\n  renderFooter = () => {\n    if (!this.props.stats) {\n      return null;\n    }\n\n    return (\n      <LanguageFacetFooter\n        onSelect={this.handleSelect}\n        referencedLanguages={this.props.referencedLanguages}\n      />\n    );\n  };\n\n  render() {\n    const { referencedLanguages, ...facetProps } = this.props;\n    return (\n      <Facet\n        {...facetProps}\n        property=\"languages\"\n        renderFooter={this.renderFooter}\n        renderName={this.getLanguageName}\n        renderTextName={this.getLanguageName}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state: any): StateProps => ({\n  referencedLanguages: getLanguages(state)\n});\n\nexport default connect(mapStateToProps)(LanguageFacet);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { sortBy } from 'lodash';\nimport * as classNames from 'classnames';\nimport { Query, FacetKey } from '../query';\nimport { Profile } from '../../../api/quality-profiles';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  activation: boolean | undefined;\n  compareToProfile: string | undefined;\n  languages: string[];\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (facet: FacetKey) => void;\n  open: boolean;\n  referencedProfiles: { [profile: string]: Profile };\n  value: string | undefined;\n}\n\nexport default class ProfileFacet extends React.PureComponent<Props> {\n  handleItemClick = (selected: string) => {\n    const newValue = this.props.value === selected ? '' : selected;\n    this.props.onChange({\n      activation: this.props.activation === undefined ? true : this.props.activation,\n      compareToProfile: undefined,\n      profile: newValue\n    });\n  };\n\n  handleHeaderClick = () => this.props.onToggle('profile');\n\n  handleClear = () =>\n    this.props.onChange({\n      activation: undefined,\n      activationSeverities: [],\n      compareToProfile: undefined,\n      inheritance: undefined,\n      profile: undefined\n    });\n\n  handleActiveClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    this.stopPropagation(event);\n    this.props.onChange({ activation: true, compareToProfile: undefined });\n  };\n\n  handleInactiveClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    this.stopPropagation(event);\n    this.props.onChange({ activation: false, compareToProfile: undefined });\n  };\n\n  stopPropagation = (event: React.SyntheticEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n  };\n\n  getTextValue = () => {\n    const { referencedProfiles, value } = this.props;\n    if (value) {\n      const profile = referencedProfiles[value];\n      const name = (profile && `${profile.name} ${profile.languageName}`) || value;\n      return [name];\n    } else {\n      return [];\n    }\n  };\n\n  renderName = (profile: Profile) => (\n    <>\n      {profile.name}\n      <span className=\"note little-spacer-left\">\n        {profile.languageName}\n        {profile.isBuiltIn && ` (${translate('quality_profiles.built_in')})`}\n      </span>\n    </>\n  );\n\n  renderActivation = (profile: Profile) => {\n    const isCompare = profile.key === this.props.compareToProfile;\n    const activation = isCompare ? true : this.props.activation;\n    return (\n      <>\n        <span\n          aria-checked={activation}\n          className={classNames('js-active', 'facet-toggle', 'facet-toggle-green', {\n            'facet-toggle-active': activation\n          })}\n          onClick={isCompare ? this.stopPropagation : this.handleActiveClick}\n          role=\"radio\"\n          tabIndex={-1}>\n          active\n        </span>\n        <span\n          aria-checked={!activation}\n          className={classNames('js-inactive', 'facet-toggle', 'facet-toggle-red', {\n            'facet-toggle-active': !activation\n          })}\n          onClick={isCompare ? this.stopPropagation : this.handleInactiveClick}\n          role=\"radio\"\n          tabIndex={-1}>\n          inactive\n        </span>\n      </>\n    );\n  };\n\n  renderItem = (profile: Profile) => {\n    const active = [this.props.value, this.props.compareToProfile].includes(profile.key);\n\n    return (\n      <FacetItem\n        active={active}\n        className={this.props.compareToProfile === profile.key ? 'compare' : undefined}\n        key={profile.key}\n        name={this.renderName(profile)}\n        onClick={this.handleItemClick}\n        stat={this.renderActivation(profile)}\n        value={profile.key}\n      />\n    );\n  };\n\n  render() {\n    const { languages, referencedProfiles } = this.props;\n    let profiles = Object.values(referencedProfiles);\n    if (languages.length > 0) {\n      profiles = profiles.filter(profile => languages.includes(profile.language));\n    }\n    profiles = sortBy(\n      profiles,\n      profile => profile.name.toLowerCase(),\n      profile => profile.languageName\n    );\n\n    return (\n      <FacetBox property=\"profile\">\n        <FacetHeader\n          name={translate('coding_rules.facet.qprofile')}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getTextValue()}\n        />\n\n        {this.props.open && <FacetItemsList>{profiles.map(this.renderItem)}</FacetItemsList>}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport Facet, { BasicProps } from './Facet';\nimport { getLanguages } from '../../../store/rootReducer';\n\ninterface StateProps {\n  referencedLanguages: { [language: string]: { key: string; name: string } };\n}\n\ninterface Props extends BasicProps, StateProps {\n  referencedRepositories: { [repository: string]: { key: string; language: string; name: string } };\n}\n\nclass RepositoryFacet extends React.PureComponent<Props> {\n  getLanguageName = (languageKey: string) => {\n    const { referencedLanguages } = this.props;\n    const language = referencedLanguages[languageKey];\n    return (language && language.name) || languageKey;\n  };\n\n  renderName = (repositoryKey: string) => {\n    const { referencedRepositories } = this.props;\n    const repository = referencedRepositories[repositoryKey];\n    return repository ? (\n      <>\n        {repository.name}\n        <span className=\"note little-spacer-left\">{this.getLanguageName(repository.language)}</span>\n      </>\n    ) : (\n      repositoryKey\n    );\n  };\n\n  renderTextName = (repositoryKey: string) => {\n    const { referencedRepositories } = this.props;\n    const repository = referencedRepositories[repositoryKey];\n    return (repository && repository.name) || repositoryKey;\n  };\n\n  render() {\n    const { referencedLanguages, referencedRepositories, ...facetProps } = this.props;\n    return (\n      <Facet\n        {...facetProps}\n        property=\"repositories\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state: any): StateProps => ({\n  referencedLanguages: getLanguages(state)\n});\n\nexport default connect(mapStateToProps)(RepositoryFacet);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Facet, { BasicProps } from './Facet';\nimport { RULE_STATUSES } from '../../../helpers/constants';\nimport { translate } from '../../../helpers/l10n';\n\nexport default class StatusFacet extends React.PureComponent<BasicProps> {\n  renderName = (status: string) => translate('rules.status', status.toLowerCase());\n\n  render() {\n    return (\n      <Facet\n        {...this.props}\n        options={RULE_STATUSES}\n        property=\"statuses\"\n        renderName={this.renderName}\n        renderTextName={this.renderName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { uniq } from 'lodash';\nimport Facet, { BasicProps } from './Facet';\nimport { getRuleTags } from '../../../api/rules';\nimport FacetFooter from '../../../components/facet/FacetFooter';\n\ninterface Props extends BasicProps {\n  organization: string | undefined;\n}\n\nexport default class TagFacet extends React.PureComponent<Props> {\n  handleSearch = (query: string) => {\n    return getRuleTags({ organization: this.props.organization, ps: 50, q: query }).then(tags =>\n      tags.map(tag => ({ label: tag, value: tag }))\n    );\n  };\n\n  handleSelect = (option: { value: string }) => {\n    this.props.onChange({ tags: uniq([...this.props.values, option.value]) });\n  };\n\n  renderName = (tag: string) => (\n    <>\n      <i className=\"icon-tags icon-gray little-spacer-right\" />\n      {tag}\n    </>\n  );\n\n  renderFooter = () => {\n    if (!this.props.stats) {\n      return null;\n    }\n\n    return <FacetFooter onSearch={this.handleSearch} onSelect={this.handleSelect} />;\n  };\n\n  render() {\n    const { organization, ...facetProps } = this.props;\n    return (\n      <Facet\n        {...facetProps}\n        property=\"tags\"\n        renderFooter={this.renderFooter}\n        renderName={this.renderName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Facet, { BasicProps } from './Facet';\nimport { Omit } from '../../../app/types';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props extends Omit<BasicProps, 'onChange' | 'values'> {\n  onChange: (changes: { template: boolean | undefined }) => void;\n  value: boolean | undefined;\n}\n\nexport default class TemplateFacet extends React.PureComponent<Props> {\n  handleChange = (changes: { template: string | any[] }) => {\n    const template =\n      // empty array is returned when a user cleared the facet\n      // otherwise `\"true\"`, `\"false\"` or `undefined` can be returned\n      Array.isArray(changes.template) || changes.template === undefined\n        ? undefined\n        : changes.template === 'true';\n    this.props.onChange({ ...changes, template });\n  };\n\n  renderName = (template: string) =>\n    template === 'true'\n      ? translate('coding_rules.filters.template.is_template')\n      : translate('coding_rules.filters.template.is_not_template');\n\n  render() {\n    const { onChange, value, ...props } = this.props;\n\n    return (\n      <Facet\n        {...props}\n        onChange={this.handleChange}\n        options={['true', 'false']}\n        property=\"template\"\n        renderName={this.renderName}\n        renderTextName={this.renderName}\n        singleSelection={true}\n        values={value !== undefined ? [String(value)] : []}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Facet, { BasicProps } from './Facet';\nimport IssueTypeIcon from '../../../components/ui/IssueTypeIcon';\nimport { translate } from '../../../helpers/l10n';\n\nexport default class TypeFacet extends React.PureComponent<BasicProps> {\n  renderName = (type: string) => (\n    <>\n      <IssueTypeIcon className=\"little-spacer-right\" query={type} />\n      {translate('issue.type', type)}\n    </>\n  );\n\n  renderTextName = (type: string) => translate('issue.type', type);\n\n  render() {\n    const options = ['BUG', 'VULNERABILITY', 'CODE_SMELL'];\n\n    return (\n      <Facet\n        {...this.props}\n        options={options}\n        property=\"types\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ActivationSeverityFacet from './ActivationSeverityFacet';\nimport AvailableSinceFacet from './AvailableSinceFacet';\nimport DefaultSeverityFacet from './DefaultSeverityFacet';\nimport InheritanceFacet from './InheritanceFacet';\nimport LanguageFacet from './LanguageFacet';\nimport ProfileFacet from './ProfileFacet';\nimport RepositoryFacet from './RepositoryFacet';\nimport StatusFacet from './StatusFacet';\nimport TagFacet from './TagFacet';\nimport TemplateFacet from './TemplateFacet';\nimport TypeFacet from './TypeFacet';\nimport { Facets, Query, FacetKey, OpenFacets } from '../query';\nimport { Profile } from '../../../api/quality-profiles';\n\ninterface Props {\n  facets?: Facets;\n  onFacetToggle: (facet: FacetKey) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  openFacets: OpenFacets;\n  organization: string | undefined;\n  organizationsEnabled?: boolean;\n  query: Query;\n  referencedProfiles: { [profile: string]: Profile };\n  referencedRepositories: { [repository: string]: { key: string; language: string; name: string } };\n  selectedProfile?: Profile;\n}\n\nexport default function FacetsList(props: Props) {\n  const inheritanceDisabled =\n    props.query.compareToProfile !== undefined ||\n    props.selectedProfile === undefined ||\n    !props.selectedProfile.isInherited;\n\n  const activationSeverityDisabled =\n    props.query.compareToProfile !== undefined ||\n    props.selectedProfile === undefined ||\n    !props.query.activation;\n\n  return (\n    <div className=\"search-navigator-facets-list\">\n      <LanguageFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.languages}\n        stats={props.facets && props.facets.languages}\n        values={props.query.languages}\n      />\n      <TypeFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.types}\n        stats={props.facets && props.facets.types}\n        values={props.query.types}\n      />\n      <TagFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        organization={props.organization}\n        open={!!props.openFacets.tags}\n        stats={props.facets && props.facets.tags}\n        values={props.query.tags}\n      />\n      <RepositoryFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.repositories}\n        stats={props.facets && props.facets.repositories}\n        referencedRepositories={props.referencedRepositories}\n        values={props.query.repositories}\n      />\n      <DefaultSeverityFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.severities}\n        stats={props.facets && props.facets.severities}\n        values={props.query.severities}\n      />\n      <StatusFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.statuses}\n        stats={props.facets && props.facets.statuses}\n        values={props.query.statuses}\n      />\n      <AvailableSinceFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.availableSince}\n        value={props.query.availableSince}\n      />\n      {!props.organizationsEnabled && (\n        <TemplateFacet\n          onChange={props.onFilterChange}\n          onToggle={props.onFacetToggle}\n          open={!!props.openFacets.template}\n          value={props.query.template}\n        />\n      )}\n      <ProfileFacet\n        activation={props.query.activation}\n        compareToProfile={props.query.compareToProfile}\n        languages={props.query.languages}\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.profile}\n        referencedProfiles={props.referencedProfiles}\n        value={props.query.profile}\n      />\n      <InheritanceFacet\n        disabled={inheritanceDisabled}\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.inheritance}\n        value={props.query.inheritance}\n      />\n      <ActivationSeverityFacet\n        disabled={activationSeverityDisabled}\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.activationSeverities}\n        stats={props.facets && props.facets.activationSeverities}\n        values={props.query.activationSeverities}\n      />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Paging } from '../../../app/types';\nimport { translate } from '../../../helpers/l10n';\nimport DeferredSpinner from '../../../components/common/DeferredSpinner';\nimport PageCounter from '../../../components/common/PageCounter';\nimport ReloadButton from '../../../components/controls/ReloadButton';\n\ninterface Props {\n  loading: boolean;\n  onReload: () => void;\n  paging?: Paging;\n  selectedIndex?: number;\n}\n\nexport default function PageActions(props: Props) {\n  return (\n    <div className=\"pull-right\">\n      <Shortcuts />\n\n      <DeferredSpinner loading={props.loading}>\n        <ReloadButton onClick={props.onReload} />\n      </DeferredSpinner>\n\n      {props.paging && (\n        <PageCounter\n          className=\"spacer-left flash flash-heavy\"\n          current={props.selectedIndex}\n          label={translate('coding_rules._rules')}\n          total={props.paging.total}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction Shortcuts() {\n  return (\n    <span className=\"note big-spacer-right\">\n      <span className=\"big-spacer-right\">\n        <span className=\"shortcut-button little-spacer-right\"></span>\n        <span className=\"shortcut-button little-spacer-right\"></span>\n        {translate('coding_rules.to_select_rules')}\n      </span>\n\n      <span>\n        <span className=\"shortcut-button little-spacer-right\"></span>\n        <span className=\"shortcut-button little-spacer-right\"></span>\n        {translate('issues.to_navigate')}\n      </span>\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n/*\n * Latinize string by removing all diacritics\n * From http://stackoverflow.com/questions/990904/javascript-remove-accents-in-strings\n */\nconst defaultDiacriticsRemovalap = [\n  {\n    base: 'A',\n    letters:\n      '\\u0041\\u24B6\\uFF21\\u00C0\\u00C1\\u00C2\\u1EA6\\u1EA4\\u1EAA\\u1EA8\\u00C3\\u0100\\u0102\\u1EB0\\u1EAE\\u1EB4\\u1EB2\\u0226\\u01E0\\u00C4\\u01DE\\u1EA2\\u00C5\\u01FA\\u01CD\\u0200\\u0202\\u1EA0\\u1EAC\\u1EB6\\u1E00\\u0104\\u023A\\u2C6F'\n  },\n  {\n    base: 'AA',\n    letters: '\\uA732'\n  },\n  {\n    base: 'AE',\n    letters: '\\u00C6\\u01FC\\u01E2'\n  },\n  {\n    base: 'AO',\n    letters: '\\uA734'\n  },\n  {\n    base: 'AU',\n    letters: '\\uA736'\n  },\n  {\n    base: 'AV',\n    letters: '\\uA738\\uA73A'\n  },\n  {\n    base: 'AY',\n    letters: '\\uA73C'\n  },\n  {\n    base: 'B',\n    letters: '\\u0042\\u24B7\\uFF22\\u1E02\\u1E04\\u1E06\\u0243\\u0182\\u0181'\n  },\n  {\n    base: 'C',\n    letters: '\\u0043\\u24B8\\uFF23\\u0106\\u0108\\u010A\\u010C\\u00C7\\u1E08\\u0187\\u023B\\uA73E'\n  },\n  {\n    base: 'D',\n    letters: '\\u0044\\u24B9\\uFF24\\u1E0A\\u010E\\u1E0C\\u1E10\\u1E12\\u1E0E\\u0110\\u018B\\u018A\\u0189\\uA779'\n  },\n  {\n    base: 'DZ',\n    letters: '\\u01F1\\u01C4'\n  },\n  {\n    base: 'Dz',\n    letters: '\\u01F2\\u01C5'\n  },\n  {\n    base: 'E',\n    letters:\n      '\\u0045\\u24BA\\uFF25\\u00C8\\u00C9\\u00CA\\u1EC0\\u1EBE\\u1EC4\\u1EC2\\u1EBC\\u0112\\u1E14\\u1E16\\u0114\\u0116\\u00CB\\u1EBA\\u011A\\u0204\\u0206\\u1EB8\\u1EC6\\u0228\\u1E1C\\u0118\\u1E18\\u1E1A\\u0190\\u018E'\n  },\n  {\n    base: 'F',\n    letters: '\\u0046\\u24BB\\uFF26\\u1E1E\\u0191\\uA77B'\n  },\n  {\n    base: 'G',\n    letters:\n      '\\u0047\\u24BC\\uFF27\\u01F4\\u011C\\u1E20\\u011E\\u0120\\u01E6\\u0122\\u01E4\\u0193\\uA7A0\\uA77D\\uA77E'\n  },\n  {\n    base: 'H',\n    letters: '\\u0048\\u24BD\\uFF28\\u0124\\u1E22\\u1E26\\u021E\\u1E24\\u1E28\\u1E2A\\u0126\\u2C67\\u2C75\\uA78D'\n  },\n  {\n    base: 'I',\n    letters:\n      '\\u0049\\u24BE\\uFF29\\u00CC\\u00CD\\u00CE\\u0128\\u012A\\u012C\\u0130\\u00CF\\u1E2E\\u1EC8\\u01CF\\u0208\\u020A\\u1ECA\\u012E\\u1E2C\\u0197'\n  },\n  {\n    base: 'J',\n    letters: '\\u004A\\u24BF\\uFF2A\\u0134\\u0248'\n  },\n  {\n    base: 'K',\n    letters: '\\u004B\\u24C0\\uFF2B\\u1E30\\u01E8\\u1E32\\u0136\\u1E34\\u0198\\u2C69\\uA740\\uA742\\uA744\\uA7A2'\n  },\n  {\n    base: 'L',\n    letters:\n      '\\u004C\\u24C1\\uFF2C\\u013F\\u0139\\u013D\\u1E36\\u1E38\\u013B\\u1E3C\\u1E3A\\u0141\\u023D\\u2C62\\u2C60\\uA748\\uA746\\uA780'\n  },\n  {\n    base: 'LJ',\n    letters: '\\u01C7'\n  },\n  {\n    base: 'Lj',\n    letters: '\\u01C8'\n  },\n  {\n    base: 'M',\n    letters: '\\u004D\\u24C2\\uFF2D\\u1E3E\\u1E40\\u1E42\\u2C6E\\u019C'\n  },\n  {\n    base: 'N',\n    letters:\n      '\\u004E\\u24C3\\uFF2E\\u01F8\\u0143\\u00D1\\u1E44\\u0147\\u1E46\\u0145\\u1E4A\\u1E48\\u0220\\u019D\\uA790\\uA7A4'\n  },\n  {\n    base: 'NJ',\n    letters: '\\u01CA'\n  },\n  {\n    base: 'Nj',\n    letters: '\\u01CB'\n  },\n  {\n    base: 'O',\n    letters:\n      '\\u004F\\u24C4\\uFF2F\\u00D2\\u00D3\\u00D4\\u1ED2\\u1ED0\\u1ED6\\u1ED4\\u00D5\\u1E4C\\u022C\\u1E4E\\u014C\\u1E50\\u1E52\\u014E\\u022E\\u0230\\u00D6\\u022A\\u1ECE\\u0150\\u01D1\\u020C\\u020E\\u01A0\\u1EDC\\u1EDA\\u1EE0\\u1EDE\\u1EE2\\u1ECC\\u1ED8\\u01EA\\u01EC\\u00D8\\u01FE\\u0186\\u019F\\uA74A\\uA74C'\n  },\n  {\n    base: 'OI',\n    letters: '\\u01A2'\n  },\n  {\n    base: 'OO',\n    letters: '\\uA74E'\n  },\n  {\n    base: 'OU',\n    letters: '\\u0222'\n  },\n  {\n    base: 'OE',\n    letters: '\\u008C\\u0152'\n  },\n  {\n    base: 'oe',\n    letters: '\\u009C\\u0153'\n  },\n  {\n    base: 'P',\n    letters: '\\u0050\\u24C5\\uFF30\\u1E54\\u1E56\\u01A4\\u2C63\\uA750\\uA752\\uA754'\n  },\n  {\n    base: 'Q',\n    letters: '\\u0051\\u24C6\\uFF31\\uA756\\uA758\\u024A'\n  },\n  {\n    base: 'R',\n    letters:\n      '\\u0052\\u24C7\\uFF32\\u0154\\u1E58\\u0158\\u0210\\u0212\\u1E5A\\u1E5C\\u0156\\u1E5E\\u024C\\u2C64\\uA75A\\uA7A6\\uA782'\n  },\n  {\n    base: 'S',\n    letters:\n      '\\u0053\\u24C8\\uFF33\\u1E9E\\u015A\\u1E64\\u015C\\u1E60\\u0160\\u1E66\\u1E62\\u1E68\\u0218\\u015E\\u2C7E\\uA7A8\\uA784'\n  },\n  {\n    base: 'T',\n    letters:\n      '\\u0054\\u24C9\\uFF34\\u1E6A\\u0164\\u1E6C\\u021A\\u0162\\u1E70\\u1E6E\\u0166\\u01AC\\u01AE\\u023E\\uA786'\n  },\n  {\n    base: 'TZ',\n    letters: '\\uA728'\n  },\n  {\n    base: 'U',\n    letters:\n      '\\u0055\\u24CA\\uFF35\\u00D9\\u00DA\\u00DB\\u0168\\u1E78\\u016A\\u1E7A\\u016C\\u00DC\\u01DB\\u01D7\\u01D5\\u01D9\\u1EE6\\u016E\\u0170\\u01D3\\u0214\\u0216\\u01AF\\u1EEA\\u1EE8\\u1EEE\\u1EEC\\u1EF0\\u1EE4\\u1E72\\u0172\\u1E76\\u1E74\\u0244'\n  },\n  {\n    base: 'V',\n    letters: '\\u0056\\u24CB\\uFF36\\u1E7C\\u1E7E\\u01B2\\uA75E\\u0245'\n  },\n  {\n    base: 'VY',\n    letters: '\\uA760'\n  },\n  {\n    base: 'W',\n    letters: '\\u0057\\u24CC\\uFF37\\u1E80\\u1E82\\u0174\\u1E86\\u1E84\\u1E88\\u2C72'\n  },\n  {\n    base: 'X',\n    letters: '\\u0058\\u24CD\\uFF38\\u1E8A\\u1E8C'\n  },\n  {\n    base: 'Y',\n    letters:\n      '\\u0059\\u24CE\\uFF39\\u1EF2\\u00DD\\u0176\\u1EF8\\u0232\\u1E8E\\u0178\\u1EF6\\u1EF4\\u01B3\\u024E\\u1EFE'\n  },\n  {\n    base: 'Z',\n    letters: '\\u005A\\u24CF\\uFF3A\\u0179\\u1E90\\u017B\\u017D\\u1E92\\u1E94\\u01B5\\u0224\\u2C7F\\u2C6B\\uA762'\n  },\n  {\n    base: 'a',\n    letters:\n      '\\u0061\\u24D0\\uFF41\\u1E9A\\u00E0\\u00E1\\u00E2\\u1EA7\\u1EA5\\u1EAB\\u1EA9\\u00E3\\u0101\\u0103\\u1EB1\\u1EAF\\u1EB5\\u1EB3\\u0227\\u01E1\\u00E4\\u01DF\\u1EA3\\u00E5\\u01FB\\u01CE\\u0201\\u0203\\u1EA1\\u1EAD\\u1EB7\\u1E01\\u0105\\u2C65\\u0250'\n  },\n  {\n    base: 'aa',\n    letters: '\\uA733'\n  },\n  {\n    base: 'ae',\n    letters: '\\u00E6\\u01FD\\u01E3'\n  },\n  {\n    base: 'ao',\n    letters: '\\uA735'\n  },\n  {\n    base: 'au',\n    letters: '\\uA737'\n  },\n  {\n    base: 'av',\n    letters: '\\uA739\\uA73B'\n  },\n  {\n    base: 'ay',\n    letters: '\\uA73D'\n  },\n  {\n    base: 'b',\n    letters: '\\u0062\\u24D1\\uFF42\\u1E03\\u1E05\\u1E07\\u0180\\u0183\\u0253'\n  },\n  {\n    base: 'c',\n    letters: '\\u0063\\u24D2\\uFF43\\u0107\\u0109\\u010B\\u010D\\u00E7\\u1E09\\u0188\\u023C\\uA73F\\u2184'\n  },\n  {\n    base: 'd',\n    letters: '\\u0064\\u24D3\\uFF44\\u1E0B\\u010F\\u1E0D\\u1E11\\u1E13\\u1E0F\\u0111\\u018C\\u0256\\u0257\\uA77A'\n  },\n  {\n    base: 'dz',\n    letters: '\\u01F3\\u01C6'\n  },\n  {\n    base: 'e',\n    letters:\n      '\\u0065\\u24D4\\uFF45\\u00E8\\u00E9\\u00EA\\u1EC1\\u1EBF\\u1EC5\\u1EC3\\u1EBD\\u0113\\u1E15\\u1E17\\u0115\\u0117\\u00EB\\u1EBB\\u011B\\u0205\\u0207\\u1EB9\\u1EC7\\u0229\\u1E1D\\u0119\\u1E19\\u1E1B\\u0247\\u025B\\u01DD'\n  },\n  {\n    base: 'f',\n    letters: '\\u0066\\u24D5\\uFF46\\u1E1F\\u0192\\uA77C'\n  },\n  {\n    base: 'g',\n    letters:\n      '\\u0067\\u24D6\\uFF47\\u01F5\\u011D\\u1E21\\u011F\\u0121\\u01E7\\u0123\\u01E5\\u0260\\uA7A1\\u1D79\\uA77F'\n  },\n  {\n    base: 'h',\n    letters:\n      '\\u0068\\u24D7\\uFF48\\u0125\\u1E23\\u1E27\\u021F\\u1E25\\u1E29\\u1E2B\\u1E96\\u0127\\u2C68\\u2C76\\u0265'\n  },\n  {\n    base: 'hv',\n    letters: '\\u0195'\n  },\n  {\n    base: 'i',\n    letters:\n      '\\u0069\\u24D8\\uFF49\\u00EC\\u00ED\\u00EE\\u0129\\u012B\\u012D\\u00EF\\u1E2F\\u1EC9\\u01D0\\u0209\\u020B\\u1ECB\\u012F\\u1E2D\\u0268\\u0131'\n  },\n  {\n    base: 'j',\n    letters: '\\u006A\\u24D9\\uFF4A\\u0135\\u01F0\\u0249'\n  },\n  {\n    base: 'k',\n    letters: '\\u006B\\u24DA\\uFF4B\\u1E31\\u01E9\\u1E33\\u0137\\u1E35\\u0199\\u2C6A\\uA741\\uA743\\uA745\\uA7A3'\n  },\n  {\n    base: 'l',\n    letters:\n      '\\u006C\\u24DB\\uFF4C\\u0140\\u013A\\u013E\\u1E37\\u1E39\\u013C\\u1E3D\\u1E3B\\u017F\\u0142\\u019A\\u026B\\u2C61\\uA749\\uA781\\uA747'\n  },\n  {\n    base: 'lj',\n    letters: '\\u01C9'\n  },\n  {\n    base: 'm',\n    letters: '\\u006D\\u24DC\\uFF4D\\u1E3F\\u1E41\\u1E43\\u0271\\u026F'\n  },\n  {\n    base: 'n',\n    letters:\n      '\\u006E\\u24DD\\uFF4E\\u01F9\\u0144\\u00F1\\u1E45\\u0148\\u1E47\\u0146\\u1E4B\\u1E49\\u019E\\u0272\\u0149\\uA791\\uA7A5'\n  },\n  {\n    base: 'nj',\n    letters: '\\u01CC'\n  },\n  {\n    base: 'o',\n    letters:\n      '\\u006F\\u24DE\\uFF4F\\u00F2\\u00F3\\u00F4\\u1ED3\\u1ED1\\u1ED7\\u1ED5\\u00F5\\u1E4D\\u022D\\u1E4F\\u014D\\u1E51\\u1E53\\u014F\\u022F\\u0231\\u00F6\\u022B\\u1ECF\\u0151\\u01D2\\u020D\\u020F\\u01A1\\u1EDD\\u1EDB\\u1EE1\\u1EDF\\u1EE3\\u1ECD\\u1ED9\\u01EB\\u01ED\\u00F8\\u01FF\\u0254\\uA74B\\uA74D\\u0275'\n  },\n  {\n    base: 'oi',\n    letters: '\\u01A3'\n  },\n  {\n    base: 'ou',\n    letters: '\\u0223'\n  },\n  {\n    base: 'oo',\n    letters: '\\uA74F'\n  },\n  {\n    base: 'p',\n    letters: '\\u0070\\u24DF\\uFF50\\u1E55\\u1E57\\u01A5\\u1D7D\\uA751\\uA753\\uA755'\n  },\n  {\n    base: 'q',\n    letters: '\\u0071\\u24E0\\uFF51\\u024B\\uA757\\uA759'\n  },\n  {\n    base: 'r',\n    letters:\n      '\\u0072\\u24E1\\uFF52\\u0155\\u1E59\\u0159\\u0211\\u0213\\u1E5B\\u1E5D\\u0157\\u1E5F\\u024D\\u027D\\uA75B\\uA7A7\\uA783'\n  },\n  {\n    base: 's',\n    letters:\n      '\\u0073\\u24E2\\uFF53\\u00DF\\u015B\\u1E65\\u015D\\u1E61\\u0161\\u1E67\\u1E63\\u1E69\\u0219\\u015F\\u023F\\uA7A9\\uA785\\u1E9B'\n  },\n  {\n    base: 't',\n    letters:\n      '\\u0074\\u24E3\\uFF54\\u1E6B\\u1E97\\u0165\\u1E6D\\u021B\\u0163\\u1E71\\u1E6F\\u0167\\u01AD\\u0288\\u2C66\\uA787'\n  },\n  {\n    base: 'tz',\n    letters: '\\uA729'\n  },\n  {\n    base: 'u',\n    letters:\n      '\\u0075\\u24E4\\uFF55\\u00F9\\u00FA\\u00FB\\u0169\\u1E79\\u016B\\u1E7B\\u016D\\u00FC\\u01DC\\u01D8\\u01D6\\u01DA\\u1EE7\\u016F\\u0171\\u01D4\\u0215\\u0217\\u01B0\\u1EEB\\u1EE9\\u1EEF\\u1EED\\u1EF1\\u1EE5\\u1E73\\u0173\\u1E77\\u1E75\\u0289'\n  },\n  {\n    base: 'v',\n    letters: '\\u0076\\u24E5\\uFF56\\u1E7D\\u1E7F\\u028B\\uA75F\\u028C'\n  },\n  {\n    base: 'vy',\n    letters: '\\uA761'\n  },\n  {\n    base: 'w',\n    letters: '\\u0077\\u24E6\\uFF57\\u1E81\\u1E83\\u0175\\u1E87\\u1E85\\u1E98\\u1E89\\u2C73'\n  },\n  {\n    base: 'x',\n    letters: '\\u0078\\u24E7\\uFF58\\u1E8B\\u1E8D'\n  },\n  {\n    base: 'y',\n    letters:\n      '\\u0079\\u24E8\\uFF59\\u1EF3\\u00FD\\u0177\\u1EF9\\u0233\\u1E8F\\u00FF\\u1EF7\\u1E99\\u1EF5\\u01B4\\u024F\\u1EFF'\n  },\n  {\n    base: 'z',\n    letters: '\\u007A\\u24E9\\uFF5A\\u017A\\u1E91\\u017C\\u017E\\u1E93\\u1E95\\u01B6\\u0225\\u0240\\u2C6C\\uA763'\n  }\n];\n\nconst diacriticsMap: { [x: string]: string } = {};\nfor (let i = 0; i < defaultDiacriticsRemovalap.length; i++) {\n  const letters = defaultDiacriticsRemovalap[i].letters.split('');\n  for (let j = 0; j < letters.length; j++) {\n    diacriticsMap[letters[j]] = defaultDiacriticsRemovalap[i].base;\n  }\n}\n\n// \"what?\" version ... http://jsperf.com/diacritics/12\nexport default function removeDiacritics(str: string): string {\n  return str.replace(/[^\\u0000-\\u007E]/g, a => diacriticsMap[a] || a);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { RuleDetails, RuleParameter } from '../../../app/types';\nimport Modal from '../../../components/controls/Modal';\nimport { translate } from '../../../helpers/l10n';\nimport MarkdownTips from '../../../components/common/MarkdownTips';\nimport { SEVERITIES, TYPES, RULE_STATUSES } from '../../../helpers/constants';\nimport latinize from '../../../helpers/latinize';\nimport Select from '../../../components/controls/Select';\nimport TypeHelper from '../../../components/shared/TypeHelper';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { createRule, updateRule } from '../../../api/rules';\nimport { csvEscape } from '../../../helpers/csv';\nimport { SubmitButton, ResetButtonLink } from '../../../components/ui/buttons';\n\ninterface Props {\n  customRule?: RuleDetails;\n  onClose: () => void;\n  onDone: (newRuleDetails: RuleDetails) => void;\n  organization: string | undefined;\n  templateRule: RuleDetails;\n}\n\ninterface State {\n  description: string;\n  key: string;\n  keyModifiedByUser: boolean;\n  name: string;\n  params: { [p: string]: string };\n  reactivating: boolean;\n  severity: string;\n  status: string;\n  submitting: boolean;\n  type: string;\n}\n\nexport default class CustomRuleFormModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    const params: { [p: string]: string } = {};\n    if (props.customRule && props.customRule.params) {\n      for (const param of props.customRule.params) {\n        params[param.key] = param.defaultValue || '';\n      }\n    }\n    this.state = {\n      description: (props.customRule && props.customRule.mdDesc) || '',\n      key: '',\n      keyModifiedByUser: false,\n      name: (props.customRule && props.customRule.name) || '',\n      params,\n      reactivating: false,\n      severity: (props.customRule && props.customRule.severity) || props.templateRule.severity,\n      status: (props.customRule && props.customRule.status) || props.templateRule.status,\n      submitting: false,\n      type: (props.customRule && props.customRule.type) || props.templateRule.type\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  prepareRequest = () => {\n    /* eslint-disable camelcase */\n    const { customRule, organization, templateRule } = this.props;\n    const params = Object.keys(this.state.params)\n      .map(key => `${key}=${csvEscape(this.state.params[key])}`)\n      .join(';');\n    const ruleData = {\n      markdown_description: this.state.description,\n      name: this.state.name,\n      organization,\n      params,\n      severity: this.state.severity,\n      status: this.state.status\n    };\n    return customRule\n      ? updateRule({ ...ruleData, key: customRule.key })\n      : createRule({\n          ...ruleData,\n          custom_key: this.state.key,\n          prevent_reactivation: !this.state.reactivating,\n          template_key: templateRule.key,\n          type: this.state.type\n        });\n    /* eslint-enable camelcase */\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    this.prepareRequest().then(\n      newRuleDetails => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n          this.props.onDone(newRuleDetails);\n        }\n      },\n      (response: Response) => {\n        if (this.mounted) {\n          this.setState({ reactivating: response.status === 409, submitting: false });\n        }\n      }\n    );\n  };\n\n  handleNameChange = (event: React.SyntheticEvent<HTMLInputElement>) => {\n    const { value: name } = event.currentTarget;\n    this.setState((state: State) => {\n      const change: Partial<State> = { name };\n      if (!state.keyModifiedByUser) {\n        change.key = latinize(name).replace(/[^A-Za-z0-9]/g, '_');\n      }\n      return change;\n    });\n  };\n\n  handleKeyChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.setState({ key: event.currentTarget.value, keyModifiedByUser: true });\n\n  handleDescriptionChange = (event: React.SyntheticEvent<HTMLTextAreaElement>) =>\n    this.setState({ description: event.currentTarget.value });\n\n  handleTypeChange = ({ value }: { value: string }) => this.setState({ type: value });\n\n  handleSeverityChange = ({ value }: { value: string }) => this.setState({ severity: value });\n\n  handleStatusChange = ({ value }: { value: string }) => this.setState({ status: value });\n\n  handleParameterChange = (event: React.SyntheticEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = event.currentTarget;\n    this.setState((state: State) => ({ params: { ...state.params, [name]: value } }));\n  };\n\n  renderNameField = () => (\n    <tr className=\"property\">\n      <th className=\"nowrap\">\n        <h3>\n          {translate('name')} <em className=\"mandatory\">*</em>\n        </h3>\n      </th>\n      <td>\n        <input\n          autoFocus={true}\n          className=\"coding-rules-name-key\"\n          disabled={this.state.submitting}\n          id=\"coding-rules-custom-rule-creation-name\"\n          onChange={this.handleNameChange}\n          required={true}\n          type=\"text\"\n          value={this.state.name}\n        />\n      </td>\n    </tr>\n  );\n\n  renderKeyField = () => (\n    <tr className=\"property\">\n      <th className=\"nowrap\">\n        <h3>\n          {translate('key')} {!this.props.customRule && <em className=\"mandatory\">*</em>}\n        </h3>\n      </th>\n      <td>\n        {this.props.customRule ? (\n          <span className=\"coding-rules-detail-custom-rule-key\" title={this.props.customRule.key}>\n            {this.props.customRule.key}\n          </span>\n        ) : (\n          <input\n            className=\"coding-rules-name-key\"\n            disabled={this.state.submitting}\n            id=\"coding-rules-custom-rule-creation-key\"\n            onChange={this.handleKeyChange}\n            required={true}\n            type=\"text\"\n            value={this.state.key}\n          />\n        )}\n      </td>\n    </tr>\n  );\n\n  renderDescriptionField = () => (\n    <tr className=\"property\">\n      <th className=\"nowrap\">\n        <h3>\n          {translate('description')} <em className=\"mandatory\">*</em>\n        </h3>\n      </th>\n      <td>\n        <textarea\n          className=\"coding-rules-markdown-description\"\n          disabled={this.state.submitting}\n          id=\"coding-rules-custom-rule-creation-html-description\"\n          onChange={this.handleDescriptionChange}\n          required={true}\n          rows={5}\n          value={this.state.description}\n        />\n        <span className=\"text-right\">\n          <MarkdownTips />\n        </span>\n      </td>\n    </tr>\n  );\n\n  renderTypeOption = ({ value }: { value: string }) => <TypeHelper type={value} />;\n\n  renderTypeField = () => (\n    <tr className=\"property\">\n      <th className=\"nowrap\">\n        <h3>{translate('type')}</h3>\n      </th>\n      <td>\n        <Select\n          className=\"input-medium\"\n          clearable={false}\n          disabled={this.state.submitting}\n          onChange={this.handleTypeChange}\n          optionRenderer={this.renderTypeOption}\n          options={TYPES.map(type => ({\n            label: translate('issue.type', type),\n            value: type\n          }))}\n          searchable={false}\n          value={this.state.type}\n          valueRenderer={this.renderTypeOption}\n        />\n      </td>\n    </tr>\n  );\n\n  renderSeverityOption = ({ value }: { value: string }) => <SeverityHelper severity={value} />;\n\n  renderSeverityField = () => (\n    <tr className=\"property\">\n      <th className=\"nowrap\">\n        <h3>{translate('severity')}</h3>\n      </th>\n      <td>\n        <Select\n          className=\"input-medium\"\n          clearable={false}\n          disabled={this.state.submitting}\n          onChange={this.handleSeverityChange}\n          optionRenderer={this.renderSeverityOption}\n          options={SEVERITIES.map(severity => ({\n            label: translate('severity', severity),\n            value: severity\n          }))}\n          searchable={false}\n          value={this.state.severity}\n          valueRenderer={this.renderSeverityOption}\n        />\n      </td>\n    </tr>\n  );\n\n  renderStatusField = () => (\n    <tr className=\"property\">\n      <th className=\"nowrap\">\n        <h3>{translate('coding_rules.filters.status')}</h3>\n      </th>\n      <td>\n        <Select\n          className=\"input-medium\"\n          clearable={false}\n          disabled={this.state.submitting}\n          onChange={this.handleStatusChange}\n          options={RULE_STATUSES.map(status => ({\n            label: translate('rules.status', status),\n            value: status\n          }))}\n          searchable={false}\n          value={this.state.status}\n        />\n      </td>\n    </tr>\n  );\n\n  renderParameterField = (param: RuleParameter) => (\n    <tr className=\"property\" key={param.key}>\n      <th className=\"nowrap\">\n        <h3>{param.key}</h3>\n      </th>\n      <td>\n        {param.type === 'TEXT' ? (\n          <textarea\n            className=\"width100\"\n            disabled={this.state.submitting}\n            name={param.key}\n            onChange={this.handleParameterChange}\n            placeholder={param.defaultValue}\n            rows={3}\n            value={this.state.params[param.key] || ''}\n          />\n        ) : (\n          <input\n            className=\"input-super-large\"\n            disabled={this.state.submitting}\n            name={param.key}\n            onChange={this.handleParameterChange}\n            placeholder={param.defaultValue}\n            type=\"text\"\n            value={this.state.params[param.key] || ''}\n          />\n        )}\n        <div className=\"note\" dangerouslySetInnerHTML={{ __html: param.htmlDesc || '' }} />\n        {param.extra && <div className=\"note\">{param.extra}</div>}\n      </td>\n    </tr>\n  );\n\n  renderSubmitButton = () => {\n    if (this.state.reactivating) {\n      return (\n        <SubmitButton\n          disabled={this.state.submitting}\n          id=\"coding-rules-custom-rule-creation-reactivate\">\n          {translate('coding_rules.reactivate')}\n        </SubmitButton>\n      );\n    } else {\n      return (\n        <SubmitButton\n          disabled={this.state.submitting}\n          id=\"coding-rules-custom-rule-creation-create\">\n          {translate(this.props.customRule ? 'save' : 'create')}\n        </SubmitButton>\n      );\n    }\n  };\n\n  render() {\n    const { customRule, templateRule } = this.props;\n    const { reactivating, submitting } = this.state;\n    const { params = [] } = templateRule;\n    const header = translate(\n      customRule ? 'coding_rules.update_custom_rule' : 'coding_rules.create_custom_rule'\n    );\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <form onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-head\">\n            <h2>{header}</h2>\n          </div>\n\n          <div className=\"modal-body modal-container\">\n            {reactivating && (\n              <div className=\"alert alert-warning\">{translate('coding_rules.reactivate.help')}</div>\n            )}\n            <table>\n              <tbody>\n                {this.renderNameField()}\n                {this.renderKeyField()}\n                {this.renderDescriptionField()}\n                {/* do not allow to change the type of existing rule */}\n                {!customRule && this.renderTypeField()}\n                {this.renderSeverityField()}\n                {this.renderStatusField()}\n                {params.map(this.renderParameterField)}\n              </tbody>\n            </table>\n          </div>\n\n          <div className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            {this.renderSubmitButton()}\n            <ResetButtonLink\n              disabled={submitting}\n              id=\"coding-rules-custom-rule-creation-cancel\"\n              onClick={this.props.onClose}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </div>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport CustomRuleFormModal from './CustomRuleFormModal';\nimport { RuleDetails } from '../../../app/types';\n\ninterface Props {\n  children: (props: { onClick: () => void }) => React.ReactNode;\n  customRule?: RuleDetails;\n  onDone: (newRuleDetails: RuleDetails) => void;\n  organization: string | undefined;\n  templateRule: RuleDetails;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class CustomRuleButton extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { modal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleClick = () => {\n    this.setState({ modal: true });\n  };\n\n  handleModalClose = () => {\n    if (this.mounted) {\n      this.setState({ modal: false });\n    }\n  };\n\n  handleDone = (newRuleDetails: RuleDetails) => {\n    this.handleModalClose();\n    this.props.onDone(newRuleDetails);\n  };\n\n  render() {\n    return (\n      <>\n        {this.props.children({ onClick: this.handleClick })}\n        {this.state.modal && (\n          <CustomRuleFormModal\n            customRule={this.props.customRule}\n            onClose={this.handleModalClose}\n            onDone={this.handleDone}\n            organization={this.props.organization}\n            templateRule={this.props.templateRule}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { sortBy } from 'lodash';\nimport CustomRuleButton from './CustomRuleButton';\nimport { searchRules, deleteRule } from '../../../api/rules';\nimport { Rule, RuleDetails } from '../../../app/types';\nimport DeferredSpinner from '../../../components/common/DeferredSpinner';\nimport ConfirmButton from '../../../components/controls/ConfirmButton';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { Button } from '../../../components/ui/buttons';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { getRuleUrl } from '../../../helpers/urls';\n\ninterface Props {\n  canChange?: boolean;\n  organization: string | undefined;\n  ruleDetails: RuleDetails;\n}\n\ninterface State {\n  loading: boolean;\n  rules?: Rule[];\n}\n\nexport default class RuleDetailsCustomRules extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchRules();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.ruleDetails.key !== this.props.ruleDetails.key) {\n      this.fetchRules();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchRules = () => {\n    this.setState({ loading: true });\n    searchRules({\n      f: 'name,severity,params',\n      organization: this.props.organization,\n      /* eslint-disable camelcase */\n      template_key: this.props.ruleDetails.key\n      /* eslint-enable camelcase */\n    }).then(\n      ({ rules }) => {\n        if (this.mounted) {\n          this.setState({ rules, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleRuleCreate = (newRuleDetails: RuleDetails) => {\n    if (this.mounted) {\n      this.setState(({ rules = [] }: State) => ({\n        rules: [...rules, newRuleDetails]\n      }));\n    }\n  };\n\n  handleRuleDelete = (ruleKey: string) => {\n    return deleteRule({ key: ruleKey, organization: this.props.organization }).then(() => {\n      if (this.mounted) {\n        this.setState(({ rules = [] }) => ({\n          rules: rules.filter(rule => rule.key !== ruleKey)\n        }));\n      }\n    });\n  };\n\n  renderRule = (rule: Rule) => (\n    <tr data-rule={rule.key} key={rule.key}>\n      <td className=\"coding-rules-detail-list-name\">\n        <Link to={getRuleUrl(rule.key, this.props.organization)}>{rule.name}</Link>\n      </td>\n\n      <td className=\"coding-rules-detail-list-severity\">\n        <SeverityHelper severity={rule.severity} />\n      </td>\n\n      <td className=\"coding-rules-detail-list-parameters\">\n        {rule.params &&\n          rule.params.filter(param => param.defaultValue).map(param => (\n            <div className=\"coding-rules-detail-list-parameter\" key={param.key}>\n              <span className=\"key\">{param.key}</span>\n              <span className=\"sep\">:&nbsp;</span>\n              <span className=\"value\" title={param.defaultValue}>\n                {param.defaultValue}\n              </span>\n            </div>\n          ))}\n      </td>\n\n      {this.props.canChange && (\n        <td className=\"coding-rules-detail-list-actions\">\n          <ConfirmButton\n            confirmButtonText={translate('delete')}\n            confirmData={rule.key}\n            isDestructive={true}\n            modalBody={translateWithParameters('coding_rules.delete.custom.confirm', rule.name)}\n            modalHeader={translate('coding_rules.delete_rule')}\n            onConfirm={this.handleRuleDelete}>\n            {({ onClick }) => (\n              <Button className=\"button-red js-delete-custom-rule\" onClick={onClick}>\n                {translate('delete')}\n              </Button>\n            )}\n          </ConfirmButton>\n        </td>\n      )}\n    </tr>\n  );\n\n  render() {\n    const { loading, rules = [] } = this.state;\n\n    return (\n      <div className=\"js-rule-custom-rules coding-rule-section\">\n        <div className=\"coding-rules-detail-custom-rules-section\">\n          <div className=\"coding-rule-section-separator\" />\n\n          <h3 className=\"coding-rules-detail-title\">{translate('coding_rules.custom_rules')}</h3>\n\n          {this.props.canChange && (\n            <CustomRuleButton\n              onDone={this.handleRuleCreate}\n              organization={this.props.organization}\n              templateRule={this.props.ruleDetails}>\n              {({ onClick }) => (\n                <Button className=\"js-create-custom-rule spacer-left\" onClick={onClick}>\n                  {translate('coding_rules.create')}\n                </Button>\n              )}\n            </CustomRuleButton>\n          )}\n\n          <DeferredSpinner loading={loading}>\n            {rules.length > 0 && (\n              <table className=\"coding-rules-detail-list\" id=\"coding-rules-detail-custom-rules\">\n                <tbody>{sortBy(rules, rule => rule.name).map(this.renderRule)}</tbody>\n              </table>\n            )}\n          </DeferredSpinner>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { Link } from 'react-router';\nimport DeferredSpinner from '../../../components/common/DeferredSpinner';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { getFacet } from '../../../api/issues';\nimport { getIssuesUrl } from '../../../helpers/urls';\nimport { formatMeasure } from '../../../helpers/measures';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  organization: string | undefined;\n  ruleKey: string;\n}\n\ninterface Project {\n  count: number;\n  id: string;\n  key: string;\n  name: string;\n}\n\ninterface State {\n  loading: boolean;\n  projects?: Project[];\n  total?: number;\n}\n\nexport default class RuleDetailsIssues extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  static contextTypes = {\n    branchesEnabled: PropTypes.bool\n  };\n\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchIssues();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.ruleKey !== this.props.ruleKey) {\n      this.fetchIssues();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchIssues = () => {\n    this.setState({ loading: true });\n    getFacet(\n      { organization: this.props.organization, rules: this.props.ruleKey, resolved: false },\n      'projectUuids'\n    ).then(\n      ({ facet, response }) => {\n        if (this.mounted) {\n          const { components = [], paging } = response;\n          const projects = [];\n          for (const item of facet) {\n            const project = components.find(component => component.uuid === item.val);\n            if (project) {\n              projects.push({\n                count: item.count,\n                id: item.val,\n                key: project.key,\n                name: project.name\n              });\n            }\n          }\n          this.setState({ projects, loading: false, total: paging.total });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  renderTotal = () => {\n    const { total } = this.state;\n    if (total === undefined) {\n      return null;\n    }\n    const path = getIssuesUrl(\n      { resolved: 'false', rules: this.props.ruleKey },\n      this.props.organization\n    );\n\n    const totalItem = (\n      <span className=\"little-spacer-left\">\n        {'('}\n        <Link to={path}>{total}</Link>\n        {')'}\n      </span>\n    );\n\n    if (!this.context.branchesEnabled) {\n      return totalItem;\n    }\n\n    return (\n      <Tooltip overlay={translate('coding_rules.issues.only_main_branches')}>{totalItem}</Tooltip>\n    );\n  };\n\n  renderProject = (project: Project) => {\n    const path = getIssuesUrl(\n      { projectUuids: project.id, resolved: 'false', rules: this.props.ruleKey },\n      this.props.organization\n    );\n    return (\n      <tr key={project.key}>\n        <td className=\"coding-rules-detail-list-name\">{project.name}</td>\n        <td className=\"coding-rules-detail-list-parameters\">\n          <Link to={path}>{formatMeasure(project.count, 'INT')}</Link>\n        </td>\n      </tr>\n    );\n  };\n\n  render() {\n    const { loading, projects = [] } = this.state;\n\n    return (\n      <div className=\"js-rule-issues coding-rule-section\">\n        <div className=\"coding-rule-section-separator\" />\n\n        <DeferredSpinner loading={loading}>\n          <h3 className=\"coding-rules-detail-title\">\n            {translate('coding_rules.issues')}\n            {this.renderTotal()}\n          </h3>\n\n          {projects.length > 0 && (\n            <table className=\"coding-rules-detail-list coding-rules-most-violated-projects\">\n              <tbody>\n                <tr>\n                  <td className=\"coding-rules-detail-list-name\" colSpan={2}>\n                    {translate('coding_rules.most_violating_projects')}\n                  </td>\n                </tr>\n                {projects.map(this.renderProject)}\n              </tbody>\n            </table>\n          )}\n        </DeferredSpinner>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { RuleParameter } from '../../../app/types';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  params: RuleParameter[];\n}\n\nexport default class RuleDetailsParameters extends React.PureComponent<Props> {\n  renderParameter = (param: RuleParameter) => (\n    <tr className=\"coding-rules-detail-parameter\" key={param.key}>\n      <td className=\"coding-rules-detail-parameter-name\">{param.key}</td>\n      <td className=\"coding-rules-detail-parameter-description\">\n        <p dangerouslySetInnerHTML={{ __html: param.htmlDesc || '' }} />\n        {param.defaultValue !== undefined && (\n          <div className=\"note spacer-top\">\n            {translate('coding_rules.parameters.default_value')}\n            <br />\n            <span className=\"coding-rules-detail-parameter-value\">{param.defaultValue}</span>\n          </div>\n        )}\n      </td>\n    </tr>\n  );\n\n  render() {\n    return (\n      <div className=\"js-rule-parameters\">\n        <h3 className=\"coding-rules-detail-title\">{translate('coding_rules.parameters')}</h3>\n        <table className=\"coding-rules-detail-parameters\">\n          <tbody>{this.props.params.map(this.renderParameter)}</tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Modal from '../../../components/controls/Modal';\nimport Select from '../../../components/controls/Select';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { activateRule, Profile as BaseProfile } from '../../../api/quality-profiles';\nimport { Rule, RuleDetails, RuleActivation } from '../../../app/types';\nimport { SEVERITIES } from '../../../helpers/constants';\nimport { translate } from '../../../helpers/l10n';\nimport { sortProfiles } from '../../quality-profiles/utils';\nimport { SubmitButton, ResetButtonLink } from '../../../components/ui/buttons';\n\ninterface Props {\n  activation?: RuleActivation;\n  modalHeader: string;\n  onClose: () => void;\n  onDone: (severity: string) => Promise<void>;\n  organization: string | undefined;\n  profiles: BaseProfile[];\n  rule: Rule | RuleDetails;\n  updateMode?: boolean;\n}\n\ninterface State {\n  params: { [p: string]: string };\n  profile: string;\n  severity: string;\n  submitting: boolean;\n}\n\nexport default class ActivationFormModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    const profilesWithDepth = this.getQualityProfilesWithDepth(props);\n    this.state = {\n      params: this.getParams(props),\n      profile: profilesWithDepth.length > 0 ? profilesWithDepth[0].key : '',\n      severity: props.activation ? props.activation.severity : props.rule.severity,\n      submitting: false\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  getParams = ({ activation, rule } = this.props) => {\n    const params: { [p: string]: string } = {};\n    if (rule && rule.params) {\n      for (const param of rule.params) {\n        params[param.key] = param.defaultValue || '';\n      }\n      if (activation && activation.params) {\n        for (const param of activation.params) {\n          params[param.key] = param.value;\n        }\n      }\n    }\n    return params;\n  };\n\n  // Choose QP which a user can administrate, which are the same language and which are not built-in\n  getQualityProfilesWithDepth = ({ profiles } = this.props) => {\n    return sortProfiles(\n      profiles.filter(\n        profile =>\n          !profile.isBuiltIn &&\n          profile.actions &&\n          profile.actions.edit &&\n          profile.language === this.props.rule.lang\n      )\n    ).map(profile => ({\n      ...profile,\n      // Decrease depth by 1, so the top level starts at 0\n      depth: profile.depth - 1\n    }));\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    const data = {\n      key: this.state.profile,\n      organization: this.props.organization,\n      params: this.state.params,\n      rule: this.props.rule.key,\n      severity: this.state.severity\n    };\n    activateRule(data)\n      .then(() => this.props.onDone(data.severity))\n      .then(\n        () => {\n          if (this.mounted) {\n            this.setState({ submitting: false });\n            this.props.onClose();\n          }\n        },\n        () => {\n          if (this.mounted) {\n            this.setState({ submitting: false });\n          }\n        }\n      );\n  };\n\n  handleParameterChange = (event: React.SyntheticEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = event.currentTarget;\n    this.setState((state: State) => ({ params: { ...state.params, [name]: value } }));\n  };\n\n  handleProfileChange = ({ value }: { value: string }) => {\n    this.setState({ profile: value });\n  };\n\n  handleSeverityChange = ({ value }: { value: string }) => {\n    this.setState({ severity: value });\n  };\n\n  renderSeverityOption = ({ value }: { value: string }) => {\n    return <SeverityHelper severity={value} />;\n  };\n\n  render() {\n    const { activation, rule } = this.props;\n    const { profile, severity, submitting } = this.state;\n    const { params = [] } = rule;\n    const profilesWithDepth = this.getQualityProfilesWithDepth();\n    const isCustomRule = !!(rule as RuleDetails).templateKey;\n    const activeInAllProfiles = profilesWithDepth.length <= 0;\n    const isUpdateMode = !!activation;\n\n    return (\n      <Modal contentLabel={this.props.modalHeader} onRequestClose={this.props.onClose}>\n        <form onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-head\">\n            <h2>{this.props.modalHeader}</h2>\n          </div>\n\n          <div className=\"modal-body\">\n            {!isUpdateMode &&\n              activeInAllProfiles && (\n                <div className=\"alert alert-info\">\n                  {translate('coding_rules.active_in_all_profiles')}\n                </div>\n              )}\n\n            <div className=\"modal-field\">\n              <label>{translate('coding_rules.quality_profile')}</label>\n              <Select\n                className=\"js-profile\"\n                clearable={false}\n                disabled={submitting || profilesWithDepth.length === 1}\n                onChange={this.handleProfileChange}\n                options={profilesWithDepth.map(profile => ({\n                  label: '   '.repeat(profile.depth) + profile.name,\n                  value: profile.key\n                }))}\n                value={profile}\n              />\n            </div>\n            <div className=\"modal-field\">\n              <label>{translate('severity')}</label>\n              <Select\n                className=\"js-severity\"\n                clearable={false}\n                disabled={submitting}\n                onChange={this.handleSeverityChange}\n                optionRenderer={this.renderSeverityOption}\n                options={SEVERITIES.map(severity => ({\n                  label: translate('severity', severity),\n                  value: severity\n                }))}\n                searchable={false}\n                value={severity}\n                valueRenderer={this.renderSeverityOption}\n              />\n            </div>\n            {isCustomRule ? (\n              <div className=\"modal-field\">\n                <p className=\"note\">{translate('coding_rules.custom_rule.activation_notice')}</p>\n              </div>\n            ) : (\n              params.map(param => (\n                <div className=\"modal-field\" key={param.key}>\n                  <label>\n                    <Tooltip overlay={param.key}>\n                      <span>{param.key}</span>\n                    </Tooltip>\n                  </label>\n                  {param.type === 'TEXT' ? (\n                    <textarea\n                      className=\"width100\"\n                      disabled={submitting}\n                      name={param.key}\n                      onChange={this.handleParameterChange}\n                      placeholder={param.defaultValue}\n                      rows={3}\n                      value={this.state.params[param.key] || ''}\n                    />\n                  ) : (\n                    <input\n                      className=\"input-super-large\"\n                      disabled={submitting}\n                      name={param.key}\n                      onChange={this.handleParameterChange}\n                      placeholder={param.defaultValue}\n                      type=\"text\"\n                      value={this.state.params[param.key] || ''}\n                    />\n                  )}\n                  <div\n                    className=\"note\"\n                    dangerouslySetInnerHTML={{ __html: param.htmlDesc || '' }}\n                  />\n                  {param.extra && <div className=\"note\">{param.extra}</div>}\n                </div>\n              ))\n            )}\n          </div>\n\n          <footer className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={submitting || activeInAllProfiles}>\n              {isUpdateMode ? translate('save') : translate('coding_rules.activate')}\n            </SubmitButton>\n            <ResetButtonLink disabled={submitting} onClick={this.props.onClose}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ActivationFormModal from './ActivationFormModal';\nimport { Profile as BaseProfile } from '../../../api/quality-profiles';\nimport { Rule, RuleDetails, RuleActivation } from '../../../app/types';\nimport { Button } from '../../../components/ui/buttons';\n\ninterface Props {\n  activation?: RuleActivation;\n  buttonText: string;\n  className?: string;\n  modalHeader: string;\n  onDone: (severity: string) => Promise<void>;\n  organization: string | undefined;\n  profiles: BaseProfile[];\n  rule: Rule | RuleDetails;\n  updateMode?: boolean;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class ActivationButton extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { modal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleButtonClick = () => {\n    this.setState({ modal: true });\n  };\n\n  handleCloseModal = () => {\n    this.setState({ modal: false });\n  };\n\n  render() {\n    return (\n      <>\n        <Button\n          className={this.props.className}\n          id=\"coding-rules-quality-profile-activate\"\n          onClick={this.handleButtonClick}>\n          {this.props.buttonText}\n        </Button>\n\n        {this.state.modal && (\n          <ActivationFormModal\n            activation={this.props.activation}\n            modalHeader={this.props.modalHeader}\n            onClose={this.handleCloseModal}\n            onDone={this.props.onDone}\n            organization={this.props.organization}\n            profiles={this.props.profiles}\n            rule={this.props.rule}\n            updateMode={this.props.updateMode}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { RuleInheritance } from '../../../app/types';\nimport { translateWithParameters } from '../../../helpers/l10n';\n\ninterface Props {\n  inheritance: RuleInheritance.Inherited | RuleInheritance.Overridden;\n  parentProfileName: string;\n  profileName: string;\n}\n\nexport default function RuleInheritanceIcon(props: Props) {\n  return (\n    <i\n      className={classNames('icon-inheritance', {\n        'icon-inheritance-overridden': props.inheritance === RuleInheritance.Overridden\n      })}\n      title={translateWithParameters(\n        'coding_rules.overrides',\n        props.profileName,\n        props.parentProfileName\n      )}\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { filter } from 'lodash';\nimport { Link } from 'react-router';\nimport ActivationButton from './ActivationButton';\nimport RuleInheritanceIcon from './RuleInheritanceIcon';\nimport { Profile, deactivateRule, activateRule } from '../../../api/quality-profiles';\nimport { RuleActivation, RuleDetails, RuleInheritance } from '../../../app/types';\nimport ConfirmButton from '../../../components/controls/ConfirmButton';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { getQualityProfileUrl } from '../../../helpers/urls';\nimport BuiltInQualityProfileBadge from '../../quality-profiles/components/BuiltInQualityProfileBadge';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { Button } from '../../../components/ui/buttons';\n\ninterface Props {\n  activations: RuleActivation[] | undefined;\n  canWrite: boolean | undefined;\n  onActivate: () => Promise<void>;\n  onDeactivate: () => Promise<void>;\n  organization: string | undefined;\n  referencedProfiles: { [profile: string]: Profile };\n  ruleDetails: RuleDetails;\n}\n\ninterface State {\n  loading: boolean;\n}\n\nexport default class RuleDetailsProfiles extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchProfiles();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.ruleDetails.key !== this.props.ruleDetails.key) {\n      this.fetchProfiles();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchProfiles = () => this.setState({ loading: true });\n\n  handleActivate = () => this.props.onActivate();\n\n  handleDeactivate = (key?: string) => {\n    if (key) {\n      deactivateRule({\n        key,\n        organization: this.props.organization,\n        rule: this.props.ruleDetails.key\n      }).then(this.props.onDeactivate, () => {});\n    }\n  };\n\n  handleRevert = (key?: string) => {\n    if (key) {\n      activateRule({\n        key,\n        organization: this.props.organization,\n        rule: this.props.ruleDetails.key,\n        reset: true\n      }).then(this.props.onActivate, () => {});\n    }\n  };\n\n  renderInheritedProfile = (activation: RuleActivation, profile: Profile) => {\n    if (!profile.parentName) {\n      return null;\n    }\n    const profilePath = getQualityProfileUrl(\n      profile.parentName,\n      profile.language,\n      this.props.organization\n    );\n    return (\n      <div className=\"coding-rules-detail-quality-profile-inheritance\">\n        {(activation.inherit === RuleInheritance.Overridden ||\n          activation.inherit === RuleInheritance.Inherited) && (\n          <>\n            <RuleInheritanceIcon\n              inheritance={activation.inherit}\n              parentProfileName={profile.parentName}\n              profileName={profile.name}\n            />\n            <Link className=\"link-base-color spacer-left\" to={profilePath}>\n              {profile.parentName}\n            </Link>\n          </>\n        )}\n      </div>\n    );\n  };\n\n  renderSeverity = (activation: RuleActivation, parentActivation?: RuleActivation) => (\n    <td className=\"coding-rules-detail-quality-profile-severity\">\n      <Tooltip overlay={translate('coding_rules.activation_severity')}>\n        <span>\n          <SeverityHelper severity={activation.severity} />\n        </span>\n      </Tooltip>\n      {parentActivation !== undefined &&\n        activation.severity !== parentActivation.severity && (\n          <div className=\"coding-rules-detail-quality-profile-inheritance\">\n            {translate('coding_rules.original')} {translate('severity', parentActivation.severity)}\n          </div>\n        )}\n    </td>\n  );\n\n  renderParameter = (param: { key: string; value: string }, parentActivation?: RuleActivation) => {\n    const originalParam =\n      parentActivation && parentActivation.params.find(p => p.key === param.key);\n    const originalValue = originalParam && originalParam.value;\n\n    return (\n      <div className=\"coding-rules-detail-quality-profile-parameter\" key={param.key}>\n        <span className=\"key\">{param.key}</span>\n        <span className=\"sep\">{': '}</span>\n        <span className=\"value\" title={param.value}>\n          {param.value}\n        </span>\n        {parentActivation &&\n          param.value !== originalValue && (\n            <div className=\"coding-rules-detail-quality-profile-inheritance\">\n              {translate('coding_rules.original')} <span className=\"value\">{originalValue}</span>\n            </div>\n          )}\n      </div>\n    );\n  };\n\n  renderParameters = (activation: RuleActivation, parentActivation?: RuleActivation) => (\n    <td className=\"coding-rules-detail-quality-profile-parameters\">\n      {activation.params.map(param => this.renderParameter(param, parentActivation))}\n    </td>\n  );\n\n  renderActions = (activation: RuleActivation, profile: Profile) => {\n    const canEdit = profile.actions && profile.actions.edit && !profile.isBuiltIn;\n    const { ruleDetails } = this.props;\n    const hasParent = activation.inherit !== RuleInheritance.NotInherited && profile.parentKey;\n    return (\n      <td className=\"coding-rules-detail-quality-profile-actions\">\n        {canEdit && (\n          <>\n            {!ruleDetails.isTemplate && (\n              <ActivationButton\n                activation={activation}\n                buttonText={translate('change_verb')}\n                className=\"coding-rules-detail-quality-profile-change\"\n                modalHeader={translate('coding_rules.change_details')}\n                onDone={this.handleActivate}\n                organization={this.props.organization}\n                profiles={[profile]}\n                rule={ruleDetails}\n              />\n            )}\n            {hasParent ? (\n              activation.inherit === RuleInheritance.Overridden &&\n              profile.parentName && (\n                <ConfirmButton\n                  confirmButtonText={translate('yes')}\n                  confirmData={profile.key}\n                  modalBody={translateWithParameters(\n                    'coding_rules.revert_to_parent_definition.confirm',\n                    profile.parentName\n                  )}\n                  modalHeader={translate('coding_rules.revert_to_parent_definition')}\n                  onConfirm={this.handleRevert}>\n                  {({ onClick }) => (\n                    <Button\n                      className=\"coding-rules-detail-quality-profile-revert button-red spacer-left\"\n                      onClick={onClick}>\n                      {translate('coding_rules.revert_to_parent_definition')}\n                    </Button>\n                  )}\n                </ConfirmButton>\n              )\n            ) : (\n              <ConfirmButton\n                confirmButtonText={translate('yes')}\n                confirmData={profile.key}\n                modalBody={translate('coding_rules.deactivate.confirm')}\n                modalHeader={translate('coding_rules.deactivate')}\n                onConfirm={this.handleDeactivate}>\n                {({ onClick }) => (\n                  <Button\n                    className=\"coding-rules-detail-quality-profile-deactivate button-red spacer-left\"\n                    onClick={onClick}>\n                    {translate('coding_rules.deactivate')}\n                  </Button>\n                )}\n              </ConfirmButton>\n            )}\n          </>\n        )}\n      </td>\n    );\n  };\n\n  renderActivation = (activation: RuleActivation) => {\n    const { activations = [], ruleDetails } = this.props;\n    const profile = this.props.referencedProfiles[activation.qProfile];\n    if (!profile) {\n      return null;\n    }\n\n    const parentActivation = activations.find(x => x.qProfile === profile.parentKey);\n\n    return (\n      <tr data-profile={profile.key} key={profile.key}>\n        <td className=\"coding-rules-detail-quality-profile-name\">\n          <Link to={getQualityProfileUrl(profile.name, profile.language, this.props.organization)}>\n            {profile.name}\n          </Link>\n          {profile.isBuiltIn && <BuiltInQualityProfileBadge className=\"spacer-left\" />}\n          {this.renderInheritedProfile(activation, profile)}\n        </td>\n\n        {this.renderSeverity(activation, parentActivation)}\n        {!ruleDetails.templateKey && this.renderParameters(activation, parentActivation)}\n        {this.renderActions(activation, profile)}\n      </tr>\n    );\n  };\n\n  render() {\n    const { activations = [], referencedProfiles, ruleDetails } = this.props;\n    const canActivate = Object.values(referencedProfiles).some(profile =>\n      Boolean(profile.actions && profile.actions.edit && profile.language === ruleDetails.lang)\n    );\n\n    return (\n      <div className=\"js-rule-profiles coding-rule-section\">\n        <div className=\"coding-rules-detail-quality-profiles-section\">\n          <div className=\"coding-rule-section-separator\" />\n\n          <h3 className=\"coding-rules-detail-title\">\n            {translate('coding_rules.quality_profiles')}\n          </h3>\n\n          {canActivate && (\n            <ActivationButton\n              buttonText={translate('coding_rules.activate')}\n              className=\"coding-rules-quality-profile-activate spacer-left\"\n              modalHeader={translate('coding_rules.activate_in_quality_profile')}\n              onDone={this.handleActivate}\n              organization={this.props.organization}\n              profiles={filter(\n                this.props.referencedProfiles,\n                profile => !activations.find(activation => activation.qProfile === profile.key)\n              )}\n              rule={ruleDetails}\n            />\n          )}\n\n          {activations.length > 0 && (\n            <table\n              className=\"coding-rules-detail-quality-profiles width100\"\n              id=\"coding-rules-detail-quality-profiles\">\n              <tbody>{activations.map(this.renderActivation)}</tbody>\n            </table>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport CustomRuleButton from './CustomRuleButton';\nimport RuleDetailsCustomRules from './RuleDetailsCustomRules';\nimport RuleDetailsDescription from './RuleDetailsDescription';\nimport RuleDetailsIssues from './RuleDetailsIssues';\nimport RuleDetailsMeta from './RuleDetailsMeta';\nimport RuleDetailsParameters from './RuleDetailsParameters';\nimport RuleDetailsProfiles from './RuleDetailsProfiles';\nimport { Query, Activation } from '../query';\nimport { Profile } from '../../../api/quality-profiles';\nimport { getRuleDetails, deleteRule, updateRule } from '../../../api/rules';\nimport { RuleActivation, RuleDetails as IRuleDetails } from '../../../app/types';\nimport DeferredSpinner from '../../../components/common/DeferredSpinner';\nimport ConfirmButton from '../../../components/controls/ConfirmButton';\nimport { Button } from '../../../components/ui/buttons';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n\ninterface Props {\n  allowCustomRules?: boolean;\n  canWrite?: boolean;\n  onActivate: (profile: string, rule: string, activation: Activation) => void;\n  onDeactivate: (profile: string, rule: string) => void;\n  onDelete: (rule: string) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  organization: string | undefined;\n  referencedProfiles: { [profile: string]: Profile };\n  referencedRepositories: { [repository: string]: { key: string; language: string; name: string } };\n  ruleKey: string;\n  selectedProfile?: Profile;\n}\n\ninterface State {\n  actives?: RuleActivation[];\n  loading: boolean;\n  ruleDetails?: IRuleDetails;\n}\n\nexport default class RuleDetails extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.setState({ loading: true });\n    this.fetchRuleDetails();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.ruleKey !== this.props.ruleKey) {\n      this.setState({ loading: true });\n      this.fetchRuleDetails();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchRuleDetails = () =>\n    getRuleDetails({\n      actives: true,\n      key: this.props.ruleKey,\n      organization: this.props.organization\n    }).then(\n      ({ actives, rule }) => {\n        if (this.mounted) {\n          this.setState({ actives, loading: false, ruleDetails: rule });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n\n  handleRuleChange = (ruleDetails: IRuleDetails) => {\n    if (this.mounted) {\n      this.setState({ ruleDetails });\n    }\n  };\n\n  handleTagsChange = (tags: string[]) => {\n    // optimistic update\n    const oldTags = this.state.ruleDetails && this.state.ruleDetails.tags;\n    this.setState(state => ({ ruleDetails: { ...state.ruleDetails, tags } }));\n    updateRule({\n      key: this.props.ruleKey,\n      organization: this.props.organization,\n      tags: tags.join()\n    }).catch(() => {\n      if (this.mounted) {\n        this.setState(state => ({ ruleDetails: { ...state.ruleDetails, tags: oldTags } }));\n      }\n    });\n  };\n\n  handleActivate = () =>\n    this.fetchRuleDetails().then(() => {\n      const { ruleKey, selectedProfile } = this.props;\n      if (selectedProfile && this.state.actives) {\n        const active = this.state.actives.find(active => active.qProfile === selectedProfile.key);\n        if (active) {\n          this.props.onActivate(selectedProfile.key, ruleKey, active);\n        }\n      }\n    });\n\n  handleDeactivate = () =>\n    this.fetchRuleDetails().then(() => {\n      const { ruleKey, selectedProfile } = this.props;\n      if (selectedProfile && this.state.actives) {\n        if (!this.state.actives.find(active => active.qProfile === selectedProfile.key)) {\n          this.props.onDeactivate(selectedProfile.key, ruleKey);\n        }\n      }\n    });\n\n  handleDelete = () =>\n    deleteRule({ key: this.props.ruleKey, organization: this.props.organization }).then(() =>\n      this.props.onDelete(this.props.ruleKey)\n    );\n\n  render() {\n    const { ruleDetails } = this.state;\n\n    if (!ruleDetails) {\n      return <div className=\"coding-rule-details\" />;\n    }\n\n    const { allowCustomRules, canWrite, organization, referencedProfiles } = this.props;\n    const { params = [] } = ruleDetails;\n\n    const isCustom = !!ruleDetails.templateKey;\n    const isEditable = canWrite && !!this.props.allowCustomRules && isCustom;\n\n    return (\n      <div className=\"coding-rule-details\">\n        <DeferredSpinner loading={this.state.loading}>\n          <RuleDetailsMeta\n            canWrite={canWrite}\n            onFilterChange={this.props.onFilterChange}\n            onTagsChange={this.handleTagsChange}\n            organization={organization}\n            referencedRepositories={this.props.referencedRepositories}\n            ruleDetails={ruleDetails}\n          />\n\n          <RuleDetailsDescription\n            canWrite={canWrite}\n            onChange={this.handleRuleChange}\n            organization={organization}\n            ruleDetails={ruleDetails}\n          />\n\n          {params.length > 0 && <RuleDetailsParameters params={params} />}\n\n          {isEditable && (\n            <div className=\"coding-rules-detail-description\">\n              {/* `templateRule` is used to get rule meta data, `customRule` is used to get parameter values */}\n              {/* it's expected to pass the same rule to both parameters */}\n              <CustomRuleButton\n                customRule={ruleDetails}\n                onDone={this.handleRuleChange}\n                organization={organization}\n                templateRule={ruleDetails}>\n                {({ onClick }) => (\n                  <Button\n                    className=\"js-edit-custom\"\n                    id=\"coding-rules-detail-custom-rule-change\"\n                    onClick={onClick}>\n                    {translate('edit')}\n                  </Button>\n                )}\n              </CustomRuleButton>\n              <ConfirmButton\n                confirmButtonText={translate('delete')}\n                isDestructive={true}\n                modalBody={translateWithParameters(\n                  'coding_rules.delete.custom.confirm',\n                  ruleDetails.name\n                )}\n                modalHeader={translate('coding_rules.delete_rule')}\n                onConfirm={this.handleDelete}>\n                {({ onClick }) => (\n                  <Button\n                    className=\"button-red spacer-left js-delete\"\n                    id=\"coding-rules-detail-rule-delete\"\n                    onClick={onClick}>\n                    {translate('delete')}\n                  </Button>\n                )}\n              </ConfirmButton>\n            </div>\n          )}\n\n          {ruleDetails.isTemplate && (\n            <RuleDetailsCustomRules\n              canChange={allowCustomRules && canWrite}\n              organization={organization}\n              ruleDetails={ruleDetails}\n            />\n          )}\n\n          {!ruleDetails.isTemplate && (\n            <RuleDetailsProfiles\n              activations={this.state.actives}\n              canWrite={canWrite}\n              onActivate={this.handleActivate}\n              onDeactivate={this.handleDeactivate}\n              organization={organization}\n              referencedProfiles={referencedProfiles}\n              ruleDetails={ruleDetails}\n            />\n          )}\n\n          {!ruleDetails.isTemplate && (\n            <RuleDetailsIssues organization={organization} ruleKey={ruleDetails.key} />\n          )}\n        </DeferredSpinner>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { Link } from 'react-router';\nimport ActivationButton from './ActivationButton';\nimport SimilarRulesFilter from './SimilarRulesFilter';\nimport { Activation, Query } from '../query';\nimport { Profile, deactivateRule } from '../../../api/quality-profiles';\nimport { Rule, RuleInheritance } from '../../../app/types';\nimport ConfirmButton from '../../../components/controls/ConfirmButton';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport SeverityIcon from '../../../components/shared/SeverityIcon';\nimport { Button } from '../../../components/ui/buttons';\nimport IssueTypeIcon from '../../../components/ui/IssueTypeIcon';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n\ninterface Props {\n  activation?: Activation;\n  onActivate: (profile: string, rule: string, activation: Activation) => void;\n  onDeactivate: (profile: string, rule: string) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  organization: string | undefined;\n  path: { pathname: string; query: { [x: string]: any } };\n  rule: Rule;\n  selected: boolean;\n  selectedProfile?: Profile;\n}\n\nexport default class RuleListItem extends React.PureComponent<Props> {\n  handleDeactivate = () => {\n    if (this.props.selectedProfile) {\n      const data = {\n        key: this.props.selectedProfile.key,\n        organization: this.props.organization,\n        rule: this.props.rule.key\n      };\n      deactivateRule(data).then(() => this.props.onDeactivate(data.key, data.rule), () => {});\n    }\n  };\n\n  handleActivate = (severity: string) => {\n    if (this.props.selectedProfile) {\n      this.props.onActivate(this.props.selectedProfile.key, this.props.rule.key, {\n        severity,\n        inherit: RuleInheritance.NotInherited\n      });\n    }\n    return Promise.resolve();\n  };\n\n  renderActivation = () => {\n    const { activation, selectedProfile } = this.props;\n    if (!activation) {\n      return null;\n    }\n\n    return (\n      <td className=\"coding-rule-table-meta-cell coding-rule-activation\">\n        <SeverityIcon severity={activation.severity} />\n        {selectedProfile &&\n          selectedProfile.parentName && (\n            <>\n              {activation.inherit === RuleInheritance.Overridden && (\n                <Tooltip\n                  overlay={translateWithParameters(\n                    'coding_rules.overrides',\n                    selectedProfile.name,\n                    selectedProfile.parentName\n                  )}>\n                  <i className=\"little-spacer-left icon-inheritance icon-inheritance-overridden\" />\n                </Tooltip>\n              )}\n              {activation.inherit === RuleInheritance.Inherited && (\n                <Tooltip\n                  overlay={translateWithParameters(\n                    'coding_rules.inherits',\n                    selectedProfile.name,\n                    selectedProfile.parentName\n                  )}>\n                  <i className=\"little-spacer-left icon-inheritance\" />\n                </Tooltip>\n              )}\n            </>\n          )}\n      </td>\n    );\n  };\n\n  renderActions = () => {\n    const { activation, rule, selectedProfile } = this.props;\n    if (!selectedProfile) {\n      return null;\n    }\n\n    const canEdit = selectedProfile.actions && selectedProfile.actions.edit;\n    if (!canEdit || selectedProfile.isBuiltIn) {\n      return null;\n    }\n\n    return (\n      <td className=\"coding-rule-table-meta-cell coding-rule-activation-actions\">\n        {activation\n          ? this.renderDeactivateButton(activation.inherit)\n          : !rule.isTemplate && (\n              <ActivationButton\n                buttonText={translate('coding_rules.activate')}\n                className=\"coding-rules-detail-quality-profile-activate\"\n                modalHeader={translate('coding_rules.activate_in_quality_profile')}\n                onDone={this.handleActivate}\n                organization={this.props.organization}\n                profiles={[selectedProfile]}\n                rule={rule}\n              />\n            )}\n      </td>\n    );\n  };\n\n  renderDeactivateButton = (inherit: string) => {\n    return inherit === 'NONE' ? (\n      <ConfirmButton\n        confirmButtonText={translate('yes')}\n        modalBody={translate('coding_rules.deactivate.confirm')}\n        modalHeader={translate('coding_rules.deactivate')}\n        onConfirm={this.handleDeactivate}>\n        {({ onClick }) => (\n          <Button\n            className=\"coding-rules-detail-quality-profile-deactivate button-red\"\n            onClick={onClick}>\n            {translate('coding_rules.deactivate')}\n          </Button>\n        )}\n      </ConfirmButton>\n    ) : (\n      <Tooltip overlay={translate('coding_rules.can_not_deactivate')}>\n        <Button className=\"coding-rules-detail-quality-profile-deactivate button-red disabled\">\n          {translate('coding_rules.deactivate')}\n        </Button>\n      </Tooltip>\n    );\n  };\n\n  render() {\n    const { rule, selected } = this.props;\n    const allTags = [...(rule.tags || []), ...(rule.sysTags || [])];\n    return (\n      <div className={classNames('coding-rule', { selected })} data-rule={rule.key}>\n        <table className=\"coding-rule-table\">\n          <tbody>\n            <tr>\n              {this.renderActivation()}\n\n              <td>\n                <div className=\"coding-rule-title\">\n                  <Link className=\"link-no-underline\" to={this.props.path}>\n                    {rule.name}\n                  </Link>\n                  {rule.isTemplate && (\n                    <Tooltip overlay={translate('coding_rules.rule_template.title')}>\n                      <span className=\"outline-badge spacer-left\">\n                        {translate('coding_rules.rule_template')}\n                      </span>\n                    </Tooltip>\n                  )}\n                </div>\n              </td>\n\n              <td className=\"coding-rule-table-meta-cell\">\n                <div className=\"display-flex-center coding-rule-meta\">\n                  {rule.status !== 'READY' && (\n                    <span className=\"spacer-left badge badge-normal-size badge-tiny-height badge-danger-light\">\n                      {translate('rules.status', rule.status)}\n                    </span>\n                  )}\n                  <span className=\"spacer-left note\">{rule.langName}</span>\n                  <Tooltip overlay={translate('coding_rules.type.tooltip', rule.type)}>\n                    <span className=\"display-inline-flex-center spacer-left note\">\n                      <IssueTypeIcon className=\"little-spacer-right\" query={rule.type} />\n                      {translate('issue.type', rule.type)}\n                    </span>\n                  </Tooltip>\n                  {allTags.length > 0 && (\n                    <span className=\"spacer-left\">\n                      <i className=\"icon-tags little-spacer-right\" />\n                      <span className=\"note\">{allTags.join(', ')}</span>\n                    </span>\n                  )}\n                  <SimilarRulesFilter onFilterChange={this.props.onFilterChange} rule={rule} />\n                </div>\n              </td>\n\n              {this.renderActions()}\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet';\nimport * as PropTypes from 'prop-types';\nimport { keyBy } from 'lodash';\nimport * as key from 'keymaster';\nimport BulkChange from './BulkChange';\nimport FacetsList from './FacetsList';\nimport PageActions from './PageActions';\nimport RuleDetails from './RuleDetails';\nimport RuleListItem from './RuleListItem';\nimport {\n  Facets,\n  Query,\n  parseQuery,\n  serializeQuery,\n  areQueriesEqual,\n  shouldRequestFacet,\n  FacetKey,\n  OpenFacets,\n  getServerFacet,\n  getAppFacet,\n  Actives,\n  Activation,\n  getOpen\n} from '../query';\nimport { searchRules, getRulesApp } from '../../../api/rules';\nimport { Paging, Rule, RuleActivation } from '../../../app/types';\nimport ScreenPositionHelper from '../../../components/common/ScreenPositionHelper';\nimport { translate } from '../../../helpers/l10n';\nimport { RawQuery } from '../../../helpers/query';\nimport ListFooter from '../../../components/controls/ListFooter';\nimport FiltersHeader from '../../../components/common/FiltersHeader';\nimport SearchBox from '../../../components/controls/SearchBox';\nimport { searchQualityProfiles, Profile } from '../../../api/quality-profiles';\nimport { scrollToElement } from '../../../helpers/scrolling';\n\nimport '../styles.css';\n\nconst PAGE_SIZE = 100;\n\ninterface Props {\n  location: { pathname: string; query: RawQuery };\n  organization?: { key: string };\n}\n\ninterface State {\n  actives?: Actives;\n  canWrite?: boolean;\n  facets?: Facets;\n  loading: boolean;\n  openFacets: OpenFacets;\n  openRule?: Rule;\n  paging?: Paging;\n  query: Query;\n  referencedProfiles: { [profile: string]: Profile };\n  referencedRepositories: { [repository: string]: { key: string; language: string; name: string } };\n  rules: Rule[];\n  selected?: string;\n}\n\n// TODO redirect to default organization's rules page\n\nexport default class App extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  static contextTypes = {\n    organizationsEnabled: PropTypes.bool,\n    router: PropTypes.object.isRequired\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      loading: true,\n      openFacets: { languages: true, types: true },\n      query: parseQuery(props.location.query),\n      referencedProfiles: {},\n      referencedRepositories: {},\n      rules: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    // $FlowFixMe\n    document.body.classList.add('white-page');\n    // $FlowFixMe\n    document.documentElement.classList.add('white-page');\n    const footer = document.getElementById('footer');\n    if (footer) {\n      footer.classList.add('page-footer-with-sidebar');\n    }\n    this.attachShortcuts();\n    this.fetchInitialData();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    const openRule = this.getOpenRule(nextProps, this.state.rules);\n    if (openRule && openRule.key !== this.state.selected) {\n      this.setState({ selected: openRule.key });\n    }\n    this.setState({ openRule, query: parseQuery(nextProps.location.query) });\n  }\n\n  componentDidUpdate(prevProps: Props, prevState: State) {\n    if (!areQueriesEqual(prevProps.location.query, this.props.location.query)) {\n      this.fetchFirstRules();\n    }\n    if (\n      !this.state.openRule &&\n      (prevState.selected !== this.state.selected || prevState.openRule)\n    ) {\n      // if user simply selected another issue\n      // or if he went from the source code back to the list of issues\n      this.scrollToSelectedRule();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    // $FlowFixMe\n    document.body.classList.remove('white-page');\n    // $FlowFixMe\n    document.documentElement.classList.remove('white-page');\n    const footer = document.getElementById('footer');\n    if (footer) {\n      footer.classList.remove('page-footer-with-sidebar');\n    }\n    this.detachShortcuts();\n  }\n\n  attachShortcuts = () => {\n    key.setScope('coding-rules');\n    key('up', 'coding-rules', () => {\n      this.selectPreviousRule();\n      return false;\n    });\n    key('down', 'coding-rules', () => {\n      this.selectNextRule();\n      return false;\n    });\n    key('right', 'coding-rules', () => {\n      this.openSelectedRule();\n      return false;\n    });\n    key('left', 'coding-rules', () => {\n      this.closeRule();\n      return false;\n    });\n  };\n\n  detachShortcuts = () => key.deleteScope('coding-rules');\n\n  getOpenRule = (props: Props, rules: Rule[]) => {\n    const open = getOpen(props.location.query);\n    return open && rules.find(rule => rule.key === open);\n  };\n\n  getFacetsToFetch = () =>\n    Object.keys(this.state.openFacets)\n      .filter((facet: FacetKey) => this.state.openFacets[facet])\n      .filter((facet: FacetKey) => shouldRequestFacet(facet))\n      .map((facet: FacetKey) => getServerFacet(facet));\n\n  getFieldsToFetch = () => {\n    const fields = [\n      'isTemplate',\n      'name',\n      'lang',\n      'langName',\n      'severity',\n      'status',\n      'sysTags',\n      'tags',\n      'templateKey'\n    ];\n    if (this.state.query.profile) {\n      fields.push('actives', 'params');\n    }\n    return fields;\n  };\n\n  getSearchParameters = () => ({\n    f: this.getFieldsToFetch().join(),\n    facets: this.getFacetsToFetch().join(),\n    organization: this.props.organization && this.props.organization.key,\n    ps: PAGE_SIZE,\n    s: 'name',\n    ...serializeQuery(this.state.query)\n  });\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  fetchInitialData = () => {\n    this.setState({ loading: true });\n    const organization = this.props.organization && this.props.organization.key;\n    Promise.all([getRulesApp({ organization }), searchQualityProfiles({ organization })]).then(\n      ([{ canWrite, repositories }, { profiles }]) => {\n        this.setState({\n          canWrite,\n          referencedProfiles: keyBy(profiles, 'key'),\n          referencedRepositories: keyBy(repositories, 'key')\n        });\n        this.fetchFirstRules();\n      },\n      this.stopLoading\n    );\n  };\n\n  makeFetchRequest = (query?: RawQuery) =>\n    searchRules({ ...this.getSearchParameters(), ...query }).then(\n      ({ actives: rawActives, facets: rawFacets, p, ps, rules, total }) => {\n        const actives = rawActives && parseActives(rawActives);\n        const facets = rawFacets && parseFacets(rawFacets);\n        const paging = { pageIndex: p, pageSize: ps, total };\n        return { actives, facets, paging, rules };\n      }\n    );\n\n  fetchFirstRules = (query?: RawQuery) => {\n    this.setState({ loading: true });\n    this.makeFetchRequest(query).then(({ actives, facets, paging, rules }) => {\n      if (this.mounted) {\n        const openRule = this.getOpenRule(this.props, rules);\n        const selected = rules.length > 0 ? (openRule && openRule.key) || rules[0].key : undefined;\n        this.setState({ actives, facets, loading: false, openRule, paging, rules, selected });\n      }\n    }, this.stopLoading);\n  };\n\n  fetchMoreRules = () => {\n    const { paging } = this.state;\n    if (paging) {\n      this.setState({ loading: true });\n      const nextPage = paging.pageIndex + 1;\n      this.makeFetchRequest({ p: nextPage, facets: undefined }).then(\n        ({ actives, paging, rules }) => {\n          if (this.mounted) {\n            this.setState(state => ({\n              actives: { ...state.actives, actives },\n              loading: false,\n              paging,\n              rules: [...state.rules, ...rules]\n            }));\n          }\n        },\n        this.stopLoading\n      );\n    }\n  };\n\n  fetchFacet = (facet: FacetKey) => {\n    this.setState({ loading: true });\n    this.makeFetchRequest({ ps: 1, facets: getServerFacet(facet) }).then(({ facets }) => {\n      if (this.mounted) {\n        this.setState(state => ({ facets: { ...state.facets, ...facets }, loading: false }));\n      }\n    }, this.stopLoading);\n  };\n\n  getSelectedIndex = ({ selected, rules } = this.state) => {\n    const index = rules.findIndex(rule => rule.key === selected);\n    return index !== -1 ? index : undefined;\n  };\n\n  selectNextRule = () => {\n    const { rules } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    if (rules && selectedIndex !== undefined && selectedIndex < rules.length - 1) {\n      if (this.state.openRule) {\n        this.openRule(rules[selectedIndex + 1].key);\n      } else {\n        this.setState({ selected: rules[selectedIndex + 1].key });\n      }\n    }\n  };\n\n  selectPreviousRule = () => {\n    const { rules } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    if (rules && selectedIndex !== undefined && selectedIndex > 0) {\n      if (this.state.openRule) {\n        this.openRule(rules[selectedIndex - 1].key);\n      } else {\n        this.setState({ selected: rules[selectedIndex - 1].key });\n      }\n    }\n  };\n\n  getRulePath = (rule: string) => ({\n    pathname: this.props.location.pathname,\n    query: { ...serializeQuery(this.state.query), open: rule }\n  });\n\n  openRule = (rule: string) => {\n    const path = this.getRulePath(rule);\n    if (this.state.openRule) {\n      this.context.router.replace(path);\n    } else {\n      this.context.router.push(path);\n    }\n  };\n\n  openSelectedRule = () => {\n    const { selected } = this.state;\n    if (selected) {\n      this.openRule(selected);\n    }\n  };\n\n  closeRule = () => {\n    this.context.router.push({\n      pathname: this.props.location.pathname,\n      query: {\n        ...serializeQuery(this.state.query),\n        open: undefined\n      }\n    });\n    this.scrollToSelectedRule(false);\n  };\n\n  scrollToSelectedRule = (smooth = true) => {\n    const { selected } = this.state;\n    if (selected) {\n      const element = document.querySelector(`[data-rule=\"${selected}\"]`);\n      if (element) {\n        scrollToElement(element, { topOffset: 150, bottomOffset: 100, smooth });\n      }\n    }\n  };\n\n  getRuleActivation = (rule: string) => {\n    const { actives, query } = this.state;\n    if (actives && actives[rule] && query.profile) {\n      return actives[rule][query.profile];\n    } else {\n      return undefined;\n    }\n  };\n\n  getSelectedProfile = () => {\n    const { query, referencedProfiles } = this.state;\n    if (query.profile) {\n      return referencedProfiles[query.profile];\n    } else {\n      return undefined;\n    }\n  };\n\n  closeFacet = (facet: string) =>\n    this.setState(state => ({\n      openFacets: { ...state.openFacets, [facet]: false }\n    }));\n\n  handleBack = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.closeRule();\n  };\n\n  handleFilterChange = (changes: Partial<Query>) =>\n    this.context.router.push({\n      pathname: this.props.location.pathname,\n      query: serializeQuery({ ...this.state.query, ...changes })\n    });\n\n  handleFacetToggle = (facet: keyof Query) => {\n    this.setState(state => ({\n      openFacets: { ...state.openFacets, [facet]: !state.openFacets[facet] }\n    }));\n    if (shouldRequestFacet(facet) && (!this.state.facets || !this.state.facets[facet])) {\n      this.fetchFacet(facet);\n    }\n  };\n\n  handleReload = () => this.fetchFirstRules();\n\n  handleReset = () => this.context.router.push({ pathname: this.props.location.pathname });\n\n  /** Tries to take rule by index, or takes the last one  */\n  pickRuleAround = (rules: Rule[], selectedIndex: number | undefined) => {\n    if (selectedIndex === undefined || rules.length === 0) {\n      return undefined;\n    }\n    if (selectedIndex >= 0 && selectedIndex < rules.length) {\n      return rules[selectedIndex].key;\n    }\n    return rules[rules.length - 1].key;\n  };\n\n  handleRuleDelete = (ruleKey: string) => {\n    if (this.state.query.ruleKey === ruleKey) {\n      this.handleReset();\n    } else {\n      this.setState(state => {\n        const rules = state.rules.filter(rule => rule.key !== ruleKey);\n        const selectedIndex = this.getSelectedIndex(state);\n        const selected = this.pickRuleAround(rules, selectedIndex);\n        return { rules, selected };\n      });\n      this.closeRule();\n    }\n  };\n\n  handleRuleActivate = (profile: string, rule: string, activation: Activation) =>\n    this.setState((state: State) => {\n      const { actives = {} } = state;\n      if (!actives[rule]) {\n        return { actives: { ...actives, [rule]: { [profile]: activation } } };\n      }\n\n      return { actives: { ...actives, [rule]: { ...actives[rule], [profile]: activation } } };\n    });\n\n  handleRuleDeactivate = (profile: string, rule: string) =>\n    this.setState((state: State) => {\n      const { actives } = state;\n      if (actives && actives[rule]) {\n        return { actives: { ...actives, [rule]: { ...actives[rule], [profile]: undefined } } };\n      }\n      return {};\n    });\n\n  handleSearch = (searchQuery: string) => this.handleFilterChange({ searchQuery });\n\n  isFiltered = () => Object.keys(serializeQuery(this.state.query)).length > 0;\n\n  render() {\n    const { paging, rules } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    const organization = this.props.organization && this.props.organization.key;\n\n    return (\n      <>\n        <Helmet title={translate('coding_rules.page')} />\n        <div className=\"layout-page\" id=\"coding-rules-page\">\n          <ScreenPositionHelper className=\"layout-page-side-outer\">\n            {({ top }) => (\n              <div className=\"layout-page-side\" style={{ top }}>\n                <div className=\"layout-page-side-inner\">\n                  <div className=\"layout-page-filters\">\n                    <FiltersHeader displayReset={this.isFiltered()} onReset={this.handleReset} />\n                    <SearchBox\n                      className=\"spacer-bottom\"\n                      id=\"coding-rules-search\"\n                      minLength={2}\n                      onChange={this.handleSearch}\n                      placeholder={translate('search.search_for_rules')}\n                      value={this.state.query.searchQuery || ''}\n                    />\n                    <FacetsList\n                      facets={this.state.facets}\n                      onFacetToggle={this.handleFacetToggle}\n                      onFilterChange={this.handleFilterChange}\n                      organization={organization}\n                      organizationsEnabled={this.context.organizationsEnabled}\n                      openFacets={this.state.openFacets}\n                      query={this.state.query}\n                      referencedProfiles={this.state.referencedProfiles}\n                      referencedRepositories={this.state.referencedRepositories}\n                      selectedProfile={this.getSelectedProfile()}\n                    />\n                  </div>\n                </div>\n              </div>\n            )}\n          </ScreenPositionHelper>\n\n          <div className=\"layout-page-main\">\n            <div className=\"layout-page-header-panel layout-page-main-header\">\n              <div className=\"layout-page-header-panel-inner layout-page-main-header-inner\">\n                <div className=\"layout-page-main-inner\">\n                  {this.state.openRule ? (\n                    <a href=\"#\" className=\"js-back\" onClick={this.handleBack}>\n                      {translate('coding_rules.return_to_list')}\n                    </a>\n                  ) : (\n                    this.state.paging && (\n                      <BulkChange\n                        organization={organization}\n                        query={this.state.query}\n                        referencedProfiles={this.state.referencedProfiles}\n                        total={this.state.paging.total}\n                      />\n                    )\n                  )}\n                  <PageActions\n                    loading={this.state.loading}\n                    onReload={this.handleReload}\n                    paging={paging}\n                    selectedIndex={selectedIndex}\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"layout-page-main-inner\">\n              {this.state.openRule ? (\n                <RuleDetails\n                  allowCustomRules={!this.context.organizationsEnabled}\n                  canWrite={this.state.canWrite}\n                  onActivate={this.handleRuleActivate}\n                  onDeactivate={this.handleRuleDeactivate}\n                  onDelete={this.handleRuleDelete}\n                  onFilterChange={this.handleFilterChange}\n                  organization={organization}\n                  referencedProfiles={this.state.referencedProfiles}\n                  referencedRepositories={this.state.referencedRepositories}\n                  ruleKey={this.state.openRule.key}\n                  selectedProfile={this.getSelectedProfile()}\n                />\n              ) : (\n                <>\n                  {rules.map(rule => (\n                    <RuleListItem\n                      activation={this.getRuleActivation(rule.key)}\n                      key={rule.key}\n                      onActivate={this.handleRuleActivate}\n                      onDeactivate={this.handleRuleDeactivate}\n                      onFilterChange={this.handleFilterChange}\n                      organization={organization}\n                      path={this.getRulePath(rule.key)}\n                      rule={rule}\n                      selected={rule.key === this.state.selected}\n                      selectedProfile={this.getSelectedProfile()}\n                    />\n                  ))}\n                  {paging !== undefined && (\n                    <ListFooter\n                      count={rules.length}\n                      loadMore={this.fetchMoreRules}\n                      ready={!this.state.loading}\n                      total={paging.total}\n                    />\n                  )}\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nfunction parseActives(rawActives: { [rule: string]: RuleActivation[] }) {\n  const actives: Actives = {};\n  for (const [rule, activations] of Object.entries(rawActives)) {\n    actives[rule] = {};\n    for (const { inherit, qProfile, severity } of activations) {\n      actives[rule][qProfile] = { inherit, severity };\n    }\n  }\n  return actives;\n}\n\nfunction parseFacets(rawFacets: { property: string; values: { count: number; val: string }[] }[]) {\n  const facets: Facets = {};\n  for (const rawFacet of rawFacets) {\n    const values: { [value: string]: number } = {};\n    for (const rawValue of rawFacet.values) {\n      values[rawValue.val] = rawValue.count;\n    }\n    facets[getAppFacet(rawFacet.property)] = values;\n  }\n  return facets;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { map } from 'lodash';\nimport { csvEscape } from '../helpers/csv';\nimport {\n  request,\n  checkStatus,\n  parseJSON,\n  getJSON,\n  post,\n  postJSON,\n  RequestData\n} from '../helpers/request';\nimport { Paging } from '../app/types';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface ProfileActions {\n  associateProjects?: boolean;\n  copy?: boolean;\n  delete?: boolean;\n  edit?: boolean;\n  setAsDefault?: boolean;\n}\n\nexport interface Actions {\n  create?: boolean;\n}\n\nexport interface Profile {\n  actions?: ProfileActions;\n  key: string;\n  name: string;\n  language: string;\n  languageName: string;\n  isInherited?: boolean;\n  parentKey?: string;\n  parentName?: string;\n  isDefault?: boolean;\n  activeRuleCount: number;\n  activeDeprecatedRuleCount: number;\n  rulesUpdatedAt?: string;\n  lastUsed?: string;\n  userUpdatedAt?: string;\n  organization: string;\n  isBuiltIn?: boolean;\n  projectCount?: number;\n}\n\nexport interface SearchQualityProfilesParameters {\n  defaults?: boolean;\n  language?: string;\n  organization?: string;\n  project?: string;\n  qualityProfile?: string;\n}\n\nexport interface SearchQualityProfilesResponse {\n  actions?: Actions;\n  profiles: Profile[];\n}\n\nexport function searchQualityProfiles(\n  parameters: SearchQualityProfilesParameters\n): Promise<SearchQualityProfilesResponse> {\n  return getJSON('/api/qualityprofiles/search', parameters).catch(throwGlobalError);\n}\n\nexport function getQualityProfile(data: {\n  compareToSonarWay?: boolean;\n  profile: string;\n}): Promise<any> {\n  return getJSON('/api/qualityprofiles/show', data);\n}\n\nexport function createQualityProfile(data: RequestData): Promise<any> {\n  return request('/api/qualityprofiles/create')\n    .setMethod('post')\n    .setData(data)\n    .submit()\n    .then(checkStatus)\n    .then(parseJSON);\n}\n\nexport function restoreQualityProfile(data: RequestData): Promise<any> {\n  return request('/api/qualityprofiles/restore')\n    .setMethod('post')\n    .setData(data)\n    .submit()\n    .then(checkStatus)\n    .then(parseJSON);\n}\n\nexport interface ProfileProject {\n  id: number;\n  key: string;\n  name: string;\n  selected: boolean;\n}\n\nexport function getProfileProjects(\n  data: RequestData\n): Promise<{ more: boolean; results: ProfileProject[] }> {\n  return getJSON('/api/qualityprofiles/projects', data).catch(throwGlobalError);\n}\n\nexport function getProfileInheritance(profileKey: string): Promise<any> {\n  return getJSON('/api/qualityprofiles/inheritance', { profileKey }).catch(throwGlobalError);\n}\n\nexport function setDefaultProfile(profileKey: string): Promise<void> {\n  return post('/api/qualityprofiles/set_default', { profileKey });\n}\n\nexport function renameProfile(key: string, name: string): Promise<void> {\n  return post('/api/qualityprofiles/rename', { key, name });\n}\n\nexport function copyProfile(fromKey: string, toName: string): Promise<any> {\n  return postJSON('/api/qualityprofiles/copy', { fromKey, toName });\n}\n\nexport function deleteProfile(profileKey: string): Promise<void> {\n  return post('/api/qualityprofiles/delete', { profileKey });\n}\n\nexport function changeProfileParent(profileKey: string, parentKey: string): Promise<void> {\n  return post('/api/qualityprofiles/change_parent', { profileKey, parentKey });\n}\n\nexport function getImporters(): Promise<\n  Array<{ key: string; languages: Array<string>; name: string }>\n> {\n  return getJSON('/api/qualityprofiles/importers').then(r => r.importers, throwGlobalError);\n}\n\nexport function getExporters(): Promise<any> {\n  return getJSON('/api/qualityprofiles/exporters').then(r => r.exporters);\n}\n\nexport function getProfileChangelog(data: RequestData): Promise<any> {\n  return getJSON('/api/qualityprofiles/changelog', data);\n}\n\nexport function compareProfiles(leftKey: string, rightKey: string): Promise<any> {\n  return getJSON('/api/qualityprofiles/compare', { leftKey, rightKey });\n}\n\nexport function associateProject(profileKey: string, projectKey: string) {\n  return post('/api/qualityprofiles/add_project', { profileKey, projectKey }).catch(\n    throwGlobalError\n  );\n}\n\nexport function dissociateProject(profileKey: string, projectKey: string) {\n  return post('/api/qualityprofiles/remove_project', { profileKey, projectKey }).catch(\n    throwGlobalError\n  );\n}\n\nexport interface SearchUsersGroupsParameters {\n  language: string;\n  organization?: string;\n  qualityProfile: string;\n  q?: string;\n  selected?: 'all' | 'selected' | 'deselected';\n}\n\nexport interface SearchUsersResponse {\n  users: Array<{\n    avatar?: string;\n    login: string;\n    name: string;\n    selected?: boolean;\n  }>;\n  paging: Paging;\n}\n\nexport function searchUsers(parameters: SearchUsersGroupsParameters): Promise<SearchUsersResponse> {\n  return getJSON('/api/qualityprofiles/search_users', parameters).catch(throwGlobalError);\n}\n\nexport interface SearchGroupsResponse {\n  groups: Array<{ name: string }>;\n  paging: Paging;\n}\n\nexport function searchGroups(\n  parameters: SearchUsersGroupsParameters\n): Promise<SearchGroupsResponse> {\n  return getJSON('/api/qualityprofiles/search_groups', parameters).catch(throwGlobalError);\n}\n\nexport interface AddRemoveUserParameters {\n  language: string;\n  login: string;\n  organization?: string;\n  qualityProfile: string;\n}\n\nexport function addUser(parameters: AddRemoveUserParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/add_user', parameters).catch(throwGlobalError);\n}\n\nexport function removeUser(parameters: AddRemoveUserParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/remove_user', parameters).catch(throwGlobalError);\n}\n\nexport interface AddRemoveGroupParameters {\n  group: string;\n  language: string;\n  organization?: string;\n  qualityProfile: string;\n}\n\nexport function addGroup(parameters: AddRemoveGroupParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/add_group', parameters).catch(throwGlobalError);\n}\n\nexport function removeGroup(parameters: AddRemoveGroupParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/remove_group', parameters).catch(throwGlobalError);\n}\n\nexport interface BulkActivateParameters {\n  /* eslint-disable camelcase */\n  activation?: boolean;\n  active_severities?: string;\n  asc?: boolean;\n  available_since?: string;\n  compareToProfile?: string;\n  inheritance?: string;\n  is_template?: string;\n  languages?: string;\n  organization: string | undefined;\n  q?: string;\n  qprofile?: string;\n  repositories?: string;\n  rule_key?: string;\n  s?: string;\n  severities?: string;\n  statuses?: string;\n  tags?: string;\n  targetKey: string;\n  targetSeverity?: string;\n  template_key?: string;\n  types?: string;\n  /* eslint-enable camelcase */\n}\n\nexport function bulkActivateRules(data: BulkActivateParameters) {\n  return postJSON('/api/qualityprofiles/activate_rules', data);\n}\n\nexport function bulkDeactivateRules(data: BulkActivateParameters) {\n  return postJSON('/api/qualityprofiles/deactivate_rules', data);\n}\n\nexport function activateRule(data: {\n  key: string;\n  organization: string | undefined;\n  params?: { [key: string]: string };\n  reset?: boolean;\n  rule: string;\n  severity?: string;\n}) {\n  const params =\n    data.params && map(data.params, (value, key) => `${key}=${csvEscape(value)}`).join(';');\n  return post('/api/qualityprofiles/activate_rule', { ...data, params }).catch(throwGlobalError);\n}\n\nexport function deactivateRule(data: {\n  key: string;\n  organization: string | undefined;\n  rule: string;\n}) {\n  return post('/api/qualityprofiles/deactivate_rule', data).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\n\ninterface Props {\n  className?: string;\n  children: React.ReactNode;\n  property: string;\n}\n\nexport default function FacetBox(props: Props) {\n  return (\n    <div\n      className={classNames('search-navigator-facet-box', props.className)}\n      data-property={props.property}>\n      {props.children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\n\nexport interface Props {\n  active?: boolean;\n  className?: string;\n  disabled?: boolean;\n  halfWidth?: boolean;\n  name: React.ReactNode;\n  onClick: (x: string) => void;\n  stat?: React.ReactNode;\n  value: string;\n}\n\nexport default class FacetItem extends React.PureComponent<Props> {\n  static defaultProps = {\n    disabled: false,\n    halfWidth: false\n  };\n\n  handleClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.onClick(this.props.value);\n  };\n\n  render() {\n    const className = classNames('facet', 'search-navigator-facet', this.props.className, {\n      active: this.props.active,\n      'search-navigator-facet-half': this.props.halfWidth\n    });\n\n    return this.props.disabled ? (\n      <span className={className} data-facet={this.props.value}>\n        <span className=\"facet-name\">{this.props.name}</span>\n        {this.props.stat != null && <span className=\"facet-stat\">{this.props.stat}</span>}\n      </span>\n    ) : (\n      <a className={className} data-facet={this.props.value} href=\"#\" onClick={this.handleClick}>\n        <span className=\"facet-name\">{this.props.name}</span>\n        {this.props.stat != null && <span className=\"facet-stat\">{this.props.stat}</span>}\n      </a>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport OpenCloseIcon from '../icons-components/OpenCloseIcon';\nimport HelpIcon from '../icons-components/HelpIcon';\nimport Tooltip from '../controls/Tooltip';\nimport { Button } from '../ui/buttons';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\n\ninterface Props {\n  helper?: string;\n  name: string;\n  onClear?: () => void;\n  onClick?: () => void;\n  open: boolean;\n  values?: string[];\n}\n\nexport default class FacetHeader extends React.PureComponent<Props> {\n  handleClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.onClick) {\n      this.props.onClick();\n    }\n  };\n\n  renderHelper() {\n    if (!this.props.helper) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={this.props.helper}>\n        <span>\n          <HelpIcon className=\"spacer-left text-info\" />\n        </span>\n      </Tooltip>\n    );\n  }\n\n  renderValueIndicator() {\n    const { values } = this.props;\n    if (this.props.open || !values || !values.length) {\n      return null;\n    }\n    const value =\n      values.length === 1 ? values[0] : translateWithParameters('x_selected', values.length);\n    return (\n      <span className=\"badge badge-secondary is-rounded text-ellipsis\" title={value}>\n        {value}\n      </span>\n    );\n  }\n\n  render() {\n    const showClearButton =\n      this.props.values != null && this.props.values.length > 0 && this.props.onClear != null;\n\n    return (\n      <div className=\"search-navigator-facet-header-wrapper\">\n        {this.props.onClick ? (\n          <span className=\"search-navigator-facet-header\">\n            <a href=\"#\" onClick={this.handleClick}>\n              <OpenCloseIcon className=\"little-spacer-right\" open={this.props.open} />\n              {this.props.name}\n            </a>\n            {this.renderHelper()}\n          </span>\n        ) : (\n          <span className=\"search-navigator-facet-header\">\n            {this.props.name}\n            {this.renderHelper()}\n          </span>\n        )}\n\n        <span className=\"search-navigator-facet-header-value spacer-left spacer-right \">\n          {this.renderValueIndicator()}\n        </span>\n\n        {showClearButton && (\n          <Button\n            className=\"search-navigator-facet-header-button button-small button-red\"\n            onClick={this.props.onClear}>\n            {translate('clear')}\n          </Button>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\n\ninterface Props {\n  children?: React.ReactNode;\n}\n\nexport default function FacetItemsList(props: Props) {\n  return <div className=\"search-navigator-facet-list\">{props.children}</div>;\n}\n"],"sourceRoot":""}