{"version":3,"sources":["webpack:///./src/main/js/components/SourceViewer/helpers/highlight.ts","webpack:///./src/main/js/components/common/LocationIndex.css?e5a0","webpack:///./src/main/js/components/common/LocationIndex.css","webpack:///./src/main/js/components/common/LocationMessage.tsx","webpack:///./src/main/js/components/common/LocationMessage.css?8e38","webpack:///./src/main/js/components/common/LocationMessage.css","webpack:///./src/main/js/components/issue/Issue.css?30c0","webpack:///./src/main/js/components/issue/Issue.css","webpack:///./src/main/js/apps/issues/crossComponentSourceViewer/utils.ts","webpack:///./src/main/js/components/issue/actions.ts","webpack:///./src/main/js/components/common/SelectListItem.tsx","webpack:///./src/main/js/components/common/SelectList.tsx","webpack:///./src/main/js/components/issue/popups/SetAssigneePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueAssign.tsx","webpack:///./src/main/js/components/issue/popups/CommentPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentAction.tsx","webpack:///./src/main/js/components/issue/popups/SetSeverityPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueSeverity.tsx","webpack:///./src/main/js/components/issue/popups/SetIssueTagsPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTags.tsx","webpack:///./src/main/js/components/issue/popups/SetTransitionPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTransition.tsx","webpack:///./src/main/js/components/issue/popups/SetTypePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueType.tsx","webpack:///./src/main/js/components/issue/components/IssueActionsBar.tsx","webpack:///./src/main/js/components/issue/popups/CommentDeletePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentLine.tsx","webpack:///./src/main/js/components/issue/popups/ChangelogPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueChangelog.tsx","webpack:///./src/main/js/components/issue/components/IssueMessage.tsx","webpack:///./src/main/js/components/issue/popups/SimilarIssuesPopup.tsx","webpack:///./src/main/js/components/issue/components/SimilarIssuesFilter.tsx","webpack:///./src/main/js/components/issue/components/IssueTitleBar.tsx","webpack:///./src/main/js/components/issue/IssueView.tsx","webpack:///./src/main/js/components/issue/Issue.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/lines.ts","webpack:///./src/main/js/components/SourceViewer/components/LineIssuesList.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineCode.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineCoverage.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineDuplicationBlock.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineDuplications.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineIssuesIndicator.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineOptionsPopup.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineNumber.tsx","webpack:///./src/main/js/components/SourceViewer/components/SCMPopup.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineSCM.tsx","webpack:///./src/main/js/components/SourceViewer/components/Line.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.css?14cf","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.css","webpack:///./src/main/js/apps/issues/crossComponentSourceViewer/SnippetViewer.tsx","webpack:///./src/main/js/components/SourceViewer/components/Line.css?c4c1","webpack:///./src/main/js/components/SourceViewer/components/Line.css","webpack:///./src/main/js/apps/issues/crossComponentSourceViewer/SnippetViewer.css?6bd4","webpack:///./src/main/js/apps/issues/crossComponentSourceViewer/SnippetViewer.css","webpack:///./src/main/js/apps/security-hotspots/styles.css?87dc","webpack:///./src/main/js/apps/security-hotspots/components/HotspotList.css?b373","webpack:///./src/main/js/apps/security-hotspots/components/HotspotList.css","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeSelection.css?2258","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeSelection.css","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewer.css?a3c3","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewer.css","webpack:///./src/main/js/apps/security-hotspots/components/status/Status.css?e85c","webpack:///./src/main/js/apps/security-hotspots/components/status/Status.css","webpack:///./src/main/js/apps/security-hotspots/styles.css","webpack:///./src/main/js/types/security-hotspots.ts","webpack:///./src/main/js/apps/security-hotspots/components/EmptyHotspotsPage.tsx","webpack:///./src/main/js/apps/security-hotspots/components/FilterBar.tsx","webpack:///./src/main/js/apps/security-hotspots/utils.ts","webpack:///./src/main/js/apps/security-hotspots/components/HotspotListItem.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotCategory.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotList.tsx","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeSelectionRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeSelection.tsx","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/assignee/Assignee.tsx","webpack:///./src/main/js/api/security-hotspots.ts","webpack:///./src/main/js/apps/security-hotspots/components/HotspotCommentPopup.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotReviewHistory.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotReviewHistoryAndComments.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotSnippetContainerRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewerTabs.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotSnippetContainer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/status/StatusDescription.tsx","webpack:///./src/main/js/apps/security-hotspots/components/status/StatusSelectionRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/status/StatusSelection.tsx","webpack:///./src/main/js/apps/security-hotspots/components/status/Status.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewerRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewer.tsx","webpack:///./src/main/js/apps/security-hotspots/SecurityHotspotsAppRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/SecurityHotspotsApp.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./src/main/js/components/intl/DateTimeFormatter.tsx","webpack:///./src/main/js/components/intl/DateFormatter.tsx","webpack:///./src/main/js/app/components/a11y/A11ySkipTarget.tsx","webpack:///./src/main/js/components/intl/DateFromNow.tsx","webpack:///./src/main/js/components/shared/SeverityHelper.tsx","webpack:///./src/main/js/types/component.ts","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./src/main/js/components/tags/TagsList.css?aed4","webpack:///./src/main/js/helpers/periods.ts","webpack:///./src/main/js/app/utils/addGlobalSuccessMessage.ts","webpack:///./src/main/js/components/tags/TagsList.tsx","webpack:///./src/main/js/components/common/ScreenPositionHelper.tsx","webpack:///./src/main/js/components/common/MultiSelectOption.tsx","webpack:///./src/main/js/components/common/MultiSelect.tsx","webpack:///./src/main/js/components/common/MarkdownTips.tsx","webpack:///./src/main/js/components/tags/TagsList.css","webpack:///./src/main/js/components/tags/TagsSelector.tsx","webpack:///./src/main/js/components/ui/CoverageRating.tsx","webpack:///./src/main/js/api/favorites.ts","webpack:///./src/main/js/components/controls/Favorite.tsx","webpack:///./src/main/js/components/common/LocationIndex.tsx","webpack:///./src/main/js/components/shared/StatusHelper.tsx","webpack:///./src/main/js/helpers/security-standard.ts","webpack:///./src/main/js/components/SourceViewer/helpers/indexing.ts","webpack:///./src/main/js/components/issue/components/IssueChangelogDiff.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/issueLocations.ts","webpack:///./src/main/js/components/SourceViewer/SourceViewerContext.tsx"],"names":["ISSUE_LOCATION_CLASS","splitByTokens","code","rootClassName","container","document","createElement","tokens","innerHTML","forEach","call","childNodes","node","nodeType","fullClassName","className","innerTokens","concat","nodeValue","push","markers","text","highlightSymbol","symbol","symbolRegExp","RegExp","map","token","test","__assign","part","str","from","to","acc","substr","highlightIssueLocations","issueLocations","location","nextTokens","markerAdded","line","startLine","s1","e1","s2","e2","x","length","Math","max","min","p1","p2","p3","newClassName","indexOf","index","lodash_uniq__WEBPACK_IMPORTED_MODULE_0___default","__spreadArrays","slice","content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","d","__webpack_exports__","LocationMessage","classnames__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","props","selected","children","LINES_ABOVE","LINES_BELOW","MERGE_DISTANCE","LINES_BELOW_ISSUE","EXPAND_BY_LINES","collision","_a","_b","startA","endA","startB","getPrimaryLocation","issue","component","textRange","endLine","endOffset","startOffset","createSnippets","params","locations","addIssueLocation","reduce","snippets","loc","firstCollision","startIndex","endIndex","locationEnd","issueEndLine","addLinesBellow","filter","snippet","start","end","keep","linesForSnippets","componentLines","lines","groupLocationsByComponent","components","currentGroup","currentComponent","groups","key","measures","path","project","projectName","q","uuid","sources","expandSnippet","direction","snippetIndex","snippetToExpand","find","s","Error","toDelete","inSnippet","actions_updateIssue","onChange","resultPromise","oldIssue","newIssue","optimisticUpdate","then","response","Object","helpers_issues","users","rules","_super","SelectListItem","_this","apply","this","arguments","handleSelect","event","preventDefault","onSelect","item","handleHover","onHover","__extends","prototype","renderLink","index_js_exposed","classnames_default","active","href","onClick","onFocus","onMouseOver","render","Tooltip_default","a","overlay","title","placement","SelectList","attachShortcuts","previousKeyScope","keymaster","previousFilter","currentKeyScope","uniqueId_default","tagName","target","srcElement","isInput","includes","keyCode","setState","selectNextElement","selectPreviousElement","state","detachShortcuts","idx","items","renderChild","child","type","common_SelectListItem","currentItem","SelectList_extends","componentDidMount","componentDidUpdate","prevProps","componentWillUnmount","hasChildren","count","LIST_SIZE","SetAssigneePopup_SetAssigneePopup","SetAssigneePopup","searchMembers","query","organizations","organization","projectOrganization","ps","handleSearchResult","searchUsers","api_users","activeUsers","helpers_users","currentUser","login","handleSearchChange","defaultUsersArray","system","name","l10n","SetAssigneePopup_extends","Dropdown","noPadding","SearchBox_default","autoFocus","minLength","placeholder","value","common_SelectList","map_default","user","Avatar","hash","avatar","size","style","marginLeft","popups_SetAssigneePopup","withCurrentUser","IssueAssign","toggleAssign","open","togglePopup","handleClose","IssueAssign_extends","renderAssignee","assigneeName","assignee","assigneeAvatar","assigneeActive","canAssign","Toggler_default","closeOnEscape","onRequestClose","isOpen","onAssign","buttons","DropdownIcon_default","CommentPopup","handleCommentChange","textComment","handleCommentClick","trim","onComment","handleCancelClick","toggleComment","handleKeyboard","metaKey","ctrlKey","stopPropagation","comment","markdown","CommentPopup_extends","autoTriggered","onKeyDown","rows","disabled","MarkdownTips","IssueCommentAction","addComment","issues","issueKey","IssueCommentAction_extends","closeOnClickOutside","currentPopup","popups_CommentPopup","commentAutoTriggered","commentPlaceholder","SEVERITY","SetSeverityPopup","severity","SeverityIcon_default","IssueSeverity","toggleSetSeverity","setSeverity","setIssueProperty","IssueSeverity_extends","canSetSeverity","SeverityHelper","SetIssueTagsPopup_LIST_SIZE","SetIssueTagsPopup","mounted","searchResult","onSearch","selectedTags","tags","tag","setTags","SetIssueTagsPopup_spreadArrays","onUnselect","without_default","SetIssueTagsPopup_extends","availableTags","difference_default","popups","BottomRight","TagsSelector","listSize","IssueTags","toggleSetTags","join","IssueTags_extends","canSetTags","popups_SetIssueTagsPopup","TagsList","allowUpdate","SetTransitionPopup","fromHotspot","transitions","isManualVulnerability","transition","translateTransition","description","IssueTransition","setTransition","toggleSetTransition","IssueTransition_extends","hasTransitions","StatusHelper","resolution","status","TYPES","SetTypePopup","IssueTypeIcon_default","IssueType","toggleSetType","setType","IssueType_extends","canSetType","fill","theme","baseFontColor","IssueActionsBar","property","popup","apiCall","IssueActionsBar_assign","handleTransition","IssueActionsBar_extends","actions","canComment","isSecurityHotspot","components_IssueType","components_IssueSeverity","components_IssueTransition","components_IssueAssign","effort","components_IssueCommentAction","components_IssueTags","CommentDeletePopup","onDelete","IssueCommentLine","openPopup","handleEdit","onEdit","toggleEditPopup","handleDelete","toggleDeletePopup","popupName","force","prevState","closePopups","IssueCommentLine_extends","author","authorName","displayName","authorActive","authorAvatar","dangerouslySetInnerHTML","__html","purify","htmlText","DateFromNow","date","createdAt","updatable","ChangelogPopup","changelog","ChangelogPopup_extends","loadChangelog","DateTimeFormatter","creationDate","userName","isUserActive","diffs","diff","IssueChangelogDiff","IssueChangelog","toggleChangelog","handleClick","IssueChangelog_extends","popups_ChangelogPopup","mouseEnterDelay","IssueMessage","engine","manualVulnerability","message","ruleKey","aria-label","onOpenRule","SimilarIssuesPopup","onFilter","SimilarIssuesPopup_extends","SimilarIssuesPopup_spreadArrays","subProject","ruleName","TagsIcon_default","QualifierIcon_default","qualifier","subProjectName","componentQualifier","componentLongName","SimilarIssuesFilter","handleFilter","SimilarIssuesFilter_extends","popups_SimilarIssuesPopup","FilterIcon_default","IssueTitleBar","hasSimilarIssuesFilter","locationsCount","secondaryLocations","flows","sum","locationsBadge","LocationIndex","displayLocations","displayLocationsCount","issueUrl","urls","IssueTitleBar_assign","branch_like","branchLike","types","context","Consumer","openRule","externalRuleEngine","rule","components_IssueChangelog","displayLocationsLink","es","LinkIcon_default","components_SimilarIssuesFilter","IssueView","handleCheck","onCheck","isClickable","toUpperCase","parentElement","editComment","deleteComment","IssueView_extends","hasCheckbox","issueClass","hotspot","issue-with-checkbox","data-issue","role","tabIndex","components_IssueActionsBar","comments","components_IssueCommentLine","Checkbox_default","checked","Issue_Issue","Issue","onPopupToggle","handleAssignement","Issue_extends","bindShortcuts","componentWillUpdate","nextProps","unbindShortcuts","issue_IssueView","defaultProps","SourceViewerHeaderSlim","expandable","linkToProject","loading","onExpand","sourceViewerFile","projectNameLabel","sonar_ui_common_components_icons_QualifierIcon__WEBPACK_IMPORTED_MODULE_6___default","_types_component__WEBPACK_IMPORTED_MODULE_13__","Project","sonar_ui_common_helpers_urls__WEBPACK_IMPORTED_MODULE_10__","_helpers_urls__WEBPACK_IMPORTED_MODULE_12__","SubProject","sonar_ui_common_helpers_path__WEBPACK_IMPORTED_MODULE_9__","sonar_ui_common_components_controls_clipboard__WEBPACK_IMPORTED_MODULE_4__","copyValue","canMarkAsFavorite","_helpers_branch_like__WEBPACK_IMPORTED_MODULE_11__","_controls_Favorite__WEBPACK_IMPORTED_MODULE_14__","favorite","fav","little-spacer-right","react_router__WEBPACK_IMPORTED_MODULE_2__","fileUuids","resolved","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_8__","sonar_ui_common_components_ui_DeferredSpinner__WEBPACK_IMPORTED_MODULE_7___default","sonar_ui_common_components_controls_buttons__WEBPACK_IMPORTED_MODULE_3__","sonar_ui_common_components_icons_ExpandSnippetIcon__WEBPACK_IMPORTED_MODULE_5___default","optimizeHighlightedSymbols","symbolsForLine","highlightedSymbols","symbols","lodash_intersection__WEBPACK_IMPORTED_MODULE_0___default","optimizeLocationMessage","highlightedLocationMessage","optimizedSecondaryIssueLocations","some","optimizeSelectedIssue","selectedIssue","issuesForLine","LineIssuesList","issuePopup","displayIssueLocationsCount","displayIssueLocationsLink","onIssueChange","onIssueClick","onIssuePopupToggle","LineCode","handleSymbolClick","keys","currentTarget","match","onSymbolClick","highlight","attachEvents","activeMarkerNode","scroll","componentWillReceiveProps","detachEvents","codeNode","querySelectorAll","addEventListener","renderMarker","leading","onLocationSelect","ref","onIssueSelect","padding","secondaryIssueLocations","showIssues","classnames","has-issues","renderedTokens","leadingMarker","displayLocationMarkers","marker","paddingBottom","filteredSelectedIssues","data-line-number","LineCoverage","coverageStatus","getStatusTooltip","conditions","coveredConditions","LineDuplicationBlock","blur","handleTogglePopup","closePopup","LineDuplicationBlock_extends","duplicated","popupOpen","source-line-duplicated","data-index","renderDuplicationPopup","LineDuplications","LineDuplications_extends","cell","LineIssuesIndicator","LineIssuesIndicator_extends","hasIssues","source-line-with-issues","mostImportantIssue","IssueIcon_default","LineOptionsPopup","SourceViewerContext","file","RightTop","rel","LineNumber","LineNumber_extends","lineNumber","SCMPopup","hasAuthor","scmAuthor","scmDate","spacer-top","DateFormatter","scmRevision","LineSCM","LineSCM_extends","previousLine","hasPopup","p","changed","isSCMChanged","data-author","Line_Line","Line","isPopupOpen","linePopup","handleIssuesIndicatorClick","openIssues","onIssuesClose","onIssueUnselect","onIssuesOpen","Line_extends","displayCoverage","displaySCM","duplications","duplicationsCount","source-line-highlighted","highlighted","source-line-filtered","isNew","source-line-filtered-dark","source-line-last","last","bottomPadding","verticalBuffer","components_LineNumber","onLinePopupToggle","components_LineSCM","displayIssues","displayAllIssues","components_LineIssuesIndicator","displayDuplications","components_LineDuplications","loadDuplications","times_default","components_LineDuplicationBlock","components_LineCode","SCROLL_LEFT_OFFSET","SnippetViewer","doScroll","element","parent","snippetNodeRef","current","sonar_ui_common_helpers_scrolling__WEBPACK_IMPORTED_MODULE_4__","leftOffset","rightOffset","getBoundingClientRect","width","scrollToLastExpandedRow","snippetNode","lastRow","expandBlock","renderLine","_components_SourceViewer_helpers_issueLocations__WEBPACK_IMPORTED_MODULE_7__","duplicationsByLine","lineDuplications","isSinkLine","_components_SourceViewer_components_Line__WEBPACK_IMPORTED_MODULE_5__","_components_SourceViewer_helpers_lines__WEBPACK_IMPORTED_MODULE_8__","handleCloseIssues","handleOpenIssues","handleLinePopupToggle","openIssuesByLine","issuesByLine","locationsByLine","lastLine","parseInt","_components_SourceViewer_helpers_indexing__WEBPACK_IMPORTED_MODULE_6__","bottomLine","issueLine","lowestVisibleIssue","k","l","_utils__WEBPACK_IMPORTED_MODULE_10__","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_3__","sonar_ui_common_components_icons_ExpandSnippetIcon__WEBPACK_IMPORTED_MODULE_2___default","classnames__WEBPACK_IMPORTED_MODULE_0___default","expand-up","expand-down","RiskExposure","HotspotStatus","HotspotResolution","HotspotStatusFilter","HotspotStatusOption","ReviewHistoryType","EmptyHotspotsPage","translationRoot","filtered","isStaticListOfHotspots","alt","height","src","pathname","AssigneeFilterOption","statusOptions","TO_REVIEW","label","FIXED","SAFE","periodOptions","assigneeFilterOptions","ME","ALL","components_FilterBar","filters","hotspotsReviewedMeasure","loadingMeasure","onBranch","isProject","types_component","id","onShowAllHotspots","RadioToggle_default","onChangeFilters","assignedToMe","Select_default","clearable","option","searchable","sinceLeakPeriod","HelpTooltip_default","DeferredSpinner_default","CoverageRating","Measure","metricKey","metricType","RISK_EXPOSURE_LEVELS","HIGH","MEDIUM","LOW","groupByCategory","hotspots","securityCategories","groupBy_default","h","securityCategory","getCategoryTitle","STATUS_AND_RESOLUTION_TO_STATUS_OPTION","utils_a","REVIEWED","getStatusOptionFromStatusAndResolution","STATUS_OPTION_TO_STATUS_AND_RESOLUTION_MAP","utils_b","HotspotListItem","HotspotCategory","categoryKey","expanded","selectedHotspot","risk","vulnerabilityProbability","contains-selected-hotspot","onToggleExpand","ChevronUpIcon_default","ChevronDownIcon_default","onHotspotClick","HotspotList","groupHotspots","risks","categories","handleToggleCategory","expandedCategories","HotspotList_assign","groupedHotspots","hotspotsTotal","loadingMore","statusFilter","SecurityHotspotIcon_default","riskGroup","cat","ListFooter_default","loadMore","onLoadMore","total","AssigneeSelectionRenderer","suggestedUsers","BottomLeft","suggestion","AssigneeSelection","handleSearch","handleNoSearch","handleActualSearch","allowCurrentUserSelection","loggedInUser","result","catch","handleKeyDown","keycodes","Enter","selectHighlighted","UpArrow","highlightPrevious","DownArrow","highlightNext","getCurrentIndex","findIndex","highlightIndex","debounce_default","AssigneeSelection_extends","AssigneeRenderer","canEdit","editing","onEnterEditionMode","EscKeydownHandler_default","onKeydown","onExitEditionMode","OutsideClickHandler_default","onClickOutside","components_assignee_AssigneeSelection","_c","Assignee_Assignee","Assignee","handleEnterEditionMode","handleExitEditionMode","handleAssign","newAssignee","hotspotKey","data","request","throwGlobalError","onAssigneeChange","addGlobalSuccessMessage","Assignee_extends","assigneeUser","assignee_Assignee","HotspotCommentPopup","markdownComment","setComment","onCommentEditSubmit","onCancelEdit","HotspotReviewHistory","reviewHistory","history","Creation","utils_assign","authorUser","log","Diff","Comment","html","sortBy_default","elt","getHotspotReviewHistory","editedCommentKey","setEditedCommentKey","historyElt","historyIndex","bordered-top","diffIndex","onEditComment","Dropdown_default","onOpen","onDeleteComment","overlayPlacement","HotspotReviewHistoryAndComments","handleCloseComment","onCloseComment","handleSubmitComment","onCommentUpdate","handleDeleteComment","commentKey","handleEditComment","editSecurityHotspotComment","HotspotReviewHistoryAndComments_extends","commentTextRef","commentVisible","invisible","onOpenComment","noop","HotspotSnippetContainerRenderer","sourceLines","Provider","_i","onExpandBlock","TabKeys","HotspotSnippetContainer","handleExpansion","range","HotspotSnippetContainer_assign","additionalLines","concatSourceLines","checkLastLine","samePopup","HotspotSnippetContainer_extends","componentWillMount","fetchSources","lastLineReceived","indexing","toString","constructSourceViewerFile","HotspotViewerTabs","handleSelectTabs","tabKey","currentTab","tabs","tab","computeTabs","HotspotViewerTabs_extends","RiskDescription","riskDescription","VulnerabilityDescription","vulnerabilityDescription","FixRecommendation","fixRecommendations","Boolean","BoxedTabs_default","StatusDescription","statusOption","showTitle","StatusSelectionRenderer","selectedStatus","submitDisabled","renderOption","Radio_default","onStatusChange","htmlFor","onCommentChange","onSubmit","StatusSelection","handleStatusChange","handleSubmit","initialStatus","StatusSelection_assign","onStatusOptionChange","StatusSelection_extends","status_Status","setIsOpen","readonly","canChangeStatus","trigger","aria-expanded","aria-haspopup","actionableTrigger","Bottom","status_StatusSelection","components_HotspotViewerRenderer","parentScrollRef","permalink","helpers_urls","HotspotViewerRenderer_assign","clipboard","onUpdateHotspot","components_HotspotSnippetContainer","components_HotspotViewerTabs","components_HotspotReviewHistoryAndComments","HotspotViewer","fetchHotspot","securityHotspotKey","__rest","u","c","handleHotspotUpdate","handleOpenComment","focus","preventScroll","scrolling","bottomOffset","HotspotViewer_extends","SecurityHotspotsAppRenderer","ScreenPositionHelper","top","Suggestions","suggestions","index_module","A11ySkipTarget","anchor","security_hotspots_components_HotspotList","security_hotspots_components_HotspotViewer","SecurityHotspotsApp_SecurityHotspotsApp","SecurityHotspotsApp","handleCallFailure","fetchSecurityHotspotsReviewed","reviewedHotspotsMetricKey","api_measures","SecurityHotspotsApp_assign","metricKeys","measure","utils","reloadSecurityHotspotList","fetchSecurityHotspots","paging","hotspotsPageIndex","handleChangeFilters","changes","handleHotspotClick","Promise","all","range_default","hotspotPages","allHotspots","flatMap_default","nextHotspot","pageIndex","handleShowAllHotspots","router","handleLoadMore","additionalHotspots","constructFiltersFromProps","SecurityHotspotsApp_extends","pages","fetchInitialData","previous","security_standard","sonarsourceSecurity","page","hotspotKeys","split","getSecurityHotspotList","projectKey","onlyMine","react__WEBPACK_IMPORTED_MODULE_0__","_SuggestionsContext__WEBPACK_IMPORTED_MODULE_1__","addSuggestions","removeSuggestions","SuggestionsInner","formatterOption","year","month","day","hour","minute","react_intl__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_helpers_dates__WEBPACK_IMPORTED_MODULE_2__","longFormatterOption","long","_A11yContext__WEBPACK_IMPORTED_MODULE_2__","addA11ySkipLink","removeA11ySkipLink","A11ySkipTargetInner","getLink","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_1__","weight","sonar_ui_common_components_icons_SeverityIcon__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_icons_SeverityIcon__WEBPACK_IMPORTED_MODULE_1___default","n","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_2__","ComponentQualifier","KNOWN_RATINGS","enhanceMeasure","metrics","metric","leak","getLeakValue","periods","period","_helpers_periods__WEBPACK_IMPORTED_MODULE_1__","getRatingTooltip","finalMetricKey","_helpers_measures__WEBPACK_IMPORTED_MODULE_0__","sonar_ui_common_components_controls_Tooltip__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_controls_Tooltip__WEBPACK_IMPORTED_MODULE_1___default","sonar_ui_common_components_ui_Level__WEBPACK_IMPORTED_MODULE_2__","sonar_ui_common_components_ui_Level__WEBPACK_IMPORTED_MODULE_2___default","sonar_ui_common_components_ui_Rating__WEBPACK_IMPORTED_MODULE_3__","sonar_ui_common_components_ui_Rating__WEBPACK_IMPORTED_MODULE_3___default","sonar_ui_common_helpers_measures__WEBPACK_IMPORTED_MODULE_4__","_utils__WEBPACK_IMPORTED_MODULE_5__","decimals","small","level","formattedValue","tooltip","Number","rating","getLeakPeriod","getPeriodLabel","getPeriodDate","isApplicationPeriod","sonar_ui_common_helpers_dates__WEBPACK_IMPORTED_MODULE_0__","Array","isArray","getPeriod","dateFormatter","parameter","modeParam","mode","toLowerCase","_store_globalMessages__WEBPACK_IMPORTED_MODULE_0__","_getStore__WEBPACK_IMPORTED_MODULE_1__","dispatch","sonar_ui_common_components_icons_DropdownIcon__WEBPACK_IMPORTED_MODULE_2__","sonar_ui_common_components_icons_DropdownIcon__WEBPACK_IMPORTED_MODULE_2___default","sonar_ui_common_components_icons_TagsIcon__WEBPACK_IMPORTED_MODULE_3__","sonar_ui_common_components_icons_TagsIcon__WEBPACK_IMPORTED_MODULE_3___default","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_4__","aria-hidden","getPosition","containerPos","window","pageYOffset","left","pageXOffset","debouncedOnResize","lodash_debounce__WEBPACK_IMPORTED_MODULE_0___default","forceUpdate","removeEventListener","MultiSelectOption","custom","renderLabel","onSelectChange","MultiSelect_MultiSelect","MultiSelect","handleSelectChange","onSelectItem","onUnselectItem","onSearchQuery","validateSearchInput","handleElementHover","activeIdx","getAllElements","evt","toggleSelect","stopLoading","isNewElement","elem","selectedElements","elements","updateSelectedElements","filterSelected","updateUnselectedElements","unselectedElements","setElementActive","allElements","totalElements","searchInput","allowSelection","allowNewElements","_d","footerNode","_e","activeElement","showNewElement","infiniteList","listClasses","menu-vertically-limited","with-top-separator","with-bottom-separator","div","_helpers_urls__WEBPACK_IMPORTED_MODULE_3__","_common_MultiSelect__WEBPACK_IMPORTED_MODULE_2__","validateTag","replace","sonar_ui_common_components_lazyLoadComponent__WEBPACK_IMPORTED_MODULE_1__","_app_theme__WEBPACK_IMPORTED_MODULE_2__","DonutChart","e","t","bind","SIZE_TO_WIDTH_MAPPING","normal","big","huge","SIZE_TO_THICKNESS_MAPPING","muted","padAngle","numberValue","gray71","green","barBackgroundColor","lineCoverageRed","thickness","addFavorite","removeFavorite","Favorite_Favorite","Favorite","toggleFavorite","newFavorite","handleFavorite","_prevProps","FavoriteButton_default","other","clickAttributes","is-leading","sonar_ui_common_components_icons_StatusIcon__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_icons_StatusIcon__WEBPACK_IMPORTED_MODULE_1___default","getStandards","default","renderCWECategory","standards","category","record","cwe","renderOwaspTop10Category","withPrefix","owaspTop10","addPrefix","renderSansTop25Category","sansTop25","renderSonarSourceSecurityCategory","prefix","issuesByComponentAndLine","mapping","_issueLocations__WEBPACK_IMPORTED_MODULE_2__","duplicationIndex","blocks","block","_ref","symbolsByLine","_highlight__WEBPACK_IMPORTED_MODULE_1__","lodash_flatten__WEBPACK_IMPORTED_MODULE_0___default","sonar_ui_common_helpers_measures__WEBPACK_IMPORTED_MODULE_2__","oldValue","newValue","getLinearLocations","getSecondaryIssueLocationsForLine","highlightedLocations","linearLocations","msg"],"mappings":"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","file":"js/283.1582644816097.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniq } from 'lodash';\n\nexport interface Token {\n  className: string;\n  markers: number[];\n  text: string;\n}\n\nconst ISSUE_LOCATION_CLASS = 'source-line-code-issue';\n\nexport function splitByTokens(code: string, rootClassName = ''): Token[] {\n  const container = document.createElement('div');\n  let tokens: Token[] = [];\n  container.innerHTML = code;\n  [].forEach.call(container.childNodes, (node: Element) => {\n    if (node.nodeType === 1) {\n      // ELEMENT NODE\n      const fullClassName = rootClassName ? rootClassName + ' ' + node.className : node.className;\n      const innerTokens = splitByTokens(node.innerHTML, fullClassName);\n      tokens = tokens.concat(innerTokens);\n    }\n    if (node.nodeType === 3 && node.nodeValue) {\n      // TEXT NODE\n      tokens.push({ className: rootClassName, markers: [], text: node.nodeValue });\n    }\n  });\n  return tokens;\n}\n\nexport function highlightSymbol(tokens: Token[], symbol: string): Token[] {\n  const symbolRegExp = new RegExp(`\\\\b${symbol}\\\\b`);\n  return tokens.map(token =>\n    symbolRegExp.test(token.className)\n      ? { ...token, className: `${token.className} highlighted` }\n      : token\n  );\n}\n\n/**\n * Intersect two ranges\n * @param s1 Start position of the first range\n * @param e1 End position of the first range\n * @param s2 Start position of the second range\n * @param e2 End position of the second range\n */\nfunction intersect(s1: number, e1: number, s2: number, e2: number) {\n  return { from: Math.max(s1, s2), to: Math.min(e1, e2) };\n}\n\n/**\n * Get the substring of a string\n * @param str A string\n * @param from \"From\" offset\n * @param to \"To\" offset\n * @param acc Global offset to eliminate\n */\nfunction part(str: string, from: number, to: number, acc: number): string {\n  // we do not want negative number as the first argument of `substr`\n  return from >= acc ? str.substr(from - acc, to - from) : str.substr(0, to - from);\n}\n\n/**\n * Highlight issue locations in the list of tokens\n */\nexport function highlightIssueLocations(\n  tokens: Token[],\n  issueLocations: T.LinearIssueLocation[],\n  rootClassName: string = ISSUE_LOCATION_CLASS\n): Token[] {\n  issueLocations.forEach(location => {\n    const nextTokens: Token[] = [];\n    let acc = 0;\n    let markerAdded = location.line !== location.startLine;\n    tokens.forEach(token => {\n      const x = intersect(acc, acc + token.text.length, location.from, location.to);\n      const p1 = part(token.text, acc, x.from, acc);\n      const p2 = part(token.text, x.from, x.to, acc);\n      const p3 = part(token.text, x.to, acc + token.text.length, acc);\n      if (p1.length) {\n        nextTokens.push({ ...token, text: p1 });\n      }\n      if (p2.length) {\n        const newClassName =\n          token.className.indexOf(rootClassName) === -1\n            ? `${token.className} ${rootClassName}`\n            : token.className;\n        nextTokens.push({\n          className: newClassName,\n          markers:\n            !markerAdded && location.index != null\n              ? uniq([...token.markers, location.index])\n              : token.markers,\n          text: p2\n        });\n        markerAdded = true;\n      }\n      if (p3.length) {\n        nextTokens.push({ ...token, text: p3 });\n      }\n      acc += token.text.length;\n    });\n    tokens = nextTokens.slice();\n  });\n  return tokens;\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".location-index{position:relative;display:inline-block;vertical-align:top;line-height:16px;padding-left:6px;padding-right:6px;border-radius:2px;background-color:#d18582;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;transition:background-color .3s ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.location-index.selected{background-color:#a4030f}.location-index.muted{background-color:#cdcdcd}.location-index.is-leading:first-child{margin-left:0}.location-index.is-leading:not(:first-child){margin-left:-22px}.location-index[tabindex]{cursor:pointer}.location-index[tabindex]:hover,a:hover>.location-index{background-color:#a4030f}.location-index[tabindex]:focus{outline:none}.source-line-code-inner .location-index{line-height:16px;margin:1px 4px}.source-line-code-inner .location-index+.location-index{margin-left:0}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './LocationMessage.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  selected: boolean;\n}\n\nexport default function LocationMessage(props: Props) {\n  return (\n    <div className={classNames('location-message', { selected: props.selected })}>\n      {props.children}\n    </div>\n  );\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".location-message{display:inline-block;vertical-align:top;line-height:16px;padding:0 6px;border-radius:2px;background-color:#9e9e9e;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;text-overflow:ellipsis;overflow:hidden;transition:background-color .3s ease}.location-message.selected{background-color:#475760}.location-index+.location-message{margin-left:4px}.location-index>.location-message{display:none;position:absolute;bottom:calc(100% + 4px);left:0}.location-index:hover>.location-message{display:block}.location-index>.location-message:after{position:absolute;bottom:-5px;left:4px;width:0;height:0;border-top:5px solid #475760;border-left:5px solid transparent;border-right:5px solid transparent;content:\\\"\\\"}.source-line-code .location-message{padding-top:2px;padding-bottom:2px}\", \"\"]);\n\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".issue{position:relative;padding-top:8px;padding-bottom:8px;background-color:#f2dede;transition:all .3s ease,border 0s ease}.issue.hotspot{background-color:#eeeff4}.issue.selected{box-shadow:none;outline:none;border:2px solid #4b9fd5!important}.issue+.issue,.issue-container+.issue-container{margin-top:5px}.issue.selected+.issue{border-top-color:transparent}.issue-row{display:flex;margin-bottom:5px}.issue-row-meta{flex-grow:0;padding-right:5px;white-space:nowrap}.issue-message{flex-grow:1;padding-left:8px;padding-right:8px;line-height:18px;font-size:13px;font-weight:600;text-overflow:ellipsis}.issue-actions{justify-content:space-between;flex-wrap:wrap;padding-left:8px}.issue-actions,.issue-meta-list{display:flex;align-items:center}.issue-meta{line-height:16px;font-size:12px}.issue-meta+.issue-meta{margin-left:8px}.issue-meta-label{display:inline-block;vertical-align:top;max-width:180px;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.issue-see-rule{border-bottom:none;font-size:12px}.issue-changelog{width:450px;max-height:320px;overflow:auto;white-space:normal}.issue-comments{margin-top:5px;padding-left:8px;font-size:12px}.issue-comment{display:flex}.issue-comment+.issue-comment{margin-top:4px}.issue-comment-author{max-width:130px;font-weight:600;overflow:hidden;text-overflow:ellipsis}.issue-comment-age,.issue-comment-author{flex-shrink:0;line-height:18px;color:#777;white-space:nowrap}.issue-comment-text{flex:1;min-width:0;margin-left:5px;margin-right:5px;line-height:18px;line-height:1.5;overflow:hidden;outline:none;word-break:break-all}.issue-comment-text.markdown pre{float:none;height:auto;margin:0;padding:8px;background-color:#e6e6e6;border:none;border-radius:3px}.issue-comment-text.markdown br~pre{margin-top:8px}.issue-comment-actions{flex-shrink:0;padding-left:5px;line-height:18px;white-space:nowrap}.issue-comment-bubble-popup{width:440px;font-size:12px}.issue-comment-form-text textarea{width:100%;max-width:100%}.issue-comment-form-footer{margin-top:5px;line-height:22px}.issue-comment-form-footer:after,.issue-comment-form-footer:before{display:table;content:\\\"\\\";line-height:0}.issue-comment-form-footer:after{clear:both}.issue-comment-form-actions{float:right}.issue-comment-form-tips{float:left}.issue-with-checkbox{padding-left:24px}.issue-with-checkbox .issue-checkbox-container{display:flex;justify-content:center;align-items:center}.issue-checkbox-container{display:none;position:absolute;width:28px;top:0;bottom:0;left:0;border:none}.issue-checkbox-container:hover{background-color:rgba(0,0,0,.05)}.issue:not(.selected) .location-index{background-color:#999}.issue .menu:not(.issues-similar-issues-menu):not(.issue-changelog){max-height:120px;overflow:auto}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nconst LINES_ABOVE = 5;\nconst LINES_BELOW = 5;\nexport const MERGE_DISTANCE = 11; // Merge if snippets are eleven lines away (separated by 10 lines) or fewer\nexport const LINES_BELOW_ISSUE = 9;\nexport const EXPAND_BY_LINES = 50;\n\nfunction unknownComponent(key: string): T.SnippetsByComponent {\n  return {\n    component: {\n      key,\n      measures: {},\n      path: '',\n      project: '',\n      projectName: '',\n      q: 'FIL',\n      uuid: ''\n    },\n    sources: []\n  };\n}\n\nfunction collision([startA, endA]: number[], [startB, endB]: number[]) {\n  return !(startA > endB + MERGE_DISTANCE || endA < startB - MERGE_DISTANCE);\n}\n\nfunction getPrimaryLocation(issue: T.Issue): T.FlowLocation {\n  return {\n    component: issue.component,\n    textRange: issue.textRange || {\n      endLine: 0,\n      endOffset: 0,\n      startLine: 0,\n      startOffset: 0\n    }\n  };\n}\n\nfunction addLinesBellow(params: { issue: T.Issue; locationEnd: number }) {\n  const { issue, locationEnd } = params;\n  const issueEndLine = (issue.textRange && issue.textRange.endLine) || 0;\n\n  if (!issueEndLine || issueEndLine === locationEnd) {\n    return locationEnd + LINES_BELOW_ISSUE;\n  }\n\n  return locationEnd + LINES_BELOW;\n}\n\nexport function createSnippets(params: {\n  locations: T.FlowLocation[];\n  issue: T.Issue;\n  addIssueLocation: boolean;\n}): T.Snippet[] {\n  const { locations, issue, addIssueLocation } = params;\n  // For each location's range (2 above and 2 below), and then compare with other ranges\n  // to merge snippets that collide.\n  return (addIssueLocation ? [getPrimaryLocation(issue), ...locations] : locations).reduce(\n    (snippets: T.Snippet[], loc, index) => {\n      const startIndex = Math.max(1, loc.textRange.startLine - LINES_ABOVE);\n      const endIndex = addLinesBellow({ issue, locationEnd: loc.textRange.endLine });\n\n      let firstCollision: { start: number; end: number } | undefined;\n\n      // Remove ranges that collide into the first collision\n      snippets = snippets.filter(snippet => {\n        if (collision([snippet.start, snippet.end], [startIndex, endIndex])) {\n          let keep = false;\n          // Check if we've already collided\n          if (!firstCollision) {\n            firstCollision = snippet;\n            keep = true;\n          }\n          // Merge with first collision:\n          firstCollision.start = Math.min(startIndex, snippet.start, firstCollision.start);\n          firstCollision.end = Math.max(endIndex, snippet.end, firstCollision.end);\n\n          // remove the range if it was not the first collision\n          return keep;\n        }\n        return true;\n      });\n\n      if (firstCollision === undefined) {\n        snippets.push({\n          start: startIndex,\n          end: endIndex,\n          index\n        });\n      }\n\n      return snippets;\n    },\n    []\n  );\n}\n\nexport function linesForSnippets(snippets: T.Snippet[], componentLines: T.LineMap) {\n  return snippets\n    .map(snippet => {\n      const lines = [];\n      for (let i = snippet.start; i <= snippet.end; i++) {\n        if (componentLines[i]) {\n          lines.push(componentLines[i]);\n        }\n      }\n      return lines;\n    })\n    .filter(snippet => snippet.length > 0);\n}\n\nexport function groupLocationsByComponent(\n  locations: T.FlowLocation[],\n  components: { [key: string]: T.SnippetsByComponent }\n) {\n  let currentComponent = '';\n  let currentGroup: T.SnippetGroup;\n  const groups: T.SnippetGroup[] = [];\n\n  locations.forEach((loc, index) => {\n    if (loc.component !== currentComponent) {\n      currentGroup = {\n        ...(components[loc.component] || unknownComponent(loc.component)),\n        locations: []\n      };\n      groups.push(currentGroup);\n      currentComponent = loc.component;\n    }\n    loc.index = index;\n    currentGroup.locations.push(loc);\n  });\n\n  return groups;\n}\n\nexport function expandSnippet({\n  direction,\n  snippetIndex,\n  snippets\n}: {\n  direction: T.ExpandDirection;\n  snippetIndex: number;\n  snippets: T.Snippet[];\n}) {\n  const snippetToExpand = snippets.find(s => s.index === snippetIndex);\n  if (!snippetToExpand) {\n    throw new Error(`Snippet ${snippetIndex} not found`);\n  }\n\n  snippetToExpand.start = Math.max(\n    0,\n    snippetToExpand.start - (direction === 'up' ? EXPAND_BY_LINES : 0)\n  );\n  snippetToExpand.end += direction === 'down' ? EXPAND_BY_LINES : 0;\n\n  return snippets.map(snippet => {\n    if (snippet.index === snippetIndex) {\n      return snippetToExpand;\n    }\n    if (collision([snippet.start, snippet.end], [snippetToExpand.start, snippetToExpand.end])) {\n      // Merge with expanded snippet\n      snippetToExpand.start = Math.min(snippet.start, snippetToExpand.start);\n      snippetToExpand.end = Math.max(snippet.end, snippetToExpand.end);\n      snippet.toDelete = true;\n    }\n    return snippet;\n  });\n}\n\nexport function inSnippet(line: number, snippet: T.SourceLine[]) {\n  return line >= snippet[0].line && line <= snippet[snippet.length - 1].line;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { IssueResponse } from '../../api/issues';\nimport { parseIssueFromResponse } from '../../helpers/issues';\n\nexport const updateIssue = (\n  onChange: (issue: T.Issue) => void,\n  resultPromise: Promise<IssueResponse>,\n  oldIssue?: T.Issue,\n  newIssue?: T.Issue\n) => {\n  const optimisticUpdate = oldIssue !== undefined && newIssue !== undefined;\n  if (optimisticUpdate) {\n    onChange(newIssue!);\n  }\n\n  resultPromise.then(\n    response => {\n      if (!optimisticUpdate) {\n        const issue = parseIssueFromResponse(\n          response.issue,\n          response.components,\n          response.users,\n          response.rules\n        );\n        onChange(issue);\n      }\n    },\n    () => {\n      if (optimisticUpdate) {\n        onChange(oldIssue!);\n      }\n    }\n  );\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\n\ninterface Props {\n  active?: string;\n  className?: string;\n  item: string;\n  onHover?: (item: string) => void;\n  onSelect?: (item: string) => void;\n  title?: string;\n}\n\nexport default class SelectListItem extends React.PureComponent<Props> {\n  handleSelect = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    if (this.props.onSelect) {\n      this.props.onSelect(this.props.item);\n    }\n  };\n\n  handleHover = () => {\n    if (this.props.onHover) {\n      this.props.onHover(this.props.item);\n    }\n  };\n\n  renderLink() {\n    const children = this.props.children || this.props.item;\n    return (\n      <li>\n        <a\n          className={classNames(\n            { active: this.props.active === this.props.item },\n            this.props.className\n          )}\n          href=\"#\"\n          onClick={this.handleSelect}\n          onFocus={this.handleHover}\n          onMouseOver={this.handleHover}>\n          {children}\n        </a>\n      </li>\n    );\n  }\n\n  render() {\n    return (\n      <Tooltip overlay={this.props.title || undefined} placement=\"right\">\n        {this.renderLink()}\n      </Tooltip>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as key from 'keymaster';\nimport { uniqueId } from 'lodash';\nimport * as React from 'react';\nimport SelectListItem from './SelectListItem';\n\ninterface Props {\n  className?: string;\n  items: string[];\n  currentItem: string;\n  onSelect: (item: string) => void;\n}\n\ninterface State {\n  active: string;\n}\n\nexport default class SelectList extends React.PureComponent<Props, State> {\n  currentKeyScope?: string;\n  previousFilter?: (event: any) => void;\n  previousKeyScope?: string;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      active: props.currentItem\n    };\n  }\n\n  componentDidMount() {\n    this.attachShortcuts();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.currentItem !== this.props.currentItem &&\n      !this.props.items.includes(this.state.active)\n    ) {\n      this.setState({ active: this.props.currentItem });\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachShortcuts();\n  }\n\n  attachShortcuts = () => {\n    this.previousKeyScope = key.getScope();\n    this.previousFilter = key.filter;\n    this.currentKeyScope = uniqueId('key-scope');\n    key.setScope(this.currentKeyScope);\n\n    // sometimes there is a *focused* search field next to the SelectList component\n    // we need to allow shortcuts in this case, but only for the used keys\n    (key as any).filter = (event: KeyboardEvent & { target: HTMLElement }) => {\n      const { tagName } = event.target || event.srcElement;\n      const isInput = tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';\n      return [13, 38, 40].includes(event.keyCode) || !isInput;\n    };\n\n    key('down', this.currentKeyScope, () => {\n      this.setState(this.selectNextElement);\n      return false;\n    });\n\n    key('up', this.currentKeyScope, () => {\n      this.setState(this.selectPreviousElement);\n      return false;\n    });\n\n    key('return', this.currentKeyScope, () => {\n      if (this.state.active != null) {\n        this.handleSelect(this.state.active);\n      }\n      return false;\n    });\n  };\n\n  detachShortcuts = () => {\n    if (this.previousKeyScope) {\n      key.setScope(this.previousKeyScope);\n    }\n    if (this.currentKeyScope) {\n      key.deleteScope(this.currentKeyScope);\n    }\n    (key as any).filter = this.previousFilter;\n  };\n\n  handleSelect = (item: string) => {\n    this.props.onSelect(item);\n  };\n\n  handleHover = (item: string) => {\n    this.setState({ active: item });\n  };\n\n  selectNextElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx < 0) {\n      return { active: props.items[0] };\n    }\n    return { active: props.items[(idx + 1) % props.items.length] };\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx <= 0) {\n      return { active: props.items[props.items.length - 1] };\n    }\n    return { active: props.items[idx - 1] };\n  };\n\n  renderChild = (child: any) => {\n    if (child == null) {\n      return null;\n    }\n    // do not pass extra props to children like `<li className=\"divider\" />`\n    if (child.type !== SelectListItem) {\n      return child;\n    }\n    return React.cloneElement(child, {\n      active: this.state.active,\n      onHover: this.handleHover,\n      onSelect: this.handleSelect\n    });\n  };\n\n  render() {\n    const { children } = this.props;\n    const hasChildren = React.Children.count(children) > 0;\n    return (\n      <ul className={classNames('menu', this.props.className)}>\n        {hasChildren && React.Children.map(children, this.renderChild)}\n        {!hasChildren &&\n          this.props.items.map(item => (\n            <SelectListItem\n              active={this.state.active}\n              item={item}\n              key={item}\n              onHover={this.handleHover}\n              onSelect={this.handleSelect}\n            />\n          ))}\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { map } from 'lodash';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { searchMembers } from '../../../api/organizations';\nimport { searchUsers } from '../../../api/users';\nimport { isSonarCloud } from '../../../helpers/system';\nimport { isLoggedIn, isUserActive } from '../../../helpers/users';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport { withCurrentUser } from '../../hoc/withCurrentUser';\nimport Avatar from '../../ui/Avatar';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  issue: Pick<T.Issue, 'projectOrganization'>;\n  onSelect: (login: string) => void;\n}\n\ninterface State {\n  currentUser: string;\n  query: string;\n  users: T.UserActive[];\n}\n\nconst LIST_SIZE = 10;\n\nexport class SetAssigneePopup extends React.PureComponent<Props, State> {\n  defaultUsersArray: T.UserActive[];\n\n  constructor(props: Props) {\n    super(props);\n    this.defaultUsersArray = [{ login: '', name: translate('unassigned') }];\n\n    if (isLoggedIn(props.currentUser)) {\n      this.defaultUsersArray = [props.currentUser, ...this.defaultUsersArray];\n    }\n\n    this.state = {\n      query: '',\n      users: this.defaultUsersArray,\n      currentUser: this.defaultUsersArray.length > 0 ? this.defaultUsersArray[0].login : ''\n    };\n  }\n\n  searchMembers = (query: string) => {\n    searchMembers({\n      organization: this.props.issue.projectOrganization,\n      q: query,\n      ps: LIST_SIZE\n    }).then(this.handleSearchResult, () => {});\n  };\n\n  searchUsers = (query: string) => {\n    searchUsers({ q: query, ps: LIST_SIZE }).then(this.handleSearchResult, () => {});\n  };\n\n  handleSearchResult = ({ users }: { users: T.UserBase[] }) => {\n    const activeUsers = users.filter(isUserActive);\n    this.setState({\n      users: activeUsers,\n      currentUser: activeUsers.length > 0 ? activeUsers[0].login : ''\n    });\n  };\n\n  handleSearchChange = (query: string) => {\n    if (query.length === 0) {\n      this.setState({\n        query,\n        users: this.defaultUsersArray,\n        currentUser: this.defaultUsersArray[0].login\n      });\n    } else {\n      this.setState({ query });\n      if (isSonarCloud()) {\n        this.searchMembers(query);\n      } else {\n        this.searchUsers(query);\n      }\n    }\n  };\n\n  render() {\n    return (\n      <DropdownOverlay noPadding={true}>\n        <div className=\"multi-select\">\n          <div className=\"menu-search\">\n            <SearchBox\n              autoFocus={true}\n              className=\"little-spacer-top\"\n              minLength={2}\n              onChange={this.handleSearchChange}\n              placeholder={translate('search.search_for_users')}\n              value={this.state.query}\n            />\n          </div>\n          <SelectList\n            currentItem={this.state.currentUser}\n            items={map(this.state.users, 'login')}\n            onSelect={this.props.onSelect}>\n            {this.state.users.map(user => (\n              <SelectListItem item={user.login} key={user.login}>\n                {!!user.login && (\n                  <Avatar className=\"spacer-right\" hash={user.avatar} name={user.name} size={16} />\n                )}\n                <span className=\"text-middle\" style={{ marginLeft: user.login ? 24 : undefined }}>\n                  {user.name}\n                </span>\n              </SelectListItem>\n            ))}\n          </SelectList>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n\nexport default withCurrentUser(SetAssigneePopup);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../ui/Avatar';\nimport SetAssigneePopup from '../popups/SetAssigneePopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<\n    T.Issue,\n    'assignee' | 'assigneeActive' | 'assigneeAvatar' | 'assigneeName' | 'projectOrganization'\n  >;\n  canAssign: boolean;\n  onAssign: (login: string) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueAssign extends React.PureComponent<Props> {\n  toggleAssign = (open?: boolean) => {\n    this.props.togglePopup('assign', open);\n  };\n\n  handleClose = () => {\n    this.toggleAssign(false);\n  };\n\n  renderAssignee() {\n    const { issue } = this.props;\n    const assigneeName = issue.assigneeName || issue.assignee;\n\n    if (assigneeName) {\n      return (\n        <>\n          <span className=\"text-top\">\n            <Avatar\n              className=\"little-spacer-right\"\n              hash={issue.assigneeAvatar}\n              name={issue.assigneeName || issue.assignee}\n              size={16}\n            />\n          </span>\n          <span className=\"issue-meta-label\">\n            {issue.assigneeActive === false\n              ? translateWithParameters('user.x_deleted', assigneeName)\n              : assigneeName}\n          </span>\n        </>\n      );\n    }\n\n    return <span className=\"issue-meta-label\">{translate('unassigned')}</span>;\n  }\n\n  render() {\n    if (this.props.canAssign) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            closeOnEscape={true}\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canAssign}\n            overlay={<SetAssigneePopup issue={this.props.issue} onSelect={this.props.onAssign} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-assign\"\n              onClick={this.toggleAssign}>\n              {this.renderAssignee()}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return this.renderAssignee();\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MarkdownTips from '../../common/MarkdownTips';\n\ninterface Props {\n  comment?: Pick<T.IssueComment, 'markdown'>;\n  onComment: (text: string) => void;\n  toggleComment: (visible: boolean) => void;\n  placeholder: string;\n  placement?: PopupPlacement;\n  autoTriggered?: boolean;\n}\n\ninterface State {\n  textComment: string;\n}\n\nexport default class CommentPopup extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      textComment: props.comment ? props.comment.markdown : ''\n    };\n  }\n\n  handleCommentChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ textComment: event.target.value });\n  };\n\n  handleCommentClick = () => {\n    if (this.state.textComment.trim().length > 0) {\n      this.props.onComment(this.state.textComment);\n    }\n  };\n\n  handleCancelClick = () => {\n    this.props.toggleComment(false);\n  };\n\n  handleKeyboard = (event: React.KeyboardEvent) => {\n    if (event.keyCode === 13 && (event.metaKey || event.ctrlKey)) {\n      // Ctrl + Enter\n      this.handleCommentClick();\n    } else if ([37, 38, 39, 40].includes(event.keyCode)) {\n      // Arrow keys\n      event.stopPropagation();\n    }\n  };\n\n  render() {\n    const { comment, autoTriggered } = this.props;\n    return (\n      <DropdownOverlay placement={this.props.placement}>\n        <div className=\"issue-comment-bubble-popup\">\n          <div className=\"issue-comment-form-text\">\n            <textarea\n              autoFocus={true}\n              onChange={this.handleCommentChange}\n              onKeyDown={this.handleKeyboard}\n              placeholder={this.props.placeholder}\n              rows={2}\n              value={this.state.textComment}\n            />\n          </div>\n          <div className=\"issue-comment-form-footer\">\n            <div className=\"issue-comment-form-actions\">\n              <Button\n                className=\"js-issue-comment-submit little-spacer-right\"\n                disabled={this.state.textComment.trim().length < 1}\n                onClick={this.handleCommentClick}>\n                {comment && translate('save')}\n                {!comment && translate('issue.comment.submit')}\n              </Button>\n              <ResetButtonLink className=\"js-issue-comment-cancel\" onClick={this.handleCancelClick}>\n                {autoTriggered ? translate('skip') : translate('cancel')}\n              </ResetButtonLink>\n            </div>\n            <div className=\"issue-comment-form-tips\">\n              <MarkdownTips />\n            </div>\n          </div>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { addIssueComment } from '../../../api/issues';\nimport { updateIssue } from '../actions';\nimport CommentPopup from '../popups/CommentPopup';\n\ninterface Props {\n  commentAutoTriggered?: boolean;\n  commentPlaceholder: string;\n  currentPopup?: string;\n  issueKey: string;\n  onChange: (issue: T.Issue) => void;\n  toggleComment: (open?: boolean, placeholder?: string, autoTriggered?: boolean) => void;\n}\n\nexport default class IssueCommentAction extends React.PureComponent<Props> {\n  addComment = (text: string) => {\n    updateIssue(this.props.onChange, addIssueComment({ issue: this.props.issueKey, text }));\n    this.props.toggleComment(false);\n  };\n\n  handleCommentClick = () => {\n    this.props.toggleComment();\n  };\n\n  handleClose = () => {\n    this.props.toggleComment(false);\n  };\n\n  render() {\n    return (\n      <li className=\"issue-meta dropdown\">\n        <Toggler\n          closeOnClickOutside={false}\n          onRequestClose={this.handleClose}\n          open={this.props.currentPopup === 'comment'}\n          overlay={\n            <CommentPopup\n              autoTriggered={this.props.commentAutoTriggered}\n              onComment={this.addComment}\n              placeholder={this.props.commentPlaceholder}\n              toggleComment={this.props.toggleComment}\n            />\n          }>\n          <ButtonLink className=\"issue-action js-issue-comment\" onClick={this.handleCommentClick}>\n            <span className=\"issue-meta-label\">{translate('issue.comment.formlink')}</span>\n          </ButtonLink>\n        </Toggler>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\ntype Props = {\n  issue: Pick<T.Issue, 'severity'>;\n  onSelect: (severity: string) => void;\n};\n\nconst SEVERITY = ['BLOCKER', 'CRITICAL', 'MAJOR', 'MINOR', 'INFO'];\n\nexport default function SetSeverityPopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.severity} items={SEVERITY} onSelect={onSelect}>\n        {SEVERITY.map(severity => (\n          <SelectListItem className=\"display-flex-center\" item={severity} key={severity}>\n            <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n            {translate('severity', severity)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { IssueResponse, setIssueSeverity } from '../../../api/issues';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport SetSeverityPopup from '../popups/SetSeverityPopup';\n\ninterface Props {\n  canSetSeverity: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'severity'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueSeverity extends React.PureComponent<Props> {\n  toggleSetSeverity = (open?: boolean) => {\n    this.props.togglePopup('set-severity', open);\n  };\n\n  setSeverity = (severity: string) => {\n    this.props.setIssueProperty('severity', 'set-severity', setIssueSeverity, severity);\n  };\n\n  handleClose = () => {\n    this.toggleSetSeverity(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetSeverity) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetSeverity}\n            overlay={<SetSeverityPopup issue={issue} onSelect={this.setSeverity} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-set-severity\"\n              onClick={this.toggleSetSeverity}>\n              <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />;\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { difference, without } from 'lodash';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { searchIssueTags } from '../../../api/issues';\nimport TagsSelector from '../../tags/TagsSelector';\n\ninterface Props {\n  organization: string;\n  selectedTags: string[];\n  setTags: (tags: string[]) => void;\n}\n\ninterface State {\n  searchResult: string[];\n}\n\nconst LIST_SIZE = 10;\n\nexport default class SetIssueTagsPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { searchResult: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onSearch = (query: string) => {\n    return searchIssueTags({\n      q: query,\n      ps: Math.min(this.props.selectedTags.length - 1 + LIST_SIZE, 100),\n      organization: this.props.organization\n    }).then(\n      (tags: string[]) => {\n        if (this.mounted) {\n          this.setState({ searchResult: tags });\n        }\n      },\n      () => {}\n    );\n  };\n\n  onSelect = (tag: string) => {\n    this.props.setTags([...this.props.selectedTags, tag]);\n  };\n\n  onUnselect = (tag: string) => {\n    this.props.setTags(without(this.props.selectedTags, tag));\n  };\n\n  render() {\n    const availableTags = difference(this.state.searchResult, this.props.selectedTags);\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <TagsSelector\n          listSize={LIST_SIZE}\n          onSearch={this.onSearch}\n          onSelect={this.onSelect}\n          onUnselect={this.onUnselect}\n          selectedTags={this.props.selectedTags}\n          tags={availableTags}\n        />\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { setIssueTags } from '../../../api/issues';\nimport TagsList from '../../tags/TagsList';\nimport { updateIssue } from '../actions';\nimport SetIssueTagsPopup from '../popups/SetIssueTagsPopup';\n\ninterface Props {\n  canSetTags: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'key' | 'projectOrganization' | 'tags'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTags extends React.PureComponent<Props> {\n  toggleSetTags = (open?: boolean) => {\n    this.props.togglePopup('edit-tags', open);\n  };\n\n  setTags = (tags: string[]) => {\n    const { issue } = this.props;\n    const newIssue = { ...issue, tags };\n    updateIssue(\n      this.props.onChange,\n      setIssueTags({ issue: issue.key, tags: tags.join(',') }),\n      issue as T.Issue,\n      newIssue as T.Issue\n    );\n  };\n\n  handleClose = () => {\n    this.toggleSetTags(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    const { tags = [] } = issue;\n\n    if (this.props.canSetTags) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen}\n            overlay={\n              <SetIssueTagsPopup\n                organization={issue.projectOrganization}\n                selectedTags={tags}\n                setTags={this.setTags}\n              />\n            }>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-edit-tags\"\n              onClick={this.toggleSetTags}>\n              <TagsList\n                allowUpdate={this.props.canSetTags}\n                tags={\n                  issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]\n                }\n              />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <TagsList\n          allowUpdate={this.props.canSetTags}\n          className=\"note\"\n          tags={issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { hasMessage, translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\nexport interface Props {\n  fromHotspot: boolean;\n  onSelect: (transition: string) => void;\n  transitions: string[];\n  type: T.IssueType;\n}\n\nexport default function SetTransitionPopup({ fromHotspot, onSelect, transitions, type }: Props) {\n  const isManualVulnerability = fromHotspot && type === 'VULNERABILITY';\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={transitions[0]} items={transitions} onSelect={onSelect}>\n        {transitions.map(transition => {\n          const [name, description] = translateTransition(transition, isManualVulnerability);\n          return (\n            <SelectListItem item={transition} key={transition} title={description}>\n              {name}\n            </SelectListItem>\n          );\n        })}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n\nfunction translateTransition(transition: string, isManualVulnerability: boolean) {\n  return isManualVulnerability && hasMessage('vulnerability.transition', transition)\n    ? [\n        translate('vulnerability.transition', transition),\n        translate('vulnerability.transition', transition, 'description')\n      ]\n    : [\n        translate('issue.transition', transition),\n        translate('issue.transition', transition, 'description')\n      ];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { setIssueTransition } from '../../../api/issues';\nimport StatusHelper from '../../shared/StatusHelper';\nimport { updateIssue } from '../actions';\nimport SetTransitionPopup from '../popups/SetTransitionPopup';\n\ninterface Props {\n  hasTransitions: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'fromHotspot' | 'key' | 'resolution' | 'status' | 'transitions' | 'type'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTransition extends React.PureComponent<Props> {\n  setTransition = (transition: string) => {\n    updateIssue(\n      this.props.onChange,\n      setIssueTransition({ issue: this.props.issue.key, transition })\n    );\n    this.toggleSetTransition();\n  };\n\n  toggleSetTransition = (open?: boolean) => {\n    this.props.togglePopup('transition', open);\n  };\n\n  handleClose = () => {\n    this.toggleSetTransition(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    if (this.props.hasTransitions) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.hasTransitions}\n            overlay={\n              <SetTransitionPopup\n                fromHotspot={issue.fromHotspot}\n                onSelect={this.setTransition}\n                transitions={issue.transitions}\n                type={issue.type}\n              />\n            }>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-transition\"\n              onClick={this.toggleSetTransition}>\n              <StatusHelper\n                className=\"issue-meta-label\"\n                resolution={issue.resolution}\n                status={issue.status}\n              />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <StatusHelper\n          className=\"issue-meta-label\"\n          resolution={issue.resolution}\n          status={issue.status}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\ninterface Props {\n  issue: Pick<T.Issue, 'type'>;\n  onSelect: (type: T.IssueType) => void;\n}\n\nconst TYPES = ['BUG', 'VULNERABILITY', 'CODE_SMELL'];\n\nexport default function SetTypePopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.type} items={TYPES} onSelect={onSelect}>\n        {TYPES.map(type => (\n          <SelectListItem className=\"display-flex-center\" item={type} key={type}>\n            <IssueTypeIcon className=\"little-spacer-right\" query={type} />\n            {translate('issue.type', type)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { IssueResponse, setIssueType } from '../../../api/issues';\nimport { colors } from '../../../app/theme';\nimport SetTypePopup from '../popups/SetTypePopup';\n\ninterface Props {\n  canSetType: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'type'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueType extends React.PureComponent<Props> {\n  toggleSetType = (open?: boolean) => {\n    this.props.togglePopup('set-type', open);\n  };\n\n  setType = (type: string) => {\n    this.props.setIssueProperty('type', 'set-type', setIssueType, type);\n  };\n\n  handleClose = () => {\n    this.toggleSetType(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetType) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetType}\n            overlay={<SetTypePopup issue={issue} onSelect={this.setType} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-set-type\"\n              onClick={this.toggleSetType}>\n              <IssueTypeIcon\n                className=\"little-spacer-right\"\n                fill={colors.baseFontColor}\n                query={issue.type}\n              />\n              {translate('issue.type', issue.type)}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <span>\n          <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n          {translate('issue.type', issue.type)}\n        </span>\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { IssueResponse } from '../../../api/issues';\nimport { updateIssue } from '../actions';\nimport IssueAssign from './IssueAssign';\nimport IssueCommentAction from './IssueCommentAction';\nimport IssueSeverity from './IssueSeverity';\nimport IssueTags from './IssueTags';\nimport IssueTransition from './IssueTransition';\nimport IssueType from './IssueType';\n\ninterface Props {\n  issue: T.Issue;\n  currentPopup?: string;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\ninterface State {\n  commentAutoTriggered: boolean;\n  commentPlaceholder: string;\n}\n\nexport default class IssueActionsBar extends React.PureComponent<Props, State> {\n  state: State = {\n    commentAutoTriggered: false,\n    commentPlaceholder: ''\n  };\n\n  setIssueProperty = (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => {\n    const { issue } = this.props;\n    if (issue[property] !== value) {\n      const newIssue = { ...issue, [property]: value };\n      updateIssue(\n        this.props.onChange,\n        apiCall({ issue: issue.key, [property]: value }),\n        issue,\n        newIssue\n      );\n    }\n    this.props.togglePopup(popup, false);\n  };\n\n  toggleComment = (open: boolean | undefined, placeholder = '', autoTriggered = false) => {\n    this.setState({\n      commentPlaceholder: placeholder,\n      commentAutoTriggered: autoTriggered\n    });\n    this.props.togglePopup('comment', open);\n  };\n\n  handleTransition = (issue: T.Issue) => {\n    this.props.onChange(issue);\n    if (\n      issue.resolution === 'FALSE-POSITIVE' ||\n      (issue.resolution === 'WONTFIX' && issue.type !== 'SECURITY_HOTSPOT')\n    ) {\n      this.toggleComment(true, translate('issue.comment.explain_why'), true);\n    }\n  };\n\n  render() {\n    const { issue } = this.props;\n    const canAssign = issue.actions.includes('assign');\n    const canComment = issue.actions.includes('comment');\n    const canSetSeverity = issue.actions.includes('set_severity');\n    const canSetType = issue.actions.includes('set_type');\n    const canSetTags = issue.actions.includes('set_tags');\n    const hasTransitions = issue.transitions && issue.transitions.length > 0;\n    const isSecurityHotspot = issue.type === 'SECURITY_HOTSPOT';\n\n    return (\n      <div className=\"issue-actions\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueType\n              canSetType={canSetType}\n              isOpen={this.props.currentPopup === 'set-type' && canSetType}\n              issue={issue}\n              setIssueProperty={this.setIssueProperty}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          {!isSecurityHotspot && (\n            <li className=\"issue-meta\">\n              <IssueSeverity\n                canSetSeverity={canSetSeverity}\n                isOpen={this.props.currentPopup === 'set-severity' && canSetSeverity}\n                issue={issue}\n                setIssueProperty={this.setIssueProperty}\n                togglePopup={this.props.togglePopup}\n              />\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <IssueTransition\n              hasTransitions={hasTransitions}\n              isOpen={this.props.currentPopup === 'transition' && hasTransitions}\n              issue={issue}\n              onChange={this.handleTransition}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          <li className=\"issue-meta\">\n            <IssueAssign\n              canAssign={canAssign}\n              isOpen={this.props.currentPopup === 'assign' && canAssign}\n              issue={issue}\n              onAssign={this.props.onAssign}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          {!isSecurityHotspot && issue.effort && (\n            <li className=\"issue-meta\">\n              <span className=\"issue-meta-label\">\n                {translateWithParameters('issue.x_effort', issue.effort)}\n              </span>\n            </li>\n          )}\n          {canComment && (\n            <IssueCommentAction\n              commentAutoTriggered={this.state.commentAutoTriggered}\n              commentPlaceholder={this.state.commentPlaceholder}\n              currentPopup={this.props.currentPopup}\n              issueKey={issue.key}\n              onChange={this.props.onChange}\n              toggleComment={this.toggleComment}\n            />\n          )}\n        </ul>\n        <ul className=\"list-inline\">\n          <li className=\"issue-meta js-issue-tags\">\n            <IssueTags\n              canSetTags={canSetTags}\n              isOpen={this.props.currentPopup === 'edit-tags' && canSetTags}\n              issue={issue}\n              onChange={this.props.onChange}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  onDelete: () => void;\n}\n\nexport default function CommentDeletePopup({ onDelete }: Props) {\n  return (\n    <DropdownOverlay placement={PopupPlacement.BottomRight}>\n      <div className=\"menu is-container\">\n        <div className=\"spacer-bottom\">{translate('issue.comment.delete_confirm_message')}</div>\n        <Button className=\"button-red\" onClick={onDelete}>\n          {translate('delete')}\n        </Button>\n      </div>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport { DeleteButton, EditButton } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport DateFromNow from '../../intl/DateFromNow';\nimport Avatar from '../../ui/Avatar';\nimport CommentDeletePopup from '../popups/CommentDeletePopup';\nimport CommentPopup from '../popups/CommentPopup';\n\ninterface Props {\n  comment: T.IssueComment;\n  onDelete: (comment: string) => void;\n  onEdit: (comment: string, text: string) => void;\n}\n\ninterface State {\n  openPopup: string;\n}\n\nexport default class IssueCommentLine extends React.PureComponent<Props, State> {\n  state: State = {\n    openPopup: ''\n  };\n\n  handleEdit = (text: string) => {\n    this.props.onEdit(this.props.comment.key, text);\n    this.toggleEditPopup(false);\n  };\n\n  handleDelete = () => {\n    this.props.onDelete(this.props.comment.key);\n    this.toggleDeletePopup(false);\n  };\n\n  togglePopup = (popupName: string, force?: boolean) => {\n    this.setState(prevState => {\n      if (prevState.openPopup !== popupName && force !== false) {\n        return { openPopup: popupName };\n      } else if (prevState.openPopup === popupName && force !== true) {\n        return { openPopup: '' };\n      }\n      return prevState;\n    });\n  };\n\n  toggleDeletePopup = (force?: boolean) => {\n    this.togglePopup('delete', force);\n  };\n\n  toggleEditPopup = (force?: boolean) => {\n    this.togglePopup('edit', force);\n  };\n\n  closePopups = () => {\n    this.setState({ openPopup: '' });\n  };\n\n  render() {\n    const { comment } = this.props;\n    const author = comment.authorName || comment.author;\n    const displayName =\n      comment.authorActive === false && author\n        ? translateWithParameters('user.x_deleted', author)\n        : author;\n    return (\n      <div className=\"issue-comment\">\n        <div className=\"issue-comment-author\" title={displayName}>\n          <Avatar\n            className=\"little-spacer-right\"\n            hash={comment.authorAvatar}\n            name={author}\n            size={16}\n          />\n          {displayName}\n        </div>\n        <div\n          className=\"issue-comment-text markdown\"\n          dangerouslySetInnerHTML={{ __html: sanitize(comment.htmlText) }}\n        />\n        <div className=\"issue-comment-age\">\n          <DateFromNow date={comment.createdAt} />\n        </div>\n        <div className=\"issue-comment-actions\">\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                closeOnClickOutside={false}\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'edit'}\n                overlay={\n                  <CommentPopup\n                    comment={comment}\n                    onComment={this.handleEdit}\n                    placeholder=\"\"\n                    placement={PopupPlacement.BottomRight}\n                    toggleComment={this.toggleEditPopup}\n                  />\n                }>\n                <EditButton\n                  className=\"js-issue-comment-edit button-small\"\n                  onClick={this.toggleEditPopup}\n                />\n              </Toggler>\n            </div>\n          )}\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'delete'}\n                overlay={<CommentDeletePopup onDelete={this.handleDelete} />}>\n                <DeleteButton\n                  className=\"js-issue-comment-delete button-small\"\n                  onClick={this.toggleDeletePopup}\n                />\n              </Toggler>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { getIssueChangelog } from '../../../api/issues';\nimport DateTimeFormatter from '../../intl/DateTimeFormatter';\nimport Avatar from '../../ui/Avatar';\nimport IssueChangelogDiff from '../components/IssueChangelogDiff';\n\ninterface Props {\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n}\n\ninterface State {\n  changelog: T.IssueChangelog[];\n}\n\nexport default class ChangelogPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { changelog: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadChangelog();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadChangelog() {\n    getIssueChangelog(this.props.issue.key).then(\n      ({ changelog }) => {\n        if (this.mounted) {\n          this.setState({ changelog });\n        }\n      },\n      () => {}\n    );\n  }\n\n  render() {\n    const { issue } = this.props;\n    const { author } = issue;\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <div className=\"menu is-container issue-changelog\">\n          <table className=\"spaced\">\n            <tbody>\n              <tr>\n                <td className=\"thin text-left text-top nowrap\">\n                  <DateTimeFormatter date={issue.creationDate} />\n                </td>\n                <td className=\"text-left text-top\">\n                  {author ? `${translate('created_by')} ${author}` : translate('created')}\n                </td>\n              </tr>\n\n              {this.state.changelog.map((item, idx) => {\n                const userName = item.userName || item.user;\n\n                return (\n                  <tr key={idx}>\n                    <td className=\"thin text-left text-top nowrap\">\n                      <DateTimeFormatter date={item.creationDate} />\n                    </td>\n                    <td className=\"text-left text-top\">\n                      {userName && (\n                        <p>\n                          <Avatar\n                            className=\"little-spacer-right\"\n                            hash={item.avatar}\n                            name={userName}\n                            size={16}\n                          />\n                          {item.isUserActive\n                            ? userName\n                            : translateWithParameters('user.x_deleted', userName)}\n                        </p>\n                      )}\n                      {item.diffs.map(diff => (\n                        <IssueChangelogDiff diff={diff} key={diff.key} />\n                      ))}\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport DateFromNow from '../../intl/DateFromNow';\nimport DateTimeFormatter from '../../intl/DateTimeFormatter';\nimport ChangelogPopup from '../popups/ChangelogPopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n  creationDate: string;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueChangelog extends React.PureComponent<Props> {\n  toggleChangelog = (open?: boolean) => {\n    this.props.togglePopup('changelog', open);\n  };\n\n  handleClick = () => {\n    this.toggleChangelog();\n  };\n\n  handleClose = () => {\n    this.toggleChangelog(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<ChangelogPopup issue={this.props.issue} />}>\n          <Tooltip\n            mouseEnterDelay={0.5}\n            overlay={<DateTimeFormatter date={this.props.creationDate} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-show-changelog\"\n              onClick={this.handleClick}>\n              <span className=\"issue-meta-label\">\n                <DateFromNow date={this.props.creationDate} />\n              </span>\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Tooltip>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { WorkspaceContextShape } from '../../workspace/context';\n\nexport interface IssueMessageProps {\n  engine?: string;\n  manualVulnerability: boolean;\n  message: string;\n  onOpenRule: WorkspaceContextShape['openRule'];\n  organization: string;\n  ruleKey: string;\n}\n\nexport default function IssueMessage(props: IssueMessageProps) {\n  const { engine, manualVulnerability, message, organization, ruleKey } = props;\n\n  return (\n    <div className=\"issue-message\">\n      <span className=\"spacer-right\">{message}</span>\n      <ButtonLink\n        aria-label={translate('issue.why_this_issue.long')}\n        className=\"issue-see-rule spacer-right\"\n        onClick={() => props.onOpenRule({ key: ruleKey, organization })}>\n        {translate('issue.why_this_issue')}\n      </ButtonLink>\n\n      {engine && (\n        <Tooltip overlay={translateWithParameters('issue.from_external_rule_engine', engine)}>\n          <div className=\"badge spacer-right text-top\">{engine}</div>\n        </Tooltip>\n      )}\n      {manualVulnerability && (\n        <Tooltip overlay={translate('issue.manual_vulnerability.description')}>\n          <div className=\"badge spacer-right text-top\">\n            {translate('issue.manual_vulnerability')}\n          </div>\n        </Tooltip>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { fileFromPath, limitComponentName } from 'sonar-ui-common/helpers/path';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport StatusHelper from '../../shared/StatusHelper';\nimport Avatar from '../../ui/Avatar';\n\ninterface Props {\n  issue: T.Issue;\n  onFilter: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesPopup extends React.PureComponent<Props> {\n  handleSelect = (property: string) => {\n    this.props.onFilter(property, this.props.issue);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const items = [\n      'type',\n      'severity',\n      'status',\n      'resolution',\n      'assignee',\n      'rule',\n      ...(issue.tags || []).map(tag => `tag###${tag}`),\n      'project',\n      issue.subProject ? 'module' : undefined,\n      'file'\n    ].filter(item => item) as string[];\n\n    const assignee = issue.assigneeName || issue.assignee;\n\n    return (\n      <DropdownOverlay noPadding={true}>\n        <header className=\"menu-search\">\n          <h6>{translate('issue.filter_similar_issues')}</h6>\n        </header>\n\n        <SelectList\n          className=\"issues-similar-issues-menu\"\n          currentItem={items[0]}\n          items={items}\n          onSelect={this.handleSelect}>\n          <SelectListItem className=\"display-flex-center\" item=\"type\">\n            <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n            {translate('issue.type', issue.type)}\n          </SelectListItem>\n\n          <SelectListItem item=\"severity\">\n            <SeverityHelper className=\"display-flex-center\" severity={issue.severity} />\n          </SelectListItem>\n\n          <SelectListItem item=\"status\">\n            <StatusHelper\n              className=\"display-flex-center\"\n              resolution={undefined}\n              status={issue.status}\n            />\n          </SelectListItem>\n\n          <SelectListItem item=\"resolution\">\n            {issue.resolution != null\n              ? translate('issue.resolution', issue.resolution)\n              : translate('unresolved')}\n          </SelectListItem>\n\n          <SelectListItem item=\"assignee\">\n            {assignee ? (\n              <span>\n                {translate('assigned_to')}\n                <Avatar\n                  className=\"little-spacer-left little-spacer-right\"\n                  hash={issue.assigneeAvatar}\n                  name={assignee}\n                  size={16}\n                />\n                {issue.assigneeActive === false\n                  ? translateWithParameters('user.x_deleted', assignee)\n                  : assignee}\n              </span>\n            ) : (\n              translate('unassigned')\n            )}\n          </SelectListItem>\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"rule\">{limitComponentName(issue.ruleName)}</SelectListItem>\n\n          {issue.tags != null &&\n            issue.tags.map(tag => (\n              <SelectListItem item={`tag###${tag}`} key={`tag###${tag}`}>\n                <TagsIcon className=\"icon-half-transparent little-spacer-right text-middle\" />\n                <span className=\"text-middle\">{tag}</span>\n              </SelectListItem>\n            ))}\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"project\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n            {issue.projectName}\n          </SelectListItem>\n\n          {issue.subProject != null && (\n            <SelectListItem item=\"module\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"BRC\" />\n              {issue.subProjectName}\n            </SelectListItem>\n          )}\n\n          <SelectListItem item=\"file\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier={issue.componentQualifier} />\n            {fileFromPath(issue.componentLongName)}\n          </SelectListItem>\n        </SelectList>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport FilterIcon from 'sonar-ui-common/components/icons/FilterIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SimilarIssuesPopup from '../popups/SimilarIssuesPopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: T.Issue;\n  togglePopup: (popup: string, show?: boolean) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesFilter extends React.PureComponent<Props> {\n  handleFilter = (property: string, issue: T.Issue) => {\n    this.togglePopup(false);\n    if (this.props.onFilter) {\n      this.props.onFilter(property, issue);\n    }\n  };\n\n  togglePopup = (open?: boolean) => {\n    this.props.togglePopup('similarIssues', open);\n  };\n\n  handleClose = () => {\n    this.togglePopup(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<SimilarIssuesPopup issue={this.props.issue} onFilter={this.handleFilter} />}>\n          <ButtonLink\n            aria-label={translate('issue.filter_similar_issues')}\n            className=\"issue-action issue-action-with-options js-issue-filter\"\n            onClick={this.togglePopup}\n            title={translate('issue.filter_similar_issues')}>\n            <FilterIcon className=\"icon-half-transparent\" />\n            <DropdownIcon className=\"icon-half-transparent\" />\n          </ButtonLink>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport LinkIcon from 'sonar-ui-common/components/icons/LinkIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { getComponentIssuesUrl } from '../../../helpers/urls';\nimport { BranchLike } from '../../../types/branch-like';\nimport LocationIndex from '../../common/LocationIndex';\nimport { WorkspaceContext } from '../../workspace/context';\nimport IssueChangelog from './IssueChangelog';\nimport IssueMessage from './IssueMessage';\nimport SimilarIssuesFilter from './SimilarIssuesFilter';\n\ninterface Props {\n  branchLike?: BranchLike;\n  currentPopup?: string;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default function IssueTitleBar(props: Props) {\n  const { issue } = props;\n  const hasSimilarIssuesFilter = props.onFilter != null;\n\n  const locationsCount =\n    issue.secondaryLocations.length +\n    issue.flows.reduce((sum, locations) => sum + locations.length, 0);\n\n  const locationsBadge = (\n    <Tooltip\n      overlay={translateWithParameters(\n        'issue.this_issue_involves_x_code_locations',\n        formatMeasure(locationsCount, 'INT')\n      )}>\n      <LocationIndex>{locationsCount}</LocationIndex>\n    </Tooltip>\n  );\n\n  const displayLocations = props.displayLocationsCount && locationsCount > 0;\n\n  const issueUrl = getComponentIssuesUrl(issue.project, {\n    ...getBranchLikeQuery(props.branchLike),\n    issues: issue.key,\n    open: issue.key,\n    types: issue.type === 'SECURITY_HOTSPOT' ? issue.type : undefined\n  });\n\n  return (\n    <div className=\"issue-row\">\n      <WorkspaceContext.Consumer>\n        {({ openRule }) => (\n          <IssueMessage\n            engine={issue.externalRuleEngine}\n            manualVulnerability={issue.fromHotspot && issue.type === 'VULNERABILITY'}\n            message={issue.message}\n            onOpenRule={openRule}\n            organization={issue.organization}\n            ruleKey={issue.rule}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n\n      <div className=\"issue-row-meta\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueChangelog\n              creationDate={issue.creationDate}\n              isOpen={props.currentPopup === 'changelog'}\n              issue={issue}\n              togglePopup={props.togglePopup}\n            />\n          </li>\n          {issue.textRange != null && (\n            <li className=\"issue-meta\">\n              <span className=\"issue-meta-label\" title={translate('line_number')}>\n                L{issue.textRange.endLine}\n              </span>\n            </li>\n          )}\n          {displayLocations && (\n            <li className=\"issue-meta\">\n              {props.displayLocationsLink ? (\n                <Link target=\"_blank\" to={issueUrl}>\n                  {locationsBadge}\n                </Link>\n              ) : (\n                locationsBadge\n              )}\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <Link\n              className=\"js-issue-permalink link-no-underline\"\n              target=\"_blank\"\n              title={translate('permalink')}\n              to={issueUrl}>\n              <LinkIcon />\n            </Link>\n          </li>\n          {hasSimilarIssuesFilter && (\n            <li className=\"issue-meta\">\n              <SimilarIssuesFilter\n                isOpen={props.currentPopup === 'similarIssues'}\n                issue={issue}\n                onFilter={props.onFilter}\n                togglePopup={props.togglePopup}\n              />\n            </li>\n          )}\n        </ul>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { deleteIssueComment, editIssueComment } from '../../api/issues';\nimport { BranchLike } from '../../types/branch-like';\nimport { updateIssue } from './actions';\nimport IssueActionsBar from './components/IssueActionsBar';\nimport IssueCommentLine from './components/IssueCommentLine';\nimport IssueTitleBar from './components/IssueTitleBar';\n\ninterface Props {\n  branchLike?: BranchLike;\n  checked?: boolean;\n  currentPopup?: string;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  selected: boolean;\n  togglePopup: (popup: string, show: boolean | void) => void;\n}\n\nexport default class IssueView extends React.PureComponent<Props> {\n  handleCheck = () => {\n    if (this.props.onCheck) {\n      this.props.onCheck(this.props.issue.key);\n    }\n  };\n\n  handleClick = (event: React.MouseEvent<HTMLDivElement>) => {\n    if (!isClickable(event.target as HTMLElement) && this.props.onClick) {\n      event.preventDefault();\n      this.props.onClick(this.props.issue.key);\n    }\n  };\n\n  editComment = (comment: string, text: string) => {\n    updateIssue(this.props.onChange, editIssueComment({ comment, text }));\n  };\n\n  deleteComment = (comment: string) => {\n    updateIssue(this.props.onChange, deleteIssueComment({ comment }));\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const hasCheckbox = this.props.onCheck != null;\n\n    const issueClass = classNames('issue', {\n      hotspot: issue.type === 'SECURITY_HOTSPOT',\n      'issue-with-checkbox': hasCheckbox,\n      selected: this.props.selected\n    });\n\n    return (\n      <div\n        className={issueClass}\n        data-issue={issue.key}\n        onClick={this.handleClick}\n        role=\"listitem\"\n        tabIndex={0}>\n        <IssueTitleBar\n          branchLike={this.props.branchLike}\n          currentPopup={this.props.currentPopup}\n          displayLocationsCount={this.props.displayLocationsCount}\n          displayLocationsLink={this.props.displayLocationsLink}\n          issue={issue}\n          onFilter={this.props.onFilter}\n          togglePopup={this.props.togglePopup}\n        />\n        <IssueActionsBar\n          currentPopup={this.props.currentPopup}\n          issue={issue}\n          onAssign={this.props.onAssign}\n          onChange={this.props.onChange}\n          togglePopup={this.props.togglePopup}\n        />\n        {issue.comments && issue.comments.length > 0 && (\n          <div className=\"issue-comments\">\n            {issue.comments.map(comment => (\n              <IssueCommentLine\n                comment={comment}\n                key={comment.key}\n                onDelete={this.deleteComment}\n                onEdit={this.editComment}\n              />\n            ))}\n          </div>\n        )}\n        {hasCheckbox && (\n          <>\n            <Checkbox\n              checked={this.props.checked || false}\n              className=\"issue-checkbox-container\"\n              onCheck={this.handleCheck}\n            />\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nfunction isClickable(node: HTMLElement | undefined | null): boolean {\n  if (!node) {\n    return false;\n  }\n  const clickableTags = ['A', 'BUTTON', 'INPUT', 'TEXTAREA'];\n  const tagName = (node.tagName || '').toUpperCase();\n  return clickableTags.includes(tagName) || isClickable(node.parentElement);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as key from 'keymaster';\nimport * as React from 'react';\nimport { setIssueAssignee } from '../../api/issues';\nimport { BranchLike } from '../../types/branch-like';\nimport { updateIssue } from './actions';\nimport './Issue.css';\nimport IssueView from './IssueView';\n\ninterface Props {\n  branchLike?: BranchLike;\n  checked?: boolean;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  onPopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  openPopup?: string;\n  selected: boolean;\n}\n\nexport default class Issue extends React.PureComponent<Props> {\n  static defaultProps = {\n    selected: false\n  };\n\n  componentDidMount() {\n    if (this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUpdate(nextProps: Props) {\n    if (!nextProps.selected && this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!prevProps.selected && this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  bindShortcuts() {\n    key('f', 'issues', () => {\n      this.togglePopup('transition');\n      return false;\n    });\n    key('a', 'issues', () => {\n      this.togglePopup('assign');\n      return false;\n    });\n    key('m', 'issues', () => {\n      if (this.props.issue.actions.includes('assign')) {\n        this.handleAssignement('_me');\n      }\n      return false;\n    });\n    key('i', 'issues', () => {\n      this.togglePopup('set-severity');\n      return false;\n    });\n    key('c', 'issues', () => {\n      this.togglePopup('comment');\n      return false;\n    });\n    key('t', 'issues', () => {\n      this.togglePopup('edit-tags');\n      return false;\n    });\n    key('space', 'issues', () => {\n      if (this.props.onCheck) {\n        this.props.onCheck(this.props.issue.key);\n        return false;\n      }\n      return undefined;\n    });\n  }\n\n  unbindShortcuts() {\n    key.unbind('f', 'issues');\n    key.unbind('a', 'issues');\n    key.unbind('m', 'issues');\n    key.unbind('i', 'issues');\n    key.unbind('c', 'issues');\n    key.unbind('space', 'issues');\n    key.unbind('t', 'issues');\n  }\n\n  togglePopup = (popupName: string, open?: boolean) => {\n    this.props.onPopupToggle(this.props.issue.key, popupName, open);\n  };\n\n  handleAssignement = (login: string) => {\n    const { issue } = this.props;\n    if (issue.assignee !== login) {\n      updateIssue(this.props.onChange, setIssueAssignee({ issue: issue.key, assignee: login }));\n    }\n    this.togglePopup('assign', false);\n  };\n\n  render() {\n    return (\n      <IssueView\n        branchLike={this.props.branchLike}\n        checked={this.props.checked}\n        currentPopup={this.props.openPopup}\n        displayLocationsCount={this.props.displayLocationsCount}\n        displayLocationsLink={this.props.displayLocationsLink}\n        issue={this.props.issue}\n        onAssign={this.handleAssignement}\n        onChange={this.props.onChange}\n        onCheck={this.props.onCheck}\n        onClick={this.props.onClick}\n        onFilter={this.props.onFilter}\n        selected={this.props.selected}\n        togglePopup={this.togglePopup}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ButtonIcon } from 'sonar-ui-common/components/controls/buttons';\nimport { ClipboardIconButton } from 'sonar-ui-common/components/controls/clipboard';\nimport ExpandSnippetIcon from 'sonar-ui-common/components/icons/ExpandSnippetIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { collapsedDirFromPath, fileFromPath } from 'sonar-ui-common/helpers/path';\nimport { getPathUrlAsString } from 'sonar-ui-common/helpers/urls';\nimport { getBranchLikeQuery, isMainBranch } from '../../helpers/branch-like';\nimport { getBranchLikeUrl, getComponentIssuesUrl } from '../../helpers/urls';\nimport { BranchLike } from '../../types/branch-like';\nimport { ComponentQualifier } from '../../types/component';\nimport Favorite from '../controls/Favorite';\nimport './SourceViewerHeaderSlim.css';\n\nexport interface Props {\n  branchLike: BranchLike | undefined;\n  expandable?: boolean;\n  linkToProject?: boolean;\n  loading?: boolean;\n  onExpand?: () => void;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\nexport default function SourceViewerHeaderSlim({\n  branchLike,\n  expandable,\n  linkToProject = true,\n  loading,\n  onExpand,\n  sourceViewerFile\n}: Props) {\n  const {\n    key,\n    measures,\n    path,\n    project,\n    projectName,\n    q,\n    subProject,\n    subProjectName\n  } = sourceViewerFile;\n\n  const projectNameLabel = (\n    <>\n      <QualifierIcon qualifier={ComponentQualifier.Project} /> <span>{projectName}</span>\n    </>\n  );\n\n  return (\n    <div className=\"source-viewer-header-slim display-flex-row display-flex-space-between\">\n      <div className=\"display-flex-center flex-1\">\n        <div>\n          {linkToProject ? (\n            <a\n              className=\"link-with-icon\"\n              href={getPathUrlAsString(getBranchLikeUrl(project, branchLike))}>\n              {projectNameLabel}\n            </a>\n          ) : (\n            projectNameLabel\n          )}\n        </div>\n\n        {subProject !== undefined && (\n          <>\n            <QualifierIcon qualifier={ComponentQualifier.SubProject} />{' '}\n            <span>{subProjectName}</span>\n          </>\n        )}\n\n        <div className=\"spacer-left\">\n          <QualifierIcon qualifier={q} /> <span>{collapsedDirFromPath(path)}</span>\n          <span className=\"component-name-file\">{fileFromPath(path)}</span>\n        </div>\n\n        <div className=\"spacer-left\">\n          <ClipboardIconButton className=\"button-link link-no-underline\" copyValue={path} />\n        </div>\n\n        {sourceViewerFile.canMarkAsFavorite && (!branchLike || isMainBranch(branchLike)) && (\n          <div className=\"nudged-up spacer-left\">\n            <Favorite\n              className=\"component-name-favorite\"\n              component={key}\n              favorite={sourceViewerFile.fav || false}\n              qualifier={sourceViewerFile.q}\n            />\n          </div>\n        )}\n      </div>\n\n      {measures.issues !== undefined && (\n        <div\n          className={classNames('flex-0 big-spacer-left', {\n            'little-spacer-right': !expandable || loading\n          })}>\n          <Link\n            to={getComponentIssuesUrl(project, {\n              ...getBranchLikeQuery(branchLike),\n              fileUuids: sourceViewerFile.uuid,\n              resolved: 'false'\n            })}>\n            {translate('source_viewer.view_all_issues')}\n          </Link>\n        </div>\n      )}\n\n      {expandable && (\n        <DeferredSpinner className=\"little-spacer-right\" loading={loading}>\n          <div className=\"flex-0 big-spacer-left\">\n            <ButtonIcon className=\"js-actions\" onClick={onExpand}>\n              <ExpandSnippetIcon />\n            </ButtonIcon>\n          </div>\n        </DeferredSpinner>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { intersection } from 'lodash';\n\nexport function optimizeHighlightedSymbols(\n  symbolsForLine: string[] = [],\n  highlightedSymbols: string[] = []\n): string[] | undefined {\n  const symbols = intersection(symbolsForLine, highlightedSymbols);\n\n  return symbols.length ? symbols : undefined;\n}\n\nexport function optimizeLocationMessage(\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined,\n  optimizedSecondaryIssueLocations: T.LinearIssueLocation[]\n) {\n  return highlightedLocationMessage != null &&\n    optimizedSecondaryIssueLocations.some(\n      location => location.index === highlightedLocationMessage.index\n    )\n    ? highlightedLocationMessage\n    : undefined;\n}\n\nexport function optimizeSelectedIssue(selectedIssue: string | undefined, issuesForLine: T.Issue[]) {\n  return selectedIssue !== undefined && issuesForLine.find(issue => issue.key === selectedIssue)\n    ? selectedIssue\n    : undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { BranchLike } from '../../../types/branch-like';\nimport Issue from '../../issue/Issue';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  onIssueChange: (issue: T.Issue) => void;\n  onIssueClick: (issueKey: string) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  selectedIssue: string | undefined;\n}\n\nexport default function LineIssuesList(props: Props) {\n  const { issuePopup } = props;\n\n  return (\n    <div className=\"issue-list\">\n      {props.issues.map(issue => (\n        <Issue\n          branchLike={props.branchLike}\n          displayLocationsCount={props.displayIssueLocationsCount}\n          displayLocationsLink={props.displayIssueLocationsLink}\n          issue={issue}\n          key={issue.key}\n          onChange={props.onIssueChange}\n          onClick={props.onIssueClick}\n          onPopupToggle={props.onIssuePopupToggle}\n          openPopup={issuePopup && issuePopup.issue === issue.key ? issuePopup.name : undefined}\n          selected={props.selectedIssue === issue.key}\n        />\n      ))}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { BranchLike } from '../../../types/branch-like';\nimport LocationIndex from '../../common/LocationIndex';\nimport LocationMessage from '../../common/LocationMessage';\nimport {\n  highlightIssueLocations,\n  highlightSymbol,\n  splitByTokens,\n  Token\n} from '../helpers/highlight';\nimport LineIssuesList from './LineIssuesList';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayLocationMarkers?: boolean;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[] | undefined;\n  issueLocations: T.LinearIssueLocation[];\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  line: T.SourceLine;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onLocationSelect: ((index: number) => void) | undefined;\n  onSymbolClick: (symbols: Array<string>) => void;\n  padding?: number;\n  scroll?: (element: HTMLElement) => void;\n  secondaryIssueLocations: T.LinearIssueLocation[];\n  selectedIssue: string | undefined;\n  showIssues?: boolean;\n}\n\ninterface State {\n  tokens: Token[];\n}\n\nexport default class LineCode extends React.PureComponent<Props, State> {\n  activeMarkerNode?: HTMLElement | null;\n  codeNode?: HTMLElement | null;\n  symbols?: NodeListOf<HTMLElement>;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      tokens: splitByTokens(props.line.code || '')\n    };\n  }\n\n  componentDidMount() {\n    this.attachEvents();\n    if (this.props.highlightedLocationMessage && this.activeMarkerNode && this.props.scroll) {\n      this.props.scroll(this.activeMarkerNode);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.line.code !== this.props.line.code) {\n      this.setState({\n        tokens: splitByTokens(nextProps.line.code || '')\n      });\n    }\n  }\n\n  componentWillUpdate() {\n    this.detachEvents();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    this.attachEvents();\n    if (\n      this.props.highlightedLocationMessage &&\n      (!prevProps.highlightedLocationMessage ||\n        prevProps.highlightedLocationMessage.index !==\n          this.props.highlightedLocationMessage.index) &&\n      this.activeMarkerNode &&\n      this.props.scroll\n    ) {\n      this.props.scroll(this.activeMarkerNode);\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachEvents();\n  }\n\n  attachEvents() {\n    if (this.codeNode) {\n      this.symbols = this.codeNode.querySelectorAll('.sym');\n      if (this.symbols) {\n        for (let i = 0; i < this.symbols.length; i++) {\n          const symbol = this.symbols[i];\n          symbol.addEventListener('click', this.handleSymbolClick);\n        }\n      }\n    }\n  }\n\n  detachEvents() {\n    if (this.symbols) {\n      for (let i = 0; i < this.symbols.length; i++) {\n        const symbol = this.symbols[i];\n        symbol.addEventListener('click', this.handleSymbolClick);\n      }\n    }\n  }\n\n  handleSymbolClick = (event: MouseEvent) => {\n    event.preventDefault();\n    const keys = (event.currentTarget as HTMLElement).className.match(/sym-\\d+/g);\n    if (keys && keys.length > 0) {\n      this.props.onSymbolClick(keys);\n    }\n  };\n\n  renderMarker(index: number, message: string | undefined, selected: boolean, leading: boolean) {\n    const { onLocationSelect } = this.props;\n    const onClick = onLocationSelect ? () => onLocationSelect(index) : undefined;\n    const ref = selected ? (node: HTMLElement | null) => (this.activeMarkerNode = node) : undefined;\n    return (\n      <LocationIndex\n        key={`marker-${index}`}\n        leading={leading}\n        onClick={onClick}\n        selected={selected}>\n        <span ref={ref}>{index + 1}</span>\n        {message && <LocationMessage selected={true}>{message}</LocationMessage>}\n      </LocationIndex>\n    );\n  }\n\n  render() {\n    const {\n      highlightedLocationMessage,\n      highlightedSymbols,\n      issues,\n      issueLocations,\n      line,\n      onIssueSelect,\n      padding,\n      secondaryIssueLocations,\n      selectedIssue,\n      showIssues\n    } = this.props;\n\n    let tokens = [...this.state.tokens];\n\n    if (highlightedSymbols) {\n      highlightedSymbols.forEach(symbol => {\n        tokens = highlightSymbol(tokens, symbol);\n      });\n    }\n\n    if (issueLocations.length > 0) {\n      tokens = highlightIssueLocations(tokens, issueLocations);\n    }\n\n    if (secondaryIssueLocations) {\n      tokens = highlightIssueLocations(tokens, secondaryIssueLocations, 'issue-location');\n\n      if (highlightedLocationMessage) {\n        const location = secondaryIssueLocations.find(\n          location => location.index === highlightedLocationMessage.index\n        );\n        if (location) {\n          tokens = highlightIssueLocations(tokens, [location], 'selected');\n        }\n      }\n    }\n\n    const className = classNames('source-line-code', 'code', {\n      'has-issues': issues.length > 0\n    });\n\n    const renderedTokens: React.ReactNode[] = [];\n\n    // track if the first marker is displayed before the source code\n    // set `false` for the first token in a row\n    let leadingMarker = false;\n\n    tokens.forEach((token, index) => {\n      if (this.props.displayLocationMarkers && token.markers.length > 0) {\n        token.markers.forEach(marker => {\n          const selected =\n            highlightedLocationMessage !== undefined && highlightedLocationMessage.index === marker;\n          const loc = secondaryIssueLocations.find(loc => loc.index === marker);\n          const message = loc && loc.text;\n          renderedTokens.push(this.renderMarker(marker, message, selected, leadingMarker));\n        });\n      }\n      renderedTokens.push(\n        <span className={token.className} key={index}>\n          {token.text}\n        </span>\n      );\n\n      // keep leadingMarker truthy if previous token has only whitespaces\n      leadingMarker = (index === 0 ? true : leadingMarker) && !token.text.trim().length;\n    });\n\n    const style = padding ? { paddingBottom: `${padding}px` } : undefined;\n    const filteredSelectedIssues = issues.filter(i => i.key === selectedIssue);\n\n    return (\n      <td className={className} data-line-number={line.line} style={style}>\n        <div className=\"source-line-code-inner\">\n          <pre ref={node => (this.codeNode = node)}>{renderedTokens}</pre>\n        </div>\n        {showIssues && issues.length > 0 && (\n          <LineIssuesList\n            branchLike={this.props.branchLike}\n            displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n            displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n            issuePopup={this.props.issuePopup}\n            issues={issues}\n            onIssueChange={this.props.onIssueChange}\n            onIssueClick={onIssueSelect}\n            onIssuePopupToggle={this.props.onIssuePopupToggle}\n            selectedIssue={selectedIssue}\n          />\n        )}\n        {selectedIssue && !showIssues && (\n          <LineIssuesList\n            branchLike={this.props.branchLike}\n            issuePopup={this.props.issuePopup}\n            issues={filteredSelectedIssues}\n            onIssueChange={this.props.onIssueChange}\n            onIssueClick={onIssueSelect}\n            onIssuePopupToggle={this.props.onIssuePopupToggle}\n            selectedIssue={selectedIssue}\n          />\n        )}\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  line: T.SourceLine;\n}\n\nexport default function LineCoverage({ line }: Props) {\n  const className =\n    'source-meta source-line-coverage' +\n    (line.coverageStatus != null ? ` source-line-${line.coverageStatus}` : '');\n  return (\n    <td className={className} data-line-number={line.line}>\n      <Tooltip overlay={getStatusTooltip(line)} placement=\"right\">\n        <div className=\"source-line-bar\" />\n      </Tooltip>\n    </td>\n  );\n}\n\nfunction getStatusTooltip(line: T.SourceLine) {\n  if (line.coverageStatus === 'uncovered') {\n    if (line.conditions) {\n      return translateWithParameters('source_viewer.tooltip.uncovered.conditions', line.conditions);\n    } else {\n      return translate('source_viewer.tooltip.uncovered');\n    }\n  } else if (line.coverageStatus === 'covered') {\n    if (line.conditions) {\n      return translateWithParameters('source_viewer.tooltip.covered.conditions', line.conditions);\n    } else {\n      return translate('source_viewer.tooltip.covered');\n    }\n  } else if (line.coverageStatus === 'partially-covered') {\n    if (line.conditions) {\n      return translateWithParameters(\n        'source_viewer.tooltip.partially-covered.conditions',\n        line.coveredConditions || 0,\n        line.conditions\n      );\n    } else {\n      return translate('source_viewer.tooltip.partially-covered');\n    }\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  duplicated: boolean;\n  index: number;\n  line: T.SourceLine;\n  onPopupToggle: (linePopup: T.LinePopup) => void;\n  popupOpen: boolean;\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n}\n\nexport default class LineDuplicationBlock extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n    this.props.onPopupToggle({\n      index: this.props.index,\n      line: this.props.line.line,\n      name: 'duplications'\n    });\n  };\n\n  handleTogglePopup = (open: boolean) => {\n    this.props.onPopupToggle({\n      index: this.props.index,\n      line: this.props.line.line,\n      name: 'duplications',\n      open\n    });\n  };\n\n  closePopup = () => {\n    this.handleTogglePopup(false);\n  };\n\n  render() {\n    const { duplicated, index, line, popupOpen } = this.props;\n    const className = classNames('source-meta', 'source-line-duplications-extra', {\n      'source-line-duplicated': duplicated\n    });\n\n    return duplicated ? (\n      <td className={className} data-index={index} data-line-number={line.line}>\n        <Toggler\n          onRequestClose={this.closePopup}\n          open={popupOpen}\n          overlay={this.props.renderDuplicationPopup(index, line.line)}>\n          <Tooltip\n            overlay={popupOpen ? undefined : translate('source_viewer.tooltip.duplicated_block')}\n            placement=\"right\">\n            <div\n              className=\"source-line-bar\"\n              onClick={this.handleClick}\n              role=\"button\"\n              tabIndex={0}\n            />\n          </Tooltip>\n        </Toggler>\n      </td>\n    ) : (\n      <td className={className} data-index={index} data-line-number={line.line}>\n        <div className=\"source-line-bar\" />\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  line: T.SourceLine;\n  onClick: (line: T.SourceLine) => void;\n}\n\nexport default class LineDuplications extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    this.props.onClick(this.props.line);\n  };\n\n  render() {\n    const { line } = this.props;\n    const className = classNames('source-meta', 'source-line-duplications', {\n      'source-line-duplicated': line.duplicated\n    });\n\n    const cell = (\n      <td\n        className={className}\n        onClick={line.duplicated ? this.handleClick : undefined}\n        role={line.duplicated ? 'button' : undefined}\n        tabIndex={line.duplicated ? 0 : undefined}>\n        <div className=\"source-line-bar\" />\n      </td>\n    );\n\n    return line.duplicated ? (\n      <Tooltip overlay={translate('source_viewer.tooltip.duplicated_line')} placement=\"right\">\n        {cell}\n      </Tooltip>\n    ) : (\n      cell\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport IssueIcon from 'sonar-ui-common/components/icons/IssueIcon';\nimport { sortByType } from '../../../helpers/issues';\n\ninterface Props {\n  issues: T.Issue[];\n  line: T.SourceLine;\n  onClick: () => void;\n}\n\nexport default class LineIssuesIndicator extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    this.props.onClick();\n  };\n\n  render() {\n    const { issues, line } = this.props;\n    const hasIssues = issues.length > 0;\n    const className = classNames('source-meta', 'source-line-issues', {\n      'source-line-with-issues': hasIssues\n    });\n    const mostImportantIssue = hasIssues ? sortByType(issues)[0] : null;\n\n    return (\n      <td\n        className={className}\n        data-line-number={line.line}\n        onClick={hasIssues ? this.handleClick : undefined}\n        role={hasIssues ? 'button' : undefined}\n        tabIndex={hasIssues ? 0 : undefined}>\n        {mostImportantIssue != null && <IssueIcon type={mostImportantIssue.type} />}\n        {issues.length > 1 && <span className=\"source-line-issues-counter\">{issues.length}</span>}\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getCodeUrl } from '../../../helpers/urls';\nimport { SourceViewerContext } from '../SourceViewerContext';\n\ninterface Props {\n  line: T.SourceLine;\n}\n\nexport default function LineOptionsPopup({ line }: Props) {\n  return (\n    <SourceViewerContext.Consumer>\n      {({ branchLike, file }) => (\n        <DropdownOverlay placement={PopupPlacement.RightTop}>\n          <div className=\"source-viewer-bubble-popup nowrap\">\n            <Link\n              className=\"js-get-permalink\"\n              onClick={event => {\n                event.stopPropagation();\n              }}\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n              to={getCodeUrl(file.project, branchLike, file.key, line.line)}>\n              {translate('component_viewer.get_permalink')}\n            </Link>\n          </div>\n        </DropdownOverlay>\n      )}\n    </SourceViewerContext.Consumer>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport LineOptionsPopup from './LineOptionsPopup';\n\ninterface Props {\n  line: T.SourceLine;\n  onPopupToggle: (linePopup: T.LinePopup) => void;\n  popupOpen: boolean;\n}\n\nexport default class LineNumber extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'line-number' });\n  };\n\n  handleTogglePopup = (open: boolean) => {\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'line-number', open });\n  };\n\n  closePopup = () => {\n    this.handleTogglePopup(false);\n  };\n\n  render() {\n    const { line, popupOpen } = this.props;\n    const { line: lineNumber } = line;\n    const hasLineNumber = !!lineNumber;\n    return hasLineNumber ? (\n      <td\n        className=\"source-meta source-line-number\"\n        data-line-number={lineNumber}\n        onClick={this.handleClick}\n        // eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role\n        role=\"button\"\n        tabIndex={0}>\n        <Toggler\n          onRequestClose={this.closePopup}\n          open={popupOpen}\n          overlay={<LineOptionsPopup line={line} />}\n        />\n      </td>\n    ) : (\n      <td className=\"source-meta source-line-number\" />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport DateFormatter from '../../intl/DateFormatter';\n\ninterface Props {\n  line: T.SourceLine;\n}\n\nexport default function SCMPopup({ line }: Props) {\n  const hasAuthor = line.scmAuthor !== '';\n  return (\n    <DropdownOverlay placement={PopupPlacement.RightTop}>\n      <div className=\"source-viewer-bubble-popup abs-width-400\">\n        {hasAuthor && <div>{line.scmAuthor}</div>}\n        {line.scmDate && (\n          <div className={classNames({ 'spacer-top': hasAuthor })}>\n            <DateFormatter date={line.scmDate} />\n          </div>\n        )}\n        {line.scmRevision && <div className=\"spacer-top\">{line.scmRevision}</div>}\n      </div>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport SCMPopup from './SCMPopup';\n\ninterface Props {\n  line: T.SourceLine;\n  onPopupToggle: (linePopup: T.LinePopup) => void;\n  popupOpen: boolean;\n  previousLine: T.SourceLine | undefined;\n}\n\nexport default class LineSCM extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'scm' });\n  };\n\n  handleTogglePopup = (open: boolean) => {\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'scm', open });\n  };\n\n  closePopup = () => {\n    this.handleTogglePopup(false);\n  };\n\n  render() {\n    const { line, popupOpen, previousLine } = this.props;\n    const hasPopup = !!line.line;\n    const cell = isSCMChanged(line, previousLine) && (\n      <div className=\"source-line-scm-inner\" data-author={line.scmAuthor || '…'} />\n    );\n    return hasPopup ? (\n      <td\n        className=\"source-meta source-line-scm\"\n        data-line-number={line.line}\n        onClick={this.handleClick}\n        // eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role\n        role=\"button\"\n        tabIndex={0}>\n        <Toggler\n          onRequestClose={this.closePopup}\n          open={popupOpen}\n          overlay={<SCMPopup line={line} />}>\n          {cell}\n        </Toggler>\n      </td>\n    ) : (\n      <td className=\"source-meta source-line-scm\" data-line-number={line.line}>\n        {cell}\n      </td>\n    );\n  }\n}\n\nfunction isSCMChanged(s: T.SourceLine, p: T.SourceLine | undefined) {\n  let changed = true;\n  if (p != null && s.scmRevision != null && p.scmRevision != null) {\n    changed = s.scmRevision !== p.scmRevision || s.scmDate !== p.scmDate;\n  }\n  return changed;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { times } from 'lodash';\nimport * as React from 'react';\nimport { BranchLike } from '../../../types/branch-like';\nimport './Line.css';\nimport LineCode from './LineCode';\nimport LineCoverage from './LineCoverage';\nimport LineDuplicationBlock from './LineDuplicationBlock';\nimport LineDuplications from './LineDuplications';\nimport LineIssuesIndicator from './LineIssuesIndicator';\nimport LineNumber from './LineNumber';\nimport LineSCM from './LineSCM';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayAllIssues?: boolean;\n  displayCoverage: boolean;\n  displayDuplications: boolean;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayIssues: boolean;\n  displayLocationMarkers?: boolean;\n  displaySCM?: boolean;\n  duplications: number[];\n  duplicationsCount: number;\n  highlighted: boolean;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[] | undefined;\n  issueLocations: T.LinearIssueLocation[];\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  last: boolean;\n  line: T.SourceLine;\n  linePopup: T.LinePopup | undefined;\n  loadDuplications: (line: T.SourceLine) => void;\n  onLinePopupToggle: (linePopup: T.LinePopup) => void;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issueKey: string, popupName: string, open?: boolean) => void;\n  onIssuesClose: (line: T.SourceLine) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onIssuesOpen: (line: T.SourceLine) => void;\n  onIssueUnselect: () => void;\n  onLocationSelect: ((x: number) => void) | undefined;\n  onSymbolClick: (symbols: string[]) => void;\n  openIssues: boolean;\n  previousLine: T.SourceLine | undefined;\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n  scroll?: (element: HTMLElement) => void;\n  secondaryIssueLocations: T.LinearIssueLocation[];\n  selectedIssue: string | undefined;\n  verticalBuffer?: number;\n}\n\nconst LINE_HEIGHT = 18;\n\nexport default class Line extends React.PureComponent<Props> {\n  isPopupOpen = (name: string, index?: number) => {\n    const { line, linePopup } = this.props;\n    return (\n      linePopup !== undefined &&\n      linePopup.index === index &&\n      linePopup.line === line.line &&\n      linePopup.name === name\n    );\n  };\n\n  handleIssuesIndicatorClick = () => {\n    if (this.props.openIssues) {\n      this.props.onIssuesClose(this.props.line);\n      this.props.onIssueUnselect();\n    } else {\n      this.props.onIssuesOpen(this.props.line);\n\n      const { issues } = this.props;\n      if (issues.length > 0) {\n        this.props.onIssueSelect(issues[0].key);\n      }\n    }\n  };\n\n  render() {\n    const {\n      displayCoverage,\n      displaySCM = true,\n      duplications,\n      duplicationsCount,\n      issuePopup,\n      line\n    } = this.props;\n    const className = classNames('source-line', {\n      'source-line-highlighted': this.props.highlighted,\n      'source-line-filtered': line.isNew,\n      'source-line-filtered-dark':\n        displayCoverage &&\n        (line.coverageStatus === 'uncovered' || line.coverageStatus === 'partially-covered'),\n      'source-line-last': this.props.last === true\n    });\n\n    const bottomPadding = this.props.verticalBuffer\n      ? this.props.verticalBuffer * LINE_HEIGHT\n      : undefined;\n\n    return (\n      <tr className={className} data-line-number={line.line}>\n        <LineNumber\n          line={line}\n          onPopupToggle={this.props.onLinePopupToggle}\n          popupOpen={this.isPopupOpen('line-number')}\n        />\n\n        {displaySCM && (\n          <LineSCM\n            line={line}\n            onPopupToggle={this.props.onLinePopupToggle}\n            popupOpen={this.isPopupOpen('scm')}\n            previousLine={this.props.previousLine}\n          />\n        )}\n        {this.props.displayIssues && !this.props.displayAllIssues ? (\n          <LineIssuesIndicator\n            issues={this.props.issues}\n            line={line}\n            onClick={this.handleIssuesIndicatorClick}\n          />\n        ) : (\n          <td className=\"source-meta source-line-issues\" />\n        )}\n\n        {this.props.displayDuplications && (\n          <LineDuplications line={line} onClick={this.props.loadDuplications} />\n        )}\n\n        {times(duplicationsCount, index => (\n          <LineDuplicationBlock\n            duplicated={duplications.includes(index)}\n            index={index}\n            key={index}\n            line={this.props.line}\n            onPopupToggle={this.props.onLinePopupToggle}\n            popupOpen={this.isPopupOpen('duplications', index)}\n            renderDuplicationPopup={this.props.renderDuplicationPopup}\n          />\n        ))}\n\n        {this.props.displayCoverage && <LineCoverage line={line} />}\n\n        <LineCode\n          branchLike={this.props.branchLike}\n          displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n          displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n          displayLocationMarkers={this.props.displayLocationMarkers}\n          highlightedLocationMessage={this.props.highlightedLocationMessage}\n          highlightedSymbols={this.props.highlightedSymbols}\n          issueLocations={this.props.issueLocations}\n          issuePopup={issuePopup}\n          issues={this.props.issues}\n          line={line}\n          onIssueChange={this.props.onIssueChange}\n          onIssuePopupToggle={this.props.onIssuePopupToggle}\n          onIssueSelect={this.props.onIssueSelect}\n          onLocationSelect={this.props.onLocationSelect}\n          onSymbolClick={this.props.onSymbolClick}\n          padding={bottomPadding}\n          scroll={this.props.scroll}\n          secondaryIssueLocations={this.props.secondaryIssueLocations}\n          selectedIssue={this.props.selectedIssue}\n          showIssues={this.props.openIssues || this.props.displayAllIssues}\n        />\n      </tr>\n    );\n  }\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./SourceViewerHeaderSlim.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./SourceViewerHeaderSlim.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./SourceViewerHeaderSlim.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".source-viewer-header-slim{padding:4px 10px;border-bottom:1px solid #cdcdcd;background-color:#f3f3f3;align-items:center;min-height:25px}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport ExpandSnippetIcon from 'sonar-ui-common/components/icons/ExpandSnippetIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { scrollHorizontally } from 'sonar-ui-common/helpers/scrolling';\nimport Line from '../../../components/SourceViewer/components/Line';\nimport { symbolsByLine } from '../../../components/SourceViewer/helpers/indexing';\nimport { getSecondaryIssueLocationsForLine } from '../../../components/SourceViewer/helpers/issueLocations';\nimport {\n  optimizeHighlightedSymbols,\n  optimizeLocationMessage,\n  optimizeSelectedIssue\n} from '../../../components/SourceViewer/helpers/lines';\nimport { BranchLike } from '../../../types/branch-like';\nimport './SnippetViewer.css';\nimport { inSnippet, LINES_BELOW_ISSUE } from './utils';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  component: T.SourceViewerFile;\n  displaySCM?: boolean;\n  duplications?: T.Duplication[];\n  duplicationsByLine?: { [line: number]: number[] };\n  expandBlock: (snippetIndex: number, direction: T.ExpandDirection) => Promise<void>;\n  handleCloseIssues: (line: T.SourceLine) => void;\n  handleLinePopupToggle: (line: T.SourceLine) => void;\n  handleOpenIssues: (line: T.SourceLine) => void;\n  handleSymbolClick: (symbols: string[]) => void;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[];\n  index: number;\n  issue: Pick<T.Issue, 'key' | 'textRange' | 'line'>;\n  issuePopup?: { issue: string; name: string };\n  issuesByLine: T.IssuesByLine;\n  last: boolean;\n  linePopup?: T.LinePopup;\n  loadDuplications: (line: T.SourceLine) => void;\n  locations: T.FlowLocation[];\n  locationsByLine: { [line: number]: T.LinearIssueLocation[] };\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onLocationSelect: (index: number) => void;\n  openIssuesByLine: T.Dict<boolean>;\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n  scroll?: (element: HTMLElement, offset?: number) => void;\n  snippet: T.SourceLine[];\n}\n\nconst SCROLL_LEFT_OFFSET = 32;\n\nexport default class SnippetViewer extends React.PureComponent<Props> {\n  snippetNodeRef: React.RefObject<HTMLDivElement>;\n\n  constructor(props: Props) {\n    super(props);\n    this.snippetNodeRef = React.createRef();\n  }\n\n  doScroll = (element: HTMLElement) => {\n    if (this.props.scroll) {\n      this.props.scroll(element);\n    }\n    const parent = this.snippetNodeRef.current as Element;\n\n    if (parent) {\n      scrollHorizontally(element, {\n        leftOffset: SCROLL_LEFT_OFFSET,\n        rightOffset: parent.getBoundingClientRect().width - SCROLL_LEFT_OFFSET,\n        parent\n      });\n    }\n  };\n\n  scrollToLastExpandedRow = () => {\n    if (this.props.scroll) {\n      const snippetNode = this.snippetNodeRef.current as Element;\n      if (!snippetNode) {\n        return;\n      }\n      const rows = snippetNode.querySelectorAll('tr');\n      const lastRow = rows[rows.length - 1];\n      this.props.scroll(lastRow, 100);\n    }\n  };\n\n  expandBlock = (direction: T.ExpandDirection) => () =>\n    this.props.expandBlock(this.props.index, direction).then(() => {\n      if (direction === 'down') {\n        this.scrollToLastExpandedRow();\n      }\n    });\n\n  renderLine({\n    displayDuplications,\n    displaySCM,\n    index,\n    issuesForLine,\n    issueLocations,\n    line,\n    snippet,\n    symbols,\n    verticalBuffer\n  }: {\n    displayDuplications: boolean;\n    displaySCM?: boolean;\n    index: number;\n    issuesForLine: T.Issue[];\n    issueLocations: T.LinearIssueLocation[];\n    line: T.SourceLine;\n    snippet: T.SourceLine[];\n    symbols: string[];\n    verticalBuffer: number;\n  }) {\n    const secondaryIssueLocations = getSecondaryIssueLocationsForLine(line, this.props.locations);\n\n    const { duplications, duplicationsByLine } = this.props;\n    const duplicationsCount = duplications ? duplications.length : 0;\n    const lineDuplications =\n      (duplicationsCount && duplicationsByLine && duplicationsByLine[line.line]) || [];\n\n    const isSinkLine = issuesForLine.some(i => i.key === this.props.issue.key);\n\n    return (\n      <Line\n        branchLike={this.props.branchLike}\n        displayAllIssues={false}\n        displayCoverage={true}\n        displayDuplications={displayDuplications}\n        displayIssues={!isSinkLine || issuesForLine.length > 1}\n        displayLocationMarkers={true}\n        displaySCM={displaySCM}\n        duplications={lineDuplications}\n        duplicationsCount={duplicationsCount}\n        highlighted={false}\n        highlightedLocationMessage={optimizeLocationMessage(\n          this.props.highlightedLocationMessage,\n          secondaryIssueLocations\n        )}\n        highlightedSymbols={optimizeHighlightedSymbols(symbols, this.props.highlightedSymbols)}\n        issueLocations={issueLocations}\n        issuePopup={this.props.issuePopup}\n        issues={issuesForLine}\n        key={line.line}\n        last={false}\n        line={line}\n        linePopup={this.props.linePopup}\n        loadDuplications={this.props.loadDuplications}\n        onIssueChange={this.props.onIssueChange}\n        onIssuePopupToggle={this.props.onIssuePopupToggle}\n        onIssueSelect={() => {}}\n        onIssueUnselect={() => {}}\n        onIssuesClose={this.props.handleCloseIssues}\n        onIssuesOpen={this.props.handleOpenIssues}\n        onLinePopupToggle={this.props.handleLinePopupToggle}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.props.handleSymbolClick}\n        openIssues={this.props.openIssuesByLine[line.line]}\n        previousLine={index > 0 ? snippet[index - 1] : undefined}\n        renderDuplicationPopup={this.props.renderDuplicationPopup}\n        scroll={this.doScroll}\n        secondaryIssueLocations={secondaryIssueLocations}\n        selectedIssue={optimizeSelectedIssue(this.props.issue.key, issuesForLine)}\n        verticalBuffer={verticalBuffer}\n      />\n    );\n  }\n\n  render() {\n    const {\n      component,\n      displaySCM,\n      issue,\n      issuesByLine = {},\n      last,\n      locationsByLine,\n      openIssuesByLine,\n      snippet\n    } = this.props;\n    const lastLine =\n      component.measures && component.measures.lines && parseInt(component.measures.lines, 10);\n\n    const symbols = symbolsByLine(snippet);\n\n    const bottomLine = snippet[snippet.length - 1].line;\n    const issueLine = issue.textRange ? issue.textRange.endLine : issue.line;\n    const lowestVisibleIssue = Math.max(\n      ...Object.keys(issuesByLine)\n        .map(k => parseInt(k, 10))\n        .filter(l => inSnippet(l, snippet) && (l === issueLine || openIssuesByLine[l]))\n    );\n    const verticalBuffer = last\n      ? Math.max(0, LINES_BELOW_ISSUE - (bottomLine - lowestVisibleIssue))\n      : 0;\n\n    const displayDuplications = snippet.some(s => !!s.duplicated);\n\n    return (\n      <div className=\"source-viewer-code snippet\" ref={this.snippetNodeRef}>\n        <div>\n          {snippet[0].line > 1 && (\n            <div className=\"expand-block expand-block-above\">\n              <button\n                aria-label={translate('source_viewer.expand_above')}\n                onClick={this.expandBlock('up')}\n                type=\"button\">\n                <ExpandSnippetIcon />\n              </button>\n            </div>\n          )}\n          <table\n            className={classNames('source-table', {\n              'expand-up': snippet[0].line > 1,\n              'expand-down': !lastLine || snippet[snippet.length - 1].line < lastLine\n            })}>\n            <tbody>\n              {snippet.map((line, index) =>\n                this.renderLine({\n                  displayDuplications,\n                  displaySCM,\n                  index,\n                  issuesForLine: issuesByLine[line.line] || [],\n                  issueLocations: locationsByLine[line.line] || [],\n                  line,\n                  snippet,\n                  symbols: symbols[line.line],\n                  verticalBuffer: index === snippet.length - 1 ? verticalBuffer : 0\n                })\n              )}\n            </tbody>\n          </table>\n          {(!lastLine || snippet[snippet.length - 1].line < lastLine) && (\n            <div className=\"expand-block expand-block-below\">\n              <button\n                aria-label={translate('source_viewer.expand_below')}\n                onClick={this.expandBlock('down')}\n                type=\"button\">\n                <ExpandSnippetIcon />\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","\nvar content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Line.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Line.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Line.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".source-line:hover .source-line-coverage,.source-line:hover .source-line-duplications,.source-line:hover .source-line-duplications-extra,.source-line:hover .source-line-issues,.source-line:hover .source-line-number,.source-line:hover .source-line-scm{border-color:#e9e9e9;background-color:#e9e9e9}.source-line:hover .source-line-code{background-color:#f5f5f5}.source-line-highlighted .source-line-coverage,.source-line-highlighted .source-line-duplications,.source-line-highlighted .source-line-duplications-extra,.source-line-highlighted .source-line-issues,.source-line-highlighted .source-line-number,.source-line-highlighted .source-line-scm,.source-line-highlighted:hover .source-line-coverage,.source-line-highlighted:hover .source-line-duplications,.source-line-highlighted:hover .source-line-duplications-extra,.source-line-highlighted:hover .source-line-issues,.source-line-highlighted:hover .source-line-number,.source-line-highlighted:hover .source-line-scm{border-color:#c4dfec!important;background-color:#c4dfec}.source-line-highlighted .source-line-code,.source-line-highlighted:hover .source-line-code{background-color:#d9edf7}.source-line-filtered .source-line-code{background-color:#fbf3d5!important}.source-line-filtered.source-line-highlighted .source-line-code,.source-line-filtered.source-line-highlighted:hover .source-line-code{background-color:#cdd9c4!important}.source-line-filtered.source-line-filtered-dark .source-line-code{background-color:#f9ebb7!important}.source-line-filtered.source-line-filtered-dark:hover .source-line-code,.source-line-filtered:hover .source-line-code{background-color:#f1e8cb!important}.source-line-last .source-line-code{padding-bottom:160px}.source-viewer pre{height:18px;padding:0}.source-line-number,.source-line-scm,.source-viewer pre{line-height:18px;font-family:Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px}.source-line-code{position:relative;padding:0 10px}.source-line-code pre{float:left}.source-line-code .issue-list{margin-left:-10px;margin-right:-10px}.source-line-code-inner{min-height:18px}.source-line-code-inner:after,.source-line-code-inner:before{display:table;content:\\\"\\\";line-height:0}.source-line-code-inner:after{clear:both}.source-line-code-issue{display:inline-block;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAGCAYAAAAPDoR2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1M0M2Rjk4M0M3QUYxMUUzODkzRUREMUM5OTNDMjY4QSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1M0M2Rjk4NEM3QUYxMUUzODkzRUREMUM5OTNDMjY4QSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjUzQzZGOTgxQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjUzQzZGOTgyQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+bcqJtQAAAEhJREFUeNpi+G+swwDGDAwgbAWlwZiJAQFCgfgwEIfDRaC67ID4NRDnQ2kQnwFZwgFqnANMAQOUYY9sF0wBiCGH5CBkrAgQYACuWi4sSGW8yAAAAABJRU5ErkJggg==);background-repeat:repeat-x;background-size:4px;background-position:bottom}.source-meta{position:relative;vertical-align:top;width:1px;background-clip:padding-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.source-meta:focus{outline:none}.source-meta[role=button]{cursor:pointer}.source-line-number{min-width:18px;padding:0 10px;background-color:#f3f3f3;color:#777;text-align:right}.source-line-number:before{content:attr(data-line-number)}.source-line-issues{position:relative;padding:0 2px;background-color:#f3f3f3;white-space:nowrap}.source-line-with-issues svg{padding-right:2px;vertical-align:middle}.source-line-issues-counter{position:absolute;left:17px;line-height:8px;font-size:8px;z-index:900}.source-line-coverage,.source-line-duplications,.source-line-duplications-extra{background-color:#f3f3f3}.source-duplications-expanded .source-line-duplications,.source-line-duplications-extra{display:none}.source-duplications-expanded .source-line-duplications-extra{display:table-cell}.source-line-scm{padding:0 5px;background-color:#f3f3f3}.source-line-scm-inner{max-width:40px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.source-line-scm-inner:before{content:attr(data-author)}.source-line-bar{width:5px;height:18px}.source-line-bar[role=button]{cursor:pointer}.source-line-bar:focus{outline:none}.source-line-covered{background-color:#b4dd78!important}.source-line-partially-covered,.source-line-uncovered{background-color:#a4030f!important}.source-line-partially-covered{background-image:repeating-linear-gradient(45deg,hsla(0,0%,100%,.5) 4px,transparent 0,transparent 8px,hsla(0,0%,100%,.5) 0,hsla(0,0%,100%,.5) 12px,transparent 0,transparent 16px,hsla(0,0%,100%,.5) 0,hsla(0,0%,100%,.5) 20px)!important}.source-line-duplicated{background-color:#797979!important}\", \"\"]);\n\n","\nvar content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./SnippetViewer.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./SnippetViewer.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./SnippetViewer.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".snippet{margin:8px;border:1px solid #cdcdcd;overflow-x:auto;overflow-y:hidden;transition:max-height .2s}.snippet>div{display:table;width:100%;position:relative;transition:margin-top .2s}.snippet table{width:100%}.expand-block{position:absolute;z-index:2;width:100%}.expand-block>button{background:transparent;box-sizing:border-box;color:#777;height:20px;width:100%;padding:2px;border:0;text-align:left;cursor:pointer}.expand-block>button:active,.expand-block>button:focus,.expand-block>button:hover{color:#236a97;outline:none}.expand-block-above{background:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAAXNSR0IArs4c6QAAADdJREFUCB1dzMEKADAIAlBd1v9/bcc2YgRjHh8qq2qTxCQzsX4wM6y30RARF3sy0Es1SIK7Y64OpCES1W69JS4AAAAASUVORK5CYII=\\\");top:0}.expand-block-below{background:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wQQBjQEQVd5jwAAADhJREFUCNddyTEKADEMA8GVA/7/Z+PGwUp1cGTaYe/tv5lxrLWoKj6SiMzkjZDEG7JtANt0N+ccLrB/KZxXTt7fAAAAAElFTkSuQmCC\\\");bottom:0}.source-table.expand-up{margin-top:20px}.source-table.expand-down{margin-bottom:20px}\", \"\"]);\n\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./HotspotList.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./HotspotList.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./HotspotList.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".hotspot-list-header{padding:16px 8px}.hotspot-risk-header{padding:8px}.hotspot-category{background-color:#fff;border:1px solid #e6e6e6}.hotspot-category .hotspot-category-header{padding:16px 8px;color:#444;border-bottom:none;border-left:4px solid}.hotspot-category .hotspot-category-header.contains-selected-hotspot,.hotspot-category .hotspot-category-header:hover{color:#4b9fd5}.hotspot-category.HIGH .hotspot-category-header{border-left-color:#d4333f}.hotspot-category.MEDIUM .hotspot-category-header{border-left-color:#ed7d20}.hotspot-category.LOW .hotspot-category-header{border-left-color:#eabe06}.hotspot-item{color:#444;display:block;padding:8px 16px;border:1px solid transparent;border-top-color:#e6e6e6;transition:padding 0s,border 0s}.hotspot-item:hover{background-color:#f2faff;border:1px dashed #4b9fd5;color:#444}.hotspot-item.highlight{background-color:#f2faff;color:#444;border:1px solid #4b9fd5;cursor:unset}.hotspot-risk-badge{color:#fff;text-transform:uppercase;display:inline-block;text-align:center;min-width:48px;padding:0 8px;font-weight:700;border-radius:2px}.hotspot-risk-badge.HIGH{background-color:#d4333f}.hotspot-risk-badge.MEDIUM{background-color:#ed7d20}.hotspot-risk-badge.LOW{background-color:#eabe06}\", \"\"]);\n\n","\nvar content = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../../node_modules/postcss-loader/src/index.js??postcss!./AssigneeSelection.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../../node_modules/postcss-loader/src/index.js??postcss!./AssigneeSelection.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../../node_modules/postcss-loader/src/index.js??postcss!./AssigneeSelection.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".hotspot-assignee-search-results{min-width:300px}.hotspot-assignee-search-results li{cursor:pointer}.hotspot-assignee-search-results li.active,.hotspot-assignee-search-results li:hover{background-color:#f3f3f3}\", \"\"]);\n\n","\nvar content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./HotspotViewer.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./HotspotViewer.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./HotspotViewer.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".hotspot-information{flex-basis:320px}.hotspot-information>div>span{flex-basis:100px}\", \"\"]);\n\n","\nvar content = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Status.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Status.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Status.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"#status-trigger,#status-trigger+.popup{width:400px;box-sizing:border-box}#status-trigger{height:80px;border-radius:4px;outline:none}#status-trigger.readonly{cursor:not-allowed}#status-trigger:not(.readonly){cursor:pointer;background-color:#236a97}#status-trigger:not(.readonly) *{color:#fff}\", \"\"]);\n\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"#security_hotspots .wrapper{position:fixed;bottom:0;width:100%}#security_hotspots .layout-page{margin:0 auto;min-width:1080px;max-width:1280px;height:100%}#security_hotspots .filter-bar{max-width:1280px;box-sizing:border-box;margin:0 auto;padding:16px 8px;border-bottom:1px solid #e6e6e6}#security_hotspots .sidebar{flex:0 0 300px;border-right:1px solid #e6e6e6;height:100%;overflow-y:auto}#security_hotspots .main{flex:1 1 auto;background-color:#fff;overflow-x:auto}#security_hotspots .main .hotspot-content{overflow-y:auto;height:100%;box-sizing:border-box}.invisible{visibility:hidden}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport enum RiskExposure {\n  LOW = 'LOW',\n  MEDIUM = 'MEDIUM',\n  HIGH = 'HIGH'\n}\n\nexport enum HotspotStatus {\n  TO_REVIEW = 'TO_REVIEW',\n  REVIEWED = 'REVIEWED'\n}\n\nexport enum HotspotResolution {\n  FIXED = 'FIXED',\n  SAFE = 'SAFE'\n}\n\nexport enum HotspotStatusFilter {\n  FIXED = 'FIXED',\n  SAFE = 'SAFE',\n  TO_REVIEW = 'TO_REVIEW'\n}\n\nexport enum HotspotStatusOption {\n  FIXED = 'FIXED',\n  SAFE = 'SAFE',\n  TO_REVIEW = 'TO_REVIEW'\n}\n\nexport interface HotspotFilters {\n  assignedToMe: boolean;\n  sinceLeakPeriod: boolean;\n  status: HotspotStatusFilter;\n}\n\nexport interface RawHotspot {\n  assignee?: string;\n  author?: string;\n  component: string;\n  creationDate: string;\n  key: string;\n  line?: number;\n  message: string;\n  project: string;\n  resolution?: HotspotResolution;\n  rule: string;\n  securityCategory: string;\n  status: HotspotStatus;\n  subProject?: string;\n  updateDate: string;\n  vulnerabilityProbability: RiskExposure;\n}\n\nexport interface Hotspot {\n  assignee?: string;\n  assigneeUser?: T.UserBase;\n  author: string;\n  authorUser: T.UserBase;\n  canChangeStatus: boolean;\n  changelog: T.IssueChangelog[];\n  comment: HotspotComment[];\n  component: T.Component;\n  creationDate: string;\n  key: string;\n  line?: number;\n  message: string;\n  project: T.Component;\n  resolution?: HotspotResolution;\n  rule: HotspotRule;\n  status: HotspotStatus;\n  textRange: T.TextRange;\n  updateDate: string;\n  users: T.UserBase[];\n}\n\nexport interface HotspotUpdateFields {\n  status: HotspotStatus;\n  resolution?: HotspotResolution;\n}\n\nexport interface HotspotUpdate extends HotspotUpdateFields {\n  key: string;\n}\n\nexport interface HotspotRule {\n  fixRecommendations?: string;\n  key: string;\n  name: string;\n  riskDescription?: string;\n  securityCategory: string;\n  vulnerabilityDescription?: string;\n  vulnerabilityProbability: RiskExposure;\n}\n\nexport interface HotspotComment {\n  key: string;\n  htmlText: string;\n  markdown: string;\n  updatable: boolean;\n  createdAt: string;\n  login: string;\n  user: T.UserBase;\n}\n\nexport interface ReviewHistoryElement {\n  type: ReviewHistoryType;\n  date: string;\n  user: Pick<T.UserBase, 'active' | 'avatar' | 'name'>;\n  diffs?: T.IssueChangelogDiff[];\n  html?: string;\n  key?: string;\n  updatable?: boolean;\n  markdown?: string;\n}\n\nexport enum ReviewHistoryType {\n  Creation,\n  Diff,\n  Comment\n}\n\nexport interface HotspotSearchResponse {\n  components?: { key: string; qualifier: string; name: string }[];\n  hotspots: RawHotspot[];\n  paging: T.Paging;\n}\n\nexport interface HotspotSetStatusRequest {\n  status: HotspotStatus;\n  resolution?: HotspotResolution;\n  comment?: string;\n}\n\nexport interface HotspotAssignRequest {\n  assignee: string;\n  comment?: string;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getBaseUrl } from 'sonar-ui-common/helpers/urls';\n\nexport interface EmptyHotspotsPageProps {\n  filtered: boolean;\n  isStaticListOfHotspots: boolean;\n}\n\nexport default function EmptyHotspotsPage(props: EmptyHotspotsPageProps) {\n  const { filtered, isStaticListOfHotspots } = props;\n\n  let translationRoot;\n  if (isStaticListOfHotspots) {\n    translationRoot = 'no_hotspots_for_keys';\n  } else if (filtered) {\n    translationRoot = 'no_hotspots_for_filters';\n  } else {\n    translationRoot = 'no_hotspots';\n  }\n\n  return (\n    <div className=\"display-flex-column display-flex-center huge-spacer-top\">\n      <img\n        alt={translate('hotspots.page')}\n        className=\"huge-spacer-top\"\n        height={100}\n        src={`${getBaseUrl()}/images/${filtered ? 'filter-large' : 'hotspot-large'}.svg`}\n      />\n      <h1 className=\"huge-spacer-top\">{translate(`hotspots.${translationRoot}.title`)}</h1>\n      <div className=\"abs-width-400 text-center big-spacer-top\">\n        {translate(`hotspots.${translationRoot}.description`)}\n      </div>\n      {!(filtered || isStaticListOfHotspots) && (\n        <Link\n          className=\"big-spacer-top\"\n          target=\"_blank\"\n          to={{ pathname: '/documentation/user-guide/security-hotspots/' }}>\n          {translate('hotspots.learn_more')}\n        </Link>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport RadioToggle from 'sonar-ui-common/components/controls/RadioToggle';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { withCurrentUser } from '../../../components/hoc/withCurrentUser';\nimport Measure from '../../../components/measure/Measure';\nimport CoverageRating from '../../../components/ui/CoverageRating';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { ComponentQualifier } from '../../../types/component';\nimport { HotspotFilters, HotspotStatusFilter } from '../../../types/security-hotspots';\n\nexport interface FilterBarProps {\n  currentUser: T.CurrentUser;\n  component: T.Component;\n  filters: HotspotFilters;\n  hotspotsReviewedMeasure?: string;\n  isStaticListOfHotspots: boolean;\n  loadingMeasure: boolean;\n  onBranch: boolean;\n  onChangeFilters: (filters: Partial<HotspotFilters>) => void;\n  onShowAllHotspots: () => void;\n}\n\nconst statusOptions: Array<{ label: string; value: string }> = [\n  { value: HotspotStatusFilter.TO_REVIEW, label: translate('hotspot.filters.status.to_review') },\n  { value: HotspotStatusFilter.FIXED, label: translate('hotspot.filters.status.fixed') },\n  { value: HotspotStatusFilter.SAFE, label: translate('hotspot.filters.status.safe') }\n];\n\nconst periodOptions = [\n  { value: true, label: translate('hotspot.filters.period.since_leak_period') },\n  { value: false, label: translate('hotspot.filters.period.overall') }\n];\n\nexport enum AssigneeFilterOption {\n  ALL = 'all',\n  ME = 'me'\n}\n\nconst assigneeFilterOptions = [\n  { value: AssigneeFilterOption.ME, label: translate('hotspot.filters.assignee.assigned_to_me') },\n  { value: AssigneeFilterOption.ALL, label: translate('hotspot.filters.assignee.all') }\n];\n\nexport function FilterBar(props: FilterBarProps) {\n  const {\n    currentUser,\n    component,\n    filters,\n    hotspotsReviewedMeasure,\n    isStaticListOfHotspots,\n    loadingMeasure,\n    onBranch\n  } = props;\n  const isProject = component.qualifier === ComponentQualifier.Project;\n\n  return (\n    <div className=\"filter-bar display-flex-center\">\n      {isStaticListOfHotspots ? (\n        <a id=\"show_all_hotspot\" onClick={() => props.onShowAllHotspots()} role=\"link\" tabIndex={0}>\n          {translate('hotspot.filters.show_all')}\n        </a>\n      ) : (\n        <div className=\"display-flex-space-between width-100\">\n          <div className=\"display-flex-center\">\n            <h3 className=\"huge-spacer-right\">{translate('hotspot.filters.title')}</h3>\n\n            {isLoggedIn(currentUser) && (\n              <RadioToggle\n                className=\"huge-spacer-right\"\n                name=\"assignee-filter\"\n                onCheck={(value: AssigneeFilterOption) =>\n                  props.onChangeFilters({ assignedToMe: value === AssigneeFilterOption.ME })\n                }\n                options={assigneeFilterOptions}\n                value={filters.assignedToMe ? AssigneeFilterOption.ME : AssigneeFilterOption.ALL}\n              />\n            )}\n\n            <span className=\"spacer-right\">{translate('status')}</span>\n            <Select\n              className=\"input-medium big-spacer-right\"\n              clearable={false}\n              onChange={(option: { value: HotspotStatusFilter }) =>\n                props.onChangeFilters({ status: option.value })\n              }\n              options={statusOptions}\n              searchable={false}\n              value={filters.status}\n            />\n\n            {onBranch && (\n              <Select\n                className=\"input-medium big-spacer-right\"\n                clearable={false}\n                onChange={(option: { value: boolean }) =>\n                  props.onChangeFilters({ sinceLeakPeriod: option.value })\n                }\n                options={periodOptions}\n                searchable={false}\n                value={filters.sinceLeakPeriod}\n              />\n            )}\n          </div>\n\n          {isProject && (\n            <div className=\"display-flex-center\">\n              <span className=\"little-spacer-right\">\n                {translate('metric.security_hotspots_reviewed.name')}\n              </span>\n              <HelpTooltip\n                className=\"big-spacer-right\"\n                overlay={translate('hotspots.reviewed.tooltip')}\n              />\n              <DeferredSpinner loading={loadingMeasure}>\n                {hotspotsReviewedMeasure && <CoverageRating value={hotspotsReviewedMeasure} />}\n                <Measure\n                  className=\"spacer-left huge\"\n                  metricKey={\n                    onBranch && !filters.sinceLeakPeriod\n                      ? 'security_hotspots_reviewed'\n                      : 'new_security_hotspots_reviewed'\n                  }\n                  metricType=\"PERCENT\"\n                  value={hotspotsReviewedMeasure}\n                />\n              </DeferredSpinner>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default withCurrentUser(FilterBar);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { groupBy, sortBy } from 'lodash';\nimport {\n  Hotspot,\n  HotspotResolution,\n  HotspotStatus,\n  HotspotStatusOption,\n  RawHotspot,\n  ReviewHistoryElement,\n  ReviewHistoryType,\n  RiskExposure\n} from '../../types/security-hotspots';\n\nexport const RISK_EXPOSURE_LEVELS = [RiskExposure.HIGH, RiskExposure.MEDIUM, RiskExposure.LOW];\n\nexport function mapRules(rules: Array<{ key: string; name: string }>): T.Dict<string> {\n  return rules.reduce((ruleMap: T.Dict<string>, r) => {\n    ruleMap[r.key] = r.name;\n    return ruleMap;\n  }, {});\n}\n\nexport function groupByCategory(\n  hotspots: RawHotspot[] = [],\n  securityCategories: T.StandardSecurityCategories\n) {\n  const groups = groupBy(hotspots, h => h.securityCategory);\n\n  return Object.keys(groups).map(key => ({\n    key,\n    title: getCategoryTitle(key, securityCategories),\n    hotspots: groups[key]\n  }));\n}\n\nexport function sortHotspots(\n  hotspots: RawHotspot[],\n  securityCategories: T.Dict<{ title: string }>\n) {\n  return sortBy(hotspots, [\n    h => RISK_EXPOSURE_LEVELS.indexOf(h.vulnerabilityProbability),\n    h => getCategoryTitle(h.securityCategory, securityCategories),\n    h => h.message\n  ]);\n}\n\nfunction getCategoryTitle(key: string, securityCategories: T.StandardSecurityCategories) {\n  return securityCategories[key] ? securityCategories[key].title : key;\n}\n\nexport function constructSourceViewerFile(\n  { component, project }: Hotspot,\n  lines?: number\n): T.SourceViewerFile {\n  return {\n    key: component.key,\n    measures: { lines: lines ? lines.toString() : undefined },\n    path: component.path || '',\n    project: project.key,\n    projectName: project.name,\n    q: component.qualifier,\n    uuid: ''\n  };\n}\n\nexport function getHotspotReviewHistory(hotspot: Hotspot): ReviewHistoryElement[] {\n  const history: ReviewHistoryElement[] = [];\n\n  if (hotspot.creationDate) {\n    history.push({\n      type: ReviewHistoryType.Creation,\n      date: hotspot.creationDate,\n      user: {\n        ...hotspot.authorUser,\n        name: hotspot.authorUser.name || hotspot.authorUser.login\n      }\n    });\n  }\n\n  if (hotspot.changelog && hotspot.changelog.length > 0) {\n    history.push(\n      ...hotspot.changelog.map(log => ({\n        type: ReviewHistoryType.Diff,\n        date: log.creationDate,\n        user: {\n          active: log.isUserActive,\n          avatar: log.avatar,\n          name: log.userName || log.user\n        },\n        diffs: log.diffs\n      }))\n    );\n  }\n\n  if (hotspot.comment && hotspot.comment.length > 0) {\n    history.push(\n      ...hotspot.comment.map(comment => ({\n        type: ReviewHistoryType.Comment,\n        date: comment.createdAt,\n        updatable: comment.updatable,\n        user: {\n          ...comment.user,\n          name: comment.user.name || comment.user.login\n        },\n        html: comment.htmlText,\n        key: comment.key,\n        markdown: comment.markdown\n      }))\n    );\n  }\n\n  return sortBy(history, elt => elt.date);\n}\n\nconst STATUS_AND_RESOLUTION_TO_STATUS_OPTION = {\n  [HotspotStatus.TO_REVIEW]: HotspotStatusOption.TO_REVIEW,\n  [HotspotStatus.REVIEWED]: HotspotStatusOption.FIXED,\n  [HotspotResolution.FIXED]: HotspotStatusOption.FIXED,\n  [HotspotResolution.SAFE]: HotspotStatusOption.SAFE\n};\n\nexport function getStatusOptionFromStatusAndResolution(\n  status: HotspotStatus,\n  resolution?: HotspotResolution\n) {\n  // Resolution is the most determinist info here, so we use it first to get the matching status option\n  // If not provided, we use the status (which will be TO_REVIEW)\n  return STATUS_AND_RESOLUTION_TO_STATUS_OPTION[resolution ?? status];\n}\n\nconst STATUS_OPTION_TO_STATUS_AND_RESOLUTION_MAP = {\n  [HotspotStatusOption.TO_REVIEW]: { status: HotspotStatus.TO_REVIEW, resolution: undefined },\n  [HotspotStatusOption.FIXED]: {\n    status: HotspotStatus.REVIEWED,\n    resolution: HotspotResolution.FIXED\n  },\n  [HotspotStatusOption.SAFE]: {\n    status: HotspotStatus.REVIEWED,\n    resolution: HotspotResolution.SAFE\n  }\n};\n\nexport function getStatusAndResolutionFromStatusOption(statusOption: HotspotStatusOption) {\n  return STATUS_OPTION_TO_STATUS_AND_RESOLUTION_MAP[statusOption];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { RawHotspot } from '../../../types/security-hotspots';\nimport { getStatusOptionFromStatusAndResolution } from '../utils';\n\nexport interface HotspotListItemProps {\n  hotspot: RawHotspot;\n  onClick: (hotspot: RawHotspot) => void;\n  selected: boolean;\n}\n\nexport default function HotspotListItem(props: HotspotListItemProps) {\n  const { hotspot, selected } = props;\n  return (\n    <a\n      className={classNames('hotspot-item', { highlight: selected })}\n      href=\"#\"\n      onClick={() => !selected && props.onClick(hotspot)}>\n      <div className=\"little-spacer-left\">{hotspot.message}</div>\n      <div className=\"badge spacer-top\">\n        {translate(\n          'hotspots.status_option',\n          getStatusOptionFromStatusAndResolution(hotspot.status, hotspot.resolution)\n        )}\n      </div>\n    </a>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport ChevronDownIcon from 'sonar-ui-common/components/icons/ChevronDownIcon';\nimport ChevronUpIcon from 'sonar-ui-common/components/icons/ChevronUpIcon';\nimport { RawHotspot } from '../../../types/security-hotspots';\nimport HotspotListItem from './HotspotListItem';\n\nexport interface HotspotCategoryProps {\n  categoryKey: string;\n  expanded: boolean;\n  hotspots: RawHotspot[];\n  onHotspotClick: (hotspot: RawHotspot) => void;\n  onToggleExpand: (categoryKey: string, value: boolean) => void;\n  selectedHotspot: RawHotspot;\n  title: string;\n}\n\nexport default function HotspotCategory(props: HotspotCategoryProps) {\n  const { categoryKey, expanded, hotspots, selectedHotspot, title } = props;\n\n  if (hotspots.length < 1) {\n    return null;\n  }\n\n  const risk = hotspots[0].vulnerabilityProbability;\n\n  return (\n    <div className={classNames('hotspot-category', risk)}>\n      <a\n        className={classNames(\n          'hotspot-category-header display-flex-space-between display-flex-center',\n          { 'contains-selected-hotspot': selectedHotspot.securityCategory === categoryKey }\n        )}\n        href=\"#\"\n        onClick={() => props.onToggleExpand(categoryKey, !expanded)}>\n        <strong className=\"flex-1\">{title}</strong>\n        <span>\n          <span className=\"counter-badge\">{hotspots.length}</span>\n          {expanded ? (\n            <ChevronUpIcon className=\"big-spacer-left\" />\n          ) : (\n            <ChevronDownIcon className=\"big-spacer-left\" />\n          )}\n        </span>\n      </a>\n      {expanded && (\n        <ul>\n          {hotspots.map(h => (\n            <li key={h.key}>\n              <HotspotListItem\n                hotspot={h}\n                onClick={props.onHotspotClick}\n                selected={h.key === selectedHotspot.key}\n              />\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { groupBy } from 'lodash';\nimport * as React from 'react';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport SecurityHotspotIcon from 'sonar-ui-common/components/icons/SecurityHotspotIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { HotspotStatusFilter, RawHotspot, RiskExposure } from '../../../types/security-hotspots';\nimport { groupByCategory, RISK_EXPOSURE_LEVELS } from '../utils';\nimport HotspotCategory from './HotspotCategory';\nimport './HotspotList.css';\n\ninterface Props {\n  hotspots: RawHotspot[];\n  hotspotsTotal?: number;\n  isStaticListOfHotspots: boolean;\n  loadingMore: boolean;\n  onHotspotClick: (hotspot: RawHotspot) => void;\n  onLoadMore: () => void;\n  securityCategories: T.StandardSecurityCategories;\n  selectedHotspot: RawHotspot;\n  statusFilter: HotspotStatusFilter;\n}\n\ninterface State {\n  expandedCategories: T.Dict<boolean>;\n  groupedHotspots: Array<{\n    risk: RiskExposure;\n    categories: Array<{ key: string; hotspots: RawHotspot[]; title: string }>;\n  }>;\n}\n\nexport default class HotspotList extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      expandedCategories: { [props.selectedHotspot.securityCategory]: true },\n      groupedHotspots: this.groupHotspots(props.hotspots, props.securityCategories)\n    };\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    // Force open the category of selected hotspot\n    if (\n      this.props.selectedHotspot.securityCategory !== prevProps.selectedHotspot.securityCategory\n    ) {\n      this.handleToggleCategory(this.props.selectedHotspot.securityCategory, true);\n    }\n\n    // Compute the hotspot tree from the list\n    if (\n      this.props.hotspots !== prevProps.hotspots ||\n      this.props.securityCategories !== prevProps.securityCategories\n    ) {\n      const groupedHotspots = this.groupHotspots(\n        this.props.hotspots,\n        this.props.securityCategories\n      );\n      this.setState({ groupedHotspots });\n    }\n  }\n\n  groupHotspots = (hotspots: RawHotspot[], securityCategories: T.StandardSecurityCategories) => {\n    const risks = groupBy(hotspots, h => h.vulnerabilityProbability);\n\n    return RISK_EXPOSURE_LEVELS.map(risk => ({\n      risk,\n      categories: groupByCategory(risks[risk], securityCategories)\n    })).filter(risk => risk.categories.length > 0);\n  };\n\n  handleToggleCategory = (categoryKey: string, value: boolean) => {\n    this.setState(({ expandedCategories }) => ({\n      expandedCategories: { ...expandedCategories, [categoryKey]: value }\n    }));\n  };\n\n  render() {\n    const {\n      hotspots,\n      hotspotsTotal,\n      isStaticListOfHotspots,\n      loadingMore,\n      selectedHotspot,\n      statusFilter\n    } = this.props;\n\n    const { expandedCategories, groupedHotspots } = this.state;\n\n    return (\n      <div className=\"huge-spacer-bottom\">\n        <h1 className=\"hotspot-list-header bordered-bottom\">\n          <SecurityHotspotIcon className=\"spacer-right\" />\n          {translateWithParameters(\n            isStaticListOfHotspots ? 'hotspots.list_title' : `hotspots.list_title.${statusFilter}`,\n            hotspots.length\n          )}\n        </h1>\n        <ul className=\"big-spacer-bottom\">\n          {groupedHotspots.map(riskGroup => (\n            <li className=\"big-spacer-bottom\" key={riskGroup.risk}>\n              <div className=\"hotspot-risk-header little-spacer-left\">\n                <span>{translate('hotspots.risk_exposure')}:</span>\n                <div className={classNames('hotspot-risk-badge', 'spacer-left', riskGroup.risk)}>\n                  {translate('risk_exposure', riskGroup.risk)}\n                </div>\n              </div>\n              <ul>\n                {riskGroup.categories.map(cat => (\n                  <li className=\"spacer-bottom\" key={cat.key}>\n                    <HotspotCategory\n                      categoryKey={cat.key}\n                      expanded={expandedCategories[cat.key]}\n                      hotspots={cat.hotspots}\n                      onHotspotClick={this.props.onHotspotClick}\n                      onToggleExpand={this.handleToggleCategory}\n                      selectedHotspot={selectedHotspot}\n                      title={cat.title}\n                    />\n                  </li>\n                ))}\n              </ul>\n            </li>\n          ))}\n        </ul>\n        <ListFooter\n          count={hotspots.length}\n          loadMore={!loadingMore ? this.props.onLoadMore : undefined}\n          loading={loadingMore}\n          total={hotspotsTotal}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../../../components/ui/Avatar';\nimport './AssigneeSelection.css';\n\nexport interface HotspotAssigneeSelectRendererProps {\n  highlighted?: T.UserActive;\n  loading: boolean;\n  onKeyDown: (event: React.KeyboardEvent) => void;\n  onSearch: (query: string) => void;\n  onSelect: (user: T.UserActive) => void;\n  open: boolean;\n  query?: string;\n  suggestedUsers?: T.UserActive[];\n}\n\nexport default function AssigneeSelectionRenderer(props: HotspotAssigneeSelectRendererProps) {\n  const { highlighted, loading, open, query, suggestedUsers } = props;\n  return (\n    <>\n      <div className=\"display-flex-center\">\n        <SearchBox\n          autoFocus={true}\n          onChange={props.onSearch}\n          onKeyDown={props.onKeyDown}\n          placeholder={translate('hotspots.assignee.select_user')}\n          value={query}\n        />\n\n        {loading && <DeferredSpinner className=\"spacer-left\" />}\n      </div>\n\n      {!loading && open && (\n        <div className=\"position-relative\">\n          <DropdownOverlay noPadding={true} placement={PopupPlacement.BottomLeft}>\n            {suggestedUsers && suggestedUsers.length > 0 ? (\n              <ul className=\"hotspot-assignee-search-results\">\n                {suggestedUsers.map(suggestion => (\n                  <li\n                    className={classNames('padded', {\n                      active: highlighted && highlighted.login === suggestion.login\n                    })}\n                    key={suggestion.login}\n                    onClick={() => props.onSelect(suggestion)}>\n                    <Avatar\n                      className=\"spacer-right\"\n                      hash={suggestion.avatar}\n                      name={suggestion.name}\n                      size={16}\n                    />\n                    {suggestion.name}\n                  </li>\n                ))}\n              </ul>\n            ) : (\n              <div className=\"padded\">{translate('no_results')}</div>\n            )}\n          </DropdownOverlay>\n        </div>\n      )}\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce } from 'lodash';\nimport * as React from 'react';\nimport { KeyCodes } from 'sonar-ui-common/helpers/keycodes';\nimport { searchUsers } from '../../../../api/users';\nimport { isUserActive } from '../../../../helpers/users';\nimport AssigneeSelectionRenderer from './AssigneeSelectionRenderer';\n\ninterface Props {\n  allowCurrentUserSelection: boolean;\n  loggedInUser: T.LoggedInUser;\n  onSelect: (user?: T.UserActive) => void;\n}\n\ninterface State {\n  highlighted?: T.UserActive;\n  loading: boolean;\n  open: boolean;\n  query?: string;\n  suggestedUsers: T.UserActive[];\n}\n\nexport default class AssigneeSelection extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      loading: false,\n      open: props.allowCurrentUserSelection,\n      suggestedUsers: props.allowCurrentUserSelection ? [props.loggedInUser] : []\n    };\n\n    this.handleSearch = debounce(this.handleSearch, 250);\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleSearch = (query: string) => {\n    if (this.mounted) {\n      if (query.length < 2) {\n        this.handleNoSearch(query);\n      } else {\n        this.handleActualSearch(query);\n      }\n    }\n  };\n\n  handleNoSearch = (query: string) => {\n    const { allowCurrentUserSelection, loggedInUser } = this.props;\n\n    this.setState({\n      loading: false,\n      open: allowCurrentUserSelection,\n      query,\n      suggestedUsers: allowCurrentUserSelection ? [loggedInUser] : []\n    });\n  };\n\n  handleActualSearch = (query: string) => {\n    this.setState({ loading: true, query });\n    searchUsers({ q: query })\n      .then(result => {\n        if (this.mounted) {\n          this.setState({\n            loading: false,\n            query,\n            open: true,\n            suggestedUsers: result.users.filter(isUserActive) as T.UserActive[]\n          });\n        }\n      })\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      });\n  };\n\n  handleKeyDown = (event: React.KeyboardEvent) => {\n    switch (event.keyCode) {\n      case KeyCodes.Enter:\n        event.preventDefault();\n        this.selectHighlighted();\n        break;\n      case KeyCodes.UpArrow:\n        event.preventDefault();\n        this.highlightPrevious();\n        break;\n      case KeyCodes.DownArrow:\n        event.preventDefault();\n        this.highlightNext();\n        break;\n    }\n  };\n\n  getCurrentIndex = () => {\n    const { highlighted, suggestedUsers } = this.state;\n\n    return highlighted\n      ? suggestedUsers.findIndex(suggestion => suggestion.login === highlighted.login)\n      : -1;\n  };\n\n  highlightIndex = (index: number) => {\n    const { suggestedUsers } = this.state;\n\n    if (suggestedUsers.length > 0) {\n      if (index < 0) {\n        index = suggestedUsers.length - 1;\n      } else if (index >= suggestedUsers.length) {\n        index = 0;\n      }\n\n      this.setState({ highlighted: suggestedUsers[index] });\n    }\n  };\n\n  highlightPrevious = () => {\n    this.highlightIndex(this.getCurrentIndex() - 1);\n  };\n\n  highlightNext = () => {\n    this.highlightIndex(this.getCurrentIndex() + 1);\n  };\n\n  selectHighlighted = () => {\n    const { highlighted } = this.state;\n\n    if (highlighted !== undefined) {\n      this.props.onSelect(highlighted);\n    }\n  };\n\n  render() {\n    const { highlighted, loading, open, query, suggestedUsers } = this.state;\n\n    return (\n      <AssigneeSelectionRenderer\n        highlighted={highlighted}\n        loading={loading}\n        onKeyDown={this.handleKeyDown}\n        onSearch={this.handleSearch}\n        onSelect={this.props.onSelect}\n        open={open}\n        query={query}\n        suggestedUsers={suggestedUsers}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport * as React from 'react';\nimport { EditButton } from 'sonar-ui-common/components/controls/buttons';\nimport EscKeydownHandler from 'sonar-ui-common/components/controls/EscKeydownHandler';\nimport OutsideClickHandler from 'sonar-ui-common/components/controls/OutsideClickHandler';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport AssigneeSelection from './AssigneeSelection';\n\nexport interface AssigneeRendererProps {\n  canEdit: boolean;\n  editing: boolean;\n  loading: boolean;\n\n  assignee?: T.UserBase;\n  loggedInUser?: T.LoggedInUser;\n\n  onAssign: (user?: T.UserActive) => void;\n  onEnterEditionMode: () => void;\n  onExitEditionMode: () => void;\n}\n\nexport default function AssigneeRenderer(props: AssigneeRendererProps) {\n  const { assignee, canEdit, loggedInUser, editing, loading } = props;\n\n  return (\n    <DeferredSpinner loading={loading}>\n      {!editing && (\n        <div className=\"display-flex-center\">\n          <strong className=\"nowrap\">\n            {assignee &&\n              (assignee.active\n                ? assignee.name ?? assignee.login\n                : translateWithParameters('user.x_deleted', assignee.name ?? assignee.login))}\n            {!assignee && translate('unassigned')}\n          </strong>\n          {loggedInUser && canEdit && (\n            <EditButton className=\"spacer-left\" onClick={props.onEnterEditionMode} />\n          )}\n        </div>\n      )}\n\n      {loggedInUser && editing && (\n        <EscKeydownHandler onKeydown={props.onExitEditionMode}>\n          <OutsideClickHandler onClickOutside={props.onExitEditionMode}>\n            <AssigneeSelection\n              allowCurrentUserSelection={loggedInUser.login !== assignee?.login}\n              loggedInUser={loggedInUser}\n              onSelect={props.onAssign}\n            />\n          </OutsideClickHandler>\n        </EscKeydownHandler>\n      )}\n    </DeferredSpinner>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport * as React from 'react';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { assignSecurityHotspot } from '../../../../api/security-hotspots';\nimport addGlobalSuccessMessage from '../../../../app/utils/addGlobalSuccessMessage';\nimport { withCurrentUser } from '../../../../components/hoc/withCurrentUser';\nimport { isLoggedIn } from '../../../../helpers/users';\nimport { Hotspot, HotspotStatus } from '../../../../types/security-hotspots';\nimport AssigneeRenderer from './AssigneeRenderer';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  hotspot: Hotspot;\n\n  onAssigneeChange: () => void;\n}\n\ninterface State {\n  editing: boolean;\n  loading: boolean;\n}\n\nexport class Assignee extends React.PureComponent<Props, State> {\n  mounted = false;\n  state = {\n    editing: false,\n    loading: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleEnterEditionMode = () => {\n    this.setState({ editing: true });\n  };\n\n  handleExitEditionMode = () => {\n    this.setState({ editing: false });\n  };\n\n  handleAssign = (newAssignee?: T.UserActive) => {\n    if (newAssignee && newAssignee.login) {\n      this.setState({ loading: true });\n      assignSecurityHotspot(this.props.hotspot.key, {\n        assignee: newAssignee.login\n      })\n        .then(() => {\n          if (this.mounted) {\n            this.setState({ editing: false, loading: false });\n            this.props.onAssigneeChange();\n          }\n        })\n        .then(() =>\n          addGlobalSuccessMessage(\n            translateWithParameters('hotspots.assign.success', newAssignee.name)\n          )\n        )\n        .catch(() => this.setState({ loading: false }));\n    }\n  };\n\n  render() {\n    const {\n      currentUser,\n      hotspot: { assigneeUser, status }\n    } = this.props;\n    const { editing, loading } = this.state;\n\n    const canEdit = status === HotspotStatus.TO_REVIEW;\n\n    return (\n      <AssigneeRenderer\n        assignee={assigneeUser}\n        canEdit={canEdit}\n        editing={editing}\n        loading={loading}\n        loggedInUser={isLoggedIn(currentUser) ? currentUser : undefined}\n        onAssign={this.handleAssign}\n        onEnterEditionMode={this.handleEnterEditionMode}\n        onExitEditionMode={this.handleExitEditionMode}\n      />\n    );\n  }\n}\n\nexport default withCurrentUser(Assignee);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { BranchParameters } from '../types/branch-like';\nimport {\n  Hotspot,\n  HotspotAssignRequest,\n  HotspotComment,\n  HotspotResolution,\n  HotspotSearchResponse,\n  HotspotSetStatusRequest,\n  HotspotStatus\n} from '../types/security-hotspots';\n\nexport function assignSecurityHotspot(\n  hotspotKey: string,\n  data: HotspotAssignRequest\n): Promise<void> {\n  return post('/api/hotspots/assign', { hotspot: hotspotKey, ...data }).catch(throwGlobalError);\n}\n\nexport function setSecurityHotspotStatus(\n  hotspotKey: string,\n  data: HotspotSetStatusRequest\n): Promise<void> {\n  return post('/api/hotspots/change_status', { hotspot: hotspotKey, ...data }).catch(\n    throwGlobalError\n  );\n}\n\nexport function commentSecurityHotspot(hotspotKey: string, comment: string): Promise<void> {\n  return post('/api/hotspots/add_comment', { hotspot: hotspotKey, comment }).catch(\n    throwGlobalError\n  );\n}\n\nexport function deleteSecurityHotspotComment(commentKey: string): Promise<void> {\n  return post('/api/hotspots/delete_comment', { comment: commentKey }).catch(throwGlobalError);\n}\n\nexport function editSecurityHotspotComment(\n  commentKey: string,\n  comment: string\n): Promise<HotspotComment> {\n  return post('/api/hotspots/edit_comment', { comment: commentKey, text: comment }).catch(\n    throwGlobalError\n  );\n}\n\nexport function getSecurityHotspots(\n  data: {\n    projectKey: string;\n    p: number;\n    ps: number;\n    status?: HotspotStatus;\n    resolution?: HotspotResolution;\n    onlyMine?: boolean;\n    sinceLeakPeriod?: boolean;\n  } & BranchParameters\n): Promise<HotspotSearchResponse> {\n  return getJSON('/api/hotspots/search', data).catch(throwGlobalError);\n}\n\nexport function getSecurityHotspotList(\n  hotspotKeys: string[],\n  data: {\n    projectKey: string;\n  } & BranchParameters\n): Promise<HotspotSearchResponse> {\n  return getJSON('/api/hotspots/search', { ...data, hotspots: hotspotKeys.join() }).catch(\n    throwGlobalError\n  );\n}\n\nexport function getSecurityHotspotDetails(securityHotspotKey: string): Promise<Hotspot> {\n  return getJSON('/api/hotspots/show', { hotspot: securityHotspotKey })\n    .then((response: Hotspot & { users: T.UserBase[] }) => {\n      const { users, ...hotspot } = response;\n\n      if (users) {\n        if (hotspot.assignee) {\n          hotspot.assigneeUser = users.find(u => u.login === hotspot.assignee) || {\n            active: true,\n            login: hotspot.assignee\n          };\n        }\n        hotspot.authorUser = users.find(u => u.login === hotspot.author) || {\n          active: true,\n          login: hotspot.author\n        };\n        hotspot.comment.forEach(c => {\n          c.user = users.find(u => u.login === c.login) || { active: true, login: c.login };\n        });\n      }\n\n      return hotspot;\n    })\n    .catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MarkdownTips from '../../../components/common/MarkdownTips';\n\nexport interface HotspotCommentPopupProps {\n  markdownComment: string;\n  onCommentEditSubmit: (comment: string) => void;\n  onCancelEdit: () => void;\n}\n\nexport default function HotspotCommentPopup(props: HotspotCommentPopupProps) {\n  const [comment, setComment] = React.useState(props.markdownComment);\n\n  return (\n    <div className=\"issue-comment-bubble-popup\">\n      <div className=\"issue-comment-form-text\">\n        <textarea\n          autoFocus={true}\n          onChange={event => setComment(event.target.value)}\n          rows={2}\n          value={comment}\n        />\n      </div>\n      <div className=\"spacer-top display-flex-space-between\">\n        <div className=\"issue-comment-form-tips\">\n          <MarkdownTips />\n        </div>\n        <div className=\"\">\n          <Button\n            className=\"little-spacer-right\"\n            onClick={() => props.onCommentEditSubmit(comment)}>\n            {translate('save')}\n          </Button>\n          <ResetButtonLink\n            onClick={() => {\n              setComment('');\n              props.onCancelEdit();\n            }}>\n            {translate('cancel')}\n          </ResetButtonLink>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport { Button, DeleteButton, EditButton } from 'sonar-ui-common/components/controls/buttons';\nimport Dropdown, { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport DateTimeFormatter from '../../../components/intl/DateTimeFormatter';\nimport IssueChangelogDiff from '../../../components/issue/components/IssueChangelogDiff';\nimport Avatar from '../../../components/ui/Avatar';\nimport { Hotspot, ReviewHistoryType } from '../../../types/security-hotspots';\nimport { getHotspotReviewHistory } from '../utils';\nimport HotspotCommentPopup from './HotspotCommentPopup';\n\nexport interface HotspotReviewHistoryProps {\n  hotspot: Hotspot;\n  onDeleteComment: (key: string) => void;\n  onEditComment: (key: string, comment: string) => void;\n}\n\nexport default function HotspotReviewHistory(props: HotspotReviewHistoryProps) {\n  const { hotspot } = props;\n  const reviewHistory = getHotspotReviewHistory(hotspot);\n  const [editedCommentKey, setEditedCommentKey] = React.useState('');\n\n  return (\n    <>\n      {reviewHistory.map((historyElt, historyIndex) => {\n        const { user, type, diffs, date, html, key, updatable, markdown } = historyElt;\n        return (\n          <div\n            className={classNames('padded', { 'bordered-top': historyIndex > 0 })}\n            key={historyIndex}>\n            <div className=\"display-flex-center\">\n              {user.name && (\n                <>\n                  <Avatar\n                    className=\"little-spacer-right\"\n                    hash={user.avatar}\n                    name={user.name}\n                    size={20}\n                  />\n                  <strong>\n                    {user.active ? user.name : translateWithParameters('user.x_deleted', user.name)}\n                  </strong>\n                  {type === ReviewHistoryType.Creation && (\n                    <span className=\"little-spacer-left\">\n                      {translate('hotspots.review_history.created')}\n                    </span>\n                  )}\n                  {type === ReviewHistoryType.Comment && (\n                    <span className=\"little-spacer-left\">\n                      {translate('hotspots.review_history.comment_added')}\n                    </span>\n                  )}\n                  <span className=\"little-spacer-left little-spacer-right\">-</span>\n                </>\n              )}\n              <DateTimeFormatter date={date} />\n            </div>\n\n            {type === ReviewHistoryType.Diff && diffs && (\n              <div className=\"spacer-top\">\n                {diffs.map((diff, diffIndex) => (\n                  <IssueChangelogDiff diff={diff} key={diffIndex} />\n                ))}\n              </div>\n            )}\n\n            {type === ReviewHistoryType.Comment && key && html && markdown && (\n              <div className=\"spacer-top display-flex-space-between\">\n                <div className=\"markdown\" dangerouslySetInnerHTML={{ __html: sanitize(html) }} />\n                {updatable && (\n                  <div>\n                    <div className=\"dropdown\">\n                      <Toggler\n                        onRequestClose={() => {\n                          setEditedCommentKey('');\n                        }}\n                        open={key === editedCommentKey}\n                        overlay={\n                          <DropdownOverlay placement={PopupPlacement.BottomRight}>\n                            <HotspotCommentPopup\n                              markdownComment={markdown}\n                              onCancelEdit={() => setEditedCommentKey('')}\n                              onCommentEditSubmit={comment => {\n                                setEditedCommentKey('');\n                                props.onEditComment(key, comment);\n                              }}\n                            />\n                          </DropdownOverlay>\n                        }>\n                        <EditButton\n                          className=\"it__hotspots-comment-edit button-small\"\n                          onClick={() => setEditedCommentKey(key)}\n                        />\n                      </Toggler>\n                    </div>\n                    <Dropdown\n                      onOpen={() => setEditedCommentKey('')}\n                      overlay={\n                        <div className=\"padded abs-width-150\">\n                          <p>{translate('issue.comment.delete_confirm_message')}</p>\n                          <Button\n                            className=\"button-red big-spacer-top pull-right\"\n                            onClick={() => props.onDeleteComment(key)}>\n                            {translate('delete')}\n                          </Button>\n                        </div>\n                      }\n                      overlayPlacement={PopupPlacement.BottomRight}>\n                      <DeleteButton className=\"it__hotspots-comment-delete button-small\" />\n                    </Dropdown>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        );\n      })}\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  commentSecurityHotspot,\n  deleteSecurityHotspotComment,\n  editSecurityHotspotComment\n} from '../../../api/security-hotspots';\nimport MarkdownTips from '../../../components/common/MarkdownTips';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport HotspotReviewHistory from './HotspotReviewHistory';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  hotspot: Hotspot;\n  commentTextRef: React.RefObject<HTMLTextAreaElement>;\n  commentVisible: boolean;\n  onCommentUpdate: () => void;\n  onOpenComment: () => void;\n  onCloseComment: () => void;\n}\n\ninterface State {\n  comment: string;\n}\n\nexport default class HotspotReviewHistoryAndComments extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      comment: ''\n    };\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.hotspot !== this.props.hotspot) {\n      this.setState({\n        comment: ''\n      });\n    }\n  }\n\n  handleCommentChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ comment: event.target.value });\n  };\n\n  handleCloseComment = () => {\n    this.setState({ comment: '' });\n    this.props.onCloseComment();\n  };\n\n  handleSubmitComment = () => {\n    return commentSecurityHotspot(this.props.hotspot.key, this.state.comment).then(() => {\n      this.setState({ comment: '' });\n      this.props.onCloseComment();\n      this.props.onCommentUpdate();\n    });\n  };\n\n  handleDeleteComment = (key: string) => {\n    return deleteSecurityHotspotComment(key).then(() => {\n      this.props.onCommentUpdate();\n    });\n  };\n\n  handleEditComment = (key: string, comment: string) => {\n    return editSecurityHotspotComment(key, comment).then(() => {\n      this.props.onCommentUpdate();\n    });\n  };\n\n  render() {\n    const { currentUser, hotspot, commentTextRef, commentVisible } = this.props;\n    const { comment } = this.state;\n    return (\n      <>\n        <h1>{translate('hotspot.section.activity')}</h1>\n        <div className=\"padded\">\n          <HotspotReviewHistory\n            hotspot={hotspot}\n            onDeleteComment={this.handleDeleteComment}\n            onEditComment={this.handleEditComment}\n          />\n\n          {isLoggedIn(currentUser) && (\n            <>\n              <hr />\n              <div className=\"big-spacer-top\">\n                <Button\n                  className={classNames({ invisible: commentVisible })}\n                  id=\"hotspot-comment-box-display\"\n                  onClick={this.props.onOpenComment}>\n                  {translate('hotspots.comment.open')}\n                </Button>\n\n                <div className={classNames({ invisible: !commentVisible })}>\n                  <div className=\"little-spacer-bottom\">{translate('hotspots.comment.field')}</div>\n                  <textarea\n                    className=\"form-field fixed-width width-100 spacer-bottom\"\n                    onChange={this.handleCommentChange}\n                    ref={commentTextRef}\n                    rows={2}\n                    value={comment}\n                  />\n                  <div className=\"display-flex-space-between display-flex-center \">\n                    <MarkdownTips className=\"huge-spacer-bottom\" />\n                    <div>\n                      <Button\n                        className=\"huge-spacer-bottom\"\n                        id=\"hotspot-comment-box-submit\"\n                        onClick={this.handleSubmitComment}>\n                        {translate('hotspots.comment.submit')}\n                      </Button>\n                      <ResetButtonLink\n                        className=\"spacer-left huge-spacer-bottom\"\n                        id=\"hotspot-comment-box-cancel\"\n                        onClick={this.handleCloseComment}>\n                        {translate('cancel')}\n                      </ResetButtonLink>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { SourceViewerContext } from '../../../components/SourceViewer/SourceViewerContext';\nimport SourceViewerHeaderSlim from '../../../components/SourceViewer/SourceViewerHeaderSlim';\nimport { BranchLike } from '../../../types/branch-like';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport SnippetViewer from '../../issues/crossComponentSourceViewer/SnippetViewer';\n\nexport interface HotspotSnippetContainerRendererProps {\n  branchLike?: BranchLike;\n  highlightedSymbols: string[];\n  hotspot: Hotspot;\n  lastLine?: number;\n  loading: boolean;\n  locations: { [line: number]: T.LinearIssueLocation[] };\n  linePopup?: T.LinePopup & { component: string };\n  onExpandBlock: (direction: T.ExpandDirection) => Promise<void>;\n  onLinePopupToggle: (line: T.SourceLine) => void;\n  onSymbolClick: (symbols: string[]) => void;\n  sourceLines: T.SourceLine[];\n  sourceViewerFile: T.SourceViewerFile;\n}\n\nconst noop = () => undefined;\n\nexport default function HotspotSnippetContainerRenderer(\n  props: HotspotSnippetContainerRendererProps\n) {\n  const {\n    branchLike,\n    highlightedSymbols,\n    hotspot,\n    linePopup,\n    loading,\n    locations,\n    sourceLines,\n    sourceViewerFile\n  } = props;\n\n  return (\n    <div className=\"bordered big-spacer-bottom\">\n      <SourceViewerHeaderSlim\n        branchLike={branchLike}\n        expandable={false}\n        linkToProject={false}\n        loading={loading}\n        onExpand={noop}\n        sourceViewerFile={sourceViewerFile}\n      />\n      <DeferredSpinner loading={loading}>\n        {sourceLines.length > 0 && (\n          <SourceViewerContext.Provider /* Used by LineOptionsPopup */\n            value={{ branchLike, file: sourceViewerFile }}>\n            <SnippetViewer\n              branchLike={branchLike}\n              component={sourceViewerFile}\n              displaySCM={false}\n              expandBlock={(_i, direction) => props.onExpandBlock(direction)}\n              handleCloseIssues={noop}\n              handleLinePopupToggle={props.onLinePopupToggle}\n              handleOpenIssues={noop}\n              handleSymbolClick={props.onSymbolClick}\n              highlightedLocationMessage={undefined}\n              highlightedSymbols={highlightedSymbols}\n              index={0}\n              issue={hotspot}\n              issuesByLine={{}}\n              last={false}\n              linePopup={linePopup}\n              loadDuplications={noop}\n              locations={[]}\n              locationsByLine={locations}\n              onIssueChange={noop}\n              onIssuePopupToggle={noop}\n              onLocationSelect={noop}\n              openIssuesByLine={{}}\n              renderDuplicationPopup={noop}\n              snippet={sourceLines}\n            />\n          </SourceViewerContext.Provider>\n        )}\n      </DeferredSpinner>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport BoxedTabs from 'sonar-ui-common/components/controls/BoxedTabs';\nimport Tab from 'sonar-ui-common/components/controls/Tabs';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Hotspot } from '../../../types/security-hotspots';\n\ninterface Props {\n  hotspot: Hotspot;\n}\n\ninterface State {\n  currentTab: Tab;\n  tabs: Tab[];\n}\n\ninterface Tab {\n  key: TabKeys;\n  label: React.ReactNode;\n  content: string;\n}\n\nexport enum TabKeys {\n  RiskDescription = 'risk',\n  VulnerabilityDescription = 'vulnerability',\n  FixRecommendation = 'fix'\n}\n\nexport default class HotspotViewerTabs extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    const tabs = this.computeTabs();\n    this.state = {\n      currentTab: tabs[0],\n      tabs\n    };\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (this.props.hotspot.key !== prevProps.hotspot.key) {\n      const tabs = this.computeTabs();\n      this.setState({\n        currentTab: tabs[0],\n        tabs\n      });\n    }\n  }\n\n  handleSelectTabs = (tabKey: TabKeys) => {\n    const { tabs } = this.state;\n    const currentTab = tabs.find(tab => tab.key === tabKey)!;\n    this.setState({ currentTab });\n  };\n\n  computeTabs() {\n    const { hotspot } = this.props;\n    return [\n      {\n        key: TabKeys.RiskDescription,\n        label: translate('hotspots.tabs.risk_description'),\n        content: hotspot.rule.riskDescription || ''\n      },\n      {\n        key: TabKeys.VulnerabilityDescription,\n        label: translate('hotspots.tabs.vulnerability_description'),\n        content: hotspot.rule.vulnerabilityDescription || ''\n      },\n      {\n        key: TabKeys.FixRecommendation,\n        label: translate('hotspots.tabs.fix_recommendations'),\n        content: hotspot.rule.fixRecommendations || ''\n      }\n    ].filter(tab => Boolean(tab.content));\n  }\n\n  render() {\n    const { tabs, currentTab } = this.state;\n    if (tabs.length === 0) {\n      return null;\n    }\n\n    return (\n      <>\n        <BoxedTabs onSelect={this.handleSelectTabs} selected={currentTab.key} tabs={tabs} />\n        <div className=\"bordered huge-spacer-bottom\">\n          <div\n            className=\"markdown big-padded\"\n            dangerouslySetInnerHTML={{ __html: sanitize(currentTab.content) }}\n          />\n        </div>\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getSources } from '../../../api/components';\nimport { locationsByLine } from '../../../components/SourceViewer/helpers/indexing';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { BranchLike } from '../../../types/branch-like';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport { constructSourceViewerFile } from '../utils';\nimport HotspotSnippetContainerRenderer from './HotspotSnippetContainerRenderer';\n\ninterface Props {\n  branchLike?: BranchLike;\n  hotspot: Hotspot;\n}\n\ninterface State {\n  highlightedSymbols: string[];\n  lastLine?: number;\n  loading: boolean;\n  linePopup?: T.LinePopup & { component: string };\n  sourceLines: T.SourceLine[];\n}\n\nconst BUFFER_LINES = 5;\nconst EXPAND_BY_LINES = 50;\n\nexport default class HotspotSnippetContainer extends React.Component<Props, State> {\n  mounted = false;\n  state: State = {\n    highlightedSymbols: [],\n    loading: true,\n    sourceLines: []\n  };\n\n  componentWillMount() {\n    this.mounted = true;\n    this.fetchSources();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.hotspot.key !== this.props.hotspot.key) {\n      this.fetchSources();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  checkLastLine(lines: T.SourceLine[], target: number): number | undefined {\n    if (lines.length < 1) {\n      return undefined;\n    }\n    const lastLineReceived = lines[lines.length - 1].line;\n    if (lastLineReceived < target) {\n      return lastLineReceived;\n    }\n    return undefined;\n  }\n\n  fetchSources() {\n    const {\n      branchLike,\n      hotspot: { component, textRange }\n    } = this.props;\n\n    const from = Math.max(1, textRange.startLine - BUFFER_LINES);\n    // Add 1 to check for end-of-file:\n    const to = textRange.endLine + BUFFER_LINES + 1;\n\n    this.setState({ loading: true });\n    return getSources({ key: component.key, from, to, ...getBranchLikeQuery(branchLike) })\n      .then(sourceLines => {\n        if (this.mounted) {\n          const lastLine = this.checkLastLine(sourceLines, to);\n\n          // remove extra sourceline if we didn't reach the end:\n          sourceLines = lastLine ? sourceLines : sourceLines.slice(0, -1);\n          this.setState({ lastLine, loading: false, sourceLines });\n        }\n      })\n      .catch(() => this.mounted && this.setState({ loading: false }));\n  }\n\n  handleExpansion = (direction: T.ExpandDirection) => {\n    const { branchLike, hotspot } = this.props;\n    const { sourceLines } = this.state;\n\n    const range =\n      direction === 'up'\n        ? {\n            from: Math.max(1, sourceLines[0].line - EXPAND_BY_LINES),\n            to: sourceLines[0].line - 1\n          }\n        : {\n            from: sourceLines[sourceLines.length - 1].line + 1,\n            // Add 1 to check for end-of-file:\n            to: sourceLines[sourceLines.length - 1].line + EXPAND_BY_LINES + 1\n          };\n\n    return getSources({\n      key: hotspot.component.key,\n      ...range,\n      ...getBranchLikeQuery(branchLike)\n    }).then(additionalLines => {\n      const lastLine =\n        direction === 'down' ? this.checkLastLine(additionalLines, range.to) : undefined;\n\n      let concatSourceLines;\n      if (direction === 'up') {\n        concatSourceLines = additionalLines.concat(sourceLines);\n      } else {\n        // remove extra sourceline if we didn't reach the end:\n        concatSourceLines = sourceLines.concat(\n          lastLine ? additionalLines : additionalLines.slice(0, -1)\n        );\n      }\n\n      this.setState({\n        lastLine,\n        sourceLines: concatSourceLines\n      });\n    });\n  };\n\n  handleLinePopupToggle = (params: T.LinePopup & { component: string }) => {\n    const { component, index, line, name, open } = params;\n    this.setState((state: State) => {\n      const samePopup =\n        state.linePopup !== undefined &&\n        state.linePopup.line === line &&\n        state.linePopup.name === name &&\n        state.linePopup.component === component &&\n        state.linePopup.index === index;\n      if (open !== false && !samePopup) {\n        return { linePopup: params };\n      } else if (open !== true && samePopup) {\n        return { linePopup: undefined };\n      }\n      return null;\n    });\n  };\n\n  handleSymbolClick = (highlightedSymbols: string[]) => {\n    this.setState({ highlightedSymbols });\n  };\n\n  render() {\n    const { branchLike, hotspot } = this.props;\n    const { highlightedSymbols, lastLine, linePopup, loading, sourceLines } = this.state;\n\n    const locations = locationsByLine([hotspot]);\n\n    const sourceViewerFile = constructSourceViewerFile(hotspot, lastLine);\n\n    return (\n      <HotspotSnippetContainerRenderer\n        branchLike={branchLike}\n        highlightedSymbols={highlightedSymbols}\n        hotspot={hotspot}\n        lastLine={lastLine}\n        linePopup={linePopup}\n        loading={loading}\n        locations={locations}\n        onExpandBlock={this.handleExpansion}\n        onLinePopupToggle={this.handleLinePopupToggle}\n        onSymbolClick={this.handleSymbolClick}\n        sourceLines={sourceLines}\n        sourceViewerFile={sourceViewerFile}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { HotspotStatusOption } from '../../../../types/security-hotspots';\n\nexport interface StatusDescriptionProps {\n  statusOption: HotspotStatusOption;\n  showTitle?: boolean;\n}\n\nexport default function StatusDescription(props: StatusDescriptionProps) {\n  const { statusOption, showTitle } = props;\n\n  return (\n    <div>\n      <h3>\n        {showTitle && `${translate('status')}: `}\n        {translate('hotspots.status_option', statusOption)}\n      </h3>\n      <span>{translate('hotspots.status_option', statusOption, 'description')}</span>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport * as React from 'react';\nimport { SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Radio from 'sonar-ui-common/components/controls/Radio';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MarkdownTips from '../../../../components/common/MarkdownTips';\nimport { HotspotStatusOption } from '../../../../types/security-hotspots';\nimport StatusDescription from './StatusDescription';\n\nexport interface StatusSelectionRendererProps {\n  selectedStatus: HotspotStatusOption;\n  onStatusChange: (statusOption: HotspotStatusOption) => void;\n\n  comment?: string;\n  onCommentChange: (comment: string) => void;\n\n  onSubmit: () => void;\n\n  loading: boolean;\n  submitDisabled: boolean;\n}\n\nexport default function StatusSelectionRenderer(props: StatusSelectionRendererProps) {\n  const { comment, loading, selectedStatus, submitDisabled } = props;\n\n  const renderOption = (status: HotspotStatusOption) => {\n    return (\n      <Radio\n        checked={selectedStatus === status}\n        className=\"big-spacer-bottom\"\n        onCheck={props.onStatusChange}\n        value={status}>\n        <StatusDescription statusOption={status} />\n      </Radio>\n    );\n  };\n\n  return (\n    <>\n      <div className=\"big-padded\">\n        {renderOption(HotspotStatusOption.TO_REVIEW)}\n        {renderOption(HotspotStatusOption.FIXED)}\n        {renderOption(HotspotStatusOption.SAFE)}\n      </div>\n\n      <hr />\n      <div className=\"big-padded display-flex-column\">\n        <label className=\"text-bold\" htmlFor=\"comment-textarea\">\n          {translate('hotspots.status.add_comment')}\n        </label>\n        <textarea\n          className=\"spacer-top form-field fixed-width spacer-bottom\"\n          id=\"comment-textarea\"\n          onChange={(event: React.ChangeEvent<HTMLTextAreaElement>) =>\n            props.onCommentChange(event.currentTarget.value)\n          }\n          rows={4}\n          value={comment}\n        />\n        <MarkdownTips />\n\n        <div className=\"big-spacer-top display-flex-justify-end display-flex-center\">\n          <SubmitButton disabled={submitDisabled || loading} onClick={props.onSubmit}>\n            {translate('hotspots.status.change_status')}\n          </SubmitButton>\n\n          {loading && <i className=\"spacer-left spinner\" />}\n        </div>\n      </div>\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { setSecurityHotspotStatus } from '../../../../api/security-hotspots';\nimport addGlobalSuccessMessage from '../../../../app/utils/addGlobalSuccessMessage';\nimport { Hotspot, HotspotStatusOption } from '../../../../types/security-hotspots';\nimport {\n  getStatusAndResolutionFromStatusOption,\n  getStatusOptionFromStatusAndResolution\n} from '../../utils';\nimport StatusSelectionRenderer from './StatusSelectionRenderer';\n\ninterface Props {\n  hotspot: Hotspot;\n  onStatusOptionChange: (statusOption: HotspotStatusOption) => void;\n}\n\ninterface State {\n  comment?: string;\n  loading: boolean;\n  initialStatus: HotspotStatusOption;\n  selectedStatus: HotspotStatusOption;\n}\n\nexport default class StatusSelection extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    const initialStatus = getStatusOptionFromStatusAndResolution(\n      props.hotspot.status,\n      props.hotspot.resolution\n    );\n\n    this.state = {\n      loading: false,\n      initialStatus,\n      selectedStatus: initialStatus\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleStatusChange = (selectedStatus: HotspotStatusOption) => {\n    this.setState({ selectedStatus });\n  };\n\n  handleCommentChange = (comment: string) => {\n    this.setState({ comment });\n  };\n\n  handleSubmit = () => {\n    const { hotspot } = this.props;\n    const { comment, initialStatus, selectedStatus } = this.state;\n\n    if (selectedStatus && selectedStatus !== initialStatus) {\n      this.setState({ loading: true });\n      setSecurityHotspotStatus(hotspot.key, {\n        ...getStatusAndResolutionFromStatusOption(selectedStatus),\n        comment: comment || undefined\n      })\n        .then(() => {\n          this.setState({ loading: false });\n          this.props.onStatusOptionChange(selectedStatus);\n        })\n        .then(() =>\n          addGlobalSuccessMessage(\n            translateWithParameters(\n              'hotspots.update.success',\n              translate('hotspots.status_option', selectedStatus)\n            )\n          )\n        )\n        .catch(() => this.setState({ loading: false }));\n    }\n  };\n\n  render() {\n    const { comment, initialStatus, loading, selectedStatus } = this.state;\n    const submitDisabled = selectedStatus === initialStatus;\n\n    return (\n      <StatusSelectionRenderer\n        comment={comment}\n        loading={loading}\n        onCommentChange={this.handleCommentChange}\n        onStatusChange={this.handleStatusChange}\n        onSubmit={this.handleSubmit}\n        selectedStatus={selectedStatus}\n        submitDisabled={submitDisabled}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport ChevronDownIcon from 'sonar-ui-common/components/icons/ChevronDownIcon';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { withCurrentUser } from '../../../../components/hoc/withCurrentUser';\nimport { isLoggedIn } from '../../../../helpers/users';\nimport { Hotspot } from '../../../../types/security-hotspots';\nimport { getStatusOptionFromStatusAndResolution } from '../../utils';\nimport './Status.css';\nimport StatusDescription from './StatusDescription';\nimport StatusSelection from './StatusSelection';\n\nexport interface StatusProps {\n  currentUser: T.CurrentUser;\n  hotspot: Hotspot;\n\n  onStatusChange: () => void;\n}\n\nexport function Status(props: StatusProps) {\n  const { currentUser, hotspot } = props;\n  const [isOpen, setIsOpen] = React.useState(false);\n\n  const statusOption = getStatusOptionFromStatusAndResolution(hotspot.status, hotspot.resolution);\n  const readonly = !hotspot.canChangeStatus || !isLoggedIn(currentUser);\n\n  const trigger = (\n    <div\n      aria-expanded={isOpen}\n      aria-haspopup={true}\n      className={classNames('padded bordered display-flex-column display-flex-justify-center', {\n        readonly\n      })}\n      id=\"status-trigger\"\n      onClick={() => !readonly && setIsOpen(true)}\n      role=\"button\"\n      tabIndex={0}>\n      <div className=\"display-flex-center display-flex-space-between\">\n        {isOpen ? (\n          <span className=\"h3\">{translate('hotspots.status.select_status')}</span>\n        ) : (\n          <StatusDescription showTitle={true} statusOption={statusOption} />\n        )}\n        {!readonly && <ChevronDownIcon className=\"big-spacer-left\" />}\n      </div>\n    </div>\n  );\n\n  const actionableTrigger = (\n    <Toggler\n      closeOnClickOutside={true}\n      closeOnEscape={true}\n      onRequestClose={() => setIsOpen(false)}\n      open={isOpen}\n      overlay={\n        <DropdownOverlay noPadding={true} placement={PopupPlacement.Bottom}>\n          <StatusSelection\n            hotspot={hotspot}\n            onStatusOptionChange={() => {\n              setIsOpen(false);\n              props.onStatusChange();\n            }}\n          />\n        </DropdownOverlay>\n      }>\n      {trigger}\n    </Toggler>\n  );\n\n  return (\n    <div className=\"dropdown\">\n      {readonly ? (\n        <Tooltip overlay={translate('hotspots.status.cannot_change_status')} placement=\"bottom\">\n          {actionableTrigger}\n        </Tooltip>\n      ) : (\n        actionableTrigger\n      )}\n    </div>\n  );\n}\n\nexport default withCurrentUser(Status);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { ClipboardButton } from 'sonar-ui-common/components/controls/clipboard';\nimport LinkIcon from 'sonar-ui-common/components/icons/LinkIcon';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getPathUrlAsString } from 'sonar-ui-common/helpers/urls';\nimport { withCurrentUser } from '../../../components/hoc/withCurrentUser';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { getComponentSecurityHotspotsUrl } from '../../../helpers/urls';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { BranchLike } from '../../../types/branch-like';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport Assignee from './assignee/Assignee';\nimport HotspotReviewHistoryAndComments from './HotspotReviewHistoryAndComments';\nimport HotspotSnippetContainer from './HotspotSnippetContainer';\nimport './HotspotViewer.css';\nimport HotspotViewerTabs from './HotspotViewerTabs';\nimport Status from './status/Status';\n\nexport interface HotspotViewerRendererProps {\n  branchLike?: BranchLike;\n  component: T.Component;\n  currentUser: T.CurrentUser;\n  hotspot?: Hotspot;\n  loading: boolean;\n  commentVisible: boolean;\n  commentTextRef: React.RefObject<HTMLTextAreaElement>;\n  onOpenComment: () => void;\n  onCloseComment: () => void;\n  onUpdateHotspot: () => Promise<void>;\n  parentScrollRef: React.RefObject<HTMLDivElement>;\n  securityCategories: T.StandardSecurityCategories;\n}\n\nexport function HotspotViewerRenderer(props: HotspotViewerRendererProps) {\n  const {\n    branchLike,\n    component,\n    currentUser,\n    hotspot,\n    loading,\n    securityCategories,\n    commentTextRef,\n    commentVisible,\n    parentScrollRef\n  } = props;\n\n  const permalink = getPathUrlAsString(\n    getComponentSecurityHotspotsUrl(component.key, {\n      ...getBranchLikeQuery(branchLike),\n      hotspots: hotspot?.key\n    }),\n    false\n  );\n\n  return (\n    <DeferredSpinner loading={loading}>\n      {hotspot && (\n        <div className=\"big-padded hotspot-content\" ref={parentScrollRef}>\n          <div className=\"huge-spacer-bottom display-flex-space-between\">\n            <strong className=\"big big-spacer-right\">{hotspot.message}</strong>\n            <div className=\"display-flex-row flex-0\">\n              {isLoggedIn(currentUser) && (\n                <div className=\"dropdown spacer-right flex-1-0-auto\">\n                  <Button onClick={props.onOpenComment}>\n                    {translate('hotspots.comment.open')}\n                  </Button>\n                </div>\n              )}\n              <ClipboardButton className=\"flex-1-0-auto\" copyValue={permalink}>\n                <LinkIcon className=\"spacer-right\" />\n                <span>{translate('hotspots.get_permalink')}</span>\n              </ClipboardButton>\n            </div>\n          </div>\n\n          <div className=\"huge-spacer-bottom display-flex-row\">\n            <div className=\"hotspot-information display-flex-column display-flex-space-between\">\n              <div className=\"display-flex-center\">\n                <span className=\"big-spacer-right\">{translate('category')}</span>\n                <strong className=\"nowrap\">\n                  {securityCategories[hotspot.rule.securityCategory].title}\n                </strong>\n              </div>\n              <div className=\"display-flex-center\">\n                <span className=\"big-spacer-right\">{translate('hotspots.risk_exposure')}</span>\n                <div\n                  className={classNames(\n                    'hotspot-risk-badge',\n                    hotspot.rule.vulnerabilityProbability\n                  )}>\n                  {translate('risk_exposure', hotspot.rule.vulnerabilityProbability)}\n                </div>\n              </div>\n              <div className=\"display-flex-center\">\n                <span className=\"big-spacer-right\">{translate('assignee')}</span>\n                <div>\n                  <Assignee hotspot={hotspot} onAssigneeChange={props.onUpdateHotspot} />\n                </div>\n              </div>\n            </div>\n            <div className=\"huge-spacer-left\">\n              <Status hotspot={hotspot} onStatusChange={props.onUpdateHotspot} />\n            </div>\n          </div>\n\n          <HotspotSnippetContainer branchLike={branchLike} hotspot={hotspot} />\n          <HotspotViewerTabs hotspot={hotspot} />\n          <HotspotReviewHistoryAndComments\n            commentTextRef={commentTextRef}\n            commentVisible={commentVisible}\n            currentUser={currentUser}\n            hotspot={hotspot}\n            onCloseComment={props.onCloseComment}\n            onCommentUpdate={props.onUpdateHotspot}\n            onOpenComment={props.onOpenComment}\n          />\n        </div>\n      )}\n    </DeferredSpinner>\n  );\n}\n\nexport default withCurrentUser(HotspotViewerRenderer);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport * as React from 'react';\nimport { scrollToElement } from 'sonar-ui-common/helpers/scrolling';\nimport { getSecurityHotspotDetails } from '../../../api/security-hotspots';\nimport { BranchLike } from '../../../types/branch-like';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport HotspotViewerRenderer from './HotspotViewerRenderer';\n\ninterface Props {\n  branchLike?: BranchLike;\n  component: T.Component;\n  hotspotKey: string;\n  onUpdateHotspot: (hotspotKey: string) => Promise<void>;\n  securityCategories: T.StandardSecurityCategories;\n}\n\ninterface State {\n  hotspot?: Hotspot;\n  loading: boolean;\n  commentVisible: boolean;\n}\n\nexport default class HotspotViewer extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State;\n  commentTextRef: React.RefObject<HTMLTextAreaElement>;\n  parentScrollRef: React.RefObject<HTMLDivElement>;\n\n  constructor(props: Props) {\n    super(props);\n    this.commentTextRef = React.createRef<HTMLTextAreaElement>();\n    this.parentScrollRef = React.createRef<HTMLDivElement>();\n    this.state = { loading: false, commentVisible: false };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchHotspot();\n  }\n\n  componentDidUpdate(prevProps: Props, prevState: State) {\n    if (prevProps.hotspotKey !== this.props.hotspotKey) {\n      this.fetchHotspot();\n    }\n    if (this.commentTextRef.current && !prevState.commentVisible && this.state.commentVisible) {\n      this.commentTextRef.current.focus({ preventScroll: true });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchHotspot = () => {\n    this.setState({ loading: true });\n    return getSecurityHotspotDetails(this.props.hotspotKey)\n      .then(hotspot => {\n        if (this.mounted) {\n          this.setState({ hotspot, loading: false });\n        }\n        return hotspot;\n      })\n      .catch(() => this.mounted && this.setState({ loading: false }));\n  };\n\n  handleHotspotUpdate = () => {\n    return this.fetchHotspot().then((hotspot?: Hotspot) => {\n      if (hotspot) {\n        return this.props.onUpdateHotspot(hotspot.key);\n      }\n    });\n  };\n\n  handleOpenComment = () => {\n    this.setState({ commentVisible: true });\n    if (this.commentTextRef.current) {\n      // Edge case when the comment is already open and unfocus.\n      this.commentTextRef.current.focus({ preventScroll: true });\n    }\n    if (this.commentTextRef.current && this.parentScrollRef.current) {\n      scrollToElement(this.commentTextRef.current, {\n        parent: this.parentScrollRef.current,\n        bottomOffset: 100\n      });\n    }\n  };\n\n  handleCloseComment = () => {\n    this.setState({ commentVisible: false });\n  };\n\n  render() {\n    const { branchLike, component, securityCategories } = this.props;\n    const { hotspot, loading, commentVisible } = this.state;\n\n    return (\n      <HotspotViewerRenderer\n        branchLike={branchLike}\n        component={component}\n        commentTextRef={this.commentTextRef}\n        commentVisible={commentVisible}\n        hotspot={hotspot}\n        loading={loading}\n        onCloseComment={this.handleCloseComment}\n        onOpenComment={this.handleOpenComment}\n        onUpdateHotspot={this.handleHotspotUpdate}\n        parentScrollRef={this.parentScrollRef}\n        securityCategories={securityCategories}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport A11ySkipTarget from '../../app/components/a11y/A11ySkipTarget';\nimport Suggestions from '../../app/components/embed-docs-modal/Suggestions';\nimport ScreenPositionHelper from '../../components/common/ScreenPositionHelper';\nimport { isBranch } from '../../helpers/branch-like';\nimport { BranchLike } from '../../types/branch-like';\nimport { HotspotFilters, HotspotStatusFilter, RawHotspot } from '../../types/security-hotspots';\nimport EmptyHotspotsPage from './components/EmptyHotspotsPage';\nimport FilterBar from './components/FilterBar';\nimport HotspotList from './components/HotspotList';\nimport HotspotViewer from './components/HotspotViewer';\nimport './styles.css';\n\nexport interface SecurityHotspotsAppRendererProps {\n  branchLike?: BranchLike;\n  component: T.Component;\n  filters: HotspotFilters;\n  hotspots: RawHotspot[];\n  hotspotsReviewedMeasure?: string;\n  hotspotsTotal?: number;\n  isStaticListOfHotspots: boolean;\n  loading: boolean;\n  loadingMeasure: boolean;\n  loadingMore: boolean;\n  onChangeFilters: (filters: Partial<HotspotFilters>) => void;\n  onHotspotClick: (hotspot: RawHotspot) => void;\n  onLoadMore: () => void;\n  onShowAllHotspots: () => void;\n  onUpdateHotspot: (hotspotKey: string) => Promise<void>;\n  selectedHotspot: RawHotspot | undefined;\n  securityCategories: T.StandardSecurityCategories;\n}\n\nexport default function SecurityHotspotsAppRenderer(props: SecurityHotspotsAppRendererProps) {\n  const {\n    branchLike,\n    component,\n    hotspots,\n    hotspotsReviewedMeasure,\n    hotspotsTotal,\n    isStaticListOfHotspots,\n    loading,\n    loadingMeasure,\n    loadingMore,\n    securityCategories,\n    selectedHotspot,\n    filters\n  } = props;\n\n  return (\n    <div id=\"security_hotspots\">\n      <FilterBar\n        component={component}\n        filters={filters}\n        hotspotsReviewedMeasure={hotspotsReviewedMeasure}\n        isStaticListOfHotspots={isStaticListOfHotspots}\n        loadingMeasure={loadingMeasure}\n        onBranch={isBranch(branchLike)}\n        onChangeFilters={props.onChangeFilters}\n        onShowAllHotspots={props.onShowAllHotspots}\n      />\n      <ScreenPositionHelper>\n        {({ top }) => (\n          <div className=\"wrapper\" style={{ top }}>\n            <Suggestions suggestions=\"security_hotspots\" />\n            <Helmet title={translate('hotspots.page')} />\n\n            <A11ySkipTarget anchor=\"security_hotspots_main\" />\n\n            {loading ? (\n              <DeferredSpinner className=\"huge-spacer-left big-spacer-top\" />\n            ) : (\n              <>\n                {hotspots.length === 0 || !selectedHotspot ? (\n                  <EmptyHotspotsPage\n                    filtered={\n                      filters.assignedToMe ||\n                      (isBranch(branchLike) && filters.sinceLeakPeriod) ||\n                      filters.status !== HotspotStatusFilter.TO_REVIEW\n                    }\n                    isStaticListOfHotspots={isStaticListOfHotspots}\n                  />\n                ) : (\n                  <div className=\"layout-page\">\n                    <div className=\"sidebar\">\n                      <HotspotList\n                        hotspots={hotspots}\n                        hotspotsTotal={hotspotsTotal}\n                        isStaticListOfHotspots={isStaticListOfHotspots}\n                        loadingMore={loadingMore}\n                        onHotspotClick={props.onHotspotClick}\n                        onLoadMore={props.onLoadMore}\n                        securityCategories={securityCategories}\n                        selectedHotspot={selectedHotspot}\n                        statusFilter={filters.status}\n                      />\n                    </div>\n                    <div className=\"main\">\n                      <HotspotViewer\n                        branchLike={branchLike}\n                        component={component}\n                        hotspotKey={selectedHotspot.key}\n                        onUpdateHotspot={props.onUpdateHotspot}\n                        securityCategories={securityCategories}\n                      />\n                    </div>\n                  </div>\n                )}\n              </>\n            )}\n          </div>\n        )}\n      </ScreenPositionHelper>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { Location } from 'history';\nimport { flatMap, range } from 'lodash';\nimport * as React from 'react';\nimport { addNoFooterPageClass, removeNoFooterPageClass } from 'sonar-ui-common/helpers/pages';\nimport { getMeasures } from '../../api/measures';\nimport { getSecurityHotspotList, getSecurityHotspots } from '../../api/security-hotspots';\nimport { withCurrentUser } from '../../components/hoc/withCurrentUser';\nimport { Router } from '../../components/hoc/withRouter';\nimport { getLeakValue } from '../../components/measure/utils';\nimport { getBranchLikeQuery, isPullRequest, isSameBranchLike } from '../../helpers/branch-like';\nimport { getStandards } from '../../helpers/security-standard';\nimport { isLoggedIn } from '../../helpers/users';\nimport { BranchLike } from '../../types/branch-like';\nimport {\n  HotspotFilters,\n  HotspotResolution,\n  HotspotStatus,\n  HotspotStatusFilter,\n  RawHotspot\n} from '../../types/security-hotspots';\nimport SecurityHotspotsAppRenderer from './SecurityHotspotsAppRenderer';\nimport './styles.css';\n\nconst PAGE_SIZE = 500;\n\ninterface Props {\n  branchLike?: BranchLike;\n  currentUser: T.CurrentUser;\n  component: T.Component;\n  location: Location;\n  router: Router;\n}\n\ninterface State {\n  hotspotKeys?: string[];\n  hotspots: RawHotspot[];\n  hotspotsPageIndex: number;\n  hotspotsReviewedMeasure?: string;\n  hotspotsTotal?: number;\n  loading: boolean;\n  loadingMeasure: boolean;\n  loadingMore: boolean;\n  securityCategories: T.StandardSecurityCategories;\n  selectedHotspot: RawHotspot | undefined;\n  filters: HotspotFilters;\n}\n\nexport class SecurityHotspotsApp extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      loading: true,\n      loadingMeasure: false,\n      loadingMore: false,\n      hotspots: [],\n      hotspotsPageIndex: 1,\n      securityCategories: {},\n      selectedHotspot: undefined,\n      filters: {\n        ...this.constructFiltersFromProps(props),\n        status: HotspotStatusFilter.TO_REVIEW\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    addNoFooterPageClass();\n    this.fetchInitialData();\n  }\n\n  componentDidUpdate(previous: Props) {\n    if (\n      this.props.component.key !== previous.component.key ||\n      this.props.location.query.hotspots !== previous.location.query.hotspots\n    ) {\n      this.fetchInitialData();\n    }\n\n    if (\n      !isSameBranchLike(this.props.branchLike, previous.branchLike) ||\n      isLoggedIn(this.props.currentUser) !== isLoggedIn(previous.currentUser) ||\n      this.props.location.query.assignedToMe !== previous.location.query.assignedToMe ||\n      this.props.location.query.sinceLeakPeriod !== previous.location.query.sinceLeakPeriod\n    ) {\n      this.setState(({ filters }) => ({\n        filters: { ...this.constructFiltersFromProps, ...filters }\n      }));\n    }\n  }\n\n  componentWillUnmount() {\n    removeNoFooterPageClass();\n    this.mounted = false;\n  }\n\n  constructFiltersFromProps(\n    props: Props\n  ): Pick<HotspotFilters, 'assignedToMe' | 'sinceLeakPeriod'> {\n    return {\n      assignedToMe: props.location.query.assignedToMe === 'true' && isLoggedIn(props.currentUser),\n      sinceLeakPeriod:\n        isPullRequest(props.branchLike) || props.location.query.sinceLeakPeriod === 'true'\n    };\n  }\n\n  handleCallFailure = () => {\n    if (this.mounted) {\n      this.setState({ loading: false, loadingMore: false });\n    }\n  };\n\n  fetchInitialData() {\n    return Promise.all([\n      getStandards(),\n      this.fetchSecurityHotspots(),\n      this.fetchSecurityHotspotsReviewed()\n    ])\n      .then(([{ sonarsourceSecurity }, { hotspots, paging }]) => {\n        if (!this.mounted) {\n          return;\n        }\n\n        this.setState({\n          hotspots,\n          hotspotsTotal: paging.total,\n          loading: false,\n          securityCategories: sonarsourceSecurity,\n          selectedHotspot: hotspots.length > 0 ? hotspots[0] : undefined\n        });\n      })\n      .catch(this.handleCallFailure);\n  }\n\n  fetchSecurityHotspotsReviewed = () => {\n    const { branchLike, component } = this.props;\n    const { filters } = this.state;\n\n    const reviewedHotspotsMetricKey = filters.sinceLeakPeriod\n      ? 'new_security_hotspots_reviewed'\n      : 'security_hotspots_reviewed';\n\n    this.setState({ loadingMeasure: true });\n    return getMeasures({\n      component: component.key,\n      metricKeys: reviewedHotspotsMetricKey,\n      ...getBranchLikeQuery(branchLike)\n    })\n      .then(measures => {\n        if (!this.mounted) {\n          return;\n        }\n        const measure = measures && measures.length > 0 ? measures[0] : undefined;\n        const hotspotsReviewedMeasure = filters.sinceLeakPeriod\n          ? getLeakValue(measure)\n          : measure?.value;\n\n        this.setState({ hotspotsReviewedMeasure, loadingMeasure: false });\n      })\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ loadingMeasure: false });\n        }\n      });\n  };\n\n  fetchSecurityHotspots(page = 1) {\n    const { branchLike, component, location } = this.props;\n    const { filters } = this.state;\n\n    const hotspotKeys = location.query.hotspots\n      ? (location.query.hotspots as string).split(',')\n      : undefined;\n\n    this.setState({ hotspotKeys });\n\n    if (hotspotKeys && hotspotKeys.length > 0) {\n      return getSecurityHotspotList(hotspotKeys, {\n        projectKey: component.key,\n        ...getBranchLikeQuery(branchLike)\n      });\n    }\n\n    const status =\n      filters.status === HotspotStatusFilter.TO_REVIEW\n        ? HotspotStatus.TO_REVIEW\n        : HotspotStatus.REVIEWED;\n\n    const resolution =\n      filters.status === HotspotStatusFilter.TO_REVIEW\n        ? undefined\n        : HotspotResolution[filters.status];\n\n    return getSecurityHotspots({\n      projectKey: component.key,\n      p: page,\n      ps: PAGE_SIZE,\n      status,\n      resolution,\n      onlyMine: filters.assignedToMe,\n      sinceLeakPeriod: filters.sinceLeakPeriod,\n      ...getBranchLikeQuery(branchLike)\n    });\n  }\n\n  reloadSecurityHotspotList = () => {\n    this.setState({ loading: true });\n\n    return this.fetchSecurityHotspots()\n      .then(({ hotspots, paging }) => {\n        if (!this.mounted) {\n          return;\n        }\n\n        this.setState({\n          hotspots,\n          hotspotsPageIndex: 1,\n          hotspotsTotal: paging.total,\n          loading: false,\n          selectedHotspot: hotspots.length > 0 ? hotspots[0] : undefined\n        });\n      })\n      .catch(this.handleCallFailure);\n  };\n\n  handleChangeFilters = (changes: Partial<HotspotFilters>) => {\n    this.setState(\n      ({ filters }) => ({ filters: { ...filters, ...changes } }),\n      () => {\n        this.reloadSecurityHotspotList();\n        if (changes.sinceLeakPeriod !== undefined) {\n          this.fetchSecurityHotspotsReviewed();\n        }\n      }\n    );\n  };\n\n  handleHotspotClick = (selectedHotspot: RawHotspot) => this.setState({ selectedHotspot });\n\n  handleHotspotUpdate = (hotspotKey: string) => {\n    const { hotspots, hotspotsPageIndex } = this.state;\n    const index = hotspots.findIndex(h => h.key === hotspotKey);\n\n    return Promise.all(\n      range(hotspotsPageIndex).map(p => this.fetchSecurityHotspots(p + 1 /* pages are 1-indexed */))\n    )\n      .then(hotspotPages => {\n        const allHotspots = flatMap(hotspotPages, 'hotspots');\n\n        const { paging } = hotspotPages[hotspotPages.length - 1];\n\n        const nextHotspot = allHotspots[Math.min(index, allHotspots.length - 1)];\n\n        this.setState({\n          hotspots: allHotspots,\n          hotspotsPageIndex: paging.pageIndex,\n          hotspotsTotal: paging.total,\n          selectedHotspot: nextHotspot\n        });\n      })\n      .then(this.fetchSecurityHotspotsReviewed);\n  };\n\n  handleShowAllHotspots = () => {\n    this.props.router.push({\n      ...this.props.location,\n      query: { ...this.props.location.query, hotspots: undefined }\n    });\n  };\n\n  handleLoadMore = () => {\n    const { hotspots, hotspotsPageIndex: hotspotPages } = this.state;\n\n    this.setState({ loadingMore: true });\n\n    return this.fetchSecurityHotspots(hotspotPages + 1)\n      .then(({ hotspots: additionalHotspots }) => {\n        if (!this.mounted) {\n          return;\n        }\n\n        this.setState({\n          hotspots: [...hotspots, ...additionalHotspots],\n          hotspotsPageIndex: hotspotPages + 1,\n          loadingMore: false\n        });\n      })\n      .catch(this.handleCallFailure);\n  };\n\n  render() {\n    const { branchLike, component } = this.props;\n    const {\n      hotspotKeys,\n      hotspots,\n      hotspotsReviewedMeasure,\n      hotspotsTotal,\n      loading,\n      loadingMeasure,\n      loadingMore,\n      securityCategories,\n      selectedHotspot,\n      filters\n    } = this.state;\n\n    return (\n      <SecurityHotspotsAppRenderer\n        branchLike={branchLike}\n        component={component}\n        filters={filters}\n        hotspots={hotspots}\n        hotspotsReviewedMeasure={hotspotsReviewedMeasure}\n        hotspotsTotal={hotspotsTotal}\n        isStaticListOfHotspots={Boolean(hotspotKeys && hotspotKeys.length > 0)}\n        loading={loading}\n        loadingMeasure={loadingMeasure}\n        loadingMore={loadingMore}\n        onChangeFilters={this.handleChangeFilters}\n        onHotspotClick={this.handleHotspotClick}\n        onLoadMore={this.handleLoadMore}\n        onShowAllHotspots={this.handleShowAllHotspots}\n        onUpdateHotspot={this.handleHotspotUpdate}\n        securityCategories={securityCategories}\n        selectedHotspot={selectedHotspot}\n      />\n    );\n  }\n}\n\nexport default withCurrentUser(SecurityHotspotsApp);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n}\n\nexport const formatterOption = {\n  year: 'numeric',\n  month: 'long',\n  day: 'numeric',\n  hour: 'numeric',\n  minute: 'numeric'\n};\n\nexport default function DateTimeFormatter({ children, date }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...formatterOption}>\n      {children}\n    </FormattedDate>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n  long?: boolean;\n}\n\nexport const formatterOption = { year: 'numeric', month: 'short', day: '2-digit' };\n\nexport const longFormatterOption = { year: 'numeric', month: 'long', day: 'numeric' };\n\nexport default function DateFormatter({ children, date, long }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...(long ? longFormatterOption : formatterOption)}>\n      {children}\n    </FormattedDate>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { A11yContext } from './A11yContext';\n\ninterface Props {\n  anchor: string;\n  label?: string;\n  weight?: number;\n}\n\nexport default function A11ySkipTarget(props: Props) {\n  return (\n    <A11yContext.Consumer>\n      {({ addA11ySkipLink, removeA11ySkipLink }) => (\n        <A11ySkipTargetInner\n          addA11ySkipLink={addA11ySkipLink}\n          removeA11ySkipLink={removeA11ySkipLink}\n          {...props}\n        />\n      )}\n    </A11yContext.Consumer>\n  );\n}\n\ninterface InnerProps {\n  addA11ySkipLink: (link: T.A11ySkipLink) => void;\n  removeA11ySkipLink: (link: T.A11ySkipLink) => void;\n}\n\nexport class A11ySkipTargetInner extends React.PureComponent<Props & InnerProps> {\n  componentDidMount() {\n    this.props.addA11ySkipLink(this.getLink());\n  }\n\n  componentWillUnmount() {\n    this.props.removeA11ySkipLink(this.getLink());\n  }\n\n  getLink = (): T.A11ySkipLink => {\n    const { anchor: key, label = translate('skip_to_content'), weight } = this.props;\n    return { key, label, weight };\n  };\n\n  render() {\n    const { anchor } = this.props;\n    return <span id={`a11y_target__${anchor}`} />;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedRelative } from 'react-intl';\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n}\n\nexport default function DateFromNow({ children, date }: Props) {\n  return <FormattedRelative value={parseDate(date)}>{children}</FormattedRelative>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  severity: string;\n}\n\nexport default function SeverityHelper({ className, severity }: Props) {\n  if (!severity) {\n    return null;\n  }\n  return (\n    <span className={className}>\n      <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n      {translate('severity', severity)}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport enum ComponentQualifier {\n  Application = 'APP',\n  Directory = 'DIR',\n  Developper = 'DEV',\n  File = 'FIL',\n  Portfolio = 'VW',\n  Project = 'TRK',\n  SubPortfolio = 'SVW',\n  SubProject = 'BRC',\n  TestFile = 'UTS'\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getRatingTooltip as nextGetRatingTooltip, isDiffMetric } from '../../helpers/measures';\nimport { getLeakPeriod } from '../../helpers/periods';\n\nconst KNOWN_RATINGS = [\n  'sqale_rating',\n  'maintainability_rating', // Needed to provide the label for \"new_maintainability_rating\"\n  'reliability_rating',\n  'security_rating'\n];\n\nexport function enhanceMeasure(measure: T.Measure, metrics: T.Dict<T.Metric>): T.MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: T.MeasureIntern | undefined): string | undefined {\n  if (!measure || !measure.periods) {\n    return undefined;\n  }\n  const period = getLeakPeriod(measure.periods);\n  return period && period.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport Level from 'sonar-ui-common/components/ui/Level';\nimport Rating from 'sonar-ui-common/components/ui/Rating';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getRatingTooltip } from './utils';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span className={className}>–</span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, { decimals });\n    return <span className={className}>{formattedValue != null ? formattedValue : '–'}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltip overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltip>\n    );\n  }\n  return rating;\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { ApplicationPeriod } from '../types/application';\n\nfunction getPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined, index: number) {\n  if (!Array.isArray(periods)) {\n    return undefined;\n  }\n  return periods.find(period => period.index === index);\n}\n\nexport function getLeakPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined) {\n  return getPeriod(periods, 1);\n}\n\nexport function getPeriodLabel(\n  period: T.Period | undefined,\n  dateFormatter: (date: string) => string\n) {\n  if (!period) {\n    return undefined;\n  }\n\n  let parameter = period.modeParam || period.parameter || '';\n\n  switch (period.mode) {\n    case 'SPECIFIC_ANALYSIS':\n      parameter = dateFormatter(period.date);\n      break;\n    case 'PREVIOUS_VERSION':\n      parameter = parameter || dateFormatter(period.date);\n      break;\n    /*\n     * Handle legacy period modes, that predate MMF-1579\n     */\n    case 'previous_version':\n      if (!parameter) {\n        return translate('overview.period.previous_version_only_date');\n      }\n      break;\n    case 'date':\n      parameter = parameter && dateFormatter(parameter);\n      break;\n    case 'manual_baseline':\n      parameter = parameter || dateFormatter(period.date);\n      break;\n    default: // No change in the parameter\n  }\n\n  return translateWithParameters(`overview.period.${period.mode.toLowerCase()}`, parameter);\n}\n\nexport function getPeriodDate(period?: { date?: string }): Date | undefined {\n  return period && period.date ? parseDate(period.date) : undefined;\n}\n\nexport function isApplicationPeriod(\n  period: T.Period | ApplicationPeriod\n): period is ApplicationPeriod {\n  return (period as ApplicationPeriod).project !== undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as globalMessages from '../../store/globalMessages';\nimport getStore from './getStore';\n\nexport default function addGlobalSuccessMessage(message: string): void {\n  const store = getStore();\n  store.dispatch(globalMessages.addGlobalSuccessMessage(message));\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport './TagsList.css';\n\ninterface Props {\n  allowUpdate?: boolean;\n  className?: string;\n  tags: string[];\n}\n\nexport default function TagsList({ allowUpdate = false, className, tags }: Props) {\n  return (\n    <span\n      aria-label={translateWithParameters('tags_list_x', tags.join(', '))}\n      className={classNames('tags-list', className)}>\n      <TagsIcon className=\"text-middle\" />\n      <span aria-hidden={true} className=\"text-ellipsis text-middle\" title={tags.join(', ')}>\n        {tags.join(', ')}\n      </span>\n      {allowUpdate && <DropdownIcon className=\"text-middle\" />}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce } from 'lodash';\nimport * as React from 'react';\n\ninterface Props {\n  className?: string;\n  children: (position: { top: number; left: number }) => React.ReactElement<any>;\n}\n\nexport default class ScreenPositionHelper extends React.PureComponent<Props> {\n  container?: HTMLDivElement;\n  debouncedOnResize: () => void;\n\n  constructor(props: Props) {\n    super(props);\n    this.debouncedOnResize = debounce(() => this.forceUpdate(), 250);\n  }\n\n  componentDidMount() {\n    this.forceUpdate();\n    window.addEventListener('resize', this.debouncedOnResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.debouncedOnResize);\n  }\n\n  getPosition = () => {\n    const containerPos = this.container && this.container.getBoundingClientRect();\n    if (!containerPos) {\n      return { top: 0, left: 0 };\n    }\n    return {\n      top: window.pageYOffset + containerPos.top,\n      left: window.pageXOffset + containerPos.left\n    };\n  };\n\n  render() {\n    return (\n      <div\n        className={this.props.className}\n        ref={container => (this.container = container as HTMLDivElement)}>\n        {this.props.children(this.getPosition())}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nexport interface MultiSelectOptionProps {\n  active?: boolean;\n  custom?: boolean;\n  disabled?: boolean;\n  element: string;\n  onHover: (element: string) => void;\n  onSelectChange: (selected: boolean, element: string) => void;\n  renderLabel: (element: string) => React.ReactNode;\n  selected?: boolean;\n}\n\nexport default function MultiSelectOption(props: MultiSelectOptionProps) {\n  const { active, custom, disabled, element, selected } = props;\n  const onHover = () => props.onHover(element);\n  const className = classNames({ active, disabled });\n  const label = props.renderLabel(element);\n\n  return (\n    <li onFocus={onHover} onMouseOver={onHover}>\n      <Checkbox\n        checked={Boolean(selected)}\n        className={className}\n        disabled={disabled}\n        id={element}\n        onCheck={props.onSelectChange}>\n        {custom ? (\n          <span\n            aria-label={`${translate('create_new_element')}: ${label}`}\n            className=\"little-spacer-left\">\n            <span aria-hidden={true} className=\"little-spacer-right\">\n              +\n            </span>\n            {label}\n          </span>\n        ) : (\n          <span className=\"little-spacer-left\">{label}</span>\n        )}\n      </Checkbox>\n    </li>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { difference } from 'lodash';\nimport * as React from 'react';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelectOption from './MultiSelectOption';\n\ninterface Props {\n  allowNewElements?: boolean;\n  allowSelection?: boolean;\n  elements: string[];\n  filterSelected?: (query: string, selectedElements: string[]) => string[];\n  footerNode?: React.ReactNode;\n  listSize?: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  placeholder: string;\n  renderLabel?: (element: string) => React.ReactNode;\n  selectedElements: string[];\n  validateSearchInput?: (value: string) => string;\n}\n\ninterface State {\n  activeIdx: number;\n  loading: boolean;\n  query: string;\n  selectedElements: string[];\n  unselectedElements: string[];\n}\n\ninterface DefaultProps {\n  filterSelected: (query: string, selectedElements: string[]) => string[];\n  listSize: number;\n  renderLabel: (element: string) => React.ReactNode;\n  validateSearchInput: (value: string) => string;\n}\n\ntype PropsWithDefault = Props & DefaultProps;\n\nexport default class MultiSelect extends React.PureComponent<Props, State> {\n  container?: HTMLDivElement | null;\n  searchInput?: HTMLInputElement | null;\n  mounted = false;\n\n  static defaultProps: DefaultProps = {\n    filterSelected: (query: string, selectedElements: string[]) =>\n      selectedElements.filter(elem => elem.includes(query)),\n    listSize: 0,\n    renderLabel: (element: string) => element,\n    validateSearchInput: (value: string) => value\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      activeIdx: 0,\n      loading: true,\n      query: '',\n      selectedElements: [],\n      unselectedElements: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.onSearchQuery('');\n    this.updateSelectedElements(this.props as PropsWithDefault);\n    this.updateUnselectedElements(this.props as PropsWithDefault);\n    if (this.container) {\n      this.container.addEventListener('keydown', this.handleKeyboard, true);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: PropsWithDefault) {\n    if (\n      this.props.elements !== nextProps.elements ||\n      this.props.selectedElements !== nextProps.selectedElements\n    ) {\n      this.updateSelectedElements(nextProps);\n      this.updateUnselectedElements(nextProps);\n\n      const totalElements = this.getAllElements(nextProps, this.state).length;\n      if (this.state.activeIdx >= totalElements) {\n        this.setState({ activeIdx: totalElements - 1 });\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.searchInput) {\n      this.searchInput.focus();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.container) {\n      this.container.removeEventListener('keydown', this.handleKeyboard);\n    }\n  }\n\n  handleSelectChange = (selected: boolean, item: string) => {\n    if (selected) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  handleSearchChange = (value: string) => {\n    this.onSearchQuery((this.props as PropsWithDefault).validateSearchInput(value));\n  };\n\n  handleElementHover = (element: string) => {\n    this.setState((prevState, props) => {\n      return { activeIdx: this.getAllElements(props, prevState).indexOf(element) };\n    });\n  };\n\n  handleKeyboard = (evt: KeyboardEvent) => {\n    switch (evt.keyCode) {\n      case 40: // down\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectNextElement);\n        break;\n      case 38: // up\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectPreviousElement);\n        break;\n      case 37: // left\n      case 39: // right\n        evt.stopPropagation();\n        break;\n      case 13: // enter\n        if (this.state.activeIdx >= 0) {\n          this.toggleSelect(this.getAllElements(this.props, this.state)[this.state.activeIdx]);\n        }\n        break;\n    }\n  };\n\n  onSearchQuery = (query: string) => {\n    this.setState({ activeIdx: 0, loading: true, query });\n    this.props.onSearch(query).then(this.stopLoading, this.stopLoading);\n  };\n\n  onSelectItem = (item: string) => {\n    if (this.isNewElement(item, this.props)) {\n      this.onSearchQuery('');\n    }\n    this.props.onSelect(item);\n  };\n\n  onUnselectItem = (item: string) => this.props.onUnselect(item);\n\n  isNewElement = (elem: string, { selectedElements, elements }: Props) =>\n    elem.length > 0 && selectedElements.indexOf(elem) === -1 && elements.indexOf(elem) === -1;\n\n  updateSelectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (state.query) {\n        return {\n          selectedElements: props.filterSelected(state.query, props.selectedElements)\n        };\n      } else {\n        return { selectedElements: [...props.selectedElements] };\n      }\n    });\n  };\n\n  updateUnselectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (props.listSize === 0) {\n        return { unselectedElements: difference(props.elements, props.selectedElements) };\n      } else if (props.listSize < state.selectedElements.length) {\n        return { unselectedElements: [] };\n      } else {\n        return {\n          unselectedElements: difference(props.elements, props.selectedElements).slice(\n            0,\n            props.listSize - state.selectedElements.length\n          )\n        };\n      }\n    });\n  };\n\n  getAllElements = (props: Props, state: State) => {\n    if (this.isNewElement(state.query, props)) {\n      return [...state.selectedElements, ...state.unselectedElements, state.query];\n    } else {\n      return [...state.selectedElements, ...state.unselectedElements];\n    }\n  };\n\n  setElementActive = (idx: number) => this.setState({ activeIdx: idx });\n\n  selectNextElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx < 0 || activeIdx >= allElements.length - 1) {\n      return { activeIdx: 0 };\n    } else {\n      return { activeIdx: activeIdx + 1 };\n    }\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx <= 0) {\n      const lastIdx = allElements.length - 1;\n      return { activeIdx: lastIdx };\n    } else {\n      return { activeIdx: activeIdx - 1 };\n    }\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  toggleSelect = (item: string) => {\n    if (this.props.selectedElements.indexOf(item) === -1) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  render() {\n    const { allowSelection = true, allowNewElements = true, footerNode = '' } = this.props;\n    const { renderLabel } = this.props as PropsWithDefault;\n    const { query, activeIdx, selectedElements, unselectedElements } = this.state;\n    const activeElement = this.getAllElements(this.props, this.state)[activeIdx];\n    const showNewElement = allowNewElements && this.isNewElement(query, this.props);\n    const infiniteList = this.props.listSize === 0;\n    const listClasses = classNames('menu', {\n      'menu-vertically-limited': infiniteList,\n      'spacer-top': infiniteList,\n      'with-top-separator': infiniteList,\n      'with-bottom-separator': Boolean(footerNode)\n    });\n\n    return (\n      <div className=\"multi-select\" ref={div => (this.container = div)}>\n        <div className=\"menu-search\">\n          <SearchBox\n            autoFocus={true}\n            className=\"little-spacer-top\"\n            loading={this.state.loading}\n            onChange={this.handleSearchChange}\n            placeholder={this.props.placeholder}\n            value={query}\n          />\n        </div>\n        <ul className={listClasses}>\n          {selectedElements.length > 0 &&\n            selectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n                selected={true}\n              />\n            ))}\n          {unselectedElements.length > 0 &&\n            unselectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                disabled={!allowSelection}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n              />\n            ))}\n          {showNewElement && (\n            <MultiSelectOption\n              active={activeElement === query}\n              custom={true}\n              element={query}\n              key={query}\n              onHover={this.handleElementHover}\n              onSelectChange={this.handleSelectChange}\n              renderLabel={renderLabel}\n            />\n          )}\n          {!showNewElement && selectedElements.length < 1 && unselectedElements.length < 1 && (\n            <li className=\"spacer-left\">{translateWithParameters('no_results_for_x', query)}</li>\n          )}\n        </ul>\n        {footerNode}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getMarkdownHelpUrl } from '../../helpers/urls';\n\ninterface Props {\n  className?: string;\n}\n\nexport default class MarkdownTips extends React.PureComponent<Props> {\n  handleClick(evt: React.SyntheticEvent<HTMLAnchorElement>) {\n    evt.preventDefault();\n    window.open(getMarkdownHelpUrl(), 'Markdown', 'height=300,width=600,scrollbars=1,resizable=1');\n  }\n\n  render() {\n    return (\n      <div className={classNames('markdown-tips', this.props.className)}>\n        <a className=\"little-spacer-right\" href=\"#\" onClick={this.handleClick}>\n          {translate('markdown.helplink')}\n        </a>\n        {':'}\n        <span className=\"spacer-left\">*{translate('bold')}*</span>\n        <span className=\"spacer-left\">\n          ``\n          {translate('code')}\n          ``\n        </span>\n        <span className=\"spacer-left\">* {translate('bulleted_point')}</span>\n      </div>\n    );\n  }\n}\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".tags-list{white-space:nowrap;line-height:16px}.tags-list i:before{font-size:12px}.tags-list span{display:inline-block;vertical-align:middle;text-align:left;max-width:220px;padding-left:4px;padding-right:4px}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelect from '../common/MultiSelect';\nimport './TagsList.css';\n\ninterface Props {\n  listSize: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  selectedTags: string[];\n  tags: string[];\n}\n\nexport default function TagsSelector(props: Props) {\n  return (\n    <MultiSelect\n      elements={props.tags}\n      listSize={props.listSize}\n      onSearch={props.onSearch}\n      onSelect={props.onSelect}\n      onUnselect={props.onUnselect}\n      placeholder={translate('search.search_for_tags')}\n      selectedElements={props.selectedTags}\n      validateSearchInput={validateTag}\n    />\n  );\n}\n\nexport function validateTag(value: string) {\n  // Allow only a-z, 0-9, '+', '-', '#', '.'\n  return value.toLowerCase().replace(/[^-a-z0-9+#.]/gi, '');\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { colors } from '../../app/theme';\n\nconst DonutChart = lazyLoadComponent(\n  () => import('sonar-ui-common/components/charts/DonutChart'),\n  'DonutChart'\n);\n\nconst SIZE_TO_WIDTH_MAPPING = { small: 16, normal: 24, big: 40, huge: 60 };\n\nconst SIZE_TO_THICKNESS_MAPPING = { small: 2, normal: 3, big: 3, huge: 4 };\n\nexport interface CoverageRatingProps {\n  muted?: boolean;\n  size?: 'small' | 'normal' | 'big' | 'huge';\n  value: number | string | null | undefined;\n}\n\nexport default function CoverageRating({\n  muted = false,\n  size = 'normal',\n  value\n}: CoverageRatingProps) {\n  let data = [{ value: 100, fill: '#ccc ' }];\n  let padAngle = 0;\n\n  if (value != null) {\n    const numberValue = Number(value);\n    data = [\n      { value: numberValue, fill: muted ? colors.gray71 : colors.green },\n      { value: 100 - numberValue, fill: muted ? colors.barBackgroundColor : colors.lineCoverageRed }\n    ];\n    if (numberValue !== 0 && numberValue < 100) {\n      padAngle = 0.1; // Same for all sizes, because it scales automatically\n    }\n  }\n\n  const width = SIZE_TO_WIDTH_MAPPING[size];\n  const thickness = SIZE_TO_THICKNESS_MAPPING[size];\n\n  return (\n    <DonutChart\n      data={data}\n      height={width}\n      padAngle={padAngle}\n      thickness={thickness}\n      width={width}\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post } from 'sonar-ui-common/helpers/request';\n\nexport function getFavorites(): Promise<any> {\n  return getJSON('/api/favorites/search');\n}\n\nexport function addFavorite(component: string): Promise<void> {\n  return post('/api/favorites/add', { component });\n}\n\nexport function removeFavorite(component: string): Promise<void> {\n  return post('/api/favorites/remove', { component });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport FavoriteButton from 'sonar-ui-common/components/controls/FavoriteButton';\nimport { addFavorite, removeFavorite } from '../../api/favorites';\n\ninterface Props {\n  className?: string;\n  component: string;\n  favorite: boolean;\n  qualifier: string;\n  handleFavorite?: (component: string, isFavorite: boolean) => void;\n}\n\ninterface State {\n  favorite: boolean;\n}\n\nexport default class Favorite extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      favorite: props.favorite\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentDidUpdate(_prevProps: Props, prevState: State) {\n    if (prevState.favorite !== this.props.favorite) {\n      this.setState({ favorite: this.props.favorite });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  toggleFavorite = () => {\n    const newFavorite = !this.state.favorite;\n    const apiMethod = newFavorite ? addFavorite : removeFavorite;\n\n    return apiMethod(this.props.component).then(() => {\n      if (this.mounted) {\n        this.setState({ favorite: newFavorite }, () => {\n          if (this.props.handleFavorite) {\n            this.props.handleFavorite(this.props.component, newFavorite);\n          }\n        });\n      }\n    });\n  };\n\n  render() {\n    const { className, qualifier } = this.props;\n    const { favorite } = this.state;\n\n    return (\n      <FavoriteButton\n        className={className}\n        favorite={favorite}\n        qualifier={qualifier}\n        toggleFavorite={this.toggleFavorite}\n      />\n    );\n  }\n}\n/*  */\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './LocationIndex.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  leading?: boolean;\n  onClick?: () => void;\n  selected?: boolean;\n  [x: string]: any;\n}\n\nexport default function LocationIndex(props: Props) {\n  const { children, leading, onClick, selected, ...other } = props;\n  const clickAttributes = onClick ? { onClick, role: 'button', tabIndex: 0 } : {};\n  // put {...others} because Tooltip sets some event handlers\n  return (\n    <div\n      className={classNames('location-index', {\n        'is-leading': leading,\n        selected\n      })}\n      {...clickAttributes}\n      {...other}>\n      {children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport StatusIcon from 'sonar-ui-common/components/icons/StatusIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  resolution: string | undefined;\n  status: string;\n}\n\nexport default function StatusHelper(props: Props) {\n  const resolution = props.resolution && ` (${translate('issue.resolution', props.resolution)})`;\n  return (\n    <span className={props.className}>\n      <StatusIcon className=\"little-spacer-right\" status={props.status} />\n      {translate('issue.status', props.status)}\n      {resolution}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function getStandards(): Promise<T.Standards> {\n  return import('./standards.json').then(x => x.default);\n}\n\nexport function renderCWECategory(standards: T.Standards, category: string): string {\n  const record = standards.cwe[category];\n  if (!record) {\n    return `CWE-${category}`;\n  } else if (category === 'unknown') {\n    return record.title;\n  } else {\n    return `CWE-${category} - ${record.title}`;\n  }\n}\n\nexport function renderOwaspTop10Category(\n  standards: T.Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.owaspTop10[category];\n  if (!record) {\n    return addPrefix(category.toUpperCase(), 'OWASP', withPrefix);\n  } else {\n    return addPrefix(`${category.toUpperCase()} - ${record.title}`, 'OWASP', withPrefix);\n  }\n}\n\nexport function renderSansTop25Category(\n  standards: T.Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.sansTop25[category];\n  return addPrefix(record ? record.title : category, 'SANS', withPrefix);\n}\n\nexport function renderSonarSourceSecurityCategory(\n  standards: T.Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.sonarsourceSecurity[category];\n  if (!record) {\n    return addPrefix(category.toUpperCase(), 'SONAR', withPrefix);\n  } else if (category === 'others') {\n    return record.title;\n  } else {\n    return addPrefix(record.title, 'SONAR', withPrefix);\n  }\n}\n\nfunction addPrefix(title: string, prefix: string, withPrefix: boolean) {\n  return withPrefix ? `${prefix} ${title}` : title;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { flatten } from 'lodash';\nimport { splitByTokens } from './highlight';\nimport { getLinearLocations } from './issueLocations';\n\nexport function issuesByLine(issues: T.Issue[]) {\n  const index: { [line: number]: T.Issue[] } = {};\n  issues.forEach(issue => {\n    const line = issue.textRange ? issue.textRange.endLine : 0;\n    if (!(line in index)) {\n      index[line] = [];\n    }\n    index[line].push(issue);\n  });\n  return index;\n}\n\nexport function issuesByComponentAndLine(\n  issues: T.Issue[] = []\n): { [component: string]: { [line: number]: T.Issue[] } } {\n  return issues.reduce((mapping: { [component: string]: { [line: number]: T.Issue[] } }, issue) => {\n    mapping[issue.component] = mapping[issue.component] || {};\n    const line = issue.textRange ? issue.textRange.endLine : 0;\n    mapping[issue.component][line] = mapping[issue.component][line] || [];\n    mapping[issue.component][line].push(issue);\n    return mapping;\n  }, {});\n}\n\nexport function locationsByLine(issues: Pick<T.Issue, 'textRange'>[]) {\n  const index: { [line: number]: T.LinearIssueLocation[] } = {};\n  issues.forEach(issue => {\n    getLinearLocations(issue.textRange).forEach(location => {\n      if (!(location.line in index)) {\n        index[location.line] = [];\n      }\n      index[location.line].push(location);\n    });\n  });\n  return index;\n}\n\nexport function duplicationsByLine(duplications: T.Duplication[] | undefined) {\n  if (duplications == null) {\n    return {};\n  }\n\n  const duplicationsByLine: { [line: number]: number[] } = {};\n\n  duplications.forEach(({ blocks }, duplicationIndex) => {\n    blocks.forEach(block => {\n      // eslint-disable-next-line no-underscore-dangle\n      if (block._ref === '1') {\n        for (let line = block.from; line < block.from + block.size; line++) {\n          if (!(line in duplicationsByLine)) {\n            duplicationsByLine[line] = [];\n          }\n          duplicationsByLine[line].push(duplicationIndex);\n        }\n      }\n    });\n  });\n\n  return duplicationsByLine;\n}\n\nexport function symbolsByLine(sources: T.SourceLine[]) {\n  const index: { [line: number]: string[] } = {};\n  sources.forEach(line => {\n    const tokens = splitByTokens(line.code || '');\n    const symbols = flatten(\n      tokens.map(token => {\n        const keys = token.className.match(/sym-\\d+/g);\n        return keys != null ? keys : [];\n      })\n    );\n    index[line.line] = symbols.filter(key => key);\n  });\n  return index;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\n\ninterface Props {\n  diff: T.IssueChangelogDiff;\n}\n\nexport default function IssueChangelogDiff({ diff }: Props) {\n  if (diff.key === 'file') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.file_move',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (['from_long_branch', 'from_branch'].includes(diff.key)) {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'from_short_branch') {\n    // Applies to both legacy short lived branch and pull request\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_non_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'line') {\n    return <p>{translateWithParameters('issue.changelog.line_removed_X', diff.oldValue || '')}</p>;\n  }\n\n  let message;\n  if (diff.newValue != null) {\n    let { newValue } = diff;\n    if (diff.key === 'effort') {\n      newValue = formatMeasure(diff.newValue, 'WORK_DUR');\n    }\n    message = translateWithParameters(\n      'issue.changelog.changed_to',\n      translate('issue.changelog.field', diff.key),\n      newValue\n    );\n  } else {\n    message = translateWithParameters(\n      'issue.changelog.removed',\n      translate('issue.changelog.field', diff.key)\n    );\n  }\n\n  if (diff.oldValue != null) {\n    let { oldValue } = diff;\n    if (diff.key === 'effort') {\n      oldValue = formatMeasure(diff.oldValue, 'WORK_DUR');\n    }\n    message += ` (${translateWithParameters('issue.changelog.was', oldValue)})`;\n  }\n  return <p>{message}</p>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function getLinearLocations(textRange: T.TextRange | undefined): T.LinearIssueLocation[] {\n  if (!textRange) {\n    return [];\n  }\n  const locations = [];\n\n  // go through all lines of the `textRange`\n  for (let line = textRange.startLine; line <= textRange.endLine; line++) {\n    // TODO fix 999999\n    const from = line === textRange.startLine ? textRange.startOffset : 0;\n    const to = line === textRange.endLine ? textRange.endOffset : 999999;\n    locations.push({ line, from, to });\n  }\n  return locations;\n}\n\nexport function getSecondaryIssueLocationsForLine(\n  line: T.SourceLine,\n  highlightedLocations: (T.FlowLocation | undefined)[] | undefined\n): T.LinearIssueLocation[] {\n  if (!highlightedLocations) {\n    return [];\n  }\n  return highlightedLocations.reduce((locations, location) => {\n    const linearLocations: T.LinearIssueLocation[] = location\n      ? getLinearLocations(location.textRange)\n          .filter(l => l.line === line.line)\n          .map(l => ({\n            ...l,\n            startLine: location.textRange.startLine,\n            index: location.index,\n            text: location.msg\n          }))\n      : [];\n    return [...locations, ...linearLocations];\n  }, []);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { BranchLike } from '../../types/branch-like';\n\ninterface SourceViewerContextShape {\n  branchLike?: BranchLike;\n  file: T.SourceViewerFile;\n}\n\nexport const SourceViewerContext = React.createContext<SourceViewerContextShape>({\n  branchLike: {} as BranchLike,\n  file: {} as T.SourceViewerFile\n});\n"],"sourceRoot":""}