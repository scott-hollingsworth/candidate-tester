(window.webpackJsonp=window.webpackJsonp||[]).push([[281],{1131:function(e,t,s){var n=s(1357);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};s(312)(n,o);n.locals&&(e.exports=n.locals)},1349:function(e,t,s){var n=s(1350);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};s(312)(n,o);n.locals&&(e.exports=n.locals)},1350:function(e,t,s){(e.exports=s(311)(!1)).push([e.i,".hotspot-list-header{padding:16px 8px}.hotspot-risk-header{padding:8px}.hotspot-category{background-color:#fff;border:1px solid #e6e6e6}.hotspot-category .hotspot-category-header{padding:16px 8px;color:#444;border-bottom:none;border-left:4px solid}.hotspot-category .hotspot-category-header.contains-selected-hotspot,.hotspot-category .hotspot-category-header:hover{color:#4b9fd5}.hotspot-category.HIGH .hotspot-category-header{border-left-color:#d4333f}.hotspot-category.MEDIUM .hotspot-category-header{border-left-color:#ed7d20}.hotspot-category.LOW .hotspot-category-header{border-left-color:#eabe06}.hotspot-item{color:#444;display:block;padding:8px 16px;border:1px solid transparent;border-top-color:#e6e6e6;transition:padding 0s,border 0s}.hotspot-item:hover{background-color:#f2faff;border:1px dashed #4b9fd5;color:#444}.hotspot-item.highlight{background-color:#f2faff;color:#444;border:1px solid #4b9fd5;cursor:unset}.hotspot-risk-badge{color:#fff;text-transform:uppercase;display:inline-block;text-align:center;min-width:48px;padding:0 8px;font-weight:700;border-radius:2px}.hotspot-risk-badge.HIGH{background-color:#d4333f}.hotspot-risk-badge.MEDIUM{background-color:#ed7d20}.hotspot-risk-badge.LOW{background-color:#eabe06}",""])},1351:function(e,t,s){var n=s(1352);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};s(312)(n,o);n.locals&&(e.exports=n.locals)},1352:function(e,t,s){(e.exports=s(311)(!1)).push([e.i,".hotspot-assignee-search-results{min-width:300px}.hotspot-assignee-search-results li{cursor:pointer}.hotspot-assignee-search-results li.active,.hotspot-assignee-search-results li:hover{background-color:#f3f3f3}",""])},1353:function(e,t,s){var n=s(1354);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};s(312)(n,o);n.locals&&(e.exports=n.locals)},1354:function(e,t,s){(e.exports=s(311)(!1)).push([e.i,".hotspot-information{flex-basis:320px}.hotspot-information>div>span{flex-basis:100px}",""])},1355:function(e,t,s){var n=s(1356);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};s(312)(n,o);n.locals&&(e.exports=n.locals)},1356:function(e,t,s){(e.exports=s(311)(!1)).push([e.i,"#status-trigger,#status-trigger+.popup{width:400px;box-sizing:border-box}#status-trigger{height:80px;border-radius:4px;outline:none}#status-trigger.readonly{cursor:not-allowed}#status-trigger:not(.readonly){cursor:pointer;background-color:#236a97}#status-trigger:not(.readonly) *{color:#fff}",""])},1357:function(e,t,s){(e.exports=s(311)(!1)).push([e.i,"#security_hotspots .wrapper{position:fixed;bottom:0;width:100%}#security_hotspots .layout-page{margin:0 auto;min-width:1080px;max-width:1280px;height:100%}#security_hotspots .filter-bar{max-width:1280px;box-sizing:border-box;margin:0 auto;padding:16px 8px;border-bottom:1px solid #e6e6e6}#security_hotspots .sidebar{flex:0 0 300px;border-right:1px solid #e6e6e6;height:100%;overflow-y:auto}#security_hotspots .main{flex:1 1 auto;background-color:#fff;overflow-x:auto}#security_hotspots .main .hotspot-content{overflow-y:auto;height:100%;box-sizing:border-box}.invisible{visibility:hidden}",""])},1759:function(e,t,s){"use strict";s.r(t);var n=s(483),o=s.n(n),i=s(515),a=s.n(i),r=s(2),l=s(414),c=s(535),p=s(8),u=s(320);function h(e,t){if(null==e)return{};var s,n,o=function(e,t){if(null==e)return{};var s,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(o[s]=e[s]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(o[s]=e[s])}return o}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),n.forEach(function(t){d(e,t,s[t])})}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var g,f,b,v,y,E,x=s(407),k=s(390),O=s(328),C=s(606),S=s(332);!function(e){e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(g||(g={})),function(e){e.TO_REVIEW="TO_REVIEW",e.REVIEWED="REVIEWED"}(f||(f={})),function(e){e.FIXED="FIXED",e.SAFE="SAFE"}(b||(b={})),function(e){e.FIXED="FIXED",e.SAFE="SAFE",e.TO_REVIEW="TO_REVIEW"}(v||(v={})),function(e){e.FIXED="FIXED",e.SAFE="SAFE",e.TO_REVIEW="TO_REVIEW"}(y||(y={})),function(e){e[e.Creation=0]="Creation",e[e.Diff=1]="Diff",e[e.Comment=2]="Comment"}(E||(E={}));var N=s(327),j=s(315),w=s.n(j),P=s(5),L=s(348),I=s(330),A=s(443),T=s(28),R=s(335);function D(e){const t=e.filtered,s=e.isStaticListOfHotspots;let n;return n=s?"no_hotspots_for_keys":t?"no_hotspots_for_filters":"no_hotspots",r.createElement("div",{className:"display-flex-column display-flex-center huge-spacer-top"},r.createElement("img",{alt:Object(P.translate)("hotspots.page"),className:"huge-spacer-top",height:100,src:"".concat(Object(R.getBaseUrl)(),"/images/").concat(t?"filter-large":"hotspot-large",".svg")}),r.createElement("h1",{className:"huge-spacer-top"},Object(P.translate)("hotspots.".concat(n,".title"))),r.createElement("div",{className:"abs-width-400 text-center big-spacer-top"},Object(P.translate)("hotspots.".concat(n,".description"))),!(t||s)&&r.createElement(T.Link,{className:"big-spacer-top",target:"_blank",to:{pathname:"/documentation/user-guide/security-hotspots/"}},Object(P.translate)("hotspots.learn_more")))}var _=s(321),M=s.n(_),U=s(444),F=s.n(U),H=s(338),W=s.n(H),B=s(397),V=s(516),z=s(379);const q=[{value:v.TO_REVIEW,label:Object(P.translate)("hotspot.filters.status.to_review")},{value:v.FIXED,label:Object(P.translate)("hotspot.filters.status.fixed")},{value:v.SAFE,label:Object(P.translate)("hotspot.filters.status.safe")}],K=[{value:!0,label:Object(P.translate)("hotspot.filters.period.since_leak_period")},{value:!1,label:Object(P.translate)("hotspot.filters.period.overall")}];var G;!function(e){e.ALL="all",e.ME="me"}(G||(G={}));const Y=[{value:G.ME,label:Object(P.translate)("hotspot.filters.assignee.assigned_to_me")},{value:G.ALL,label:Object(P.translate)("hotspot.filters.assignee.all")}];var X=Object(x.a)(function(e){const t=e.currentUser,s=e.component,n=e.filters,o=e.hotspotsReviewedMeasure,i=e.isStaticListOfHotspots,a=e.loadingMeasure,l=e.onBranch,c=s.qualifier===z.a.Project;return r.createElement("div",{className:"filter-bar display-flex-center"},i?r.createElement("a",{id:"show_all_hotspot",onClick:()=>e.onShowAllHotspots(),role:"link",tabIndex:0},Object(P.translate)("hotspot.filters.show_all")):r.createElement("div",{className:"display-flex-space-between width-100"},r.createElement("div",{className:"display-flex-center"},r.createElement("h3",{className:"huge-spacer-right"},Object(P.translate)("hotspot.filters.title")),Object(S.b)(t)&&r.createElement(F.a,{className:"huge-spacer-right",name:"assignee-filter",onCheck:t=>e.onChangeFilters({assignedToMe:t===G.ME}),options:Y,value:n.assignedToMe?G.ME:G.ALL}),r.createElement("span",{className:"spacer-right"},Object(P.translate)("status")),r.createElement(W.a,{className:"input-medium big-spacer-right",clearable:!1,onChange:t=>e.onChangeFilters({status:t.value}),options:q,searchable:!1,value:n.status}),l&&r.createElement(W.a,{className:"input-medium big-spacer-right",clearable:!1,onChange:t=>e.onChangeFilters({sinceLeakPeriod:t.value}),options:K,searchable:!1,value:n.sinceLeakPeriod})),c&&r.createElement("div",{className:"display-flex-center"},r.createElement("span",{className:"little-spacer-right"},Object(P.translate)("metric.security_hotspots_reviewed.name")),r.createElement(M.a,{className:"big-spacer-right",overlay:Object(P.translate)("hotspots.reviewed.tooltip")}),r.createElement(w.a,{loading:a},o&&r.createElement(V.a,{value:o}),r.createElement(B.a,{className:"spacer-left huge",metricKey:l&&!n.sinceLeakPeriod?"security_hotspots_reviewed":"new_security_hotspots_reviewed",metricType:"PERCENT",value:o})))))}),J=s(381),Z=s.n(J),Q=s(309),$=s(356),ee=s.n($),te=s(428),se=s.n(te),ne=s(324),oe=s.n(ne);function ie(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),n.forEach(function(t){ae(e,t,s[t])})}return e}function ae(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const re=[g.HIGH,g.MEDIUM,g.LOW];function le(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;const s=Z()(e,e=>e.securityCategory);return Object.keys(s).map(e=>({key:e,title:ce(e,t),hotspots:s[e]}))}function ce(e,t){return t[e]?t[e].title:e}const pe={[f.TO_REVIEW]:y.TO_REVIEW,[f.REVIEWED]:y.FIXED,[b.FIXED]:y.FIXED,[b.SAFE]:y.SAFE};function ue(e,t){return pe[null!=t?t:e]}const he={[y.TO_REVIEW]:{status:f.TO_REVIEW,resolution:void 0},[y.FIXED]:{status:f.REVIEWED,resolution:b.FIXED},[y.SAFE]:{status:f.REVIEWED,resolution:b.SAFE}};var me=s(402),de=s.n(me),ge=s(1348),fe=s.n(ge);function be(e){const t=e.hotspot,s=e.selected;return r.createElement("a",{className:Q("hotspot-item",{highlight:s}),href:"#",onClick:()=>!s&&e.onClick(t)},r.createElement("div",{className:"little-spacer-left"},t.message),r.createElement("div",{className:"badge spacer-top"},Object(P.translate)("hotspots.status_option",ue(t.status,t.resolution))))}function ve(e){const t=e.categoryKey,s=e.expanded,n=e.hotspots,o=e.selectedHotspot,i=e.title;if(n.length<1)return null;const a=n[0].vulnerabilityProbability;return r.createElement("div",{className:Q("hotspot-category",a)},r.createElement("a",{className:Q("hotspot-category-header display-flex-space-between display-flex-center",{"contains-selected-hotspot":o.securityCategory===t}),href:"#",onClick:()=>e.onToggleExpand(t,!s)},r.createElement("strong",{className:"flex-1"},i),r.createElement("span",null,r.createElement("span",{className:"counter-badge"},n.length),s?r.createElement(fe.a,{className:"big-spacer-left"}):r.createElement(de.a,{className:"big-spacer-left"}))),s&&r.createElement("ul",null,n.map(t=>r.createElement("li",{key:t.key},r.createElement(be,{hotspot:t,onClick:e.onHotspotClick,selected:t.key===o.key})))))}s(1349);function ye(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),n.forEach(function(t){Ee(e,t,s[t])})}return e}function Ee(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class xe extends r.Component{constructor(e){super(e),this.groupHotspots=(e,t)=>{const s=Z()(e,e=>e.vulnerabilityProbability);return re.map(e=>({risk:e,categories:le(s[e],t)})).filter(e=>e.categories.length>0)},this.handleToggleCategory=(e,t)=>{this.setState(s=>{return{expandedCategories:ye({},s.expandedCategories,{[e]:t})}})},this.state={expandedCategories:{[e.selectedHotspot.securityCategory]:!0},groupedHotspots:this.groupHotspots(e.hotspots,e.securityCategories)}}componentDidUpdate(e){if(this.props.selectedHotspot.securityCategory!==e.selectedHotspot.securityCategory&&this.handleToggleCategory(this.props.selectedHotspot.securityCategory,!0),this.props.hotspots!==e.hotspots||this.props.securityCategories!==e.securityCategories){const e=this.groupHotspots(this.props.hotspots,this.props.securityCategories);this.setState({groupedHotspots:e})}}render(){const e=this.props,t=e.hotspots,s=e.hotspotsTotal,n=e.isStaticListOfHotspots,o=e.loadingMore,i=e.selectedHotspot,a=e.statusFilter,l=this.state,c=l.expandedCategories,p=l.groupedHotspots;return r.createElement("div",{className:"huge-spacer-bottom"},r.createElement("h1",{className:"hotspot-list-header bordered-bottom"},r.createElement(se.a,{className:"spacer-right"}),Object(P.translateWithParameters)(n?"hotspots.list_title":"hotspots.list_title.".concat(a),t.length)),r.createElement("ul",{className:"big-spacer-bottom"},p.map(e=>r.createElement("li",{className:"big-spacer-bottom",key:e.risk},r.createElement("div",{className:"hotspot-risk-header little-spacer-left"},r.createElement("span",null,Object(P.translate)("hotspots.risk_exposure"),":"),r.createElement("div",{className:Q("hotspot-risk-badge","spacer-left",e.risk)},Object(P.translate)("risk_exposure",e.risk))),r.createElement("ul",null,e.categories.map(e=>r.createElement("li",{className:"spacer-bottom",key:e.key},r.createElement(ve,{categoryKey:e.key,expanded:c[e.key],hotspots:e.hotspots,onHotspotClick:this.props.onHotspotClick,onToggleExpand:this.handleToggleCategory,selectedHotspot:i,title:e.title}))))))),r.createElement(ee.a,{count:t.length,loadMore:o?void 0:this.props.onLoadMore,loading:o,total:s}))}}var ke=s(426),Oe=s(310),Ce=s(375),Se=s(503),Ne=s.n(Se),je=s(319),we=s(420),Pe=s(856),Le=s.n(Pe),Ie=s(536),Ae=s.n(Ie),Te=s(361),Re=s.n(Te),De=s(857),_e=s(434),Me=s(322),Ue=s.n(Me),Fe=s(350),He=s.n(Fe),We=s(362),Be=s(363);s(1351);function Ve(e){const t=e.highlighted,s=e.loading,n=e.open,o=e.query,i=e.suggestedUsers;return r.createElement(r.Fragment,null,r.createElement("div",{className:"display-flex-center"},r.createElement(He.a,{autoFocus:!0,onChange:e.onSearch,onKeyDown:e.onKeyDown,placeholder:Object(P.translate)("hotspots.assignee.select_user"),value:o}),s&&r.createElement(w.a,{className:"spacer-left"})),!s&&n&&r.createElement("div",{className:"position-relative"},r.createElement(Me.DropdownOverlay,{noPadding:!0,placement:We.PopupPlacement.BottomLeft},i&&i.length>0?r.createElement("ul",{className:"hotspot-assignee-search-results"},i.map(s=>r.createElement("li",{className:Q("padded",{active:t&&t.login===s.login}),key:s.login,onClick:()=>e.onSelect(s)},r.createElement(Be.a,{className:"spacer-right",hash:s.avatar,name:s.name,size:16}),s.name))):r.createElement("div",{className:"padded"},Object(P.translate)("no_results")))))}class ze extends r.PureComponent{constructor(e){super(e),this.mounted=!1,this.handleSearch=e=>{this.mounted&&(e.length<2?this.handleNoSearch(e):this.handleActualSearch(e))},this.handleNoSearch=e=>{const t=this.props,s=t.allowCurrentUserSelection,n=t.loggedInUser;this.setState({loading:!1,open:s,query:e,suggestedUsers:s?[n]:[]})},this.handleActualSearch=e=>{this.setState({loading:!0,query:e}),Object(_e.f)({q:e}).then(t=>{this.mounted&&this.setState({loading:!1,query:e,open:!0,suggestedUsers:t.users.filter(S.c)})}).catch(()=>{this.mounted&&this.setState({loading:!1})})},this.handleKeyDown=e=>{switch(e.keyCode){case De.KeyCodes.Enter:e.preventDefault(),this.selectHighlighted();break;case De.KeyCodes.UpArrow:e.preventDefault(),this.highlightPrevious();break;case De.KeyCodes.DownArrow:e.preventDefault(),this.highlightNext()}},this.getCurrentIndex=()=>{const e=this.state,t=e.highlighted,s=e.suggestedUsers;return t?s.findIndex(e=>e.login===t.login):-1},this.highlightIndex=e=>{const t=this.state.suggestedUsers;t.length>0&&(e<0?e=t.length-1:e>=t.length&&(e=0),this.setState({highlighted:t[e]}))},this.highlightPrevious=()=>{this.highlightIndex(this.getCurrentIndex()-1)},this.highlightNext=()=>{this.highlightIndex(this.getCurrentIndex()+1)},this.selectHighlighted=()=>{const e=this.state.highlighted;void 0!==e&&this.props.onSelect(e)},this.state={loading:!1,open:e.allowCurrentUserSelection,suggestedUsers:e.allowCurrentUserSelection?[e.loggedInUser]:[]},this.handleSearch=Re()(this.handleSearch,250)}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const e=this.state,t=e.highlighted,s=e.loading,n=e.open,o=e.query,i=e.suggestedUsers;return r.createElement(Ve,{highlighted:t,loading:s,onKeyDown:this.handleKeyDown,onSearch:this.handleSearch,onSelect:this.props.onSelect,open:n,query:o,suggestedUsers:i})}}function qe(e){var t,s,n;const o=e.assignee,i=e.canEdit,a=e.loggedInUser,l=e.editing,c=e.loading;return r.createElement(w.a,{loading:c},!l&&r.createElement("div",{className:"display-flex-center"},r.createElement("strong",{className:"nowrap"},o&&(o.active?null!=(t=o.name)?t:o.login:Object(P.translateWithParameters)("user.x_deleted",null!=(s=o.name)?s:o.login)),!o&&Object(P.translate)("unassigned")),a&&i&&r.createElement(Oe.EditButton,{className:"spacer-left",onClick:e.onEnterEditionMode})),a&&l&&r.createElement(Le.a,{onKeydown:e.onExitEditionMode},r.createElement(Ae.a,{onClickOutside:e.onExitEditionMode},r.createElement(ze,{allowCurrentUserSelection:a.login!==(null===(n=o)||void 0===n?void 0:n.login),loggedInUser:a,onSelect:e.onAssign}))))}var Ke=Object(x.a)(class extends r.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={editing:!1,loading:!1},this.handleEnterEditionMode=()=>{this.setState({editing:!0})},this.handleExitEditionMode=()=>{this.setState({editing:!1})},this.handleAssign=e=>{e&&e.login&&(this.setState({loading:!0}),function(e,t){return Object(p.post)("/api/hotspots/assign",m({hotspot:e},t)).catch(u.a)}(this.props.hotspot.key,{assignee:e.login}).then(()=>{this.mounted&&(this.setState({editing:!1,loading:!1}),this.props.onAssigneeChange())}).then(()=>Object(we.a)(Object(P.translateWithParameters)("hotspots.assign.success",e.name))).catch(()=>this.setState({loading:!1})))}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const e=this.props,t=e.currentUser,s=e.hotspot,n=s.assigneeUser,o=s.status,i=this.state,a=i.editing,l=i.loading,c=o===f.TO_REVIEW;return r.createElement(qe,{assignee:n,canEdit:c,editing:a,loading:l,loggedInUser:Object(S.b)(t)?t:void 0,onAssign:this.handleAssign,onEnterEditionMode:this.handleEnterEditionMode,onExitEditionMode:this.handleExitEditionMode})}}),Ge=s(465),Ye=s(655),Xe=s(345),Je=s.n(Xe),Ze=s(342),Qe=s(661);function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=[],n=!0,o=!1,i=void 0;try{for(var a,r=e[Symbol.iterator]();!(n=(a=r.next()).done)&&(s.push(a.value),!t||s.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==r.return||r.return()}finally{if(o)throw i}}return s}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function et(e){const t=$e(r.useState(e.markdownComment),2),s=t[0],n=t[1];return r.createElement("div",{className:"issue-comment-bubble-popup"},r.createElement("div",{className:"issue-comment-form-text"},r.createElement("textarea",{autoFocus:!0,onChange:e=>n(e.target.value),rows:2,value:s})),r.createElement("div",{className:"spacer-top display-flex-space-between"},r.createElement("div",{className:"issue-comment-form-tips"},r.createElement(Ge.a,null)),r.createElement("div",{className:""},r.createElement(Oe.Button,{className:"little-spacer-right",onClick:()=>e.onCommentEditSubmit(s)},Object(P.translate)("save")),r.createElement(Oe.ResetButtonLink,{onClick:()=>{n(""),e.onCancelEdit()}},Object(P.translate)("cancel")))))}function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=[],n=!0,o=!1,i=void 0;try{for(var a,r=e[Symbol.iterator]();!(n=(a=r.next()).done)&&(s.push(a.value),!t||s.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==r.return||r.return()}finally{if(o)throw i}}return s}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function st(e){const t=function(e){const t=[];return e.creationDate&&t.push({type:E.Creation,date:e.creationDate,user:ie({},e.authorUser,{name:e.authorUser.name||e.authorUser.login})}),e.changelog&&e.changelog.length>0&&t.push(...e.changelog.map(e=>({type:E.Diff,date:e.creationDate,user:{active:e.isUserActive,avatar:e.avatar,name:e.userName||e.user},diffs:e.diffs}))),e.comment&&e.comment.length>0&&t.push(...e.comment.map(e=>({type:E.Comment,date:e.createdAt,updatable:e.updatable,user:ie({},e.user,{name:e.user.name||e.user.login}),html:e.htmlText,key:e.key,markdown:e.markdown}))),oe()(t,e=>e.date)}(e.hotspot),s=tt(r.useState(""),2),n=s[0],o=s[1];return r.createElement(r.Fragment,null,t.map((t,s)=>{const i=t.user,a=t.type,l=t.diffs,c=t.date,p=t.html,u=t.key,h=t.updatable,m=t.markdown;return r.createElement("div",{className:Q("padded",{"bordered-top":s>0}),key:s},r.createElement("div",{className:"display-flex-center"},i.name&&r.createElement(r.Fragment,null,r.createElement(Be.a,{className:"little-spacer-right",hash:i.avatar,name:i.name,size:20}),r.createElement("strong",null,i.active?i.name:Object(P.translateWithParameters)("user.x_deleted",i.name)),a===E.Creation&&r.createElement("span",{className:"little-spacer-left"},Object(P.translate)("hotspots.review_history.created")),a===E.Comment&&r.createElement("span",{className:"little-spacer-left"},Object(P.translate)("hotspots.review_history.comment_added")),r.createElement("span",{className:"little-spacer-left little-spacer-right"},"-")),r.createElement(Ze.a,{date:c})),a===E.Diff&&l&&r.createElement("div",{className:"spacer-top"},l.map((e,t)=>r.createElement(Qe.a,{diff:e,key:t}))),a===E.Comment&&u&&p&&m&&r.createElement("div",{className:"spacer-top display-flex-space-between"},r.createElement("div",{className:"markdown",dangerouslySetInnerHTML:{__html:Object(Ye.sanitize)(p)}}),h&&r.createElement("div",null,r.createElement("div",{className:"dropdown"},r.createElement(Je.a,{onRequestClose:()=>{o("")},open:u===n,overlay:r.createElement(Me.DropdownOverlay,{placement:We.PopupPlacement.BottomRight},r.createElement(et,{markdownComment:m,onCancelEdit:()=>o(""),onCommentEditSubmit:t=>{o(""),e.onEditComment(u,t)}}))},r.createElement(Oe.EditButton,{className:"it__hotspots-comment-edit button-small",onClick:()=>o(u)}))),r.createElement(Ue.a,{onOpen:()=>o(""),overlay:r.createElement("div",{className:"padded abs-width-150"},r.createElement("p",null,Object(P.translate)("issue.comment.delete_confirm_message")),r.createElement(Oe.Button,{className:"button-red big-spacer-top pull-right",onClick:()=>e.onDeleteComment(u)},Object(P.translate)("delete"))),overlayPlacement:We.PopupPlacement.BottomRight},r.createElement(Oe.DeleteButton,{className:"it__hotspots-comment-delete button-small"})))))}))}class nt extends r.PureComponent{constructor(e){super(e),this.handleCommentChange=e=>{this.setState({comment:e.target.value})},this.handleCloseComment=()=>{this.setState({comment:""}),this.props.onCloseComment()},this.handleSubmitComment=()=>(function(e,t){return Object(p.post)("/api/hotspots/add_comment",{hotspot:e,comment:t}).catch(u.a)})(this.props.hotspot.key,this.state.comment).then(()=>{this.setState({comment:""}),this.props.onCloseComment(),this.props.onCommentUpdate()}),this.handleDeleteComment=e=>(function(e){return Object(p.post)("/api/hotspots/delete_comment",{comment:e}).catch(u.a)})(e).then(()=>{this.props.onCommentUpdate()}),this.handleEditComment=(e,t)=>(function(e,t){return Object(p.post)("/api/hotspots/edit_comment",{comment:e,text:t}).catch(u.a)})(e,t).then(()=>{this.props.onCommentUpdate()}),this.state={comment:""}}componentDidUpdate(e){e.hotspot!==this.props.hotspot&&this.setState({comment:""})}render(){const e=this.props,t=e.currentUser,s=e.hotspot,n=e.commentTextRef,o=e.commentVisible,i=this.state.comment;return r.createElement(r.Fragment,null,r.createElement("h1",null,Object(P.translate)("hotspot.section.activity")),r.createElement("div",{className:"padded"},r.createElement(st,{hotspot:s,onDeleteComment:this.handleDeleteComment,onEditComment:this.handleEditComment}),Object(S.b)(t)&&r.createElement(r.Fragment,null,r.createElement("hr",null),r.createElement("div",{className:"big-spacer-top"},r.createElement(Oe.Button,{className:Q({invisible:o}),id:"hotspot-comment-box-display",onClick:this.props.onOpenComment},Object(P.translate)("hotspots.comment.open")),r.createElement("div",{className:Q({invisible:!o})},r.createElement("div",{className:"little-spacer-bottom"},Object(P.translate)("hotspots.comment.field")),r.createElement("textarea",{className:"form-field fixed-width width-100 spacer-bottom",onChange:this.handleCommentChange,ref:n,rows:2,value:i}),r.createElement("div",{className:"display-flex-space-between display-flex-center "},r.createElement(Ge.a,{className:"huge-spacer-bottom"}),r.createElement("div",null,r.createElement(Oe.Button,{className:"huge-spacer-bottom",id:"hotspot-comment-box-submit",onClick:this.handleSubmitComment},Object(P.translate)("hotspots.comment.submit")),r.createElement(Oe.ResetButtonLink,{className:"spacer-left huge-spacer-bottom",id:"hotspot-comment-box-cancel",onClick:this.handleCloseComment},Object(P.translate)("cancel")))))))))}}var ot=s(358),it=s(607),at=s(663),rt=s(805),lt=s(870);const ct=()=>void 0;function pt(e){const t=e.branchLike,s=e.highlightedSymbols,n=e.hotspot,o=e.linePopup,i=e.loading,a=e.locations,l=e.sourceLines,c=e.sourceViewerFile;return r.createElement("div",{className:"bordered big-spacer-bottom"},r.createElement(rt.a,{branchLike:t,expandable:!1,linkToProject:!1,loading:i,onExpand:ct,sourceViewerFile:c}),r.createElement(w.a,{loading:i},l.length>0&&r.createElement(at.a.Provider,{value:{branchLike:t,file:c}},r.createElement(lt.a,{branchLike:t,component:c,displaySCM:!1,expandBlock:(t,s)=>e.onExpandBlock(s),handleCloseIssues:ct,handleLinePopupToggle:e.onLinePopupToggle,handleOpenIssues:ct,handleSymbolClick:e.onSymbolClick,highlightedLocationMessage:void 0,highlightedSymbols:s,index:0,issue:n,issuesByLine:{},last:!1,linePopup:o,loadDuplications:ct,locations:[],locationsByLine:a,onIssueChange:ct,onIssuePopupToggle:ct,onLocationSelect:ct,openIssuesByLine:{},renderDuplicationPopup:ct,snippet:l}))))}function ut(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),n.forEach(function(t){ht(e,t,s[t])})}return e}function ht(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const mt=5,dt=50;class gt extends r.Component{constructor(){super(...arguments),this.mounted=!1,this.state={highlightedSymbols:[],loading:!0,sourceLines:[]},this.handleExpansion=e=>{const t=this.props,s=t.branchLike,n=t.hotspot,o=this.state.sourceLines,i="up"===e?{from:Math.max(1,o[0].line-dt),to:o[0].line-1}:{from:o[o.length-1].line+1,to:o[o.length-1].line+dt+1};return Object(ot.u)(ut({key:n.component.key},i,Object(O.d)(s))).then(t=>{const s="down"===e?this.checkLastLine(t,i.to):void 0;let n;n="up"===e?t.concat(o):o.concat(s?t:t.slice(0,-1)),this.setState({lastLine:s,sourceLines:n})})},this.handleLinePopupToggle=e=>{const t=e.component,s=e.index,n=e.line,o=e.name,i=e.open;this.setState(a=>{const r=void 0!==a.linePopup&&a.linePopup.line===n&&a.linePopup.name===o&&a.linePopup.component===t&&a.linePopup.index===s;return!1===i||r?!0!==i&&r?{linePopup:void 0}:null:{linePopup:e}})},this.handleSymbolClick=e=>{this.setState({highlightedSymbols:e})}}componentWillMount(){this.mounted=!0,this.fetchSources()}componentDidUpdate(e){e.hotspot.key!==this.props.hotspot.key&&this.fetchSources()}componentWillUnmount(){this.mounted=!1}checkLastLine(e,t){if(e.length<1)return;const s=e[e.length-1].line;return s<t?s:void 0}fetchSources(){const e=this.props,t=e.branchLike,s=e.hotspot,n=s.component,o=s.textRange,i=Math.max(1,o.startLine-mt),a=o.endLine+mt+1;return this.setState({loading:!0}),Object(ot.u)(ut({key:n.key,from:i,to:a},Object(O.d)(t))).then(e=>{if(this.mounted){const t=this.checkLastLine(e,a);e=t?e:e.slice(0,-1),this.setState({lastLine:t,loading:!1,sourceLines:e})}}).catch(()=>this.mounted&&this.setState({loading:!1}))}render(){const e=this.props,t=e.branchLike,s=e.hotspot,n=this.state,o=n.highlightedSymbols,i=n.lastLine,a=n.linePopup,l=n.loading,c=n.sourceLines,p=Object(it.d)([s]),u=function(e,t){let s=e.component,n=e.project;return{key:s.key,measures:{lines:t?t.toString():void 0},path:s.path||"",project:n.key,projectName:n.name,q:s.qualifier,uuid:""}}(s,i);return r.createElement(pt,{branchLike:t,highlightedSymbols:o,hotspot:s,lastLine:i,linePopup:a,loading:l,locations:p,onExpandBlock:this.handleExpansion,onLinePopupToggle:this.handleLinePopupToggle,onSymbolClick:this.handleSymbolClick,sourceLines:c,sourceViewerFile:u})}}s(1353);var ft,bt=s(608),vt=s.n(bt);!function(e){e.RiskDescription="risk",e.VulnerabilityDescription="vulnerability",e.FixRecommendation="fix"}(ft||(ft={}));class yt extends r.PureComponent{constructor(e){super(e),this.handleSelectTabs=e=>{const t=this.state.tabs.find(t=>t.key===e);this.setState({currentTab:t})};const t=this.computeTabs();this.state={currentTab:t[0],tabs:t}}componentDidUpdate(e){if(this.props.hotspot.key!==e.hotspot.key){const e=this.computeTabs();this.setState({currentTab:e[0],tabs:e})}}computeTabs(){const e=this.props.hotspot;return[{key:ft.RiskDescription,label:Object(P.translate)("hotspots.tabs.risk_description"),content:e.rule.riskDescription||""},{key:ft.VulnerabilityDescription,label:Object(P.translate)("hotspots.tabs.vulnerability_description"),content:e.rule.vulnerabilityDescription||""},{key:ft.FixRecommendation,label:Object(P.translate)("hotspots.tabs.fix_recommendations"),content:e.rule.fixRecommendations||""}].filter(e=>Boolean(e.content))}render(){const e=this.state,t=e.tabs,s=e.currentTab;return 0===t.length?null:r.createElement(r.Fragment,null,r.createElement(vt.a,{onSelect:this.handleSelectTabs,selected:s.key,tabs:t}),r.createElement("div",{className:"bordered huge-spacer-bottom"},r.createElement("div",{className:"markdown big-padded",dangerouslySetInnerHTML:{__html:Object(Ye.sanitize)(s.content)}})))}}var Et=s(314),xt=s.n(Et);s(1355);function kt(e){const t=e.statusOption,s=e.showTitle;return r.createElement("div",null,r.createElement("h3",null,s&&"".concat(Object(P.translate)("status"),": "),Object(P.translate)("hotspots.status_option",t)),r.createElement("span",null,Object(P.translate)("hotspots.status_option",t,"description")))}var Ot=s(554),Ct=s.n(Ot);function St(e){const t=e.comment,s=e.loading,n=e.selectedStatus,o=e.submitDisabled,i=t=>r.createElement(Ct.a,{checked:n===t,className:"big-spacer-bottom",onCheck:e.onStatusChange,value:t},r.createElement(kt,{statusOption:t}));return r.createElement(r.Fragment,null,r.createElement("div",{className:"big-padded"},i(y.TO_REVIEW),i(y.FIXED),i(y.SAFE)),r.createElement("hr",null),r.createElement("div",{className:"big-padded display-flex-column"},r.createElement("label",{className:"text-bold",htmlFor:"comment-textarea"},Object(P.translate)("hotspots.status.add_comment")),r.createElement("textarea",{className:"spacer-top form-field fixed-width spacer-bottom",id:"comment-textarea",onChange:t=>e.onCommentChange(t.currentTarget.value),rows:4,value:t}),r.createElement(Ge.a,null),r.createElement("div",{className:"big-spacer-top display-flex-justify-end display-flex-center"},r.createElement(Oe.SubmitButton,{disabled:o||s,onClick:e.onSubmit},Object(P.translate)("hotspots.status.change_status")),s&&r.createElement("i",{className:"spacer-left spinner"}))))}function Nt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class jt extends r.PureComponent{constructor(e){super(e),this.mounted=!1,this.handleStatusChange=e=>{this.setState({selectedStatus:e})},this.handleCommentChange=e=>{this.setState({comment:e})},this.handleSubmit=()=>{const e=this.props.hotspot,t=this.state,s=t.comment,n=t.initialStatus,o=t.selectedStatus;o&&o!==n&&(this.setState({loading:!0}),function(e,t){return Object(p.post)("/api/hotspots/change_status",m({hotspot:e},t)).catch(u.a)}(e.key,function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),n.forEach(function(t){Nt(e,t,s[t])})}return e}({},function(e){return he[e]}(o),{comment:s||void 0})).then(()=>{this.setState({loading:!1}),this.props.onStatusOptionChange(o)}).then(()=>Object(we.a)(Object(P.translateWithParameters)("hotspots.update.success",Object(P.translate)("hotspots.status_option",o)))).catch(()=>this.setState({loading:!1})))};const t=ue(e.hotspot.status,e.hotspot.resolution);this.state={loading:!1,initialStatus:t,selectedStatus:t}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const e=this.state,t=e.comment,s=e.initialStatus,n=e.loading,o=e.selectedStatus,i=o===s;return r.createElement(St,{comment:t,loading:n,onCommentChange:this.handleCommentChange,onStatusChange:this.handleStatusChange,onSubmit:this.handleSubmit,selectedStatus:o,submitDisabled:i})}}function wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=[],n=!0,o=!1,i=void 0;try{for(var a,r=e[Symbol.iterator]();!(n=(a=r.next()).done)&&(s.push(a.value),!t||s.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==r.return||r.return()}finally{if(o)throw i}}return s}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Pt=Object(x.a)(function(e){const t=e.currentUser,s=e.hotspot,n=wt(r.useState(!1),2),o=n[0],i=n[1],a=ue(s.status,s.resolution),l=!s.canChangeStatus||!Object(S.b)(t),c=r.createElement("div",{"aria-expanded":o,"aria-haspopup":!0,className:Q("padded bordered display-flex-column display-flex-justify-center",{readonly:l}),id:"status-trigger",onClick:()=>!l&&i(!0),role:"button",tabIndex:0},r.createElement("div",{className:"display-flex-center display-flex-space-between"},o?r.createElement("span",{className:"h3"},Object(P.translate)("hotspots.status.select_status")):r.createElement(kt,{showTitle:!0,statusOption:a}),!l&&r.createElement(de.a,{className:"big-spacer-left"}))),p=r.createElement(Je.a,{closeOnClickOutside:!0,closeOnEscape:!0,onRequestClose:()=>i(!1),open:o,overlay:r.createElement(Me.DropdownOverlay,{noPadding:!0,placement:We.PopupPlacement.Bottom},r.createElement(jt,{hotspot:s,onStatusOptionChange:()=>{i(!1),e.onStatusChange()}}))},c);return r.createElement("div",{className:"dropdown"},l?r.createElement(xt.a,{overlay:Object(P.translate)("hotspots.status.cannot_change_status"),placement:"bottom"},p):p)});function Lt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var It=Object(x.a)(function(e){var t;const s=e.branchLike,n=e.component,o=e.currentUser,i=e.hotspot,a=e.loading,l=e.securityCategories,c=e.commentTextRef,p=e.commentVisible,u=e.parentScrollRef,h=Object(R.getPathUrlAsString)(Object(je.j)(n.key,function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),n.forEach(function(t){Lt(e,t,s[t])})}return e}({},Object(O.d)(s),{hotspots:null===(t=i)||void 0===t?void 0:t.key})),!1);return r.createElement(w.a,{loading:a},i&&r.createElement("div",{className:"big-padded hotspot-content",ref:u},r.createElement("div",{className:"huge-spacer-bottom display-flex-space-between"},r.createElement("strong",{className:"big big-spacer-right"},i.message),r.createElement("div",{className:"display-flex-row flex-0"},Object(S.b)(o)&&r.createElement("div",{className:"dropdown spacer-right flex-1-0-auto"},r.createElement(Oe.Button,{onClick:e.onOpenComment},Object(P.translate)("hotspots.comment.open"))),r.createElement(Ce.ClipboardButton,{className:"flex-1-0-auto",copyValue:h},r.createElement(Ne.a,{className:"spacer-right"}),r.createElement("span",null,Object(P.translate)("hotspots.get_permalink"))))),r.createElement("div",{className:"huge-spacer-bottom display-flex-row"},r.createElement("div",{className:"hotspot-information display-flex-column display-flex-space-between"},r.createElement("div",{className:"display-flex-center"},r.createElement("span",{className:"big-spacer-right"},Object(P.translate)("category")),r.createElement("strong",{className:"nowrap"},l[i.rule.securityCategory].title)),r.createElement("div",{className:"display-flex-center"},r.createElement("span",{className:"big-spacer-right"},Object(P.translate)("hotspots.risk_exposure")),r.createElement("div",{className:Q("hotspot-risk-badge",i.rule.vulnerabilityProbability)},Object(P.translate)("risk_exposure",i.rule.vulnerabilityProbability))),r.createElement("div",{className:"display-flex-center"},r.createElement("span",{className:"big-spacer-right"},Object(P.translate)("assignee")),r.createElement("div",null,r.createElement(Ke,{hotspot:i,onAssigneeChange:e.onUpdateHotspot})))),r.createElement("div",{className:"huge-spacer-left"},r.createElement(Pt,{hotspot:i,onStatusChange:e.onUpdateHotspot}))),r.createElement(gt,{branchLike:s,hotspot:i}),r.createElement(yt,{hotspot:i}),r.createElement(nt,{commentTextRef:c,commentVisible:p,currentUser:o,hotspot:i,onCloseComment:e.onCloseComment,onCommentUpdate:e.onUpdateHotspot,onOpenComment:e.onOpenComment})))});class At extends r.PureComponent{constructor(e){super(e),this.mounted=!1,this.fetchHotspot=()=>(this.setState({loading:!0}),function(e){return Object(p.getJSON)("/api/hotspots/show",{hotspot:e}).then(e=>{const t=e.users,s=h(e,["users"]);return t&&(s.assignee&&(s.assigneeUser=t.find(e=>e.login===s.assignee)||{active:!0,login:s.assignee}),s.authorUser=t.find(e=>e.login===s.author)||{active:!0,login:s.author},s.comment.forEach(e=>{e.user=t.find(t=>t.login===e.login)||{active:!0,login:e.login}})),s}).catch(u.a)}(this.props.hotspotKey).then(e=>(this.mounted&&this.setState({hotspot:e,loading:!1}),e)).catch(()=>this.mounted&&this.setState({loading:!1}))),this.handleHotspotUpdate=()=>this.fetchHotspot().then(e=>{if(e)return this.props.onUpdateHotspot(e.key)}),this.handleOpenComment=()=>{this.setState({commentVisible:!0}),this.commentTextRef.current&&this.commentTextRef.current.focus({preventScroll:!0}),this.commentTextRef.current&&this.parentScrollRef.current&&Object(ke.scrollToElement)(this.commentTextRef.current,{parent:this.parentScrollRef.current,bottomOffset:100})},this.handleCloseComment=()=>{this.setState({commentVisible:!1})},this.commentTextRef=r.createRef(),this.parentScrollRef=r.createRef(),this.state={loading:!1,commentVisible:!1}}componentDidMount(){this.mounted=!0,this.fetchHotspot()}componentDidUpdate(e,t){e.hotspotKey!==this.props.hotspotKey&&this.fetchHotspot(),this.commentTextRef.current&&!t.commentVisible&&this.state.commentVisible&&this.commentTextRef.current.focus({preventScroll:!0})}componentWillUnmount(){this.mounted=!1}render(){const e=this.props,t=e.branchLike,s=e.component,n=e.securityCategories,o=this.state,i=o.hotspot,a=o.loading,l=o.commentVisible;return r.createElement(It,{branchLike:t,component:s,commentTextRef:this.commentTextRef,commentVisible:l,hotspot:i,loading:a,onCloseComment:this.handleCloseComment,onOpenComment:this.handleOpenComment,onUpdateHotspot:this.handleHotspotUpdate,parentScrollRef:this.parentScrollRef,securityCategories:n})}}s(1131);function Tt(e){const t=e.branchLike,s=e.component,n=e.hotspots,o=e.hotspotsReviewedMeasure,i=e.hotspotsTotal,a=e.isStaticListOfHotspots,l=e.loading,c=e.loadingMeasure,p=e.loadingMore,u=e.securityCategories,h=e.selectedHotspot,m=e.filters;return r.createElement("div",{id:"security_hotspots"},r.createElement(X,{component:s,filters:m,hotspotsReviewedMeasure:o,isStaticListOfHotspots:a,loadingMeasure:c,onBranch:Object(O.f)(t),onChangeFilters:e.onChangeFilters,onShowAllHotspots:e.onShowAllHotspots}),r.createElement(A.a,null,o=>{let c=o.top;return r.createElement("div",{className:"wrapper",style:{top:c}},r.createElement(I.a,{suggestions:"security_hotspots"}),r.createElement(N.a,{title:Object(P.translate)("hotspots.page")}),r.createElement(L.a,{anchor:"security_hotspots_main"}),l?r.createElement(w.a,{className:"huge-spacer-left big-spacer-top"}):r.createElement(r.Fragment,null,0!==n.length&&h?r.createElement("div",{className:"layout-page"},r.createElement("div",{className:"sidebar"},r.createElement(xe,{hotspots:n,hotspotsTotal:i,isStaticListOfHotspots:a,loadingMore:p,onHotspotClick:e.onHotspotClick,onLoadMore:e.onLoadMore,securityCategories:u,selectedHotspot:h,statusFilter:m.status})),r.createElement("div",{className:"main"},r.createElement(At,{branchLike:t,component:s,hotspotKey:h.key,onUpdateHotspot:e.onUpdateHotspot,securityCategories:u}))):r.createElement(D,{filtered:m.assignedToMe||Object(O.f)(t)&&m.sinceLeakPeriod||m.status!==v.TO_REVIEW,isStaticListOfHotspots:a})))}))}function Rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=[],n=!0,o=!1,i=void 0;try{for(var a,r=e[Symbol.iterator]();!(n=(a=r.next()).done)&&(s.push(a.value),!t||s.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==r.return||r.return()}finally{if(o)throw i}}return s}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Dt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),n.forEach(function(t){_t(e,t,s[t])})}return e}function _t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"SecurityHotspotsApp",function(){return Ut});const Mt=500;class Ut extends r.PureComponent{constructor(e){super(e),this.mounted=!1,this.handleCallFailure=()=>{this.mounted&&this.setState({loading:!1,loadingMore:!1})},this.fetchSecurityHotspotsReviewed=()=>{const e=this.props,t=e.branchLike,s=e.component,n=this.state.filters,o=n.sinceLeakPeriod?"new_security_hotspots_reviewed":"security_hotspots_reviewed";return this.setState({loadingMeasure:!0}),Object(c.d)(Dt({component:s.key,metricKeys:o},Object(O.d)(t))).then(e=>{var t;if(!this.mounted)return;const s=e&&e.length>0?e[0]:void 0,o=n.sinceLeakPeriod?Object(k.b)(s):null===(t=s)||void 0===t?void 0:t.value;this.setState({hotspotsReviewedMeasure:o,loadingMeasure:!1})}).catch(()=>{this.mounted&&this.setState({loadingMeasure:!1})})},this.reloadSecurityHotspotList=()=>(this.setState({loading:!0}),this.fetchSecurityHotspots().then(e=>{let t=e.hotspots,s=e.paging;this.mounted&&this.setState({hotspots:t,hotspotsPageIndex:1,hotspotsTotal:s.total,loading:!1,selectedHotspot:t.length>0?t[0]:void 0})}).catch(this.handleCallFailure)),this.handleChangeFilters=e=>{this.setState(t=>{return{filters:Dt({},t.filters,e)}},()=>{this.reloadSecurityHotspotList(),void 0!==e.sinceLeakPeriod&&this.fetchSecurityHotspotsReviewed()})},this.handleHotspotClick=e=>this.setState({selectedHotspot:e}),this.handleHotspotUpdate=e=>{const t=this.state,s=t.hotspots,n=t.hotspotsPageIndex,i=s.findIndex(t=>t.key===e);return Promise.all(o()(n).map(e=>this.fetchSecurityHotspots(e+1))).then(e=>{const t=a()(e,"hotspots"),s=e[e.length-1].paging,n=t[Math.min(i,t.length-1)];this.setState({hotspots:t,hotspotsPageIndex:s.pageIndex,hotspotsTotal:s.total,selectedHotspot:n})}).then(this.fetchSecurityHotspotsReviewed)},this.handleShowAllHotspots=()=>{this.props.router.push(Dt({},this.props.location,{query:Dt({},this.props.location.query,{hotspots:void 0})}))},this.handleLoadMore=()=>{const e=this.state,t=e.hotspots,s=e.hotspotsPageIndex;return this.setState({loadingMore:!0}),this.fetchSecurityHotspots(s+1).then(e=>{let n=e.hotspots;this.mounted&&this.setState({hotspots:[...t,...n],hotspotsPageIndex:s+1,loadingMore:!1})}).catch(this.handleCallFailure)},this.state={loading:!0,loadingMeasure:!1,loadingMore:!1,hotspots:[],hotspotsPageIndex:1,securityCategories:{},selectedHotspot:void 0,filters:Dt({},this.constructFiltersFromProps(e),{status:v.TO_REVIEW})}}componentDidMount(){this.mounted=!0,Object(l.addNoFooterPageClass)(),this.fetchInitialData()}componentDidUpdate(e){this.props.component.key===e.component.key&&this.props.location.query.hotspots===e.location.query.hotspots||this.fetchInitialData(),Object(O.i)(this.props.branchLike,e.branchLike)&&Object(S.b)(this.props.currentUser)===Object(S.b)(e.currentUser)&&this.props.location.query.assignedToMe===e.location.query.assignedToMe&&this.props.location.query.sinceLeakPeriod===e.location.query.sinceLeakPeriod||this.setState(e=>{let t=e.filters;return{filters:Dt({},this.constructFiltersFromProps,t)}})}componentWillUnmount(){Object(l.removeNoFooterPageClass)(),this.mounted=!1}constructFiltersFromProps(e){return{assignedToMe:"true"===e.location.query.assignedToMe&&Object(S.b)(e.currentUser),sinceLeakPeriod:Object(O.h)(e.branchLike)||"true"===e.location.query.sinceLeakPeriod}}fetchInitialData(){return Promise.all([Object(C.a)(),this.fetchSecurityHotspots(),this.fetchSecurityHotspotsReviewed()]).then(e=>{let t=Rt(e,2),s=t[0].sonarsourceSecurity,n=t[1],o=n.hotspots,i=n.paging;this.mounted&&this.setState({hotspots:o,hotspotsTotal:i.total,loading:!1,securityCategories:s,selectedHotspot:o.length>0?o[0]:void 0})}).catch(this.handleCallFailure)}fetchSecurityHotspots(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=this.props,s=t.branchLike,n=t.component,o=t.location,i=this.state.filters,a=o.query.hotspots?o.query.hotspots.split(","):void 0;if(this.setState({hotspotKeys:a}),a&&a.length>0)return function(e,t){return Object(p.getJSON)("/api/hotspots/search",m({},t,{hotspots:e.join()})).catch(u.a)}(a,Dt({projectKey:n.key},Object(O.d)(s)));const r=i.status===v.TO_REVIEW?f.TO_REVIEW:f.REVIEWED,l=i.status===v.TO_REVIEW?void 0:b[i.status];return c=Dt({projectKey:n.key,p:e,ps:Mt,status:r,resolution:l,onlyMine:i.assignedToMe,sinceLeakPeriod:i.sinceLeakPeriod},Object(O.d)(s)),Object(p.getJSON)("/api/hotspots/search",c).catch(u.a);var c}render(){const e=this.props,t=e.branchLike,s=e.component,n=this.state,o=n.hotspotKeys,i=n.hotspots,a=n.hotspotsReviewedMeasure,l=n.hotspotsTotal,c=n.loading,p=n.loadingMeasure,u=n.loadingMore,h=n.securityCategories,m=n.selectedHotspot,d=n.filters;return r.createElement(Tt,{branchLike:t,component:s,filters:d,hotspots:i,hotspotsReviewedMeasure:a,hotspotsTotal:l,isStaticListOfHotspots:Boolean(o&&o.length>0),loading:c,loadingMeasure:p,loadingMore:u,onChangeFilters:this.handleChangeFilters,onHotspotClick:this.handleHotspotClick,onLoadMore:this.handleLoadMore,onShowAllHotspots:this.handleShowAllHotspots,onUpdateHotspot:this.handleHotspotUpdate,securityCategories:h,selectedHotspot:m})}}t.default=Object(x.a)(Ut)},330:function(e,t,s){"use strict";s.d(t,"a",function(){return i});var n=s(2),o=s(355);function i(e){let t=e.suggestions;return n.createElement(o.a.Consumer,null,e=>{let s=e.addSuggestions,o=e.removeSuggestions;return n.createElement(a,{addSuggestions:s,removeSuggestions:o,suggestions:t})})}class a extends n.PureComponent{componentDidMount(){this.props.addSuggestions(this.props.suggestions)}componentDidUpdate(e){e.suggestions!==this.props.suggestions&&(this.props.removeSuggestions(this.props.suggestions),this.props.addSuggestions(e.suggestions))}componentWillUnmount(){this.props.removeSuggestions(this.props.suggestions)}render(){return null}}},342:function(e,t,s){"use strict";s.d(t,"b",function(){return a}),s.d(t,"a",function(){return r});var n=s(2),o=s(304),i=s(29);const a={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};function r(e){let t=e.children,s=e.date;return n.createElement(o.FormattedDate,Object.assign({value:Object(i.parseDate)(s)},a),t)}},343:function(e,t,s){"use strict";s.d(t,"b",function(){return r}),s.d(t,"a",function(){return l});var n=s(2),o=s(304),i=s(29);const a={year:"numeric",month:"short",day:"2-digit"},r={year:"numeric",month:"long",day:"numeric"};function l(e){let t=e.children,s=e.date,l=e.long;return n.createElement(o.FormattedDate,Object.assign({value:Object(i.parseDate)(s)},l?r:a),t)}},348:function(e,t,s){"use strict";s.d(t,"a",function(){return a});var n=s(2),o=s(5),i=s(398);function a(e){return n.createElement(i.a.Consumer,null,t=>{let s=t.addA11ySkipLink,o=t.removeA11ySkipLink;return n.createElement(r,Object.assign({addA11ySkipLink:s,removeA11ySkipLink:o},e))})}class r extends n.PureComponent{constructor(){super(...arguments),this.getLink=()=>{const e=this.props,t=e.anchor,s=e.label;return{key:t,label:void 0===s?Object(o.translate)("skip_to_content"):s,weight:e.weight}}}componentDidMount(){this.props.addA11ySkipLink(this.getLink())}componentWillUnmount(){this.props.removeA11ySkipLink(this.getLink())}render(){const e=this.props.anchor;return n.createElement("span",{id:"a11y_target__".concat(e)})}}},359:function(e,t,s){"use strict";s.d(t,"a",function(){return a});var n=s(2),o=s(304),i=s(29);function a(e){let t=e.children,s=e.date;return n.createElement(o.FormattedRelative,{value:Object(i.parseDate)(s)},t)}},376:function(e,t,s){"use strict";s.d(t,"a",function(){return r});var n=s(2),o=s(445),i=s.n(o),a=s(5);function r(e){let t=e.className,s=e.severity;return s?n.createElement("span",{className:t},n.createElement(i.a,{className:"little-spacer-right",severity:s}),Object(a.translate)("severity",s)):null}},379:function(e,t,s){"use strict";var n;s.d(t,"a",function(){return n}),function(e){e.Application="APP",e.Directory="DIR",e.Developper="DEV",e.File="FIL",e.Portfolio="VW",e.Project="TRK",e.SubPortfolio="SVW",e.SubProject="BRC",e.TestFile="UTS"}(n||(n={}))},390:function(e,t,s){"use strict";s.d(t,"a",function(){return r}),s.d(t,"b",function(){return l}),s.d(t,"c",function(){return c});var n=s(344),o=s(419);function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const a=["sqale_rating","maintainability_rating","reliability_rating","security_rating"];function r(e,t){return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),n.forEach(function(t){i(e,t,s[t])})}return e}({},e,{metric:t[e.metric],leak:l(e)})}function l(e){if(!e||!e.periods)return;const t=Object(o.a)(e.periods);return t&&t.value}function c(e,t){const s=Object(n.isDiffMetric)(e)?e.substr(4):e;if(a.includes(s))return Object(n.getRatingTooltip)(s,t)}},397:function(e,t,s){"use strict";s.d(t,"a",function(){return h});var n=s(2),o=s(314),i=s.n(o),a=s(369),r=s.n(a),l=s(386),c=s.n(l),p=s(317),u=s(390);function h(e){let t=e.className,s=e.decimals,o=e.metricKey,a=e.metricType,l=e.small,h=e.value;if(void 0===h)return n.createElement("span",{className:t},"–");if("LEVEL"===a)return n.createElement(r.a,{className:t,level:h,small:l});if("RATING"!==a){const e=Object(p.formatMeasure)(h,a,{decimals:s});return n.createElement("span",{className:t},null!=e?e:"–")}const m=Object(u.c)(o,Number(h)),d=n.createElement(c.a,{small:l,value:h});return m?n.createElement(i.a,{overlay:m},n.createElement("span",{className:t},d)):d}},413:function(e,t,s){var n=s(482);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};s(312)(n,o);n.locals&&(e.exports=n.locals)},419:function(e,t,s){"use strict";s.d(t,"a",function(){return i}),s.d(t,"c",function(){return a}),s.d(t,"b",function(){return r}),s.d(t,"d",function(){return l});var n=s(29),o=s(5);function i(e){return function(e,t){if(Array.isArray(e))return e.find(e=>e.index===t)}(e,1)}function a(e,t){if(!e)return;let s=e.modeParam||e.parameter||"";switch(e.mode){case"SPECIFIC_ANALYSIS":s=t(e.date);break;case"PREVIOUS_VERSION":s=s||t(e.date);break;case"previous_version":if(!s)return Object(o.translate)("overview.period.previous_version_only_date");break;case"date":s=s&&t(s);break;case"manual_baseline":s=s||t(e.date)}return Object(o.translateWithParameters)("overview.period.".concat(e.mode.toLowerCase()),s)}function r(e){return e&&e.date?Object(n.parseDate)(e.date):void 0}function l(e){return void 0!==e.project}},420:function(e,t,s){"use strict";s.d(t,"a",function(){return i});var n=s(384),o=s(383);function i(e){Object(o.default)().dispatch(n.b(e))}},442:function(e,t,s){"use strict";s.d(t,"a",function(){return p});var n=s(309),o=s(2),i=s(329),a=s.n(i),r=s(400),l=s.n(r),c=s(5);s(413);function p(e){let t=e.allowUpdate,s=void 0!==t&&t,i=e.className,r=e.tags;return o.createElement("span",{"aria-label":Object(c.translateWithParameters)("tags_list_x",r.join(", ")),className:n("tags-list",i)},o.createElement(l.a,{className:"text-middle"}),o.createElement("span",{"aria-hidden":!0,className:"text-ellipsis text-middle",title:r.join(", ")},r.join(", ")),s&&o.createElement(a.a,{className:"text-middle"}))}},443:function(e,t,s){"use strict";s.d(t,"a",function(){return a});var n=s(361),o=s.n(n),i=s(2);class a extends i.PureComponent{constructor(e){super(e),this.getPosition=()=>{const e=this.container&&this.container.getBoundingClientRect();return e?{top:window.pageYOffset+e.top,left:window.pageXOffset+e.left}:{top:0,left:0}},this.debouncedOnResize=o()(()=>this.forceUpdate(),250)}componentDidMount(){this.forceUpdate(),window.addEventListener("resize",this.debouncedOnResize)}componentWillUnmount(){window.removeEventListener("resize",this.debouncedOnResize)}render(){return i.createElement("div",{className:this.props.className,ref:e=>this.container=e},this.props.children(this.getPosition()))}}},459:function(e,t,s){"use strict";var n=s(385),o=s.n(n),i=s(309),a=s(2),r=s(350),l=s.n(r),c=s(5),p=s(340),u=s.n(p);function h(e){const t=e.active,s=e.custom,n=e.disabled,o=e.element,r=e.selected,l=()=>e.onHover(o),p=i({active:t,disabled:n}),h=e.renderLabel(o);return a.createElement("li",{onFocus:l,onMouseOver:l},a.createElement(u.a,{checked:Boolean(r),className:p,disabled:n,id:o,onCheck:e.onSelectChange},s?a.createElement("span",{"aria-label":"".concat(Object(c.translate)("create_new_element"),": ").concat(h),className:"little-spacer-left"},a.createElement("span",{"aria-hidden":!0,className:"little-spacer-right"},"+"),h):a.createElement("span",{className:"little-spacer-left"},h)))}s.d(t,"a",function(){return m});class m extends a.PureComponent{constructor(e){super(e),this.mounted=!1,this.handleSelectChange=(e,t)=>{e?this.onSelectItem(t):this.onUnselectItem(t)},this.handleSearchChange=e=>{this.onSearchQuery(this.props.validateSearchInput(e))},this.handleElementHover=e=>{this.setState((t,s)=>({activeIdx:this.getAllElements(s,t).indexOf(e)}))},this.handleKeyboard=e=>{switch(e.keyCode){case 40:e.stopPropagation(),e.preventDefault(),this.setState(this.selectNextElement);break;case 38:e.stopPropagation(),e.preventDefault(),this.setState(this.selectPreviousElement);break;case 37:case 39:e.stopPropagation();break;case 13:this.state.activeIdx>=0&&this.toggleSelect(this.getAllElements(this.props,this.state)[this.state.activeIdx])}},this.onSearchQuery=e=>{this.setState({activeIdx:0,loading:!0,query:e}),this.props.onSearch(e).then(this.stopLoading,this.stopLoading)},this.onSelectItem=e=>{this.isNewElement(e,this.props)&&this.onSearchQuery(""),this.props.onSelect(e)},this.onUnselectItem=e=>this.props.onUnselect(e),this.isNewElement=(e,t)=>{let s=t.selectedElements,n=t.elements;return e.length>0&&-1===s.indexOf(e)&&-1===n.indexOf(e)},this.updateSelectedElements=e=>{this.setState(t=>t.query?{selectedElements:e.filterSelected(t.query,e.selectedElements)}:{selectedElements:[...e.selectedElements]})},this.updateUnselectedElements=e=>{this.setState(t=>0===e.listSize?{unselectedElements:o()(e.elements,e.selectedElements)}:e.listSize<t.selectedElements.length?{unselectedElements:[]}:{unselectedElements:o()(e.elements,e.selectedElements).slice(0,e.listSize-t.selectedElements.length)})},this.getAllElements=(e,t)=>this.isNewElement(t.query,e)?[...t.selectedElements,...t.unselectedElements,t.query]:[...t.selectedElements,...t.unselectedElements],this.setElementActive=e=>this.setState({activeIdx:e}),this.selectNextElement=(e,t)=>{const s=e.activeIdx,n=this.getAllElements(t,e);return s<0||s>=n.length-1?{activeIdx:0}:{activeIdx:s+1}},this.selectPreviousElement=(e,t)=>{const s=e.activeIdx,n=this.getAllElements(t,e);if(s<=0){return{activeIdx:n.length-1}}return{activeIdx:s-1}},this.stopLoading=()=>{this.mounted&&this.setState({loading:!1})},this.toggleSelect=e=>{-1===this.props.selectedElements.indexOf(e)?this.onSelectItem(e):this.onUnselectItem(e)},this.state={activeIdx:0,loading:!0,query:"",selectedElements:[],unselectedElements:[]}}componentDidMount(){this.mounted=!0,this.onSearchQuery(""),this.updateSelectedElements(this.props),this.updateUnselectedElements(this.props),this.container&&this.container.addEventListener("keydown",this.handleKeyboard,!0)}componentWillReceiveProps(e){if(this.props.elements!==e.elements||this.props.selectedElements!==e.selectedElements){this.updateSelectedElements(e),this.updateUnselectedElements(e);const t=this.getAllElements(e,this.state).length;this.state.activeIdx>=t&&this.setState({activeIdx:t-1})}}componentDidUpdate(){this.searchInput&&this.searchInput.focus()}componentWillUnmount(){this.mounted=!1,this.container&&this.container.removeEventListener("keydown",this.handleKeyboard)}render(){const e=this.props,t=e.allowSelection,s=void 0===t||t,n=e.allowNewElements,o=void 0===n||n,r=e.footerNode,p=void 0===r?"":r,u=this.props.renderLabel,m=this.state,d=m.query,g=m.activeIdx,f=m.selectedElements,b=m.unselectedElements,v=this.getAllElements(this.props,this.state)[g],y=o&&this.isNewElement(d,this.props),E=0===this.props.listSize,x=i("menu",{"menu-vertically-limited":E,"spacer-top":E,"with-top-separator":E,"with-bottom-separator":Boolean(p)});return a.createElement("div",{className:"multi-select",ref:e=>this.container=e},a.createElement("div",{className:"menu-search"},a.createElement(l.a,{autoFocus:!0,className:"little-spacer-top",loading:this.state.loading,onChange:this.handleSearchChange,placeholder:this.props.placeholder,value:d})),a.createElement("ul",{className:x},f.length>0&&f.map(e=>a.createElement(h,{active:v===e,element:e,key:e,onHover:this.handleElementHover,onSelectChange:this.handleSelectChange,renderLabel:u,selected:!0})),b.length>0&&b.map(e=>a.createElement(h,{active:v===e,disabled:!s,element:e,key:e,onHover:this.handleElementHover,onSelectChange:this.handleSelectChange,renderLabel:u})),y&&a.createElement(h,{active:v===d,custom:!0,element:d,key:d,onHover:this.handleElementHover,onSelectChange:this.handleSelectChange,renderLabel:u}),!y&&f.length<1&&b.length<1&&a.createElement("li",{className:"spacer-left"},Object(c.translateWithParameters)("no_results_for_x",d))),p)}}m.defaultProps={filterSelected:(e,t)=>t.filter(t=>t.includes(e)),listSize:0,renderLabel:e=>e,validateSearchInput:e=>e}},465:function(e,t,s){"use strict";s.d(t,"a",function(){return r});var n=s(309),o=s(2),i=s(5),a=s(319);class r extends o.PureComponent{handleClick(e){e.preventDefault(),window.open(Object(a.n)(),"Markdown","height=300,width=600,scrollbars=1,resizable=1")}render(){return o.createElement("div",{className:n("markdown-tips",this.props.className)},o.createElement("a",{className:"little-spacer-right",href:"#",onClick:this.handleClick},Object(i.translate)("markdown.helplink")),":",o.createElement("span",{className:"spacer-left"},"*",Object(i.translate)("bold"),"*"),o.createElement("span",{className:"spacer-left"},"``",Object(i.translate)("code"),"``"),o.createElement("span",{className:"spacer-left"},"* ",Object(i.translate)("bulleted_point")))}}},482:function(e,t,s){(e.exports=s(311)(!1)).push([e.i,".tags-list{white-space:nowrap;line-height:16px}.tags-list i:before{font-size:12px}.tags-list span{display:inline-block;vertical-align:middle;text-align:left;max-width:220px;padding-left:4px;padding-right:4px}",""])},513:function(e,t,s){"use strict";s.d(t,"a",function(){return a});var n=s(2),o=s(5),i=s(459);s(413);function a(e){return n.createElement(i.a,{elements:e.tags,listSize:e.listSize,onSearch:e.onSearch,onSelect:e.onSelect,onUnselect:e.onUnselect,placeholder:Object(o.translate)("search.search_for_tags"),selectedElements:e.selectedTags,validateSearchInput:r})}function r(e){return e.toLowerCase().replace(/[^-a-z0-9+#.]/gi,"")}},516:function(e,t,s){"use strict";s.d(t,"a",function(){return c});var n=s(2),o=s(596),i=s(331);const a=Object(o.lazyLoadComponent)(()=>Promise.all([s.e(24),s.e(375)]).then(s.t.bind(null,784,7)),"DonutChart"),r={small:16,normal:24,big:40,huge:60},l={small:2,normal:3,big:3,huge:4};function c(e){let t=e.muted,s=void 0!==t&&t,o=e.size,c=void 0===o?"normal":o,p=e.value,u=[{value:100,fill:"#ccc "}],h=0;if(null!=p){const e=Number(p);u=[{value:e,fill:s?i.colors.gray71:i.colors.green},{value:100-e,fill:s?i.colors.barBackgroundColor:i.colors.lineCoverageRed}],0!==e&&e<100&&(h=.1)}const m=r[c],d=l[c];return n.createElement(a,{data:u,height:m,padAngle:h,thickness:d,width:m})}},530:function(e,t,s){"use strict";var n=s(2),o=s(549),i=s.n(o),a=s(8);function r(e){return Object(a.post)("/api/favorites/add",{component:e})}function l(e){return Object(a.post)("/api/favorites/remove",{component:e})}s.d(t,"a",function(){return c});class c extends n.PureComponent{constructor(e){super(e),this.mounted=!1,this.toggleFavorite=()=>{const e=!this.state.favorite;return(e?r:l)(this.props.component).then(()=>{this.mounted&&this.setState({favorite:e},()=>{this.props.handleFavorite&&this.props.handleFavorite(this.props.component,e)})})},this.state={favorite:e.favorite}}componentDidMount(){this.mounted=!0}componentDidUpdate(e,t){t.favorite!==this.props.favorite&&this.setState({favorite:this.props.favorite})}componentWillUnmount(){this.mounted=!1}render(){const e=this.props,t=e.className,s=e.qualifier,o=this.state.favorite;return n.createElement(i.a,{className:t,favorite:o,qualifier:s,toggleFavorite:this.toggleFavorite})}}},552:function(e,t,s){"use strict";s.d(t,"a",function(){return a});var n=s(309),o=s(2);s(712);function i(e,t){if(null==e)return{};var s,n,o=function(e,t){if(null==e)return{};var s,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(o[s]=e[s]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(o[s]=e[s])}return o}function a(e){const t=e.children,s=e.leading,a=e.onClick,r=e.selected,l=i(e,["children","leading","onClick","selected"]),c=a?{onClick:a,role:"button",tabIndex:0}:{};return o.createElement("div",Object.assign({className:n("location-index",{"is-leading":s,selected:r})},c,l),t)}},553:function(e,t,s){"use strict";s.d(t,"a",function(){return r});var n=s(2),o=s(874),i=s.n(o),a=s(5);function r(e){const t=e.resolution&&" (".concat(Object(a.translate)("issue.resolution",e.resolution),")");return n.createElement("span",{className:e.className},n.createElement(i.a,{className:"little-spacer-right",status:e.status}),Object(a.translate)("issue.status",e.status),t)}},606:function(e,t,s){"use strict";function n(){return s.e(376).then(s.t.bind(null,832,3)).then(e=>e.default)}function o(e,t){const s=e.cwe[t];return s?"unknown"===t?s.title:"CWE-".concat(t," - ").concat(s.title):"CWE-".concat(t)}function i(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=e.owaspTop10[t];return l(n?"".concat(t.toUpperCase()," - ").concat(n.title):t.toUpperCase(),"OWASP",s)}function a(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=e.sansTop25[t];return l(n?n.title:t,"SANS",s)}function r(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=e.sonarsourceSecurity[t];return n?"others"===t?n.title:l(n.title,"SONAR",s):l(t.toUpperCase(),"SONAR",s)}function l(e,t,s){return s?"".concat(t," ").concat(e):e}s.d(t,"a",function(){return n}),s.d(t,"b",function(){return o}),s.d(t,"c",function(){return i}),s.d(t,"d",function(){return a}),s.d(t,"e",function(){return r})},607:function(e,t,s){"use strict";s.d(t,"c",function(){return r}),s.d(t,"b",function(){return l}),s.d(t,"d",function(){return c}),s.d(t,"a",function(){return p}),s.d(t,"e",function(){return u});var n=s(685),o=s.n(n),i=s(710),a=s(662);function r(e){const t={};return e.forEach(e=>{const s=e.textRange?e.textRange.endLine:0;s in t||(t[s]=[]),t[s].push(e)}),t}function l(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((e,t)=>{e[t.component]=e[t.component]||{};const s=t.textRange?t.textRange.endLine:0;return e[t.component][s]=e[t.component][s]||[],e[t.component][s].push(t),e},{})}function c(e){const t={};return e.forEach(e=>{Object(a.a)(e.textRange).forEach(e=>{e.line in t||(t[e.line]=[]),t[e.line].push(e)})}),t}function p(e){if(null==e)return{};const t={};return e.forEach((e,s)=>{e.blocks.forEach(e=>{if("1"===e._ref)for(let n=e.from;n<e.from+e.size;n++)n in t||(t[n]=[]),t[n].push(s)})}),t}function u(e){const t={};return e.forEach(e=>{const s=Object(i.c)(e.code||""),n=o()(s.map(e=>{const t=e.className.match(/sym-\d+/g);return null!=t?t:[]}));t[e.line]=n.filter(e=>e)}),t}},661:function(e,t,s){"use strict";s.d(t,"a",function(){return a});var n=s(2),o=s(5),i=s(317);function a(e){let t,s=e.diff;if("file"===s.key)return n.createElement("p",null,Object(o.translateWithParameters)("issue.change.file_move",s.oldValue||"",s.newValue||""));if(["from_long_branch","from_branch"].includes(s.key))return n.createElement("p",null,Object(o.translateWithParameters)("issue.change.from_branch",s.oldValue||"",s.newValue||""));if("from_short_branch"===s.key)return n.createElement("p",null,Object(o.translateWithParameters)("issue.change.from_non_branch",s.oldValue||"",s.newValue||""));if("line"===s.key)return n.createElement("p",null,Object(o.translateWithParameters)("issue.changelog.line_removed_X",s.oldValue||""));if(null!=s.newValue){let e=s.newValue;"effort"===s.key&&(e=Object(i.formatMeasure)(s.newValue,"WORK_DUR")),t=Object(o.translateWithParameters)("issue.changelog.changed_to",Object(o.translate)("issue.changelog.field",s.key),e)}else t=Object(o.translateWithParameters)("issue.changelog.removed",Object(o.translate)("issue.changelog.field",s.key));if(null!=s.oldValue){let e=s.oldValue;"effort"===s.key&&(e=Object(i.formatMeasure)(s.oldValue,"WORK_DUR")),t+=" (".concat(Object(o.translateWithParameters)("issue.changelog.was",e),")")}return n.createElement("p",null,t)}},662:function(e,t,s){"use strict";function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function o(e){if(!e)return[];const t=[];for(let s=e.startLine;s<=e.endLine;s++){const n=s===e.startLine?e.startOffset:0,o=s===e.endLine?e.endOffset:999999;t.push({line:s,from:n,to:o})}return t}function i(e,t){return t?t.reduce((t,s)=>{return[...t,...s?o(s.textRange).filter(t=>t.line===e.line).map(e=>(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},o=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),o.forEach(function(t){n(e,t,s[t])})}return e})({},e,{startLine:s.textRange.startLine,index:s.index,text:s.msg})):[]]},[]):[]}s.d(t,"a",function(){return o}),s.d(t,"b",function(){return i})},663:function(e,t,s){"use strict";s.d(t,"a",function(){return o});var n=s(2);const o=n.createContext({branchLike:{},file:{}})},710:function(e,t,s){"use strict";s.d(t,"c",function(){return l}),s.d(t,"b",function(){return c}),s.d(t,"a",function(){return u});var n=s(425),o=s.n(n);function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),n.forEach(function(t){a(e,t,s[t])})}return e}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const r="source-line-code-issue";function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const s=document.createElement("div");let n=[];return s.innerHTML=e,[].forEach.call(s.childNodes,e=>{if(1===e.nodeType){const s=t?t+" "+e.className:e.className,o=l(e.innerHTML,s);n=n.concat(o)}3===e.nodeType&&e.nodeValue&&n.push({className:t,markers:[],text:e.nodeValue})}),n}function c(e,t){const s=new RegExp("\\b".concat(t,"\\b"));return e.map(e=>s.test(e.className)?i({},e,{className:"".concat(e.className," highlighted")}):e)}function p(e,t,s,n){return t>=n?e.substr(t-n,s-t):e.substr(0,s-t)}function u(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;return t.forEach(t=>{const n=[];let a=0,r=t.line!==t.startLine;e.forEach(e=>{const l=function(e,t,s,n){return{from:Math.max(e,s),to:Math.min(t,n)}}(a,a+e.text.length,t.from,t.to),c=p(e.text,a,l.from,a),u=p(e.text,l.from,l.to,a),h=p(e.text,l.to,a+e.text.length,a);if(c.length&&n.push(i({},e,{text:c})),u.length){const i=-1===e.className.indexOf(s)?"".concat(e.className," ").concat(s):e.className;n.push({className:i,markers:r||null==t.index?e.markers:o()([...e.markers,t.index]),text:u}),r=!0}h.length&&n.push(i({},e,{text:h})),a+=e.text.length}),e=n.slice()}),e}},712:function(e,t,s){var n=s(713);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};s(312)(n,o);n.locals&&(e.exports=n.locals)},713:function(e,t,s){(e.exports=s(311)(!1)).push([e.i,".location-index{position:relative;display:inline-block;vertical-align:top;line-height:16px;padding-left:6px;padding-right:6px;border-radius:2px;background-color:#d18582;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;transition:background-color .3s ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.location-index.selected{background-color:#a4030f}.location-index.muted{background-color:#cdcdcd}.location-index.is-leading:first-child{margin-left:0}.location-index.is-leading:not(:first-child){margin-left:-22px}.location-index[tabindex]{cursor:pointer}.location-index[tabindex]:hover,a:hover>.location-index{background-color:#a4030f}.location-index[tabindex]:focus{outline:none}.source-line-code-inner .location-index{line-height:16px;margin:1px 4px}.source-line-code-inner .location-index+.location-index{margin-left:0}",""])},714:function(e,t,s){"use strict";s.d(t,"a",function(){return i});var n=s(309),o=s(2);s(715);function i(e){return o.createElement("div",{className:n("location-message",{selected:e.selected})},e.children)}},715:function(e,t,s){var n=s(716);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};s(312)(n,o);n.locals&&(e.exports=n.locals)},716:function(e,t,s){(e.exports=s(311)(!1)).push([e.i,'.location-message{display:inline-block;vertical-align:top;line-height:16px;padding:0 6px;border-radius:2px;background-color:#9e9e9e;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;text-overflow:ellipsis;overflow:hidden;transition:background-color .3s ease}.location-message.selected{background-color:#475760}.location-index+.location-message{margin-left:4px}.location-index>.location-message{display:none;position:absolute;bottom:calc(100% + 4px);left:0}.location-index:hover>.location-message{display:block}.location-index>.location-message:after{position:absolute;bottom:-5px;left:4px;width:0;height:0;border-top:5px solid #475760;border-left:5px solid transparent;border-right:5px solid transparent;content:""}.source-line-code .location-message{padding-top:2px;padding-bottom:2px}',""])},717:function(e,t,s){var n=s(718);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};s(312)(n,o);n.locals&&(e.exports=n.locals)},718:function(e,t,s){(e.exports=s(311)(!1)).push([e.i,'.issue{position:relative;padding-top:8px;padding-bottom:8px;background-color:#f2dede;transition:all .3s ease,border 0s ease}.issue.hotspot{background-color:#eeeff4}.issue.selected{box-shadow:none;outline:none;border:2px solid #4b9fd5!important}.issue+.issue,.issue-container+.issue-container{margin-top:5px}.issue.selected+.issue{border-top-color:transparent}.issue-row{display:flex;margin-bottom:5px}.issue-row-meta{flex-grow:0;padding-right:5px;white-space:nowrap}.issue-message{flex-grow:1;padding-left:8px;padding-right:8px;line-height:18px;font-size:13px;font-weight:600;text-overflow:ellipsis}.issue-actions{justify-content:space-between;flex-wrap:wrap;padding-left:8px}.issue-actions,.issue-meta-list{display:flex;align-items:center}.issue-meta{line-height:16px;font-size:12px}.issue-meta+.issue-meta{margin-left:8px}.issue-meta-label{display:inline-block;vertical-align:top;max-width:180px;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.issue-see-rule{border-bottom:none;font-size:12px}.issue-changelog{width:450px;max-height:320px;overflow:auto;white-space:normal}.issue-comments{margin-top:5px;padding-left:8px;font-size:12px}.issue-comment{display:flex}.issue-comment+.issue-comment{margin-top:4px}.issue-comment-author{max-width:130px;font-weight:600;overflow:hidden;text-overflow:ellipsis}.issue-comment-age,.issue-comment-author{flex-shrink:0;line-height:18px;color:#777;white-space:nowrap}.issue-comment-text{flex:1;min-width:0;margin-left:5px;margin-right:5px;line-height:18px;line-height:1.5;overflow:hidden;outline:none;word-break:break-all}.issue-comment-text.markdown pre{float:none;height:auto;margin:0;padding:8px;background-color:#e6e6e6;border:none;border-radius:3px}.issue-comment-text.markdown br~pre{margin-top:8px}.issue-comment-actions{flex-shrink:0;padding-left:5px;line-height:18px;white-space:nowrap}.issue-comment-bubble-popup{width:440px;font-size:12px}.issue-comment-form-text textarea{width:100%;max-width:100%}.issue-comment-form-footer{margin-top:5px;line-height:22px}.issue-comment-form-footer:after,.issue-comment-form-footer:before{display:table;content:"";line-height:0}.issue-comment-form-footer:after{clear:both}.issue-comment-form-actions{float:right}.issue-comment-form-tips{float:left}.issue-with-checkbox{padding-left:24px}.issue-with-checkbox .issue-checkbox-container{display:flex;justify-content:center;align-items:center}.issue-checkbox-container{display:none;position:absolute;width:28px;top:0;bottom:0;left:0;border:none}.issue-checkbox-container:hover{background-color:rgba(0,0,0,.05)}.issue:not(.selected) .location-index{background-color:#999}.issue .menu:not(.issues-similar-issues-menu):not(.issue-changelog){max-height:120px;overflow:auto}',""])},721:function(e,t,s){"use strict";function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=[],n=!0,o=!1,i=void 0;try{for(var a,r=e[Symbol.iterator]();!(n=(a=r.next()).done)&&(s.push(a.value),!t||s.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==r.return||r.return()}finally{if(o)throw i}}return s}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}s.d(t,"c",function(){return r}),s.d(t,"b",function(){return l}),s.d(t,"a",function(){return c}),s.d(t,"d",function(){return h}),s.d(t,"h",function(){return m}),s.d(t,"f",function(){return d}),s.d(t,"e",function(){return g}),s.d(t,"g",function(){return f});const i=5,a=5,r=11,l=9,c=50;function p(e,t){let s=o(e,2),n=s[0],i=s[1],a=o(t,2),l=a[0];return!(n>a[1]+r||i<l-r)}function u(e){return{component:e.component,textRange:e.textRange||{endLine:0,endOffset:0,startLine:0,startOffset:0}}}function h(e){const t=e.locations,s=e.issue;return(e.addIssueLocation?[u(s),...t]:t).reduce((e,t,n)=>{const o=Math.max(1,t.textRange.startLine-i),r=function(e){const t=e.issue,s=e.locationEnd,n=t.textRange&&t.textRange.endLine||0;return n&&n!==s?s+a:s+l}({issue:s,locationEnd:t.textRange.endLine});let c;return e=e.filter(e=>{if(p([e.start,e.end],[o,r])){let t=!1;return c||(c=e,t=!0),c.start=Math.min(o,e.start,c.start),c.end=Math.max(r,e.end,c.end),t}return!0}),void 0===c&&e.push({start:o,end:r,index:n}),e},[])}function m(e,t){return e.map(e=>{const s=[];for(let n=e.start;n<=e.end;n++)t[n]&&s.push(t[n]);return s}).filter(e=>e.length>0)}function d(e,t){let s,o="";const i=[];return e.forEach((e,a)=>{e.component!==o&&(s=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},o=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),o.forEach(function(t){n(e,t,s[t])})}return e}({},t[e.component]||function(e){return{component:{key:e,measures:{},path:"",project:"",projectName:"",q:"FIL",uuid:""},sources:[]}}(e.component),{locations:[]}),i.push(s),o=e.component),e.index=a,s.locations.push(e)}),i}function g(e){let t=e.direction,s=e.snippetIndex,n=e.snippets;const o=n.find(e=>e.index===s);if(!o)throw new Error("Snippet ".concat(s," not found"));return o.start=Math.max(0,o.start-("up"===t?c:0)),o.end+="down"===t?c:0,n.map(e=>e.index===s?o:(p([e.start,e.end],[o.start,o.end])&&(o.start=Math.min(e.start,o.start),o.end=Math.max(e.end,o.end),e.toDelete=!0),e))}function f(e,t){return e>=t[0].line&&e<=t[t.length-1].line}},786:function(e,t,s){"use strict";var n=s(481),o=s(2),i=s(349),a=s(598);const r=(e,t,s,n)=>{const o=void 0!==s&&void 0!==n;o&&e(n),t.then(t=>{if(!o){const s=Object(a.a)(t.issue,t.components,t.users,t.rules);e(s)}},()=>{o&&e(s)})};s(717);var l=s(309),c=s.n(l),p=s(340),u=s.n(p),h=s(5),m=s(310),d=s(345),g=s.n(d),f=s(329),b=s.n(f),v=s(363),y=s(352),E=s.n(y),x=s(322),k=s(350),O=s.n(k),C=s(479),S=s(434),N=s(22),j=s(332),w=s(793),P=s.n(w),L=s(314),I=s.n(L);class A extends o.PureComponent{constructor(){super(...arguments),this.handleSelect=e=>{e.preventDefault(),this.props.onSelect&&this.props.onSelect(this.props.item)},this.handleHover=()=>{this.props.onHover&&this.props.onHover(this.props.item)}}renderLink(){const e=this.props.children||this.props.item;return o.createElement("li",null,o.createElement("a",{className:c()({active:this.props.active===this.props.item},this.props.className),href:"#",onClick:this.handleSelect,onFocus:this.handleHover,onMouseOver:this.handleHover},e))}render(){return o.createElement(I.a,{overlay:this.props.title||void 0,placement:"right"},this.renderLink())}}class T extends o.PureComponent{constructor(e){super(e),this.attachShortcuts=()=>{this.previousKeyScope=n.getScope(),this.previousFilter=n.filter,this.currentKeyScope=P()("key-scope"),n.setScope(this.currentKeyScope),n.filter=e=>{const t=(e.target||e.srcElement).tagName,s="INPUT"===t||"SELECT"===t||"TEXTAREA"===t;return[13,38,40].includes(e.keyCode)||!s},n("down",this.currentKeyScope,()=>(this.setState(this.selectNextElement),!1)),n("up",this.currentKeyScope,()=>(this.setState(this.selectPreviousElement),!1)),n("return",this.currentKeyScope,()=>(null!=this.state.active&&this.handleSelect(this.state.active),!1))},this.detachShortcuts=()=>{this.previousKeyScope&&n.setScope(this.previousKeyScope),this.currentKeyScope&&n.deleteScope(this.currentKeyScope),n.filter=this.previousFilter},this.handleSelect=e=>{this.props.onSelect(e)},this.handleHover=e=>{this.setState({active:e})},this.selectNextElement=(e,t)=>{const s=t.items.indexOf(e.active);return s<0?{active:t.items[0]}:{active:t.items[(s+1)%t.items.length]}},this.selectPreviousElement=(e,t)=>{const s=t.items.indexOf(e.active);return s<=0?{active:t.items[t.items.length-1]}:{active:t.items[s-1]}},this.renderChild=e=>null==e?null:e.type!==A?e:o.cloneElement(e,{active:this.state.active,onHover:this.handleHover,onSelect:this.handleSelect}),this.state={active:e.currentItem}}componentDidMount(){this.attachShortcuts()}componentDidUpdate(e){e.currentItem===this.props.currentItem||this.props.items.includes(this.state.active)||this.setState({active:this.props.currentItem})}componentWillUnmount(){this.detachShortcuts()}render(){const e=this.props.children,t=o.Children.count(e)>0;return o.createElement("ul",{className:c()("menu",this.props.className)},t&&o.Children.map(e,this.renderChild),!t&&this.props.items.map(e=>o.createElement(A,{active:this.state.active,item:e,key:e,onHover:this.handleHover,onSelect:this.handleSelect})))}}var R=s(407);const D=10;var _=Object(R.a)(class extends o.PureComponent{constructor(e){super(e),this.searchMembers=e=>{Object(C.h)({organization:this.props.issue.projectOrganization,q:e,ps:D}).then(this.handleSearchResult,()=>{})},this.searchUsers=e=>{Object(S.f)({q:e,ps:D}).then(this.handleSearchResult,()=>{})},this.handleSearchResult=e=>{const t=e.users.filter(j.c);this.setState({users:t,currentUser:t.length>0?t[0].login:""})},this.handleSearchChange=e=>{0===e.length?this.setState({query:e,users:this.defaultUsersArray,currentUser:this.defaultUsersArray[0].login}):(this.setState({query:e}),Object(N.isSonarCloud)()?this.searchMembers(e):this.searchUsers(e))},this.defaultUsersArray=[{login:"",name:Object(h.translate)("unassigned")}],Object(j.b)(e.currentUser)&&(this.defaultUsersArray=[e.currentUser,...this.defaultUsersArray]),this.state={query:"",users:this.defaultUsersArray,currentUser:this.defaultUsersArray.length>0?this.defaultUsersArray[0].login:""}}render(){return o.createElement(x.DropdownOverlay,{noPadding:!0},o.createElement("div",{className:"multi-select"},o.createElement("div",{className:"menu-search"},o.createElement(O.a,{autoFocus:!0,className:"little-spacer-top",minLength:2,onChange:this.handleSearchChange,placeholder:Object(h.translate)("search.search_for_users"),value:this.state.query})),o.createElement(T,{currentItem:this.state.currentUser,items:E()(this.state.users,"login"),onSelect:this.props.onSelect},this.state.users.map(e=>o.createElement(A,{item:e.login,key:e.login},!!e.login&&o.createElement(v.a,{className:"spacer-right",hash:e.avatar,name:e.name,size:16}),o.createElement("span",{className:"text-middle",style:{marginLeft:e.login?24:void 0}},e.name))))))}});class M extends o.PureComponent{constructor(){super(...arguments),this.toggleAssign=e=>{this.props.togglePopup("assign",e)},this.handleClose=()=>{this.toggleAssign(!1)}}renderAssignee(){const e=this.props.issue,t=e.assigneeName||e.assignee;return t?o.createElement(o.Fragment,null,o.createElement("span",{className:"text-top"},o.createElement(v.a,{className:"little-spacer-right",hash:e.assigneeAvatar,name:e.assigneeName||e.assignee,size:16})),o.createElement("span",{className:"issue-meta-label"},!1===e.assigneeActive?Object(h.translateWithParameters)("user.x_deleted",t):t)):o.createElement("span",{className:"issue-meta-label"},Object(h.translate)("unassigned"))}render(){return this.props.canAssign?o.createElement("div",{className:"dropdown"},o.createElement(g.a,{closeOnEscape:!0,onRequestClose:this.handleClose,open:this.props.isOpen&&this.props.canAssign,overlay:o.createElement(_,{issue:this.props.issue,onSelect:this.props.onAssign})},o.createElement(m.ButtonLink,{className:"issue-action issue-action-with-options js-issue-assign",onClick:this.toggleAssign},this.renderAssignee(),o.createElement(b.a,{className:"little-spacer-left"})))):this.renderAssignee()}}var U=s(465);class F extends o.PureComponent{constructor(e){super(e),this.handleCommentChange=e=>{this.setState({textComment:e.target.value})},this.handleCommentClick=()=>{this.state.textComment.trim().length>0&&this.props.onComment(this.state.textComment)},this.handleCancelClick=()=>{this.props.toggleComment(!1)},this.handleKeyboard=e=>{13===e.keyCode&&(e.metaKey||e.ctrlKey)?this.handleCommentClick():[37,38,39,40].includes(e.keyCode)&&e.stopPropagation()},this.state={textComment:e.comment?e.comment.markdown:""}}render(){const e=this.props,t=e.comment,s=e.autoTriggered;return o.createElement(x.DropdownOverlay,{placement:this.props.placement},o.createElement("div",{className:"issue-comment-bubble-popup"},o.createElement("div",{className:"issue-comment-form-text"},o.createElement("textarea",{autoFocus:!0,onChange:this.handleCommentChange,onKeyDown:this.handleKeyboard,placeholder:this.props.placeholder,rows:2,value:this.state.textComment})),o.createElement("div",{className:"issue-comment-form-footer"},o.createElement("div",{className:"issue-comment-form-actions"},o.createElement(m.Button,{className:"js-issue-comment-submit little-spacer-right",disabled:this.state.textComment.trim().length<1,onClick:this.handleCommentClick},t&&Object(h.translate)("save"),!t&&Object(h.translate)("issue.comment.submit")),o.createElement(m.ResetButtonLink,{className:"js-issue-comment-cancel",onClick:this.handleCancelClick},s?Object(h.translate)("skip"):Object(h.translate)("cancel"))),o.createElement("div",{className:"issue-comment-form-tips"},o.createElement(U.a,null)))))}}class H extends o.PureComponent{constructor(){super(...arguments),this.addComment=e=>{r(this.props.onChange,Object(i.a)({issue:this.props.issueKey,text:e})),this.props.toggleComment(!1)},this.handleCommentClick=()=>{this.props.toggleComment()},this.handleClose=()=>{this.props.toggleComment(!1)}}render(){return o.createElement("li",{className:"issue-meta dropdown"},o.createElement(g.a,{closeOnClickOutside:!1,onRequestClose:this.handleClose,open:"comment"===this.props.currentPopup,overlay:o.createElement(F,{autoTriggered:this.props.commentAutoTriggered,onComment:this.addComment,placeholder:this.props.commentPlaceholder,toggleComment:this.props.toggleComment})},o.createElement(m.ButtonLink,{className:"issue-action js-issue-comment",onClick:this.handleCommentClick},o.createElement("span",{className:"issue-meta-label"},Object(h.translate)("issue.comment.formlink")))))}}var W=s(376),B=s(445),V=s.n(B);const z=["BLOCKER","CRITICAL","MAJOR","MINOR","INFO"];function q(e){let t=e.issue,s=e.onSelect;return o.createElement(x.DropdownOverlay,null,o.createElement(T,{currentItem:t.severity,items:z,onSelect:s},z.map(e=>o.createElement(A,{className:"display-flex-center",item:e,key:e},o.createElement(V.a,{className:"little-spacer-right",severity:e}),Object(h.translate)("severity",e)))))}class K extends o.PureComponent{constructor(){super(...arguments),this.toggleSetSeverity=e=>{this.props.togglePopup("set-severity",e)},this.setSeverity=e=>{this.props.setIssueProperty("severity","set-severity",i.m,e)},this.handleClose=()=>{this.toggleSetSeverity(!1)}}render(){const e=this.props.issue;return this.props.canSetSeverity?o.createElement("div",{className:"dropdown"},o.createElement(g.a,{onRequestClose:this.handleClose,open:this.props.isOpen&&this.props.canSetSeverity,overlay:o.createElement(q,{issue:e,onSelect:this.setSeverity})},o.createElement(m.ButtonLink,{className:"issue-action issue-action-with-options js-issue-set-severity",onClick:this.toggleSetSeverity},o.createElement(W.a,{className:"issue-meta-label",severity:e.severity}),o.createElement(b.a,{className:"little-spacer-left"})))):o.createElement(W.a,{className:"issue-meta-label",severity:e.severity})}}var G=s(442),Y=s(353),X=s.n(Y),J=s(385),Z=s.n(J),Q=s(362),$=s(513);const ee=10;class te extends o.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={searchResult:[]},this.onSearch=e=>Object(i.j)({q:e,ps:Math.min(this.props.selectedTags.length-1+ee,100),organization:this.props.organization}).then(e=>{this.mounted&&this.setState({searchResult:e})},()=>{}),this.onSelect=e=>{this.props.setTags([...this.props.selectedTags,e])},this.onUnselect=e=>{this.props.setTags(X()(this.props.selectedTags,e))}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const e=Z()(this.state.searchResult,this.props.selectedTags);return o.createElement(x.DropdownOverlay,{placement:Q.PopupPlacement.BottomRight},o.createElement($.a,{listSize:ee,onSearch:this.onSearch,onSelect:this.onSelect,onUnselect:this.onUnselect,selectedTags:this.props.selectedTags,tags:e}))}}function se(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class ne extends o.PureComponent{constructor(){super(...arguments),this.toggleSetTags=e=>{this.props.togglePopup("edit-tags",e)},this.setTags=e=>{const t=this.props.issue,s=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),n.forEach(function(t){se(e,t,s[t])})}return e}({},t,{tags:e});r(this.props.onChange,Object(i.n)({issue:t.key,tags:e.join(",")}),t,s)},this.handleClose=()=>{this.toggleSetTags(!1)}}render(){const e=this.props.issue,t=e.tags,s=void 0===t?[]:t;return this.props.canSetTags?o.createElement("div",{className:"dropdown"},o.createElement(g.a,{onRequestClose:this.handleClose,open:this.props.isOpen,overlay:o.createElement(te,{organization:e.projectOrganization,selectedTags:s,setTags:this.setTags})},o.createElement(m.ButtonLink,{className:"issue-action issue-action-with-options js-issue-edit-tags",onClick:this.toggleSetTags},o.createElement(G.a,{allowUpdate:this.props.canSetTags,tags:e.tags&&e.tags.length>0?e.tags:[Object(h.translate)("issue.no_tag")]})))):o.createElement(G.a,{allowUpdate:this.props.canSetTags,className:"note",tags:e.tags&&e.tags.length>0?e.tags:[Object(h.translate)("issue.no_tag")]})}}var oe=s(553);function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=[],n=!0,o=!1,i=void 0;try{for(var a,r=e[Symbol.iterator]();!(n=(a=r.next()).done)&&(s.push(a.value),!t||s.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==r.return||r.return()}finally{if(o)throw i}}return s}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ae(e){let t=e.fromHotspot,s=e.onSelect,n=e.transitions,i=e.type;const a=t&&"VULNERABILITY"===i;return o.createElement(x.DropdownOverlay,null,o.createElement(T,{currentItem:n[0],items:n,onSelect:s},n.map(e=>{const t=ie(function(e,t){return t&&Object(h.hasMessage)("vulnerability.transition",e)?[Object(h.translate)("vulnerability.transition",e),Object(h.translate)("vulnerability.transition",e,"description")]:[Object(h.translate)("issue.transition",e),Object(h.translate)("issue.transition",e,"description")]}(e,a),2),s=t[0],n=t[1];return o.createElement(A,{item:e,key:e,title:n},s)})))}class re extends o.PureComponent{constructor(){super(...arguments),this.setTransition=e=>{r(this.props.onChange,Object(i.o)({issue:this.props.issue.key,transition:e})),this.toggleSetTransition()},this.toggleSetTransition=e=>{this.props.togglePopup("transition",e)},this.handleClose=()=>{this.toggleSetTransition(!1)}}render(){const e=this.props.issue;return this.props.hasTransitions?o.createElement("div",{className:"dropdown"},o.createElement(g.a,{onRequestClose:this.handleClose,open:this.props.isOpen&&this.props.hasTransitions,overlay:o.createElement(ae,{fromHotspot:e.fromHotspot,onSelect:this.setTransition,transitions:e.transitions,type:e.type})},o.createElement(m.ButtonLink,{className:"issue-action issue-action-with-options js-issue-transition",onClick:this.toggleSetTransition},o.createElement(oe.a,{className:"issue-meta-label",resolution:e.resolution,status:e.status}),o.createElement(b.a,{className:"little-spacer-left"})))):o.createElement(oe.a,{className:"issue-meta-label",resolution:e.resolution,status:e.status})}}var le=s(366),ce=s.n(le),pe=s(331);const ue=["BUG","VULNERABILITY","CODE_SMELL"];function he(e){let t=e.issue,s=e.onSelect;return o.createElement(x.DropdownOverlay,null,o.createElement(T,{currentItem:t.type,items:ue,onSelect:s},ue.map(e=>o.createElement(A,{className:"display-flex-center",item:e,key:e},o.createElement(ce.a,{className:"little-spacer-right",query:e}),Object(h.translate)("issue.type",e)))))}class me extends o.PureComponent{constructor(){super(...arguments),this.toggleSetType=e=>{this.props.togglePopup("set-type",e)},this.setType=e=>{this.props.setIssueProperty("type","set-type",i.p,e)},this.handleClose=()=>{this.toggleSetType(!1)}}render(){const e=this.props.issue;return this.props.canSetType?o.createElement("div",{className:"dropdown"},o.createElement(g.a,{onRequestClose:this.handleClose,open:this.props.isOpen&&this.props.canSetType,overlay:o.createElement(he,{issue:e,onSelect:this.setType})},o.createElement(m.ButtonLink,{className:"issue-action issue-action-with-options js-issue-set-type",onClick:this.toggleSetType},o.createElement(ce.a,{className:"little-spacer-right",fill:pe.colors.baseFontColor,query:e.type}),Object(h.translate)("issue.type",e.type),o.createElement(b.a,{className:"little-spacer-left"})))):o.createElement("span",null,o.createElement(ce.a,{className:"little-spacer-right",query:e.type}),Object(h.translate)("issue.type",e.type))}}function de(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class ge extends o.PureComponent{constructor(){var e;super(...arguments),e=this,this.state={commentAutoTriggered:!1,commentPlaceholder:""},this.setIssueProperty=(e,t,s,n)=>{const o=this.props.issue;if(o[e]!==n){const t=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),n.forEach(function(t){de(e,t,s[t])})}return e}({},o,{[e]:n});r(this.props.onChange,s({issue:o.key,[e]:n}),o,t)}this.props.togglePopup(t,!1)},this.toggleComment=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.setState({commentPlaceholder:s,commentAutoTriggered:n}),e.props.togglePopup("comment",t)},this.handleTransition=e=>{this.props.onChange(e),("FALSE-POSITIVE"===e.resolution||"WONTFIX"===e.resolution&&"SECURITY_HOTSPOT"!==e.type)&&this.toggleComment(!0,Object(h.translate)("issue.comment.explain_why"),!0)}}render(){const e=this.props.issue,t=e.actions.includes("assign"),s=e.actions.includes("comment"),n=e.actions.includes("set_severity"),i=e.actions.includes("set_type"),a=e.actions.includes("set_tags"),r=e.transitions&&e.transitions.length>0,l="SECURITY_HOTSPOT"===e.type;return o.createElement("div",{className:"issue-actions"},o.createElement("ul",{className:"issue-meta-list"},o.createElement("li",{className:"issue-meta"},o.createElement(me,{canSetType:i,isOpen:"set-type"===this.props.currentPopup&&i,issue:e,setIssueProperty:this.setIssueProperty,togglePopup:this.props.togglePopup})),!l&&o.createElement("li",{className:"issue-meta"},o.createElement(K,{canSetSeverity:n,isOpen:"set-severity"===this.props.currentPopup&&n,issue:e,setIssueProperty:this.setIssueProperty,togglePopup:this.props.togglePopup})),o.createElement("li",{className:"issue-meta"},o.createElement(re,{hasTransitions:r,isOpen:"transition"===this.props.currentPopup&&r,issue:e,onChange:this.handleTransition,togglePopup:this.props.togglePopup})),o.createElement("li",{className:"issue-meta"},o.createElement(M,{canAssign:t,isOpen:"assign"===this.props.currentPopup&&t,issue:e,onAssign:this.props.onAssign,togglePopup:this.props.togglePopup})),!l&&e.effort&&o.createElement("li",{className:"issue-meta"},o.createElement("span",{className:"issue-meta-label"},Object(h.translateWithParameters)("issue.x_effort",e.effort))),s&&o.createElement(H,{commentAutoTriggered:this.state.commentAutoTriggered,commentPlaceholder:this.state.commentPlaceholder,currentPopup:this.props.currentPopup,issueKey:e.key,onChange:this.props.onChange,toggleComment:this.toggleComment})),o.createElement("ul",{className:"list-inline"},o.createElement("li",{className:"issue-meta js-issue-tags"},o.createElement(ne,{canSetTags:a,isOpen:"edit-tags"===this.props.currentPopup&&a,issue:e,onChange:this.props.onChange,togglePopup:this.props.togglePopup}))))}}var fe=s(655),be=s(359);function ve(e){let t=e.onDelete;return o.createElement(x.DropdownOverlay,{placement:Q.PopupPlacement.BottomRight},o.createElement("div",{className:"menu is-container"},o.createElement("div",{className:"spacer-bottom"},Object(h.translate)("issue.comment.delete_confirm_message")),o.createElement(m.Button,{className:"button-red",onClick:t},Object(h.translate)("delete"))))}class ye extends o.PureComponent{constructor(){super(...arguments),this.state={openPopup:""},this.handleEdit=e=>{this.props.onEdit(this.props.comment.key,e),this.toggleEditPopup(!1)},this.handleDelete=()=>{this.props.onDelete(this.props.comment.key),this.toggleDeletePopup(!1)},this.togglePopup=(e,t)=>{this.setState(s=>s.openPopup!==e&&!1!==t?{openPopup:e}:s.openPopup===e&&!0!==t?{openPopup:""}:s)},this.toggleDeletePopup=e=>{this.togglePopup("delete",e)},this.toggleEditPopup=e=>{this.togglePopup("edit",e)},this.closePopups=()=>{this.setState({openPopup:""})}}render(){const e=this.props.comment,t=e.authorName||e.author,s=!1===e.authorActive&&t?Object(h.translateWithParameters)("user.x_deleted",t):t;return o.createElement("div",{className:"issue-comment"},o.createElement("div",{className:"issue-comment-author",title:s},o.createElement(v.a,{className:"little-spacer-right",hash:e.authorAvatar,name:t,size:16}),s),o.createElement("div",{className:"issue-comment-text markdown",dangerouslySetInnerHTML:{__html:Object(fe.sanitize)(e.htmlText)}}),o.createElement("div",{className:"issue-comment-age"},o.createElement(be.a,{date:e.createdAt})),o.createElement("div",{className:"issue-comment-actions"},e.updatable&&o.createElement("div",{className:"dropdown"},o.createElement(g.a,{closeOnClickOutside:!1,onRequestClose:this.closePopups,open:"edit"===this.state.openPopup,overlay:o.createElement(F,{comment:e,onComment:this.handleEdit,placeholder:"",placement:Q.PopupPlacement.BottomRight,toggleComment:this.toggleEditPopup})},o.createElement(m.EditButton,{className:"js-issue-comment-edit button-small",onClick:this.toggleEditPopup}))),e.updatable&&o.createElement("div",{className:"dropdown"},o.createElement(g.a,{onRequestClose:this.closePopups,open:"delete"===this.state.openPopup,overlay:o.createElement(ve,{onDelete:this.handleDelete})},o.createElement(m.DeleteButton,{className:"js-issue-comment-delete button-small",onClick:this.toggleDeletePopup})))))}}var Ee=s(28),xe=s(503),ke=s.n(xe),Oe=s(317),Ce=s(328),Se=s(319),Ne=s(552),je=s(600),we=s(342),Pe=s(661);class Le extends o.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={changelog:[]}}componentDidMount(){this.mounted=!0,this.loadChangelog()}componentWillUnmount(){this.mounted=!1}loadChangelog(){Object(i.g)(this.props.issue.key).then(e=>{let t=e.changelog;this.mounted&&this.setState({changelog:t})},()=>{})}render(){const e=this.props.issue,t=e.author;return o.createElement(x.DropdownOverlay,{placement:Q.PopupPlacement.BottomRight},o.createElement("div",{className:"menu is-container issue-changelog"},o.createElement("table",{className:"spaced"},o.createElement("tbody",null,o.createElement("tr",null,o.createElement("td",{className:"thin text-left text-top nowrap"},o.createElement(we.a,{date:e.creationDate})),o.createElement("td",{className:"text-left text-top"},t?"".concat(Object(h.translate)("created_by")," ").concat(t):Object(h.translate)("created"))),this.state.changelog.map((e,t)=>{const s=e.userName||e.user;return o.createElement("tr",{key:t},o.createElement("td",{className:"thin text-left text-top nowrap"},o.createElement(we.a,{date:e.creationDate})),o.createElement("td",{className:"text-left text-top"},s&&o.createElement("p",null,o.createElement(v.a,{className:"little-spacer-right",hash:e.avatar,name:s,size:16}),e.isUserActive?s:Object(h.translateWithParameters)("user.x_deleted",s)),e.diffs.map(e=>o.createElement(Pe.a,{diff:e,key:e.key}))))})))))}}class Ie extends o.PureComponent{constructor(){super(...arguments),this.toggleChangelog=e=>{this.props.togglePopup("changelog",e)},this.handleClick=()=>{this.toggleChangelog()},this.handleClose=()=>{this.toggleChangelog(!1)}}render(){return o.createElement("div",{className:"dropdown"},o.createElement(g.a,{onRequestClose:this.handleClose,open:this.props.isOpen,overlay:o.createElement(Le,{issue:this.props.issue})},o.createElement(I.a,{mouseEnterDelay:.5,overlay:o.createElement(we.a,{date:this.props.creationDate})},o.createElement(m.ButtonLink,{className:"issue-action issue-action-with-options js-issue-show-changelog",onClick:this.handleClick},o.createElement("span",{className:"issue-meta-label"},o.createElement(be.a,{date:this.props.creationDate})),o.createElement(b.a,{className:"little-spacer-left"})))))}}function Ae(e){const t=e.engine,s=e.manualVulnerability,n=e.message,i=e.organization,a=e.ruleKey;return o.createElement("div",{className:"issue-message"},o.createElement("span",{className:"spacer-right"},n),o.createElement(m.ButtonLink,{"aria-label":Object(h.translate)("issue.why_this_issue.long"),className:"issue-see-rule spacer-right",onClick:()=>e.onOpenRule({key:a,organization:i})},Object(h.translate)("issue.why_this_issue")),t&&o.createElement(I.a,{overlay:Object(h.translateWithParameters)("issue.from_external_rule_engine",t)},o.createElement("div",{className:"badge spacer-right text-top"},t)),s&&o.createElement(I.a,{overlay:Object(h.translate)("issue.manual_vulnerability.description")},o.createElement("div",{className:"badge spacer-right text-top"},Object(h.translate)("issue.manual_vulnerability"))))}var Te=s(664),Re=s.n(Te),De=s(347),_e=s.n(De),Me=s(400),Ue=s.n(Me),Fe=s(389);class He extends o.PureComponent{constructor(){super(...arguments),this.handleSelect=e=>{this.props.onFilter(e,this.props.issue)}}render(){const e=this.props.issue,t=["type","severity","status","resolution","assignee","rule",...(e.tags||[]).map(e=>"tag###".concat(e)),"project",e.subProject?"module":void 0,"file"].filter(e=>e),s=e.assigneeName||e.assignee;return o.createElement(x.DropdownOverlay,{noPadding:!0},o.createElement("header",{className:"menu-search"},o.createElement("h6",null,Object(h.translate)("issue.filter_similar_issues"))),o.createElement(T,{className:"issues-similar-issues-menu",currentItem:t[0],items:t,onSelect:this.handleSelect},o.createElement(A,{className:"display-flex-center",item:"type"},o.createElement(ce.a,{className:"little-spacer-right",query:e.type}),Object(h.translate)("issue.type",e.type)),o.createElement(A,{item:"severity"},o.createElement(W.a,{className:"display-flex-center",severity:e.severity})),o.createElement(A,{item:"status"},o.createElement(oe.a,{className:"display-flex-center",resolution:void 0,status:e.status})),o.createElement(A,{item:"resolution"},null!=e.resolution?Object(h.translate)("issue.resolution",e.resolution):Object(h.translate)("unresolved")),o.createElement(A,{item:"assignee"},s?o.createElement("span",null,Object(h.translate)("assigned_to"),o.createElement(v.a,{className:"little-spacer-left little-spacer-right",hash:e.assigneeAvatar,name:s,size:16}),!1===e.assigneeActive?Object(h.translateWithParameters)("user.x_deleted",s):s):Object(h.translate)("unassigned")),o.createElement("li",{className:"divider"}),o.createElement(A,{item:"rule"},Object(Fe.limitComponentName)(e.ruleName)),null!=e.tags&&e.tags.map(e=>o.createElement(A,{item:"tag###".concat(e),key:"tag###".concat(e)},o.createElement(Ue.a,{className:"icon-half-transparent little-spacer-right text-middle"}),o.createElement("span",{className:"text-middle"},e))),o.createElement("li",{className:"divider"}),o.createElement(A,{item:"project"},o.createElement(_e.a,{className:"little-spacer-right",qualifier:"TRK"}),e.projectName),null!=e.subProject&&o.createElement(A,{item:"module"},o.createElement(_e.a,{className:"little-spacer-right",qualifier:"BRC"}),e.subProjectName),o.createElement(A,{item:"file"},o.createElement(_e.a,{className:"little-spacer-right",qualifier:e.componentQualifier}),Object(Fe.fileFromPath)(e.componentLongName))))}}class We extends o.PureComponent{constructor(){super(...arguments),this.handleFilter=(e,t)=>{this.togglePopup(!1),this.props.onFilter&&this.props.onFilter(e,t)},this.togglePopup=e=>{this.props.togglePopup("similarIssues",e)},this.handleClose=()=>{this.togglePopup(!1)}}render(){return o.createElement("div",{className:"dropdown"},o.createElement(g.a,{onRequestClose:this.handleClose,open:this.props.isOpen,overlay:o.createElement(He,{issue:this.props.issue,onFilter:this.handleFilter})},o.createElement(m.ButtonLink,{"aria-label":Object(h.translate)("issue.filter_similar_issues"),className:"issue-action issue-action-with-options js-issue-filter",onClick:this.togglePopup,title:Object(h.translate)("issue.filter_similar_issues")},o.createElement(Re.a,{className:"icon-half-transparent"}),o.createElement(b.a,{className:"icon-half-transparent"}))))}}function Be(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Ve(e){const t=e.issue,s=null!=e.onFilter,n=t.secondaryLocations.length+t.flows.reduce((e,t)=>e+t.length,0),i=o.createElement(I.a,{overlay:Object(h.translateWithParameters)("issue.this_issue_involves_x_code_locations",Object(Oe.formatMeasure)(n,"INT"))},o.createElement(Ne.a,null,n)),a=e.displayLocationsCount&&n>0,r=Object(Se.h)(t.project,function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),n.forEach(function(t){Be(e,t,s[t])})}return e}({},Object(Ce.d)(e.branchLike),{issues:t.key,open:t.key,types:"SECURITY_HOTSPOT"===t.type?t.type:void 0}));return o.createElement("div",{className:"issue-row"},o.createElement(je.a.Consumer,null,e=>{let s=e.openRule;return o.createElement(Ae,{engine:t.externalRuleEngine,manualVulnerability:t.fromHotspot&&"VULNERABILITY"===t.type,message:t.message,onOpenRule:s,organization:t.organization,ruleKey:t.rule})}),o.createElement("div",{className:"issue-row-meta"},o.createElement("ul",{className:"issue-meta-list"},o.createElement("li",{className:"issue-meta"},o.createElement(Ie,{creationDate:t.creationDate,isOpen:"changelog"===e.currentPopup,issue:t,togglePopup:e.togglePopup})),null!=t.textRange&&o.createElement("li",{className:"issue-meta"},o.createElement("span",{className:"issue-meta-label",title:Object(h.translate)("line_number")},"L",t.textRange.endLine)),a&&o.createElement("li",{className:"issue-meta"},e.displayLocationsLink?o.createElement(Ee.Link,{target:"_blank",to:r},i):i),o.createElement("li",{className:"issue-meta"},o.createElement(Ee.Link,{className:"js-issue-permalink link-no-underline",target:"_blank",title:Object(h.translate)("permalink"),to:r},o.createElement(ke.a,null))),s&&o.createElement("li",{className:"issue-meta"},o.createElement(We,{isOpen:"similarIssues"===e.currentPopup,issue:t,onFilter:e.onFilter,togglePopup:e.togglePopup})))))}class ze extends o.PureComponent{constructor(){super(...arguments),this.handleCheck=()=>{this.props.onCheck&&this.props.onCheck(this.props.issue.key)},this.handleClick=e=>{!function e(t){if(!t)return!1;const s=(t.tagName||"").toUpperCase();return["A","BUTTON","INPUT","TEXTAREA"].includes(s)||e(t.parentElement)}(e.target)&&this.props.onClick&&(e.preventDefault(),this.props.onClick(this.props.issue.key))},this.editComment=(e,t)=>{r(this.props.onChange,Object(i.d)({comment:e,text:t}))},this.deleteComment=e=>{r(this.props.onChange,Object(i.c)({comment:e}))}}render(){const e=this.props.issue,t=null!=this.props.onCheck,s=c()("issue",{hotspot:"SECURITY_HOTSPOT"===e.type,"issue-with-checkbox":t,selected:this.props.selected});return o.createElement("div",{className:s,"data-issue":e.key,onClick:this.handleClick,role:"listitem",tabIndex:0},o.createElement(Ve,{branchLike:this.props.branchLike,currentPopup:this.props.currentPopup,displayLocationsCount:this.props.displayLocationsCount,displayLocationsLink:this.props.displayLocationsLink,issue:e,onFilter:this.props.onFilter,togglePopup:this.props.togglePopup}),o.createElement(ge,{currentPopup:this.props.currentPopup,issue:e,onAssign:this.props.onAssign,onChange:this.props.onChange,togglePopup:this.props.togglePopup}),e.comments&&e.comments.length>0&&o.createElement("div",{className:"issue-comments"},e.comments.map(e=>o.createElement(ye,{comment:e,key:e.key,onDelete:this.deleteComment,onEdit:this.editComment}))),t&&o.createElement(o.Fragment,null,o.createElement(u.a,{checked:this.props.checked||!1,className:"issue-checkbox-container",onCheck:this.handleCheck})))}}s.d(t,"a",function(){return qe});class qe extends o.PureComponent{constructor(){super(...arguments),this.togglePopup=(e,t)=>{this.props.onPopupToggle(this.props.issue.key,e,t)},this.handleAssignement=e=>{const t=this.props.issue;t.assignee!==e&&r(this.props.onChange,Object(i.l)({issue:t.key,assignee:e})),this.togglePopup("assign",!1)}}componentDidMount(){this.props.selected&&this.bindShortcuts()}componentWillUpdate(e){!e.selected&&this.props.selected&&this.unbindShortcuts()}componentDidUpdate(e){!e.selected&&this.props.selected&&this.bindShortcuts()}componentWillUnmount(){this.props.selected&&this.unbindShortcuts()}bindShortcuts(){n("f","issues",()=>(this.togglePopup("transition"),!1)),n("a","issues",()=>(this.togglePopup("assign"),!1)),n("m","issues",()=>(this.props.issue.actions.includes("assign")&&this.handleAssignement("_me"),!1)),n("i","issues",()=>(this.togglePopup("set-severity"),!1)),n("c","issues",()=>(this.togglePopup("comment"),!1)),n("t","issues",()=>(this.togglePopup("edit-tags"),!1)),n("space","issues",()=>{if(this.props.onCheck)return this.props.onCheck(this.props.issue.key),!1})}unbindShortcuts(){n.unbind("f","issues"),n.unbind("a","issues"),n.unbind("m","issues"),n.unbind("i","issues"),n.unbind("c","issues"),n.unbind("space","issues"),n.unbind("t","issues")}render(){return o.createElement(ze,{branchLike:this.props.branchLike,checked:this.props.checked,currentPopup:this.props.openPopup,displayLocationsCount:this.props.displayLocationsCount,displayLocationsLink:this.props.displayLocationsLink,issue:this.props.issue,onAssign:this.handleAssignement,onChange:this.props.onChange,onCheck:this.props.onCheck,onClick:this.props.onClick,onFilter:this.props.onFilter,selected:this.props.selected,togglePopup:this.togglePopup})}}qe.defaultProps={selected:!1}},805:function(e,t,s){"use strict";s.d(t,"a",function(){return O});var n=s(309),o=s(2),i=s(28),a=s(310),r=s(375),l=s(711),c=s.n(l),p=s(347),u=s.n(p),h=s(315),m=s.n(h),d=s(5),g=s(389),f=s(335),b=s(328),v=s(319),y=s(379),E=s(530);s(868);function x(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),n.forEach(function(t){k(e,t,s[t])})}return e}function k(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function O(e){let t=e.branchLike,s=e.expandable,l=e.linkToProject,p=void 0===l||l,h=e.loading,k=e.onExpand,O=e.sourceViewerFile;const C=O.key,S=O.measures,N=O.path,j=O.project,w=O.projectName,P=O.q,L=O.subProject,I=O.subProjectName,A=o.createElement(o.Fragment,null,o.createElement(u.a,{qualifier:y.a.Project})," ",o.createElement("span",null,w));return o.createElement("div",{className:"source-viewer-header-slim display-flex-row display-flex-space-between"},o.createElement("div",{className:"display-flex-center flex-1"},o.createElement("div",null,p?o.createElement("a",{className:"link-with-icon",href:Object(f.getPathUrlAsString)(Object(v.b)(j,t))},A):A),void 0!==L&&o.createElement(o.Fragment,null,o.createElement(u.a,{qualifier:y.a.SubProject})," ",o.createElement("span",null,I)),o.createElement("div",{className:"spacer-left"},o.createElement(u.a,{qualifier:P})," ",o.createElement("span",null,Object(g.collapsedDirFromPath)(N)),o.createElement("span",{className:"component-name-file"},Object(g.fileFromPath)(N))),o.createElement("div",{className:"spacer-left"},o.createElement(r.ClipboardIconButton,{className:"button-link link-no-underline",copyValue:N})),O.canMarkAsFavorite&&(!t||Object(b.g)(t))&&o.createElement("div",{className:"nudged-up spacer-left"},o.createElement(E.a,{className:"component-name-favorite",component:C,favorite:O.fav||!1,qualifier:O.q}))),void 0!==S.issues&&o.createElement("div",{className:n("flex-0 big-spacer-left",{"little-spacer-right":!s||h})},o.createElement(i.Link,{to:Object(v.h)(j,x({},Object(b.d)(t),{fileUuids:O.uuid,resolved:"false"}))},Object(d.translate)("source_viewer.view_all_issues"))),s&&o.createElement(m.a,{className:"little-spacer-right",loading:h},o.createElement("div",{className:"flex-0 big-spacer-left"},o.createElement(a.ButtonIcon,{className:"js-actions",onClick:k},o.createElement(c.a,null)))))}},806:function(e,t,s){"use strict";s.d(t,"a",function(){return i}),s.d(t,"b",function(){return a}),s.d(t,"c",function(){return r});var n=s(665),o=s.n(n);function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const s=o()(e,t);return s.length?s:void 0}function a(e,t){return null!=e&&t.some(t=>t.index===e.index)?e:void 0}function r(e,t){return void 0!==e&&t.find(t=>t.key===e)?e:void 0}},837:function(e,t,s){"use strict";var n=s(871),o=s.n(n),i=s(309),a=s(2),r=(s(872),s(552)),l=s(714),c=s(710),p=s(786);function u(e){const t=e.issuePopup;return a.createElement("div",{className:"issue-list"},e.issues.map(s=>a.createElement(p.a,{branchLike:e.branchLike,displayLocationsCount:e.displayIssueLocationsCount,displayLocationsLink:e.displayIssueLocationsLink,issue:s,key:s.key,onChange:e.onIssueChange,onClick:e.onIssueClick,onPopupToggle:e.onIssuePopupToggle,openPopup:t&&t.issue===s.key?t.name:void 0,selected:e.selectedIssue===s.key})))}class h extends a.PureComponent{constructor(e){super(e),this.handleSymbolClick=e=>{e.preventDefault();const t=e.currentTarget.className.match(/sym-\d+/g);t&&t.length>0&&this.props.onSymbolClick(t)},this.state={tokens:Object(c.c)(e.line.code||"")}}componentDidMount(){this.attachEvents(),this.props.highlightedLocationMessage&&this.activeMarkerNode&&this.props.scroll&&this.props.scroll(this.activeMarkerNode)}componentWillReceiveProps(e){e.line.code!==this.props.line.code&&this.setState({tokens:Object(c.c)(e.line.code||"")})}componentWillUpdate(){this.detachEvents()}componentDidUpdate(e){this.attachEvents(),this.props.highlightedLocationMessage&&(!e.highlightedLocationMessage||e.highlightedLocationMessage.index!==this.props.highlightedLocationMessage.index)&&this.activeMarkerNode&&this.props.scroll&&this.props.scroll(this.activeMarkerNode)}componentWillUnmount(){this.detachEvents()}attachEvents(){if(this.codeNode&&(this.symbols=this.codeNode.querySelectorAll(".sym"),this.symbols))for(let e=0;e<this.symbols.length;e++){this.symbols[e].addEventListener("click",this.handleSymbolClick)}}detachEvents(){if(this.symbols)for(let e=0;e<this.symbols.length;e++){this.symbols[e].addEventListener("click",this.handleSymbolClick)}}renderMarker(e,t,s,n){const o=this.props.onLocationSelect,i=o?()=>o(e):void 0,c=s?e=>this.activeMarkerNode=e:void 0;return a.createElement(r.a,{key:"marker-".concat(e),leading:n,onClick:i,selected:s},a.createElement("span",{ref:c},e+1),t&&a.createElement(l.a,{selected:!0},t))}render(){const e=this.props,t=e.highlightedLocationMessage,s=e.highlightedSymbols,n=e.issues,o=e.issueLocations,r=e.line,l=e.onIssueSelect,p=e.padding,h=e.secondaryIssueLocations,m=e.selectedIssue,d=e.showIssues;let g=[...this.state.tokens];if(s&&s.forEach(e=>{g=Object(c.b)(g,e)}),o.length>0&&(g=Object(c.a)(g,o)),h&&(g=Object(c.a)(g,h,"issue-location"),t)){const e=h.find(e=>e.index===t.index);e&&(g=Object(c.a)(g,[e],"selected"))}const f=i("source-line-code","code",{"has-issues":n.length>0}),b=[];let v=!1;g.forEach((e,s)=>{this.props.displayLocationMarkers&&e.markers.length>0&&e.markers.forEach(e=>{const s=void 0!==t&&t.index===e,n=h.find(t=>t.index===e),o=n&&n.text;b.push(this.renderMarker(e,o,s,v))}),b.push(a.createElement("span",{className:e.className,key:s},e.text)),v=(0===s||v)&&!e.text.trim().length});const y=p?{paddingBottom:"".concat(p,"px")}:void 0,E=n.filter(e=>e.key===m);return a.createElement("td",{className:f,"data-line-number":r.line,style:y},a.createElement("div",{className:"source-line-code-inner"},a.createElement("pre",{ref:e=>this.codeNode=e},b)),d&&n.length>0&&a.createElement(u,{branchLike:this.props.branchLike,displayIssueLocationsCount:this.props.displayIssueLocationsCount,displayIssueLocationsLink:this.props.displayIssueLocationsLink,issuePopup:this.props.issuePopup,issues:n,onIssueChange:this.props.onIssueChange,onIssueClick:l,onIssuePopupToggle:this.props.onIssuePopupToggle,selectedIssue:m}),m&&!d&&a.createElement(u,{branchLike:this.props.branchLike,issuePopup:this.props.issuePopup,issues:E,onIssueChange:this.props.onIssueChange,onIssueClick:l,onIssuePopupToggle:this.props.onIssuePopupToggle,selectedIssue:m}))}}var m=s(314),d=s.n(m),g=s(5);function f(e){let t=e.line;const s="source-meta source-line-coverage"+(null!=t.coverageStatus?" source-line-".concat(t.coverageStatus):"");return a.createElement("td",{className:s,"data-line-number":t.line},a.createElement(d.a,{overlay:b(t),placement:"right"},a.createElement("div",{className:"source-line-bar"})))}function b(e){return"uncovered"===e.coverageStatus?e.conditions?Object(g.translateWithParameters)("source_viewer.tooltip.uncovered.conditions",e.conditions):Object(g.translate)("source_viewer.tooltip.uncovered"):"covered"===e.coverageStatus?e.conditions?Object(g.translateWithParameters)("source_viewer.tooltip.covered.conditions",e.conditions):Object(g.translate)("source_viewer.tooltip.covered"):"partially-covered"===e.coverageStatus?e.conditions?Object(g.translateWithParameters)("source_viewer.tooltip.partially-covered.conditions",e.coveredConditions||0,e.conditions):Object(g.translate)("source_viewer.tooltip.partially-covered"):void 0}var v=s(345),y=s.n(v);class E extends a.PureComponent{constructor(){super(...arguments),this.handleClick=e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.blur(),this.props.onPopupToggle({index:this.props.index,line:this.props.line.line,name:"duplications"})},this.handleTogglePopup=e=>{this.props.onPopupToggle({index:this.props.index,line:this.props.line.line,name:"duplications",open:e})},this.closePopup=()=>{this.handleTogglePopup(!1)}}render(){const e=this.props,t=e.duplicated,s=e.index,n=e.line,o=e.popupOpen,r=i("source-meta","source-line-duplications-extra",{"source-line-duplicated":t});return t?a.createElement("td",{className:r,"data-index":s,"data-line-number":n.line},a.createElement(y.a,{onRequestClose:this.closePopup,open:o,overlay:this.props.renderDuplicationPopup(s,n.line)},a.createElement(d.a,{overlay:o?void 0:Object(g.translate)("source_viewer.tooltip.duplicated_block"),placement:"right"},a.createElement("div",{className:"source-line-bar",onClick:this.handleClick,role:"button",tabIndex:0})))):a.createElement("td",{className:r,"data-index":s,"data-line-number":n.line},a.createElement("div",{className:"source-line-bar"}))}}class x extends a.PureComponent{constructor(){super(...arguments),this.handleClick=e=>{e.preventDefault(),this.props.onClick(this.props.line)}}render(){const e=this.props.line,t=i("source-meta","source-line-duplications",{"source-line-duplicated":e.duplicated}),s=a.createElement("td",{className:t,onClick:e.duplicated?this.handleClick:void 0,role:e.duplicated?"button":void 0,tabIndex:e.duplicated?0:void 0},a.createElement("div",{className:"source-line-bar"}));return e.duplicated?a.createElement(d.a,{overlay:Object(g.translate)("source_viewer.tooltip.duplicated_line"),placement:"right"},s):s}}var k=s(517),O=s.n(k),C=s(598);class S extends a.PureComponent{constructor(){super(...arguments),this.handleClick=e=>{e.preventDefault(),this.props.onClick()}}render(){const e=this.props,t=e.issues,s=e.line,n=t.length>0,o=i("source-meta","source-line-issues",{"source-line-with-issues":n}),r=n?Object(C.b)(t)[0]:null;return a.createElement("td",{className:o,"data-line-number":s.line,onClick:n?this.handleClick:void 0,role:n?"button":void 0,tabIndex:n?0:void 0},null!=r&&a.createElement(O.a,{type:r.type}),t.length>1&&a.createElement("span",{className:"source-line-issues-counter"},t.length))}}var N=s(28),j=s(322),w=s(362),P=s(319),L=s(663);function I(e){let t=e.line;return a.createElement(L.a.Consumer,null,e=>{let s=e.branchLike,n=e.file;return a.createElement(j.DropdownOverlay,{placement:w.PopupPlacement.RightTop},a.createElement("div",{className:"source-viewer-bubble-popup nowrap"},a.createElement(N.Link,{className:"js-get-permalink",onClick:e=>{e.stopPropagation()},rel:"noopener noreferrer",target:"_blank",to:Object(P.d)(n.project,s,n.key,t.line)},Object(g.translate)("component_viewer.get_permalink"))))})}class A extends a.PureComponent{constructor(){super(...arguments),this.handleClick=e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.blur(),this.props.onPopupToggle({line:this.props.line.line,name:"line-number"})},this.handleTogglePopup=e=>{this.props.onPopupToggle({line:this.props.line.line,name:"line-number",open:e})},this.closePopup=()=>{this.handleTogglePopup(!1)}}render(){const e=this.props,t=e.line,s=e.popupOpen,n=t.line;return!!n?a.createElement("td",{className:"source-meta source-line-number","data-line-number":n,onClick:this.handleClick,role:"button",tabIndex:0},a.createElement(y.a,{onRequestClose:this.closePopup,open:s,overlay:a.createElement(I,{line:t})})):a.createElement("td",{className:"source-meta source-line-number"})}}var T=s(343);function R(e){let t=e.line;const s=""!==t.scmAuthor;return a.createElement(j.DropdownOverlay,{placement:w.PopupPlacement.RightTop},a.createElement("div",{className:"source-viewer-bubble-popup abs-width-400"},s&&a.createElement("div",null,t.scmAuthor),t.scmDate&&a.createElement("div",{className:i({"spacer-top":s})},a.createElement(T.a,{date:t.scmDate})),t.scmRevision&&a.createElement("div",{className:"spacer-top"},t.scmRevision)))}class D extends a.PureComponent{constructor(){super(...arguments),this.handleClick=e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.blur(),this.props.onPopupToggle({line:this.props.line.line,name:"scm"})},this.handleTogglePopup=e=>{this.props.onPopupToggle({line:this.props.line.line,name:"scm",open:e})},this.closePopup=()=>{this.handleTogglePopup(!1)}}render(){const e=this.props,t=e.line,s=e.popupOpen,n=e.previousLine,o=!!t.line,i=function(e,t){let s=!0;null!=t&&null!=e.scmRevision&&null!=t.scmRevision&&(s=e.scmRevision!==t.scmRevision||e.scmDate!==t.scmDate);return s}(t,n)&&a.createElement("div",{className:"source-line-scm-inner","data-author":t.scmAuthor||"…"});return o?a.createElement("td",{className:"source-meta source-line-scm","data-line-number":t.line,onClick:this.handleClick,role:"button",tabIndex:0},a.createElement(y.a,{onRequestClose:this.closePopup,open:s,overlay:a.createElement(R,{line:t})},i)):a.createElement("td",{className:"source-meta source-line-scm","data-line-number":t.line},i)}}s.d(t,"a",function(){return M});const _=18;class M extends a.PureComponent{constructor(){super(...arguments),this.isPopupOpen=(e,t)=>{const s=this.props,n=s.line,o=s.linePopup;return void 0!==o&&o.index===t&&o.line===n.line&&o.name===e},this.handleIssuesIndicatorClick=()=>{if(this.props.openIssues)this.props.onIssuesClose(this.props.line),this.props.onIssueUnselect();else{this.props.onIssuesOpen(this.props.line);const e=this.props.issues;e.length>0&&this.props.onIssueSelect(e[0].key)}}}render(){const e=this.props,t=e.displayCoverage,s=e.displaySCM,n=void 0===s||s,r=e.duplications,l=e.duplicationsCount,c=e.issuePopup,p=e.line,u=i("source-line",{"source-line-highlighted":this.props.highlighted,"source-line-filtered":p.isNew,"source-line-filtered-dark":t&&("uncovered"===p.coverageStatus||"partially-covered"===p.coverageStatus),"source-line-last":!0===this.props.last}),m=this.props.verticalBuffer?this.props.verticalBuffer*_:void 0;return a.createElement("tr",{className:u,"data-line-number":p.line},a.createElement(A,{line:p,onPopupToggle:this.props.onLinePopupToggle,popupOpen:this.isPopupOpen("line-number")}),n&&a.createElement(D,{line:p,onPopupToggle:this.props.onLinePopupToggle,popupOpen:this.isPopupOpen("scm"),previousLine:this.props.previousLine}),this.props.displayIssues&&!this.props.displayAllIssues?a.createElement(S,{issues:this.props.issues,line:p,onClick:this.handleIssuesIndicatorClick}):a.createElement("td",{className:"source-meta source-line-issues"}),this.props.displayDuplications&&a.createElement(x,{line:p,onClick:this.props.loadDuplications}),o()(l,e=>a.createElement(E,{duplicated:r.includes(e),index:e,key:e,line:this.props.line,onPopupToggle:this.props.onLinePopupToggle,popupOpen:this.isPopupOpen("duplications",e),renderDuplicationPopup:this.props.renderDuplicationPopup})),this.props.displayCoverage&&a.createElement(f,{line:p}),a.createElement(h,{branchLike:this.props.branchLike,displayIssueLocationsCount:this.props.displayIssueLocationsCount,displayIssueLocationsLink:this.props.displayIssueLocationsLink,displayLocationMarkers:this.props.displayLocationMarkers,highlightedLocationMessage:this.props.highlightedLocationMessage,highlightedSymbols:this.props.highlightedSymbols,issueLocations:this.props.issueLocations,issuePopup:c,issues:this.props.issues,line:p,onIssueChange:this.props.onIssueChange,onIssuePopupToggle:this.props.onIssuePopupToggle,onIssueSelect:this.props.onIssueSelect,onLocationSelect:this.props.onLocationSelect,onSymbolClick:this.props.onSymbolClick,padding:m,scroll:this.props.scroll,secondaryIssueLocations:this.props.secondaryIssueLocations,selectedIssue:this.props.selectedIssue,showIssues:this.props.openIssues||this.props.displayAllIssues}))}}},868:function(e,t,s){var n=s(869);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};s(312)(n,o);n.locals&&(e.exports=n.locals)},869:function(e,t,s){(e.exports=s(311)(!1)).push([e.i,".source-viewer-header-slim{padding:4px 10px;border-bottom:1px solid #cdcdcd;background-color:#f3f3f3;align-items:center;min-height:25px}",""])},870:function(e,t,s){"use strict";s.d(t,"a",function(){return f});var n=s(309),o=s.n(n),i=s(2),a=s(711),r=s.n(a),l=s(5),c=s(426),p=s(837),u=s(607),h=s(662),m=s(806),d=(s(875),s(721));const g=32;class f extends i.PureComponent{constructor(e){super(e),this.doScroll=e=>{this.props.scroll&&this.props.scroll(e);const t=this.snippetNodeRef.current;t&&Object(c.scrollHorizontally)(e,{leftOffset:g,rightOffset:t.getBoundingClientRect().width-g,parent:t})},this.scrollToLastExpandedRow=()=>{if(this.props.scroll){const e=this.snippetNodeRef.current;if(!e)return;const t=e.querySelectorAll("tr"),s=t[t.length-1];this.props.scroll(s,100)}},this.expandBlock=e=>()=>this.props.expandBlock(this.props.index,e).then(()=>{"down"===e&&this.scrollToLastExpandedRow()}),this.snippetNodeRef=i.createRef()}renderLine(e){let t=e.displayDuplications,s=e.displaySCM,n=e.index,o=e.issuesForLine,a=e.issueLocations,r=e.line,l=e.snippet,c=e.symbols,u=e.verticalBuffer;const d=Object(h.b)(r,this.props.locations),g=this.props,f=g.duplications,b=g.duplicationsByLine,v=f?f.length:0,y=v&&b&&b[r.line]||[],E=o.some(e=>e.key===this.props.issue.key);return i.createElement(p.a,{branchLike:this.props.branchLike,displayAllIssues:!1,displayCoverage:!0,displayDuplications:t,displayIssues:!E||o.length>1,displayLocationMarkers:!0,displaySCM:s,duplications:y,duplicationsCount:v,highlighted:!1,highlightedLocationMessage:Object(m.b)(this.props.highlightedLocationMessage,d),highlightedSymbols:Object(m.a)(c,this.props.highlightedSymbols),issueLocations:a,issuePopup:this.props.issuePopup,issues:o,key:r.line,last:!1,line:r,linePopup:this.props.linePopup,loadDuplications:this.props.loadDuplications,onIssueChange:this.props.onIssueChange,onIssuePopupToggle:this.props.onIssuePopupToggle,onIssueSelect:()=>{},onIssueUnselect:()=>{},onIssuesClose:this.props.handleCloseIssues,onIssuesOpen:this.props.handleOpenIssues,onLinePopupToggle:this.props.handleLinePopupToggle,onLocationSelect:this.props.onLocationSelect,onSymbolClick:this.props.handleSymbolClick,openIssues:this.props.openIssuesByLine[r.line],previousLine:n>0?l[n-1]:void 0,renderDuplicationPopup:this.props.renderDuplicationPopup,scroll:this.doScroll,secondaryIssueLocations:d,selectedIssue:Object(m.c)(this.props.issue.key,o),verticalBuffer:u})}render(){const e=this.props,t=e.component,s=e.displaySCM,n=e.issue,a=e.issuesByLine,c=void 0===a?{}:a,p=e.last,h=e.locationsByLine,m=e.openIssuesByLine,g=e.snippet,f=t.measures&&t.measures.lines&&parseInt(t.measures.lines,10),b=Object(u.e)(g),v=g[g.length-1].line,y=n.textRange?n.textRange.endLine:n.line,E=Math.max(...Object.keys(c).map(e=>parseInt(e,10)).filter(e=>Object(d.g)(e,g)&&(e===y||m[e]))),x=p?Math.max(0,d.b-(v-E)):0,k=g.some(e=>!!e.duplicated);return i.createElement("div",{className:"source-viewer-code snippet",ref:this.snippetNodeRef},i.createElement("div",null,g[0].line>1&&i.createElement("div",{className:"expand-block expand-block-above"},i.createElement("button",{"aria-label":Object(l.translate)("source_viewer.expand_above"),onClick:this.expandBlock("up"),type:"button"},i.createElement(r.a,null))),i.createElement("table",{className:o()("source-table",{"expand-up":g[0].line>1,"expand-down":!f||g[g.length-1].line<f})},i.createElement("tbody",null,g.map((e,t)=>this.renderLine({displayDuplications:k,displaySCM:s,index:t,issuesForLine:c[e.line]||[],issueLocations:h[e.line]||[],line:e,snippet:g,symbols:b[e.line],verticalBuffer:t===g.length-1?x:0})))),(!f||g[g.length-1].line<f)&&i.createElement("div",{className:"expand-block expand-block-below"},i.createElement("button",{"aria-label":Object(l.translate)("source_viewer.expand_below"),onClick:this.expandBlock("down"),type:"button"},i.createElement(r.a,null)))))}}},872:function(e,t,s){var n=s(873);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};s(312)(n,o);n.locals&&(e.exports=n.locals)},873:function(e,t,s){(e.exports=s(311)(!1)).push([e.i,'.source-line:hover .source-line-coverage,.source-line:hover .source-line-duplications,.source-line:hover .source-line-duplications-extra,.source-line:hover .source-line-issues,.source-line:hover .source-line-number,.source-line:hover .source-line-scm{border-color:#e9e9e9;background-color:#e9e9e9}.source-line:hover .source-line-code{background-color:#f5f5f5}.source-line-highlighted .source-line-coverage,.source-line-highlighted .source-line-duplications,.source-line-highlighted .source-line-duplications-extra,.source-line-highlighted .source-line-issues,.source-line-highlighted .source-line-number,.source-line-highlighted .source-line-scm,.source-line-highlighted:hover .source-line-coverage,.source-line-highlighted:hover .source-line-duplications,.source-line-highlighted:hover .source-line-duplications-extra,.source-line-highlighted:hover .source-line-issues,.source-line-highlighted:hover .source-line-number,.source-line-highlighted:hover .source-line-scm{border-color:#c4dfec!important;background-color:#c4dfec}.source-line-highlighted .source-line-code,.source-line-highlighted:hover .source-line-code{background-color:#d9edf7}.source-line-filtered .source-line-code{background-color:#fbf3d5!important}.source-line-filtered.source-line-highlighted .source-line-code,.source-line-filtered.source-line-highlighted:hover .source-line-code{background-color:#cdd9c4!important}.source-line-filtered.source-line-filtered-dark .source-line-code{background-color:#f9ebb7!important}.source-line-filtered.source-line-filtered-dark:hover .source-line-code,.source-line-filtered:hover .source-line-code{background-color:#f1e8cb!important}.source-line-last .source-line-code{padding-bottom:160px}.source-viewer pre{height:18px;padding:0}.source-line-number,.source-line-scm,.source-viewer pre{line-height:18px;font-family:Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px}.source-line-code{position:relative;padding:0 10px}.source-line-code pre{float:left}.source-line-code .issue-list{margin-left:-10px;margin-right:-10px}.source-line-code-inner{min-height:18px}.source-line-code-inner:after,.source-line-code-inner:before{display:table;content:"";line-height:0}.source-line-code-inner:after{clear:both}.source-line-code-issue{display:inline-block;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAGCAYAAAAPDoR2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1M0M2Rjk4M0M3QUYxMUUzODkzRUREMUM5OTNDMjY4QSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1M0M2Rjk4NEM3QUYxMUUzODkzRUREMUM5OTNDMjY4QSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjUzQzZGOTgxQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjUzQzZGOTgyQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+bcqJtQAAAEhJREFUeNpi+G+swwDGDAwgbAWlwZiJAQFCgfgwEIfDRaC67ID4NRDnQ2kQnwFZwgFqnANMAQOUYY9sF0wBiCGH5CBkrAgQYACuWi4sSGW8yAAAAABJRU5ErkJggg==);background-repeat:repeat-x;background-size:4px;background-position:bottom}.source-meta{position:relative;vertical-align:top;width:1px;background-clip:padding-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.source-meta:focus{outline:none}.source-meta[role=button]{cursor:pointer}.source-line-number{min-width:18px;padding:0 10px;background-color:#f3f3f3;color:#777;text-align:right}.source-line-number:before{content:attr(data-line-number)}.source-line-issues{position:relative;padding:0 2px;background-color:#f3f3f3;white-space:nowrap}.source-line-with-issues svg{padding-right:2px;vertical-align:middle}.source-line-issues-counter{position:absolute;left:17px;line-height:8px;font-size:8px;z-index:900}.source-line-coverage,.source-line-duplications,.source-line-duplications-extra{background-color:#f3f3f3}.source-duplications-expanded .source-line-duplications,.source-line-duplications-extra{display:none}.source-duplications-expanded .source-line-duplications-extra{display:table-cell}.source-line-scm{padding:0 5px;background-color:#f3f3f3}.source-line-scm-inner{max-width:40px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.source-line-scm-inner:before{content:attr(data-author)}.source-line-bar{width:5px;height:18px}.source-line-bar[role=button]{cursor:pointer}.source-line-bar:focus{outline:none}.source-line-covered{background-color:#b4dd78!important}.source-line-partially-covered,.source-line-uncovered{background-color:#a4030f!important}.source-line-partially-covered{background-image:repeating-linear-gradient(45deg,hsla(0,0%,100%,.5) 4px,transparent 0,transparent 8px,hsla(0,0%,100%,.5) 0,hsla(0,0%,100%,.5) 12px,transparent 0,transparent 16px,hsla(0,0%,100%,.5) 0,hsla(0,0%,100%,.5) 20px)!important}.source-line-duplicated{background-color:#797979!important}',""])},875:function(e,t,s){var n=s(876);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};s(312)(n,o);n.locals&&(e.exports=n.locals)},876:function(e,t,s){(e.exports=s(311)(!1)).push([e.i,'.snippet{margin:8px;border:1px solid #cdcdcd;overflow-x:auto;overflow-y:hidden;transition:max-height .2s}.snippet>div{display:table;width:100%;position:relative;transition:margin-top .2s}.snippet table{width:100%}.expand-block{position:absolute;z-index:2;width:100%}.expand-block>button{background:transparent;box-sizing:border-box;color:#777;height:20px;width:100%;padding:2px;border:0;text-align:left;cursor:pointer}.expand-block>button:active,.expand-block>button:focus,.expand-block>button:hover{color:#236a97;outline:none}.expand-block-above{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAAXNSR0IArs4c6QAAADdJREFUCB1dzMEKADAIAlBd1v9/bcc2YgRjHh8qq2qTxCQzsX4wM6y30RARF3sy0Es1SIK7Y64OpCES1W69JS4AAAAASUVORK5CYII=");top:0}.expand-block-below{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wQQBjQEQVd5jwAAADhJREFUCNddyTEKADEMA8GVA/7/Z+PGwUp1cGTaYe/tv5lxrLWoKj6SiMzkjZDEG7JtANt0N+ccLrB/KZxXTt7fAAAAAElFTkSuQmCC");bottom:0}.source-table.expand-up{margin-top:20px}.source-table.expand-down{margin-bottom:20px}',""])}}]);
//# sourceMappingURL=281.m.16b02d82.chunk.js.map