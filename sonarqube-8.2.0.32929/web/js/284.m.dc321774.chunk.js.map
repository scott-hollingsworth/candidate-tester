{"version":3,"sources":["webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsTagsPopup.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsMeta.tsx","webpack:///./src/main/js/apps/coding-rules/components/RemoveExtendedDescriptionModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsDescription.tsx","webpack:///./src/main/js/apps/coding-rules/components/ActivationFormModal.tsx","webpack:///../sonar-docs/src/tooltips/rules/rules-quality-profiles.md","webpack:///../sonar-docs/src/tooltips/rules/rule-templates.md","webpack:///../sonar-docs/src/tooltips/rules/custom-rule-removal.md","webpack:///./src/main/js/apps/coding-rules/components/BulkChangeModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/BulkChange.tsx","webpack:///./src/main/js/apps/coding-rules/components/Facet.tsx","webpack:///./src/main/js/apps/coding-rules/components/ActivationSeverityFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/AvailableSinceFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/DefaultSeverityFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/InheritanceFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/LanguageFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/ProfileFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/RepositoryFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/StatusFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/TagFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/TemplateFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/TypeFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/FacetsList.tsx","webpack:///./src/main/js/apps/coding-rules/components/PageActions.tsx","webpack:///./src/main/js/apps/coding-rules/components/CustomRuleFormModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/CustomRuleButton.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsCustomRules.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsIssues.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsParameters.tsx","webpack:///./src/main/js/apps/coding-rules/components/ActivationButton.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleInheritanceIcon.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsProfiles.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetails.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleListItem.tsx","webpack:///./src/main/js/apps/coding-rules/components/App.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./src/main/js/components/intl/DateFormatter.tsx","webpack:///./src/main/js/components/docs/DocTooltip.tsx","webpack:///./src/main/js/app/components/a11y/A11ySkipTarget.tsx","webpack:///./src/main/js/api/quality-profiles.ts","webpack:///./src/main/js/helpers/markdown.js","webpack:///./src/main/js/components/shared/SeverityHelper.tsx","webpack:///./src/main/js/api/rules.ts","webpack:///./src/main/js/components/hoc/withAppState.tsx","webpack:///./src/main/js/components/tags/TagsList.css?aed4","webpack:///./src/main/js/components/facet/FacetBox.tsx","webpack:///./src/main/js/components/tags/TagsList.tsx","webpack:///./src/main/js/components/common/ScreenPositionHelper.tsx","webpack:///./src/main/js/components/facet/FacetHeader.tsx","webpack:///./src/main/js/components/facet/FacetItem.tsx","webpack:///./src/main/js/components/common/MultiSelectOption.tsx","webpack:///./src/main/js/components/common/MultiSelect.tsx","webpack:///./src/main/js/components/common/MarkdownTips.tsx","webpack:///./src/main/js/components/facet/FacetItemsList.tsx","webpack:///./src/main/js/components/tags/TagsList.css","webpack:///./src/main/js/components/facet/ListStyleFacetFooter.tsx","webpack:///./src/main/js/components/facet/ListStyleFacet.tsx","webpack:///./src/main/js/helpers/organizations.ts","webpack:///./src/main/js/components/tags/TagsSelector.tsx","webpack:///./src/main/js/components/controls/DateInput.tsx","webpack:///./src/main/js/components/controls/DayPicker.css?dc71","webpack:///./src/main/js/components/controls/DayPicker.css","webpack:///./src/main/js/components/controls/styles.css?00e9","webpack:///./src/main/js/components/controls/styles.css","webpack:///./src/main/js/components/search-navigator.css?cb81","webpack:///./src/main/js/components/search-navigator.css","webpack:///./src/main/js/components/facet/MultipleSelectionHint.tsx","webpack:///./src/main/js/helpers/security-standard.ts","webpack:///./src/main/js/apps/quality-profiles/components/BuiltInQualityProfileBadge.tsx","webpack:///../sonar-docs/src/tooltips/quality-profiles/built-in-quality-profile.md","webpack:///./src/main/js/apps/coding-rules/components/SimilarRulesFilter.tsx","webpack:///./src/main/js/components/common/FiltersHeader.tsx","webpack:///./src/main/js/apps/coding-rules/styles.css?1250","webpack:///./src/main/js/apps/coding-rules/styles.css","webpack:///./src/main/js/apps/issues/sidebar/StandardFacet.tsx","webpack:///./src/main/js/components/facet/MultipleSelectionHint.css?a58b","webpack:///./src/main/js/components/facet/MultipleSelectionHint.css","webpack:///./src/main/js/components/common/PageCounter.tsx","webpack:///./src/main/js/components/shared/TypeHelper.tsx","webpack:///../sonar-docs/src/tooltips/rules/custom-rules.md"],"names":["LIST_SIZE","RuleDetailsTagsPopup_RuleDetailsTagsPopup","index_js_exposed","[object Object]","this","mounted","state","searchResult","onSearch","query","Object","rules","q","ps","Math","min","props","tags","length","organization","then","setState","without_default","sysTags","onSelect","tag","setTags","uniq_default","onUnselect","availableTags","difference_default","TagsSelector","listSize","selectedTags","__webpack_require__","d","__webpack_exports__","RuleDetailsMeta_RuleDetailsMeta","EXTERNAL_RULE_REPO_PREFIX","renderType","ruleDetails","Tooltip_default","a","overlay","l10n","type","className","data-meta","IssueTypeIcon_default","renderSeverity","SeverityHelper","severity","renderStatus","status","renderTags","_this$props","canWrite","_ruleDetails$sysTags","_ruleDetails$tags","allTags","Dropdown_default","closeOnClick","closeOnClickOutside","onTagsChange","overlayPlacement","popups","BottomLeft","buttons","TagsList","allowUpdate","renderCreationDate","DateFormatter","date","createdAt","renderRepository","_this$props2","referencedRepositories","repository","repo","name","langName","renderTemplate","isTemplate","renderParentTemplate","templateKey","es","to","urls","DocTooltip","doc","Promise","resolve","bind","renderRemediation","debtRemFnType","undefined","debtRemFnOffset","concat","debtRemFnCoeff","effortToFixDescription","renderScope","scope","RuleScopeIcon_default","renderExternalBadge","engine","replace","RegExp","displayedKey","key","startsWith","substr","hasTypeData","isExternal","renderKey","title","LinkIcon_default","hideSimilarRulesFilter","SimilarRulesFilter","onFilterChange","rule","RemoveExtendedDescriptionModal","_ref","onCancel","onSubmit","header","SimpleModal_default","onClose","_ref2","onCloseClick","onFormSubmit","submitting","disabled","onClick","RuleDetailsDescription_RuleDetailsDescription","description","descriptionForm","removeDescriptionModal","handleDescriptionChange","event","currentTarget","value","handleCancelClick","handleSaveClick","updateDescription","handleRemoveDescriptionClick","handleCancelRemoving","handleConfirmRemoving","text","markdown_note","onChange","handleExtendDescriptionClick","mdNote","renderDescription","id","htmlNote","dangerouslySetInnerHTML","__html","renderForm","colSpan","autoFocus","rows","MarkdownTips","hasDescription","htmlDesc","ActivationFormModal","react__WEBPACK_IMPORTED_MODULE_1__","_this","super","getParams","arguments","activation","params","param","defaultValue","getQualityProfilesWithDepth","profiles","_quality_profiles_utils__WEBPACK_IMPORTED_MODULE_10__","filter","profile","isBuiltIn","actions","edit","language","lang","map","_objectSpread","depth","handleFormSubmit","preventDefault","data","_api_quality_profiles__WEBPACK_IMPORTED_MODULE_7__","onDone","handleParameterChange","_event$currentTarget","handleProfileChange","_ref3","handleSeverityChange","_ref4","renderSeverityOption","_ref5","_components_shared_SeverityHelper__WEBPACK_IMPORTED_MODULE_8__","profilesWithDepth","_this$state","_rule$params","isCustomRule","activeInAllProfiles","isUpdateMode","sonar_ui_common_components_controls_Modal__WEBPACK_IMPORTED_MODULE_3___default","contentLabel","modalHeader","onRequestClose","size","classnames__WEBPACK_IMPORTED_MODULE_0__","modal-container","sonar_ui_common_components_ui_Alert__WEBPACK_IMPORTED_MODULE_5__","variant","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_6__","sonar_ui_common_components_controls_Select__WEBPACK_IMPORTED_MODULE_4___default","clearable","options","label","repeat","optionRenderer","_helpers_constants__WEBPACK_IMPORTED_MODULE_9__","searchable","valueRenderer","placeholder","sonar_ui_common_components_controls_buttons__WEBPACK_IMPORTED_MODULE_2__","r","BulkChangeModal_BulkChangeModal","handleProfileSelect","selectedProfiles","option","getAvailableQualityProfiles","referencedProfiles","values","languages","includes","processResponse","response","result","failed","succeeded","results","sendRequests","looper","coding_rules_query","method","action","quality_profiles","targetKey","finished","renderResult","profileKey","Alert","renderProfileSelect","languageName","Select_default","multi","availableProfiles","push","total","measures","Modal_default","htmlFor","BulkChange_BulkChange","modal","getSelectedProfile","closeModal","handleActivateClick","blur","handleActivateInProfileClick","handleDeactivateClick","handleDeactivateInProfileClick","some","Boolean","canChangeProfile","allowActivateOnProfile","allowDeactivateOnProfile","href","Facet_Facet","handleItemClick","itemValue","multiple","newValue","singleSelection","orderBy_default","property","handleHeaderClick","onToggle","handleClear","getStat","stats","renderItem","active","stat","_this$props$renderNam","renderName","defaultRenderName","_this$props$renderTex","renderTextName","FacetItem","halfWidth","tooltip","_this$props2$renderTe","items","sortBy_default","keys","toLowerCase","FacetBox","classnames","search-navigator-facet-box-forbidden","FacetHeader","disabledHelper","onClear","open","children","FacetItemsList","renderFooter","ActivationSeverityFacet_ActivationSeverityFacet","assign","constants","components_AvailableSinceFacet","index_es","availableSince","handlePeriodChange","getValues","intl","formatDate","DateInput","DefaultSeverityFacet_DefaultSeverityFacet","InheritanceFacet_InheritanceFacet","_objectWithoutProperties","components_LanguageFacet","installedLanguages","rootReducer","getLanguageName","languageKey","find","l","handleSearch","getAllPossibleOptions","paging","pageIndex","pageSize","_this$props$stats","uniqBy_default","renderSearchResult","term","search","ListStyleFacet","facetHeader","fetching","getFacetItemText","getSearchResultKey","getSearchResultText","minSearchLength","renderFacetItem","searchPlaceholder","ProfileFacet_ProfileFacet","selected","compareToProfile","activationSeverities","inheritance","handleActiveClick","stopPropagation","handleInactiveClick","getTextValue","getTooltip","base","renderActivation","isCompare","aria-checked","facet-toggle-active","role","tabIndex","components_RepositoryFacet","referencedLanguages","repositoryKey","facetProps","RepositoryFacet_objectWithoutProperties","StatusFacet_StatusFacet","TagFacet_TagFacet","api_rules","handleSelect","getTagName","renderTag","TagsIcon_default","fill","theme","gray60","TemplateFacet_TemplateFacet","handleChange","changes","template","Array","isArray","TemplateFacet_objectSpread","TemplateFacet_objectWithoutProperties","String","TypeFacet_TypeFacet","FacetsList","languageDisabled","hideProfileFacet","inheritanceDisabled","selectedProfile","isInherited","activationSeverityDisabled","onFacetToggle","openFacets","facets","types","repositories","severities","statuses","StandardFacet","cwe","cweOpen","cweStats","fetchingCwe","fetchingOwaspTop10","fetchingSansTop25","fetchingSonarSourceSecurity","standards","owaspTop10","owaspTop10Open","owaspTop10Stats","sansTop25","sansTop25Open","sansTop25Stats","sonarsourceSecurity","sonarsourceSecurityOpen","sonarsourceSecurityStats","organizationsEnabled","PageActions","Shortcuts","DeferredSpinner_default","loading","ReloadButton_default","onReload","PageCounter","current","selectedIndex","CustomRuleFormModal_CustomRuleFormModal","prepareRequest","customRule","templateRule","csv","join","ruleData","markdown_description","CustomRuleFormModal_objectSpread","custom_key","prevent_reactivation","reactivating","template_key","newRuleDetails","handleNameChange","keyModifiedByUser","strings","handleKeyChange","handleTypeChange","handleStatusChange","renderNameField","required","renderKeyField","renderDescriptionField","renderTypeOption","TypeHelper","renderTypeField","renderSeverityField","renderStatusField","renderParameterField","mdDesc","_templateRule$params","submit","CustomRuleButton_CustomRuleButton","handleClick","handleModalClose","handleDone","RuleDetailsCustomRules_RuleDetailsCustomRules","fetchRules","f","handleRuleCreate","_ref2$rules","handleRuleDelete","ruleKey","_ref3$rules","renderRule","data-rule","react_router_es","canChange","ConfirmButton_default","confirmButtonText","confirmData","isDestructive","modalBody","onConfirm","prevProps","_this$state$rules","components_RuleDetailsIssues","withAppState","fetchIssues","issues","resolved","facet","_response$components","components","projects","item","project","component","val","count","renderTotal","path","totalItem","appState","branchesEnabled","renderProject","_this$props3","_this$state$projects","RuleDetailsParameters_RuleDetailsParameters","renderParameter","ActivationButton_ActivationButton","handleButtonClick","handleCloseModal","buttonText","RuleInheritanceIcon","other","RuleInheritanceIcon_objectWithoutProperties","red","baseFontColor","height","version","viewBox","width","xmlSpace","xmlnsXlink","style","fillRule","RuleDetailsProfiles_RuleDetailsProfiles","handleActivate","onActivate","handleDeactivate","onDeactivate","handleRevert","reset","renderInheritedProfile","parentName","profilePath","inherit","parentActivation","originalParam","p","originalValue","renderParameters","renderActions","canEdit","hasParent","parentKey","_this$props$activatio","activations","qProfile","x","data-profile","BuiltInQualityProfileBadge","_this$props2$activati","canActivate","InstanceMessage","message","filter_default","RuleDetails_RuleDetails","fetchRuleDetails","actives","handleRuleChange","handleTagsChange","oldTags","RuleDetails_objectSpread","catch","handleDelete","onDelete","allowCustomRules","hideQualityProfiles","_ruleDetails$params","isCustom","isEditable","RuleDetailsMeta","RuleDetailsDescription","RuleListItem_RuleListItem","handleNameClick","isLeftClickEvent","button","metaKey","altKey","ctrlKey","shiftKey","onOpen","SeverityIcon_default","isLoggedIn","canCopy","copy","renderDeactivateButton","overlayTranslationKey","PAGE_SIZE","LIMIT_BEFORE_LOAD_MORE","App_App","attachShortcuts","keymaster","selectPreviousRule","selectNextRule","openSelectedRule","handleBack","detachShortcuts","getOpenRule","location","getFacetsToFetch","getFieldsToFetch","fields","getSearchParameters","App_objectSpread","s","stopLoading","fetchInitialData","all","fetchQualityProfiles","_slicedToArray","_ref2$","keyBy_default","fetchFirstRules","makeFetchRequest","rawActives","rawFacets","_ref11","entries","_ref12","_ref13","parseActives","rawFacet","rawValue","parseFacets","openRule","usingPermalink","fetchMoreRules","nextPage","fetchFacet","_ref6","currentUser","userOrganizations","organizations","getSelectedIndex","_ref7","index","findIndex","getRulePath","pathname","router","closeRule","scrollToSelectedRule","smooth","element","document","querySelector","scrolling","topOffset","bottomOffset","getRuleActivation","_this$state2","_this$state3","closeFacet","handleRuleOpen","handleReset","handleFilterChange","_ref8","utils","handleFacetToggle","willOpenProperty","newState","handleReload","pickRuleAround","handleRuleActivate","_state$actives","handleRuleDeactivate","newRule","searchQuery","isFiltered","renderBulkButton","_this$state4","users","system","pages","nextProps","_ref9","prevState","_this$state5","Suggestions","suggestions","index_module","defer","content","ScreenPositionHelper","_ref10","top","A11ySkipTarget","anchor","weight","FiltersHeader","displayReset","onReset","SearchBox_default","minLength","BackIcon_default","ListFooter_default","loadMore","ready","react__WEBPACK_IMPORTED_MODULE_0__","_SuggestionsContext__WEBPACK_IMPORTED_MODULE_1__","Consumer","addSuggestions","removeSuggestions","SuggestionsInner","longFormatterOption","react_intl__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_helpers_dates__WEBPACK_IMPORTED_MODULE_2__","formatterOption","year","month","day","long","sonar_ui_common_components_controls_HelpTooltip__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_controls_HelpTooltip__WEBPACK_IMPORTED_MODULE_1___default","n","sonar_ui_common_components_lazyLoad__WEBPACK_IMPORTED_MODULE_2__","_helpers_markdown__WEBPACK_IMPORTED_MODULE_3__","DocMarkdownBlock","e","close","default","addEventListener","removeEventListener","childProps","overlayProps","isTooltip","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_1__","_A11yContext__WEBPACK_IMPORTED_MODULE_2__","addA11ySkipLink","removeA11ySkipLink","A11ySkipTargetInner","getLink","_this$props$label","searchQualityProfiles","parameters","sonar_ui_common_helpers_request__WEBPACK_IMPORTED_MODULE_2__","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_3__","getQualityProfile","compareToSonarWay","createQualityProfile","restoreQualityProfile","getProfileProjects","getProfileInheritance","qualityProfile","setDefaultProfile","renameProfile","copyProfile","fromKey","toName","deleteProfile","changeProfileParent","parentProfile","parentQualityProfile","getQualityProfileBackupUrl","queryParams","encodeURIComponent","getQualityProfileExporterUrl","exporterKey","getImporters","importers","getExporters","exporters","getProfileChangelog","since","page","compareProfiles","leftKey","rightKey","associateProject","_ref14","dissociateProject","_ref15","searchUsers","searchGroups","addUser","removeUser","addGroup","removeGroup","bulkActivateRules","bulkDeactivateRules","activateRule","lodash_map__WEBPACK_IMPORTED_MODULE_0___default","sonar_ui_common_helpers_csv__WEBPACK_IMPORTED_MODULE_1__","deactivateRule","getFrontMatterPosition","lines","firstLine","lastLine","i","trim","parseFrontMatter","tokens","split","cutConditionalContent","beginning","ending","newContent","start","indexOf","end","substring","console","error","Error","module","exports","getFrontMatter","position","slice","separateFrontMatter","frontmatter","filterContent","regexBase","_require","isSonarCloud","getInstance","contentWithoutStatic","sonar_ui_common_components_icons_SeverityIcon__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_icons_SeverityIcon__WEBPACK_IMPORTED_MODULE_1___default","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_2__","getRulesApp","searchRules","takeFacet","getRuleDetails","getRuleTags","createRule","deleteRule","updateRule","sonar_ui_common_helpers_request__WEBPACK_IMPORTED_MODULE_0__","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_1__","reject","react_redux__WEBPACK_IMPORTED_MODULE_1__","_store_rootReducer__WEBPACK_IMPORTED_MODULE_2__","_utils__WEBPACK_IMPORTED_MODULE_3__","WrappedComponent","Wrapper","displayName","hmr","transform","insertInto","locals","data-property","sonar_ui_common_components_icons_DropdownIcon__WEBPACK_IMPORTED_MODULE_2__","sonar_ui_common_components_icons_DropdownIcon__WEBPACK_IMPORTED_MODULE_2___default","sonar_ui_common_components_icons_TagsIcon__WEBPACK_IMPORTED_MODULE_3__","sonar_ui_common_components_icons_TagsIcon__WEBPACK_IMPORTED_MODULE_3___default","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_4__","_ref$allowUpdate","aria-label","aria-hidden","getPosition","containerPos","container","getBoundingClientRect","window","pageYOffset","left","pageXOffset","debouncedOnResize","lodash_debounce__WEBPACK_IMPORTED_MODULE_0___default","forceUpdate","ref","sonar_ui_common_components_controls_buttons__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_controls_HelpTooltip__WEBPACK_IMPORTED_MODULE_2__","sonar_ui_common_components_controls_HelpTooltip__WEBPACK_IMPORTED_MODULE_2___default","sonar_ui_common_components_icons_OpenCloseIcon__WEBPACK_IMPORTED_MODULE_3__","sonar_ui_common_components_icons_OpenCloseIcon__WEBPACK_IMPORTED_MODULE_3___default","sonar_ui_common_components_ui_DeferredSpinner__WEBPACK_IMPORTED_MODULE_4__","sonar_ui_common_components_ui_DeferredSpinner__WEBPACK_IMPORTED_MODULE_4___default","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_5__","helper","showClearButton","renderHelper","renderValueIndicator","search-navigator-facet-half","data-facet","renderValue","defaultProps","MultiSelectOption","custom","onHover","renderLabel","onFocus","onMouseOver","Checkbox_default","checked","onCheck","onSelectChange","MultiSelect_MultiSelect","handleSelectChange","onSelectItem","onUnselectItem","handleSearchChange","onSearchQuery","validateSearchInput","handleElementHover","activeIdx","getAllElements","handleKeyboard","evt","keyCode","selectNextElement","selectPreviousElement","toggleSelect","isNewElement","elem","selectedElements","elements","updateSelectedElements","filterSelected","updateUnselectedElements","unselectedElements","setElementActive","idx","allElements","totalElements","searchInput","focus","_this$props$allowSele","allowSelection","_this$props$allowNewE","allowNewElements","_this$props$footerNod","footerNode","activeElement","showNewElement","infiniteList","listClasses","menu-vertically-limited","spacer-top","with-top-separator","with-bottom-separator","div","_helpers_urls__WEBPACK_IMPORTED_MODULE_3__","ListStyleFacetFooter_ListStyleFacetFooter","handleShowMoreClick","showMore","handleShowLessClick","showLess","hasMore","allShown","ListStyleFacet_ListStyleFacet","searching","searchResultsCounts","showFullList","onItemClick","stopSearching","loadCountsForSearchResults","maxResults","searchMaxResults","searchResults","searchPaging","searchMore","_this$props$loadSearc","loadSearchResultCount","resultsToLoad","hideFullList","helpers_query","maxInitialItems","sortedItems","getSortedItems","limitedList","selectedBelowLimit","mightHaveMoreResults","maxItems","formatFacetStat","loadingResults","showList","renderSearch","renderList","renderSearchResults","MultipleSelectionHint","isPaidOrganization","hasPrivateAccess","isCurrentUserMemberOf","_users__WEBPACK_IMPORTED_MODULE_0__","subscription","admin","org","_common_MultiSelect__WEBPACK_IMPORTED_MODULE_2__","validateTag","DayPicker","sonar_ui_common_components_lazyLoad__WEBPACK_IMPORTED_MODULE_14__","t","react__WEBPACK_IMPORTED_MODULE_6__","input","openCalendar","handleResetClick","closeCalendar","currentMonth","Date","lastHovered","handleDayClick","modifiers","handleDayMouseEnter","handleCurrentMonthChange","date_fns_set_month__WEBPACK_IMPORTED_MODULE_3__","handleCurrentYearChange","date_fns_set_year__WEBPACK_IMPORTED_MODULE_4__","handlePreviousMonthClick","date_fns_sub_months__WEBPACK_IMPORTED_MODULE_5__","handleNextMonthClick","date_fns_add_months__WEBPACK_IMPORTED_MODULE_2__","highlightFrom","highlightTo","minDate","after","maxDate","months","lodash_range__WEBPACK_IMPORTED_MODULE_0___default","years","getFullYear","selectedDays","lastHoveredOrValue","highlighted","from","weekdaysLong","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_15__","weekdaysShort","sonar_ui_common_components_controls_OutsideClickHandler__WEBPACK_IMPORTED_MODULE_9___default","onClickOutside","classnames__WEBPACK_IMPORTED_MODULE_1__","InputWrapper","inputClassName","is-filled","innerRef","node","readOnly","sonar_ui_common_components_icons_CalendarIcon__WEBPACK_IMPORTED_MODULE_11___default","sonar_ui_common_components_controls_buttons__WEBPACK_IMPORTED_MODULE_8__","iconProps","sonar_ui_common_components_icons_ChevronLeftIcon__WEBPACK_IMPORTED_MODULE_12___default","sonar_ui_common_components_controls_Select__WEBPACK_IMPORTED_MODULE_10___default","getMonth","sonar_ui_common_components_icons_ChevronRightIcon__WEBPACK_IMPORTED_MODULE_13___default","captionElement","NullComponent","disabledDays","before","firstDayOfWeek","navbarElement","onDayClick","onDayMouseEnter","react_intl__WEBPACK_IMPORTED_MODULE_7__","formattedValue","navigator","userAgent","getStandards","renderCWECategory","category","record","renderOwaspTop10Category","withPrefix","addPrefix","toUpperCase","renderSansTop25Category","renderSonarSourceSecurityCategory","prefix","_components_docs_DocTooltip__WEBPACK_IMPORTED_MODULE_3__","_ref$tooltip","badge","sonar_ui_common_components_controls_Dropdown__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_controls_Dropdown__WEBPACK_IMPORTED_MODULE_1___default","sonar_ui_common_components_icons_FilterIcon__WEBPACK_IMPORTED_MODULE_3__","sonar_ui_common_components_icons_FilterIcon__WEBPACK_IMPORTED_MODULE_3___default","sonar_ui_common_components_icons_IssueTypeIcon__WEBPACK_IMPORTED_MODULE_4__","sonar_ui_common_components_icons_IssueTypeIcon__WEBPACK_IMPORTED_MODULE_4___default","sonar_ui_common_components_icons_TagsIcon__WEBPACK_IMPORTED_MODULE_5__","sonar_ui_common_components_icons_TagsIcon__WEBPACK_IMPORTED_MODULE_5___default","_components_shared_SeverityHelper__WEBPACK_IMPORTED_MODULE_7__","handleLanguageClick","handleTypeClick","handleSeverityClick","handleTagClick","dataset","_rule$tags","_rule$sysTags","data-test","data-tag","react__WEBPACK_IMPORTED_MODULE_3__","_utils__WEBPACK_IMPORTED_MODULE_13__","cweQuery","loadStandards","_helpers_security_standard__WEBPACK_IMPORTED_MODULE_12__","handleOwaspTop10HeaderClick","handleSansTop25HeaderClick","handleSonarSourceSecurityHeaderClick","prop","lodash_sortBy__WEBPACK_IMPORTED_MODULE_1___default","lodash_without__WEBPACK_IMPORTED_MODULE_0___default","handleOwaspTop10ItemClick","handleSansTop25ItemClick","handleSonarSourceSecurityItemClick","handleCWESearch","loadCWESearchResultCount","categories","statsProp","valuesProp","renderFacetItemsList","renderTooltip","_components_facet_FacetItemsList__WEBPACK_IMPORTED_MODULE_9__","_components_facet_FacetItem__WEBPACK_IMPORTED_MODULE_8__","renderHint","_components_facet_MultipleSelectionHint__WEBPACK_IMPORTED_MODULE_11__","_components_facet_FacetBox__WEBPACK_IMPORTED_MODULE_6__","_components_facet_FacetHeader__WEBPACK_IMPORTED_MODULE_7__","renderSonarSourceSecurityList","renderSonarSourceSecurityHint","renderOwaspTop10List","renderOwaspTop10Hint","renderSansTop25List","renderSansTop25Hint","_components_facet_ListStyleFacet__WEBPACK_IMPORTED_MODULE_10__","lodash_omit__WEBPACK_IMPORTED_MODULE_2___default","sonar_ui_common_helpers_search__WEBPACK_IMPORTED_MODULE_5__","renderSubFacets","sonar_ui_common_helpers_measures__WEBPACK_IMPORTED_MODULE_2__","sonar_ui_common_components_icons_IssueTypeIcon__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_icons_IssueTypeIcon__WEBPACK_IMPORTED_MODULE_1___default"],"mappings":"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","file":"js/284.m.dc321774.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { difference, uniq, without } from 'lodash';\nimport * as React from 'react';\nimport { getRuleTags } from '../../../api/rules';\nimport TagsSelector from '../../../components/tags/TagsSelector';\n\nexport interface Props {\n  organization: string | undefined;\n  setTags: (tags: string[]) => void;\n  sysTags: string[];\n  tags: string[];\n}\n\ninterface State {\n  searchResult: string[];\n}\n\nconst LIST_SIZE = 10;\n\nexport default class RuleDetailsTagsPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { searchResult: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onSearch = (query: string) => {\n    return getRuleTags({\n      q: query,\n      ps: Math.min(this.props.tags.length + LIST_SIZE, 100),\n      organization: this.props.organization\n    }).then(\n      tags => {\n        if (this.mounted) {\n          // systems tags can not be unset, don't display them in the results\n          this.setState({ searchResult: without(tags, ...this.props.sysTags) });\n        }\n      },\n      () => {}\n    );\n  };\n\n  onSelect = (tag: string) => {\n    this.props.setTags(uniq([...this.props.tags, tag]));\n  };\n\n  onUnselect = (tag: string) => {\n    this.props.setTags(without(this.props.tags, tag));\n  };\n\n  render() {\n    const availableTags = difference(this.state.searchResult, this.props.tags);\n    return (\n      <TagsSelector\n        listSize={LIST_SIZE}\n        onSearch={this.onSearch}\n        onSelect={this.onSelect}\n        onUnselect={this.onUnselect}\n        selectedTags={this.props.tags}\n        tags={availableTags}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport LinkIcon from 'sonar-ui-common/components/icons/LinkIcon';\nimport RuleScopeIcon from 'sonar-ui-common/components/icons/RuleScopeIcon';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport DocTooltip from '../../../components/docs/DocTooltip';\nimport DateFormatter from '../../../components/intl/DateFormatter';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport TagsList from '../../../components/tags/TagsList';\nimport { getRuleUrl } from '../../../helpers/urls';\nimport { Query } from '../query';\nimport RuleDetailsTagsPopup from './RuleDetailsTagsPopup';\nimport SimilarRulesFilter from './SimilarRulesFilter';\n\ninterface Props {\n  canWrite: boolean | undefined;\n  hideSimilarRulesFilter?: boolean;\n  onFilterChange: (changes: Partial<Query>) => void;\n  onTagsChange: (tags: string[]) => void;\n  organization: string | undefined;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  ruleDetails: T.RuleDetails;\n}\n\nconst EXTERNAL_RULE_REPO_PREFIX = 'external_';\n\nexport default class RuleDetailsMeta extends React.PureComponent<Props> {\n  renderType = () => {\n    const { ruleDetails } = this.props;\n    return (\n      <Tooltip overlay={translate('coding_rules.type.tooltip', ruleDetails.type)}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"type\">\n          <IssueTypeIcon className=\"little-spacer-right\" query={ruleDetails.type} />\n          {translate('issue.type', ruleDetails.type)}\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderSeverity = () => (\n    <Tooltip overlay={translate('default_severity')}>\n      <li className=\"coding-rules-detail-property\" data-meta=\"severity\">\n        <SeverityHelper\n          className=\"display-inline-flex-center\"\n          severity={this.props.ruleDetails.severity}\n        />\n      </li>\n    </Tooltip>\n  );\n\n  renderStatus = () => {\n    const { ruleDetails } = this.props;\n    if (ruleDetails.status === 'READY') {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('status')}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"status\">\n          <span className=\"badge badge-error\">{translate('rules.status', ruleDetails.status)}</span>\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderTags = () => {\n    const { canWrite, ruleDetails } = this.props;\n    const { sysTags = [], tags = [] } = ruleDetails;\n    const allTags = [...sysTags, ...tags];\n\n    return (\n      <li className=\"coding-rules-detail-property\" data-meta=\"tags\">\n        {this.props.canWrite ? (\n          <Dropdown\n            closeOnClick={false}\n            closeOnClickOutside={true}\n            overlay={\n              <RuleDetailsTagsPopup\n                organization={this.props.organization}\n                setTags={this.props.onTagsChange}\n                sysTags={sysTags}\n                tags={tags}\n              />\n            }\n            overlayPlacement={PopupPlacement.BottomLeft}>\n            <ButtonLink>\n              <TagsList\n                allowUpdate={canWrite}\n                tags={allTags.length > 0 ? allTags : [translate('coding_rules.no_tags')]}\n              />\n            </ButtonLink>\n          </Dropdown>\n        ) : (\n          <TagsList\n            allowUpdate={canWrite}\n            className=\"display-flex-center\"\n            tags={allTags.length > 0 ? allTags : [translate('coding_rules.no_tags')]}\n          />\n        )}\n      </li>\n    );\n  };\n\n  renderCreationDate = () => (\n    <li className=\"coding-rules-detail-property\" data-meta=\"available-since\">\n      <span className=\"little-spacer-right\">{translate('coding_rules.available_since')}</span>\n      <DateFormatter date={this.props.ruleDetails.createdAt} />\n    </li>\n  );\n\n  renderRepository = () => {\n    const { referencedRepositories, ruleDetails } = this.props;\n    const repository = referencedRepositories[ruleDetails.repo];\n    if (!repository) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('coding_rules.repository_language')}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"repository\">\n          {repository.name} ({ruleDetails.langName})\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderTemplate = () => {\n    if (!this.props.ruleDetails.isTemplate) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('coding_rules.rule_template.title')}>\n        <li className=\"coding-rules-detail-property\">{translate('coding_rules.rule_template')}</li>\n      </Tooltip>\n    );\n  };\n\n  renderParentTemplate = () => {\n    const { ruleDetails } = this.props;\n    if (!ruleDetails.templateKey) {\n      return null;\n    }\n    return (\n      <li className=\"coding-rules-detail-property\">\n        {translate('coding_rules.custom_rule')}\n        {' ('}\n        <Link to={getRuleUrl(ruleDetails.templateKey, this.props.organization)}>\n          {translate('coding_rules.show_template')}\n        </Link>\n        {')'}\n        <DocTooltip\n          className=\"little-spacer-left\"\n          doc={import(/* webpackMode: \"eager\" */ 'Docs/tooltips/rules/custom-rules.md')}\n        />\n      </li>\n    );\n  };\n\n  renderRemediation = () => {\n    const { ruleDetails } = this.props;\n    if (!ruleDetails.debtRemFnType) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('coding_rules.remediation_function')}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"remediation-function\">\n          {translate('coding_rules.remediation_function', ruleDetails.debtRemFnType)}\n          {':'}\n          {ruleDetails.debtRemFnOffset !== undefined && ` ${ruleDetails.debtRemFnOffset}`}\n          {ruleDetails.debtRemFnCoeff !== undefined && ` +${ruleDetails.debtRemFnCoeff}`}\n          {ruleDetails.effortToFixDescription !== undefined &&\n            ` ${ruleDetails.effortToFixDescription}`}\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderScope = () => {\n    const scope = this.props.ruleDetails.scope || 'MAIN';\n    return (\n      <Tooltip overlay={translate('coding_rules.scope.title')}>\n        <li className=\"coding-rules-detail-property\">\n          <RuleScopeIcon className=\"little-spacer-right\" />\n          {translate('coding_rules.scope', scope)}\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderExternalBadge = () => {\n    const { ruleDetails } = this.props;\n    if (!ruleDetails.repo) {\n      return null;\n    }\n    const engine = ruleDetails.repo.replace(new RegExp(`^${EXTERNAL_RULE_REPO_PREFIX}`), '');\n    if (!engine) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translateWithParameters('coding_rules.external_rule.engine', engine)}>\n        <li className=\"coding-rules-detail-property\">\n          <div className=\"badge spacer-left text-text-top\">{engine}</div>\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderKey() {\n    const EXTERNAL_PREFIX = 'external_';\n    const { ruleDetails } = this.props;\n    const displayedKey = ruleDetails.key.startsWith(EXTERNAL_PREFIX)\n      ? ruleDetails.key.substr(EXTERNAL_PREFIX.length)\n      : ruleDetails.key;\n    return <span className=\"note text-middle\">{displayedKey}</span>;\n  }\n\n  render() {\n    const { ruleDetails } = this.props;\n    const hasTypeData = !ruleDetails.isExternal || ruleDetails.type !== 'UNKNOWN';\n    return (\n      <div className=\"js-rule-meta\">\n        <header className=\"page-header\">\n          <div className=\"pull-right\">\n            {this.renderKey()}\n            {!ruleDetails.isExternal && (\n              <Link\n                className=\"coding-rules-detail-permalink link-no-underline spacer-left text-middle\"\n                title={translate('permalink')}\n                to={getRuleUrl(ruleDetails.key, this.props.organization)}>\n                <LinkIcon />\n              </Link>\n            )}\n            {!this.props.hideSimilarRulesFilter && (\n              <SimilarRulesFilter onFilterChange={this.props.onFilterChange} rule={ruleDetails} />\n            )}\n          </div>\n          <h3 className=\"page-title coding-rules-detail-header\">\n            <big>{ruleDetails.name}</big>\n          </h3>\n        </header>\n\n        {hasTypeData && (\n          <ul className=\"coding-rules-detail-properties\">\n            {this.renderType()}\n            {this.renderSeverity()}\n            {!ruleDetails.isExternal && (\n              <>\n                {this.renderStatus()}\n                {this.renderScope()}\n              </>\n            )}\n            {this.renderTags()}\n            {!ruleDetails.isExternal && this.renderCreationDate()}\n            {this.renderRepository()}\n            {!ruleDetails.isExternal && (\n              <>\n                {this.renderTemplate()}\n                {this.renderParentTemplate()}\n                {this.renderRemediation()}\n              </>\n            )}\n            {ruleDetails.isExternal && this.renderExternalBadge()}\n          </ul>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport SimpleModal from 'sonar-ui-common/components/controls/SimpleModal';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  onCancel: () => void;\n  onSubmit: () => void;\n}\n\nexport default function RemoveExtendedDescriptionModal({ onCancel, onSubmit }: Props) {\n  const header = translate('coding_rules.remove_extended_description');\n  return (\n    <SimpleModal header={header} onClose={onCancel} onSubmit={onSubmit}>\n      {({ onCloseClick, onFormSubmit, submitting }) => (\n        <form onSubmit={onFormSubmit}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n\n          <div className=\"modal-body\">\n            {translate('coding_rules.remove_extended_description.confirm')}\n          </div>\n\n          <footer className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton className=\"button-red\" disabled={submitting}>\n              {translate('remove')}\n            </SubmitButton>\n            <ResetButtonLink onClick={onCloseClick}>{translate('cancel')}</ResetButtonLink>\n          </footer>\n        </form>\n      )}\n    </SimpleModal>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { updateRule } from '../../../api/rules';\nimport MarkdownTips from '../../../components/common/MarkdownTips';\nimport RemoveExtendedDescriptionModal from './RemoveExtendedDescriptionModal';\n\ninterface Props {\n  canWrite: boolean | undefined;\n  onChange: (newRuleDetails: T.RuleDetails) => void;\n  organization: string | undefined;\n  ruleDetails: T.RuleDetails;\n}\n\ninterface State {\n  description: string;\n  descriptionForm: boolean;\n  removeDescriptionModal: boolean;\n  submitting: boolean;\n}\n\nexport default class RuleDetailsDescription extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    description: '',\n    descriptionForm: false,\n    submitting: false,\n    removeDescriptionModal: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleDescriptionChange = (event: React.SyntheticEvent<HTMLTextAreaElement>) =>\n    this.setState({ description: event.currentTarget.value });\n\n  handleCancelClick = () => {\n    this.setState({ descriptionForm: false });\n  };\n\n  handleSaveClick = () => {\n    this.updateDescription(this.state.description);\n  };\n\n  handleRemoveDescriptionClick = () => {\n    this.setState({ removeDescriptionModal: true });\n  };\n\n  handleCancelRemoving = () => this.setState({ removeDescriptionModal: false });\n\n  handleConfirmRemoving = () => {\n    this.setState({ removeDescriptionModal: false });\n    this.updateDescription('');\n  };\n\n  updateDescription = (text: string) => {\n    this.setState({ submitting: true });\n\n    updateRule({\n      key: this.props.ruleDetails.key,\n      markdown_note: text,\n      organization: this.props.organization\n    }).then(\n      ruleDetails => {\n        this.props.onChange(ruleDetails);\n        if (this.mounted) {\n          this.setState({ submitting: false, descriptionForm: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n        }\n      }\n    );\n  };\n\n  handleExtendDescriptionClick = () => {\n    this.setState({\n      // set description` to the current `mdNote` each time the form is open\n      description: this.props.ruleDetails.mdNote || '',\n      descriptionForm: true\n    });\n  };\n\n  renderDescription = () => (\n    <div id=\"coding-rules-detail-description-extra\">\n      {this.props.ruleDetails.htmlNote !== undefined && (\n        <div\n          className=\"rule-desc spacer-bottom markdown\"\n          // Safe: defined by rule creator (instance admin?)\n          dangerouslySetInnerHTML={{ __html: this.props.ruleDetails.htmlNote }}\n        />\n      )}\n      {this.props.canWrite && (\n        <Button\n          id=\"coding-rules-detail-extend-description\"\n          onClick={this.handleExtendDescriptionClick}>\n          {translate('coding_rules.extend_description')}\n        </Button>\n      )}\n    </div>\n  );\n\n  renderForm = () => (\n    <div className=\"coding-rules-detail-extend-description-form\">\n      <table className=\"width-100\">\n        <tbody>\n          <tr>\n            <td colSpan={2}>\n              <textarea\n                autoFocus={true}\n                className=\"width-100 little-spacer-bottom\"\n                id=\"coding-rules-detail-extend-description-text\"\n                onChange={this.handleDescriptionChange}\n                rows={4}\n                value={this.state.description}\n              />\n            </td>\n          </tr>\n          <tr>\n            <td>\n              <Button\n                disabled={this.state.submitting}\n                id=\"coding-rules-detail-extend-description-submit\"\n                onClick={this.handleSaveClick}>\n                {translate('save')}\n              </Button>\n              {this.props.ruleDetails.mdNote !== undefined && (\n                <>\n                  <Button\n                    className=\"button-red spacer-left\"\n                    disabled={this.state.submitting}\n                    id=\"coding-rules-detail-extend-description-remove\"\n                    onClick={this.handleRemoveDescriptionClick}>\n                    {translate('remove')}\n                  </Button>\n                  {this.state.removeDescriptionModal && (\n                    <RemoveExtendedDescriptionModal\n                      onCancel={this.handleCancelRemoving}\n                      onSubmit={this.handleConfirmRemoving}\n                    />\n                  )}\n                </>\n              )}\n              <ResetButtonLink\n                className=\"spacer-left\"\n                disabled={this.state.submitting}\n                id=\"coding-rules-detail-extend-description-cancel\"\n                onClick={this.handleCancelClick}>\n                {translate('cancel')}\n              </ResetButtonLink>\n              {this.state.submitting && <i className=\"spinner spacer-left\" />}\n            </td>\n            <td className=\"text-right\">\n              <MarkdownTips />\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n\n  render() {\n    const { ruleDetails } = this.props;\n    const hasDescription = !ruleDetails.isExternal || ruleDetails.type !== 'UNKNOWN';\n\n    return (\n      <div className=\"js-rule-description\">\n        {hasDescription ? (\n          <div\n            className=\"coding-rules-detail-description rule-desc markdown\"\n            // Safe: defined by rule creator (instance admin?)\n            dangerouslySetInnerHTML={{ __html: ruleDetails.htmlDesc || '' }}\n          />\n        ) : (\n          <div className=\"coding-rules-detail-description rule-desc markdown\">\n            {translateWithParameters('issue.external_issue_description', ruleDetails.name)}\n          </div>\n        )}\n\n        {!ruleDetails.templateKey && (\n          <div className=\"coding-rules-detail-description coding-rules-detail-description-extra\">\n            {!this.state.descriptionForm && this.renderDescription()}\n            {this.state.descriptionForm && this.props.canWrite && this.renderForm()}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { activateRule, Profile } from '../../../api/quality-profiles';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { SEVERITIES } from '../../../helpers/constants';\nimport { sortProfiles } from '../../quality-profiles/utils';\n\ninterface Props {\n  activation?: T.RuleActivation;\n  modalHeader: string;\n  onClose: () => void;\n  onDone: (severity: string) => Promise<void>;\n  organization: string | undefined;\n  profiles: Profile[];\n  rule: T.Rule | T.RuleDetails;\n}\n\ninterface State {\n  params: T.Dict<string>;\n  profile: string;\n  severity: string;\n  submitting: boolean;\n}\n\nexport default class ActivationFormModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    const profilesWithDepth = this.getQualityProfilesWithDepth(props);\n    this.state = {\n      params: this.getParams(props),\n      profile: profilesWithDepth.length > 0 ? profilesWithDepth[0].key : '',\n      severity: props.activation ? props.activation.severity : props.rule.severity,\n      submitting: false\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  getParams = ({ activation, rule } = this.props) => {\n    const params: T.Dict<string> = {};\n    if (rule && rule.params) {\n      for (const param of rule.params) {\n        params[param.key] = param.defaultValue || '';\n      }\n      if (activation && activation.params) {\n        for (const param of activation.params) {\n          params[param.key] = param.value;\n        }\n      }\n    }\n    return params;\n  };\n\n  // Choose QP which a user can administrate, which are the same language and which are not built-in\n  getQualityProfilesWithDepth = ({ profiles } = this.props) => {\n    return sortProfiles(\n      profiles.filter(\n        profile =>\n          !profile.isBuiltIn &&\n          profile.actions &&\n          profile.actions.edit &&\n          profile.language === this.props.rule.lang\n      )\n    ).map(profile => ({\n      ...profile,\n      // Decrease depth by 1, so the top level starts at 0\n      depth: profile.depth - 1\n    }));\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    const data = {\n      key: this.state.profile,\n      organization: this.props.organization,\n      params: this.state.params,\n      rule: this.props.rule.key,\n      severity: this.state.severity\n    };\n    activateRule(data)\n      .then(() => this.props.onDone(data.severity))\n      .then(\n        () => {\n          if (this.mounted) {\n            this.setState({ submitting: false });\n            this.props.onClose();\n          }\n        },\n        () => {\n          if (this.mounted) {\n            this.setState({ submitting: false });\n          }\n        }\n      );\n  };\n\n  handleParameterChange = (event: React.SyntheticEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = event.currentTarget;\n    this.setState((state: State) => ({ params: { ...state.params, [name]: value } }));\n  };\n\n  handleProfileChange = ({ value }: { value: string }) => {\n    this.setState({ profile: value });\n  };\n\n  handleSeverityChange = ({ value }: { value: string }) => {\n    this.setState({ severity: value });\n  };\n\n  renderSeverityOption = ({ value }: { value: string }) => {\n    return <SeverityHelper severity={value} />;\n  };\n\n  render() {\n    const { activation, rule } = this.props;\n    const { profile, severity, submitting } = this.state;\n    const { params = [] } = rule;\n    const profilesWithDepth = this.getQualityProfilesWithDepth();\n    const isCustomRule = !!(rule as T.RuleDetails).templateKey;\n    const activeInAllProfiles = profilesWithDepth.length <= 0;\n    const isUpdateMode = !!activation;\n\n    return (\n      <Modal contentLabel={this.props.modalHeader} onRequestClose={this.props.onClose} size=\"small\">\n        <form onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-head\">\n            <h2>{this.props.modalHeader}</h2>\n          </div>\n\n          <div className={classNames('modal-body', { 'modal-container': params.length > 0 })}>\n            {!isUpdateMode && activeInAllProfiles && (\n              <Alert variant=\"info\">{translate('coding_rules.active_in_all_profiles')}</Alert>\n            )}\n\n            <div className=\"modal-field\">\n              <label>{translate('coding_rules.quality_profile')}</label>\n              <Select\n                className=\"js-profile\"\n                clearable={false}\n                disabled={submitting || profilesWithDepth.length === 1}\n                onChange={this.handleProfileChange}\n                options={profilesWithDepth.map(profile => ({\n                  label: '   '.repeat(profile.depth) + profile.name,\n                  value: profile.key\n                }))}\n                value={profile}\n              />\n            </div>\n            <div className=\"modal-field\">\n              <label>{translate('severity')}</label>\n              <Select\n                className=\"js-severity\"\n                clearable={false}\n                disabled={submitting}\n                onChange={this.handleSeverityChange}\n                optionRenderer={this.renderSeverityOption}\n                options={SEVERITIES.map(severity => ({\n                  label: translate('severity', severity),\n                  value: severity\n                }))}\n                searchable={false}\n                value={severity}\n                valueRenderer={this.renderSeverityOption}\n              />\n            </div>\n            {isCustomRule ? (\n              <div className=\"modal-field\">\n                <p className=\"note\">{translate('coding_rules.custom_rule.activation_notice')}</p>\n              </div>\n            ) : (\n              params.map(param => (\n                <div className=\"modal-field\" key={param.key}>\n                  <label title={param.key}>{param.key}</label>\n                  {param.type === 'TEXT' ? (\n                    <textarea\n                      disabled={submitting}\n                      name={param.key}\n                      onChange={this.handleParameterChange}\n                      placeholder={param.defaultValue}\n                      rows={3}\n                      value={this.state.params[param.key] || ''}\n                    />\n                  ) : (\n                    <input\n                      disabled={submitting}\n                      name={param.key}\n                      onChange={this.handleParameterChange}\n                      placeholder={param.defaultValue}\n                      type=\"text\"\n                      value={this.state.params[param.key] || ''}\n                    />\n                  )}\n                  <div\n                    className=\"note\"\n                    // Safe: defined by rule creator (instance admin?)\n                    dangerouslySetInnerHTML={{ __html: param.htmlDesc || '' }}\n                  />\n                </div>\n              ))\n            )}\n          </div>\n\n          <footer className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={submitting || activeInAllProfiles}>\n              {isUpdateMode ? translate('save') : translate('coding_rules.activate')}\n            </SubmitButton>\n            <ResetButtonLink disabled={submitting} onClick={this.props.onClose}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","export default \"Quality Profiles are collections of Rules to apply during an analysis.\\n\\n---\\n\\nSee also: [Quality Profiles](/instance-administration/quality-profiles/)\\n\"","export default \"Rule Templates allow users to easily define their own rules. They are like cookie cutters from which you can stamp out new, \\\"custom rules\\\". The rules created from a template are listed on its rule detail page.\\n\"","export default \"Only custom rules may be deleted. When a custom rule is deleted, it is not removed from the SonarQube instance. Instead its status is set to \\\"REMOVED\\\", allowing relevant issues to continue to be displayed properly.\\n\"","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { bulkActivateRules, bulkDeactivateRules, Profile } from '../../../api/quality-profiles';\nimport { Query, serializeQuery } from '../query';\n\ninterface Props {\n  action: string;\n  languages: T.Languages;\n  onClose: () => void;\n  organization: string | undefined;\n  profile?: Profile;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  total: number;\n}\n\ninterface ActivationResult {\n  failed: number;\n  profile: string;\n  succeeded: number;\n}\n\ninterface State {\n  finished: boolean;\n  results: ActivationResult[];\n  selectedProfiles: any[];\n  submitting: boolean;\n}\n\nexport default class BulkChangeModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    // if there is only one possible option for profile, select it immediately\n    const selectedProfiles = [];\n    const availableProfiles = this.getAvailableQualityProfiles(props);\n    if (availableProfiles.length === 1) {\n      selectedProfiles.push(availableProfiles[0].key);\n    }\n\n    this.state = { finished: false, results: [], selectedProfiles, submitting: false };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleProfileSelect = (options: { value: string }[]) => {\n    const selectedProfiles = options.map(option => option.value);\n    this.setState({ selectedProfiles });\n  };\n\n  getAvailableQualityProfiles = ({ query, referencedProfiles } = this.props) => {\n    let profiles = Object.values(referencedProfiles);\n    if (query.languages.length > 0) {\n      profiles = profiles.filter(profile => query.languages.includes(profile.language));\n    }\n    return profiles\n      .filter(profile => profile.actions && profile.actions.edit)\n      .filter(profile => !profile.isBuiltIn);\n  };\n\n  processResponse = (profile: string, response: any) => {\n    if (this.mounted) {\n      const result: ActivationResult = {\n        failed: response.failed || 0,\n        profile,\n        succeeded: response.succeeded || 0\n      };\n      this.setState(state => ({ results: [...state.results, result] }));\n    }\n  };\n\n  sendRequests = () => {\n    let looper = Promise.resolve();\n\n    // serialize the query, but delete the `profile`\n    const data = serializeQuery(this.props.query);\n    delete data.profile;\n\n    const method = this.props.action === 'activate' ? bulkActivateRules : bulkDeactivateRules;\n\n    // if a profile is selected in the facet, pick it\n    // otherwise take all profiles selected in the dropdown\n    const profiles: string[] = this.props.profile\n      ? [this.props.profile.key]\n      : this.state.selectedProfiles;\n\n    for (const profile of profiles) {\n      looper = looper.then(() =>\n        method({\n          ...data,\n          organization: this.props.organization,\n          targetKey: profile\n        }).then(response => this.processResponse(profile, response))\n      );\n    }\n    return looper;\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    this.sendRequests().then(\n      () => {\n        if (this.mounted) {\n          this.setState({ finished: true, submitting: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n        }\n      }\n    );\n  };\n\n  renderResult = (result: ActivationResult) => {\n    const { profile: profileKey } = result;\n    const profile = this.props.referencedProfiles[profileKey];\n    if (!profile) {\n      return null;\n    }\n    const { languages } = this.props;\n    const language = languages[profile.language]\n      ? languages[profile.language].name\n      : profile.language;\n    return (\n      <Alert key={result.profile} variant={result.failed === 0 ? 'success' : 'warning'}>\n        {result.failed\n          ? translateWithParameters(\n              'coding_rules.bulk_change.warning',\n              profile.name,\n              language,\n              result.succeeded,\n              result.failed\n            )\n          : translateWithParameters(\n              'coding_rules.bulk_change.success',\n              profile.name,\n              language,\n              result.succeeded\n            )}\n      </Alert>\n    );\n  };\n\n  renderProfileSelect = () => {\n    const profiles = this.getAvailableQualityProfiles();\n    const options = profiles.map(profile => ({\n      label: `${profile.name} - ${profile.languageName}`,\n      value: profile.key\n    }));\n    return (\n      <Select\n        multi={true}\n        onChange={this.handleProfileSelect}\n        options={options}\n        value={this.state.selectedProfiles}\n      />\n    );\n  };\n\n  render() {\n    const { action, profile, total } = this.props;\n    const header =\n      action === 'activate'\n        ? `${translate('coding_rules.activate_in_quality_profile')} (${formatMeasure(\n            total,\n            'INT'\n          )} ${translate('coding_rules._rules')})`\n        : `${translate('coding_rules.deactivate_in_quality_profile')} (${formatMeasure(\n            total,\n            'INT'\n          )} ${translate('coding_rules._rules')})`;\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose} size=\"small\">\n        <form onSubmit={this.handleFormSubmit}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n\n          <div className=\"modal-body\">\n            {this.state.results.map(this.renderResult)}\n\n            {!this.state.finished && !this.state.submitting && (\n              <div className=\"modal-field\">\n                <h3>\n                  <label htmlFor=\"coding-rules-bulk-change-profile\">\n                    {action === 'activate'\n                      ? translate('coding_rules.activate_in')\n                      : translate('coding_rules.deactivate_in')}\n                  </label>\n                </h3>\n                {profile ? (\n                  <span>\n                    {profile.name}\n                    {'  '}\n                    {translate('are_you_sure')}\n                  </span>\n                ) : (\n                  this.renderProfileSelect()\n                )}\n              </div>\n            )}\n          </div>\n\n          <footer className=\"modal-foot\">\n            {this.state.submitting && <i className=\"spinner spacer-right\" />}\n            {!this.state.finished && (\n              <SubmitButton disabled={this.state.submitting} id=\"coding-rules-submit-bulk-change\">\n                {translate('apply')}\n              </SubmitButton>\n            )}\n            <ResetButtonLink onClick={this.props.onClose}>\n              {this.state.finished ? translate('close') : translate('cancel')}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Profile } from '../../../api/quality-profiles';\nimport { Query } from '../query';\nimport BulkChangeModal from './BulkChangeModal';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\n\ninterface Props {\n  languages: T.Languages;\n  organization: string | undefined;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  total: number;\n}\n\ninterface State {\n  action?: string;\n  modal: boolean;\n  profile?: Profile;\n}\n\nexport default class BulkChange extends React.PureComponent<Props, State> {\n  state: State = { modal: false };\n\n  getSelectedProfile = () => {\n    const { profile } = this.props.query;\n    return (profile && this.props.referencedProfiles[profile]) || undefined;\n  };\n\n  closeModal = () => this.setState({ action: undefined, modal: false, profile: undefined });\n\n  handleActivateClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'activate', modal: true, profile: undefined });\n  };\n\n  handleActivateInProfileClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'activate', modal: true, profile: this.getSelectedProfile() });\n  };\n\n  handleDeactivateClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'deactivate', modal: true, profile: undefined });\n  };\n\n  handleDeactivateInProfileClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'deactivate', modal: true, profile: this.getSelectedProfile() });\n  };\n\n  render() {\n    // show \"Bulk Change\" button only if user has at least one QP which he administrates\n    const canBulkChange = Object.values(this.props.referencedProfiles).some(profile =>\n      Boolean(profile.actions && profile.actions.edit)\n    );\n    if (!canBulkChange) {\n      return (\n        <Tooltip overlay={translate('coding_rules.can_not_bulk_change')}>\n          <Button className=\"js-bulk-change\" disabled={true}>\n            {translate('bulk_change')}\n          </Button>\n        </Tooltip>\n      );\n    }\n\n    const { activation } = this.props.query;\n    const profile = this.getSelectedProfile();\n    const canChangeProfile = Boolean(\n      profile && !profile.isBuiltIn && profile.actions && profile.actions.edit\n    );\n    const allowActivateOnProfile = canChangeProfile && activation === false;\n    const allowDeactivateOnProfile = canChangeProfile && activation === true;\n\n    return (\n      <>\n        <Dropdown\n          className=\"pull-left\"\n          overlayPlacement={PopupPlacement.BottomLeft}\n          overlay={\n            <ul className=\"menu\">\n              <li>\n                <a href=\"#\" onClick={this.handleActivateClick}>\n                  {translate('coding_rules.activate_in')}\n                </a>\n              </li>\n              {allowActivateOnProfile && profile && (\n                <li>\n                  <a href=\"#\" onClick={this.handleActivateInProfileClick}>\n                    {translate('coding_rules.activate_in')} <strong>{profile.name}</strong>\n                  </a>\n                </li>\n              )}\n              <li>\n                <a href=\"#\" onClick={this.handleDeactivateClick}>\n                  {translate('coding_rules.deactivate_in')}\n                </a>\n              </li>\n              {allowDeactivateOnProfile && profile && (\n                <li>\n                  <a href=\"#\" onClick={this.handleDeactivateInProfileClick}>\n                    {translate('coding_rules.deactivate_in')} <strong>{profile.name}</strong>\n                  </a>\n                </li>\n              )}\n            </ul>\n          }>\n          <Button className=\"js-bulk-change\">{translate('bulk_change')}</Button>\n        </Dropdown>\n        {this.state.modal && this.state.action && (\n          <BulkChangeModal\n            action={this.state.action}\n            languages={this.props.languages}\n            onClose={this.closeModal}\n            organization={this.props.organization}\n            profile={this.state.profile}\n            query={this.props.query}\n            referencedProfiles={this.props.referencedProfiles}\n            total={this.props.total}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { orderBy, sortBy, without } from 'lodash';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport { FacetKey } from '../query';\n\nexport interface BasicProps {\n  onChange: (changes: T.Dict<string | string[] | undefined>) => void;\n  onToggle: (facet: FacetKey) => void;\n  open: boolean;\n  stats?: T.Dict<number>;\n  values: string[];\n}\n\ninterface Props extends BasicProps {\n  children?: React.ReactNode;\n  disabled?: boolean;\n  disabledHelper?: string;\n  halfWidth?: boolean;\n  options?: string[];\n  property: FacetKey;\n  renderFooter?: () => React.ReactNode;\n  renderName?: (value: string) => React.ReactNode;\n  renderTextName?: (value: string) => string;\n  singleSelection?: boolean;\n}\n\nexport default class Facet extends React.PureComponent<Props> {\n  handleItemClick = (itemValue: string, multiple: boolean) => {\n    const { values } = this.props;\n    let newValue;\n    if (this.props.singleSelection) {\n      const value = values.length ? values[0] : undefined;\n      newValue = itemValue === value ? undefined : itemValue;\n    } else if (multiple) {\n      newValue = orderBy(\n        values.includes(itemValue) ? without(values, itemValue) : [...values, itemValue]\n      );\n    } else {\n      newValue = values.includes(itemValue) && values.length < 2 ? [] : [itemValue];\n    }\n    this.props.onChange({ [this.props.property]: newValue });\n  };\n\n  handleHeaderClick = () => this.props.onToggle(this.props.property);\n\n  handleClear = () => this.props.onChange({ [this.props.property]: [] });\n\n  getStat = (value: string) => this.props.stats && this.props.stats[value];\n\n  renderItem = (value: string) => {\n    const active = this.props.values.includes(value);\n    const stat = this.getStat(value);\n    const { renderName = defaultRenderName, renderTextName = defaultRenderName } = this.props;\n\n    return (\n      <FacetItem\n        active={active}\n        disabled={stat === 0 && !active}\n        halfWidth={this.props.halfWidth}\n        key={value}\n        name={renderName(value)}\n        onClick={this.handleItemClick}\n        stat={stat && formatMeasure(stat, 'SHORT_INT')}\n        tooltip={renderTextName(value)}\n        value={value}\n      />\n    );\n  };\n\n  render() {\n    const { disabled, renderTextName = defaultRenderName, stats } = this.props;\n    const values = this.props.values.map(renderTextName);\n    const items =\n      this.props.options ||\n      (stats &&\n        sortBy(\n          Object.keys(stats),\n          key => -stats[key],\n          key => renderTextName(key).toLowerCase()\n        ));\n\n    return (\n      <FacetBox\n        className={classNames({ 'search-navigator-facet-box-forbidden': disabled })}\n        property={this.props.property}>\n        <FacetHeader\n          name={\n            <Tooltip overlay={disabled ? this.props.disabledHelper : undefined}>\n              <span>{translate('coding_rules.facet', this.props.property)}</span>\n            </Tooltip>\n          }\n          onClear={this.handleClear}\n          onClick={disabled ? undefined : this.handleHeaderClick}\n          open={this.props.open && !disabled}\n          values={values}>\n          {this.props.children}\n        </FacetHeader>\n\n        {this.props.open && items !== undefined && (\n          <FacetItemsList>{items.map(this.renderItem)}</FacetItemsList>\n        )}\n\n        {this.props.open && this.props.renderFooter !== undefined && this.props.renderFooter()}\n      </FacetBox>\n    );\n  }\n}\n\nfunction defaultRenderName(value: string) {\n  return value;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { SEVERITIES } from '../../../helpers/constants';\nimport Facet, { BasicProps } from './Facet';\n\ninterface Props extends BasicProps {\n  disabled: boolean;\n}\n\nexport default class ActivationSeverityFacet extends React.PureComponent<Props> {\n  renderName = (severity: string) => <SeverityHelper severity={severity} />;\n\n  renderTextName = (severity: string) => translate('severity', severity);\n\n  render() {\n    return (\n      <Facet\n        {...this.props}\n        disabled={this.props.disabled}\n        disabledHelper={translate('coding_rules.filters.active_severity.inactive')}\n        halfWidth={true}\n        options={SEVERITIES}\n        property=\"activationSeverities\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { InjectedIntlProps, injectIntl } from 'react-intl';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport DateInput from '../../../components/controls/DateInput';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport { longFormatterOption } from '../../../components/intl/DateFormatter';\nimport { Query } from '../query';\n\ninterface Props {\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: keyof Query) => void;\n  open: boolean;\n  value?: Date;\n}\n\nclass AvailableSinceFacet extends React.PureComponent<Props & InjectedIntlProps> {\n  handleHeaderClick = () => {\n    this.props.onToggle('availableSince');\n  };\n\n  handleClear = () => {\n    this.props.onChange({ availableSince: undefined });\n  };\n\n  handlePeriodChange = (date: Date | undefined) => {\n    this.props.onChange({ availableSince: date });\n  };\n\n  getValues = () =>\n    this.props.value\n      ? [this.props.intl.formatDate(this.props.value, longFormatterOption)]\n      : undefined;\n\n  render() {\n    return (\n      <FacetBox property=\"availableSince\">\n        <FacetHeader\n          name={translate('coding_rules.facet.available_since')}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getValues()}\n        />\n\n        {this.props.open && (\n          <DateInput\n            name=\"available-since\"\n            onChange={this.handlePeriodChange}\n            placeholder={translate('date')}\n            value={this.props.value}\n          />\n        )}\n      </FacetBox>\n    );\n  }\n}\n\nexport default injectIntl(AvailableSinceFacet);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { SEVERITIES } from '../../../helpers/constants';\nimport Facet, { BasicProps } from './Facet';\n\nexport default class DefaultSeverityFacet extends React.PureComponent<BasicProps> {\n  renderName = (severity: string) => <SeverityHelper severity={severity} />;\n\n  renderTextName = (severity: string) => translate('severity', severity);\n\n  render() {\n    return (\n      <Facet\n        {...this.props}\n        halfWidth={true}\n        options={SEVERITIES}\n        property=\"severities\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Facet, { BasicProps } from './Facet';\n\ninterface Props extends T.Omit<BasicProps, 'values'> {\n  disabled: boolean;\n  value: T.RuleInheritance | undefined;\n}\n\nexport default class InheritanceFacet extends React.PureComponent<Props> {\n  renderName = (value: T.RuleInheritance) =>\n    translate('coding_rules.filters.inheritance', value.toLowerCase());\n\n  render() {\n    const { value, ...props } = this.props;\n\n    return (\n      <Facet\n        {...props}\n        disabled={this.props.disabled}\n        disabledHelper={translate('coding_rules.filters.inheritance.inactive')}\n        options={['NONE', 'INHERITED', 'OVERRIDES']}\n        property=\"inheritance\"\n        renderName={this.renderName}\n        renderTextName={this.renderName}\n        singleSelection={true}\n        values={value ? [value] : []}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniqBy } from 'lodash';\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { highlightTerm } from 'sonar-ui-common/helpers/search';\nimport ListStyleFacet from '../../../components/facet/ListStyleFacet';\nimport { getLanguages, Store } from '../../../store/rootReducer';\nimport { BasicProps } from './Facet';\n\ninterface InstalledLanguage {\n  key: string;\n  name: string;\n}\n\ninterface Props extends BasicProps {\n  disabled?: boolean;\n  installedLanguages: InstalledLanguage[];\n}\n\nclass LanguageFacet extends React.PureComponent<Props> {\n  getLanguageName = (languageKey: string) => {\n    const language = this.props.installedLanguages.find(l => l.key === languageKey);\n    return language ? language.name : languageKey;\n  };\n\n  handleSearch = (query: string) => {\n    const options = this.getAllPossibleOptions();\n    const results = options.filter(language =>\n      language.name.toLowerCase().includes(query.toLowerCase())\n    );\n    const paging = { pageIndex: 1, pageSize: results.length, total: results.length };\n    return Promise.resolve({ paging, results });\n  };\n\n  getAllPossibleOptions = () => {\n    const { installedLanguages, stats = {} } = this.props;\n\n    // add any language that presents in the facet, but might not be installed\n    // for such language we don't know their display name, so let's just use their key\n    // and make sure we reference each language only once\n    return uniqBy(\n      [...installedLanguages, ...Object.keys(stats).map(key => ({ key, name: key }))],\n      language => language.key\n    );\n  };\n\n  renderSearchResult = ({ name }: InstalledLanguage, term: string) => {\n    return highlightTerm(name, term);\n  };\n\n  render() {\n    return (\n      <ListStyleFacet<InstalledLanguage>\n        disabled={this.props.disabled}\n        disabledHelper={translate('coding_rules.filters.language.inactive')}\n        facetHeader={translate('coding_rules.facet.languages')}\n        fetching={false}\n        getFacetItemText={this.getLanguageName}\n        getSearchResultKey={language => language.key}\n        getSearchResultText={language => language.name}\n        minSearchLength={1}\n        onChange={this.props.onChange}\n        onSearch={this.handleSearch}\n        onToggle={this.props.onToggle}\n        open={this.props.open}\n        property=\"languages\"\n        renderFacetItem={this.getLanguageName}\n        renderSearchResult={this.renderSearchResult}\n        searchPlaceholder={translate('search.search_for_languages')}\n        stats={this.props.stats}\n        values={this.props.values}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store) => ({\n  installedLanguages: Object.values(getLanguages(state))\n});\n\nexport default connect(mapStateToProps)(LanguageFacet);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Profile } from '../../../api/quality-profiles';\nimport DocTooltip from '../../../components/docs/DocTooltip';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport { FacetKey, Query } from '../query';\n\ninterface Props {\n  activation: boolean | undefined;\n  compareToProfile: string | undefined;\n  languages: string[];\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (facet: FacetKey) => void;\n  open: boolean;\n  referencedProfiles: T.Dict<Profile>;\n  value: string | undefined;\n}\n\nexport default class ProfileFacet extends React.PureComponent<Props> {\n  handleItemClick = (selected: string) => {\n    const newValue = this.props.value === selected ? '' : selected;\n    this.props.onChange({\n      activation: this.props.activation === undefined ? true : this.props.activation,\n      compareToProfile: undefined,\n      profile: newValue\n    });\n  };\n\n  handleHeaderClick = () => this.props.onToggle('profile');\n\n  handleClear = () =>\n    this.props.onChange({\n      activation: undefined,\n      activationSeverities: [],\n      compareToProfile: undefined,\n      inheritance: undefined,\n      profile: undefined\n    });\n\n  handleActiveClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    this.stopPropagation(event);\n    this.props.onChange({ activation: true, compareToProfile: undefined });\n  };\n\n  handleInactiveClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    this.stopPropagation(event);\n    this.props.onChange({ activation: false, compareToProfile: undefined });\n  };\n\n  stopPropagation = (event: React.SyntheticEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n  };\n\n  getTextValue = () => {\n    const { referencedProfiles, value } = this.props;\n    if (value) {\n      const profile = referencedProfiles[value];\n      const name = (profile && `${profile.name} ${profile.languageName}`) || value;\n      return [name];\n    } else {\n      return [];\n    }\n  };\n\n  getTooltip = (profile: Profile) => {\n    const base = `${profile.name} ${profile.languageName}`;\n    return profile.isBuiltIn ? `${base} (${translate('quality_profiles.built_in')})` : base;\n  };\n\n  renderName = (profile: Profile) => (\n    <>\n      {profile.name}\n      <span className=\"note little-spacer-left\">\n        {profile.languageName}\n        {profile.isBuiltIn && ` (${translate('quality_profiles.built_in')})`}\n      </span>\n    </>\n  );\n\n  renderActivation = (profile: Profile) => {\n    const isCompare = profile.key === this.props.compareToProfile;\n    const activation = isCompare ? true : this.props.activation;\n    return (\n      <>\n        <span\n          aria-checked={activation}\n          className={classNames('js-active', 'facet-toggle', 'facet-toggle-green', {\n            'facet-toggle-active': activation\n          })}\n          onClick={isCompare ? this.stopPropagation : this.handleActiveClick}\n          role=\"radio\"\n          tabIndex={-1}>\n          active\n        </span>\n        <span\n          aria-checked={!activation}\n          className={classNames('js-inactive', 'facet-toggle', 'facet-toggle-red', {\n            'facet-toggle-active': !activation\n          })}\n          onClick={isCompare ? this.stopPropagation : this.handleInactiveClick}\n          role=\"radio\"\n          tabIndex={-1}>\n          inactive\n        </span>\n      </>\n    );\n  };\n\n  renderItem = (profile: Profile) => {\n    const active = [this.props.value, this.props.compareToProfile].includes(profile.key);\n\n    return (\n      <FacetItem\n        active={active}\n        className={this.props.compareToProfile === profile.key ? 'compare' : undefined}\n        key={profile.key}\n        name={this.renderName(profile)}\n        onClick={this.handleItemClick}\n        stat={this.renderActivation(profile)}\n        tooltip={this.getTooltip(profile)}\n        value={profile.key}\n      />\n    );\n  };\n\n  render() {\n    const { languages, referencedProfiles } = this.props;\n    let profiles = Object.values(referencedProfiles);\n    if (languages.length > 0) {\n      profiles = profiles.filter(profile => languages.includes(profile.language));\n    }\n    profiles = sortBy(\n      profiles,\n      profile => profile.name.toLowerCase(),\n      profile => profile.languageName\n    );\n\n    return (\n      <FacetBox property=\"profile\">\n        <FacetHeader\n          name={translate('coding_rules.facet.qprofile')}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getTextValue()}>\n          <DocTooltip\n            className=\"spacer-left\"\n            doc={import(/* webpackMode: \"eager\" */ 'Docs/tooltips/rules/rules-quality-profiles.md')}\n          />\n        </FacetHeader>\n\n        {this.props.open && <FacetItemsList>{profiles.map(this.renderItem)}</FacetItemsList>}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { getLanguages, Store } from '../../../store/rootReducer';\nimport Facet, { BasicProps } from './Facet';\n\ninterface StateProps {\n  referencedLanguages: T.Dict<{ key: string; name: string }>;\n}\n\ninterface Props extends BasicProps, StateProps {\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n}\n\nclass RepositoryFacet extends React.PureComponent<Props> {\n  getLanguageName = (languageKey: string) => {\n    const { referencedLanguages } = this.props;\n    const language = referencedLanguages[languageKey];\n    return (language && language.name) || languageKey;\n  };\n\n  renderName = (repositoryKey: string) => {\n    const { referencedRepositories } = this.props;\n    const repository = referencedRepositories[repositoryKey];\n    return repository ? (\n      <>\n        {repository.name}\n        <span className=\"note little-spacer-left\">{this.getLanguageName(repository.language)}</span>\n      </>\n    ) : (\n      repositoryKey\n    );\n  };\n\n  renderTextName = (repositoryKey: string) => {\n    const { referencedRepositories } = this.props;\n    const repository = referencedRepositories[repositoryKey];\n    return (repository && repository.name) || repositoryKey;\n  };\n\n  render() {\n    const { referencedLanguages, referencedRepositories, ...facetProps } = this.props;\n    return (\n      <Facet\n        {...facetProps}\n        property=\"repositories\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store): StateProps => ({\n  referencedLanguages: getLanguages(state)\n});\n\nexport default connect(mapStateToProps)(RepositoryFacet);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { RULE_STATUSES } from '../../../helpers/constants';\nimport Facet, { BasicProps } from './Facet';\n\nexport default class StatusFacet extends React.PureComponent<BasicProps> {\n  renderName = (status: string) => translate('rules.status', status.toLowerCase());\n\n  render() {\n    return (\n      <Facet\n        {...this.props}\n        options={RULE_STATUSES}\n        property=\"statuses\"\n        renderName={this.renderName}\n        renderTextName={this.renderName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniq } from 'lodash';\nimport * as React from 'react';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { highlightTerm } from 'sonar-ui-common/helpers/search';\nimport { getRuleTags } from '../../../api/rules';\nimport { colors } from '../../../app/theme';\nimport ListStyleFacet from '../../../components/facet/ListStyleFacet';\nimport { BasicProps } from './Facet';\n\ninterface Props extends BasicProps {\n  organization: string | undefined;\n}\n\nexport default class TagFacet extends React.PureComponent<Props> {\n  handleSearch = (query: string) => {\n    return getRuleTags({ organization: this.props.organization, ps: 50, q: query }).then(tags => ({\n      paging: { pageIndex: 1, pageSize: tags.length, total: tags.length },\n      results: tags\n    }));\n  };\n\n  handleSelect = (option: { value: string }) => {\n    this.props.onChange({ tags: uniq([...this.props.values, option.value]) });\n  };\n\n  getTagName = (tag: string) => {\n    return tag;\n  };\n\n  renderTag = (tag: string) => (\n    <>\n      <TagsIcon className=\"little-spacer-right\" fill={colors.gray60} />\n      {tag}\n    </>\n  );\n\n  renderSearchResult = (tag: string, term: string) => (\n    <>\n      <TagsIcon className=\"little-spacer-right\" fill={colors.gray60} />\n      {highlightTerm(tag, term)}\n    </>\n  );\n\n  render() {\n    return (\n      <ListStyleFacet<string>\n        facetHeader={translate('coding_rules.facet.tags')}\n        fetching={false}\n        getFacetItemText={this.getTagName}\n        getSearchResultKey={tag => tag}\n        getSearchResultText={tag => tag}\n        onChange={this.props.onChange}\n        onSearch={this.handleSearch}\n        onToggle={this.props.onToggle}\n        open={this.props.open}\n        property=\"tags\"\n        renderFacetItem={this.renderTag}\n        renderSearchResult={this.renderSearchResult}\n        searchPlaceholder={translate('search.search_for_tags')}\n        stats={this.props.stats}\n        values={this.props.values}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport DocTooltip from '../../../components/docs/DocTooltip';\nimport Facet, { BasicProps } from './Facet';\n\ninterface Props extends T.Omit<BasicProps, 'onChange' | 'values'> {\n  onChange: (changes: { template: boolean | undefined }) => void;\n  value: boolean | undefined;\n}\n\nexport default class TemplateFacet extends React.PureComponent<Props> {\n  handleChange = (changes: { template: string | any[] }) => {\n    const template =\n      // empty array is returned when a user cleared the facet\n      // otherwise `\"true\"`, `\"false\"` or `undefined` can be returned\n      Array.isArray(changes.template) || changes.template === undefined\n        ? undefined\n        : changes.template === 'true';\n    this.props.onChange({ ...changes, template });\n  };\n\n  renderName = (template: string) =>\n    template === 'true'\n      ? translate('coding_rules.filters.template.is_template')\n      : translate('coding_rules.filters.template.is_not_template');\n\n  render() {\n    const { onChange, value, ...props } = this.props;\n\n    return (\n      <Facet\n        {...props}\n        onChange={this.handleChange}\n        options={['true', 'false']}\n        property=\"template\"\n        renderName={this.renderName}\n        renderTextName={this.renderName}\n        singleSelection={true}\n        values={value !== undefined ? [String(value)] : []}>\n        <DocTooltip\n          className=\"spacer-left\"\n          doc={import(/* webpackMode: \"eager\" */ 'Docs/tooltips/rules/rule-templates.md')}\n        />\n      </Facet>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Facet, { BasicProps } from './Facet';\n\nexport default class TypeFacet extends React.PureComponent<BasicProps> {\n  renderName = (type: string) => (\n    <>\n      <IssueTypeIcon className=\"little-spacer-right\" query={type} />\n      {translate('issue.type', type)}\n    </>\n  );\n\n  renderTextName = (type: string) => translate('issue.type', type);\n\n  render() {\n    const options = ['BUG', 'VULNERABILITY', 'CODE_SMELL', 'SECURITY_HOTSPOT'];\n\n    return (\n      <Facet\n        {...this.props}\n        options={options}\n        property=\"types\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Profile } from '../../../api/quality-profiles';\nimport StandardFacet from '../../issues/sidebar/StandardFacet';\nimport { Facets, OpenFacets, Query } from '../query';\nimport ActivationSeverityFacet from './ActivationSeverityFacet';\nimport AvailableSinceFacet from './AvailableSinceFacet';\nimport DefaultSeverityFacet from './DefaultSeverityFacet';\nimport InheritanceFacet from './InheritanceFacet';\nimport LanguageFacet from './LanguageFacet';\nimport ProfileFacet from './ProfileFacet';\nimport RepositoryFacet from './RepositoryFacet';\nimport StatusFacet from './StatusFacet';\nimport TagFacet from './TagFacet';\nimport TemplateFacet from './TemplateFacet';\nimport TypeFacet from './TypeFacet';\n\ninterface Props {\n  facets?: Facets;\n  hideProfileFacet?: boolean;\n  onFacetToggle: (facet: string) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  openFacets: OpenFacets;\n  organization: string | undefined;\n  organizationsEnabled?: boolean;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  selectedProfile?: Profile;\n}\n\nexport default function FacetsList(props: Props) {\n  const languageDisabled = !props.hideProfileFacet && props.query.profile !== undefined;\n\n  const inheritanceDisabled =\n    props.query.compareToProfile !== undefined ||\n    props.selectedProfile === undefined ||\n    !props.selectedProfile.isInherited;\n\n  const activationSeverityDisabled =\n    props.query.compareToProfile !== undefined ||\n    props.selectedProfile === undefined ||\n    !props.query.activation;\n  return (\n    <>\n      <LanguageFacet\n        disabled={languageDisabled}\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.languages}\n        stats={props.facets && props.facets.languages}\n        values={props.query.languages}\n      />\n      <TypeFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.types}\n        stats={props.facets && props.facets.types}\n        values={props.query.types}\n      />\n      <TagFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.tags}\n        organization={props.organization}\n        stats={props.facets && props.facets.tags}\n        values={props.query.tags}\n      />\n      <RepositoryFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.repositories}\n        referencedRepositories={props.referencedRepositories}\n        stats={props.facets && props.facets.repositories}\n        values={props.query.repositories}\n      />\n      <DefaultSeverityFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.severities}\n        stats={props.facets && props.facets.severities}\n        values={props.query.severities}\n      />\n      <StatusFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.statuses}\n        stats={props.facets && props.facets.statuses}\n        values={props.query.statuses}\n      />\n      <StandardFacet\n        cwe={props.query.cwe}\n        cweOpen={!!props.openFacets.cwe}\n        cweStats={props.facets && props.facets.cwe}\n        fetchingCwe={false}\n        fetchingOwaspTop10={false}\n        fetchingSansTop25={false}\n        fetchingSonarSourceSecurity={false}\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.standards}\n        owaspTop10={props.query.owaspTop10}\n        owaspTop10Open={!!props.openFacets.owaspTop10}\n        owaspTop10Stats={props.facets && props.facets.owaspTop10}\n        query={props.query}\n        sansTop25={props.query.sansTop25}\n        sansTop25Open={!!props.openFacets.sansTop25}\n        sansTop25Stats={props.facets && props.facets.sansTop25}\n        sonarsourceSecurity={props.query.sonarsourceSecurity}\n        sonarsourceSecurityOpen={!!props.openFacets.sonarsourceSecurity}\n        sonarsourceSecurityStats={props.facets && props.facets.sonarsourceSecurity}\n      />\n      <AvailableSinceFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.availableSince}\n        value={props.query.availableSince}\n      />\n      {!props.organizationsEnabled && (\n        <TemplateFacet\n          onChange={props.onFilterChange}\n          onToggle={props.onFacetToggle}\n          open={!!props.openFacets.template}\n          value={props.query.template}\n        />\n      )}\n      {!props.hideProfileFacet && (\n        <>\n          <ProfileFacet\n            activation={props.query.activation}\n            compareToProfile={props.query.compareToProfile}\n            languages={props.query.languages}\n            onChange={props.onFilterChange}\n            onToggle={props.onFacetToggle}\n            open={!!props.openFacets.profile}\n            referencedProfiles={props.referencedProfiles}\n            value={props.query.profile}\n          />\n          <InheritanceFacet\n            disabled={inheritanceDisabled}\n            onChange={props.onFilterChange}\n            onToggle={props.onFacetToggle}\n            open={!!props.openFacets.inheritance}\n            value={props.query.inheritance}\n          />\n          <ActivationSeverityFacet\n            disabled={activationSeverityDisabled}\n            onChange={props.onFilterChange}\n            onToggle={props.onFacetToggle}\n            open={!!props.openFacets.activationSeverities}\n            stats={props.facets && props.facets.activationSeverities}\n            values={props.query.activationSeverities}\n          />\n        </>\n      )}\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ReloadButton from 'sonar-ui-common/components/controls/ReloadButton';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport PageCounter from '../../../components/common/PageCounter';\n\ninterface Props {\n  loading: boolean;\n  onReload: () => void;\n  paging?: T.Paging;\n  selectedIndex?: number;\n}\n\nexport default function PageActions(props: Props) {\n  return (\n    <div className=\"pull-right\">\n      <Shortcuts />\n\n      <DeferredSpinner loading={props.loading}>\n        <ReloadButton onClick={props.onReload} />\n      </DeferredSpinner>\n\n      {props.paging && (\n        <PageCounter\n          className=\"spacer-left\"\n          current={props.selectedIndex}\n          label={translate('coding_rules._rules')}\n          total={props.paging.total}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction Shortcuts() {\n  return (\n    <span className=\"note big-spacer-right\">\n      <span className=\"big-spacer-right\">\n        <span className=\"shortcut-button little-spacer-right\"></span>\n        <span className=\"shortcut-button little-spacer-right\"></span>\n        {translate('coding_rules.to_select_rules')}\n      </span>\n\n      <span>\n        <span className=\"shortcut-button little-spacer-right\"></span>\n        <span className=\"shortcut-button little-spacer-right\"></span>\n        {translate('issues.to_navigate')}\n      </span>\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { csvEscape } from 'sonar-ui-common/helpers/csv';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { latinize } from 'sonar-ui-common/helpers/strings';\nimport { createRule, updateRule } from '../../../api/rules';\nimport MarkdownTips from '../../../components/common/MarkdownTips';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport TypeHelper from '../../../components/shared/TypeHelper';\nimport { RULE_STATUSES, RULE_TYPES, SEVERITIES } from '../../../helpers/constants';\n\ninterface Props {\n  customRule?: T.RuleDetails;\n  onClose: () => void;\n  onDone: (newRuleDetails: T.RuleDetails) => void;\n  organization: string | undefined;\n  templateRule: T.RuleDetails;\n}\n\ninterface State {\n  description: string;\n  key: string;\n  keyModifiedByUser: boolean;\n  name: string;\n  params: T.Dict<string>;\n  reactivating: boolean;\n  severity: string;\n  status: string;\n  submitting: boolean;\n  type: string;\n}\n\nexport default class CustomRuleFormModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    const params: T.Dict<string> = {};\n    if (props.customRule && props.customRule.params) {\n      for (const param of props.customRule.params) {\n        params[param.key] = param.defaultValue || '';\n      }\n    }\n    this.state = {\n      description: (props.customRule && props.customRule.mdDesc) || '',\n      key: '',\n      keyModifiedByUser: false,\n      name: (props.customRule && props.customRule.name) || '',\n      params,\n      reactivating: false,\n      severity: (props.customRule && props.customRule.severity) || props.templateRule.severity,\n      status: (props.customRule && props.customRule.status) || props.templateRule.status,\n      submitting: false,\n      type: (props.customRule && props.customRule.type) || props.templateRule.type\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  prepareRequest = () => {\n    const { customRule, organization, templateRule } = this.props;\n    const params = Object.keys(this.state.params)\n      .map(key => `${key}=${csvEscape(this.state.params[key])}`)\n      .join(';');\n    const ruleData = {\n      markdown_description: this.state.description,\n      name: this.state.name,\n      organization,\n      params,\n      severity: this.state.severity,\n      status: this.state.status\n    };\n    return customRule\n      ? updateRule({ ...ruleData, key: customRule.key })\n      : createRule({\n          ...ruleData,\n          custom_key: this.state.key,\n          prevent_reactivation: !this.state.reactivating,\n          template_key: templateRule.key,\n          type: this.state.type\n        });\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    this.prepareRequest().then(\n      newRuleDetails => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n          this.props.onDone(newRuleDetails);\n        }\n      },\n      (response: Response) => {\n        if (this.mounted) {\n          this.setState({ reactivating: response.status === 409, submitting: false });\n        }\n      }\n    );\n  };\n\n  handleNameChange = (event: React.SyntheticEvent<HTMLInputElement>) => {\n    const { value: name } = event.currentTarget;\n    this.setState(state => ({\n      name,\n      key: state.keyModifiedByUser ? state.key : latinize(name).replace(/[^A-Za-z0-9]/g, '_')\n    }));\n  };\n\n  handleKeyChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.setState({ key: event.currentTarget.value, keyModifiedByUser: true });\n\n  handleDescriptionChange = (event: React.SyntheticEvent<HTMLTextAreaElement>) =>\n    this.setState({ description: event.currentTarget.value });\n\n  handleTypeChange = ({ value }: { value: string }) => this.setState({ type: value });\n\n  handleSeverityChange = ({ value }: { value: string }) => this.setState({ severity: value });\n\n  handleStatusChange = ({ value }: { value: string }) => this.setState({ status: value });\n\n  handleParameterChange = (event: React.SyntheticEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = event.currentTarget;\n    this.setState((state: State) => ({ params: { ...state.params, [name]: value } }));\n  };\n\n  renderNameField = () => (\n    <div className=\"modal-field\">\n      <label htmlFor=\"coding-rules-custom-rule-creation-name\">\n        {translate('name')} <em className=\"mandatory\">*</em>\n      </label>\n      <input\n        autoFocus={true}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-creation-name\"\n        onChange={this.handleNameChange}\n        required={true}\n        type=\"text\"\n        value={this.state.name}\n      />\n    </div>\n  );\n\n  renderKeyField = () => (\n    <div className=\"modal-field\">\n      <label htmlFor=\"coding-rules-custom-rule-creation-key\">\n        {translate('key')} {!this.props.customRule && <em className=\"mandatory\">*</em>}\n      </label>\n\n      {this.props.customRule ? (\n        <span className=\"coding-rules-detail-custom-rule-key\" title={this.props.customRule.key}>\n          {this.props.customRule.key}\n        </span>\n      ) : (\n        <input\n          disabled={this.state.submitting}\n          id=\"coding-rules-custom-rule-creation-key\"\n          onChange={this.handleKeyChange}\n          required={true}\n          type=\"text\"\n          value={this.state.key}\n        />\n      )}\n    </div>\n  );\n\n  renderDescriptionField = () => (\n    <div className=\"modal-field\">\n      <label htmlFor=\"coding-rules-custom-rule-creation-html-description\">\n        {translate('description')} <em className=\"mandatory\">*</em>\n      </label>\n      <textarea\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-creation-html-description\"\n        onChange={this.handleDescriptionChange}\n        required={true}\n        rows={5}\n        value={this.state.description}\n      />\n      <MarkdownTips className=\"modal-field-descriptor text-right\" />\n    </div>\n  );\n\n  renderTypeOption = ({ value }: { value: T.RuleType }) => {\n    return <TypeHelper type={value} />;\n  };\n\n  renderTypeField = () => (\n    <div className=\"modal-field flex-1 spacer-right\">\n      <label htmlFor=\"coding-rules-custom-rule-type\">{translate('type')}</label>\n      <Select\n        clearable={false}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-type\"\n        onChange={this.handleTypeChange}\n        optionRenderer={this.renderTypeOption}\n        options={RULE_TYPES.map(type => ({\n          label: translate('issue.type', type),\n          value: type\n        }))}\n        searchable={false}\n        value={this.state.type}\n        valueRenderer={this.renderTypeOption}\n      />\n    </div>\n  );\n\n  renderSeverityOption = ({ value }: { value: string }) => <SeverityHelper severity={value} />;\n\n  renderSeverityField = () => (\n    <div className=\"modal-field flex-1 spacer-right\">\n      <label htmlFor=\"coding-rules-custom-rule-severity\">{translate('severity')}</label>\n      <Select\n        clearable={false}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-severity\"\n        onChange={this.handleSeverityChange}\n        optionRenderer={this.renderSeverityOption}\n        options={SEVERITIES.map(severity => ({\n          label: translate('severity', severity),\n          value: severity\n        }))}\n        searchable={false}\n        value={this.state.severity}\n        valueRenderer={this.renderSeverityOption}\n      />\n    </div>\n  );\n\n  renderStatusField = () => (\n    <div className=\"modal-field flex-1\">\n      <label htmlFor=\"coding-rules-custom-rule-status\">\n        {translate('coding_rules.filters.status')}\n      </label>\n      <Select\n        clearable={false}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-status\"\n        onChange={this.handleStatusChange}\n        options={RULE_STATUSES.map(status => ({\n          label: translate('rules.status', status),\n          value: status\n        }))}\n        searchable={false}\n        value={this.state.status}\n      />\n    </div>\n  );\n\n  renderParameterField = (param: T.RuleParameter) => (\n    <div className=\"modal-field\" key={param.key}>\n      <label className=\"capitalize\" htmlFor={param.key}>\n        {param.key}\n      </label>\n\n      {param.type === 'TEXT' ? (\n        <textarea\n          disabled={this.state.submitting}\n          id={param.key}\n          name={param.key}\n          onChange={this.handleParameterChange}\n          placeholder={param.defaultValue}\n          rows={3}\n          value={this.state.params[param.key] || ''}\n        />\n      ) : (\n        <input\n          disabled={this.state.submitting}\n          id={param.key}\n          name={param.key}\n          onChange={this.handleParameterChange}\n          placeholder={param.defaultValue}\n          type=\"text\"\n          value={this.state.params[param.key] || ''}\n        />\n      )}\n      <div\n        className=\"modal-field-description\"\n        // Safe: defined by rule creator (instance admin?)\n        dangerouslySetInnerHTML={{ __html: param.htmlDesc || '' }}\n      />\n    </div>\n  );\n\n  render() {\n    const { customRule, templateRule } = this.props;\n    const { reactivating, submitting } = this.state;\n    const { params = [] } = templateRule;\n    const header = customRule\n      ? translate('coding_rules.update_custom_rule')\n      : translate('coding_rules.create_custom_rule');\n    let submit = this.props.customRule ? translate('save') : translate('create');\n    if (this.state.reactivating) {\n      submit = translate('coding_rules.reactivate');\n    }\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <form onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-head\">\n            <h2>{header}</h2>\n          </div>\n\n          <div className=\"modal-body modal-container\">\n            {reactivating && (\n              <Alert variant=\"warning\">{translate('coding_rules.reactivate.help')}</Alert>\n            )}\n\n            {this.renderNameField()}\n            {this.renderKeyField()}\n            <div className=\"display-flex-space-between\">\n              {/* do not allow to change the type of existing rule */}\n              {!customRule && this.renderTypeField()}\n              {this.renderSeverityField()}\n              {this.renderStatusField()}\n            </div>\n            {this.renderDescriptionField()}\n            {params.map(this.renderParameterField)}\n          </div>\n\n          <div className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={this.state.submitting}>{submit}</SubmitButton>\n            <ResetButtonLink\n              disabled={submitting}\n              id=\"coding-rules-custom-rule-creation-cancel\"\n              onClick={this.props.onClose}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </div>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport CustomRuleFormModal from './CustomRuleFormModal';\n\ninterface Props {\n  children: (props: { onClick: () => void }) => React.ReactNode;\n  customRule?: T.RuleDetails;\n  onDone: (newRuleDetails: T.RuleDetails) => void;\n  organization: string | undefined;\n  templateRule: T.RuleDetails;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class CustomRuleButton extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { modal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleClick = () => {\n    this.setState({ modal: true });\n  };\n\n  handleModalClose = () => {\n    if (this.mounted) {\n      this.setState({ modal: false });\n    }\n  };\n\n  handleDone = (newRuleDetails: T.RuleDetails) => {\n    this.handleModalClose();\n    this.props.onDone(newRuleDetails);\n  };\n\n  render() {\n    return (\n      <>\n        {this.props.children({ onClick: this.handleClick })}\n        {this.state.modal && (\n          <CustomRuleFormModal\n            customRule={this.props.customRule}\n            onClose={this.handleModalClose}\n            onDone={this.handleDone}\n            organization={this.props.organization}\n            templateRule={this.props.templateRule}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ConfirmButton from 'sonar-ui-common/components/controls/ConfirmButton';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { deleteRule, searchRules } from '../../../api/rules';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { getRuleUrl } from '../../../helpers/urls';\nimport CustomRuleButton from './CustomRuleButton';\n\ninterface Props {\n  canChange?: boolean;\n  organization: string | undefined;\n  ruleDetails: T.RuleDetails;\n}\n\ninterface State {\n  loading: boolean;\n  rules?: T.Rule[];\n}\n\nexport default class RuleDetailsCustomRules extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchRules();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.ruleDetails.key !== this.props.ruleDetails.key) {\n      this.fetchRules();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchRules = () => {\n    this.setState({ loading: true });\n    searchRules({\n      f: 'name,severity,params',\n      organization: this.props.organization,\n      template_key: this.props.ruleDetails.key\n    }).then(\n      ({ rules }) => {\n        if (this.mounted) {\n          this.setState({ rules, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleRuleCreate = (newRuleDetails: T.RuleDetails) => {\n    if (this.mounted) {\n      this.setState(({ rules = [] }: State) => ({\n        rules: [...rules, newRuleDetails]\n      }));\n    }\n  };\n\n  handleRuleDelete = (ruleKey: string) => {\n    return deleteRule({ key: ruleKey, organization: this.props.organization }).then(() => {\n      if (this.mounted) {\n        this.setState(({ rules = [] }) => ({\n          rules: rules.filter(rule => rule.key !== ruleKey)\n        }));\n      }\n    });\n  };\n\n  renderRule = (rule: T.Rule) => (\n    <tr data-rule={rule.key} key={rule.key}>\n      <td className=\"coding-rules-detail-list-name\">\n        <Link to={getRuleUrl(rule.key, this.props.organization)}>{rule.name}</Link>\n      </td>\n\n      <td className=\"coding-rules-detail-list-severity\">\n        <SeverityHelper className=\"display-flex-center\" severity={rule.severity} />\n      </td>\n\n      <td className=\"coding-rules-detail-list-parameters\">\n        {rule.params &&\n          rule.params\n            .filter(param => param.defaultValue)\n            .map(param => (\n              <div className=\"coding-rules-detail-list-parameter\" key={param.key}>\n                <span className=\"key\">{param.key}</span>\n                <span className=\"sep\">:&nbsp;</span>\n                <span className=\"value\" title={param.defaultValue}>\n                  {param.defaultValue}\n                </span>\n              </div>\n            ))}\n      </td>\n\n      {this.props.canChange && (\n        <td className=\"coding-rules-detail-list-actions\">\n          <ConfirmButton\n            confirmButtonText={translate('delete')}\n            confirmData={rule.key}\n            isDestructive={true}\n            modalBody={translateWithParameters('coding_rules.delete.custom.confirm', rule.name)}\n            modalHeader={translate('coding_rules.delete_rule')}\n            onConfirm={this.handleRuleDelete}>\n            {({ onClick }) => (\n              <Button className=\"button-red js-delete-custom-rule\" onClick={onClick}>\n                {translate('delete')}\n              </Button>\n            )}\n          </ConfirmButton>\n        </td>\n      )}\n    </tr>\n  );\n\n  render() {\n    const { loading, rules = [] } = this.state;\n\n    return (\n      <div className=\"js-rule-custom-rules coding-rule-section\">\n        <div className=\"coding-rules-detail-custom-rules-section\">\n          <div className=\"coding-rule-section-separator\" />\n\n          <h3 className=\"coding-rules-detail-title\">{translate('coding_rules.custom_rules')}</h3>\n\n          {this.props.canChange && (\n            <CustomRuleButton\n              onDone={this.handleRuleCreate}\n              organization={this.props.organization}\n              templateRule={this.props.ruleDetails}>\n              {({ onClick }) => (\n                <Button className=\"js-create-custom-rule spacer-left\" onClick={onClick}>\n                  {translate('coding_rules.create')}\n                </Button>\n              )}\n            </CustomRuleButton>\n          )}\n\n          <DeferredSpinner className=\"spacer-left\" loading={loading}>\n            {rules.length > 0 && (\n              <table className=\"coding-rules-detail-list\" id=\"coding-rules-detail-custom-rules\">\n                <tbody>{sortBy(rules, rule => rule.name).map(this.renderRule)}</tbody>\n              </table>\n            )}\n          </DeferredSpinner>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getFacet } from '../../../api/issues';\nimport { withAppState } from '../../../components/hoc/withAppState';\nimport { getIssuesUrl } from '../../../helpers/urls';\n\ninterface Props {\n  appState: Pick<T.AppState, 'branchesEnabled'>;\n  organization: string | undefined;\n  ruleDetails: Pick<T.RuleDetails, 'key' | 'type'>;\n}\n\ninterface Project {\n  count: number;\n  key: string;\n  name: string;\n}\n\ninterface State {\n  loading: boolean;\n  projects?: Project[];\n  total?: number;\n}\n\nexport class RuleDetailsIssues extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchIssues();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.ruleDetails !== this.props.ruleDetails) {\n      this.fetchIssues();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchIssues = () => {\n    const {\n      ruleDetails: { key },\n      organization\n    } = this.props;\n\n    this.setState({ loading: true });\n    getFacet(\n      {\n        resolved: 'false',\n        rules: key,\n        organization\n      },\n      'projects'\n    ).then(\n      ({ facet, response }) => {\n        if (this.mounted) {\n          const { components = [], paging } = response;\n          const projects = [];\n          for (const item of facet) {\n            const project = components.find(component => component.key === item.val);\n            if (project) {\n              projects.push({ count: item.count, key: project.key, name: project.name });\n            }\n          }\n          this.setState({ projects, loading: false, total: paging.total });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  renderTotal = () => {\n    const {\n      ruleDetails: { key },\n      organization\n    } = this.props;\n\n    const { total } = this.state;\n    if (total === undefined) {\n      return null;\n    }\n    const path = getIssuesUrl({ resolved: 'false', rules: key }, organization);\n\n    const totalItem = (\n      <span className=\"little-spacer-left\">\n        {'('}\n        <Link to={path}>{total}</Link>\n        {')'}\n      </span>\n    );\n\n    if (!this.props.appState.branchesEnabled) {\n      return totalItem;\n    }\n\n    return (\n      <Tooltip overlay={translate('coding_rules.issues.only_main_branches')}>{totalItem}</Tooltip>\n    );\n  };\n\n  renderProject = (project: Project) => {\n    const {\n      ruleDetails: { key },\n      organization\n    } = this.props;\n\n    const path = getIssuesUrl(\n      { resolved: 'false', rules: key, projects: project.key },\n      organization\n    );\n    return (\n      <tr key={project.key}>\n        <td className=\"coding-rules-detail-list-name\">{project.name}</td>\n        <td className=\"coding-rules-detail-list-parameters\">\n          <Link to={path}>{formatMeasure(project.count, 'INT')}</Link>\n        </td>\n      </tr>\n    );\n  };\n\n  render() {\n    const { loading, projects = [] } = this.state;\n\n    return (\n      <div className=\"js-rule-issues coding-rule-section\">\n        <div className=\"coding-rule-section-separator\" />\n\n        <DeferredSpinner loading={loading}>\n          <h3 className=\"coding-rules-detail-title\">\n            {translate('coding_rules.issues')}\n            {this.renderTotal()}\n          </h3>\n\n          {projects.length > 0 && (\n            <table className=\"coding-rules-detail-list coding-rules-most-violated-projects\">\n              <tbody>\n                <tr>\n                  <td className=\"coding-rules-detail-list-name\" colSpan={2}>\n                    {translate('coding_rules.most_violating_projects')}\n                  </td>\n                </tr>\n                {projects.map(this.renderProject)}\n              </tbody>\n            </table>\n          )}\n        </DeferredSpinner>\n      </div>\n    );\n  }\n}\n\nexport default withAppState(RuleDetailsIssues);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  params: T.RuleParameter[];\n}\n\nexport default class RuleDetailsParameters extends React.PureComponent<Props> {\n  renderParameter = (param: T.RuleParameter) => (\n    <tr className=\"coding-rules-detail-parameter\" key={param.key}>\n      <td className=\"coding-rules-detail-parameter-name\">{param.key}</td>\n      <td className=\"coding-rules-detail-parameter-description\">\n        <p // Safe: defined by rule creator (instance admin?)\n          dangerouslySetInnerHTML={{ __html: param.htmlDesc || '' }}\n        />\n        {param.defaultValue !== undefined && (\n          <div className=\"note spacer-top\">\n            {translate('coding_rules.parameters.default_value')}\n            <br />\n            <span className=\"coding-rules-detail-parameter-value\">{param.defaultValue}</span>\n          </div>\n        )}\n      </td>\n    </tr>\n  );\n\n  render() {\n    return (\n      <div className=\"js-rule-parameters\">\n        <h3 className=\"coding-rules-detail-title\">{translate('coding_rules.parameters')}</h3>\n        <table className=\"coding-rules-detail-parameters\">\n          <tbody>{this.props.params.map(this.renderParameter)}</tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { Profile as BaseProfile } from '../../../api/quality-profiles';\nimport ActivationFormModal from './ActivationFormModal';\n\ninterface Props {\n  activation?: T.RuleActivation;\n  buttonText: string;\n  className?: string;\n  modalHeader: string;\n  onDone: (severity: string) => Promise<void>;\n  organization: string | undefined;\n  profiles: BaseProfile[];\n  rule: T.Rule | T.RuleDetails;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class ActivationButton extends React.PureComponent<Props, State> {\n  state: State = { modal: false };\n\n  handleButtonClick = () => {\n    this.setState({ modal: true });\n  };\n\n  handleCloseModal = () => {\n    this.setState({ modal: false });\n  };\n\n  render() {\n    return (\n      <>\n        <Button\n          className={this.props.className}\n          id=\"coding-rules-quality-profile-activate\"\n          onClick={this.handleButtonClick}>\n          {this.props.buttonText}\n        </Button>\n\n        {this.state.modal && (\n          <ActivationFormModal\n            activation={this.props.activation}\n            modalHeader={this.props.modalHeader}\n            onClose={this.handleCloseModal}\n            onDone={this.props.onDone}\n            organization={this.props.organization}\n            profiles={this.props.profiles}\n            rule={this.props.rule}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { colors } from '../../../app/theme';\n\ninterface Props {\n  className?: string;\n  inheritance: T.RuleInheritance;\n}\n\nexport default function RuleInheritanceIcon({ className, inheritance, ...other }: Props) {\n  const fill = inheritance === 'OVERRIDES' ? colors.red : colors.baseFontColor;\n\n  return (\n    <svg\n      className={className}\n      height={16}\n      version=\"1.1\"\n      viewBox=\"0 0 16 16\"\n      width={16}\n      xmlSpace=\"preserve\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      {...other}>\n      <path\n        d=\"M6.25 12.5a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0zm0-9a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0zm5 1a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0zm.75 0a1.5 1.5 0 0 1-.75 1.297c-.023 2.82-2.023 3.445-3.352 3.867-1.242.39-1.648.578-1.648 1.336v.203A1.5 1.5 0 1 1 4 12.5a1.5 1.5 0 0 1 .75-1.297V4.797A1.5 1.5 0 1 1 7 3.5a1.5 1.5 0 0 1-.75 1.297V8.68c.398-.196.82-.328 1.203-.446 1.453-.46 2.281-.804 2.297-2.437A1.5 1.5 0 1 1 12 4.5z\"\n        style={{ fill, fillRule: 'nonzero' }}\n      />\n    </svg>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { filter } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ConfirmButton from 'sonar-ui-common/components/controls/ConfirmButton';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { activateRule, deactivateRule, Profile } from '../../../api/quality-profiles';\nimport InstanceMessage from '../../../components/common/InstanceMessage';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { getQualityProfileUrl } from '../../../helpers/urls';\nimport BuiltInQualityProfileBadge from '../../quality-profiles/components/BuiltInQualityProfileBadge';\nimport ActivationButton from './ActivationButton';\nimport RuleInheritanceIcon from './RuleInheritanceIcon';\n\ninterface Props {\n  activations: T.RuleActivation[] | undefined;\n  canWrite: boolean | undefined;\n  onActivate: () => Promise<void>;\n  onDeactivate: () => Promise<void>;\n  organization: string | undefined;\n  referencedProfiles: T.Dict<Profile>;\n  ruleDetails: T.RuleDetails;\n}\n\nexport default class RuleDetailsProfiles extends React.PureComponent<Props> {\n  handleActivate = () => this.props.onActivate();\n\n  handleDeactivate = (key?: string) => {\n    if (key) {\n      deactivateRule({\n        key,\n        organization: this.props.organization,\n        rule: this.props.ruleDetails.key\n      }).then(this.props.onDeactivate, () => {});\n    }\n  };\n\n  handleRevert = (key?: string) => {\n    if (key) {\n      activateRule({\n        key,\n        organization: this.props.organization,\n        rule: this.props.ruleDetails.key,\n        reset: true\n      }).then(this.props.onActivate, () => {});\n    }\n  };\n\n  renderInheritedProfile = (activation: T.RuleActivation, profile: Profile) => {\n    if (!profile.parentName) {\n      return null;\n    }\n    const profilePath = getQualityProfileUrl(\n      profile.parentName,\n      profile.language,\n      this.props.organization\n    );\n    return (\n      <div className=\"coding-rules-detail-quality-profile-inheritance\">\n        {(activation.inherit === 'OVERRIDES' || activation.inherit === 'INHERITED') && (\n          <>\n            <RuleInheritanceIcon className=\"text-middle\" inheritance={activation.inherit} />\n            <Link className=\"link-base-color little-spacer-left text-middle\" to={profilePath}>\n              {profile.parentName}\n            </Link>\n          </>\n        )}\n      </div>\n    );\n  };\n\n  renderSeverity = (activation: T.RuleActivation, parentActivation?: T.RuleActivation) => (\n    <td className=\"coding-rules-detail-quality-profile-severity\">\n      <Tooltip overlay={translate('coding_rules.activation_severity')}>\n        <span>\n          <SeverityHelper className=\"display-inline-flex-center\" severity={activation.severity} />\n        </span>\n      </Tooltip>\n      {parentActivation !== undefined && activation.severity !== parentActivation.severity && (\n        <div className=\"coding-rules-detail-quality-profile-inheritance\">\n          {translate('coding_rules.original')} {translate('severity', parentActivation.severity)}\n        </div>\n      )}\n    </td>\n  );\n\n  renderParameter = (\n    param: { key: string; value: string },\n    parentActivation?: T.RuleActivation\n  ) => {\n    const originalParam =\n      parentActivation && parentActivation.params.find(p => p.key === param.key);\n    const originalValue = originalParam && originalParam.value;\n\n    return (\n      <div className=\"coding-rules-detail-quality-profile-parameter\" key={param.key}>\n        <span className=\"key\">{param.key}</span>\n        <span className=\"sep\">: </span>\n        <span className=\"value\" title={param.value}>\n          {param.value}\n        </span>\n        {parentActivation && param.value !== originalValue && (\n          <div className=\"coding-rules-detail-quality-profile-inheritance\">\n            {translate('coding_rules.original')} <span className=\"value\">{originalValue}</span>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  renderParameters = (activation: T.RuleActivation, parentActivation?: T.RuleActivation) => (\n    <td className=\"coding-rules-detail-quality-profile-parameters\">\n      {activation.params.map(param => this.renderParameter(param, parentActivation))}\n    </td>\n  );\n\n  renderActions = (activation: T.RuleActivation, profile: Profile) => {\n    const canEdit = profile.actions && profile.actions.edit && !profile.isBuiltIn;\n    const { ruleDetails } = this.props;\n    const hasParent = activation.inherit !== 'NONE' && profile.parentKey;\n    return (\n      <td className=\"coding-rules-detail-quality-profile-actions\">\n        {canEdit && (\n          <>\n            {!ruleDetails.isTemplate && (\n              <ActivationButton\n                activation={activation}\n                buttonText={translate('change_verb')}\n                className=\"coding-rules-detail-quality-profile-change\"\n                modalHeader={translate('coding_rules.change_details')}\n                onDone={this.handleActivate}\n                organization={this.props.organization}\n                profiles={[profile]}\n                rule={ruleDetails}\n              />\n            )}\n            {hasParent ? (\n              activation.inherit === 'OVERRIDES' &&\n              profile.parentName && (\n                <ConfirmButton\n                  confirmButtonText={translate('yes')}\n                  confirmData={profile.key}\n                  modalBody={translateWithParameters(\n                    'coding_rules.revert_to_parent_definition.confirm',\n                    profile.parentName\n                  )}\n                  modalHeader={translate('coding_rules.revert_to_parent_definition')}\n                  onConfirm={this.handleRevert}>\n                  {({ onClick }) => (\n                    <Button\n                      className=\"coding-rules-detail-quality-profile-revert button-red spacer-left\"\n                      onClick={onClick}>\n                      {translate('coding_rules.revert_to_parent_definition')}\n                    </Button>\n                  )}\n                </ConfirmButton>\n              )\n            ) : (\n              <ConfirmButton\n                confirmButtonText={translate('yes')}\n                confirmData={profile.key}\n                modalBody={translate('coding_rules.deactivate.confirm')}\n                modalHeader={translate('coding_rules.deactivate')}\n                onConfirm={this.handleDeactivate}>\n                {({ onClick }) => (\n                  <Button\n                    className=\"coding-rules-detail-quality-profile-deactivate button-red spacer-left\"\n                    onClick={onClick}>\n                    {translate('coding_rules.deactivate')}\n                  </Button>\n                )}\n              </ConfirmButton>\n            )}\n          </>\n        )}\n      </td>\n    );\n  };\n\n  renderActivation = (activation: T.RuleActivation) => {\n    const { activations = [], ruleDetails } = this.props;\n    const profile = this.props.referencedProfiles[activation.qProfile];\n    if (!profile) {\n      return null;\n    }\n\n    const parentActivation = activations.find(x => x.qProfile === profile.parentKey);\n\n    return (\n      <tr data-profile={profile.key} key={profile.key}>\n        <td className=\"coding-rules-detail-quality-profile-name\">\n          <Link to={getQualityProfileUrl(profile.name, profile.language, this.props.organization)}>\n            {profile.name}\n          </Link>\n          {profile.isBuiltIn && <BuiltInQualityProfileBadge className=\"spacer-left\" />}\n          {this.renderInheritedProfile(activation, profile)}\n        </td>\n\n        {this.renderSeverity(activation, parentActivation)}\n        {!ruleDetails.templateKey && this.renderParameters(activation, parentActivation)}\n        {this.renderActions(activation, profile)}\n      </tr>\n    );\n  };\n\n  render() {\n    const { activations = [], referencedProfiles, ruleDetails } = this.props;\n    const canActivate = Object.values(referencedProfiles).some(profile =>\n      Boolean(profile.actions && profile.actions.edit && profile.language === ruleDetails.lang)\n    );\n\n    return (\n      <div className=\"js-rule-profiles coding-rule-section\">\n        <div className=\"coding-rules-detail-quality-profiles-section\">\n          <div className=\"coding-rule-section-separator\" />\n\n          <h3 className=\"coding-rules-detail-title\">\n            <InstanceMessage message={translate('coding_rules.quality_profiles')} />\n          </h3>\n\n          {canActivate && (\n            <ActivationButton\n              buttonText={translate('coding_rules.activate')}\n              className=\"coding-rules-quality-profile-activate spacer-left\"\n              modalHeader={translate('coding_rules.activate_in_quality_profile')}\n              onDone={this.handleActivate}\n              organization={this.props.organization}\n              profiles={filter(\n                this.props.referencedProfiles,\n                profile => !activations.find(activation => activation.qProfile === profile.key)\n              )}\n              rule={ruleDetails}\n            />\n          )}\n\n          {activations.length > 0 && (\n            <table\n              className=\"coding-rules-detail-quality-profiles width-100\"\n              id=\"coding-rules-detail-quality-profiles\">\n              <tbody>{activations.map(this.renderActivation)}</tbody>\n            </table>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ConfirmButton from 'sonar-ui-common/components/controls/ConfirmButton';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { Profile } from '../../../api/quality-profiles';\nimport { deleteRule, getRuleDetails, updateRule } from '../../../api/rules';\nimport DocTooltip from '../../../components/docs/DocTooltip';\nimport { Activation, Query } from '../query';\nimport CustomRuleButton from './CustomRuleButton';\nimport RuleDetailsCustomRules from './RuleDetailsCustomRules';\nimport RuleDetailsDescription from './RuleDetailsDescription';\nimport RuleDetailsIssues from './RuleDetailsIssues';\nimport RuleDetailsMeta from './RuleDetailsMeta';\nimport RuleDetailsParameters from './RuleDetailsParameters';\nimport RuleDetailsProfiles from './RuleDetailsProfiles';\n\ninterface Props {\n  allowCustomRules?: boolean;\n  canWrite?: boolean;\n  hideQualityProfiles?: boolean;\n  onActivate: (profile: string, rule: string, activation: Activation) => void;\n  onDeactivate: (profile: string, rule: string) => void;\n  onDelete: (rule: string) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  organization: string | undefined;\n  referencedProfiles: T.Dict<Profile>;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  ruleKey: string;\n  selectedProfile?: Profile;\n}\n\ninterface State {\n  actives?: T.RuleActivation[];\n  loading: boolean;\n  ruleDetails?: T.RuleDetails;\n}\n\nexport default class RuleDetails extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.setState({ loading: true });\n    this.fetchRuleDetails();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.ruleKey !== this.props.ruleKey) {\n      this.setState({ loading: true });\n      this.fetchRuleDetails();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchRuleDetails = () => {\n    return getRuleDetails({\n      actives: true,\n      key: this.props.ruleKey,\n      organization: this.props.organization\n    }).then(\n      ({ actives, rule }) => {\n        if (this.mounted) {\n          this.setState({ actives, loading: false, ruleDetails: rule });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleRuleChange = (ruleDetails: T.RuleDetails) => {\n    if (this.mounted) {\n      this.setState({ ruleDetails });\n    }\n  };\n\n  handleTagsChange = (tags: string[]) => {\n    // optimistic update\n    const oldTags = this.state.ruleDetails && this.state.ruleDetails.tags;\n    this.setState(state =>\n      state.ruleDetails ? { ruleDetails: { ...state.ruleDetails, tags } } : null\n    );\n    updateRule({\n      key: this.props.ruleKey,\n      organization: this.props.organization,\n      tags: tags.join()\n    }).catch(() => {\n      if (this.mounted) {\n        this.setState(state =>\n          state.ruleDetails ? { ruleDetails: { ...state.ruleDetails, tags: oldTags } } : null\n        );\n      }\n    });\n  };\n\n  handleActivate = () => {\n    return this.fetchRuleDetails().then(() => {\n      const { ruleKey, selectedProfile } = this.props;\n      if (selectedProfile && this.state.actives) {\n        const active = this.state.actives.find(active => active.qProfile === selectedProfile.key);\n        if (active) {\n          this.props.onActivate(selectedProfile.key, ruleKey, active);\n        }\n      }\n    });\n  };\n\n  handleDeactivate = () => {\n    return this.fetchRuleDetails().then(() => {\n      const { ruleKey, selectedProfile } = this.props;\n      if (\n        selectedProfile &&\n        this.state.actives &&\n        !this.state.actives.find(active => active.qProfile === selectedProfile.key)\n      ) {\n        this.props.onDeactivate(selectedProfile.key, ruleKey);\n      }\n    });\n  };\n\n  handleDelete = () => {\n    return deleteRule({ key: this.props.ruleKey, organization: this.props.organization }).then(() =>\n      this.props.onDelete(this.props.ruleKey)\n    );\n  };\n\n  render() {\n    const { ruleDetails } = this.state;\n\n    if (!ruleDetails) {\n      return <div className=\"coding-rule-details\" />;\n    }\n\n    const {\n      allowCustomRules,\n      canWrite,\n      hideQualityProfiles,\n      organization,\n      referencedProfiles\n    } = this.props;\n    const { params = [] } = ruleDetails;\n\n    const isCustom = !!ruleDetails.templateKey;\n    const isEditable = canWrite && !!this.props.allowCustomRules && isCustom;\n\n    return (\n      <div className=\"coding-rule-details\">\n        <DeferredSpinner loading={this.state.loading}>\n          <RuleDetailsMeta\n            canWrite={canWrite}\n            onFilterChange={this.props.onFilterChange}\n            onTagsChange={this.handleTagsChange}\n            organization={organization}\n            referencedRepositories={this.props.referencedRepositories}\n            ruleDetails={ruleDetails}\n          />\n\n          <RuleDetailsDescription\n            canWrite={canWrite}\n            onChange={this.handleRuleChange}\n            organization={organization}\n            ruleDetails={ruleDetails}\n          />\n\n          {params.length > 0 && <RuleDetailsParameters params={params} />}\n\n          {isEditable && (\n            <div className=\"coding-rules-detail-description display-flex-center\">\n              {/* `templateRule` is used to get rule meta data, `customRule` is used to get parameter values */}\n              {/* it's expected to pass the same rule to both parameters */}\n              <CustomRuleButton\n                customRule={ruleDetails}\n                onDone={this.handleRuleChange}\n                organization={organization}\n                templateRule={ruleDetails}>\n                {({ onClick }) => (\n                  <Button\n                    className=\"js-edit-custom\"\n                    id=\"coding-rules-detail-custom-rule-change\"\n                    onClick={onClick}>\n                    {translate('edit')}\n                  </Button>\n                )}\n              </CustomRuleButton>\n              <ConfirmButton\n                confirmButtonText={translate('delete')}\n                isDestructive={true}\n                modalBody={translateWithParameters(\n                  'coding_rules.delete.custom.confirm',\n                  ruleDetails.name\n                )}\n                modalHeader={translate('coding_rules.delete_rule')}\n                onConfirm={this.handleDelete}>\n                {({ onClick }) => (\n                  <>\n                    <Button\n                      className=\"button-red spacer-left js-delete\"\n                      id=\"coding-rules-detail-rule-delete\"\n                      onClick={onClick}>\n                      {translate('delete')}\n                    </Button>\n                    <DocTooltip\n                      className=\"spacer-left\"\n                      doc={import(\n                        /* webpackMode: \"eager\" */ 'Docs/tooltips/rules/custom-rule-removal.md'\n                      )}\n                    />\n                  </>\n                )}\n              </ConfirmButton>\n            </div>\n          )}\n\n          {ruleDetails.isTemplate && (\n            <RuleDetailsCustomRules\n              canChange={allowCustomRules && canWrite}\n              organization={organization}\n              ruleDetails={ruleDetails}\n            />\n          )}\n\n          {!ruleDetails.isTemplate && !hideQualityProfiles && (\n            <RuleDetailsProfiles\n              activations={this.state.actives}\n              canWrite={canWrite}\n              onActivate={this.handleActivate}\n              onDeactivate={this.handleDeactivate}\n              organization={organization}\n              referencedProfiles={referencedProfiles}\n              ruleDetails={ruleDetails}\n            />\n          )}\n\n          {!ruleDetails.isTemplate && ruleDetails.type !== 'SECURITY_HOTSPOT' && (\n            <RuleDetailsIssues organization={organization} ruleDetails={ruleDetails} />\n          )}\n        </DeferredSpinner>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ConfirmButton from 'sonar-ui-common/components/controls/ConfirmButton';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { deactivateRule, Profile } from '../../../api/quality-profiles';\nimport TagsList from '../../../components/tags/TagsList';\nimport { getRuleUrl } from '../../../helpers/urls';\nimport { Activation, Query } from '../query';\nimport ActivationButton from './ActivationButton';\nimport RuleInheritanceIcon from './RuleInheritanceIcon';\nimport SimilarRulesFilter from './SimilarRulesFilter';\n\ninterface Props {\n  activation?: Activation;\n  canWrite?: boolean;\n  isLoggedIn: boolean;\n  onActivate: (profile: string, rule: string, activation: Activation) => void;\n  onDeactivate: (profile: string, rule: string) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  onOpen: (ruleKey: string) => void;\n  organization: string | undefined;\n  rule: T.Rule;\n  selected: boolean;\n  selectedProfile?: Profile;\n}\n\nexport default class RuleListItem extends React.PureComponent<Props> {\n  handleDeactivate = () => {\n    if (this.props.selectedProfile) {\n      const data = {\n        key: this.props.selectedProfile.key,\n        organization: this.props.organization,\n        rule: this.props.rule.key\n      };\n      deactivateRule(data).then(\n        () => this.props.onDeactivate(data.key, data.rule),\n        () => {}\n      );\n    }\n  };\n\n  handleActivate = (severity: string) => {\n    if (this.props.selectedProfile) {\n      this.props.onActivate(this.props.selectedProfile.key, this.props.rule.key, {\n        severity,\n        inherit: 'NONE'\n      });\n    }\n    return Promise.resolve();\n  };\n\n  handleNameClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    // cmd(ctrl) + click should open a rule permalink in a new tab\n    const isLeftClickEvent = event.button === 0;\n    const isModifiedEvent = !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n    if (isModifiedEvent || !isLeftClickEvent) {\n      return;\n    }\n\n    event.preventDefault();\n    this.props.onOpen(this.props.rule.key);\n  };\n\n  renderActivation = () => {\n    const { activation, selectedProfile } = this.props;\n    if (!activation) {\n      return null;\n    }\n\n    return (\n      <td className=\"coding-rule-table-meta-cell coding-rule-activation\">\n        <SeverityIcon severity={activation.severity} />\n        {selectedProfile && selectedProfile.parentName && (\n          <>\n            {activation.inherit === 'OVERRIDES' && (\n              <Tooltip\n                overlay={translateWithParameters(\n                  'coding_rules.overrides',\n                  selectedProfile.name,\n                  selectedProfile.parentName\n                )}>\n                <RuleInheritanceIcon\n                  className=\"little-spacer-left\"\n                  inheritance={activation.inherit}\n                />\n              </Tooltip>\n            )}\n            {activation.inherit === 'INHERITED' && (\n              <Tooltip\n                overlay={translateWithParameters(\n                  'coding_rules.inherits',\n                  selectedProfile.name,\n                  selectedProfile.parentName\n                )}>\n                <RuleInheritanceIcon\n                  className=\"little-spacer-left\"\n                  inheritance={activation.inherit}\n                />\n              </Tooltip>\n            )}\n          </>\n        )}\n      </td>\n    );\n  };\n\n  renderActions = () => {\n    const { activation, isLoggedIn, rule, selectedProfile } = this.props;\n    if (!selectedProfile || !isLoggedIn) {\n      return null;\n    }\n\n    const canCopy = selectedProfile.actions && selectedProfile.actions.copy;\n    if (selectedProfile.isBuiltIn && canCopy) {\n      return (\n        <td className=\"coding-rule-table-meta-cell coding-rule-activation-actions\">\n          {this.renderDeactivateButton('', 'coding_rules.need_extend_or_copy')}\n        </td>\n      );\n    }\n\n    const canEdit = selectedProfile.actions && selectedProfile.actions.edit;\n    if (!canEdit) {\n      return null;\n    }\n\n    return (\n      <td className=\"coding-rule-table-meta-cell coding-rule-activation-actions\">\n        {activation\n          ? this.renderDeactivateButton(activation.inherit)\n          : !rule.isTemplate && (\n              <ActivationButton\n                buttonText={translate('coding_rules.activate')}\n                className=\"coding-rules-detail-quality-profile-activate\"\n                modalHeader={translate('coding_rules.activate_in_quality_profile')}\n                onDone={this.handleActivate}\n                organization={this.props.organization}\n                profiles={[selectedProfile]}\n                rule={rule}\n              />\n            )}\n      </td>\n    );\n  };\n\n  renderDeactivateButton = (\n    inherit: string,\n    overlayTranslationKey = 'coding_rules.can_not_deactivate'\n  ) => {\n    return inherit === 'NONE' ? (\n      <ConfirmButton\n        confirmButtonText={translate('yes')}\n        modalBody={translate('coding_rules.deactivate.confirm')}\n        modalHeader={translate('coding_rules.deactivate')}\n        onConfirm={this.handleDeactivate}>\n        {({ onClick }) => (\n          <Button\n            className=\"coding-rules-detail-quality-profile-deactivate button-red\"\n            onClick={onClick}>\n            {translate('coding_rules.deactivate')}\n          </Button>\n        )}\n      </ConfirmButton>\n    ) : (\n      <Tooltip overlay={translate(overlayTranslationKey)}>\n        <Button\n          className=\"coding-rules-detail-quality-profile-deactivate button-red\"\n          disabled={true}>\n          {translate('coding_rules.deactivate')}\n        </Button>\n      </Tooltip>\n    );\n  };\n\n  render() {\n    const { rule, selected } = this.props;\n    const allTags = [...(rule.tags || []), ...(rule.sysTags || [])];\n    return (\n      <div className={classNames('coding-rule', { selected })} data-rule={rule.key}>\n        <table className=\"coding-rule-table\">\n          <tbody>\n            <tr>\n              {this.renderActivation()}\n\n              <td>\n                <div className=\"coding-rule-title\">\n                  <Link\n                    className=\"link-no-underline\"\n                    onClick={this.handleNameClick}\n                    to={getRuleUrl(rule.key, this.props.organization)}>\n                    {rule.name}\n                  </Link>\n                  {rule.isTemplate && (\n                    <Tooltip overlay={translate('coding_rules.rule_template.title')}>\n                      <span className=\"badge spacer-left\">\n                        {translate('coding_rules.rule_template')}\n                      </span>\n                    </Tooltip>\n                  )}\n                </div>\n              </td>\n\n              <td className=\"coding-rule-table-meta-cell\">\n                <div className=\"display-flex-center coding-rule-meta\">\n                  {rule.status !== 'READY' && (\n                    <span className=\"spacer-left badge badge-error\">\n                      {translate('rules.status', rule.status)}\n                    </span>\n                  )}\n                  <span className=\"display-inline-flex-center spacer-left note\">\n                    {rule.langName}\n                  </span>\n                  <Tooltip overlay={translate('coding_rules.type.tooltip', rule.type)}>\n                    <span className=\"display-inline-flex-center spacer-left note\">\n                      <IssueTypeIcon query={rule.type} />\n                      <span className=\"little-spacer-left text-middle\">\n                        {translate('issue.type', rule.type)}\n                      </span>\n                    </span>\n                  </Tooltip>\n                  {allTags.length > 0 && (\n                    <TagsList\n                      allowUpdate={false}\n                      className=\"display-inline-flex-center note spacer-left\"\n                      tags={allTags}\n                    />\n                  )}\n                  <SimilarRulesFilter onFilterChange={this.props.onFilterChange} rule={rule} />\n                </div>\n              </td>\n\n              {this.renderActions()}\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as key from 'keymaster';\nimport { keyBy } from 'lodash';\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { connect } from 'react-redux';\nimport { withRouter, WithRouterProps } from 'react-router';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport BackIcon from 'sonar-ui-common/components/icons/BackIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  addSideBarClass,\n  addWhitePageClass,\n  removeSideBarClass,\n  removeWhitePageClass\n} from 'sonar-ui-common/helpers/pages';\nimport { scrollToElement } from 'sonar-ui-common/helpers/scrolling';\nimport { Profile, searchQualityProfiles } from '../../../api/quality-profiles';\nimport { getRulesApp, searchRules } from '../../../api/rules';\nimport A11ySkipTarget from '../../../app/components/a11y/A11ySkipTarget';\nimport Suggestions from '../../../app/components/embed-docs-modal/Suggestions';\nimport FiltersHeader from '../../../components/common/FiltersHeader';\nimport ScreenPositionHelper from '../../../components/common/ScreenPositionHelper';\nimport '../../../components/search-navigator.css';\nimport { hasPrivateAccess } from '../../../helpers/organizations';\nimport { isSonarCloud } from '../../../helpers/system';\nimport { isLoggedIn } from '../../../helpers/users';\nimport {\n  getAppState,\n  getCurrentUser,\n  getLanguages,\n  getMyOrganizations,\n  Store\n} from '../../../store/rootReducer';\nimport {\n  shouldOpenSonarSourceSecurityFacet,\n  shouldOpenStandardsChildFacet,\n  shouldOpenStandardsFacet,\n  STANDARDS\n} from '../../issues/utils';\nimport {\n  Activation,\n  Actives,\n  areQueriesEqual,\n  FacetKey,\n  Facets,\n  getAppFacet,\n  getOpen,\n  getServerFacet,\n  hasRuleKey,\n  OpenFacets,\n  parseQuery,\n  Query,\n  serializeQuery,\n  shouldRequestFacet\n} from '../query';\nimport '../styles.css';\nimport BulkChange from './BulkChange';\nimport FacetsList from './FacetsList';\nimport PageActions from './PageActions';\nimport RuleDetails from './RuleDetails';\nimport RuleListItem from './RuleListItem';\n\nconst PAGE_SIZE = 100;\nconst LIMIT_BEFORE_LOAD_MORE = 5;\n\ninterface StateToProps {\n  appState: T.AppState;\n  currentUser: T.CurrentUser;\n  languages: T.Languages;\n  userOrganizations: T.Organization[];\n}\n\ninterface OwnProps extends WithRouterProps {\n  organization: T.Organization | undefined;\n}\n\ntype Props = OwnProps & StateToProps;\n\ninterface State {\n  actives?: Actives;\n  canWrite?: boolean;\n  facets?: Facets;\n  loading: boolean;\n  openFacets: OpenFacets;\n  openRule?: T.Rule;\n  paging?: T.Paging;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  rules: T.Rule[];\n  selected?: string;\n  usingPermalink?: boolean;\n}\n\nexport class App extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    const query = parseQuery(props.location.query);\n    this.state = {\n      loading: true,\n      openFacets: {\n        languages: true,\n        owaspTop10: shouldOpenStandardsChildFacet({}, query, 'owaspTop10'),\n        sansTop25: shouldOpenStandardsChildFacet({}, query, 'sansTop25'),\n        sonarsourceSecurity: shouldOpenSonarSourceSecurityFacet({}, query),\n        standards: shouldOpenStandardsFacet({}, query),\n        types: true\n      },\n      query,\n      referencedProfiles: {},\n      referencedRepositories: {},\n      rules: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    addWhitePageClass();\n    addSideBarClass();\n    this.attachShortcuts();\n    this.fetchInitialData();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    this.setState(({ rules, selected }) => {\n      const openRule = this.getOpenRule(nextProps, rules);\n      return {\n        openRule,\n        usingPermalink: hasRuleKey(nextProps.location.query),\n        query: parseQuery(nextProps.location.query),\n        selected: openRule ? openRule.key : selected\n      };\n    });\n  }\n\n  componentDidUpdate(prevProps: Props, prevState: State) {\n    if (!areQueriesEqual(prevProps.location.query, this.props.location.query)) {\n      this.fetchFirstRules();\n    }\n    if (\n      !this.state.openRule &&\n      (prevState.selected !== this.state.selected || prevState.openRule)\n    ) {\n      // if user simply selected another issue\n      // or if he went from the source code back to the list of issues\n      this.scrollToSelectedRule();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    removeWhitePageClass();\n    removeSideBarClass();\n    this.detachShortcuts();\n  }\n\n  attachShortcuts = () => {\n    key.setScope('coding-rules');\n    key('up', 'coding-rules', () => {\n      this.selectPreviousRule();\n      return false;\n    });\n    key('down', 'coding-rules', () => {\n      this.selectNextRule();\n      return false;\n    });\n    key('right', 'coding-rules', () => {\n      this.openSelectedRule();\n      return false;\n    });\n    key('left', 'coding-rules', () => {\n      this.handleBack();\n      return false;\n    });\n  };\n\n  detachShortcuts = () => key.deleteScope('coding-rules');\n\n  getOpenRule = (props: Props, rules: T.Rule[]) => {\n    const open = getOpen(props.location.query);\n    return open && rules.find(rule => rule.key === open);\n  };\n\n  getFacetsToFetch = () => {\n    const { openFacets } = this.state;\n    return Object.keys(openFacets)\n      .filter((facet: FacetKey) => openFacets[facet])\n      .filter((facet: FacetKey) => shouldRequestFacet(facet))\n      .map((facet: FacetKey) => getServerFacet(facet));\n  };\n\n  getFieldsToFetch = () => {\n    const fields = [\n      'isTemplate',\n      'name',\n      'lang',\n      'langName',\n      'severity',\n      'status',\n      'sysTags',\n      'tags',\n      'templateKey'\n    ];\n    if (this.state.query.profile) {\n      fields.push('actives', 'params');\n    }\n    return fields;\n  };\n\n  getSearchParameters = () => ({\n    f: this.getFieldsToFetch().join(),\n    facets: this.getFacetsToFetch().join(),\n    organization: this.props.organization && this.props.organization.key,\n    ps: PAGE_SIZE,\n    s: 'name',\n    ...serializeQuery(this.state.query)\n  });\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  fetchInitialData = () => {\n    this.setState({ loading: true });\n    const organization = this.props.organization && this.props.organization.key;\n    Promise.all([getRulesApp({ organization }), this.fetchQualityProfiles()]).then(\n      ([{ canWrite, repositories }, { profiles }]) => {\n        this.setState({\n          canWrite,\n          referencedProfiles: keyBy(profiles, 'key'),\n          referencedRepositories: keyBy(repositories, 'key')\n        });\n        this.fetchFirstRules();\n      },\n      this.stopLoading\n    );\n  };\n\n  makeFetchRequest = (query?: T.RawQuery) =>\n    searchRules({ ...this.getSearchParameters(), ...query }).then(\n      ({ actives: rawActives, facets: rawFacets, p, ps, rules, total }) => {\n        const actives = rawActives && parseActives(rawActives);\n        const facets = rawFacets && parseFacets(rawFacets);\n        const paging = { pageIndex: p, pageSize: ps, total };\n        return { actives, facets, paging, rules };\n      }\n    );\n\n  fetchFirstRules = (query?: T.RawQuery) => {\n    this.setState({ loading: true });\n    this.makeFetchRequest(query).then(({ actives, facets, paging, rules }) => {\n      if (this.mounted) {\n        const openRule = this.getOpenRule(this.props, rules);\n        const usingPermalink = hasRuleKey(this.props.location.query);\n        const selected = rules.length > 0 ? (openRule && openRule.key) || rules[0].key : undefined;\n        this.setState({\n          actives,\n          facets,\n          loading: false,\n          openRule,\n          paging,\n          rules,\n          selected,\n          usingPermalink\n        });\n      }\n    }, this.stopLoading);\n  };\n\n  fetchMoreRules = () => {\n    const { paging } = this.state;\n    if (paging) {\n      this.setState({ loading: true });\n      const nextPage = paging.pageIndex + 1;\n      this.makeFetchRequest({ p: nextPage, facets: undefined }).then(\n        ({ actives, paging, rules }) => {\n          if (this.mounted) {\n            this.setState((state: State) => ({\n              actives: { ...state.actives, ...actives },\n              loading: false,\n              paging,\n              rules: [...state.rules, ...rules]\n            }));\n          }\n        },\n        this.stopLoading\n      );\n    }\n  };\n\n  fetchFacet = (facet: FacetKey) => {\n    this.makeFetchRequest({ ps: 1, facets: getServerFacet(facet) }).then(({ facets }) => {\n      if (this.mounted) {\n        this.setState(state => ({ facets: { ...state.facets, ...facets }, loading: false }));\n      }\n    }, this.stopLoading);\n  };\n\n  fetchQualityProfiles = () => {\n    const { currentUser, organization, userOrganizations } = this.props;\n    if (hasPrivateAccess(currentUser, organization, userOrganizations)) {\n      return searchQualityProfiles({ organization: organization && organization.key });\n    }\n    return { profiles: [] };\n  };\n\n  getSelectedIndex = ({ selected, rules } = this.state) => {\n    const index = rules.findIndex(rule => rule.key === selected);\n    return index !== -1 ? index : undefined;\n  };\n\n  selectNextRule = () => {\n    const { rules, loading, paging } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    if (selectedIndex !== undefined) {\n      if (\n        selectedIndex > rules.length - LIMIT_BEFORE_LOAD_MORE &&\n        !loading &&\n        paging &&\n        rules.length < paging.total\n      ) {\n        this.fetchMoreRules();\n      }\n      if (rules && selectedIndex < rules.length - 1) {\n        if (this.state.openRule) {\n          this.openRule(rules[selectedIndex + 1].key);\n        } else {\n          this.setState({ selected: rules[selectedIndex + 1].key });\n        }\n      }\n    }\n  };\n\n  selectPreviousRule = () => {\n    const { rules } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    if (rules && selectedIndex !== undefined && selectedIndex > 0) {\n      if (this.state.openRule) {\n        this.openRule(rules[selectedIndex - 1].key);\n      } else {\n        this.setState({ selected: rules[selectedIndex - 1].key });\n      }\n    }\n  };\n\n  getRulePath = (rule: string) => ({\n    pathname: this.props.location.pathname,\n    query: { ...serializeQuery(this.state.query), open: rule }\n  });\n\n  openRule = (rule: string) => {\n    const path = this.getRulePath(rule);\n    if (this.state.openRule) {\n      this.props.router.replace(path);\n    } else {\n      this.props.router.push(path);\n    }\n  };\n\n  openSelectedRule = () => {\n    const { selected } = this.state;\n    if (selected) {\n      this.openRule(selected);\n    }\n  };\n\n  closeRule = () => {\n    this.props.router.push({\n      pathname: this.props.location.pathname,\n      query: {\n        ...serializeQuery(this.state.query),\n        open: undefined\n      }\n    });\n    this.scrollToSelectedRule(false);\n  };\n\n  scrollToSelectedRule = (smooth = true) => {\n    const { selected } = this.state;\n    if (selected) {\n      const element = document.querySelector(`[data-rule=\"${selected}\"]`);\n      if (element) {\n        scrollToElement(element, { topOffset: 150, bottomOffset: 100, smooth });\n      }\n    }\n  };\n\n  getRuleActivation = (rule: string) => {\n    const { actives, query } = this.state;\n    if (actives && actives[rule] && query.profile) {\n      return actives[rule][query.profile];\n    } else {\n      return undefined;\n    }\n  };\n\n  getSelectedProfile = () => {\n    const { query, referencedProfiles } = this.state;\n    if (query.profile) {\n      return referencedProfiles[query.profile];\n    } else {\n      return undefined;\n    }\n  };\n\n  closeFacet = (facet: string) =>\n    this.setState(state => ({\n      openFacets: { ...state.openFacets, [facet]: false }\n    }));\n\n  handleRuleOpen = (ruleKey: string) => {\n    this.props.router.push(this.getRulePath(ruleKey));\n  };\n\n  handleBack = (event?: React.SyntheticEvent<HTMLAnchorElement>) => {\n    const { usingPermalink } = this.state;\n\n    if (event) {\n      event.preventDefault();\n      event.currentTarget.blur();\n    }\n\n    if (usingPermalink) {\n      this.handleReset();\n    } else {\n      this.closeRule();\n    }\n  };\n\n  handleFilterChange = (changes: Partial<Query>) => {\n    this.props.router.push({\n      pathname: this.props.location.pathname,\n      query: serializeQuery({ ...this.state.query, ...changes })\n    });\n\n    this.setState(({ openFacets }) => ({\n      openFacets: {\n        ...openFacets,\n        sonarsourceSecurity: shouldOpenSonarSourceSecurityFacet(openFacets, changes),\n        standards: shouldOpenStandardsFacet(openFacets, changes)\n      }\n    }));\n  };\n\n  handleFacetToggle = (property: string) => {\n    this.setState(state => {\n      const willOpenProperty = !state.openFacets[property];\n      const newState = {\n        loading: state.loading,\n        openFacets: { ...state.openFacets, [property]: willOpenProperty }\n      };\n\n      // Try to open sonarsource security \"subfacet\" by default if the standard facet is open\n      if (willOpenProperty && property === STANDARDS) {\n        newState.openFacets.sonarsourceSecurity = shouldOpenSonarSourceSecurityFacet(\n          newState.openFacets,\n          state.query\n        );\n        // Force loading of sonarsource security facet data\n        property = newState.openFacets.sonarsourceSecurity ? 'sonarsourceSecurity' : property;\n      }\n\n      if (shouldRequestFacet(property) && (!state.facets || !state.facets[property])) {\n        newState.loading = true;\n        this.fetchFacet(property);\n      }\n\n      return newState;\n    });\n  };\n\n  handleReload = () => this.fetchFirstRules();\n\n  handleReset = () => this.props.router.push({ pathname: this.props.location.pathname });\n\n  /** Tries to take rule by index, or takes the last one  */\n  pickRuleAround = (rules: T.Rule[], selectedIndex: number | undefined) => {\n    if (selectedIndex === undefined || rules.length === 0) {\n      return undefined;\n    }\n    if (selectedIndex >= 0 && selectedIndex < rules.length) {\n      return rules[selectedIndex].key;\n    }\n    return rules[rules.length - 1].key;\n  };\n\n  handleRuleDelete = (ruleKey: string) => {\n    if (this.state.query.ruleKey === ruleKey) {\n      this.handleReset();\n    } else {\n      this.setState(state => {\n        const rules = state.rules.filter(rule => rule.key !== ruleKey);\n        const selectedIndex = this.getSelectedIndex(state);\n        const selected = this.pickRuleAround(rules, selectedIndex);\n        return { rules, selected };\n      });\n      this.closeRule();\n    }\n  };\n\n  handleRuleActivate = (profile: string, rule: string, activation: Activation) =>\n    this.setState((state: State) => {\n      const { actives = {} } = state;\n      if (!actives[rule]) {\n        return { actives: { ...actives, [rule]: { [profile]: activation } } };\n      }\n\n      return { actives: { ...actives, [rule]: { ...actives[rule], [profile]: activation } } };\n    });\n\n  handleRuleDeactivate = (profile: string, rule: string) =>\n    this.setState(state => {\n      const { actives } = state;\n      if (actives && actives[rule]) {\n        const newRule = { ...actives[rule] };\n        delete newRule[profile];\n        return { actives: { ...actives, [rule]: newRule } };\n      }\n      return null;\n    });\n\n  handleSearch = (searchQuery: string) => this.handleFilterChange({ searchQuery });\n\n  isFiltered = () => Object.keys(serializeQuery(this.state.query)).length > 0;\n\n  renderBulkButton = () => {\n    const { currentUser, languages } = this.props;\n    const { canWrite, paging, query, referencedProfiles } = this.state;\n    const organization = this.props.organization && this.props.organization.key;\n\n    if (!isLoggedIn(currentUser) || (isSonarCloud() && !organization) || !canWrite) {\n      return null;\n    }\n\n    return (\n      paging && (\n        <BulkChange\n          languages={languages}\n          organization={organization}\n          query={query}\n          referencedProfiles={referencedProfiles}\n          total={paging.total}\n        />\n      )\n    );\n  };\n\n  render() {\n    const { paging, rules } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    const organization = this.props.organization && this.props.organization.key;\n    const hideQualityProfiles = !hasPrivateAccess(\n      this.props.currentUser,\n      this.props.organization,\n      this.props.userOrganizations\n    );\n\n    return (\n      <>\n        <Suggestions suggestions=\"coding_rules\" />\n        <Helmet defer={false} title={translate('coding_rules.page')}>\n          <meta content=\"noindex\" name=\"robots\" />\n        </Helmet>\n        <div className=\"layout-page\" id=\"coding-rules-page\">\n          <ScreenPositionHelper className=\"layout-page-side-outer\">\n            {({ top }) => (\n              <div className=\"layout-page-side\" style={{ top }}>\n                <div className=\"layout-page-side-inner\">\n                  <div className=\"layout-page-filters\">\n                    <A11ySkipTarget\n                      anchor=\"rules_filters\"\n                      label={translate('coding_rules.skip_to_filters')}\n                      weight={10}\n                    />\n                    <FiltersHeader displayReset={this.isFiltered()} onReset={this.handleReset} />\n                    <SearchBox\n                      className=\"spacer-bottom\"\n                      id=\"coding-rules-search\"\n                      minLength={2}\n                      onChange={this.handleSearch}\n                      placeholder={translate('search.search_for_rules')}\n                      value={this.state.query.searchQuery || ''}\n                    />\n                    <FacetsList\n                      facets={this.state.facets}\n                      hideProfileFacet={hideQualityProfiles}\n                      onFacetToggle={this.handleFacetToggle}\n                      onFilterChange={this.handleFilterChange}\n                      openFacets={this.state.openFacets}\n                      organization={organization}\n                      organizationsEnabled={this.props.appState.organizationsEnabled}\n                      query={this.state.query}\n                      referencedProfiles={this.state.referencedProfiles}\n                      referencedRepositories={this.state.referencedRepositories}\n                      selectedProfile={this.getSelectedProfile()}\n                    />\n                  </div>\n                </div>\n              </div>\n            )}\n          </ScreenPositionHelper>\n\n          <div className=\"layout-page-main\">\n            <div className=\"layout-page-header-panel layout-page-main-header\">\n              <div className=\"layout-page-header-panel-inner layout-page-main-header-inner\">\n                <div className=\"layout-page-main-inner\">\n                  <A11ySkipTarget anchor=\"rules_main\" />\n                  {this.state.openRule ? (\n                    <a\n                      className=\"js-back display-inline-flex-center link-no-underline\"\n                      href=\"#\"\n                      onClick={this.handleBack}>\n                      <BackIcon className=\"spacer-right\" />\n                      {this.state.usingPermalink\n                        ? translate('coding_rules.see_all')\n                        : translate('coding_rules.return_to_list')}\n                    </a>\n                  ) : (\n                    this.renderBulkButton()\n                  )}\n                  {!this.state.usingPermalink && (\n                    <PageActions\n                      loading={this.state.loading}\n                      onReload={this.handleReload}\n                      paging={paging}\n                      selectedIndex={selectedIndex}\n                    />\n                  )}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"layout-page-main-inner\">\n              {this.state.openRule ? (\n                <RuleDetails\n                  allowCustomRules={!this.props.appState.organizationsEnabled}\n                  canWrite={this.state.canWrite}\n                  hideQualityProfiles={hideQualityProfiles}\n                  onActivate={this.handleRuleActivate}\n                  onDeactivate={this.handleRuleDeactivate}\n                  onDelete={this.handleRuleDelete}\n                  onFilterChange={this.handleFilterChange}\n                  organization={organization}\n                  referencedProfiles={this.state.referencedProfiles}\n                  referencedRepositories={this.state.referencedRepositories}\n                  ruleKey={this.state.openRule.key}\n                  selectedProfile={this.getSelectedProfile()}\n                />\n              ) : (\n                <>\n                  {rules.map(rule => (\n                    <RuleListItem\n                      activation={this.getRuleActivation(rule.key)}\n                      canWrite={this.state.canWrite}\n                      isLoggedIn={isLoggedIn(this.props.currentUser)}\n                      key={rule.key}\n                      onActivate={this.handleRuleActivate}\n                      onDeactivate={this.handleRuleDeactivate}\n                      onFilterChange={this.handleFilterChange}\n                      onOpen={this.handleRuleOpen}\n                      organization={organization}\n                      rule={rule}\n                      selected={rule.key === this.state.selected}\n                      selectedProfile={this.getSelectedProfile()}\n                    />\n                  ))}\n                  {paging !== undefined && (\n                    <ListFooter\n                      count={rules.length}\n                      loadMore={this.fetchMoreRules}\n                      ready={!this.state.loading}\n                      total={paging.total}\n                    />\n                  )}\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nfunction parseActives(rawActives: T.Dict<T.RuleActivation[]>) {\n  const actives: Actives = {};\n  for (const [rule, activations] of Object.entries(rawActives)) {\n    actives[rule] = {};\n    for (const { inherit, qProfile, severity } of activations) {\n      actives[rule][qProfile] = { inherit, severity };\n    }\n  }\n  return actives;\n}\n\nfunction parseFacets(rawFacets: { property: string; values: { count: number; val: string }[] }[]) {\n  const facets: Facets = {};\n  for (const rawFacet of rawFacets) {\n    const values: T.Dict<number> = {};\n    for (const rawValue of rawFacet.values) {\n      values[rawValue.val] = rawValue.count;\n    }\n    facets[getAppFacet(rawFacet.property)] = values;\n  }\n  return facets;\n}\n\nconst mapStateToProps = (state: Store) => ({\n  appState: getAppState(state),\n  currentUser: getCurrentUser(state),\n  languages: getLanguages(state),\n  userOrganizations: getMyOrganizations(state)\n});\n\nexport default withRouter(connect(mapStateToProps)(App));\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n  long?: boolean;\n}\n\nexport const formatterOption = { year: 'numeric', month: 'short', day: '2-digit' };\n\nexport const longFormatterOption = { year: 'numeric', month: 'long', day: 'numeric' };\n\nexport default function DateFormatter({ children, date, long }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...(long ? longFormatterOption : formatterOption)}>\n      {children}\n    </FormattedDate>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport { lazyLoad } from 'sonar-ui-common/components/lazyLoad';\nimport { filterContent } from '../../helpers/markdown';\n\nconst DocMarkdownBlock = lazyLoad(() => import('./DocMarkdownBlock'));\n\ninterface Props {\n  className?: string;\n  children?: React.ReactNode;\n  // Use as `import(/* webpackMode: \"eager\" */ 'Docs/tooltips/foo/bar.md')`\n  doc: Promise<{ default: string }>;\n  overlayProps?: T.Dict<string>;\n}\n\ninterface State {\n  content?: string;\n  open: boolean;\n}\n\nexport default class DocTooltip extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { open: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.props.doc.then(\n      ({ default: content }) => {\n        if (this.mounted) {\n          this.setState({ content });\n        }\n      },\n      () => {}\n    );\n    document.addEventListener('scroll', this.close, true);\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    document.removeEventListener('scroll', this.close, true);\n  }\n\n  close = () => {\n    if (this.mounted) {\n      this.setState({ open: false });\n    }\n  };\n\n  render() {\n    return this.state.content ? (\n      <HelpTooltip\n        className={this.props.className}\n        overlay={\n          <div className=\"abs-width-300\">\n            <DocMarkdownBlock\n              childProps={this.props.overlayProps}\n              className=\"cut-margins\"\n              content={filterContent(this.state.content)}\n              isTooltip={true}\n            />\n          </div>\n        }>\n        {this.props.children}\n      </HelpTooltip>\n    ) : (\n      this.props.children || null\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { A11yContext } from './A11yContext';\n\ninterface Props {\n  anchor: string;\n  label?: string;\n  weight?: number;\n}\n\nexport default function A11ySkipTarget(props: Props) {\n  return (\n    <A11yContext.Consumer>\n      {({ addA11ySkipLink, removeA11ySkipLink }) => (\n        <A11ySkipTargetInner\n          addA11ySkipLink={addA11ySkipLink}\n          removeA11ySkipLink={removeA11ySkipLink}\n          {...props}\n        />\n      )}\n    </A11yContext.Consumer>\n  );\n}\n\ninterface InnerProps {\n  addA11ySkipLink: (link: T.A11ySkipLink) => void;\n  removeA11ySkipLink: (link: T.A11ySkipLink) => void;\n}\n\nexport class A11ySkipTargetInner extends React.PureComponent<Props & InnerProps> {\n  componentDidMount() {\n    this.props.addA11ySkipLink(this.getLink());\n  }\n\n  componentWillUnmount() {\n    this.props.removeA11ySkipLink(this.getLink());\n  }\n\n  getLink = (): T.A11ySkipLink => {\n    const { anchor: key, label = translate('skip_to_content'), weight } = this.props;\n    return { key, label, weight };\n  };\n\n  render() {\n    const { anchor } = this.props;\n    return <span id={`a11y_target__${anchor}`} />;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { map } from 'lodash';\nimport { csvEscape } from 'sonar-ui-common/helpers/csv';\nimport { getJSON, post, postJSON, RequestData } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { Exporter, ProfileChangelogEvent } from '../apps/quality-profiles/types';\n\nexport interface ProfileActions {\n  associateProjects?: boolean;\n  copy?: boolean;\n  delete?: boolean;\n  edit?: boolean;\n  setAsDefault?: boolean;\n}\n\nexport interface Actions {\n  create?: boolean;\n}\n\nexport interface Profile {\n  actions?: ProfileActions;\n  key: string;\n  name: string;\n  language: string;\n  languageName: string;\n  isInherited?: boolean;\n  parentKey?: string;\n  parentName?: string;\n  isDefault?: boolean;\n  activeRuleCount: number;\n  activeDeprecatedRuleCount: number;\n  rulesUpdatedAt?: string;\n  lastUsed?: string;\n  userUpdatedAt?: string;\n  organization: string;\n  isBuiltIn?: boolean;\n  projectCount?: number;\n}\n\nexport interface SearchQualityProfilesParameters {\n  defaults?: boolean;\n  language?: string;\n  organization?: string;\n  project?: string;\n  qualityProfile?: string;\n}\n\nexport interface SearchQualityProfilesResponse {\n  actions?: Actions;\n  profiles: Profile[];\n}\n\nexport function searchQualityProfiles(\n  parameters: SearchQualityProfilesParameters\n): Promise<SearchQualityProfilesResponse> {\n  return getJSON('/api/qualityprofiles/search', parameters).catch(throwGlobalError);\n}\n\nexport function getQualityProfile({\n  compareToSonarWay,\n  profile: { key }\n}: {\n  compareToSonarWay?: boolean;\n  profile: Profile;\n}): Promise<any> {\n  return getJSON('/api/qualityprofiles/show', { compareToSonarWay, key });\n}\n\nexport function createQualityProfile(data: RequestData): Promise<any> {\n  return postJSON('/api/qualityprofiles/create', data).catch(throwGlobalError);\n}\n\nexport function restoreQualityProfile(data: RequestData): Promise<any> {\n  return postJSON('/api/qualityprofiles/restore', data).catch(throwGlobalError);\n}\n\nexport interface ProfileProject {\n  id: number;\n  key: string;\n  name: string;\n  selected: boolean;\n}\n\nexport function getProfileProjects(\n  data: RequestData\n): Promise<{ more: boolean; paging: T.Paging; results: ProfileProject[] }> {\n  return getJSON('/api/qualityprofiles/projects', data).catch(throwGlobalError);\n}\n\nexport function getProfileInheritance({\n  language,\n  name: qualityProfile,\n  organization\n}: Profile): Promise<{\n  ancestors: T.ProfileInheritanceDetails[];\n  children: T.ProfileInheritanceDetails[];\n  profile: T.ProfileInheritanceDetails;\n}> {\n  return getJSON('/api/qualityprofiles/inheritance', {\n    language,\n    qualityProfile,\n    organization\n  }).catch(throwGlobalError);\n}\n\nexport function setDefaultProfile({ language, name: qualityProfile, organization }: Profile) {\n  return post('/api/qualityprofiles/set_default', {\n    language,\n    qualityProfile,\n    organization\n  });\n}\n\nexport function renameProfile(key: string, name: string) {\n  return post('/api/qualityprofiles/rename', { key, name }).catch(throwGlobalError);\n}\n\nexport function copyProfile(fromKey: string, toName: string): Promise<any> {\n  return postJSON('/api/qualityprofiles/copy', { fromKey, toName }).catch(throwGlobalError);\n}\n\nexport function deleteProfile({ language, name: qualityProfile, organization }: Profile) {\n  return post('/api/qualityprofiles/delete', { language, qualityProfile, organization }).catch(\n    throwGlobalError\n  );\n}\n\nexport function changeProfileParent(\n  { language, name: qualityProfile, organization }: Profile,\n  parentProfile?: Profile\n) {\n  return post('/api/qualityprofiles/change_parent', {\n    language,\n    qualityProfile,\n    organization,\n    parentQualityProfile: parentProfile ? parentProfile.name : undefined\n  }).catch(throwGlobalError);\n}\n\nexport function getQualityProfileBackupUrl({\n  language,\n  name: qualityProfile,\n  organization\n}: Profile) {\n  const queryParams = Object.entries({ language, qualityProfile, organization })\n    .map(([key, value]) => `${key}=${encodeURIComponent(value)}`)\n    .join('&');\n  return `/api/qualityprofiles/backup?${queryParams}`;\n}\n\nexport function getQualityProfileExporterUrl(\n  { key: exporterKey }: Exporter,\n  { language, name: qualityProfile, organization }: Profile\n) {\n  const queryParams = Object.entries({ exporterKey, language, qualityProfile, organization })\n    .map(([key, value]) => `${key}=${encodeURIComponent(value)}`)\n    .join('&');\n  return `/api/qualityprofiles/export?${queryParams}`;\n}\n\nexport function getImporters(): Promise<\n  Array<{ key: string; languages: Array<string>; name: string }>\n> {\n  return getJSON('/api/qualityprofiles/importers').then(r => r.importers, throwGlobalError);\n}\n\nexport function getExporters(): Promise<any> {\n  return getJSON('/api/qualityprofiles/exporters').then(r => r.exporters);\n}\n\nexport function getProfileChangelog(\n  since: any,\n  to: any,\n  { language, name: qualityProfile, organization }: Profile,\n  page?: number\n): Promise<{\n  events: ProfileChangelogEvent[];\n  p: number;\n  ps: number;\n  total: number;\n}> {\n  return getJSON('/api/qualityprofiles/changelog', {\n    since,\n    to,\n    language,\n    qualityProfile,\n    organization,\n    p: page\n  });\n}\n\nexport interface CompareResponse {\n  left: { name: string };\n  right: { name: string };\n  inLeft: Array<{ key: string; name: string; severity: string }>;\n  inRight: Array<{ key: string; name: string; severity: string }>;\n  modified: Array<{\n    key: string;\n    name: string;\n    left: { params: T.Dict<string>; severity: string };\n    right: { params: T.Dict<string>; severity: string };\n  }>;\n}\n\nexport function compareProfiles(leftKey: string, rightKey: string): Promise<CompareResponse> {\n  return getJSON('/api/qualityprofiles/compare', { leftKey, rightKey });\n}\n\nexport function associateProject(\n  { language, name: qualityProfile, organization }: Profile,\n  project: string\n) {\n  return post('/api/qualityprofiles/add_project', {\n    language,\n    qualityProfile,\n    organization,\n    project\n  }).catch(throwGlobalError);\n}\n\nexport function dissociateProject(\n  { language, name: qualityProfile, organization }: Profile,\n  project: string\n) {\n  return post('/api/qualityprofiles/remove_project', {\n    language,\n    qualityProfile,\n    organization,\n    project\n  }).catch(throwGlobalError);\n}\n\nexport interface SearchUsersGroupsParameters {\n  language: string;\n  organization?: string;\n  qualityProfile: string;\n  q?: string;\n  selected?: 'all' | 'selected' | 'deselected';\n}\n\ninterface SearchUsersResponse {\n  users: T.UserSelected[];\n  paging: T.Paging;\n}\n\nexport function searchUsers(parameters: SearchUsersGroupsParameters): Promise<SearchUsersResponse> {\n  return getJSON('/api/qualityprofiles/search_users', parameters).catch(throwGlobalError);\n}\n\nexport interface SearchGroupsResponse {\n  groups: Array<{ name: string }>;\n  paging: T.Paging;\n}\n\nexport function searchGroups(\n  parameters: SearchUsersGroupsParameters\n): Promise<SearchGroupsResponse> {\n  return getJSON('/api/qualityprofiles/search_groups', parameters).catch(throwGlobalError);\n}\n\nexport interface AddRemoveUserParameters {\n  language: string;\n  login: string;\n  organization?: string;\n  qualityProfile: string;\n}\n\nexport function addUser(parameters: AddRemoveUserParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/add_user', parameters).catch(throwGlobalError);\n}\n\nexport function removeUser(parameters: AddRemoveUserParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/remove_user', parameters).catch(throwGlobalError);\n}\n\nexport interface AddRemoveGroupParameters {\n  group: string;\n  language: string;\n  organization?: string;\n  qualityProfile: string;\n}\n\nexport function addGroup(parameters: AddRemoveGroupParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/add_group', parameters).catch(throwGlobalError);\n}\n\nexport function removeGroup(parameters: AddRemoveGroupParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/remove_group', parameters).catch(throwGlobalError);\n}\n\nexport interface BulkActivateParameters {\n  activation?: boolean;\n  active_severities?: string;\n  asc?: boolean;\n  available_since?: string;\n  compareToProfile?: string;\n  inheritance?: string;\n  is_template?: string;\n  languages?: string;\n  organization: string | undefined;\n  q?: string;\n  qprofile?: string;\n  repositories?: string;\n  rule_key?: string;\n  s?: string;\n  severities?: string;\n  statuses?: string;\n  tags?: string;\n  targetKey: string;\n  targetSeverity?: string;\n  template_key?: string;\n  types?: string;\n}\n\nexport function bulkActivateRules(data: BulkActivateParameters) {\n  return postJSON('/api/qualityprofiles/activate_rules', data);\n}\n\nexport function bulkDeactivateRules(data: BulkActivateParameters) {\n  return postJSON('/api/qualityprofiles/deactivate_rules', data);\n}\n\nexport function activateRule(data: {\n  key: string;\n  organization: string | undefined;\n  params?: T.Dict<string>;\n  reset?: boolean;\n  rule: string;\n  severity?: string;\n}) {\n  const params =\n    data.params && map(data.params, (value, key) => `${key}=${csvEscape(value)}`).join(';');\n  return post('/api/qualityprofiles/activate_rule', { ...data, params }).catch(throwGlobalError);\n}\n\nexport function deactivateRule(data: {\n  key: string;\n  organization: string | undefined;\n  rule: string;\n}) {\n  return post('/api/qualityprofiles/deactivate_rule', data).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// keep this file in JavaScript, because it is used by a webpack loader\nmodule.exports = { getFrontMatter, separateFrontMatter, filterContent };\n\nfunction getFrontMatter(content) {\n  const lines = content.split('\\n');\n  const position = getFrontMatterPosition(lines);\n  return position ? parseFrontMatter(lines.slice(position.firstLine + 1, position.lastLine)) : {};\n}\n\nfunction separateFrontMatter(content) {\n  const lines = content.split('\\n');\n  const position = getFrontMatterPosition(lines);\n  if (position) {\n    const frontmatter = parseFrontMatter(lines.slice(position.firstLine + 1, position.lastLine));\n    const content = lines.slice(position.lastLine + 1).join('\\n');\n    return { frontmatter, content };\n  } else {\n    return { frontmatter: {}, content };\n  }\n}\n\nfunction getFrontMatterPosition(lines) {\n  let firstLine;\n  let lastLine;\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i];\n    if (line.trim() === '---') {\n      if (firstLine === undefined) {\n        firstLine = i;\n      } else {\n        lastLine = i;\n        break;\n      }\n    }\n  }\n  return lastLine !== undefined ? { firstLine, lastLine } : undefined;\n}\n\nfunction parseFrontMatter(lines) {\n  const data = {};\n  for (let i = 0; i < lines.length; i++) {\n    const tokens = lines[i].split(':').map(x => x.trim());\n    if (tokens.length === 2) {\n      data[tokens[0]] = tokens[1];\n    }\n  }\n  return data;\n}\n\n/**\n * @param {string} content\n * @returns {string}\n */\nfunction filterContent(content) {\n  const regexBase = '<!-- \\\\/?(sonarqube|sonarcloud|static) -->';\n  const { isSonarCloud, getInstance } = require('./system');\n  const contentWithInstance = content.replace(/{instance}/gi, getInstance());\n  const contentWithoutStatic = cutConditionalContent(contentWithInstance, 'static');\n  const filteredContent = isSonarCloud()\n    ? cutConditionalContent(contentWithoutStatic, 'sonarqube')\n    : cutConditionalContent(contentWithoutStatic, 'sonarcloud');\n  return filteredContent\n    .replace(new RegExp(`^${regexBase}(\\n|\\r|\\r\\n|$)`, 'gm'), '') // First, remove single-line ones, including ending carriage-returns.\n    .replace(new RegExp(`${regexBase}`, 'g'), ''); // Now remove all remaining ones.\n}\n\n/**\n * @param {string} content\n * @param {string} tag\n * @returns {string}\n */\nfunction cutConditionalContent(content, tag) {\n  const beginning = `<!-- ${tag} -->`;\n  const ending = `<!-- /${tag} -->`;\n\n  let newContent = content;\n  let start = newContent.indexOf(beginning);\n  let end = newContent.indexOf(ending);\n  while (start !== -1 && end !== -1) {\n    if (start < end) {\n      newContent = newContent.substring(0, start) + newContent.substring(end + ending.length);\n    } else {\n      // When conditional tags are incorrectly used we log an error, strip them out and pass to the next pair of tags\n      // eslint-disable-next-line no-console\n      console.error(\n        new Error(\n          `Documentation - incorrect usage of conditional formatting tags here: \"${newContent.substring(\n            end,\n            start + beginning.length\n          )}\"`\n        )\n      );\n      newContent =\n        newContent.substring(0, end) +\n        newContent.substring(end + ending.length, start) +\n        newContent.substring(start + beginning.length);\n    }\n    start = newContent.indexOf(beginning);\n    end = newContent.indexOf(ending);\n  }\n\n  return newContent;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  severity: string;\n}\n\nexport default function SeverityHelper({ className, severity }: Props) {\n  if (!severity) {\n    return null;\n  }\n  return (\n    <span className={className}>\n      <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n      {translate('severity', severity)}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface GetRulesAppResponse {\n  canWrite?: boolean;\n  repositories: { key: string; language: string; name: string }[];\n}\n\nexport function getRulesApp(data: {\n  organization: string | undefined;\n}): Promise<GetRulesAppResponse> {\n  return getJSON('/api/rules/app', data).catch(throwGlobalError);\n}\n\nexport interface SearchRulesResponse {\n  actives?: T.Dict<T.RuleActivation[]>;\n  facets?: { property: string; values: { count: number; val: string }[] }[];\n  p: number;\n  ps: number;\n  rules: T.Rule[];\n  total: number;\n}\n\nexport function searchRules(data: {\n  organization: string | undefined;\n  [x: string]: any;\n}): Promise<SearchRulesResponse> {\n  return getJSON('/api/rules/search', data).catch(throwGlobalError);\n}\n\nexport function takeFacet(response: any, property: string) {\n  const facet = response.facets.find((facet: any) => facet.property === property);\n  return facet ? facet.values : [];\n}\n\nexport function getRuleDetails(parameters: {\n  actives?: boolean;\n  key: string;\n  organization: string | undefined;\n}): Promise<{ actives?: T.RuleActivation[]; rule: T.RuleDetails }> {\n  return getJSON('/api/rules/show', parameters).catch(throwGlobalError);\n}\n\nexport function getRuleTags(parameters: {\n  organization: string | undefined;\n  ps?: number;\n  q: string;\n}): Promise<string[]> {\n  return getJSON('/api/rules/tags', parameters).then(r => r.tags, throwGlobalError);\n}\n\nexport function createRule(data: {\n  custom_key: string;\n  markdown_description: string;\n  name: string;\n  organization: string | undefined;\n  params?: string;\n  prevent_reactivation?: boolean;\n  severity?: string;\n  status?: string;\n  template_key: string;\n  type?: string;\n}): Promise<T.RuleDetails> {\n  return postJSON('/api/rules/create', data).then(\n    r => r.rule,\n    response => {\n      // do not show global error if the status code is 409\n      // this case should be handled inside a component\n      if (response && response.status === 409) {\n        return Promise.reject(response);\n      } else {\n        return throwGlobalError(response);\n      }\n    }\n  );\n}\n\nexport function deleteRule(parameters: { key: string; organization: string | undefined }) {\n  return post('/api/rules/delete', parameters).catch(throwGlobalError);\n}\n\nexport function updateRule(data: {\n  key: string;\n  markdown_description?: string;\n  markdown_note?: string;\n  name?: string;\n  organization: string | undefined;\n  params?: string;\n  remediation_fn_base_effort?: string;\n  remediation_fn_type?: string;\n  remediation_fy_gap_multiplier?: string;\n  severity?: string;\n  status?: string;\n  tags?: string;\n}): Promise<T.RuleDetails> {\n  return postJSON('/api/rules/update', data).then(r => r.rule, throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { getAppState, Store } from '../../store/rootReducer';\nimport { getWrappedDisplayName } from './utils';\n\nexport function withAppState<P>(\n  WrappedComponent: React.ComponentType<P & { appState: Partial<T.AppState> }>\n) {\n  class Wrapper extends React.Component<P & { appState: T.AppState }> {\n    static displayName = getWrappedDisplayName(WrappedComponent, 'withAppState');\n\n    render() {\n      return <WrappedComponent {...this.props} />;\n    }\n  }\n\n  function mapStateToProps(state: Store) {\n    return { appState: getAppState(state) };\n  }\n\n  return connect(mapStateToProps)(Wrapper);\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\n\ninterface Props {\n  className?: string;\n  children: React.ReactNode;\n  property: string;\n}\n\nexport default function FacetBox(props: Props) {\n  return (\n    <div\n      className={classNames('search-navigator-facet-box', props.className)}\n      data-property={props.property}>\n      {props.children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport './TagsList.css';\n\ninterface Props {\n  allowUpdate?: boolean;\n  className?: string;\n  tags: string[];\n}\n\nexport default function TagsList({ allowUpdate = false, className, tags }: Props) {\n  return (\n    <span\n      aria-label={translateWithParameters('tags_list_x', tags.join(', '))}\n      className={classNames('tags-list', className)}>\n      <TagsIcon className=\"text-middle\" />\n      <span aria-hidden={true} className=\"text-ellipsis text-middle\" title={tags.join(', ')}>\n        {tags.join(', ')}\n      </span>\n      {allowUpdate && <DropdownIcon className=\"text-middle\" />}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce } from 'lodash';\nimport * as React from 'react';\n\ninterface Props {\n  className?: string;\n  children: (position: { top: number; left: number }) => React.ReactElement<any>;\n}\n\nexport default class ScreenPositionHelper extends React.PureComponent<Props> {\n  container?: HTMLDivElement;\n  debouncedOnResize: () => void;\n\n  constructor(props: Props) {\n    super(props);\n    this.debouncedOnResize = debounce(() => this.forceUpdate(), 250);\n  }\n\n  componentDidMount() {\n    this.forceUpdate();\n    window.addEventListener('resize', this.debouncedOnResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.debouncedOnResize);\n  }\n\n  getPosition = () => {\n    const containerPos = this.container && this.container.getBoundingClientRect();\n    if (!containerPos) {\n      return { top: 0, left: 0 };\n    }\n    return {\n      top: window.pageYOffset + containerPos.top,\n      left: window.pageXOffset + containerPos.left\n    };\n  };\n\n  render() {\n    return (\n      <div\n        className={this.props.className}\n        ref={container => (this.container = container as HTMLDivElement)}>\n        {this.props.children(this.getPosition())}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport OpenCloseIcon from 'sonar-ui-common/components/icons/OpenCloseIcon';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  children?: React.ReactNode;\n  fetching?: boolean;\n  helper?: string;\n  name: React.ReactNode;\n  onClear?: () => void;\n  onClick?: () => void;\n  open: boolean;\n  values?: string[];\n}\n\nexport default class FacetHeader extends React.PureComponent<Props> {\n  handleClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.onClick) {\n      this.props.onClick();\n    }\n  };\n\n  renderHelper() {\n    if (!this.props.helper) {\n      return null;\n    }\n    return <HelpTooltip className=\"spacer-left\" overlay={this.props.helper} />;\n  }\n\n  renderValueIndicator() {\n    const { values } = this.props;\n    if (!values || !values.length) {\n      return null;\n    }\n    const value =\n      values.length === 1 ? values[0] : translateWithParameters('x_selected', values.length);\n    return (\n      <span className=\"badge text-ellipsis\" title={value}>\n        {value}\n      </span>\n    );\n  }\n\n  render() {\n    const showClearButton =\n      this.props.values != null && this.props.values.length > 0 && this.props.onClear != null;\n\n    return (\n      <div className=\"search-navigator-facet-header-wrapper display-flex-center\">\n        {this.props.onClick ? (\n          <span className=\"search-navigator-facet-header display-flex-center\">\n            <a href=\"#\" onClick={this.handleClick}>\n              <OpenCloseIcon className=\"little-spacer-right\" open={this.props.open} />\n              {this.props.name}\n            </a>\n            {this.renderHelper()}\n          </span>\n        ) : (\n          <span className=\"search-navigator-facet-header display-flex-center\">\n            {this.props.name}\n            {this.renderHelper()}\n          </span>\n        )}\n\n        {this.props.children}\n\n        <span className=\"search-navigator-facet-header-value spacer-left spacer-right \">\n          {this.renderValueIndicator()}\n        </span>\n\n        {this.props.fetching && (\n          <span className=\"little-spacer-right\">\n            <DeferredSpinner />\n          </span>\n        )}\n\n        {showClearButton && (\n          <Button\n            className=\"search-navigator-facet-header-button button-small button-red\"\n            onClick={this.props.onClear}>\n            {translate('clear')}\n          </Button>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\n\nexport interface Props {\n  active?: boolean;\n  className?: string;\n  disabled?: boolean;\n  halfWidth?: boolean;\n  name: React.ReactNode;\n  onClick: (x: string, multiple?: boolean) => void;\n  stat?: React.ReactNode;\n  /** Textual version of `name` */\n  tooltip?: string;\n  value: string;\n}\n\nexport default class FacetItem extends React.PureComponent<Props> {\n  static defaultProps = {\n    disabled: false,\n    halfWidth: false,\n    loading: false\n  };\n\n  handleClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.onClick(this.props.value, event.ctrlKey || event.metaKey);\n  };\n\n  renderValue() {\n    if (this.props.stat == null) {\n      return null;\n    }\n\n    return <span className=\"facet-stat\">{this.props.stat}</span>;\n  }\n\n  render() {\n    const { name } = this.props;\n    const className = classNames('search-navigator-facet', this.props.className, {\n      active: this.props.active,\n      'search-navigator-facet-half': this.props.halfWidth\n    });\n\n    return this.props.disabled ? (\n      <span className={className} data-facet={this.props.value} title={this.props.tooltip}>\n        <span className=\"facet-name\">{name}</span>\n        {this.renderValue()}\n      </span>\n    ) : (\n      <a\n        className={className}\n        data-facet={this.props.value}\n        href=\"#\"\n        onClick={this.handleClick}\n        title={this.props.tooltip}>\n        <span className=\"facet-name\">{name}</span>\n        {this.renderValue()}\n      </a>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nexport interface MultiSelectOptionProps {\n  active?: boolean;\n  custom?: boolean;\n  disabled?: boolean;\n  element: string;\n  onHover: (element: string) => void;\n  onSelectChange: (selected: boolean, element: string) => void;\n  renderLabel: (element: string) => React.ReactNode;\n  selected?: boolean;\n}\n\nexport default function MultiSelectOption(props: MultiSelectOptionProps) {\n  const { active, custom, disabled, element, selected } = props;\n  const onHover = () => props.onHover(element);\n  const className = classNames({ active, disabled });\n  const label = props.renderLabel(element);\n\n  return (\n    <li onFocus={onHover} onMouseOver={onHover}>\n      <Checkbox\n        checked={Boolean(selected)}\n        className={className}\n        disabled={disabled}\n        id={element}\n        onCheck={props.onSelectChange}>\n        {custom ? (\n          <span\n            aria-label={`${translate('create_new_element')}: ${label}`}\n            className=\"little-spacer-left\">\n            <span aria-hidden={true} className=\"little-spacer-right\">\n              +\n            </span>\n            {label}\n          </span>\n        ) : (\n          <span className=\"little-spacer-left\">{label}</span>\n        )}\n      </Checkbox>\n    </li>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { difference } from 'lodash';\nimport * as React from 'react';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelectOption from './MultiSelectOption';\n\ninterface Props {\n  allowNewElements?: boolean;\n  allowSelection?: boolean;\n  elements: string[];\n  filterSelected?: (query: string, selectedElements: string[]) => string[];\n  footerNode?: React.ReactNode;\n  listSize?: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  placeholder: string;\n  renderLabel?: (element: string) => React.ReactNode;\n  selectedElements: string[];\n  validateSearchInput?: (value: string) => string;\n}\n\ninterface State {\n  activeIdx: number;\n  loading: boolean;\n  query: string;\n  selectedElements: string[];\n  unselectedElements: string[];\n}\n\ninterface DefaultProps {\n  filterSelected: (query: string, selectedElements: string[]) => string[];\n  listSize: number;\n  renderLabel: (element: string) => React.ReactNode;\n  validateSearchInput: (value: string) => string;\n}\n\ntype PropsWithDefault = Props & DefaultProps;\n\nexport default class MultiSelect extends React.PureComponent<Props, State> {\n  container?: HTMLDivElement | null;\n  searchInput?: HTMLInputElement | null;\n  mounted = false;\n\n  static defaultProps: DefaultProps = {\n    filterSelected: (query: string, selectedElements: string[]) =>\n      selectedElements.filter(elem => elem.includes(query)),\n    listSize: 0,\n    renderLabel: (element: string) => element,\n    validateSearchInput: (value: string) => value\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      activeIdx: 0,\n      loading: true,\n      query: '',\n      selectedElements: [],\n      unselectedElements: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.onSearchQuery('');\n    this.updateSelectedElements(this.props as PropsWithDefault);\n    this.updateUnselectedElements(this.props as PropsWithDefault);\n    if (this.container) {\n      this.container.addEventListener('keydown', this.handleKeyboard, true);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: PropsWithDefault) {\n    if (\n      this.props.elements !== nextProps.elements ||\n      this.props.selectedElements !== nextProps.selectedElements\n    ) {\n      this.updateSelectedElements(nextProps);\n      this.updateUnselectedElements(nextProps);\n\n      const totalElements = this.getAllElements(nextProps, this.state).length;\n      if (this.state.activeIdx >= totalElements) {\n        this.setState({ activeIdx: totalElements - 1 });\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.searchInput) {\n      this.searchInput.focus();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.container) {\n      this.container.removeEventListener('keydown', this.handleKeyboard);\n    }\n  }\n\n  handleSelectChange = (selected: boolean, item: string) => {\n    if (selected) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  handleSearchChange = (value: string) => {\n    this.onSearchQuery((this.props as PropsWithDefault).validateSearchInput(value));\n  };\n\n  handleElementHover = (element: string) => {\n    this.setState((prevState, props) => {\n      return { activeIdx: this.getAllElements(props, prevState).indexOf(element) };\n    });\n  };\n\n  handleKeyboard = (evt: KeyboardEvent) => {\n    switch (evt.keyCode) {\n      case 40: // down\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectNextElement);\n        break;\n      case 38: // up\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectPreviousElement);\n        break;\n      case 37: // left\n      case 39: // right\n        evt.stopPropagation();\n        break;\n      case 13: // enter\n        if (this.state.activeIdx >= 0) {\n          this.toggleSelect(this.getAllElements(this.props, this.state)[this.state.activeIdx]);\n        }\n        break;\n    }\n  };\n\n  onSearchQuery = (query: string) => {\n    this.setState({ activeIdx: 0, loading: true, query });\n    this.props.onSearch(query).then(this.stopLoading, this.stopLoading);\n  };\n\n  onSelectItem = (item: string) => {\n    if (this.isNewElement(item, this.props)) {\n      this.onSearchQuery('');\n    }\n    this.props.onSelect(item);\n  };\n\n  onUnselectItem = (item: string) => this.props.onUnselect(item);\n\n  isNewElement = (elem: string, { selectedElements, elements }: Props) =>\n    elem.length > 0 && selectedElements.indexOf(elem) === -1 && elements.indexOf(elem) === -1;\n\n  updateSelectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (state.query) {\n        return {\n          selectedElements: props.filterSelected(state.query, props.selectedElements)\n        };\n      } else {\n        return { selectedElements: [...props.selectedElements] };\n      }\n    });\n  };\n\n  updateUnselectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (props.listSize === 0) {\n        return { unselectedElements: difference(props.elements, props.selectedElements) };\n      } else if (props.listSize < state.selectedElements.length) {\n        return { unselectedElements: [] };\n      } else {\n        return {\n          unselectedElements: difference(props.elements, props.selectedElements).slice(\n            0,\n            props.listSize - state.selectedElements.length\n          )\n        };\n      }\n    });\n  };\n\n  getAllElements = (props: Props, state: State) => {\n    if (this.isNewElement(state.query, props)) {\n      return [...state.selectedElements, ...state.unselectedElements, state.query];\n    } else {\n      return [...state.selectedElements, ...state.unselectedElements];\n    }\n  };\n\n  setElementActive = (idx: number) => this.setState({ activeIdx: idx });\n\n  selectNextElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx < 0 || activeIdx >= allElements.length - 1) {\n      return { activeIdx: 0 };\n    } else {\n      return { activeIdx: activeIdx + 1 };\n    }\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx <= 0) {\n      const lastIdx = allElements.length - 1;\n      return { activeIdx: lastIdx };\n    } else {\n      return { activeIdx: activeIdx - 1 };\n    }\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  toggleSelect = (item: string) => {\n    if (this.props.selectedElements.indexOf(item) === -1) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  render() {\n    const { allowSelection = true, allowNewElements = true, footerNode = '' } = this.props;\n    const { renderLabel } = this.props as PropsWithDefault;\n    const { query, activeIdx, selectedElements, unselectedElements } = this.state;\n    const activeElement = this.getAllElements(this.props, this.state)[activeIdx];\n    const showNewElement = allowNewElements && this.isNewElement(query, this.props);\n    const infiniteList = this.props.listSize === 0;\n    const listClasses = classNames('menu', {\n      'menu-vertically-limited': infiniteList,\n      'spacer-top': infiniteList,\n      'with-top-separator': infiniteList,\n      'with-bottom-separator': Boolean(footerNode)\n    });\n\n    return (\n      <div className=\"multi-select\" ref={div => (this.container = div)}>\n        <div className=\"menu-search\">\n          <SearchBox\n            autoFocus={true}\n            className=\"little-spacer-top\"\n            loading={this.state.loading}\n            onChange={this.handleSearchChange}\n            placeholder={this.props.placeholder}\n            value={query}\n          />\n        </div>\n        <ul className={listClasses}>\n          {selectedElements.length > 0 &&\n            selectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n                selected={true}\n              />\n            ))}\n          {unselectedElements.length > 0 &&\n            unselectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                disabled={!allowSelection}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n              />\n            ))}\n          {showNewElement && (\n            <MultiSelectOption\n              active={activeElement === query}\n              custom={true}\n              element={query}\n              key={query}\n              onHover={this.handleElementHover}\n              onSelectChange={this.handleSelectChange}\n              renderLabel={renderLabel}\n            />\n          )}\n          {!showNewElement && selectedElements.length < 1 && unselectedElements.length < 1 && (\n            <li className=\"spacer-left\">{translateWithParameters('no_results_for_x', query)}</li>\n          )}\n        </ul>\n        {footerNode}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getMarkdownHelpUrl } from '../../helpers/urls';\n\ninterface Props {\n  className?: string;\n}\n\nexport default class MarkdownTips extends React.PureComponent<Props> {\n  handleClick(evt: React.SyntheticEvent<HTMLAnchorElement>) {\n    evt.preventDefault();\n    window.open(getMarkdownHelpUrl(), 'Markdown', 'height=300,width=600,scrollbars=1,resizable=1');\n  }\n\n  render() {\n    return (\n      <div className={classNames('markdown-tips', this.props.className)}>\n        <a className=\"little-spacer-right\" href=\"#\" onClick={this.handleClick}>\n          {translate('markdown.helplink')}\n        </a>\n        {':'}\n        <span className=\"spacer-left\">*{translate('bold')}*</span>\n        <span className=\"spacer-left\">\n          ``\n          {translate('code')}\n          ``\n        </span>\n        <span className=\"spacer-left\">* {translate('bulleted_point')}</span>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\n\ninterface Props {\n  children?: React.ReactNode;\n  title?: string;\n}\n\nexport default function FacetItemsList({ children, title }: Props) {\n  return (\n    <div className=\"search-navigator-facet-list\">\n      {title && <div className=\"search-navigator-facet-list-title\">{title}</div>}\n      {children}\n    </div>\n  );\n}\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".tags-list{white-space:nowrap;line-height:16px}.tags-list i:before{font-size:12px}.tags-list span{display:inline-block;vertical-align:middle;text-align:left;max-width:220px;padding-left:4px;padding-right:4px}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\n\ninterface Props {\n  className?: string;\n  count: number;\n  showMore: () => void;\n  showLess: (() => void) | undefined;\n  total: number;\n}\n\nexport default class ListStyleFacetFooter extends React.PureComponent<Props> {\n  handleShowMoreClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.showMore();\n  };\n\n  handleShowLessClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.showLess) {\n      this.props.showLess();\n    }\n  };\n\n  render() {\n    const { count, total } = this.props;\n    const hasMore = total > count;\n    const allShown = Boolean(total && total === count);\n\n    return (\n      <footer className=\"note spacer-top spacer-bottom text-center\">\n        {translateWithParameters('x_show', formatMeasure(count, 'INT', null))}\n\n        {hasMore && (\n          <a className=\"spacer-left text-muted\" href=\"#\" onClick={this.handleShowMoreClick}>\n            {translate('show_more')}\n          </a>\n        )}\n\n        {this.props.showLess && allShown && (\n          <a className=\"spacer-left text-muted\" href=\"#\" onClick={this.handleShowLessClick}>\n            {translate('show_less')}\n          </a>\n        )}\n      </footer>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { sortBy, without } from 'lodash';\nimport * as React from 'react';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { queriesEqual } from 'sonar-ui-common/helpers/query';\nimport FacetBox from './FacetBox';\nimport FacetHeader from './FacetHeader';\nimport FacetItem from './FacetItem';\nimport FacetItemsList from './FacetItemsList';\nimport ListStyleFacetFooter from './ListStyleFacetFooter';\nimport MultipleSelectionHint from './MultipleSelectionHint';\n\ninterface SearchResponse<S> {\n  maxResults?: boolean;\n  results: S[];\n  paging?: T.Paging;\n}\n\nexport interface Props<S> {\n  className?: string;\n  disabled?: boolean;\n  disabledHelper?: string;\n  facetHeader: string;\n  fetching: boolean;\n  getFacetItemText: (item: string) => string;\n  getSearchResultKey: (result: S) => string;\n  getSearchResultText: (result: S) => string;\n  loadSearchResultCount?: (result: S[]) => Promise<T.Dict<number>>;\n  maxInitialItems: number;\n  maxItems: number;\n  minSearchLength: number;\n  onChange: (changes: T.Dict<string | string[]>) => void;\n  onClear?: () => void;\n  onItemClick?: (itemValue: string, multiple: boolean) => void;\n  onSearch: (query: string, page?: number) => Promise<SearchResponse<S>>;\n  onToggle: (property: string) => void;\n  open: boolean;\n  property: string;\n  query?: T.RawQuery;\n  renderFacetItem: (item: string) => React.ReactNode;\n  renderSearchResult: (result: S, query: string) => React.ReactNode;\n  searchPlaceholder: string;\n  getSortedItems?: () => string[];\n  stats: T.Dict<number> | undefined;\n  values: string[];\n}\n\ninterface State<S> {\n  autoFocus: boolean;\n  query: string;\n  searching: boolean;\n  searchMaxResults?: boolean;\n  searchPaging?: T.Paging;\n  searchResults?: S[];\n  searchResultsCounts: T.Dict<number>;\n  showFullList: boolean;\n}\n\nexport default class ListStyleFacet<S> extends React.Component<Props<S>, State<S>> {\n  mounted = false;\n\n  static defaultProps = {\n    maxInitialItems: 15,\n    maxItems: 100,\n    minSearchLength: 2\n  };\n\n  state: State<S> = {\n    autoFocus: false,\n    query: '',\n    searching: false,\n    searchResultsCounts: {},\n    showFullList: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentDidUpdate(prevProps: Props<S>) {\n    if (!prevProps.open && this.props.open) {\n      // focus search field *only* if it was manually open\n      this.setState({ autoFocus: true });\n    } else if (\n      (prevProps.open && !this.props.open) ||\n      !queriesEqual(prevProps.query || {}, this.props.query || {})\n    ) {\n      // reset state when closing the facet, or when query changes\n      this.setState({\n        query: '',\n        searchMaxResults: undefined,\n        searchResults: undefined,\n        searching: false,\n        searchResultsCounts: {},\n        showFullList: false\n      });\n    } else if (\n      prevProps.stats !== this.props.stats &&\n      Object.keys(this.props.stats || {}).length < this.props.maxInitialItems\n    ) {\n      // show limited list if `stats` changed and there are less than 15 items\n      this.setState({ showFullList: false });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleItemClick = (itemValue: string, multiple: boolean) => {\n    if (this.props.onItemClick) {\n      this.props.onItemClick(itemValue, multiple);\n    } else {\n      const { values } = this.props;\n      if (multiple) {\n        const newValue = sortBy(\n          values.includes(itemValue) ? without(values, itemValue) : [...values, itemValue]\n        );\n        this.props.onChange({ [this.props.property]: newValue });\n      } else {\n        this.props.onChange({\n          [this.props.property]: values.includes(itemValue) && values.length < 2 ? [] : [itemValue]\n        });\n      }\n    }\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.props.property);\n  };\n\n  handleClear = () => {\n    if (this.props.onClear) {\n      this.props.onClear();\n    } else {\n      this.props.onChange({ [this.props.property]: [] });\n    }\n  };\n\n  stopSearching = () => {\n    if (this.mounted) {\n      this.setState({ searching: false });\n    }\n  };\n\n  search = (query: string) => {\n    if (query.length >= this.props.minSearchLength) {\n      this.setState({ query, searching: true });\n      this.props\n        .onSearch(query)\n        .then(this.loadCountsForSearchResults)\n        .then(({ maxResults, paging, results, stats }) => {\n          if (this.mounted) {\n            this.setState(state => ({\n              searching: false,\n              searchMaxResults: maxResults,\n              searchResults: results,\n              searchPaging: paging,\n              searchResultsCounts: { ...state.searchResultsCounts, ...stats }\n            }));\n          }\n        })\n        .catch(this.stopSearching);\n    } else {\n      this.setState({ query, searching: false, searchResults: [] });\n    }\n  };\n\n  searchMore = () => {\n    const { query, searchPaging, searchResults } = this.state;\n    if (query && searchResults && searchPaging) {\n      this.setState({ searching: true });\n      this.props\n        .onSearch(query, searchPaging.pageIndex + 1)\n        .then(this.loadCountsForSearchResults)\n        .then(({ paging, results, stats }) => {\n          if (this.mounted) {\n            this.setState(state => ({\n              searching: false,\n              searchResults: [...searchResults, ...results],\n              searchPaging: paging,\n              searchResultsCounts: { ...state.searchResultsCounts, ...stats }\n            }));\n          }\n        })\n        .catch(this.stopSearching);\n    }\n  };\n\n  loadCountsForSearchResults = (response: SearchResponse<S>) => {\n    const { loadSearchResultCount = () => Promise.resolve({}) } = this.props;\n    const resultsToLoad = response.results.filter(result => {\n      const key = this.props.getSearchResultKey(result);\n      return this.getStat(key) === undefined && this.state.searchResultsCounts[key] === undefined;\n    });\n    if (resultsToLoad.length > 0) {\n      return loadSearchResultCount(resultsToLoad).then(stats => ({ ...response, stats }));\n    } else {\n      return { ...response, stats: {} };\n    }\n  };\n\n  getStat(item: string) {\n    const { stats } = this.props;\n    return stats && stats[item] !== undefined ? stats && stats[item] : undefined;\n  }\n\n  showFullList = () => {\n    this.setState({ showFullList: true });\n  };\n\n  hideFullList = () => {\n    this.setState({ showFullList: false });\n  };\n\n  renderList() {\n    const { stats } = this.props;\n\n    if (!stats) {\n      return null;\n    }\n\n    const sortedItems = this.props.getSortedItems\n      ? this.props.getSortedItems()\n      : sortBy(\n          Object.keys(stats),\n          key => -stats[key],\n          key => this.props.getFacetItemText(key)\n        );\n\n    const limitedList = this.state.showFullList\n      ? sortedItems\n      : sortedItems.slice(0, this.props.maxInitialItems);\n\n    // make sure all selected items are displayed\n    const selectedBelowLimit = this.state.showFullList\n      ? []\n      : sortedItems\n          .slice(this.props.maxInitialItems)\n          .filter(item => this.props.values.includes(item));\n\n    const mightHaveMoreResults = sortedItems.length >= this.props.maxItems;\n\n    return (\n      <>\n        <FacetItemsList>\n          {limitedList.map(item => (\n            <FacetItem\n              active={this.props.values.includes(item)}\n              key={item}\n              name={this.props.renderFacetItem(item)}\n              onClick={this.handleItemClick}\n              stat={formatFacetStat(this.getStat(item))}\n              tooltip={this.props.getFacetItemText(item)}\n              value={item}\n            />\n          ))}\n        </FacetItemsList>\n        {selectedBelowLimit.length > 0 && (\n          <>\n            <div className=\"note spacer-bottom text-center\"></div>\n            <FacetItemsList>\n              {selectedBelowLimit.map(item => (\n                <FacetItem\n                  active={true}\n                  key={item}\n                  name={this.props.renderFacetItem(item)}\n                  onClick={this.handleItemClick}\n                  stat={formatFacetStat(this.getStat(item))}\n                  tooltip={this.props.getFacetItemText(item)}\n                  value={item}\n                />\n              ))}\n            </FacetItemsList>\n          </>\n        )}\n        <ListStyleFacetFooter\n          count={limitedList.length + selectedBelowLimit.length}\n          showLess={this.state.showFullList ? this.hideFullList : undefined}\n          showMore={this.showFullList}\n          total={sortedItems.length}\n        />\n        {mightHaveMoreResults && this.state.showFullList && (\n          <Alert className=\"spacer-top\" variant=\"warning\">\n            {translate('facet_might_have_more_results')}\n          </Alert>\n        )}\n      </>\n    );\n  }\n\n  renderSearch() {\n    if (!this.props.stats || !Object.keys(this.props.stats).length) {\n      return null;\n    }\n\n    return (\n      <SearchBox\n        autoFocus={this.state.autoFocus}\n        className=\"little-spacer-top spacer-bottom\"\n        loading={this.state.searching}\n        minLength={this.props.minSearchLength}\n        onChange={this.search}\n        placeholder={this.props.searchPlaceholder}\n        value={this.state.query}\n      />\n    );\n  }\n\n  renderSearchResults() {\n    const { searching, searchMaxResults, searchResults, searchPaging } = this.state;\n\n    if (!searching && (!searchResults || !searchResults.length)) {\n      return <div className=\"note spacer-bottom\">{translate('no_results')}</div>;\n    }\n\n    if (!searchResults) {\n      // initial search\n      return null;\n    }\n\n    return (\n      <>\n        <FacetItemsList>\n          {searchResults.map(result => this.renderSearchResult(result))}\n        </FacetItemsList>\n        {searchMaxResults && (\n          <Alert className=\"spacer-top\" variant=\"warning\">\n            {translate('facet_might_have_more_results')}\n          </Alert>\n        )}\n        {searchPaging && (\n          <ListFooter\n            className=\"spacer-bottom\"\n            count={searchResults.length}\n            loadMore={this.searchMore}\n            ready={!searching}\n            total={searchPaging.total}\n          />\n        )}\n      </>\n    );\n  }\n\n  renderSearchResult(result: S) {\n    const key = this.props.getSearchResultKey(result);\n    const active = this.props.values.includes(key);\n    const stat = this.getStat(key) || this.state.searchResultsCounts[key];\n    const disabled = !active && stat === 0;\n    return (\n      <FacetItem\n        active={active}\n        disabled={disabled}\n        key={key}\n        name={this.props.renderSearchResult(result, this.state.query)}\n        onClick={this.handleItemClick}\n        stat={formatFacetStat(stat)}\n        tooltip={this.props.getSearchResultText(result)}\n        value={key}\n      />\n    );\n  }\n\n  render() {\n    const { disabled, stats = {} } = this.props;\n    const { query, searching, searchResults } = this.state;\n    const values = this.props.values.map(item => this.props.getFacetItemText(item));\n    const loadingResults =\n      query !== '' && searching && (searchResults === undefined || searchResults.length === 0);\n    const showList = !query || loadingResults;\n    return (\n      <FacetBox\n        className={classNames(this.props.className, {\n          'search-navigator-facet-box-forbidden': disabled\n        })}\n        property={this.props.property}>\n        <FacetHeader\n          fetching={this.props.fetching}\n          name={\n            <Tooltip overlay={disabled ? this.props.disabledHelper : undefined}>\n              <span>{this.props.facetHeader}</span>\n            </Tooltip>\n          }\n          onClear={this.handleClear}\n          onClick={disabled ? undefined : this.handleHeaderClick}\n          open={this.props.open && !disabled}\n          values={values}\n        />\n\n        {this.props.open && !disabled && (\n          <>\n            {this.renderSearch()}\n            {showList ? this.renderList() : this.renderSearchResults()}\n            <MultipleSelectionHint options={Object.keys(stats).length} values={values.length} />\n          </>\n        )}\n      </FacetBox>\n    );\n  }\n}\n\nfunction formatFacetStat(stat: number | undefined) {\n  return stat && formatMeasure(stat, 'SHORT_INT');\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { isLoggedIn } from './users';\n\nexport function isPaidOrganization(organization: T.Organization | undefined): boolean {\n  return Boolean(organization && organization.subscription === 'PAID');\n}\n\nexport function hasPrivateAccess(\n  currentUser: T.CurrentUser,\n  organization: T.Organization | undefined,\n  userOrganizations: T.Organization[]\n): boolean {\n  return (\n    !isPaidOrganization(organization) ||\n    isCurrentUserMemberOf(currentUser, organization, userOrganizations)\n  );\n}\n\nexport function isCurrentUserMemberOf(\n  currentUser: T.CurrentUser,\n  organization: T.Organization | undefined,\n  userOrganizations: T.Organization[]\n): boolean {\n  return Boolean(\n    organization &&\n      isLoggedIn(currentUser) &&\n      ((organization.actions && organization.actions.admin) ||\n        userOrganizations.some(org => org.key === organization.key))\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelect from '../common/MultiSelect';\nimport './TagsList.css';\n\ninterface Props {\n  listSize: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  selectedTags: string[];\n  tags: string[];\n}\n\nexport default function TagsSelector(props: Props) {\n  return (\n    <MultiSelect\n      elements={props.tags}\n      listSize={props.listSize}\n      onSearch={props.onSearch}\n      onSelect={props.onSelect}\n      onUnselect={props.onUnselect}\n      placeholder={translate('search.search_for_tags')}\n      selectedElements={props.selectedTags}\n      validateSearchInput={validateTag}\n    />\n  );\n}\n\nexport function validateTag(value: string) {\n  // Allow only a-z, 0-9, '+', '-', '#', '.'\n  return value.toLowerCase().replace(/[^-a-z0-9+#.]/gi, '');\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as addMonths from 'date-fns/add_months';\nimport * as setMonth from 'date-fns/set_month';\nimport * as setYear from 'date-fns/set_year';\nimport * as subMonths from 'date-fns/sub_months';\nimport { range } from 'lodash';\nimport * as React from 'react';\nimport { DayModifiers, Modifier, Modifiers } from 'react-day-picker';\nimport { InjectedIntlProps, injectIntl } from 'react-intl';\nimport { ButtonIcon, ClearButton } from 'sonar-ui-common/components/controls/buttons';\nimport OutsideClickHandler from 'sonar-ui-common/components/controls/OutsideClickHandler';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport CalendarIcon from 'sonar-ui-common/components/icons/CalendarIcon';\nimport ChevronLeftIcon from 'sonar-ui-common/components/icons/ChevronLeftIcon';\nimport ChevronRightIcon from 'sonar-ui-common/components/icons/ChevronRightIcon';\nimport { lazyLoad } from 'sonar-ui-common/components/lazyLoad';\nimport {\n  getShortMonthName,\n  getShortWeekDayName,\n  getWeekDayName\n} from 'sonar-ui-common/helpers/l10n';\nimport './DayPicker.css';\nimport './styles.css';\n\nconst DayPicker = lazyLoad(() => import('react-day-picker'));\n\ninterface Props {\n  className?: string;\n  currentMonth?: Date;\n  highlightFrom?: Date;\n  highlightTo?: Date;\n  inputClassName?: string;\n  maxDate?: Date;\n  minDate?: Date;\n  name?: string;\n  onChange: (date: Date | undefined) => void;\n  placeholder: string;\n  value?: Date;\n}\n\ninterface State {\n  currentMonth: Date;\n  open: boolean;\n  lastHovered?: Date;\n}\n\ntype Week = [string, string, string, string, string, string, string];\n\nexport default class DateInput extends React.PureComponent<Props, State> {\n  input?: HTMLInputElement | null;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = { currentMonth: props.value || props.currentMonth || new Date(), open: false };\n  }\n\n  focus = () => {\n    if (this.input) {\n      this.input.focus();\n    }\n    this.openCalendar();\n  };\n\n  handleResetClick = () => {\n    this.closeCalendar();\n    this.props.onChange(undefined);\n  };\n\n  openCalendar = () => {\n    this.setState({\n      currentMonth: this.props.value || this.props.currentMonth || new Date(),\n      lastHovered: undefined,\n      open: true\n    });\n  };\n\n  closeCalendar = () => {\n    this.setState({ open: false });\n  };\n\n  handleDayClick = (day: Date, modifiers: DayModifiers) => {\n    if (!modifiers.disabled) {\n      this.closeCalendar();\n      this.props.onChange(day);\n    }\n  };\n\n  handleDayMouseEnter = (day: Date, modifiers: DayModifiers) => {\n    this.setState({ lastHovered: modifiers.disabled ? undefined : day });\n  };\n\n  handleCurrentMonthChange = ({ value }: { value: number }) => {\n    this.setState((state: State) => ({ currentMonth: setMonth(state.currentMonth, value) }));\n  };\n\n  handleCurrentYearChange = ({ value }: { value: number }) => {\n    this.setState(state => ({ currentMonth: setYear(state.currentMonth, value) }));\n  };\n\n  handlePreviousMonthClick = () => {\n    this.setState(state => ({ currentMonth: subMonths(state.currentMonth, 1) }));\n  };\n\n  handleNextMonthClick = () => {\n    this.setState(state => ({ currentMonth: addMonths(state.currentMonth, 1) }));\n  };\n\n  render() {\n    const { highlightFrom, highlightTo, minDate, value } = this.props;\n    const { lastHovered } = this.state;\n\n    const after = this.props.maxDate || new Date();\n\n    const months = range(12);\n    const years = range(new Date().getFullYear() - 10, new Date().getFullYear() + 1);\n\n    const selectedDays: Modifier[] = value ? [value] : [];\n    let modifiers: Partial<Modifiers> | undefined;\n    const lastHoveredOrValue = lastHovered || value;\n\n    if (highlightFrom && lastHoveredOrValue) {\n      modifiers = { highlighted: { from: highlightFrom, to: lastHoveredOrValue } };\n      selectedDays.push(highlightFrom);\n    }\n    if (highlightTo && lastHoveredOrValue) {\n      modifiers = { highlighted: { from: lastHoveredOrValue, to: highlightTo } };\n      selectedDays.push(highlightTo);\n    }\n\n    const weekdaysLong = range(7).map(getWeekDayName) as Week;\n    const weekdaysShort = range(7).map(getShortWeekDayName) as Week;\n\n    return (\n      <OutsideClickHandler onClickOutside={this.closeCalendar}>\n        <span className={classNames('date-input-control', this.props.className)}>\n          <InputWrapper\n            className={classNames('date-input-control-input', this.props.inputClassName, {\n              'is-filled': this.props.value !== undefined\n            })}\n            innerRef={node => (this.input = node)}\n            name={this.props.name}\n            onFocus={this.openCalendar}\n            placeholder={this.props.placeholder}\n            readOnly={true}\n            type=\"text\"\n            value={value}\n          />\n          <CalendarIcon className=\"date-input-control-icon\" fill=\"\" />\n          {this.props.value !== undefined && (\n            <ClearButton\n              className=\"button-tiny date-input-control-reset\"\n              iconProps={{ size: 12 }}\n              onClick={this.handleResetClick}\n            />\n          )}\n          {this.state.open && (\n            <div className=\"date-input-calendar\">\n              <nav className=\"date-input-calendar-nav\">\n                <ButtonIcon className=\"button-small\" onClick={this.handlePreviousMonthClick}>\n                  <ChevronLeftIcon />\n                </ButtonIcon>\n                <div className=\"date-input-calender-month\">\n                  <Select\n                    className=\"date-input-calender-month-select\"\n                    onChange={this.handleCurrentMonthChange}\n                    options={months.map(month => ({\n                      label: getShortMonthName(month),\n                      value: month\n                    }))}\n                    value={this.state.currentMonth.getMonth()}\n                  />\n                  <Select\n                    className=\"date-input-calender-month-select spacer-left\"\n                    onChange={this.handleCurrentYearChange}\n                    options={years.map(year => ({ label: String(year), value: year }))}\n                    value={this.state.currentMonth.getFullYear()}\n                  />\n                </div>\n                <ButtonIcon className=\"button-small\" onClick={this.handleNextMonthClick}>\n                  <ChevronRightIcon />\n                </ButtonIcon>\n              </nav>\n              <DayPicker\n                captionElement={<NullComponent />}\n                disabledDays={{ after, before: minDate }}\n                firstDayOfWeek={1}\n                modifiers={modifiers}\n                month={this.state.currentMonth}\n                navbarElement={<NullComponent />}\n                onDayClick={this.handleDayClick}\n                onDayMouseEnter={this.handleDayMouseEnter}\n                selectedDays={selectedDays}\n                weekdaysLong={weekdaysLong}\n                weekdaysShort={weekdaysShort}\n              />\n            </div>\n          )}\n        </span>\n      </OutsideClickHandler>\n    );\n  }\n}\n\nfunction NullComponent() {\n  return null;\n}\n\ntype InputWrapperProps = T.Omit<React.InputHTMLAttributes<HTMLInputElement>, 'value'> &\n  InjectedIntlProps & {\n    innerRef: React.Ref<HTMLInputElement>;\n    value: Date | undefined;\n  };\n\nconst InputWrapper = injectIntl(({ innerRef, intl, value, ...other }: InputWrapperProps) => {\n  const formattedValue =\n    value && intl.formatDate(value, { year: 'numeric', month: 'short', day: 'numeric' });\n  return <input {...other} ref={innerRef} value={formattedValue || ''} />;\n});\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./DayPicker.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./DayPicker.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./DayPicker.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".DayPicker{display:inline-block}.DayPicker-wrapper{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding-bottom:8px;flex-direction:row}.DayPicker-Months{display:flex;flex-wrap:wrap;justify-content:center}.DayPicker-Month{display:table;border-collapse:collapse;border-spacing:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin:8px 8px 0}.DayPicker-Weekdays{display:table-header-group}.DayPicker-WeekdaysRow{display:table-row}.DayPicker-Weekday{display:table-cell;padding:8px;font-size:12px;text-align:center;color:#999}.DayPicker-Weekday abbr[title]{border-bottom:none;text-decoration:none}.DayPicker-Body{display:table-row-group}.DayPicker-Week{display:table-row}.DayPicker-Day{display:table-cell;line-height:15px;padding:8px;text-align:center;cursor:pointer;vertical-align:top;outline:none}.DayPicker--interactionDisabled .DayPicker-Day{cursor:default}.DayPicker-Footer{padding-top:8px}.DayPicker-Day--today{font-weight:700}.DayPicker-Day--outside{cursor:default;color:#8b9898}.DayPicker-Day--disabled{color:#cdcdcd;cursor:not-allowed}.DayPicker-Day--sunday{background-color:#f7f8f8}.DayPicker-Day--sunday:not(.DayPicker-Day--today){color:#dce0e0}.DayPicker-Day--selected:not(.DayPicker-Day--disabled):not(.DayPicker-Day--outside){background-color:#4b9fd5;color:#fff}.DayPicker:not(.DayPicker--interactionDisabled) .DayPicker-Day:not(.DayPicker-Day--disabled):not(.DayPicker-Day--selected):not(.DayPicker-Day--highlighted):not(.DayPicker-Day--outside):hover{background-color:#f3f3f3}.DayPicker-Day--highlighted:not(.DayPicker-Day--disabled):not(.DayPicker-Day--selected):not(.DayPicker-Day--outside){background-color:#cae3f2}\", \"\"]);\n\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".date-input-control{position:relative;display:inline-block;cursor:pointer}.date-input-control-input{width:130px;padding-left:24px!important;cursor:pointer}.date-input-control-input.is-filled{padding-right:16px!important}.date-input-control-icon{position:absolute;top:4px;left:4px}.date-input-control-icon path{fill:#cdcdcd;transition:fill .3s ease}.date-input-control-input:focus+.date-input-control-icon path{fill:#4b9fd5}.date-input-control-reset{position:absolute;top:4px;right:4px;border:none}.date-input-calendar{position:absolute;z-index:7500;top:100%;left:0;border:1px solid #e6e6e6;background-color:#fff;box-shadow:0 6px 12px rgba(0,0,0,.175)}.date-input-calendar-nav{display:flex;justify-content:space-between;align-items:center;padding-top:8px;padding-left:8px;padding-right:8px}.date-input-calender-month-select{width:70px}\", \"\"]);\n\n","\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../node_modules/postcss-loader/src/index.js??postcss!./search-navigator.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../node_modules/postcss-loader/src/index.js??postcss!./search-navigator.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../node_modules/postcss-loader/src/index.js??postcss!./search-navigator.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".search-navigator.sticky .search-navigator-workspace-header{position:fixed;z-index:50;top:0;left:300px;right:0}.search-navigator.sticky .search-navigator-workspace-details,.search-navigator.sticky .search-navigator-workspace-list{padding-top:43px}.search-navigator-facet-box{background-color:#f3f3f3;font-size:13px}.search-navigator-facet-box.leak-facet-box{background-color:#fbf3d5;border:1px solid #f1e8cb}.search-navigator-facet-box.is-inner{margin-left:8px;padding-left:12px;border-left:1px solid #e6e6e6}.search-navigator-facet-box.is-inner .search-navigator-facet-header{padding-top:6px;padding-bottom:6px}.leak-facet-box:not(.hidden)+.leak-facet-box{border-top:none}.search-navigator-facet-box-forbidden{background-color:transparent;opacity:.5}.search-navigator-facet-box-forbidden .search-navigator-facet-container,.search-navigator-facet-box-forbidden .search-navigator-facet-empty,.search-navigator-facet-box-forbidden .search-navigator-facet-list{display:none}.search-navigator-facet-box-forbidden .search-navigator-facet-header{color:#777}.search-navigator-facet-box-forbidden .search-navigator-facet-header:hover{color:#4b9fd5}.search-navigator-facet-box-forbidden .search-navigator-facet-header{cursor:default}.search-navigator-facet-box-forbidden .search-navigator-facet-header:hover{color:#777}.search-navigator-facet{position:relative;display:inline-flex;justify-content:space-between;align-items:center;width:100%;height:24px;margin:0 0 1px;padding:0 6px;border:1px solid transparent;border-radius:2px;box-sizing:border-box;white-space:normal;opacity:.3;cursor:not-allowed;transition:none}a.search-navigator-facet{opacity:1;cursor:pointer}a.search-navigator-facet .facet-name{color:#444}.search-navigator-facet.active,a.search-navigator-facet:focus,a.search-navigator-facet:hover{border-color:#4b9fd5}.search-navigator-facet.facet-category{opacity:1;cursor:default}.search-navigator-facet.facet-category .facet-name{color:#777}.search-navigator-facet .facet-name{flex:1 1 auto;min-width:0;line-height:16px;padding:1px 0;color:#777;font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.search-navigator-facet .facet-stat{display:flex;align-items:center;margin-left:8px;color:#777;font-size:12px}.search-navigator-facet .facet-toggle{display:none;float:left;height:16px;line-height:16px;margin-top:-1px;padding:0 5px;border-radius:2px;font-size:11px;text-transform:lowercase}.search-navigator-facet .facet-toggle:hover{color:#444}.search-navigator-facet .facet-toggle-active.facet-toggle-green{background-color:#0a0;color:#fff}.search-navigator-facet .facet-toggle-active.facet-toggle-red{background-color:#d4333f;color:#fff}.leak-facet-box .search-navigator-facet .facet-name,.leak-facet-box .search-navigator-facet .facet-stat{background-color:#fbf3d5}.leak-facet-box .search-navigator-facet .facet-stat:before{background-image:linear-gradient(90deg,rgba(251,243,213,0),#fbf3d5 75%)}.search-navigator-facet.active{background-color:#cae3f2;text-decoration:none}.search-navigator-facet.active .facet-toggle{display:inline}.search-navigator-facet.compare .facet-toggle{cursor:not-allowed;opacity:.5}.search-navigator-facet.compare .facet-toggle.facet-toggle-green{background-color:#0a0;color:#fff}.search-navigator-facet.compare .facet-toggle.facet-toggle-red{background-color:transparent;color:#777}.search-navigator-facet-half{width:45%}.search-navigator-facet-half:nth-child(odd){margin-right:10%}.search-navigator-facet-highlight-under-container{margin-bottom:1px}.search-navigator-facet-highlight-under-container .search-navigator-facet{margin-bottom:0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover{border-bottom:none;padding-bottom:1px;border-radius:2px 2px 0 0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet{border-top:none;border-bottom:none;border-left-color:#4b9fd5;border-right-color:#4b9fd5;border-radius:0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:last-of-type,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet:last-of-type{border-bottom:1px solid #4b9fd5;border-radius:0 0 2px 2px}.search-navigator-facet-highlight-under-container .search-navigator-facet.active:last-of-type,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover:last-of-type{border-bottom:1px solid #4b9fd5;border-radius:2px}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet{background-color:#cae3f2;text-decoration:none}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet .facet-toggle{display:inline}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet.active{border-top:1px solid #4b9fd5}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover,.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover~.search-navigator-facet{background-color:#a1cde8;text-decoration:none}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover .facet-toggle,.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover~.search-navigator-facet .facet-toggle{display:inline}.search-navigator-facet-header{display:block;flex-shrink:0;padding:8px 0;color:#444;font-weight:600;overflow:hidden;white-space:nowrap}.search-navigator-facet-header>a{border-bottom:none;color:#444}.search-navigator-facet-header>a:focus,.search-navigator-facet-header>a:hover{color:#4b9fd5}.search-navigator-facet-header>.note{font-weight:400}.search-navigator-facet-header-value{display:block;overflow:hidden}.search-navigator-facet-header-value>.badge{display:block}.search-navigator-facet-header-button{flex-shrink:0;margin-left:auto}.search-navigator-facet-header-wrapper{display:flex;align-items:center}.search-navigator-facet-list{padding-bottom:8px;font-size:0}.search-navigator-facet-list-title{margin:0 8px 4px;font-size:12px;font-weight:700}.search-navigator-facet-list+.search-navigator-facet-list>.search-navigator-facet-list-title{border-top:1px solid #e6e6e6;padding-top:8px}.search-navigator-facet-empty{margin:0;padding:0 10px 10px;color:#444;font-size:12px;white-space:nowrap}.search-navigator-facet-footer{display:block;padding-bottom:8px;border-bottom:none}.search-navigator-facet-container{margin-top:6px;padding:0 10px 16px}.search-navigator-date-facet-selection{position:relative;padding-left:8px;font-size:12px}.search-navigator-date-facet-selection:after,.search-navigator-date-facet-selection:before{display:table;content:\\\"\\\";line-height:0}.search-navigator-date-facet-selection:after{clear:both}.search-navigator-date-facet-selection .date-input-control-input{width:115px!important}.search-navigator-date-facet-selection-dropdown-left{float:left;border-bottom:none}.search-navigator-date-facet-selection-dropdown-right{float:right;border-bottom:none}.search-navigator-date-facet-selection-input-left{position:absolute;left:0;width:100px;visibility:hidden}.search-navigator-date-facet-selection-input-right{position:absolute;right:0;width:100px;visibility:hidden}.search-navigator-date-facet-selection .date-input-control:not(:first-of-type) .date-input-calendar{left:auto;right:0}.search-navigator-filters{position:relative;padding:5px 10px;background-color:#f3f3f3}.search-navigator-filters:after,.search-navigator-filters:before{display:table;content:\\\"\\\";line-height:0}.search-navigator-filters:after{clear:both}.search-navigator-filters-header{margin-bottom:12px;padding-bottom:11px;border-bottom:1px solid #e6e6e6}.search-navigator-intro{width:500px;margin:0 auto;padding-top:100px}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport './MultipleSelectionHint.css';\n\ninterface Props {\n  options: number;\n  values: number;\n}\n\nexport default function MultipleSelectionHint({ options, values }: Props) {\n  // do not render if nothing is selected or there are less than 2 possible options\n  if (values === 0 || options < 2) {\n    return null;\n  }\n\n  return (\n    <div className=\"multiple-selection-hint\">\n      <div className=\"multiple-selection-hint-inner\">\n        {translate(\n          isOnMac()\n            ? 'shortcuts.section.global.facets.multiselection.mac'\n            : 'shortcuts.section.global.facets.multiselection'\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction isOnMac() {\n  return navigator.userAgent.indexOf('Mac OS X') !== -1;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function getStandards(): Promise<T.Standards> {\n  return import('./standards.json').then(x => x.default);\n}\n\nexport function renderCWECategory(standards: T.Standards, category: string): string {\n  const record = standards.cwe[category];\n  if (!record) {\n    return `CWE-${category}`;\n  } else if (category === 'unknown') {\n    return record.title;\n  } else {\n    return `CWE-${category} - ${record.title}`;\n  }\n}\n\nexport function renderOwaspTop10Category(\n  standards: T.Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.owaspTop10[category];\n  if (!record) {\n    return addPrefix(category.toUpperCase(), 'OWASP', withPrefix);\n  } else {\n    return addPrefix(`${category.toUpperCase()} - ${record.title}`, 'OWASP', withPrefix);\n  }\n}\n\nexport function renderSansTop25Category(\n  standards: T.Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.sansTop25[category];\n  return addPrefix(record ? record.title : category, 'SANS', withPrefix);\n}\n\nexport function renderSonarSourceSecurityCategory(\n  standards: T.Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.sonarsourceSecurity[category];\n  if (!record) {\n    return addPrefix(category.toUpperCase(), 'SONAR', withPrefix);\n  } else if (category === 'others') {\n    return record.title;\n  } else {\n    return addPrefix(record.title, 'SONAR', withPrefix);\n  }\n}\n\nfunction addPrefix(title: string, prefix: string, withPrefix: boolean) {\n  return withPrefix ? `${prefix} ${title}` : title;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport DocTooltip from '../../../components/docs/DocTooltip';\n\ninterface Props {\n  className?: string;\n  tooltip?: boolean;\n}\n\nexport default function BuiltInQualityProfileBadge({ className, tooltip = true }: Props) {\n  const badge = (\n    <div className={classNames('badge badge-info', className)}>\n      {translate('quality_profiles.built_in')}\n    </div>\n  );\n\n  if (tooltip) {\n    return (\n      <DocTooltip\n        doc={import(\n          /* webpackMode: \"eager\" */ 'Docs/tooltips/quality-profiles/built-in-quality-profile.md'\n        )}>\n        {badge}\n      </DocTooltip>\n    );\n  }\n  return badge;\n}\n","export default \"Built-in profiles are provided directly by the language analyzers and may be updated with each new analyzer version. They represent best-practice, minimum rule sets.\\n\"","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport FilterIcon from 'sonar-ui-common/components/icons/FilterIcon';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { Query } from '../query';\n\ninterface Props {\n  onFilterChange: (changes: Partial<Query>) => void;\n  rule: T.Rule;\n}\n\nexport default class SimilarRulesFilter extends React.PureComponent<Props> {\n  handleLanguageClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.rule.lang) {\n      this.props.onFilterChange({ languages: [this.props.rule.lang] });\n    }\n  };\n\n  handleTypeClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.onFilterChange({ types: [this.props.rule.type] });\n  };\n\n  handleSeverityClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.rule.severity) {\n      this.props.onFilterChange({ severities: [this.props.rule.severity] });\n    }\n  };\n\n  handleTagClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    const { tag } = event.currentTarget.dataset;\n    if (tag) {\n      this.props.onFilterChange({ tags: [tag] });\n    }\n  };\n\n  render() {\n    const { rule } = this.props;\n    const { tags = [], sysTags = [], severity } = rule;\n    const allTags = [...tags, ...sysTags];\n\n    return (\n      <Dropdown\n        className=\"display-inline-block\"\n        overlay={\n          <>\n            <ul className=\"menu\">\n              <li className=\"menu-header\">{translate('coding_rules.filter_similar_rules')}</li>\n              <li>\n                <a\n                  data-test=\"coding-rules__similar-language\"\n                  href=\"#\"\n                  onClick={this.handleLanguageClick}>\n                  {rule.langName}\n                </a>\n              </li>\n\n              <li>\n                <a\n                  className=\"display-flex-center\"\n                  data-test=\"coding-rules__similar-type\"\n                  href=\"#\"\n                  onClick={this.handleTypeClick}>\n                  <IssueTypeIcon query={rule.type} />\n                  <span className=\"little-spacer-left\">{translate('issue.type', rule.type)}</span>\n                </a>\n              </li>\n\n              {severity && (\n                <li>\n                  <a\n                    data-test=\"coding-rules__similar-severity\"\n                    href=\"#\"\n                    onClick={this.handleSeverityClick}>\n                    <SeverityHelper className=\"display-flex-center\" severity={rule.severity} />\n                  </a>\n                </li>\n              )}\n\n              {allTags.length > 0 && <li className=\"divider\" />}\n              {allTags.map(tag => (\n                <li key={tag}>\n                  <a\n                    data-tag={tag}\n                    data-test=\"coding-rules__similar-tag\"\n                    href=\"#\"\n                    onClick={this.handleTagClick}>\n                    <TagsIcon className=\"icon-half-transparent little-spacer-right text-middle\" />\n                    <span className=\"text-middle\">{tag}</span>\n                  </a>\n                </li>\n              ))}\n            </ul>\n          </>\n        }>\n        <a\n          className=\"js-rule-filter link-no-underline spacer-left dropdown-toggle\"\n          href=\"#\"\n          title={translate('coding_rules.filter_similar_rules')}>\n          <FilterIcon className=\"icon-half-transparent\" />\n          <DropdownIcon className=\"icon-half-transparent\" />\n        </a>\n      </Dropdown>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  displayReset: boolean;\n  onReset: () => void;\n}\n\nexport default function FiltersHeader({ displayReset, onReset }: Props) {\n  return (\n    <div className=\"search-navigator-filters-header\">\n      {displayReset && (\n        <div className=\"pull-right\">\n          <Button className=\"button-red\" id=\"coding-rules-clear-all-filters\" onClick={onReset}>\n            {translate('clear_all_filters')}\n          </Button>\n        </div>\n      )}\n\n      <h3>{translate('filters')}</h3>\n    </div>\n  );\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".coding-rules-extended-view .coding-rules-list{display:none}.coding-rules-extended-view .coding-rules-details{display:block}.coding-rules-detail-title{position:relative;display:inline-block;margin:16px 0;font-size:16px;font-weight:400}.coding-rules-detail-quality-profile-parameter{display:block;height:100%;padding-top:0;padding-right:10px}.coding-rules-detail-quality-profile-parameter .key,.coding-rules-detail-quality-profile-parameter .sep,.coding-rules-detail-quality-profile-parameter .value{display:inline;vertical-align:top}.coding-rules-detail-quality-profile-parameter .value{display:inline-block;vertical-align:top;line-height:23px;max-width:300px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Consolas,Liberation Mono,Menlo,Courier,monospace}.coding-rules-detail-quality-profile-parameter+.coding-rules-detail-quality-profile-parameter{margin-top:0}.coding-rules-detail-properties{display:flex;flex-wrap:wrap;align-items:center;margin-top:8px}.coding-rules-detail-properties+.coding-rules-detail-properties{margin-top:-10px}.coding-rules-detail-property{display:flex;align-items:center;margin-right:16px;margin-bottom:8px;font-size:12px}.coding-rules-detail-tag+.coding-rules-detail-tag{margin-left:10px}.coding-rules-detail-tags-change{cursor:pointer}.coding-rules-detail-tags-change:hover span{text-decoration:underline}.coding-rules-detail-tag-edit{line-height:1}.coding-rules-details-tag-edit-cancel{vertical-align:middle}.coding-rules-detail-description{margin:20px 0}.coding-rules-detail-description-extra{margin-top:-10px}.coding-rules-detail-extend-description-form{margin:10px 0}.coding-rules-detail-parameters{width:100%;margin:10px 0 20px}.coding-rules-detail-parameter-name{width:1px;vertical-align:top;padding:5px 10px 5px 0;font-weight:700}.coding-rules-detail-parameter-description{vertical-align:top;padding:5px}.coding-rules-detail-parameter-value{font-family:Consolas,Liberation Mono,Menlo,Courier,monospace;word-break:break-all}.coding-rules-detail-list,.coding-rules-detail-quality-profiles{width:100%;line-height:22px}.coding-rules-detail-list td,.coding-rules-detail-quality-profiles td{border-top:1px solid #e6e6e6}.coding-rules-detail-list tr:first-child td,.coding-rules-detail-quality-profiles tr:first-child td{border-top:none}.coding-rules-detail-list-name,.coding-rules-detail-quality-profile-name{vertical-align:top;width:1px;padding:8px 5px 8px 0;font-weight:600;white-space:nowrap}.coding-rules-detail-list-severity,.coding-rules-detail-quality-profile-severity{vertical-align:top;width:1px;padding:8px 5px;white-space:nowrap}.coding-rules-detail-quality-profile-severity i{margin-top:2px}.coding-rules-detail-list-parameters,.coding-rules-detail-quality-profile-parameters{vertical-align:top;padding:8px 5px}.coding-rules-detail-list-actions,.coding-rules-detail-quality-profile-actions{vertical-align:top;width:1px;padding:8px 0 8px 5px;text-align:right;white-space:nowrap}.coding-rules-detail-quality-profile-inheritance{font-size:12px;font-weight:400}.coding-rules-detail-quality-profiles-activation{margin-top:-3px;margin-left:10px}.coding-rules-most-violated-projects td{border-top-color:transparent}.coding-rules-most-violated-projects tr:first-child+tr td{border-top-color:#e6e6e6}.coding-rules-most-violated-projects .coding-rules-detail-list-name{font-weight:400}.coding-rule{padding:8px 10px 8px 8px;border:1px solid transparent;background-color:#fff}.coding-rule.selected{border-color:#4b9fd5!important}.coding-rule+.coding-rule{border-top-color:#e6e6e6}.coding-rule.selected+.coding-rule{border-top-color:transparent}.coding-rule-table{width:100%}.coding-rule-table td{vertical-align:top}.coding-rule-table+.coding-rule-table{margin-top:5px}.coding-rule-table-meta-cell{width:1px;white-space:nowrap}@media (max-width:1320px){.coding-rule-table .tags-list span{max-width:100px}}.coding-rule-title{line-height:20px;font-size:13px}.coding-rule-meta{padding:2px 2px 2px 30px;font-size:12px}.coding-rule-activation{width:40px;line-height:19.5px}.coding-rule-activation-actions{padding-left:20px}.coding-rule-section-separator{height:0;margin:10px 0;border-top:1px solid #e6e6e6}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { omit, sortBy, without } from 'lodash';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { highlightTerm } from 'sonar-ui-common/helpers/search';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport ListStyleFacet from '../../../components/facet/ListStyleFacet';\nimport MultipleSelectionHint from '../../../components/facet/MultipleSelectionHint';\nimport {\n  getStandards,\n  renderCWECategory,\n  renderOwaspTop10Category,\n  renderSansTop25Category,\n  renderSonarSourceSecurityCategory\n} from '../../../helpers/security-standard';\nimport { Facet, formatFacetStat, Query, STANDARDS } from '../utils';\n\ninterface Props {\n  cwe: string[];\n  cweOpen: boolean;\n  cweStats: T.Dict<number> | undefined;\n  fetchingCwe: boolean;\n  fetchingOwaspTop10: boolean;\n  fetchingSansTop25: boolean;\n  fetchingSonarSourceSecurity: boolean;\n  loadSearchResultCount?: (property: string, changes: Partial<Query>) => Promise<Facet>;\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: string) => void;\n  open: boolean;\n  owaspTop10: string[];\n  owaspTop10Open: boolean;\n  owaspTop10Stats: T.Dict<number> | undefined;\n  query: Partial<Query>;\n  sansTop25: string[];\n  sansTop25Open: boolean;\n  sansTop25Stats: T.Dict<number> | undefined;\n  sonarsourceSecurity: string[];\n  sonarsourceSecurityOpen: boolean;\n  sonarsourceSecurityStats: T.Dict<number> | undefined;\n}\n\ninterface State {\n  cweQuery: string;\n  standards: T.Standards;\n}\n\ntype StatsProp = 'owaspTop10Stats' | 'cweStats' | 'sansTop25Stats' | 'sonarsourceSecurityStats';\ntype ValuesProp = T.StandardType;\n\nexport default class StandardFacet extends React.PureComponent<Props, State> {\n  mounted = false;\n  property = STANDARDS;\n  state: State = {\n    cweQuery: '',\n    standards: { owaspTop10: {}, sansTop25: {}, cwe: {}, sonarsourceSecurity: {} }\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n\n    // load standards.json only if the facet is open, or there is a selected value\n    if (\n      this.props.open ||\n      this.props.owaspTop10.length > 0 ||\n      this.props.cwe.length > 0 ||\n      this.props.sansTop25.length > 0 ||\n      this.props.sonarsourceSecurity.length > 0\n    ) {\n      this.loadStandards();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!prevProps.open && this.props.open) {\n      this.loadStandards();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadStandards = () => {\n    getStandards().then(\n      ({ owaspTop10, sansTop25, cwe, sonarsourceSecurity }: T.Standards) => {\n        if (this.mounted) {\n          this.setState({ standards: { owaspTop10, sansTop25, cwe, sonarsourceSecurity } });\n        }\n      },\n      () => {}\n    );\n  };\n\n  getValues = () => {\n    return [\n      ...this.props.sonarsourceSecurity.map(item =>\n        renderSonarSourceSecurityCategory(this.state.standards, item, true)\n      ),\n      ...this.props.owaspTop10.map(item =>\n        renderOwaspTop10Category(this.state.standards, item, true)\n      ),\n      ...this.props.sansTop25.map(item =>\n        renderSansTop25Category(this.state.standards, item, true)\n      ),\n      ...this.props.cwe.map(item => renderCWECategory(this.state.standards, item))\n    ];\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.property);\n  };\n\n  handleOwaspTop10HeaderClick = () => {\n    this.props.onToggle('owaspTop10');\n  };\n\n  handleSansTop25HeaderClick = () => {\n    this.props.onToggle('sansTop25');\n  };\n\n  handleSonarSourceSecurityHeaderClick = () => {\n    this.props.onToggle('sonarsourceSecurity');\n  };\n\n  handleClear = () => {\n    this.props.onChange({\n      [this.property]: [],\n      owaspTop10: [],\n      sansTop25: [],\n      cwe: [],\n      sonarsourceSecurity: []\n    });\n  };\n\n  handleItemClick = (prop: ValuesProp, itemValue: string, multiple: boolean) => {\n    const items = this.props[prop];\n    if (multiple) {\n      const newValue = sortBy(\n        items.includes(itemValue) ? without(items, itemValue) : [...items, itemValue]\n      );\n      this.props.onChange({ [prop]: newValue });\n    } else {\n      this.props.onChange({\n        [prop]: items.includes(itemValue) && items.length < 2 ? [] : [itemValue]\n      });\n    }\n  };\n\n  handleOwaspTop10ItemClick = (itemValue: string, multiple: boolean) => {\n    this.handleItemClick('owaspTop10', itemValue, multiple);\n  };\n\n  handleSansTop25ItemClick = (itemValue: string, multiple: boolean) => {\n    this.handleItemClick('sansTop25', itemValue, multiple);\n  };\n\n  handleSonarSourceSecurityItemClick = (itemValue: string, multiple: boolean) => {\n    this.handleItemClick('sonarsourceSecurity', itemValue, multiple);\n  };\n\n  handleCWESearch = (query: string) => {\n    return Promise.resolve({\n      results: Object.keys(this.state.standards.cwe).filter(cwe =>\n        renderCWECategory(this.state.standards, cwe)\n          .toLowerCase()\n          .includes(query.toLowerCase())\n      )\n    });\n  };\n\n  loadCWESearchResultCount = (categories: string[]) => {\n    const { loadSearchResultCount } = this.props;\n    return loadSearchResultCount\n      ? loadSearchResultCount('cwe', { cwe: categories })\n      : Promise.resolve({});\n  };\n\n  renderList = (\n    statsProp: StatsProp,\n    valuesProp: ValuesProp,\n    renderName: (standards: T.Standards, category: string) => string,\n    onClick: (x: string, multiple?: boolean) => void\n  ) => {\n    const stats = this.props[statsProp];\n    const values = this.props[valuesProp];\n    if (!stats) {\n      return null;\n    }\n    const categories = sortBy(Object.keys(stats), key => -stats[key]);\n    return this.renderFacetItemsList(stats, values, categories, renderName, renderName, onClick);\n  };\n\n  // eslint-disable-next-line max-params\n  renderFacetItemsList = (\n    stats: any,\n    values: string[],\n    categories: string[],\n    renderName: (standards: T.Standards, category: string) => React.ReactNode,\n    renderTooltip: (standards: T.Standards, category: string) => string,\n    onClick: (x: string, multiple?: boolean) => void\n  ) => {\n    if (!categories.length) {\n      return (\n        <div className=\"search-navigator-facet-empty little-spacer-top\">\n          {translate('no_results')}\n        </div>\n      );\n    }\n\n    const getStat = (category: string) => {\n      return stats ? stats[category] : undefined;\n    };\n\n    return (\n      <FacetItemsList>\n        {categories.map(category => (\n          <FacetItem\n            active={values.includes(category)}\n            key={category}\n            name={renderName(this.state.standards, category)}\n            onClick={onClick}\n            stat={formatFacetStat(getStat(category))}\n            tooltip={renderTooltip(this.state.standards, category)}\n            value={category}\n          />\n        ))}\n      </FacetItemsList>\n    );\n  };\n\n  renderHint = (statsProp: StatsProp, valuesProp: ValuesProp) => {\n    const stats = this.props[statsProp] || {};\n    const values = this.props[valuesProp];\n    return <MultipleSelectionHint options={Object.keys(stats).length} values={values.length} />;\n  };\n\n  renderOwaspTop10List() {\n    return this.renderList(\n      'owaspTop10Stats',\n      'owaspTop10',\n      renderOwaspTop10Category,\n      this.handleOwaspTop10ItemClick\n    );\n  }\n\n  renderOwaspTop10Hint() {\n    return this.renderHint('owaspTop10Stats', 'owaspTop10');\n  }\n\n  renderSansTop25List() {\n    return this.renderList(\n      'sansTop25Stats',\n      'sansTop25',\n      renderSansTop25Category,\n      this.handleSansTop25ItemClick\n    );\n  }\n\n  renderSansTop25Hint() {\n    return this.renderHint('sansTop25Stats', 'sansTop25');\n  }\n\n  renderSonarSourceSecurityList() {\n    return this.renderList(\n      'sonarsourceSecurityStats',\n      'sonarsourceSecurity',\n      renderSonarSourceSecurityCategory,\n      this.handleSonarSourceSecurityItemClick\n    );\n  }\n\n  renderSonarSourceSecurityHint() {\n    return this.renderHint('sonarsourceSecurityStats', 'sonarsourceSecurity');\n  }\n\n  renderSubFacets() {\n    return (\n      <>\n        <FacetBox className=\"is-inner\" property=\"sonarsourceSecurity\">\n          <FacetHeader\n            fetching={this.props.fetchingSonarSourceSecurity}\n            name={translate('issues.facet.sonarsourceSecurity')}\n            onClick={this.handleSonarSourceSecurityHeaderClick}\n            open={this.props.sonarsourceSecurityOpen}\n            values={this.props.sonarsourceSecurity.map(item =>\n              renderSonarSourceSecurityCategory(this.state.standards, item)\n            )}\n          />\n          {this.props.sonarsourceSecurityOpen && (\n            <>\n              {this.renderSonarSourceSecurityList()}\n              {this.renderSonarSourceSecurityHint()}\n            </>\n          )}\n        </FacetBox>\n        <FacetBox className=\"is-inner\" property=\"owaspTop10\">\n          <FacetHeader\n            fetching={this.props.fetchingOwaspTop10}\n            name={translate('issues.facet.owaspTop10')}\n            onClick={this.handleOwaspTop10HeaderClick}\n            open={this.props.owaspTop10Open}\n            values={this.props.owaspTop10.map(item =>\n              renderOwaspTop10Category(this.state.standards, item)\n            )}\n          />\n          {this.props.owaspTop10Open && (\n            <>\n              {this.renderOwaspTop10List()}\n              {this.renderOwaspTop10Hint()}\n            </>\n          )}\n        </FacetBox>\n        <FacetBox className=\"is-inner\" property=\"sansTop25\">\n          <FacetHeader\n            fetching={this.props.fetchingSansTop25}\n            name={translate('issues.facet.sansTop25')}\n            onClick={this.handleSansTop25HeaderClick}\n            open={this.props.sansTop25Open}\n            values={this.props.sansTop25.map(item =>\n              renderSansTop25Category(this.state.standards, item)\n            )}\n          />\n          {this.props.sansTop25Open && (\n            <>\n              {this.renderSansTop25List()}\n              {this.renderSansTop25Hint()}\n            </>\n          )}\n        </FacetBox>\n        <ListStyleFacet<string>\n          className=\"is-inner\"\n          facetHeader={translate('issues.facet.cwe')}\n          fetching={this.props.fetchingCwe}\n          getFacetItemText={item => renderCWECategory(this.state.standards, item)}\n          getSearchResultKey={item => item}\n          getSearchResultText={item => renderCWECategory(this.state.standards, item)}\n          loadSearchResultCount={this.loadCWESearchResultCount}\n          onChange={this.props.onChange}\n          onSearch={this.handleCWESearch}\n          onToggle={this.props.onToggle}\n          open={this.props.cweOpen}\n          property=\"cwe\"\n          query={omit(this.props.query, 'cwe')}\n          renderFacetItem={item => renderCWECategory(this.state.standards, item)}\n          renderSearchResult={(item, query) =>\n            highlightTerm(renderCWECategory(this.state.standards, item), query)\n          }\n          searchPlaceholder={translate('search.search_for_cwe')}\n          stats={this.props.cweStats}\n          values={this.props.cwe}\n        />\n      </>\n    );\n  }\n\n  render() {\n    return (\n      <FacetBox property={this.property}>\n        <FacetHeader\n          name={translate('issues.facet', this.property)}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getValues()}\n        />\n\n        {this.props.open && this.renderSubFacets()}\n      </FacetBox>\n    );\n  }\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./MultipleSelectionHint.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./MultipleSelectionHint.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./MultipleSelectionHint.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".multiple-selection-hint{margin-top:8px;margin-bottom:8px;text-align:center}.multiple-selection-hint-inner{display:inline-block;height:24px;line-height:24px;border-radius:24px;background-color:#e6e6e6;text-align:center;padding:0 8px;font-size:12px}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\n\ninterface Props {\n  className?: string;\n  current?: number;\n  label: string;\n  total: number;\n}\n\nexport default function PageCounter({ className, current, label, total }: Props) {\n  return (\n    <div className={classNames('display-inline-block', className)}>\n      <strong className=\"little-spacer-right\">\n        {current !== undefined && formatMeasure(current + 1, 'INT') + ' / '}\n        <span className=\"js-page-counter-total\">{formatMeasure(total, 'INT')}</span>\n      </strong>\n      {label}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  type: T.IssueType | T.RuleType;\n}\n\nexport default function TypeHelper(props: Props) {\n  return (\n    <span className={props.className}>\n      <IssueTypeIcon className=\"little-spacer-right\" query={props.type} />\n      {translate('issue.type', props.type)}\n    </span>\n  );\n}\n","export default \"Custom rules are created by administrators from templates, and are the only fully-editable rules.\\n\""],"sourceRoot":""}