{"version":3,"sources":["webpack:///./src/main/js/apps/coding-rules/components/SimilarRulesFilter.tsx","webpack:///./src/main/js/apps/coding-rules/styles.css?1250","webpack:///./src/main/js/apps/coding-rules/styles.css","webpack:///../sonar-docs/src/tooltips/rules/custom-rules.md","webpack:///./src/main/js/components/workspace/WorkspaceRuleTitle.tsx","webpack:///./node_modules/sonar-ui-common/components/icons/LightBulbIcon.js","webpack:///./src/main/js/components/workspace/WorkspaceHeader.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsTagsPopup.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsMeta.tsx","webpack:///./src/main/js/apps/coding-rules/components/RemoveExtendedDescriptionModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsDescription.tsx","webpack:///./src/main/js/components/workspace/WorkspaceRuleDetails.tsx","webpack:///./src/main/js/components/workspace/WorkspaceRuleViewer.tsx","webpack:///./src/main/js/components/intl/DateFormatter.tsx","webpack:///./src/main/js/components/docs/DocTooltip.tsx","webpack:///./src/main/js/helpers/markdown.js","webpack:///./src/main/js/components/shared/SeverityHelper.tsx","webpack:///./src/main/js/api/rules.ts","webpack:///./src/main/js/components/tags/TagsList.css?aed4","webpack:///./src/main/js/components/hoc/withAppState.tsx","webpack:///./src/main/js/components/tags/TagsList.tsx","webpack:///./src/main/js/components/common/MultiSelectOption.tsx","webpack:///./src/main/js/components/common/MultiSelect.tsx","webpack:///./src/main/js/components/common/MarkdownTips.tsx","webpack:///./src/main/js/components/tags/TagsList.css","webpack:///./src/main/js/components/tags/TagsSelector.tsx"],"names":["SimilarRulesFilter","_super","_this","apply","this","arguments","handleLanguageClick","event","preventDefault","currentTarget","blur","props","rule","lang","onFilterChange","languages","handleTypeClick","types","type","handleSeverityClick","severity","severities","handleTagClick","tag","dataset","tags","__extends","prototype","render","_a","_b","sysTags","allTags","__spreadArrays","react__WEBPACK_IMPORTED_MODULE_0__","sonar_ui_common_components_controls_Dropdown__WEBPACK_IMPORTED_MODULE_1___default","a","className","overlay","Object","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_6__","data-test","href","onClick","langName","sonar_ui_common_components_icons_IssueTypeIcon__WEBPACK_IMPORTED_MODULE_4___default","query","_components_shared_SeverityHelper__WEBPACK_IMPORTED_MODULE_7__","length","map","key","data-tag","sonar_ui_common_components_icons_TagsIcon__WEBPACK_IMPORTED_MODULE_5___default","title","sonar_ui_common_components_icons_FilterIcon__WEBPACK_IMPORTED_MODULE_3___default","sonar_ui_common_components_icons_DropdownIcon__WEBPACK_IMPORTED_MODULE_2___default","content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","push","r","__webpack_exports__","d","WorkspaceRuleTitle","sonar_ui_common_components_icons_LightBulbIcon__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_icons_LightBulbIcon__WEBPACK_IMPORTED_MODULE_1___default","n","_app_theme__WEBPACK_IMPORTED_MODULE_2__","limited","name","fill","blue","defineProperty","value","React","Icon_1","default","size","createElement","style","WorkspaceHeader","handleDrag","_event","data","onResize","deltaY","children","react_draggable__WEBPACK_IMPORTED_MODULE_1__","offsetParent","document","body","onDrag","WorkspaceHeaderButton","icon","sonar_ui_common_components_icons_MinimizeIcon__WEBPACK_IMPORTED_MODULE_6___default","onCollapse","tooltip","maximized","sonar_ui_common_components_icons_CollapseIcon__WEBPACK_IMPORTED_MODULE_4___default","onMinimize","sonar_ui_common_components_icons_ExpandIcon__WEBPACK_IMPORTED_MODULE_5___default","onMaximize","sonar_ui_common_components_icons_ClearIcon__WEBPACK_IMPORTED_MODULE_3___default","onClose","Icon","sonar_ui_common_components_controls_buttons__WEBPACK_IMPORTED_MODULE_2__","color","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_7__","LIST_SIZE","RuleDetailsTagsPopup","mounted","state","searchResult","onSearch","rules","q","ps","Math","min","organization","then","setState","without_default","onSelect","setTags","uniq_default","onUnselect","componentDidMount","componentWillUnmount","availableTags","difference_default","index_js_exposed","TagsSelector","listSize","selectedTags","EXTERNAL_RULE_REPO_PREFIX","RuleDetailsMeta_RuleDetailsMeta","RuleDetailsMeta","renderType","ruleDetails","Tooltip_default","l10n","data-meta","IssueTypeIcon_default","renderSeverity","SeverityHelper","renderStatus","status","renderTags","canWrite","_c","RuleDetailsMeta_spreadArrays","Dropdown_default","closeOnClick","closeOnClickOutside","components_RuleDetailsTagsPopup","onTagsChange","overlayPlacement","popups","BottomLeft","buttons","TagsList","allowUpdate","renderCreationDate","DateFormatter","date","createdAt","renderRepository","referencedRepositories","repository","repo","renderTemplate","isTemplate","renderParentTemplate","templateKey","es","to","urls","DocTooltip","doc","Promise","resolve","bind","renderRemediation","debtRemFnType","debtRemFnOffset","debtRemFnCoeff","effortToFixDescription","renderScope","scope","RuleScopeIcon_default","renderExternalBadge","engine","replace","RegExp","RuleDetailsMeta_extends","renderKey","displayedKey","startsWith","substr","hasTypeData","isExternal","LinkIcon_default","hideSimilarRulesFilter","RemoveExtendedDescriptionModal","onCancel","onSubmit","header","SimpleModal_default","onCloseClick","onFormSubmit","submitting","disabled","RuleDetailsDescription_RuleDetailsDescription","RuleDetailsDescription","description","descriptionForm","removeDescriptionModal","handleDescriptionChange","handleCancelClick","handleSaveClick","updateDescription","handleRemoveDescriptionClick","handleCancelRemoving","handleConfirmRemoving","text","markdown_note","onChange","handleExtendDescriptionClick","mdNote","renderDescription","id","htmlNote","dangerouslySetInnerHTML","__html","renderForm","colSpan","autoFocus","rows","MarkdownTips","hasDescription","htmlDesc","WorkspaceRuleDetails_WorkspaceRuleDetails","WorkspaceRuleDetails","loading","fetchRuleDetails","all","organizationKey","ruleKey","repositories","keyBy_default","onLoad","noOp","componentDidUpdate","prevProps","appState","organizationsEnabled","DeferredSpinner_default","workspace_WorkspaceRuleDetails","withAppState","WorkspaceRuleViewer_WorkspaceRuleViewer","WorkspaceRuleViewer","handleClose","handleLoaded","setTimeout","WorkspaceRuleViewer_extends","aria-busy","aria-live","height","formatterOption","year","month","day","longFormatterOption","long","react_intl__WEBPACK_IMPORTED_MODULE_1__","__assign","sonar_ui_common_helpers_dates__WEBPACK_IMPORTED_MODULE_2__","DocMarkdownBlock","sonar_ui_common_components_lazyLoad__WEBPACK_IMPORTED_MODULE_2__","e","open","close","addEventListener","removeEventListener","sonar_ui_common_components_controls_HelpTooltip__WEBPACK_IMPORTED_MODULE_1___default","childProps","overlayProps","_helpers_markdown__WEBPACK_IMPORTED_MODULE_3__","isTooltip","getFrontMatterPosition","lines","firstLine","lastLine","trim","parseFrontMatter","tokens","split","x","cutConditionalContent","beginning","ending","newContent","start","indexOf","end","substring","console","error","Error","getFrontMatter","position","slice","separateFrontMatter","frontmatter","content_1","join","filterContent","regexBase","isSonarCloud","getInstance","contentWithoutStatic","sonar_ui_common_components_icons_SeverityIcon__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_icons_SeverityIcon__WEBPACK_IMPORTED_MODULE_1___default","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_2__","getRulesApp","searchRules","takeFacet","getRuleDetails","getRuleTags","createRule","deleteRule","updateRule","sonar_ui_common_helpers_request__WEBPACK_IMPORTED_MODULE_0__","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_1__","catch","response","property","facet","facets","find","values","parameters","reject","WrappedComponent","Wrapper","displayName","_utils__WEBPACK_IMPORTED_MODULE_3__","react_redux__WEBPACK_IMPORTED_MODULE_1__","_store_rootReducer__WEBPACK_IMPORTED_MODULE_2__","classnames__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_icons_DropdownIcon__WEBPACK_IMPORTED_MODULE_2__","sonar_ui_common_components_icons_TagsIcon__WEBPACK_IMPORTED_MODULE_3__","sonar_ui_common_components_icons_TagsIcon__WEBPACK_IMPORTED_MODULE_3___default","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_4__","aria-label","aria-hidden","MultiSelectOption","active","custom","element","selected","onHover","classnames","label","renderLabel","onFocus","onMouseOver","Checkbox_default","checked","Boolean","onCheck","onSelectChange","MultiSelect_MultiSelect","MultiSelect","call","handleSelectChange","item","onSelectItem","onUnselectItem","handleSearchChange","onSearchQuery","validateSearchInput","handleElementHover","prevState","activeIdx","getAllElements","handleKeyboard","evt","keyCode","stopPropagation","selectNextElement","selectPreviousElement","toggleSelect","stopLoading","isNewElement","elem","selectedElements","elements","updateSelectedElements","filterSelected","updateUnselectedElements","unselectedElements","setElementActive","idx","allElements","container","componentWillReceiveProps","nextProps","totalElements","searchInput","focus","allowSelection","allowNewElements","_d","footerNode","_e","activeElement","showNewElement","infiniteList","listClasses","menu-vertically-limited","spacer-top","with-top-separator","with-bottom-separator","ref","div","SearchBox_default","placeholder","defaultProps","filter","includes","handleClick","window","_helpers_urls__WEBPACK_IMPORTED_MODULE_3__","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_1__","_common_MultiSelect__WEBPACK_IMPORTED_MODULE_2__","validateTag","toLowerCase"],"mappings":"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","file":"js/300.1582644816097.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport FilterIcon from 'sonar-ui-common/components/icons/FilterIcon';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { Query } from '../query';\n\ninterface Props {\n  onFilterChange: (changes: Partial<Query>) => void;\n  rule: T.Rule;\n}\n\nexport default class SimilarRulesFilter extends React.PureComponent<Props> {\n  handleLanguageClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.rule.lang) {\n      this.props.onFilterChange({ languages: [this.props.rule.lang] });\n    }\n  };\n\n  handleTypeClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.onFilterChange({ types: [this.props.rule.type] });\n  };\n\n  handleSeverityClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.rule.severity) {\n      this.props.onFilterChange({ severities: [this.props.rule.severity] });\n    }\n  };\n\n  handleTagClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    const { tag } = event.currentTarget.dataset;\n    if (tag) {\n      this.props.onFilterChange({ tags: [tag] });\n    }\n  };\n\n  render() {\n    const { rule } = this.props;\n    const { tags = [], sysTags = [], severity } = rule;\n    const allTags = [...tags, ...sysTags];\n\n    return (\n      <Dropdown\n        className=\"display-inline-block\"\n        overlay={\n          <>\n            <ul className=\"menu\">\n              <li className=\"menu-header\">{translate('coding_rules.filter_similar_rules')}</li>\n              <li>\n                <a\n                  data-test=\"coding-rules__similar-language\"\n                  href=\"#\"\n                  onClick={this.handleLanguageClick}>\n                  {rule.langName}\n                </a>\n              </li>\n\n              <li>\n                <a\n                  className=\"display-flex-center\"\n                  data-test=\"coding-rules__similar-type\"\n                  href=\"#\"\n                  onClick={this.handleTypeClick}>\n                  <IssueTypeIcon query={rule.type} />\n                  <span className=\"little-spacer-left\">{translate('issue.type', rule.type)}</span>\n                </a>\n              </li>\n\n              {severity && (\n                <li>\n                  <a\n                    data-test=\"coding-rules__similar-severity\"\n                    href=\"#\"\n                    onClick={this.handleSeverityClick}>\n                    <SeverityHelper className=\"display-flex-center\" severity={rule.severity} />\n                  </a>\n                </li>\n              )}\n\n              {allTags.length > 0 && <li className=\"divider\" />}\n              {allTags.map(tag => (\n                <li key={tag}>\n                  <a\n                    data-tag={tag}\n                    data-test=\"coding-rules__similar-tag\"\n                    href=\"#\"\n                    onClick={this.handleTagClick}>\n                    <TagsIcon className=\"icon-half-transparent little-spacer-right text-middle\" />\n                    <span className=\"text-middle\">{tag}</span>\n                  </a>\n                </li>\n              ))}\n            </ul>\n          </>\n        }>\n        <a\n          className=\"js-rule-filter link-no-underline spacer-left dropdown-toggle\"\n          href=\"#\"\n          title={translate('coding_rules.filter_similar_rules')}>\n          <FilterIcon className=\"icon-half-transparent\" />\n          <DropdownIcon className=\"icon-half-transparent\" />\n        </a>\n      </Dropdown>\n    );\n  }\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".coding-rules-extended-view .coding-rules-list{display:none}.coding-rules-extended-view .coding-rules-details{display:block}.coding-rules-detail-title{position:relative;display:inline-block;margin:16px 0;font-size:16px;font-weight:400}.coding-rules-detail-quality-profile-parameter{display:block;height:100%;padding-top:0;padding-right:10px}.coding-rules-detail-quality-profile-parameter .key,.coding-rules-detail-quality-profile-parameter .sep,.coding-rules-detail-quality-profile-parameter .value{display:inline;vertical-align:top}.coding-rules-detail-quality-profile-parameter .value{display:inline-block;vertical-align:top;line-height:23px;max-width:300px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Consolas,Liberation Mono,Menlo,Courier,monospace}.coding-rules-detail-quality-profile-parameter+.coding-rules-detail-quality-profile-parameter{margin-top:0}.coding-rules-detail-properties{display:flex;flex-wrap:wrap;align-items:center;margin-top:8px}.coding-rules-detail-properties+.coding-rules-detail-properties{margin-top:-10px}.coding-rules-detail-property{display:flex;align-items:center;margin-right:16px;margin-bottom:8px;font-size:12px}.coding-rules-detail-tag+.coding-rules-detail-tag{margin-left:10px}.coding-rules-detail-tags-change{cursor:pointer}.coding-rules-detail-tags-change:hover span{text-decoration:underline}.coding-rules-detail-tag-edit{line-height:1}.coding-rules-details-tag-edit-cancel{vertical-align:middle}.coding-rules-detail-description{margin:20px 0}.coding-rules-detail-description-extra{margin-top:-10px}.coding-rules-detail-extend-description-form{margin:10px 0}.coding-rules-detail-parameters{width:100%;margin:10px 0 20px}.coding-rules-detail-parameter-name{width:1px;vertical-align:top;padding:5px 10px 5px 0;font-weight:700}.coding-rules-detail-parameter-description{vertical-align:top;padding:5px}.coding-rules-detail-parameter-value{font-family:Consolas,Liberation Mono,Menlo,Courier,monospace;word-break:break-all}.coding-rules-detail-list,.coding-rules-detail-quality-profiles{width:100%;line-height:22px}.coding-rules-detail-list td,.coding-rules-detail-quality-profiles td{border-top:1px solid #e6e6e6}.coding-rules-detail-list tr:first-child td,.coding-rules-detail-quality-profiles tr:first-child td{border-top:none}.coding-rules-detail-list-name,.coding-rules-detail-quality-profile-name{vertical-align:top;width:1px;padding:8px 5px 8px 0;font-weight:600;white-space:nowrap}.coding-rules-detail-list-severity,.coding-rules-detail-quality-profile-severity{vertical-align:top;width:1px;padding:8px 5px;white-space:nowrap}.coding-rules-detail-quality-profile-severity i{margin-top:2px}.coding-rules-detail-list-parameters,.coding-rules-detail-quality-profile-parameters{vertical-align:top;padding:8px 5px}.coding-rules-detail-list-actions,.coding-rules-detail-quality-profile-actions{vertical-align:top;width:1px;padding:8px 0 8px 5px;text-align:right;white-space:nowrap}.coding-rules-detail-quality-profile-inheritance{font-size:12px;font-weight:400}.coding-rules-detail-quality-profiles-activation{margin-top:-3px;margin-left:10px}.coding-rules-most-violated-projects td{border-top-color:transparent}.coding-rules-most-violated-projects tr:first-child+tr td{border-top-color:#e6e6e6}.coding-rules-most-violated-projects .coding-rules-detail-list-name{font-weight:400}.coding-rule{padding:8px 10px 8px 8px;border:1px solid transparent;background-color:#fff}.coding-rule.selected{border-color:#4b9fd5!important}.coding-rule+.coding-rule{border-top-color:#e6e6e6}.coding-rule.selected+.coding-rule{border-top-color:transparent}.coding-rule-table{width:100%}.coding-rule-table td{vertical-align:top}.coding-rule-table+.coding-rule-table{margin-top:5px}.coding-rule-table-meta-cell{width:1px;white-space:nowrap}@media (max-width:1320px){.coding-rule-table .tags-list span{max-width:100px}}.coding-rule-title{line-height:20px;font-size:13px}.coding-rule-meta{padding:2px 2px 2px 30px;font-size:12px}.coding-rule-activation{width:40px;line-height:19.5px}.coding-rule-activation-actions{padding-left:20px}.coding-rule-section-separator{height:0;margin:10px 0;border-top:1px solid #e6e6e6}\", \"\"]);\n\n","export default \"Custom rules are created by administrators from templates, and are the only fully-editable rules.\\n\"","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport LightBulbIcon from 'sonar-ui-common/components/icons/LightBulbIcon';\nimport { colors } from '../../app/theme';\nimport { RuleDescriptor } from './context';\n\ninterface Props {\n  limited?: boolean;\n  rule: RuleDescriptor;\n}\n\nexport default function WorkspaceRuleTitle({ limited, rule }: Props) {\n  const { name = '—' } = rule;\n  return (\n    <>\n      <LightBulbIcon className=\"little-spacer-right\" fill={colors.blue} />\n      {limited ? <span className=\"text-limited\">{name}</span> : name}\n    </>\n  );\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar Icon_1 = require(\"./Icon\");\nfunction LightBulbIcon(_a) {\n    var className = _a.className, _b = _a.fill, fill = _b === void 0 ? 'currentColor' : _b, size = _a.size;\n    return (React.createElement(Icon_1.default, { className: className, size: size },\n        React.createElement(\"path\", { d: \"M10.042 5.083a.3.3 0 0 1-.292.292.3.3 0 0 1-.292-.292c0-.629-.975-.875-1.458-.875a.3.3 0 0 1-.292-.291A.3.3 0 0 1 8 3.625c.848 0 2.042.447 2.042 1.458zm1.458 0c0-1.823-1.85-2.916-3.5-2.916S4.5 3.26 4.5 5.083c0 .584.237 1.194.62 1.641.173.2.373.392.556.602.647.774 1.194 1.686 1.285 2.716h2.078c.091-1.03.638-1.942 1.285-2.716.183-.21.383-.402.556-.602.383-.447.62-1.057.62-1.64zm1.167 0c0 .94-.31 1.75-.94 2.443-.628.693-1.457 1.668-1.53 2.643a.876.876 0 0 1 .428.748.852.852 0 0 1-.228.583.852.852 0 0 1 .228.583c0 .301-.155.575-.41.739a.89.89 0 0 1 .118.428c0 .592-.465.875-.993.875A1.479 1.479 0 0 1 8 15a1.479 1.479 0 0 1-1.34-.875c-.528 0-.993-.283-.993-.875 0-.146.045-.3.118-.428a.876.876 0 0 1-.41-.739c0-.218.082-.428.228-.583a.852.852 0 0 1-.228-.583c0-.301.164-.593.428-.748-.073-.975-.902-1.95-1.53-2.643a3.507 3.507 0 0 1-.94-2.443C3.333 2.604 5.694 1 8 1c2.306 0 4.667 1.604 4.667 4.083z\", style: { fill: fill } })));\n}\nexports.default = LightBulbIcon;\n//# sourceMappingURL=LightBulbIcon.js.map","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DraggableCore, DraggableData } from 'react-draggable';\nimport { ButtonIcon } from 'sonar-ui-common/components/controls/buttons';\nimport ClearIcon from 'sonar-ui-common/components/icons/ClearIcon';\nimport CollapseIcon from 'sonar-ui-common/components/icons/CollapseIcon';\nimport ExpandIcon from 'sonar-ui-common/components/icons/ExpandIcon';\nimport { IconProps } from 'sonar-ui-common/components/icons/Icon';\nimport MinimizeIcon from 'sonar-ui-common/components/icons/MinimizeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nexport interface Props {\n  children: React.ReactNode;\n  maximized?: boolean;\n  onClose: () => void;\n  onCollapse: () => void;\n  onMaximize: () => void;\n  onMinimize: () => void;\n  onResize: (deltaY: number) => void;\n}\n\nexport default class WorkspaceHeader extends React.PureComponent<Props> {\n  handleDrag = (_event: MouseEvent, data: DraggableData) => {\n    this.props.onResize(data.deltaY);\n  };\n\n  render() {\n    return (\n      <header className=\"workspace-viewer-header\">\n        <h6 className=\"workspace-viewer-name\">{this.props.children}</h6>\n\n        <DraggableCore offsetParent={document.body} onDrag={this.handleDrag}>\n          <div className=\"workspace-viewer-resize js-resize\" />\n        </DraggableCore>\n\n        <div className=\"workspace-viewer-actions\">\n          <WorkspaceHeaderButton\n            icon={MinimizeIcon}\n            onClick={this.props.onCollapse}\n            tooltip=\"workspace.minimize\"\n          />\n\n          {this.props.maximized ? (\n            <WorkspaceHeaderButton\n              icon={CollapseIcon}\n              onClick={this.props.onMinimize}\n              tooltip=\"workspace.normal_size\"\n            />\n          ) : (\n            <WorkspaceHeaderButton\n              icon={ExpandIcon}\n              onClick={this.props.onMaximize}\n              tooltip=\"workspace.full_window\"\n            />\n          )}\n\n          <WorkspaceHeaderButton\n            icon={ClearIcon}\n            onClick={this.props.onClose}\n            tooltip=\"workspace.close\"\n          />\n        </div>\n      </header>\n    );\n  }\n}\n\ninterface WorkspaceHeaderButtonProps {\n  icon: React.SFC<IconProps>;\n  onClick: () => void;\n  tooltip: string;\n}\n\nfunction WorkspaceHeaderButton({ icon: Icon, onClick, tooltip }: WorkspaceHeaderButtonProps) {\n  return (\n    <ButtonIcon\n      className=\"workspace-header-icon\"\n      color=\"#fff\"\n      onClick={onClick}\n      tooltip={translate(tooltip)}>\n      <Icon fill={undefined} />\n    </ButtonIcon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { difference, uniq, without } from 'lodash';\nimport * as React from 'react';\nimport { getRuleTags } from '../../../api/rules';\nimport TagsSelector from '../../../components/tags/TagsSelector';\n\nexport interface Props {\n  organization: string | undefined;\n  setTags: (tags: string[]) => void;\n  sysTags: string[];\n  tags: string[];\n}\n\ninterface State {\n  searchResult: string[];\n}\n\nconst LIST_SIZE = 10;\n\nexport default class RuleDetailsTagsPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { searchResult: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onSearch = (query: string) => {\n    return getRuleTags({\n      q: query,\n      ps: Math.min(this.props.tags.length + LIST_SIZE, 100),\n      organization: this.props.organization\n    }).then(\n      tags => {\n        if (this.mounted) {\n          // systems tags can not be unset, don't display them in the results\n          this.setState({ searchResult: without(tags, ...this.props.sysTags) });\n        }\n      },\n      () => {}\n    );\n  };\n\n  onSelect = (tag: string) => {\n    this.props.setTags(uniq([...this.props.tags, tag]));\n  };\n\n  onUnselect = (tag: string) => {\n    this.props.setTags(without(this.props.tags, tag));\n  };\n\n  render() {\n    const availableTags = difference(this.state.searchResult, this.props.tags);\n    return (\n      <TagsSelector\n        listSize={LIST_SIZE}\n        onSearch={this.onSearch}\n        onSelect={this.onSelect}\n        onUnselect={this.onUnselect}\n        selectedTags={this.props.tags}\n        tags={availableTags}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport LinkIcon from 'sonar-ui-common/components/icons/LinkIcon';\nimport RuleScopeIcon from 'sonar-ui-common/components/icons/RuleScopeIcon';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport DocTooltip from '../../../components/docs/DocTooltip';\nimport DateFormatter from '../../../components/intl/DateFormatter';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport TagsList from '../../../components/tags/TagsList';\nimport { getRuleUrl } from '../../../helpers/urls';\nimport { Query } from '../query';\nimport RuleDetailsTagsPopup from './RuleDetailsTagsPopup';\nimport SimilarRulesFilter from './SimilarRulesFilter';\n\ninterface Props {\n  canWrite: boolean | undefined;\n  hideSimilarRulesFilter?: boolean;\n  onFilterChange: (changes: Partial<Query>) => void;\n  onTagsChange: (tags: string[]) => void;\n  organization: string | undefined;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  ruleDetails: T.RuleDetails;\n}\n\nconst EXTERNAL_RULE_REPO_PREFIX = 'external_';\n\nexport default class RuleDetailsMeta extends React.PureComponent<Props> {\n  renderType = () => {\n    const { ruleDetails } = this.props;\n    return (\n      <Tooltip overlay={translate('coding_rules.type.tooltip', ruleDetails.type)}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"type\">\n          <IssueTypeIcon className=\"little-spacer-right\" query={ruleDetails.type} />\n          {translate('issue.type', ruleDetails.type)}\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderSeverity = () => (\n    <Tooltip overlay={translate('default_severity')}>\n      <li className=\"coding-rules-detail-property\" data-meta=\"severity\">\n        <SeverityHelper\n          className=\"display-inline-flex-center\"\n          severity={this.props.ruleDetails.severity}\n        />\n      </li>\n    </Tooltip>\n  );\n\n  renderStatus = () => {\n    const { ruleDetails } = this.props;\n    if (ruleDetails.status === 'READY') {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('status')}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"status\">\n          <span className=\"badge badge-error\">{translate('rules.status', ruleDetails.status)}</span>\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderTags = () => {\n    const { canWrite, ruleDetails } = this.props;\n    const { sysTags = [], tags = [] } = ruleDetails;\n    const allTags = [...sysTags, ...tags];\n\n    return (\n      <li className=\"coding-rules-detail-property\" data-meta=\"tags\">\n        {this.props.canWrite ? (\n          <Dropdown\n            closeOnClick={false}\n            closeOnClickOutside={true}\n            overlay={\n              <RuleDetailsTagsPopup\n                organization={this.props.organization}\n                setTags={this.props.onTagsChange}\n                sysTags={sysTags}\n                tags={tags}\n              />\n            }\n            overlayPlacement={PopupPlacement.BottomLeft}>\n            <ButtonLink>\n              <TagsList\n                allowUpdate={canWrite}\n                tags={allTags.length > 0 ? allTags : [translate('coding_rules.no_tags')]}\n              />\n            </ButtonLink>\n          </Dropdown>\n        ) : (\n          <TagsList\n            allowUpdate={canWrite}\n            className=\"display-flex-center\"\n            tags={allTags.length > 0 ? allTags : [translate('coding_rules.no_tags')]}\n          />\n        )}\n      </li>\n    );\n  };\n\n  renderCreationDate = () => (\n    <li className=\"coding-rules-detail-property\" data-meta=\"available-since\">\n      <span className=\"little-spacer-right\">{translate('coding_rules.available_since')}</span>\n      <DateFormatter date={this.props.ruleDetails.createdAt} />\n    </li>\n  );\n\n  renderRepository = () => {\n    const { referencedRepositories, ruleDetails } = this.props;\n    const repository = referencedRepositories[ruleDetails.repo];\n    if (!repository) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('coding_rules.repository_language')}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"repository\">\n          {repository.name} ({ruleDetails.langName})\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderTemplate = () => {\n    if (!this.props.ruleDetails.isTemplate) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('coding_rules.rule_template.title')}>\n        <li className=\"coding-rules-detail-property\">{translate('coding_rules.rule_template')}</li>\n      </Tooltip>\n    );\n  };\n\n  renderParentTemplate = () => {\n    const { ruleDetails } = this.props;\n    if (!ruleDetails.templateKey) {\n      return null;\n    }\n    return (\n      <li className=\"coding-rules-detail-property\">\n        {translate('coding_rules.custom_rule')}\n        {' ('}\n        <Link to={getRuleUrl(ruleDetails.templateKey, this.props.organization)}>\n          {translate('coding_rules.show_template')}\n        </Link>\n        {')'}\n        <DocTooltip\n          className=\"little-spacer-left\"\n          doc={import(/* webpackMode: \"eager\" */ 'Docs/tooltips/rules/custom-rules.md')}\n        />\n      </li>\n    );\n  };\n\n  renderRemediation = () => {\n    const { ruleDetails } = this.props;\n    if (!ruleDetails.debtRemFnType) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('coding_rules.remediation_function')}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"remediation-function\">\n          {translate('coding_rules.remediation_function', ruleDetails.debtRemFnType)}\n          {':'}\n          {ruleDetails.debtRemFnOffset !== undefined && ` ${ruleDetails.debtRemFnOffset}`}\n          {ruleDetails.debtRemFnCoeff !== undefined && ` +${ruleDetails.debtRemFnCoeff}`}\n          {ruleDetails.effortToFixDescription !== undefined &&\n            ` ${ruleDetails.effortToFixDescription}`}\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderScope = () => {\n    const scope = this.props.ruleDetails.scope || 'MAIN';\n    return (\n      <Tooltip overlay={translate('coding_rules.scope.title')}>\n        <li className=\"coding-rules-detail-property\">\n          <RuleScopeIcon className=\"little-spacer-right\" />\n          {translate('coding_rules.scope', scope)}\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderExternalBadge = () => {\n    const { ruleDetails } = this.props;\n    if (!ruleDetails.repo) {\n      return null;\n    }\n    const engine = ruleDetails.repo.replace(new RegExp(`^${EXTERNAL_RULE_REPO_PREFIX}`), '');\n    if (!engine) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translateWithParameters('coding_rules.external_rule.engine', engine)}>\n        <li className=\"coding-rules-detail-property\">\n          <div className=\"badge spacer-left text-text-top\">{engine}</div>\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderKey() {\n    const EXTERNAL_PREFIX = 'external_';\n    const { ruleDetails } = this.props;\n    const displayedKey = ruleDetails.key.startsWith(EXTERNAL_PREFIX)\n      ? ruleDetails.key.substr(EXTERNAL_PREFIX.length)\n      : ruleDetails.key;\n    return <span className=\"note text-middle\">{displayedKey}</span>;\n  }\n\n  render() {\n    const { ruleDetails } = this.props;\n    const hasTypeData = !ruleDetails.isExternal || ruleDetails.type !== 'UNKNOWN';\n    return (\n      <div className=\"js-rule-meta\">\n        <header className=\"page-header\">\n          <div className=\"pull-right\">\n            {this.renderKey()}\n            {!ruleDetails.isExternal && (\n              <Link\n                className=\"coding-rules-detail-permalink link-no-underline spacer-left text-middle\"\n                title={translate('permalink')}\n                to={getRuleUrl(ruleDetails.key, this.props.organization)}>\n                <LinkIcon />\n              </Link>\n            )}\n            {!this.props.hideSimilarRulesFilter && (\n              <SimilarRulesFilter onFilterChange={this.props.onFilterChange} rule={ruleDetails} />\n            )}\n          </div>\n          <h3 className=\"page-title coding-rules-detail-header\">\n            <big>{ruleDetails.name}</big>\n          </h3>\n        </header>\n\n        {hasTypeData && (\n          <ul className=\"coding-rules-detail-properties\">\n            {this.renderType()}\n            {this.renderSeverity()}\n            {!ruleDetails.isExternal && (\n              <>\n                {this.renderStatus()}\n                {this.renderScope()}\n              </>\n            )}\n            {this.renderTags()}\n            {!ruleDetails.isExternal && this.renderCreationDate()}\n            {this.renderRepository()}\n            {!ruleDetails.isExternal && (\n              <>\n                {this.renderTemplate()}\n                {this.renderParentTemplate()}\n                {this.renderRemediation()}\n              </>\n            )}\n            {ruleDetails.isExternal && this.renderExternalBadge()}\n          </ul>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport SimpleModal from 'sonar-ui-common/components/controls/SimpleModal';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  onCancel: () => void;\n  onSubmit: () => void;\n}\n\nexport default function RemoveExtendedDescriptionModal({ onCancel, onSubmit }: Props) {\n  const header = translate('coding_rules.remove_extended_description');\n  return (\n    <SimpleModal header={header} onClose={onCancel} onSubmit={onSubmit}>\n      {({ onCloseClick, onFormSubmit, submitting }) => (\n        <form onSubmit={onFormSubmit}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n\n          <div className=\"modal-body\">\n            {translate('coding_rules.remove_extended_description.confirm')}\n          </div>\n\n          <footer className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton className=\"button-red\" disabled={submitting}>\n              {translate('remove')}\n            </SubmitButton>\n            <ResetButtonLink onClick={onCloseClick}>{translate('cancel')}</ResetButtonLink>\n          </footer>\n        </form>\n      )}\n    </SimpleModal>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { updateRule } from '../../../api/rules';\nimport MarkdownTips from '../../../components/common/MarkdownTips';\nimport RemoveExtendedDescriptionModal from './RemoveExtendedDescriptionModal';\n\ninterface Props {\n  canWrite: boolean | undefined;\n  onChange: (newRuleDetails: T.RuleDetails) => void;\n  organization: string | undefined;\n  ruleDetails: T.RuleDetails;\n}\n\ninterface State {\n  description: string;\n  descriptionForm: boolean;\n  removeDescriptionModal: boolean;\n  submitting: boolean;\n}\n\nexport default class RuleDetailsDescription extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    description: '',\n    descriptionForm: false,\n    submitting: false,\n    removeDescriptionModal: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleDescriptionChange = (event: React.SyntheticEvent<HTMLTextAreaElement>) =>\n    this.setState({ description: event.currentTarget.value });\n\n  handleCancelClick = () => {\n    this.setState({ descriptionForm: false });\n  };\n\n  handleSaveClick = () => {\n    this.updateDescription(this.state.description);\n  };\n\n  handleRemoveDescriptionClick = () => {\n    this.setState({ removeDescriptionModal: true });\n  };\n\n  handleCancelRemoving = () => this.setState({ removeDescriptionModal: false });\n\n  handleConfirmRemoving = () => {\n    this.setState({ removeDescriptionModal: false });\n    this.updateDescription('');\n  };\n\n  updateDescription = (text: string) => {\n    this.setState({ submitting: true });\n\n    updateRule({\n      key: this.props.ruleDetails.key,\n      markdown_note: text,\n      organization: this.props.organization\n    }).then(\n      ruleDetails => {\n        this.props.onChange(ruleDetails);\n        if (this.mounted) {\n          this.setState({ submitting: false, descriptionForm: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n        }\n      }\n    );\n  };\n\n  handleExtendDescriptionClick = () => {\n    this.setState({\n      // set description` to the current `mdNote` each time the form is open\n      description: this.props.ruleDetails.mdNote || '',\n      descriptionForm: true\n    });\n  };\n\n  renderDescription = () => (\n    <div id=\"coding-rules-detail-description-extra\">\n      {this.props.ruleDetails.htmlNote !== undefined && (\n        <div\n          className=\"rule-desc spacer-bottom markdown\"\n          // Safe: defined by rule creator (instance admin?)\n          dangerouslySetInnerHTML={{ __html: this.props.ruleDetails.htmlNote }}\n        />\n      )}\n      {this.props.canWrite && (\n        <Button\n          id=\"coding-rules-detail-extend-description\"\n          onClick={this.handleExtendDescriptionClick}>\n          {translate('coding_rules.extend_description')}\n        </Button>\n      )}\n    </div>\n  );\n\n  renderForm = () => (\n    <div className=\"coding-rules-detail-extend-description-form\">\n      <table className=\"width-100\">\n        <tbody>\n          <tr>\n            <td colSpan={2}>\n              <textarea\n                autoFocus={true}\n                className=\"width-100 little-spacer-bottom\"\n                id=\"coding-rules-detail-extend-description-text\"\n                onChange={this.handleDescriptionChange}\n                rows={4}\n                value={this.state.description}\n              />\n            </td>\n          </tr>\n          <tr>\n            <td>\n              <Button\n                disabled={this.state.submitting}\n                id=\"coding-rules-detail-extend-description-submit\"\n                onClick={this.handleSaveClick}>\n                {translate('save')}\n              </Button>\n              {this.props.ruleDetails.mdNote !== undefined && (\n                <>\n                  <Button\n                    className=\"button-red spacer-left\"\n                    disabled={this.state.submitting}\n                    id=\"coding-rules-detail-extend-description-remove\"\n                    onClick={this.handleRemoveDescriptionClick}>\n                    {translate('remove')}\n                  </Button>\n                  {this.state.removeDescriptionModal && (\n                    <RemoveExtendedDescriptionModal\n                      onCancel={this.handleCancelRemoving}\n                      onSubmit={this.handleConfirmRemoving}\n                    />\n                  )}\n                </>\n              )}\n              <ResetButtonLink\n                className=\"spacer-left\"\n                disabled={this.state.submitting}\n                id=\"coding-rules-detail-extend-description-cancel\"\n                onClick={this.handleCancelClick}>\n                {translate('cancel')}\n              </ResetButtonLink>\n              {this.state.submitting && <i className=\"spinner spacer-left\" />}\n            </td>\n            <td className=\"text-right\">\n              <MarkdownTips />\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n\n  render() {\n    const { ruleDetails } = this.props;\n    const hasDescription = !ruleDetails.isExternal || ruleDetails.type !== 'UNKNOWN';\n\n    return (\n      <div className=\"js-rule-description\">\n        {hasDescription ? (\n          <div\n            className=\"coding-rules-detail-description rule-desc markdown\"\n            // Safe: defined by rule creator (instance admin?)\n            dangerouslySetInnerHTML={{ __html: ruleDetails.htmlDesc || '' }}\n          />\n        ) : (\n          <div className=\"coding-rules-detail-description rule-desc markdown\">\n            {translateWithParameters('issue.external_issue_description', ruleDetails.name)}\n          </div>\n        )}\n\n        {!ruleDetails.templateKey && (\n          <div className=\"coding-rules-detail-description coding-rules-detail-description-extra\">\n            {!this.state.descriptionForm && this.renderDescription()}\n            {this.state.descriptionForm && this.props.canWrite && this.renderForm()}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { keyBy } from 'lodash';\nimport * as React from 'react';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { getRuleDetails, getRulesApp } from '../../api/rules';\nimport RuleDetailsDescription from '../../apps/coding-rules/components/RuleDetailsDescription';\nimport RuleDetailsMeta from '../../apps/coding-rules/components/RuleDetailsMeta';\nimport '../../apps/coding-rules/styles.css';\nimport { withAppState } from '../hoc/withAppState';\n\ninterface Props {\n  appState: Pick<T.AppState, 'organizationsEnabled'>;\n  onLoad: (details: { name: string }) => void;\n  organizationKey: string | undefined;\n  ruleKey: string;\n}\n\ninterface State {\n  loading: boolean;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  ruleDetails?: T.RuleDetails;\n}\n\nexport class WorkspaceRuleDetails extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true, referencedRepositories: {} };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchRuleDetails();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.ruleKey !== this.props.ruleKey ||\n      prevProps.organizationKey !== this.props.organizationKey\n    ) {\n      this.fetchRuleDetails();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchRuleDetails = () => {\n    this.setState({ loading: true });\n    Promise.all([\n      getRulesApp({ organization: this.props.organizationKey }),\n      getRuleDetails({ key: this.props.ruleKey, organization: this.props.organizationKey })\n    ]).then(\n      ([{ repositories }, { rule }]) => {\n        if (this.mounted) {\n          this.setState({\n            loading: false,\n            referencedRepositories: keyBy(repositories, 'key'),\n            ruleDetails: rule\n          });\n          this.props.onLoad({ name: rule.name });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  noOp = () => {};\n\n  render() {\n    const { organizationKey } = this.props;\n    const { organizationsEnabled } = this.props.appState;\n    const organization = organizationsEnabled ? organizationKey : undefined;\n\n    return (\n      <DeferredSpinner loading={this.state.loading}>\n        {this.state.ruleDetails && (\n          <>\n            <RuleDetailsMeta\n              canWrite={false}\n              hideSimilarRulesFilter={true}\n              onFilterChange={this.noOp}\n              onTagsChange={this.noOp}\n              organization={organization}\n              referencedRepositories={this.state.referencedRepositories}\n              ruleDetails={this.state.ruleDetails}\n            />\n            <RuleDetailsDescription\n              canWrite={false}\n              onChange={this.noOp}\n              organization={organization}\n              ruleDetails={this.state.ruleDetails}\n            />\n          </>\n        )}\n      </DeferredSpinner>\n    );\n  }\n}\n\nexport default withAppState(WorkspaceRuleDetails);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { RuleDescriptor } from './context';\nimport WorkspaceHeader, { Props as WorkspaceHeaderProps } from './WorkspaceHeader';\nimport WorkspaceRuleDetails from './WorkspaceRuleDetails';\nimport WorkspaceRuleTitle from './WorkspaceRuleTitle';\n\nexport interface Props extends T.Omit<WorkspaceHeaderProps, 'children' | 'onClose'> {\n  rule: RuleDescriptor;\n  height: number;\n  onClose: (componentKey: string) => void;\n  onLoad: (details: { key: string; name: string }) => void;\n}\n\ninterface State {\n  loading: boolean;\n}\n\nexport default class WorkspaceRuleViewer extends React.PureComponent<Props> {\n  state: State = { loading: true };\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.rule.key !== this.props.rule.key) {\n      this.setState({ loading: true });\n    }\n  }\n\n  handleClose = () => {\n    this.props.onClose(this.props.rule.key);\n  };\n\n  handleLoaded = (rule: { name: string }) => {\n    this.props.onLoad({ key: this.props.rule.key, name: rule.name });\n    // Allow time for the actual rendering, and the browser to pick it up.\n    setTimeout(() => {\n      this.setState({ loading: false });\n    }, 1000);\n  };\n\n  render() {\n    const { rule } = this.props;\n    const { loading } = this.state;\n\n    return (\n      <div className=\"workspace-viewer\">\n        <WorkspaceHeader\n          maximized={this.props.maximized}\n          onClose={this.handleClose}\n          onCollapse={this.props.onCollapse}\n          onMaximize={this.props.onMaximize}\n          onMinimize={this.props.onMinimize}\n          onResize={this.props.onResize}>\n          <WorkspaceRuleTitle rule={rule} />\n        </WorkspaceHeader>\n\n        <div\n          aria-busy={loading}\n          aria-live=\"polite\"\n          className=\"workspace-viewer-container\"\n          style={{ height: this.props.height }}>\n          <WorkspaceRuleDetails\n            onLoad={this.handleLoaded}\n            organizationKey={rule.organization}\n            ruleKey={rule.key}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n  long?: boolean;\n}\n\nexport const formatterOption = { year: 'numeric', month: 'short', day: '2-digit' };\n\nexport const longFormatterOption = { year: 'numeric', month: 'long', day: 'numeric' };\n\nexport default function DateFormatter({ children, date, long }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...(long ? longFormatterOption : formatterOption)}>\n      {children}\n    </FormattedDate>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport { lazyLoad } from 'sonar-ui-common/components/lazyLoad';\nimport { filterContent } from '../../helpers/markdown';\n\nconst DocMarkdownBlock = lazyLoad(() => import('./DocMarkdownBlock'));\n\ninterface Props {\n  className?: string;\n  children?: React.ReactNode;\n  // Use as `import(/* webpackMode: \"eager\" */ 'Docs/tooltips/foo/bar.md')`\n  doc: Promise<{ default: string }>;\n  overlayProps?: T.Dict<string>;\n}\n\ninterface State {\n  content?: string;\n  open: boolean;\n}\n\nexport default class DocTooltip extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { open: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.props.doc.then(\n      ({ default: content }) => {\n        if (this.mounted) {\n          this.setState({ content });\n        }\n      },\n      () => {}\n    );\n    document.addEventListener('scroll', this.close, true);\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    document.removeEventListener('scroll', this.close, true);\n  }\n\n  close = () => {\n    if (this.mounted) {\n      this.setState({ open: false });\n    }\n  };\n\n  render() {\n    return this.state.content ? (\n      <HelpTooltip\n        className={this.props.className}\n        overlay={\n          <div className=\"abs-width-300\">\n            <DocMarkdownBlock\n              childProps={this.props.overlayProps}\n              className=\"cut-margins\"\n              content={filterContent(this.state.content)}\n              isTooltip={true}\n            />\n          </div>\n        }>\n        {this.props.children}\n      </HelpTooltip>\n    ) : (\n      this.props.children || null\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// keep this file in JavaScript, because it is used by a webpack loader\nmodule.exports = { getFrontMatter, separateFrontMatter, filterContent };\n\nfunction getFrontMatter(content) {\n  const lines = content.split('\\n');\n  const position = getFrontMatterPosition(lines);\n  return position ? parseFrontMatter(lines.slice(position.firstLine + 1, position.lastLine)) : {};\n}\n\nfunction separateFrontMatter(content) {\n  const lines = content.split('\\n');\n  const position = getFrontMatterPosition(lines);\n  if (position) {\n    const frontmatter = parseFrontMatter(lines.slice(position.firstLine + 1, position.lastLine));\n    const content = lines.slice(position.lastLine + 1).join('\\n');\n    return { frontmatter, content };\n  } else {\n    return { frontmatter: {}, content };\n  }\n}\n\nfunction getFrontMatterPosition(lines) {\n  let firstLine;\n  let lastLine;\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i];\n    if (line.trim() === '---') {\n      if (firstLine === undefined) {\n        firstLine = i;\n      } else {\n        lastLine = i;\n        break;\n      }\n    }\n  }\n  return lastLine !== undefined ? { firstLine, lastLine } : undefined;\n}\n\nfunction parseFrontMatter(lines) {\n  const data = {};\n  for (let i = 0; i < lines.length; i++) {\n    const tokens = lines[i].split(':').map(x => x.trim());\n    if (tokens.length === 2) {\n      data[tokens[0]] = tokens[1];\n    }\n  }\n  return data;\n}\n\n/**\n * @param {string} content\n * @returns {string}\n */\nfunction filterContent(content) {\n  const regexBase = '<!-- \\\\/?(sonarqube|sonarcloud|static) -->';\n  const { isSonarCloud, getInstance } = require('./system');\n  const contentWithInstance = content.replace(/{instance}/gi, getInstance());\n  const contentWithoutStatic = cutConditionalContent(contentWithInstance, 'static');\n  const filteredContent = isSonarCloud()\n    ? cutConditionalContent(contentWithoutStatic, 'sonarqube')\n    : cutConditionalContent(contentWithoutStatic, 'sonarcloud');\n  return filteredContent\n    .replace(new RegExp(`^${regexBase}(\\n|\\r|\\r\\n|$)`, 'gm'), '') // First, remove single-line ones, including ending carriage-returns.\n    .replace(new RegExp(`${regexBase}`, 'g'), ''); // Now remove all remaining ones.\n}\n\n/**\n * @param {string} content\n * @param {string} tag\n * @returns {string}\n */\nfunction cutConditionalContent(content, tag) {\n  const beginning = `<!-- ${tag} -->`;\n  const ending = `<!-- /${tag} -->`;\n\n  let newContent = content;\n  let start = newContent.indexOf(beginning);\n  let end = newContent.indexOf(ending);\n  while (start !== -1 && end !== -1) {\n    if (start < end) {\n      newContent = newContent.substring(0, start) + newContent.substring(end + ending.length);\n    } else {\n      // When conditional tags are incorrectly used we log an error, strip them out and pass to the next pair of tags\n      // eslint-disable-next-line no-console\n      console.error(\n        new Error(\n          `Documentation - incorrect usage of conditional formatting tags here: \"${newContent.substring(\n            end,\n            start + beginning.length\n          )}\"`\n        )\n      );\n      newContent =\n        newContent.substring(0, end) +\n        newContent.substring(end + ending.length, start) +\n        newContent.substring(start + beginning.length);\n    }\n    start = newContent.indexOf(beginning);\n    end = newContent.indexOf(ending);\n  }\n\n  return newContent;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  severity: string;\n}\n\nexport default function SeverityHelper({ className, severity }: Props) {\n  if (!severity) {\n    return null;\n  }\n  return (\n    <span className={className}>\n      <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n      {translate('severity', severity)}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface GetRulesAppResponse {\n  canWrite?: boolean;\n  repositories: { key: string; language: string; name: string }[];\n}\n\nexport function getRulesApp(data: {\n  organization: string | undefined;\n}): Promise<GetRulesAppResponse> {\n  return getJSON('/api/rules/app', data).catch(throwGlobalError);\n}\n\nexport interface SearchRulesResponse {\n  actives?: T.Dict<T.RuleActivation[]>;\n  facets?: { property: string; values: { count: number; val: string }[] }[];\n  p: number;\n  ps: number;\n  rules: T.Rule[];\n  total: number;\n}\n\nexport function searchRules(data: {\n  organization: string | undefined;\n  [x: string]: any;\n}): Promise<SearchRulesResponse> {\n  return getJSON('/api/rules/search', data).catch(throwGlobalError);\n}\n\nexport function takeFacet(response: any, property: string) {\n  const facet = response.facets.find((facet: any) => facet.property === property);\n  return facet ? facet.values : [];\n}\n\nexport function getRuleDetails(parameters: {\n  actives?: boolean;\n  key: string;\n  organization: string | undefined;\n}): Promise<{ actives?: T.RuleActivation[]; rule: T.RuleDetails }> {\n  return getJSON('/api/rules/show', parameters).catch(throwGlobalError);\n}\n\nexport function getRuleTags(parameters: {\n  organization: string | undefined;\n  ps?: number;\n  q: string;\n}): Promise<string[]> {\n  return getJSON('/api/rules/tags', parameters).then(r => r.tags, throwGlobalError);\n}\n\nexport function createRule(data: {\n  custom_key: string;\n  markdown_description: string;\n  name: string;\n  organization: string | undefined;\n  params?: string;\n  prevent_reactivation?: boolean;\n  severity?: string;\n  status?: string;\n  template_key: string;\n  type?: string;\n}): Promise<T.RuleDetails> {\n  return postJSON('/api/rules/create', data).then(\n    r => r.rule,\n    response => {\n      // do not show global error if the status code is 409\n      // this case should be handled inside a component\n      if (response && response.status === 409) {\n        return Promise.reject(response);\n      } else {\n        return throwGlobalError(response);\n      }\n    }\n  );\n}\n\nexport function deleteRule(parameters: { key: string; organization: string | undefined }) {\n  return post('/api/rules/delete', parameters).catch(throwGlobalError);\n}\n\nexport function updateRule(data: {\n  key: string;\n  markdown_description?: string;\n  markdown_note?: string;\n  name?: string;\n  organization: string | undefined;\n  params?: string;\n  remediation_fn_base_effort?: string;\n  remediation_fn_type?: string;\n  remediation_fy_gap_multiplier?: string;\n  severity?: string;\n  status?: string;\n  tags?: string;\n}): Promise<T.RuleDetails> {\n  return postJSON('/api/rules/update', data).then(r => r.rule, throwGlobalError);\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { getAppState, Store } from '../../store/rootReducer';\nimport { getWrappedDisplayName } from './utils';\n\nexport function withAppState<P>(\n  WrappedComponent: React.ComponentType<P & { appState: Partial<T.AppState> }>\n) {\n  class Wrapper extends React.Component<P & { appState: T.AppState }> {\n    static displayName = getWrappedDisplayName(WrappedComponent, 'withAppState');\n\n    render() {\n      return <WrappedComponent {...this.props} />;\n    }\n  }\n\n  function mapStateToProps(state: Store) {\n    return { appState: getAppState(state) };\n  }\n\n  return connect(mapStateToProps)(Wrapper);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport './TagsList.css';\n\ninterface Props {\n  allowUpdate?: boolean;\n  className?: string;\n  tags: string[];\n}\n\nexport default function TagsList({ allowUpdate = false, className, tags }: Props) {\n  return (\n    <span\n      aria-label={translateWithParameters('tags_list_x', tags.join(', '))}\n      className={classNames('tags-list', className)}>\n      <TagsIcon className=\"text-middle\" />\n      <span aria-hidden={true} className=\"text-ellipsis text-middle\" title={tags.join(', ')}>\n        {tags.join(', ')}\n      </span>\n      {allowUpdate && <DropdownIcon className=\"text-middle\" />}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nexport interface MultiSelectOptionProps {\n  active?: boolean;\n  custom?: boolean;\n  disabled?: boolean;\n  element: string;\n  onHover: (element: string) => void;\n  onSelectChange: (selected: boolean, element: string) => void;\n  renderLabel: (element: string) => React.ReactNode;\n  selected?: boolean;\n}\n\nexport default function MultiSelectOption(props: MultiSelectOptionProps) {\n  const { active, custom, disabled, element, selected } = props;\n  const onHover = () => props.onHover(element);\n  const className = classNames({ active, disabled });\n  const label = props.renderLabel(element);\n\n  return (\n    <li onFocus={onHover} onMouseOver={onHover}>\n      <Checkbox\n        checked={Boolean(selected)}\n        className={className}\n        disabled={disabled}\n        id={element}\n        onCheck={props.onSelectChange}>\n        {custom ? (\n          <span\n            aria-label={`${translate('create_new_element')}: ${label}`}\n            className=\"little-spacer-left\">\n            <span aria-hidden={true} className=\"little-spacer-right\">\n              +\n            </span>\n            {label}\n          </span>\n        ) : (\n          <span className=\"little-spacer-left\">{label}</span>\n        )}\n      </Checkbox>\n    </li>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { difference } from 'lodash';\nimport * as React from 'react';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelectOption from './MultiSelectOption';\n\ninterface Props {\n  allowNewElements?: boolean;\n  allowSelection?: boolean;\n  elements: string[];\n  filterSelected?: (query: string, selectedElements: string[]) => string[];\n  footerNode?: React.ReactNode;\n  listSize?: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  placeholder: string;\n  renderLabel?: (element: string) => React.ReactNode;\n  selectedElements: string[];\n  validateSearchInput?: (value: string) => string;\n}\n\ninterface State {\n  activeIdx: number;\n  loading: boolean;\n  query: string;\n  selectedElements: string[];\n  unselectedElements: string[];\n}\n\ninterface DefaultProps {\n  filterSelected: (query: string, selectedElements: string[]) => string[];\n  listSize: number;\n  renderLabel: (element: string) => React.ReactNode;\n  validateSearchInput: (value: string) => string;\n}\n\ntype PropsWithDefault = Props & DefaultProps;\n\nexport default class MultiSelect extends React.PureComponent<Props, State> {\n  container?: HTMLDivElement | null;\n  searchInput?: HTMLInputElement | null;\n  mounted = false;\n\n  static defaultProps: DefaultProps = {\n    filterSelected: (query: string, selectedElements: string[]) =>\n      selectedElements.filter(elem => elem.includes(query)),\n    listSize: 0,\n    renderLabel: (element: string) => element,\n    validateSearchInput: (value: string) => value\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      activeIdx: 0,\n      loading: true,\n      query: '',\n      selectedElements: [],\n      unselectedElements: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.onSearchQuery('');\n    this.updateSelectedElements(this.props as PropsWithDefault);\n    this.updateUnselectedElements(this.props as PropsWithDefault);\n    if (this.container) {\n      this.container.addEventListener('keydown', this.handleKeyboard, true);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: PropsWithDefault) {\n    if (\n      this.props.elements !== nextProps.elements ||\n      this.props.selectedElements !== nextProps.selectedElements\n    ) {\n      this.updateSelectedElements(nextProps);\n      this.updateUnselectedElements(nextProps);\n\n      const totalElements = this.getAllElements(nextProps, this.state).length;\n      if (this.state.activeIdx >= totalElements) {\n        this.setState({ activeIdx: totalElements - 1 });\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.searchInput) {\n      this.searchInput.focus();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.container) {\n      this.container.removeEventListener('keydown', this.handleKeyboard);\n    }\n  }\n\n  handleSelectChange = (selected: boolean, item: string) => {\n    if (selected) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  handleSearchChange = (value: string) => {\n    this.onSearchQuery((this.props as PropsWithDefault).validateSearchInput(value));\n  };\n\n  handleElementHover = (element: string) => {\n    this.setState((prevState, props) => {\n      return { activeIdx: this.getAllElements(props, prevState).indexOf(element) };\n    });\n  };\n\n  handleKeyboard = (evt: KeyboardEvent) => {\n    switch (evt.keyCode) {\n      case 40: // down\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectNextElement);\n        break;\n      case 38: // up\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectPreviousElement);\n        break;\n      case 37: // left\n      case 39: // right\n        evt.stopPropagation();\n        break;\n      case 13: // enter\n        if (this.state.activeIdx >= 0) {\n          this.toggleSelect(this.getAllElements(this.props, this.state)[this.state.activeIdx]);\n        }\n        break;\n    }\n  };\n\n  onSearchQuery = (query: string) => {\n    this.setState({ activeIdx: 0, loading: true, query });\n    this.props.onSearch(query).then(this.stopLoading, this.stopLoading);\n  };\n\n  onSelectItem = (item: string) => {\n    if (this.isNewElement(item, this.props)) {\n      this.onSearchQuery('');\n    }\n    this.props.onSelect(item);\n  };\n\n  onUnselectItem = (item: string) => this.props.onUnselect(item);\n\n  isNewElement = (elem: string, { selectedElements, elements }: Props) =>\n    elem.length > 0 && selectedElements.indexOf(elem) === -1 && elements.indexOf(elem) === -1;\n\n  updateSelectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (state.query) {\n        return {\n          selectedElements: props.filterSelected(state.query, props.selectedElements)\n        };\n      } else {\n        return { selectedElements: [...props.selectedElements] };\n      }\n    });\n  };\n\n  updateUnselectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (props.listSize === 0) {\n        return { unselectedElements: difference(props.elements, props.selectedElements) };\n      } else if (props.listSize < state.selectedElements.length) {\n        return { unselectedElements: [] };\n      } else {\n        return {\n          unselectedElements: difference(props.elements, props.selectedElements).slice(\n            0,\n            props.listSize - state.selectedElements.length\n          )\n        };\n      }\n    });\n  };\n\n  getAllElements = (props: Props, state: State) => {\n    if (this.isNewElement(state.query, props)) {\n      return [...state.selectedElements, ...state.unselectedElements, state.query];\n    } else {\n      return [...state.selectedElements, ...state.unselectedElements];\n    }\n  };\n\n  setElementActive = (idx: number) => this.setState({ activeIdx: idx });\n\n  selectNextElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx < 0 || activeIdx >= allElements.length - 1) {\n      return { activeIdx: 0 };\n    } else {\n      return { activeIdx: activeIdx + 1 };\n    }\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx <= 0) {\n      const lastIdx = allElements.length - 1;\n      return { activeIdx: lastIdx };\n    } else {\n      return { activeIdx: activeIdx - 1 };\n    }\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  toggleSelect = (item: string) => {\n    if (this.props.selectedElements.indexOf(item) === -1) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  render() {\n    const { allowSelection = true, allowNewElements = true, footerNode = '' } = this.props;\n    const { renderLabel } = this.props as PropsWithDefault;\n    const { query, activeIdx, selectedElements, unselectedElements } = this.state;\n    const activeElement = this.getAllElements(this.props, this.state)[activeIdx];\n    const showNewElement = allowNewElements && this.isNewElement(query, this.props);\n    const infiniteList = this.props.listSize === 0;\n    const listClasses = classNames('menu', {\n      'menu-vertically-limited': infiniteList,\n      'spacer-top': infiniteList,\n      'with-top-separator': infiniteList,\n      'with-bottom-separator': Boolean(footerNode)\n    });\n\n    return (\n      <div className=\"multi-select\" ref={div => (this.container = div)}>\n        <div className=\"menu-search\">\n          <SearchBox\n            autoFocus={true}\n            className=\"little-spacer-top\"\n            loading={this.state.loading}\n            onChange={this.handleSearchChange}\n            placeholder={this.props.placeholder}\n            value={query}\n          />\n        </div>\n        <ul className={listClasses}>\n          {selectedElements.length > 0 &&\n            selectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n                selected={true}\n              />\n            ))}\n          {unselectedElements.length > 0 &&\n            unselectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                disabled={!allowSelection}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n              />\n            ))}\n          {showNewElement && (\n            <MultiSelectOption\n              active={activeElement === query}\n              custom={true}\n              element={query}\n              key={query}\n              onHover={this.handleElementHover}\n              onSelectChange={this.handleSelectChange}\n              renderLabel={renderLabel}\n            />\n          )}\n          {!showNewElement && selectedElements.length < 1 && unselectedElements.length < 1 && (\n            <li className=\"spacer-left\">{translateWithParameters('no_results_for_x', query)}</li>\n          )}\n        </ul>\n        {footerNode}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getMarkdownHelpUrl } from '../../helpers/urls';\n\ninterface Props {\n  className?: string;\n}\n\nexport default class MarkdownTips extends React.PureComponent<Props> {\n  handleClick(evt: React.SyntheticEvent<HTMLAnchorElement>) {\n    evt.preventDefault();\n    window.open(getMarkdownHelpUrl(), 'Markdown', 'height=300,width=600,scrollbars=1,resizable=1');\n  }\n\n  render() {\n    return (\n      <div className={classNames('markdown-tips', this.props.className)}>\n        <a className=\"little-spacer-right\" href=\"#\" onClick={this.handleClick}>\n          {translate('markdown.helplink')}\n        </a>\n        {':'}\n        <span className=\"spacer-left\">*{translate('bold')}*</span>\n        <span className=\"spacer-left\">\n          ``\n          {translate('code')}\n          ``\n        </span>\n        <span className=\"spacer-left\">* {translate('bulleted_point')}</span>\n      </div>\n    );\n  }\n}\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".tags-list{white-space:nowrap;line-height:16px}.tags-list i:before{font-size:12px}.tags-list span{display:inline-block;vertical-align:middle;text-align:left;max-width:220px;padding-left:4px;padding-right:4px}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelect from '../common/MultiSelect';\nimport './TagsList.css';\n\ninterface Props {\n  listSize: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  selectedTags: string[];\n  tags: string[];\n}\n\nexport default function TagsSelector(props: Props) {\n  return (\n    <MultiSelect\n      elements={props.tags}\n      listSize={props.listSize}\n      onSearch={props.onSearch}\n      onSelect={props.onSelect}\n      onUnselect={props.onUnselect}\n      placeholder={translate('search.search_for_tags')}\n      selectedElements={props.selectedTags}\n      validateSearchInput={validateTag}\n    />\n  );\n}\n\nexport function validateTag(value: string) {\n  // Allow only a-z, 0-9, '+', '-', '#', '.'\n  return value.toLowerCase().replace(/[^-a-z0-9+#.]/gi, '');\n}\n"],"sourceRoot":""}