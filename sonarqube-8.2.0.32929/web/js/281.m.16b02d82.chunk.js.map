{"version":3,"sources":["webpack:///./src/main/js/apps/security-hotspots/styles.css?87dc","webpack:///./src/main/js/apps/security-hotspots/components/HotspotList.css?b373","webpack:///./src/main/js/apps/security-hotspots/components/HotspotList.css","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeSelection.css?2258","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeSelection.css","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewer.css?a3c3","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewer.css","webpack:///./src/main/js/apps/security-hotspots/components/status/Status.css?e85c","webpack:///./src/main/js/apps/security-hotspots/components/status/Status.css","webpack:///./src/main/js/apps/security-hotspots/styles.css","webpack:///./src/main/js/types/security-hotspots.ts","webpack:///./src/main/js/apps/security-hotspots/components/EmptyHotspotsPage.tsx","webpack:///./src/main/js/apps/security-hotspots/components/FilterBar.tsx","webpack:///./src/main/js/apps/security-hotspots/utils.ts","webpack:///./src/main/js/apps/security-hotspots/components/HotspotListItem.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotCategory.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotList.tsx","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeSelectionRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeSelection.tsx","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/assignee/Assignee.tsx","webpack:///./src/main/js/api/security-hotspots.ts","webpack:///./src/main/js/apps/security-hotspots/components/HotspotCommentPopup.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotReviewHistory.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotReviewHistoryAndComments.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotSnippetContainerRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotSnippetContainer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewerTabs.tsx","webpack:///./src/main/js/apps/security-hotspots/components/status/StatusDescription.tsx","webpack:///./src/main/js/apps/security-hotspots/components/status/StatusSelectionRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/status/StatusSelection.tsx","webpack:///./src/main/js/apps/security-hotspots/components/status/Status.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewerRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewer.tsx","webpack:///./src/main/js/apps/security-hotspots/SecurityHotspotsAppRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/SecurityHotspotsApp.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./src/main/js/components/intl/DateTimeFormatter.tsx","webpack:///./src/main/js/components/intl/DateFormatter.tsx","webpack:///./src/main/js/app/components/a11y/A11ySkipTarget.tsx","webpack:///./src/main/js/components/intl/DateFromNow.tsx","webpack:///./src/main/js/components/shared/SeverityHelper.tsx","webpack:///./src/main/js/types/component.ts","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./src/main/js/components/tags/TagsList.css?aed4","webpack:///./src/main/js/helpers/periods.ts","webpack:///./src/main/js/app/utils/addGlobalSuccessMessage.ts","webpack:///./src/main/js/components/tags/TagsList.tsx","webpack:///./src/main/js/components/common/ScreenPositionHelper.tsx","webpack:///./src/main/js/components/common/MultiSelectOption.tsx","webpack:///./src/main/js/components/common/MultiSelect.tsx","webpack:///./src/main/js/components/common/MarkdownTips.tsx","webpack:///./src/main/js/components/tags/TagsList.css","webpack:///./src/main/js/components/tags/TagsSelector.tsx","webpack:///./src/main/js/components/ui/CoverageRating.tsx","webpack:///./src/main/js/api/favorites.ts","webpack:///./src/main/js/components/controls/Favorite.tsx","webpack:///./src/main/js/components/common/LocationIndex.tsx","webpack:///./src/main/js/components/shared/StatusHelper.tsx","webpack:///./src/main/js/helpers/security-standard.ts","webpack:///./src/main/js/components/SourceViewer/helpers/indexing.ts","webpack:///./src/main/js/components/issue/components/IssueChangelogDiff.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/issueLocations.ts","webpack:///./src/main/js/components/SourceViewer/SourceViewerContext.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/highlight.ts","webpack:///./src/main/js/components/common/LocationIndex.css?e5a0","webpack:///./src/main/js/components/common/LocationIndex.css","webpack:///./src/main/js/components/common/LocationMessage.tsx","webpack:///./src/main/js/components/common/LocationMessage.css?8e38","webpack:///./src/main/js/components/common/LocationMessage.css","webpack:///./src/main/js/components/issue/Issue.css?30c0","webpack:///./src/main/js/components/issue/Issue.css","webpack:///./src/main/js/apps/issues/crossComponentSourceViewer/utils.ts","webpack:///./src/main/js/components/issue/actions.ts","webpack:///./src/main/js/components/common/SelectListItem.tsx","webpack:///./src/main/js/components/common/SelectList.tsx","webpack:///./src/main/js/components/issue/popups/SetAssigneePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueAssign.tsx","webpack:///./src/main/js/components/issue/popups/CommentPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentAction.tsx","webpack:///./src/main/js/components/issue/popups/SetSeverityPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueSeverity.tsx","webpack:///./src/main/js/components/issue/popups/SetIssueTagsPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTags.tsx","webpack:///./src/main/js/components/issue/popups/SetTransitionPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTransition.tsx","webpack:///./src/main/js/components/issue/popups/SetTypePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueType.tsx","webpack:///./src/main/js/components/issue/components/IssueActionsBar.tsx","webpack:///./src/main/js/components/issue/popups/CommentDeletePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentLine.tsx","webpack:///./src/main/js/components/issue/popups/ChangelogPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueChangelog.tsx","webpack:///./src/main/js/components/issue/components/IssueMessage.tsx","webpack:///./src/main/js/components/issue/popups/SimilarIssuesPopup.tsx","webpack:///./src/main/js/components/issue/components/SimilarIssuesFilter.tsx","webpack:///./src/main/js/components/issue/components/IssueTitleBar.tsx","webpack:///./src/main/js/components/issue/IssueView.tsx","webpack:///./src/main/js/components/issue/Issue.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/lines.ts","webpack:///./src/main/js/components/SourceViewer/components/LineIssuesList.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineCode.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineCoverage.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineDuplicationBlock.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineDuplications.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineIssuesIndicator.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineOptionsPopup.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineNumber.tsx","webpack:///./src/main/js/components/SourceViewer/components/SCMPopup.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineSCM.tsx","webpack:///./src/main/js/components/SourceViewer/components/Line.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.css?14cf","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.css","webpack:///./src/main/js/apps/issues/crossComponentSourceViewer/SnippetViewer.tsx","webpack:///./src/main/js/components/SourceViewer/components/Line.css?c4c1","webpack:///./src/main/js/components/SourceViewer/components/Line.css","webpack:///./src/main/js/apps/issues/crossComponentSourceViewer/SnippetViewer.css?6bd4","webpack:///./src/main/js/apps/issues/crossComponentSourceViewer/SnippetViewer.css"],"names":["content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","push","RiskExposure","HotspotStatus","HotspotResolution","HotspotStatusFilter","HotspotStatusOption","ReviewHistoryType","EmptyHotspotsPage","props","filtered","isStaticListOfHotspots","translationRoot","index_js_exposed","className","alt","Object","l10n","height","src","concat","urls","es","target","to","pathname","statusOptions","value","TO_REVIEW","label","FIXED","SAFE","periodOptions","AssigneeFilterOption","assigneeFilterOptions","ME","ALL","components_FilterBar","withCurrentUser","currentUser","component","filters","hotspotsReviewedMeasure","loadingMeasure","onBranch","isProject","qualifier","types_component","Project","id","onClick","onShowAllHotspots","role","tabIndex","users","RadioToggle_default","a","name","onCheck","onChangeFilters","assignedToMe","Select_default","clearable","onChange","option","status","searchable","sinceLeakPeriod","HelpTooltip_default","overlay","DeferredSpinner_default","loading","CoverageRating","Measure","metricKey","metricType","RISK_EXPOSURE_LEVELS","HIGH","MEDIUM","LOW","groupByCategory","hotspots","arguments","length","securityCategories","groups","groupBy_default","h","securityCategory","keys","map","key","title","getCategoryTitle","STATUS_AND_RESOLUTION_TO_STATUS_OPTION","[object Object]","REVIEWED","getStatusOptionFromStatusAndResolution","resolution","STATUS_OPTION_TO_STATUS_AND_RESOLUTION_MAP","HotspotListItem","hotspot","selected","classnames","highlight","href","message","HotspotCategory","categoryKey","expanded","selectedHotspot","risk","vulnerabilityProbability","contains-selected-hotspot","onToggleExpand","ChevronUpIcon_default","ChevronDownIcon_default","onHotspotClick","HotspotList_HotspotList","super","this","groupHotspots","risks","categories","filter","handleToggleCategory","setState","_ref","expandedCategories","HotspotList_objectSpread","state","groupedHotspots","prevProps","_this$props","hotspotsTotal","loadingMore","statusFilter","_this$state","SecurityHotspotIcon_default","riskGroup","cat","ListFooter_default","count","loadMore","onLoadMore","total","AssigneeSelectionRenderer","highlighted","open","query","suggestedUsers","SearchBox_default","autoFocus","onSearch","onKeyDown","placeholder","Dropdown","noPadding","placement","popups","BottomLeft","suggestion","active","login","onSelect","Avatar","hash","avatar","size","AssigneeSelection_AssigneeSelection","mounted","handleSearch","handleNoSearch","handleActualSearch","allowCurrentUserSelection","loggedInUser","api_users","q","then","result","catch","handleKeyDown","event","keyCode","keycodes","Enter","preventDefault","selectHighlighted","UpArrow","highlightPrevious","DownArrow","highlightNext","getCurrentIndex","findIndex","highlightIndex","index","debounce_default","_this$state2","AssigneeRenderer","assignee","canEdit","editing","_a","_b","buttons","onEnterEditionMode","EscKeydownHandler_default","onKeydown","onExitEditionMode","OutsideClickHandler_default","onClickOutside","_c","onAssign","assignee_Assignee","handleEnterEditionMode","handleExitEditionMode","handleAssign","newAssignee","hotspotKey","data","request","_objectSpread","throwGlobalError","assignSecurityHotspot","onAssigneeChange","addGlobalSuccessMessage","_this$props$hotspot","assigneeUser","HotspotCommentPopup","_React$useState2","_slicedToArray","markdownComment","comment","setComment","rows","MarkdownTips","onCommentEditSubmit","onCancelEdit","HotspotReviewHistory","reviewHistory","history","creationDate","type","Creation","date","user","utils_objectSpread","authorUser","changelog","log","Diff","isUserActive","userName","diffs","Comment","createdAt","updatable","html","htmlText","markdown","sortBy_default","elt","getHotspotReviewHistory","HotspotReviewHistory_slicedToArray","editedCommentKey","setEditedCommentKey","historyElt","historyIndex","bordered-top","DateTimeFormatter","diff","diffIndex","IssueChangelogDiff","dangerouslySetInnerHTML","__html","purify","Toggler_default","onRequestClose","BottomRight","onEditComment","Dropdown_default","onOpen","onDeleteComment","overlayPlacement","HotspotReviewHistoryAndComments_HotspotReviewHistoryAndComments","handleCommentChange","handleCloseComment","onCloseComment","handleSubmitComment","commentSecurityHotspot","onCommentUpdate","handleDeleteComment","commentKey","deleteSecurityHotspotComment","handleEditComment","text","editSecurityHotspotComment","commentTextRef","commentVisible","invisible","onOpenComment","ref","noop","HotspotSnippetContainerRenderer","branchLike","highlightedSymbols","linePopup","locations","sourceLines","sourceViewerFile","SourceViewerHeaderSlim","expandable","linkToProject","onExpand","SourceViewerContext","Provider","file","SnippetViewer","displaySCM","expandBlock","_i","direction","onExpandBlock","handleCloseIssues","handleLinePopupToggle","onLinePopupToggle","handleOpenIssues","handleSymbolClick","onSymbolClick","highlightedLocationMessage","issue","issuesByLine","last","loadDuplications","locationsByLine","onIssueChange","onIssuePopupToggle","onLocationSelect","openIssuesByLine","renderDuplicationPopup","snippet","BUFFER_LINES","EXPAND_BY_LINES","HotspotSnippetContainer_HotspotSnippetContainer","handleExpansion","range","from","Math","max","line","components","HotspotSnippetContainer_objectSpread","branch_like","additionalLines","lastLine","checkLastLine","concatSourceLines","slice","params","samePopup","fetchSources","lines","lastLineReceived","_this$props2","_this$props2$hotspot","textRange","startLine","endLine","_this$props3","indexing","project","measures","toString","path","projectName","uuid","constructSourceViewerFile","TabKeys","HotspotViewerTabs_HotspotViewerTabs","handleSelectTabs","tabKey","currentTab","tabs","find","tab","computeTabs","RiskDescription","rule","riskDescription","VulnerabilityDescription","vulnerabilityDescription","FixRecommendation","fixRecommendations","Boolean","BoxedTabs_default","StatusDescription","statusOption","showTitle","StatusSelectionRenderer","selectedStatus","submitDisabled","renderOption","Radio_default","checked","onStatusChange","htmlFor","onCommentChange","currentTarget","disabled","onSubmit","StatusSelection_StatusSelection","handleStatusChange","handleSubmit","initialStatus","setSecurityHotspotStatus","StatusSelection_objectSpread","getStatusAndResolutionFromStatusOption","onStatusOptionChange","status_Status","Status_slicedToArray","isOpen","setIsOpen","readonly","canChangeStatus","trigger","aria-expanded","aria-haspopup","actionableTrigger","closeOnClickOutside","closeOnEscape","Bottom","Tooltip_default","components_HotspotViewerRenderer","parentScrollRef","permalink","helpers_urls","HotspotViewerRenderer_objectSpread","clipboard","copyValue","LinkIcon_default","onUpdateHotspot","HotspotViewer_HotspotViewer","fetchHotspot","securityHotspotKey","response","_objectWithoutProperties","u","author","forEach","c","getSecurityHotspotDetails","handleHotspotUpdate","handleOpenComment","current","focus","preventScroll","scrolling","parent","bottomOffset","prevState","SecurityHotspotsAppRenderer","ScreenPositionHelper","top","style","Suggestions","suggestions","index_module","A11ySkipTarget","anchor","PAGE_SIZE","SecurityHotspotsApp_SecurityHotspotsApp","handleCallFailure","fetchSecurityHotspotsReviewed","reviewedHotspotsMetricKey","api_measures","SecurityHotspotsApp_objectSpread","metricKeys","measure","utils","reloadSecurityHotspotList","fetchSecurityHotspots","paging","hotspotsPageIndex","handleChangeFilters","changes","_ref2","handleHotspotClick","Promise","all","range_default","p","hotspotPages","allHotspots","flatMap_default","nextHotspot","min","pageIndex","handleShowAllHotspots","router","location","handleLoadMore","_ref3","additionalHotspots","constructFiltersFromProps","pages","fetchInitialData","previous","_ref4","security_standard","_ref5","_ref6","SecurityHotspotsApp_slicedToArray","sonarsourceSecurity","_ref6$","page","hotspotKeys","split","join","getSecurityHotspotList","projectKey","ps","onlyMine","_this$state3","__webpack_exports__","d","react__WEBPACK_IMPORTED_MODULE_0__","_SuggestionsContext__WEBPACK_IMPORTED_MODULE_1__","Consumer","addSuggestions","removeSuggestions","SuggestionsInner","formatterOption","react_intl__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_helpers_dates__WEBPACK_IMPORTED_MODULE_2__","year","month","day","hour","minute","children","assign","longFormatterOption","DateFormatter","long","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_1__","_A11yContext__WEBPACK_IMPORTED_MODULE_2__","addA11ySkipLink","removeA11ySkipLink","A11ySkipTargetInner","getLink","_this$props$label","weight","DateFromNow","SeverityHelper","sonar_ui_common_components_icons_SeverityIcon__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_icons_SeverityIcon__WEBPACK_IMPORTED_MODULE_1___default","n","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_2__","severity","ComponentQualifier","KNOWN_RATINGS","enhanceMeasure","metrics","metric","leak","getLeakValue","periods","period","_helpers_periods__WEBPACK_IMPORTED_MODULE_1__","getRatingTooltip","finalMetricKey","_helpers_measures__WEBPACK_IMPORTED_MODULE_0__","substr","includes","sonar_ui_common_components_controls_Tooltip__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_controls_Tooltip__WEBPACK_IMPORTED_MODULE_1___default","sonar_ui_common_components_ui_Level__WEBPACK_IMPORTED_MODULE_2__","sonar_ui_common_components_ui_Level__WEBPACK_IMPORTED_MODULE_2___default","sonar_ui_common_components_ui_Rating__WEBPACK_IMPORTED_MODULE_3__","sonar_ui_common_components_ui_Rating__WEBPACK_IMPORTED_MODULE_3___default","sonar_ui_common_helpers_measures__WEBPACK_IMPORTED_MODULE_4__","_utils__WEBPACK_IMPORTED_MODULE_5__","decimals","small","level","formattedValue","tooltip","Number","rating","getLeakPeriod","getPeriodLabel","getPeriodDate","isApplicationPeriod","sonar_ui_common_helpers_dates__WEBPACK_IMPORTED_MODULE_0__","Array","isArray","getPeriod","dateFormatter","parameter","modeParam","mode","toLowerCase","_store_globalMessages__WEBPACK_IMPORTED_MODULE_0__","_getStore__WEBPACK_IMPORTED_MODULE_1__","dispatch","TagsList","classnames__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_icons_DropdownIcon__WEBPACK_IMPORTED_MODULE_2__","sonar_ui_common_components_icons_DropdownIcon__WEBPACK_IMPORTED_MODULE_2___default","sonar_ui_common_components_icons_TagsIcon__WEBPACK_IMPORTED_MODULE_3__","sonar_ui_common_components_icons_TagsIcon__WEBPACK_IMPORTED_MODULE_3___default","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_4__","_ref$allowUpdate","allowUpdate","tags","aria-label","aria-hidden","getPosition","containerPos","container","getBoundingClientRect","window","pageYOffset","left","pageXOffset","debouncedOnResize","lodash_debounce__WEBPACK_IMPORTED_MODULE_0___default","forceUpdate","addEventListener","removeEventListener","MultiSelectOption","custom","element","onHover","renderLabel","onFocus","onMouseOver","Checkbox_default","onSelectChange","MultiSelect_MultiSelect","handleSelectChange","item","onSelectItem","onUnselectItem","handleSearchChange","onSearchQuery","validateSearchInput","handleElementHover","activeIdx","getAllElements","indexOf","handleKeyboard","evt","stopPropagation","selectNextElement","selectPreviousElement","toggleSelect","stopLoading","isNewElement","onUnselect","elem","selectedElements","elements","updateSelectedElements","filterSelected","updateUnselectedElements","listSize","unselectedElements","difference_default","setElementActive","idx","allElements","nextProps","totalElements","searchInput","_this$props$allowSele","allowSelection","_this$props$allowNewE","allowNewElements","_this$props$footerNod","footerNode","activeElement","showNewElement","infiniteList","listClasses","menu-vertically-limited","spacer-top","with-top-separator","with-bottom-separator","div","defaultProps","_helpers_urls__WEBPACK_IMPORTED_MODULE_3__","handleClick","TagsSelector","_common_MultiSelect__WEBPACK_IMPORTED_MODULE_2__","selectedTags","validateTag","replace","sonar_ui_common_components_lazyLoadComponent__WEBPACK_IMPORTED_MODULE_1__","_app_theme__WEBPACK_IMPORTED_MODULE_2__","DonutChart","e","t","bind","SIZE_TO_WIDTH_MAPPING","normal","big","huge","SIZE_TO_THICKNESS_MAPPING","_ref$muted","muted","_ref$size","fill","padAngle","numberValue","gray71","green","barBackgroundColor","lineCoverageRed","width","thickness","addFavorite","removeFavorite","Favorite_Favorite","toggleFavorite","newFavorite","favorite","handleFavorite","_prevProps","FavoriteButton_default","LocationIndex","leading","other","clickAttributes","is-leading","StatusHelper","sonar_ui_common_components_icons_StatusIcon__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_icons_StatusIcon__WEBPACK_IMPORTED_MODULE_1___default","getStandards","x","default","renderCWECategory","standards","category","record","cwe","renderOwaspTop10Category","withPrefix","owaspTop10","addPrefix","toUpperCase","renderSansTop25Category","sansTop25","renderSonarSourceSecurityCategory","prefix","issues","issuesByComponentAndLine","reduce","mapping","_issueLocations__WEBPACK_IMPORTED_MODULE_2__","duplicationsByLine","duplications","duplicationIndex","blocks","block","symbolsByLine","sources","tokens","_highlight__WEBPACK_IMPORTED_MODULE_1__","code","symbols","lodash_flatten__WEBPACK_IMPORTED_MODULE_0___default","token","match","sonar_ui_common_helpers_measures__WEBPACK_IMPORTED_MODULE_2__","oldValue","newValue","getLinearLocations","startOffset","endOffset","getSecondaryIssueLocationsForLine","highlightedLocations","l","msg","ISSUE_LOCATION_CLASS","splitByTokens","rootClassName","document","createElement","innerHTML","call","childNodes","node","nodeType","fullClassName","innerTokens","nodeValue","markers","highlightSymbol","symbol","symbolRegExp","RegExp","test","part","str","acc","highlightIssueLocations","issueLocations","nextTokens","markerAdded","s1","e1","s2","e2","intersect","p1","p2","p3","newClassName","lodash_uniq__WEBPACK_IMPORTED_MODULE_0___default","LocationMessage","LINES_ABOVE","LINES_BELOW","MERGE_DISTANCE","LINES_BELOW_ISSUE","collision","startA","endA","startB","getPrimaryLocation","createSnippets","addIssueLocation","snippets","loc","startIndex","endIndex","locationEnd","issueEndLine","addLinesBellow","firstCollision","start","end","keep","linesForSnippets","componentLines","groupLocationsByComponent","currentGroup","currentComponent","unknownComponent","expandSnippet","snippetIndex","snippetToExpand","s","Error","toDelete","inSnippet","updateIssue","resultPromise","oldIssue","newIssue","optimisticUpdate","helpers_issues","rules","SelectListItem_SelectListItem","handleSelect","handleHover","classnames_default","renderLink","SelectList_SelectList","attachShortcuts","previousKeyScope","keymaster","previousFilter","currentKeyScope","uniqueId_default","tagName","srcElement","isInput","detachShortcuts","items","renderChild","child","currentItem","hasChildren","LIST_SIZE","popups_SetAssigneePopup","searchMembers","organizations","organization","projectOrganization","handleSearchResult","searchUsers","activeUsers","helpers_users","defaultUsersArray","system","minLength","map_default","marginLeft","IssueAssign_IssueAssign","toggleAssign","togglePopup","handleClose","assigneeName","assigneeAvatar","assigneeActive","canAssign","renderAssignee","DropdownIcon_default","CommentPopup_CommentPopup","textComment","handleCommentClick","trim","onComment","handleCancelClick","toggleComment","metaKey","ctrlKey","autoTriggered","IssueCommentAction_IssueCommentAction","addComment","issueKey","currentPopup","commentAutoTriggered","commentPlaceholder","SEVERITY","SetSeverityPopup","SeverityIcon_default","IssueSeverity_IssueSeverity","toggleSetSeverity","setSeverity","setIssueProperty","canSetSeverity","SetIssueTagsPopup_LIST_SIZE","SetIssueTagsPopup_SetIssueTagsPopup","searchResult","tag","setTags","without_default","availableTags","IssueTags_IssueTags","toggleSetTags","_issue$tags","canSetTags","SetTransitionPopup","fromHotspot","transitions","isManualVulnerability","transition","_translateTransition2","translateTransition","description","IssueTransition_IssueTransition","setTransition","toggleSetTransition","hasTransitions","TYPES","SetTypePopup","IssueTypeIcon_default","IssueType_IssueType","toggleSetType","setType","canSetType","theme","baseFontColor","IssueActionsBar_IssueActionsBar","_this","property","popup","apiCall","IssueActionsBar_objectSpread","handleTransition","actions","canComment","isSecurityHotspot","effort","CommentDeletePopup","onDelete","IssueCommentLine_IssueCommentLine","openPopup","handleEdit","onEdit","toggleEditPopup","handleDelete","toggleDeletePopup","popupName","force","closePopups","authorName","displayName","authorActive","authorAvatar","ChangelogPopup_ChangelogPopup","loadChangelog","IssueChangelog_IssueChangelog","toggleChangelog","mouseEnterDelay","IssueMessage","engine","manualVulnerability","ruleKey","onOpenRule","SimilarIssuesPopup_SimilarIssuesPopup","onFilter","subProject","ruleName","TagsIcon_default","QualifierIcon_default","subProjectName","componentQualifier","componentLongName","SimilarIssuesFilter_SimilarIssuesFilter","handleFilter","FilterIcon_default","IssueTitleBar","hasSimilarIssuesFilter","locationsCount","secondaryLocations","flows","sum","locationsBadge","displayLocations","displayLocationsCount","issueUrl","IssueTitleBar_objectSpread","types","context","openRule","externalRuleEngine","displayLocationsLink","IssueView_IssueView","handleCheck","isClickable","parentElement","editComment","deleteComment","hasCheckbox","issueClass","issue-with-checkbox","data-issue","comments","Issue_Issue","onPopupToggle","handleAssignement","bindShortcuts","unbindShortcuts","_ref$linkToProject","projectNameLabel","sonar_ui_common_components_icons_QualifierIcon__WEBPACK_IMPORTED_MODULE_6___default","_types_component__WEBPACK_IMPORTED_MODULE_13__","sonar_ui_common_helpers_urls__WEBPACK_IMPORTED_MODULE_10__","_helpers_urls__WEBPACK_IMPORTED_MODULE_12__","SubProject","sonar_ui_common_helpers_path__WEBPACK_IMPORTED_MODULE_9__","sonar_ui_common_components_controls_clipboard__WEBPACK_IMPORTED_MODULE_4__","canMarkAsFavorite","_helpers_branch_like__WEBPACK_IMPORTED_MODULE_11__","_controls_Favorite__WEBPACK_IMPORTED_MODULE_14__","fav","little-spacer-right","react_router__WEBPACK_IMPORTED_MODULE_2__","fileUuids","resolved","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_8__","sonar_ui_common_components_ui_DeferredSpinner__WEBPACK_IMPORTED_MODULE_7___default","sonar_ui_common_components_controls_buttons__WEBPACK_IMPORTED_MODULE_3__","sonar_ui_common_components_icons_ExpandSnippetIcon__WEBPACK_IMPORTED_MODULE_5___default","optimizeHighlightedSymbols","symbolsForLine","lodash_intersection__WEBPACK_IMPORTED_MODULE_0___default","optimizeLocationMessage","optimizedSecondaryIssueLocations","some","optimizeSelectedIssue","selectedIssue","issuesForLine","LineIssuesList","issuePopup","Issue","displayIssueLocationsCount","displayIssueLocationsLink","onIssueClick","LineCode_LineCode","attachEvents","activeMarkerNode","scroll","detachEvents","codeNode","querySelectorAll","onIssueSelect","padding","secondaryIssueLocations","showIssues","has-issues","renderedTokens","leadingMarker","displayLocationMarkers","marker","renderMarker","paddingBottom","filteredSelectedIssues","data-line-number","LineCoverage","coverageStatus","getStatusTooltip","conditions","coveredConditions","LineDuplicationBlock_LineDuplicationBlock","blur","handleTogglePopup","closePopup","duplicated","popupOpen","source-line-duplicated","data-index","LineDuplications_LineDuplications","cell","LineIssuesIndicator_LineIssuesIndicator","hasIssues","source-line-with-issues","mostImportantIssue","IssueIcon_default","LineOptionsPopup","RightTop","rel","LineNumber_LineNumber","lineNumber","SCMPopup","hasAuthor","scmAuthor","scmDate","scmRevision","LineSCM_LineSCM","previousLine","hasPopup","changed","isSCMChanged","data-author","LINE_HEIGHT","Line_Line","isPopupOpen","handleIssuesIndicatorClick","openIssues","onIssuesClose","onIssueUnselect","onIssuesOpen","displayCoverage","_this$props2$displayS","duplicationsCount","source-line-highlighted","source-line-filtered","isNew","source-line-filtered-dark","source-line-last","bottomPadding","verticalBuffer","displayIssues","displayAllIssues","displayDuplications","times_default","classnames__WEBPACK_IMPORTED_MODULE_0___default","sonar_ui_common_components_icons_ExpandSnippetIcon__WEBPACK_IMPORTED_MODULE_2__","sonar_ui_common_components_icons_ExpandSnippetIcon__WEBPACK_IMPORTED_MODULE_2___default","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_3__","sonar_ui_common_helpers_scrolling__WEBPACK_IMPORTED_MODULE_4__","_components_SourceViewer_components_Line__WEBPACK_IMPORTED_MODULE_5__","_components_SourceViewer_helpers_indexing__WEBPACK_IMPORTED_MODULE_6__","_components_SourceViewer_helpers_issueLocations__WEBPACK_IMPORTED_MODULE_7__","_components_SourceViewer_helpers_lines__WEBPACK_IMPORTED_MODULE_8__","_utils__WEBPACK_IMPORTED_MODULE_10__","SCROLL_LEFT_OFFSET","doScroll","snippetNodeRef","leftOffset","rightOffset","scrollToLastExpandedRow","snippetNode","lastRow","lineDuplications","isSinkLine","_this$props2$issuesBy","parseInt","bottomLine","issueLine","lowestVisibleIssue","k","expand-up","expand-down","renderLine"],"mappings":"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","file":"js/281.m.16b02d82.chunk.js","sourcesContent":["\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./HotspotList.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./HotspotList.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./HotspotList.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".hotspot-list-header{padding:16px 8px}.hotspot-risk-header{padding:8px}.hotspot-category{background-color:#fff;border:1px solid #e6e6e6}.hotspot-category .hotspot-category-header{padding:16px 8px;color:#444;border-bottom:none;border-left:4px solid}.hotspot-category .hotspot-category-header.contains-selected-hotspot,.hotspot-category .hotspot-category-header:hover{color:#4b9fd5}.hotspot-category.HIGH .hotspot-category-header{border-left-color:#d4333f}.hotspot-category.MEDIUM .hotspot-category-header{border-left-color:#ed7d20}.hotspot-category.LOW .hotspot-category-header{border-left-color:#eabe06}.hotspot-item{color:#444;display:block;padding:8px 16px;border:1px solid transparent;border-top-color:#e6e6e6;transition:padding 0s,border 0s}.hotspot-item:hover{background-color:#f2faff;border:1px dashed #4b9fd5;color:#444}.hotspot-item.highlight{background-color:#f2faff;color:#444;border:1px solid #4b9fd5;cursor:unset}.hotspot-risk-badge{color:#fff;text-transform:uppercase;display:inline-block;text-align:center;min-width:48px;padding:0 8px;font-weight:700;border-radius:2px}.hotspot-risk-badge.HIGH{background-color:#d4333f}.hotspot-risk-badge.MEDIUM{background-color:#ed7d20}.hotspot-risk-badge.LOW{background-color:#eabe06}\", \"\"]);\n\n","\nvar content = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../../node_modules/postcss-loader/src/index.js??postcss!./AssigneeSelection.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../../node_modules/postcss-loader/src/index.js??postcss!./AssigneeSelection.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../../node_modules/postcss-loader/src/index.js??postcss!./AssigneeSelection.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".hotspot-assignee-search-results{min-width:300px}.hotspot-assignee-search-results li{cursor:pointer}.hotspot-assignee-search-results li.active,.hotspot-assignee-search-results li:hover{background-color:#f3f3f3}\", \"\"]);\n\n","\nvar content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./HotspotViewer.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./HotspotViewer.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./HotspotViewer.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".hotspot-information{flex-basis:320px}.hotspot-information>div>span{flex-basis:100px}\", \"\"]);\n\n","\nvar content = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Status.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Status.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Status.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"#status-trigger,#status-trigger+.popup{width:400px;box-sizing:border-box}#status-trigger{height:80px;border-radius:4px;outline:none}#status-trigger.readonly{cursor:not-allowed}#status-trigger:not(.readonly){cursor:pointer;background-color:#236a97}#status-trigger:not(.readonly) *{color:#fff}\", \"\"]);\n\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"#security_hotspots .wrapper{position:fixed;bottom:0;width:100%}#security_hotspots .layout-page{margin:0 auto;min-width:1080px;max-width:1280px;height:100%}#security_hotspots .filter-bar{max-width:1280px;box-sizing:border-box;margin:0 auto;padding:16px 8px;border-bottom:1px solid #e6e6e6}#security_hotspots .sidebar{flex:0 0 300px;border-right:1px solid #e6e6e6;height:100%;overflow-y:auto}#security_hotspots .main{flex:1 1 auto;background-color:#fff;overflow-x:auto}#security_hotspots .main .hotspot-content{overflow-y:auto;height:100%;box-sizing:border-box}.invisible{visibility:hidden}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport enum RiskExposure {\n  LOW = 'LOW',\n  MEDIUM = 'MEDIUM',\n  HIGH = 'HIGH'\n}\n\nexport enum HotspotStatus {\n  TO_REVIEW = 'TO_REVIEW',\n  REVIEWED = 'REVIEWED'\n}\n\nexport enum HotspotResolution {\n  FIXED = 'FIXED',\n  SAFE = 'SAFE'\n}\n\nexport enum HotspotStatusFilter {\n  FIXED = 'FIXED',\n  SAFE = 'SAFE',\n  TO_REVIEW = 'TO_REVIEW'\n}\n\nexport enum HotspotStatusOption {\n  FIXED = 'FIXED',\n  SAFE = 'SAFE',\n  TO_REVIEW = 'TO_REVIEW'\n}\n\nexport interface HotspotFilters {\n  assignedToMe: boolean;\n  sinceLeakPeriod: boolean;\n  status: HotspotStatusFilter;\n}\n\nexport interface RawHotspot {\n  assignee?: string;\n  author?: string;\n  component: string;\n  creationDate: string;\n  key: string;\n  line?: number;\n  message: string;\n  project: string;\n  resolution?: HotspotResolution;\n  rule: string;\n  securityCategory: string;\n  status: HotspotStatus;\n  subProject?: string;\n  updateDate: string;\n  vulnerabilityProbability: RiskExposure;\n}\n\nexport interface Hotspot {\n  assignee?: string;\n  assigneeUser?: T.UserBase;\n  author: string;\n  authorUser: T.UserBase;\n  canChangeStatus: boolean;\n  changelog: T.IssueChangelog[];\n  comment: HotspotComment[];\n  component: T.Component;\n  creationDate: string;\n  key: string;\n  line?: number;\n  message: string;\n  project: T.Component;\n  resolution?: HotspotResolution;\n  rule: HotspotRule;\n  status: HotspotStatus;\n  textRange: T.TextRange;\n  updateDate: string;\n  users: T.UserBase[];\n}\n\nexport interface HotspotUpdateFields {\n  status: HotspotStatus;\n  resolution?: HotspotResolution;\n}\n\nexport interface HotspotUpdate extends HotspotUpdateFields {\n  key: string;\n}\n\nexport interface HotspotRule {\n  fixRecommendations?: string;\n  key: string;\n  name: string;\n  riskDescription?: string;\n  securityCategory: string;\n  vulnerabilityDescription?: string;\n  vulnerabilityProbability: RiskExposure;\n}\n\nexport interface HotspotComment {\n  key: string;\n  htmlText: string;\n  markdown: string;\n  updatable: boolean;\n  createdAt: string;\n  login: string;\n  user: T.UserBase;\n}\n\nexport interface ReviewHistoryElement {\n  type: ReviewHistoryType;\n  date: string;\n  user: Pick<T.UserBase, 'active' | 'avatar' | 'name'>;\n  diffs?: T.IssueChangelogDiff[];\n  html?: string;\n  key?: string;\n  updatable?: boolean;\n  markdown?: string;\n}\n\nexport enum ReviewHistoryType {\n  Creation,\n  Diff,\n  Comment\n}\n\nexport interface HotspotSearchResponse {\n  components?: { key: string; qualifier: string; name: string }[];\n  hotspots: RawHotspot[];\n  paging: T.Paging;\n}\n\nexport interface HotspotSetStatusRequest {\n  status: HotspotStatus;\n  resolution?: HotspotResolution;\n  comment?: string;\n}\n\nexport interface HotspotAssignRequest {\n  assignee: string;\n  comment?: string;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getBaseUrl } from 'sonar-ui-common/helpers/urls';\n\nexport interface EmptyHotspotsPageProps {\n  filtered: boolean;\n  isStaticListOfHotspots: boolean;\n}\n\nexport default function EmptyHotspotsPage(props: EmptyHotspotsPageProps) {\n  const { filtered, isStaticListOfHotspots } = props;\n\n  let translationRoot;\n  if (isStaticListOfHotspots) {\n    translationRoot = 'no_hotspots_for_keys';\n  } else if (filtered) {\n    translationRoot = 'no_hotspots_for_filters';\n  } else {\n    translationRoot = 'no_hotspots';\n  }\n\n  return (\n    <div className=\"display-flex-column display-flex-center huge-spacer-top\">\n      <img\n        alt={translate('hotspots.page')}\n        className=\"huge-spacer-top\"\n        height={100}\n        src={`${getBaseUrl()}/images/${filtered ? 'filter-large' : 'hotspot-large'}.svg`}\n      />\n      <h1 className=\"huge-spacer-top\">{translate(`hotspots.${translationRoot}.title`)}</h1>\n      <div className=\"abs-width-400 text-center big-spacer-top\">\n        {translate(`hotspots.${translationRoot}.description`)}\n      </div>\n      {!(filtered || isStaticListOfHotspots) && (\n        <Link\n          className=\"big-spacer-top\"\n          target=\"_blank\"\n          to={{ pathname: '/documentation/user-guide/security-hotspots/' }}>\n          {translate('hotspots.learn_more')}\n        </Link>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport RadioToggle from 'sonar-ui-common/components/controls/RadioToggle';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { withCurrentUser } from '../../../components/hoc/withCurrentUser';\nimport Measure from '../../../components/measure/Measure';\nimport CoverageRating from '../../../components/ui/CoverageRating';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { ComponentQualifier } from '../../../types/component';\nimport { HotspotFilters, HotspotStatusFilter } from '../../../types/security-hotspots';\n\nexport interface FilterBarProps {\n  currentUser: T.CurrentUser;\n  component: T.Component;\n  filters: HotspotFilters;\n  hotspotsReviewedMeasure?: string;\n  isStaticListOfHotspots: boolean;\n  loadingMeasure: boolean;\n  onBranch: boolean;\n  onChangeFilters: (filters: Partial<HotspotFilters>) => void;\n  onShowAllHotspots: () => void;\n}\n\nconst statusOptions: Array<{ label: string; value: string }> = [\n  { value: HotspotStatusFilter.TO_REVIEW, label: translate('hotspot.filters.status.to_review') },\n  { value: HotspotStatusFilter.FIXED, label: translate('hotspot.filters.status.fixed') },\n  { value: HotspotStatusFilter.SAFE, label: translate('hotspot.filters.status.safe') }\n];\n\nconst periodOptions = [\n  { value: true, label: translate('hotspot.filters.period.since_leak_period') },\n  { value: false, label: translate('hotspot.filters.period.overall') }\n];\n\nexport enum AssigneeFilterOption {\n  ALL = 'all',\n  ME = 'me'\n}\n\nconst assigneeFilterOptions = [\n  { value: AssigneeFilterOption.ME, label: translate('hotspot.filters.assignee.assigned_to_me') },\n  { value: AssigneeFilterOption.ALL, label: translate('hotspot.filters.assignee.all') }\n];\n\nexport function FilterBar(props: FilterBarProps) {\n  const {\n    currentUser,\n    component,\n    filters,\n    hotspotsReviewedMeasure,\n    isStaticListOfHotspots,\n    loadingMeasure,\n    onBranch\n  } = props;\n  const isProject = component.qualifier === ComponentQualifier.Project;\n\n  return (\n    <div className=\"filter-bar display-flex-center\">\n      {isStaticListOfHotspots ? (\n        <a id=\"show_all_hotspot\" onClick={() => props.onShowAllHotspots()} role=\"link\" tabIndex={0}>\n          {translate('hotspot.filters.show_all')}\n        </a>\n      ) : (\n        <div className=\"display-flex-space-between width-100\">\n          <div className=\"display-flex-center\">\n            <h3 className=\"huge-spacer-right\">{translate('hotspot.filters.title')}</h3>\n\n            {isLoggedIn(currentUser) && (\n              <RadioToggle\n                className=\"huge-spacer-right\"\n                name=\"assignee-filter\"\n                onCheck={(value: AssigneeFilterOption) =>\n                  props.onChangeFilters({ assignedToMe: value === AssigneeFilterOption.ME })\n                }\n                options={assigneeFilterOptions}\n                value={filters.assignedToMe ? AssigneeFilterOption.ME : AssigneeFilterOption.ALL}\n              />\n            )}\n\n            <span className=\"spacer-right\">{translate('status')}</span>\n            <Select\n              className=\"input-medium big-spacer-right\"\n              clearable={false}\n              onChange={(option: { value: HotspotStatusFilter }) =>\n                props.onChangeFilters({ status: option.value })\n              }\n              options={statusOptions}\n              searchable={false}\n              value={filters.status}\n            />\n\n            {onBranch && (\n              <Select\n                className=\"input-medium big-spacer-right\"\n                clearable={false}\n                onChange={(option: { value: boolean }) =>\n                  props.onChangeFilters({ sinceLeakPeriod: option.value })\n                }\n                options={periodOptions}\n                searchable={false}\n                value={filters.sinceLeakPeriod}\n              />\n            )}\n          </div>\n\n          {isProject && (\n            <div className=\"display-flex-center\">\n              <span className=\"little-spacer-right\">\n                {translate('metric.security_hotspots_reviewed.name')}\n              </span>\n              <HelpTooltip\n                className=\"big-spacer-right\"\n                overlay={translate('hotspots.reviewed.tooltip')}\n              />\n              <DeferredSpinner loading={loadingMeasure}>\n                {hotspotsReviewedMeasure && <CoverageRating value={hotspotsReviewedMeasure} />}\n                <Measure\n                  className=\"spacer-left huge\"\n                  metricKey={\n                    onBranch && !filters.sinceLeakPeriod\n                      ? 'security_hotspots_reviewed'\n                      : 'new_security_hotspots_reviewed'\n                  }\n                  metricType=\"PERCENT\"\n                  value={hotspotsReviewedMeasure}\n                />\n              </DeferredSpinner>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default withCurrentUser(FilterBar);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { groupBy, sortBy } from 'lodash';\nimport {\n  Hotspot,\n  HotspotResolution,\n  HotspotStatus,\n  HotspotStatusOption,\n  RawHotspot,\n  ReviewHistoryElement,\n  ReviewHistoryType,\n  RiskExposure\n} from '../../types/security-hotspots';\n\nexport const RISK_EXPOSURE_LEVELS = [RiskExposure.HIGH, RiskExposure.MEDIUM, RiskExposure.LOW];\n\nexport function mapRules(rules: Array<{ key: string; name: string }>): T.Dict<string> {\n  return rules.reduce((ruleMap: T.Dict<string>, r) => {\n    ruleMap[r.key] = r.name;\n    return ruleMap;\n  }, {});\n}\n\nexport function groupByCategory(\n  hotspots: RawHotspot[] = [],\n  securityCategories: T.StandardSecurityCategories\n) {\n  const groups = groupBy(hotspots, h => h.securityCategory);\n\n  return Object.keys(groups).map(key => ({\n    key,\n    title: getCategoryTitle(key, securityCategories),\n    hotspots: groups[key]\n  }));\n}\n\nexport function sortHotspots(\n  hotspots: RawHotspot[],\n  securityCategories: T.Dict<{ title: string }>\n) {\n  return sortBy(hotspots, [\n    h => RISK_EXPOSURE_LEVELS.indexOf(h.vulnerabilityProbability),\n    h => getCategoryTitle(h.securityCategory, securityCategories),\n    h => h.message\n  ]);\n}\n\nfunction getCategoryTitle(key: string, securityCategories: T.StandardSecurityCategories) {\n  return securityCategories[key] ? securityCategories[key].title : key;\n}\n\nexport function constructSourceViewerFile(\n  { component, project }: Hotspot,\n  lines?: number\n): T.SourceViewerFile {\n  return {\n    key: component.key,\n    measures: { lines: lines ? lines.toString() : undefined },\n    path: component.path || '',\n    project: project.key,\n    projectName: project.name,\n    q: component.qualifier,\n    uuid: ''\n  };\n}\n\nexport function getHotspotReviewHistory(hotspot: Hotspot): ReviewHistoryElement[] {\n  const history: ReviewHistoryElement[] = [];\n\n  if (hotspot.creationDate) {\n    history.push({\n      type: ReviewHistoryType.Creation,\n      date: hotspot.creationDate,\n      user: {\n        ...hotspot.authorUser,\n        name: hotspot.authorUser.name || hotspot.authorUser.login\n      }\n    });\n  }\n\n  if (hotspot.changelog && hotspot.changelog.length > 0) {\n    history.push(\n      ...hotspot.changelog.map(log => ({\n        type: ReviewHistoryType.Diff,\n        date: log.creationDate,\n        user: {\n          active: log.isUserActive,\n          avatar: log.avatar,\n          name: log.userName || log.user\n        },\n        diffs: log.diffs\n      }))\n    );\n  }\n\n  if (hotspot.comment && hotspot.comment.length > 0) {\n    history.push(\n      ...hotspot.comment.map(comment => ({\n        type: ReviewHistoryType.Comment,\n        date: comment.createdAt,\n        updatable: comment.updatable,\n        user: {\n          ...comment.user,\n          name: comment.user.name || comment.user.login\n        },\n        html: comment.htmlText,\n        key: comment.key,\n        markdown: comment.markdown\n      }))\n    );\n  }\n\n  return sortBy(history, elt => elt.date);\n}\n\nconst STATUS_AND_RESOLUTION_TO_STATUS_OPTION = {\n  [HotspotStatus.TO_REVIEW]: HotspotStatusOption.TO_REVIEW,\n  [HotspotStatus.REVIEWED]: HotspotStatusOption.FIXED,\n  [HotspotResolution.FIXED]: HotspotStatusOption.FIXED,\n  [HotspotResolution.SAFE]: HotspotStatusOption.SAFE\n};\n\nexport function getStatusOptionFromStatusAndResolution(\n  status: HotspotStatus,\n  resolution?: HotspotResolution\n) {\n  // Resolution is the most determinist info here, so we use it first to get the matching status option\n  // If not provided, we use the status (which will be TO_REVIEW)\n  return STATUS_AND_RESOLUTION_TO_STATUS_OPTION[resolution ?? status];\n}\n\nconst STATUS_OPTION_TO_STATUS_AND_RESOLUTION_MAP = {\n  [HotspotStatusOption.TO_REVIEW]: { status: HotspotStatus.TO_REVIEW, resolution: undefined },\n  [HotspotStatusOption.FIXED]: {\n    status: HotspotStatus.REVIEWED,\n    resolution: HotspotResolution.FIXED\n  },\n  [HotspotStatusOption.SAFE]: {\n    status: HotspotStatus.REVIEWED,\n    resolution: HotspotResolution.SAFE\n  }\n};\n\nexport function getStatusAndResolutionFromStatusOption(statusOption: HotspotStatusOption) {\n  return STATUS_OPTION_TO_STATUS_AND_RESOLUTION_MAP[statusOption];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { RawHotspot } from '../../../types/security-hotspots';\nimport { getStatusOptionFromStatusAndResolution } from '../utils';\n\nexport interface HotspotListItemProps {\n  hotspot: RawHotspot;\n  onClick: (hotspot: RawHotspot) => void;\n  selected: boolean;\n}\n\nexport default function HotspotListItem(props: HotspotListItemProps) {\n  const { hotspot, selected } = props;\n  return (\n    <a\n      className={classNames('hotspot-item', { highlight: selected })}\n      href=\"#\"\n      onClick={() => !selected && props.onClick(hotspot)}>\n      <div className=\"little-spacer-left\">{hotspot.message}</div>\n      <div className=\"badge spacer-top\">\n        {translate(\n          'hotspots.status_option',\n          getStatusOptionFromStatusAndResolution(hotspot.status, hotspot.resolution)\n        )}\n      </div>\n    </a>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport ChevronDownIcon from 'sonar-ui-common/components/icons/ChevronDownIcon';\nimport ChevronUpIcon from 'sonar-ui-common/components/icons/ChevronUpIcon';\nimport { RawHotspot } from '../../../types/security-hotspots';\nimport HotspotListItem from './HotspotListItem';\n\nexport interface HotspotCategoryProps {\n  categoryKey: string;\n  expanded: boolean;\n  hotspots: RawHotspot[];\n  onHotspotClick: (hotspot: RawHotspot) => void;\n  onToggleExpand: (categoryKey: string, value: boolean) => void;\n  selectedHotspot: RawHotspot;\n  title: string;\n}\n\nexport default function HotspotCategory(props: HotspotCategoryProps) {\n  const { categoryKey, expanded, hotspots, selectedHotspot, title } = props;\n\n  if (hotspots.length < 1) {\n    return null;\n  }\n\n  const risk = hotspots[0].vulnerabilityProbability;\n\n  return (\n    <div className={classNames('hotspot-category', risk)}>\n      <a\n        className={classNames(\n          'hotspot-category-header display-flex-space-between display-flex-center',\n          { 'contains-selected-hotspot': selectedHotspot.securityCategory === categoryKey }\n        )}\n        href=\"#\"\n        onClick={() => props.onToggleExpand(categoryKey, !expanded)}>\n        <strong className=\"flex-1\">{title}</strong>\n        <span>\n          <span className=\"counter-badge\">{hotspots.length}</span>\n          {expanded ? (\n            <ChevronUpIcon className=\"big-spacer-left\" />\n          ) : (\n            <ChevronDownIcon className=\"big-spacer-left\" />\n          )}\n        </span>\n      </a>\n      {expanded && (\n        <ul>\n          {hotspots.map(h => (\n            <li key={h.key}>\n              <HotspotListItem\n                hotspot={h}\n                onClick={props.onHotspotClick}\n                selected={h.key === selectedHotspot.key}\n              />\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { groupBy } from 'lodash';\nimport * as React from 'react';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport SecurityHotspotIcon from 'sonar-ui-common/components/icons/SecurityHotspotIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { HotspotStatusFilter, RawHotspot, RiskExposure } from '../../../types/security-hotspots';\nimport { groupByCategory, RISK_EXPOSURE_LEVELS } from '../utils';\nimport HotspotCategory from './HotspotCategory';\nimport './HotspotList.css';\n\ninterface Props {\n  hotspots: RawHotspot[];\n  hotspotsTotal?: number;\n  isStaticListOfHotspots: boolean;\n  loadingMore: boolean;\n  onHotspotClick: (hotspot: RawHotspot) => void;\n  onLoadMore: () => void;\n  securityCategories: T.StandardSecurityCategories;\n  selectedHotspot: RawHotspot;\n  statusFilter: HotspotStatusFilter;\n}\n\ninterface State {\n  expandedCategories: T.Dict<boolean>;\n  groupedHotspots: Array<{\n    risk: RiskExposure;\n    categories: Array<{ key: string; hotspots: RawHotspot[]; title: string }>;\n  }>;\n}\n\nexport default class HotspotList extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      expandedCategories: { [props.selectedHotspot.securityCategory]: true },\n      groupedHotspots: this.groupHotspots(props.hotspots, props.securityCategories)\n    };\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    // Force open the category of selected hotspot\n    if (\n      this.props.selectedHotspot.securityCategory !== prevProps.selectedHotspot.securityCategory\n    ) {\n      this.handleToggleCategory(this.props.selectedHotspot.securityCategory, true);\n    }\n\n    // Compute the hotspot tree from the list\n    if (\n      this.props.hotspots !== prevProps.hotspots ||\n      this.props.securityCategories !== prevProps.securityCategories\n    ) {\n      const groupedHotspots = this.groupHotspots(\n        this.props.hotspots,\n        this.props.securityCategories\n      );\n      this.setState({ groupedHotspots });\n    }\n  }\n\n  groupHotspots = (hotspots: RawHotspot[], securityCategories: T.StandardSecurityCategories) => {\n    const risks = groupBy(hotspots, h => h.vulnerabilityProbability);\n\n    return RISK_EXPOSURE_LEVELS.map(risk => ({\n      risk,\n      categories: groupByCategory(risks[risk], securityCategories)\n    })).filter(risk => risk.categories.length > 0);\n  };\n\n  handleToggleCategory = (categoryKey: string, value: boolean) => {\n    this.setState(({ expandedCategories }) => ({\n      expandedCategories: { ...expandedCategories, [categoryKey]: value }\n    }));\n  };\n\n  render() {\n    const {\n      hotspots,\n      hotspotsTotal,\n      isStaticListOfHotspots,\n      loadingMore,\n      selectedHotspot,\n      statusFilter\n    } = this.props;\n\n    const { expandedCategories, groupedHotspots } = this.state;\n\n    return (\n      <div className=\"huge-spacer-bottom\">\n        <h1 className=\"hotspot-list-header bordered-bottom\">\n          <SecurityHotspotIcon className=\"spacer-right\" />\n          {translateWithParameters(\n            isStaticListOfHotspots ? 'hotspots.list_title' : `hotspots.list_title.${statusFilter}`,\n            hotspots.length\n          )}\n        </h1>\n        <ul className=\"big-spacer-bottom\">\n          {groupedHotspots.map(riskGroup => (\n            <li className=\"big-spacer-bottom\" key={riskGroup.risk}>\n              <div className=\"hotspot-risk-header little-spacer-left\">\n                <span>{translate('hotspots.risk_exposure')}:</span>\n                <div className={classNames('hotspot-risk-badge', 'spacer-left', riskGroup.risk)}>\n                  {translate('risk_exposure', riskGroup.risk)}\n                </div>\n              </div>\n              <ul>\n                {riskGroup.categories.map(cat => (\n                  <li className=\"spacer-bottom\" key={cat.key}>\n                    <HotspotCategory\n                      categoryKey={cat.key}\n                      expanded={expandedCategories[cat.key]}\n                      hotspots={cat.hotspots}\n                      onHotspotClick={this.props.onHotspotClick}\n                      onToggleExpand={this.handleToggleCategory}\n                      selectedHotspot={selectedHotspot}\n                      title={cat.title}\n                    />\n                  </li>\n                ))}\n              </ul>\n            </li>\n          ))}\n        </ul>\n        <ListFooter\n          count={hotspots.length}\n          loadMore={!loadingMore ? this.props.onLoadMore : undefined}\n          loading={loadingMore}\n          total={hotspotsTotal}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../../../components/ui/Avatar';\nimport './AssigneeSelection.css';\n\nexport interface HotspotAssigneeSelectRendererProps {\n  highlighted?: T.UserActive;\n  loading: boolean;\n  onKeyDown: (event: React.KeyboardEvent) => void;\n  onSearch: (query: string) => void;\n  onSelect: (user: T.UserActive) => void;\n  open: boolean;\n  query?: string;\n  suggestedUsers?: T.UserActive[];\n}\n\nexport default function AssigneeSelectionRenderer(props: HotspotAssigneeSelectRendererProps) {\n  const { highlighted, loading, open, query, suggestedUsers } = props;\n  return (\n    <>\n      <div className=\"display-flex-center\">\n        <SearchBox\n          autoFocus={true}\n          onChange={props.onSearch}\n          onKeyDown={props.onKeyDown}\n          placeholder={translate('hotspots.assignee.select_user')}\n          value={query}\n        />\n\n        {loading && <DeferredSpinner className=\"spacer-left\" />}\n      </div>\n\n      {!loading && open && (\n        <div className=\"position-relative\">\n          <DropdownOverlay noPadding={true} placement={PopupPlacement.BottomLeft}>\n            {suggestedUsers && suggestedUsers.length > 0 ? (\n              <ul className=\"hotspot-assignee-search-results\">\n                {suggestedUsers.map(suggestion => (\n                  <li\n                    className={classNames('padded', {\n                      active: highlighted && highlighted.login === suggestion.login\n                    })}\n                    key={suggestion.login}\n                    onClick={() => props.onSelect(suggestion)}>\n                    <Avatar\n                      className=\"spacer-right\"\n                      hash={suggestion.avatar}\n                      name={suggestion.name}\n                      size={16}\n                    />\n                    {suggestion.name}\n                  </li>\n                ))}\n              </ul>\n            ) : (\n              <div className=\"padded\">{translate('no_results')}</div>\n            )}\n          </DropdownOverlay>\n        </div>\n      )}\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce } from 'lodash';\nimport * as React from 'react';\nimport { KeyCodes } from 'sonar-ui-common/helpers/keycodes';\nimport { searchUsers } from '../../../../api/users';\nimport { isUserActive } from '../../../../helpers/users';\nimport AssigneeSelectionRenderer from './AssigneeSelectionRenderer';\n\ninterface Props {\n  allowCurrentUserSelection: boolean;\n  loggedInUser: T.LoggedInUser;\n  onSelect: (user?: T.UserActive) => void;\n}\n\ninterface State {\n  highlighted?: T.UserActive;\n  loading: boolean;\n  open: boolean;\n  query?: string;\n  suggestedUsers: T.UserActive[];\n}\n\nexport default class AssigneeSelection extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      loading: false,\n      open: props.allowCurrentUserSelection,\n      suggestedUsers: props.allowCurrentUserSelection ? [props.loggedInUser] : []\n    };\n\n    this.handleSearch = debounce(this.handleSearch, 250);\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleSearch = (query: string) => {\n    if (this.mounted) {\n      if (query.length < 2) {\n        this.handleNoSearch(query);\n      } else {\n        this.handleActualSearch(query);\n      }\n    }\n  };\n\n  handleNoSearch = (query: string) => {\n    const { allowCurrentUserSelection, loggedInUser } = this.props;\n\n    this.setState({\n      loading: false,\n      open: allowCurrentUserSelection,\n      query,\n      suggestedUsers: allowCurrentUserSelection ? [loggedInUser] : []\n    });\n  };\n\n  handleActualSearch = (query: string) => {\n    this.setState({ loading: true, query });\n    searchUsers({ q: query })\n      .then(result => {\n        if (this.mounted) {\n          this.setState({\n            loading: false,\n            query,\n            open: true,\n            suggestedUsers: result.users.filter(isUserActive) as T.UserActive[]\n          });\n        }\n      })\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      });\n  };\n\n  handleKeyDown = (event: React.KeyboardEvent) => {\n    switch (event.keyCode) {\n      case KeyCodes.Enter:\n        event.preventDefault();\n        this.selectHighlighted();\n        break;\n      case KeyCodes.UpArrow:\n        event.preventDefault();\n        this.highlightPrevious();\n        break;\n      case KeyCodes.DownArrow:\n        event.preventDefault();\n        this.highlightNext();\n        break;\n    }\n  };\n\n  getCurrentIndex = () => {\n    const { highlighted, suggestedUsers } = this.state;\n\n    return highlighted\n      ? suggestedUsers.findIndex(suggestion => suggestion.login === highlighted.login)\n      : -1;\n  };\n\n  highlightIndex = (index: number) => {\n    const { suggestedUsers } = this.state;\n\n    if (suggestedUsers.length > 0) {\n      if (index < 0) {\n        index = suggestedUsers.length - 1;\n      } else if (index >= suggestedUsers.length) {\n        index = 0;\n      }\n\n      this.setState({ highlighted: suggestedUsers[index] });\n    }\n  };\n\n  highlightPrevious = () => {\n    this.highlightIndex(this.getCurrentIndex() - 1);\n  };\n\n  highlightNext = () => {\n    this.highlightIndex(this.getCurrentIndex() + 1);\n  };\n\n  selectHighlighted = () => {\n    const { highlighted } = this.state;\n\n    if (highlighted !== undefined) {\n      this.props.onSelect(highlighted);\n    }\n  };\n\n  render() {\n    const { highlighted, loading, open, query, suggestedUsers } = this.state;\n\n    return (\n      <AssigneeSelectionRenderer\n        highlighted={highlighted}\n        loading={loading}\n        onKeyDown={this.handleKeyDown}\n        onSearch={this.handleSearch}\n        onSelect={this.props.onSelect}\n        open={open}\n        query={query}\n        suggestedUsers={suggestedUsers}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport * as React from 'react';\nimport { EditButton } from 'sonar-ui-common/components/controls/buttons';\nimport EscKeydownHandler from 'sonar-ui-common/components/controls/EscKeydownHandler';\nimport OutsideClickHandler from 'sonar-ui-common/components/controls/OutsideClickHandler';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport AssigneeSelection from './AssigneeSelection';\n\nexport interface AssigneeRendererProps {\n  canEdit: boolean;\n  editing: boolean;\n  loading: boolean;\n\n  assignee?: T.UserBase;\n  loggedInUser?: T.LoggedInUser;\n\n  onAssign: (user?: T.UserActive) => void;\n  onEnterEditionMode: () => void;\n  onExitEditionMode: () => void;\n}\n\nexport default function AssigneeRenderer(props: AssigneeRendererProps) {\n  const { assignee, canEdit, loggedInUser, editing, loading } = props;\n\n  return (\n    <DeferredSpinner loading={loading}>\n      {!editing && (\n        <div className=\"display-flex-center\">\n          <strong className=\"nowrap\">\n            {assignee &&\n              (assignee.active\n                ? assignee.name ?? assignee.login\n                : translateWithParameters('user.x_deleted', assignee.name ?? assignee.login))}\n            {!assignee && translate('unassigned')}\n          </strong>\n          {loggedInUser && canEdit && (\n            <EditButton className=\"spacer-left\" onClick={props.onEnterEditionMode} />\n          )}\n        </div>\n      )}\n\n      {loggedInUser && editing && (\n        <EscKeydownHandler onKeydown={props.onExitEditionMode}>\n          <OutsideClickHandler onClickOutside={props.onExitEditionMode}>\n            <AssigneeSelection\n              allowCurrentUserSelection={loggedInUser.login !== assignee?.login}\n              loggedInUser={loggedInUser}\n              onSelect={props.onAssign}\n            />\n          </OutsideClickHandler>\n        </EscKeydownHandler>\n      )}\n    </DeferredSpinner>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport * as React from 'react';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { assignSecurityHotspot } from '../../../../api/security-hotspots';\nimport addGlobalSuccessMessage from '../../../../app/utils/addGlobalSuccessMessage';\nimport { withCurrentUser } from '../../../../components/hoc/withCurrentUser';\nimport { isLoggedIn } from '../../../../helpers/users';\nimport { Hotspot, HotspotStatus } from '../../../../types/security-hotspots';\nimport AssigneeRenderer from './AssigneeRenderer';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  hotspot: Hotspot;\n\n  onAssigneeChange: () => void;\n}\n\ninterface State {\n  editing: boolean;\n  loading: boolean;\n}\n\nexport class Assignee extends React.PureComponent<Props, State> {\n  mounted = false;\n  state = {\n    editing: false,\n    loading: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleEnterEditionMode = () => {\n    this.setState({ editing: true });\n  };\n\n  handleExitEditionMode = () => {\n    this.setState({ editing: false });\n  };\n\n  handleAssign = (newAssignee?: T.UserActive) => {\n    if (newAssignee && newAssignee.login) {\n      this.setState({ loading: true });\n      assignSecurityHotspot(this.props.hotspot.key, {\n        assignee: newAssignee.login\n      })\n        .then(() => {\n          if (this.mounted) {\n            this.setState({ editing: false, loading: false });\n            this.props.onAssigneeChange();\n          }\n        })\n        .then(() =>\n          addGlobalSuccessMessage(\n            translateWithParameters('hotspots.assign.success', newAssignee.name)\n          )\n        )\n        .catch(() => this.setState({ loading: false }));\n    }\n  };\n\n  render() {\n    const {\n      currentUser,\n      hotspot: { assigneeUser, status }\n    } = this.props;\n    const { editing, loading } = this.state;\n\n    const canEdit = status === HotspotStatus.TO_REVIEW;\n\n    return (\n      <AssigneeRenderer\n        assignee={assigneeUser}\n        canEdit={canEdit}\n        editing={editing}\n        loading={loading}\n        loggedInUser={isLoggedIn(currentUser) ? currentUser : undefined}\n        onAssign={this.handleAssign}\n        onEnterEditionMode={this.handleEnterEditionMode}\n        onExitEditionMode={this.handleExitEditionMode}\n      />\n    );\n  }\n}\n\nexport default withCurrentUser(Assignee);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { BranchParameters } from '../types/branch-like';\nimport {\n  Hotspot,\n  HotspotAssignRequest,\n  HotspotComment,\n  HotspotResolution,\n  HotspotSearchResponse,\n  HotspotSetStatusRequest,\n  HotspotStatus\n} from '../types/security-hotspots';\n\nexport function assignSecurityHotspot(\n  hotspotKey: string,\n  data: HotspotAssignRequest\n): Promise<void> {\n  return post('/api/hotspots/assign', { hotspot: hotspotKey, ...data }).catch(throwGlobalError);\n}\n\nexport function setSecurityHotspotStatus(\n  hotspotKey: string,\n  data: HotspotSetStatusRequest\n): Promise<void> {\n  return post('/api/hotspots/change_status', { hotspot: hotspotKey, ...data }).catch(\n    throwGlobalError\n  );\n}\n\nexport function commentSecurityHotspot(hotspotKey: string, comment: string): Promise<void> {\n  return post('/api/hotspots/add_comment', { hotspot: hotspotKey, comment }).catch(\n    throwGlobalError\n  );\n}\n\nexport function deleteSecurityHotspotComment(commentKey: string): Promise<void> {\n  return post('/api/hotspots/delete_comment', { comment: commentKey }).catch(throwGlobalError);\n}\n\nexport function editSecurityHotspotComment(\n  commentKey: string,\n  comment: string\n): Promise<HotspotComment> {\n  return post('/api/hotspots/edit_comment', { comment: commentKey, text: comment }).catch(\n    throwGlobalError\n  );\n}\n\nexport function getSecurityHotspots(\n  data: {\n    projectKey: string;\n    p: number;\n    ps: number;\n    status?: HotspotStatus;\n    resolution?: HotspotResolution;\n    onlyMine?: boolean;\n    sinceLeakPeriod?: boolean;\n  } & BranchParameters\n): Promise<HotspotSearchResponse> {\n  return getJSON('/api/hotspots/search', data).catch(throwGlobalError);\n}\n\nexport function getSecurityHotspotList(\n  hotspotKeys: string[],\n  data: {\n    projectKey: string;\n  } & BranchParameters\n): Promise<HotspotSearchResponse> {\n  return getJSON('/api/hotspots/search', { ...data, hotspots: hotspotKeys.join() }).catch(\n    throwGlobalError\n  );\n}\n\nexport function getSecurityHotspotDetails(securityHotspotKey: string): Promise<Hotspot> {\n  return getJSON('/api/hotspots/show', { hotspot: securityHotspotKey })\n    .then((response: Hotspot & { users: T.UserBase[] }) => {\n      const { users, ...hotspot } = response;\n\n      if (users) {\n        if (hotspot.assignee) {\n          hotspot.assigneeUser = users.find(u => u.login === hotspot.assignee) || {\n            active: true,\n            login: hotspot.assignee\n          };\n        }\n        hotspot.authorUser = users.find(u => u.login === hotspot.author) || {\n          active: true,\n          login: hotspot.author\n        };\n        hotspot.comment.forEach(c => {\n          c.user = users.find(u => u.login === c.login) || { active: true, login: c.login };\n        });\n      }\n\n      return hotspot;\n    })\n    .catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MarkdownTips from '../../../components/common/MarkdownTips';\n\nexport interface HotspotCommentPopupProps {\n  markdownComment: string;\n  onCommentEditSubmit: (comment: string) => void;\n  onCancelEdit: () => void;\n}\n\nexport default function HotspotCommentPopup(props: HotspotCommentPopupProps) {\n  const [comment, setComment] = React.useState(props.markdownComment);\n\n  return (\n    <div className=\"issue-comment-bubble-popup\">\n      <div className=\"issue-comment-form-text\">\n        <textarea\n          autoFocus={true}\n          onChange={event => setComment(event.target.value)}\n          rows={2}\n          value={comment}\n        />\n      </div>\n      <div className=\"spacer-top display-flex-space-between\">\n        <div className=\"issue-comment-form-tips\">\n          <MarkdownTips />\n        </div>\n        <div className=\"\">\n          <Button\n            className=\"little-spacer-right\"\n            onClick={() => props.onCommentEditSubmit(comment)}>\n            {translate('save')}\n          </Button>\n          <ResetButtonLink\n            onClick={() => {\n              setComment('');\n              props.onCancelEdit();\n            }}>\n            {translate('cancel')}\n          </ResetButtonLink>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport { Button, DeleteButton, EditButton } from 'sonar-ui-common/components/controls/buttons';\nimport Dropdown, { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport DateTimeFormatter from '../../../components/intl/DateTimeFormatter';\nimport IssueChangelogDiff from '../../../components/issue/components/IssueChangelogDiff';\nimport Avatar from '../../../components/ui/Avatar';\nimport { Hotspot, ReviewHistoryType } from '../../../types/security-hotspots';\nimport { getHotspotReviewHistory } from '../utils';\nimport HotspotCommentPopup from './HotspotCommentPopup';\n\nexport interface HotspotReviewHistoryProps {\n  hotspot: Hotspot;\n  onDeleteComment: (key: string) => void;\n  onEditComment: (key: string, comment: string) => void;\n}\n\nexport default function HotspotReviewHistory(props: HotspotReviewHistoryProps) {\n  const { hotspot } = props;\n  const reviewHistory = getHotspotReviewHistory(hotspot);\n  const [editedCommentKey, setEditedCommentKey] = React.useState('');\n\n  return (\n    <>\n      {reviewHistory.map((historyElt, historyIndex) => {\n        const { user, type, diffs, date, html, key, updatable, markdown } = historyElt;\n        return (\n          <div\n            className={classNames('padded', { 'bordered-top': historyIndex > 0 })}\n            key={historyIndex}>\n            <div className=\"display-flex-center\">\n              {user.name && (\n                <>\n                  <Avatar\n                    className=\"little-spacer-right\"\n                    hash={user.avatar}\n                    name={user.name}\n                    size={20}\n                  />\n                  <strong>\n                    {user.active ? user.name : translateWithParameters('user.x_deleted', user.name)}\n                  </strong>\n                  {type === ReviewHistoryType.Creation && (\n                    <span className=\"little-spacer-left\">\n                      {translate('hotspots.review_history.created')}\n                    </span>\n                  )}\n                  {type === ReviewHistoryType.Comment && (\n                    <span className=\"little-spacer-left\">\n                      {translate('hotspots.review_history.comment_added')}\n                    </span>\n                  )}\n                  <span className=\"little-spacer-left little-spacer-right\">-</span>\n                </>\n              )}\n              <DateTimeFormatter date={date} />\n            </div>\n\n            {type === ReviewHistoryType.Diff && diffs && (\n              <div className=\"spacer-top\">\n                {diffs.map((diff, diffIndex) => (\n                  <IssueChangelogDiff diff={diff} key={diffIndex} />\n                ))}\n              </div>\n            )}\n\n            {type === ReviewHistoryType.Comment && key && html && markdown && (\n              <div className=\"spacer-top display-flex-space-between\">\n                <div className=\"markdown\" dangerouslySetInnerHTML={{ __html: sanitize(html) }} />\n                {updatable && (\n                  <div>\n                    <div className=\"dropdown\">\n                      <Toggler\n                        onRequestClose={() => {\n                          setEditedCommentKey('');\n                        }}\n                        open={key === editedCommentKey}\n                        overlay={\n                          <DropdownOverlay placement={PopupPlacement.BottomRight}>\n                            <HotspotCommentPopup\n                              markdownComment={markdown}\n                              onCancelEdit={() => setEditedCommentKey('')}\n                              onCommentEditSubmit={comment => {\n                                setEditedCommentKey('');\n                                props.onEditComment(key, comment);\n                              }}\n                            />\n                          </DropdownOverlay>\n                        }>\n                        <EditButton\n                          className=\"it__hotspots-comment-edit button-small\"\n                          onClick={() => setEditedCommentKey(key)}\n                        />\n                      </Toggler>\n                    </div>\n                    <Dropdown\n                      onOpen={() => setEditedCommentKey('')}\n                      overlay={\n                        <div className=\"padded abs-width-150\">\n                          <p>{translate('issue.comment.delete_confirm_message')}</p>\n                          <Button\n                            className=\"button-red big-spacer-top pull-right\"\n                            onClick={() => props.onDeleteComment(key)}>\n                            {translate('delete')}\n                          </Button>\n                        </div>\n                      }\n                      overlayPlacement={PopupPlacement.BottomRight}>\n                      <DeleteButton className=\"it__hotspots-comment-delete button-small\" />\n                    </Dropdown>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        );\n      })}\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  commentSecurityHotspot,\n  deleteSecurityHotspotComment,\n  editSecurityHotspotComment\n} from '../../../api/security-hotspots';\nimport MarkdownTips from '../../../components/common/MarkdownTips';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport HotspotReviewHistory from './HotspotReviewHistory';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  hotspot: Hotspot;\n  commentTextRef: React.RefObject<HTMLTextAreaElement>;\n  commentVisible: boolean;\n  onCommentUpdate: () => void;\n  onOpenComment: () => void;\n  onCloseComment: () => void;\n}\n\ninterface State {\n  comment: string;\n}\n\nexport default class HotspotReviewHistoryAndComments extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      comment: ''\n    };\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.hotspot !== this.props.hotspot) {\n      this.setState({\n        comment: ''\n      });\n    }\n  }\n\n  handleCommentChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ comment: event.target.value });\n  };\n\n  handleCloseComment = () => {\n    this.setState({ comment: '' });\n    this.props.onCloseComment();\n  };\n\n  handleSubmitComment = () => {\n    return commentSecurityHotspot(this.props.hotspot.key, this.state.comment).then(() => {\n      this.setState({ comment: '' });\n      this.props.onCloseComment();\n      this.props.onCommentUpdate();\n    });\n  };\n\n  handleDeleteComment = (key: string) => {\n    return deleteSecurityHotspotComment(key).then(() => {\n      this.props.onCommentUpdate();\n    });\n  };\n\n  handleEditComment = (key: string, comment: string) => {\n    return editSecurityHotspotComment(key, comment).then(() => {\n      this.props.onCommentUpdate();\n    });\n  };\n\n  render() {\n    const { currentUser, hotspot, commentTextRef, commentVisible } = this.props;\n    const { comment } = this.state;\n    return (\n      <>\n        <h1>{translate('hotspot.section.activity')}</h1>\n        <div className=\"padded\">\n          <HotspotReviewHistory\n            hotspot={hotspot}\n            onDeleteComment={this.handleDeleteComment}\n            onEditComment={this.handleEditComment}\n          />\n\n          {isLoggedIn(currentUser) && (\n            <>\n              <hr />\n              <div className=\"big-spacer-top\">\n                <Button\n                  className={classNames({ invisible: commentVisible })}\n                  id=\"hotspot-comment-box-display\"\n                  onClick={this.props.onOpenComment}>\n                  {translate('hotspots.comment.open')}\n                </Button>\n\n                <div className={classNames({ invisible: !commentVisible })}>\n                  <div className=\"little-spacer-bottom\">{translate('hotspots.comment.field')}</div>\n                  <textarea\n                    className=\"form-field fixed-width width-100 spacer-bottom\"\n                    onChange={this.handleCommentChange}\n                    ref={commentTextRef}\n                    rows={2}\n                    value={comment}\n                  />\n                  <div className=\"display-flex-space-between display-flex-center \">\n                    <MarkdownTips className=\"huge-spacer-bottom\" />\n                    <div>\n                      <Button\n                        className=\"huge-spacer-bottom\"\n                        id=\"hotspot-comment-box-submit\"\n                        onClick={this.handleSubmitComment}>\n                        {translate('hotspots.comment.submit')}\n                      </Button>\n                      <ResetButtonLink\n                        className=\"spacer-left huge-spacer-bottom\"\n                        id=\"hotspot-comment-box-cancel\"\n                        onClick={this.handleCloseComment}>\n                        {translate('cancel')}\n                      </ResetButtonLink>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { SourceViewerContext } from '../../../components/SourceViewer/SourceViewerContext';\nimport SourceViewerHeaderSlim from '../../../components/SourceViewer/SourceViewerHeaderSlim';\nimport { BranchLike } from '../../../types/branch-like';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport SnippetViewer from '../../issues/crossComponentSourceViewer/SnippetViewer';\n\nexport interface HotspotSnippetContainerRendererProps {\n  branchLike?: BranchLike;\n  highlightedSymbols: string[];\n  hotspot: Hotspot;\n  lastLine?: number;\n  loading: boolean;\n  locations: { [line: number]: T.LinearIssueLocation[] };\n  linePopup?: T.LinePopup & { component: string };\n  onExpandBlock: (direction: T.ExpandDirection) => Promise<void>;\n  onLinePopupToggle: (line: T.SourceLine) => void;\n  onSymbolClick: (symbols: string[]) => void;\n  sourceLines: T.SourceLine[];\n  sourceViewerFile: T.SourceViewerFile;\n}\n\nconst noop = () => undefined;\n\nexport default function HotspotSnippetContainerRenderer(\n  props: HotspotSnippetContainerRendererProps\n) {\n  const {\n    branchLike,\n    highlightedSymbols,\n    hotspot,\n    linePopup,\n    loading,\n    locations,\n    sourceLines,\n    sourceViewerFile\n  } = props;\n\n  return (\n    <div className=\"bordered big-spacer-bottom\">\n      <SourceViewerHeaderSlim\n        branchLike={branchLike}\n        expandable={false}\n        linkToProject={false}\n        loading={loading}\n        onExpand={noop}\n        sourceViewerFile={sourceViewerFile}\n      />\n      <DeferredSpinner loading={loading}>\n        {sourceLines.length > 0 && (\n          <SourceViewerContext.Provider /* Used by LineOptionsPopup */\n            value={{ branchLike, file: sourceViewerFile }}>\n            <SnippetViewer\n              branchLike={branchLike}\n              component={sourceViewerFile}\n              displaySCM={false}\n              expandBlock={(_i, direction) => props.onExpandBlock(direction)}\n              handleCloseIssues={noop}\n              handleLinePopupToggle={props.onLinePopupToggle}\n              handleOpenIssues={noop}\n              handleSymbolClick={props.onSymbolClick}\n              highlightedLocationMessage={undefined}\n              highlightedSymbols={highlightedSymbols}\n              index={0}\n              issue={hotspot}\n              issuesByLine={{}}\n              last={false}\n              linePopup={linePopup}\n              loadDuplications={noop}\n              locations={[]}\n              locationsByLine={locations}\n              onIssueChange={noop}\n              onIssuePopupToggle={noop}\n              onLocationSelect={noop}\n              openIssuesByLine={{}}\n              renderDuplicationPopup={noop}\n              snippet={sourceLines}\n            />\n          </SourceViewerContext.Provider>\n        )}\n      </DeferredSpinner>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getSources } from '../../../api/components';\nimport { locationsByLine } from '../../../components/SourceViewer/helpers/indexing';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { BranchLike } from '../../../types/branch-like';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport { constructSourceViewerFile } from '../utils';\nimport HotspotSnippetContainerRenderer from './HotspotSnippetContainerRenderer';\n\ninterface Props {\n  branchLike?: BranchLike;\n  hotspot: Hotspot;\n}\n\ninterface State {\n  highlightedSymbols: string[];\n  lastLine?: number;\n  loading: boolean;\n  linePopup?: T.LinePopup & { component: string };\n  sourceLines: T.SourceLine[];\n}\n\nconst BUFFER_LINES = 5;\nconst EXPAND_BY_LINES = 50;\n\nexport default class HotspotSnippetContainer extends React.Component<Props, State> {\n  mounted = false;\n  state: State = {\n    highlightedSymbols: [],\n    loading: true,\n    sourceLines: []\n  };\n\n  componentWillMount() {\n    this.mounted = true;\n    this.fetchSources();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.hotspot.key !== this.props.hotspot.key) {\n      this.fetchSources();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  checkLastLine(lines: T.SourceLine[], target: number): number | undefined {\n    if (lines.length < 1) {\n      return undefined;\n    }\n    const lastLineReceived = lines[lines.length - 1].line;\n    if (lastLineReceived < target) {\n      return lastLineReceived;\n    }\n    return undefined;\n  }\n\n  fetchSources() {\n    const {\n      branchLike,\n      hotspot: { component, textRange }\n    } = this.props;\n\n    const from = Math.max(1, textRange.startLine - BUFFER_LINES);\n    // Add 1 to check for end-of-file:\n    const to = textRange.endLine + BUFFER_LINES + 1;\n\n    this.setState({ loading: true });\n    return getSources({ key: component.key, from, to, ...getBranchLikeQuery(branchLike) })\n      .then(sourceLines => {\n        if (this.mounted) {\n          const lastLine = this.checkLastLine(sourceLines, to);\n\n          // remove extra sourceline if we didn't reach the end:\n          sourceLines = lastLine ? sourceLines : sourceLines.slice(0, -1);\n          this.setState({ lastLine, loading: false, sourceLines });\n        }\n      })\n      .catch(() => this.mounted && this.setState({ loading: false }));\n  }\n\n  handleExpansion = (direction: T.ExpandDirection) => {\n    const { branchLike, hotspot } = this.props;\n    const { sourceLines } = this.state;\n\n    const range =\n      direction === 'up'\n        ? {\n            from: Math.max(1, sourceLines[0].line - EXPAND_BY_LINES),\n            to: sourceLines[0].line - 1\n          }\n        : {\n            from: sourceLines[sourceLines.length - 1].line + 1,\n            // Add 1 to check for end-of-file:\n            to: sourceLines[sourceLines.length - 1].line + EXPAND_BY_LINES + 1\n          };\n\n    return getSources({\n      key: hotspot.component.key,\n      ...range,\n      ...getBranchLikeQuery(branchLike)\n    }).then(additionalLines => {\n      const lastLine =\n        direction === 'down' ? this.checkLastLine(additionalLines, range.to) : undefined;\n\n      let concatSourceLines;\n      if (direction === 'up') {\n        concatSourceLines = additionalLines.concat(sourceLines);\n      } else {\n        // remove extra sourceline if we didn't reach the end:\n        concatSourceLines = sourceLines.concat(\n          lastLine ? additionalLines : additionalLines.slice(0, -1)\n        );\n      }\n\n      this.setState({\n        lastLine,\n        sourceLines: concatSourceLines\n      });\n    });\n  };\n\n  handleLinePopupToggle = (params: T.LinePopup & { component: string }) => {\n    const { component, index, line, name, open } = params;\n    this.setState((state: State) => {\n      const samePopup =\n        state.linePopup !== undefined &&\n        state.linePopup.line === line &&\n        state.linePopup.name === name &&\n        state.linePopup.component === component &&\n        state.linePopup.index === index;\n      if (open !== false && !samePopup) {\n        return { linePopup: params };\n      } else if (open !== true && samePopup) {\n        return { linePopup: undefined };\n      }\n      return null;\n    });\n  };\n\n  handleSymbolClick = (highlightedSymbols: string[]) => {\n    this.setState({ highlightedSymbols });\n  };\n\n  render() {\n    const { branchLike, hotspot } = this.props;\n    const { highlightedSymbols, lastLine, linePopup, loading, sourceLines } = this.state;\n\n    const locations = locationsByLine([hotspot]);\n\n    const sourceViewerFile = constructSourceViewerFile(hotspot, lastLine);\n\n    return (\n      <HotspotSnippetContainerRenderer\n        branchLike={branchLike}\n        highlightedSymbols={highlightedSymbols}\n        hotspot={hotspot}\n        lastLine={lastLine}\n        linePopup={linePopup}\n        loading={loading}\n        locations={locations}\n        onExpandBlock={this.handleExpansion}\n        onLinePopupToggle={this.handleLinePopupToggle}\n        onSymbolClick={this.handleSymbolClick}\n        sourceLines={sourceLines}\n        sourceViewerFile={sourceViewerFile}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport BoxedTabs from 'sonar-ui-common/components/controls/BoxedTabs';\nimport Tab from 'sonar-ui-common/components/controls/Tabs';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Hotspot } from '../../../types/security-hotspots';\n\ninterface Props {\n  hotspot: Hotspot;\n}\n\ninterface State {\n  currentTab: Tab;\n  tabs: Tab[];\n}\n\ninterface Tab {\n  key: TabKeys;\n  label: React.ReactNode;\n  content: string;\n}\n\nexport enum TabKeys {\n  RiskDescription = 'risk',\n  VulnerabilityDescription = 'vulnerability',\n  FixRecommendation = 'fix'\n}\n\nexport default class HotspotViewerTabs extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    const tabs = this.computeTabs();\n    this.state = {\n      currentTab: tabs[0],\n      tabs\n    };\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (this.props.hotspot.key !== prevProps.hotspot.key) {\n      const tabs = this.computeTabs();\n      this.setState({\n        currentTab: tabs[0],\n        tabs\n      });\n    }\n  }\n\n  handleSelectTabs = (tabKey: TabKeys) => {\n    const { tabs } = this.state;\n    const currentTab = tabs.find(tab => tab.key === tabKey)!;\n    this.setState({ currentTab });\n  };\n\n  computeTabs() {\n    const { hotspot } = this.props;\n    return [\n      {\n        key: TabKeys.RiskDescription,\n        label: translate('hotspots.tabs.risk_description'),\n        content: hotspot.rule.riskDescription || ''\n      },\n      {\n        key: TabKeys.VulnerabilityDescription,\n        label: translate('hotspots.tabs.vulnerability_description'),\n        content: hotspot.rule.vulnerabilityDescription || ''\n      },\n      {\n        key: TabKeys.FixRecommendation,\n        label: translate('hotspots.tabs.fix_recommendations'),\n        content: hotspot.rule.fixRecommendations || ''\n      }\n    ].filter(tab => Boolean(tab.content));\n  }\n\n  render() {\n    const { tabs, currentTab } = this.state;\n    if (tabs.length === 0) {\n      return null;\n    }\n\n    return (\n      <>\n        <BoxedTabs onSelect={this.handleSelectTabs} selected={currentTab.key} tabs={tabs} />\n        <div className=\"bordered huge-spacer-bottom\">\n          <div\n            className=\"markdown big-padded\"\n            dangerouslySetInnerHTML={{ __html: sanitize(currentTab.content) }}\n          />\n        </div>\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { HotspotStatusOption } from '../../../../types/security-hotspots';\n\nexport interface StatusDescriptionProps {\n  statusOption: HotspotStatusOption;\n  showTitle?: boolean;\n}\n\nexport default function StatusDescription(props: StatusDescriptionProps) {\n  const { statusOption, showTitle } = props;\n\n  return (\n    <div>\n      <h3>\n        {showTitle && `${translate('status')}: `}\n        {translate('hotspots.status_option', statusOption)}\n      </h3>\n      <span>{translate('hotspots.status_option', statusOption, 'description')}</span>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport * as React from 'react';\nimport { SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Radio from 'sonar-ui-common/components/controls/Radio';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MarkdownTips from '../../../../components/common/MarkdownTips';\nimport { HotspotStatusOption } from '../../../../types/security-hotspots';\nimport StatusDescription from './StatusDescription';\n\nexport interface StatusSelectionRendererProps {\n  selectedStatus: HotspotStatusOption;\n  onStatusChange: (statusOption: HotspotStatusOption) => void;\n\n  comment?: string;\n  onCommentChange: (comment: string) => void;\n\n  onSubmit: () => void;\n\n  loading: boolean;\n  submitDisabled: boolean;\n}\n\nexport default function StatusSelectionRenderer(props: StatusSelectionRendererProps) {\n  const { comment, loading, selectedStatus, submitDisabled } = props;\n\n  const renderOption = (status: HotspotStatusOption) => {\n    return (\n      <Radio\n        checked={selectedStatus === status}\n        className=\"big-spacer-bottom\"\n        onCheck={props.onStatusChange}\n        value={status}>\n        <StatusDescription statusOption={status} />\n      </Radio>\n    );\n  };\n\n  return (\n    <>\n      <div className=\"big-padded\">\n        {renderOption(HotspotStatusOption.TO_REVIEW)}\n        {renderOption(HotspotStatusOption.FIXED)}\n        {renderOption(HotspotStatusOption.SAFE)}\n      </div>\n\n      <hr />\n      <div className=\"big-padded display-flex-column\">\n        <label className=\"text-bold\" htmlFor=\"comment-textarea\">\n          {translate('hotspots.status.add_comment')}\n        </label>\n        <textarea\n          className=\"spacer-top form-field fixed-width spacer-bottom\"\n          id=\"comment-textarea\"\n          onChange={(event: React.ChangeEvent<HTMLTextAreaElement>) =>\n            props.onCommentChange(event.currentTarget.value)\n          }\n          rows={4}\n          value={comment}\n        />\n        <MarkdownTips />\n\n        <div className=\"big-spacer-top display-flex-justify-end display-flex-center\">\n          <SubmitButton disabled={submitDisabled || loading} onClick={props.onSubmit}>\n            {translate('hotspots.status.change_status')}\n          </SubmitButton>\n\n          {loading && <i className=\"spacer-left spinner\" />}\n        </div>\n      </div>\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { setSecurityHotspotStatus } from '../../../../api/security-hotspots';\nimport addGlobalSuccessMessage from '../../../../app/utils/addGlobalSuccessMessage';\nimport { Hotspot, HotspotStatusOption } from '../../../../types/security-hotspots';\nimport {\n  getStatusAndResolutionFromStatusOption,\n  getStatusOptionFromStatusAndResolution\n} from '../../utils';\nimport StatusSelectionRenderer from './StatusSelectionRenderer';\n\ninterface Props {\n  hotspot: Hotspot;\n  onStatusOptionChange: (statusOption: HotspotStatusOption) => void;\n}\n\ninterface State {\n  comment?: string;\n  loading: boolean;\n  initialStatus: HotspotStatusOption;\n  selectedStatus: HotspotStatusOption;\n}\n\nexport default class StatusSelection extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    const initialStatus = getStatusOptionFromStatusAndResolution(\n      props.hotspot.status,\n      props.hotspot.resolution\n    );\n\n    this.state = {\n      loading: false,\n      initialStatus,\n      selectedStatus: initialStatus\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleStatusChange = (selectedStatus: HotspotStatusOption) => {\n    this.setState({ selectedStatus });\n  };\n\n  handleCommentChange = (comment: string) => {\n    this.setState({ comment });\n  };\n\n  handleSubmit = () => {\n    const { hotspot } = this.props;\n    const { comment, initialStatus, selectedStatus } = this.state;\n\n    if (selectedStatus && selectedStatus !== initialStatus) {\n      this.setState({ loading: true });\n      setSecurityHotspotStatus(hotspot.key, {\n        ...getStatusAndResolutionFromStatusOption(selectedStatus),\n        comment: comment || undefined\n      })\n        .then(() => {\n          this.setState({ loading: false });\n          this.props.onStatusOptionChange(selectedStatus);\n        })\n        .then(() =>\n          addGlobalSuccessMessage(\n            translateWithParameters(\n              'hotspots.update.success',\n              translate('hotspots.status_option', selectedStatus)\n            )\n          )\n        )\n        .catch(() => this.setState({ loading: false }));\n    }\n  };\n\n  render() {\n    const { comment, initialStatus, loading, selectedStatus } = this.state;\n    const submitDisabled = selectedStatus === initialStatus;\n\n    return (\n      <StatusSelectionRenderer\n        comment={comment}\n        loading={loading}\n        onCommentChange={this.handleCommentChange}\n        onStatusChange={this.handleStatusChange}\n        onSubmit={this.handleSubmit}\n        selectedStatus={selectedStatus}\n        submitDisabled={submitDisabled}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport ChevronDownIcon from 'sonar-ui-common/components/icons/ChevronDownIcon';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { withCurrentUser } from '../../../../components/hoc/withCurrentUser';\nimport { isLoggedIn } from '../../../../helpers/users';\nimport { Hotspot } from '../../../../types/security-hotspots';\nimport { getStatusOptionFromStatusAndResolution } from '../../utils';\nimport './Status.css';\nimport StatusDescription from './StatusDescription';\nimport StatusSelection from './StatusSelection';\n\nexport interface StatusProps {\n  currentUser: T.CurrentUser;\n  hotspot: Hotspot;\n\n  onStatusChange: () => void;\n}\n\nexport function Status(props: StatusProps) {\n  const { currentUser, hotspot } = props;\n  const [isOpen, setIsOpen] = React.useState(false);\n\n  const statusOption = getStatusOptionFromStatusAndResolution(hotspot.status, hotspot.resolution);\n  const readonly = !hotspot.canChangeStatus || !isLoggedIn(currentUser);\n\n  const trigger = (\n    <div\n      aria-expanded={isOpen}\n      aria-haspopup={true}\n      className={classNames('padded bordered display-flex-column display-flex-justify-center', {\n        readonly\n      })}\n      id=\"status-trigger\"\n      onClick={() => !readonly && setIsOpen(true)}\n      role=\"button\"\n      tabIndex={0}>\n      <div className=\"display-flex-center display-flex-space-between\">\n        {isOpen ? (\n          <span className=\"h3\">{translate('hotspots.status.select_status')}</span>\n        ) : (\n          <StatusDescription showTitle={true} statusOption={statusOption} />\n        )}\n        {!readonly && <ChevronDownIcon className=\"big-spacer-left\" />}\n      </div>\n    </div>\n  );\n\n  const actionableTrigger = (\n    <Toggler\n      closeOnClickOutside={true}\n      closeOnEscape={true}\n      onRequestClose={() => setIsOpen(false)}\n      open={isOpen}\n      overlay={\n        <DropdownOverlay noPadding={true} placement={PopupPlacement.Bottom}>\n          <StatusSelection\n            hotspot={hotspot}\n            onStatusOptionChange={() => {\n              setIsOpen(false);\n              props.onStatusChange();\n            }}\n          />\n        </DropdownOverlay>\n      }>\n      {trigger}\n    </Toggler>\n  );\n\n  return (\n    <div className=\"dropdown\">\n      {readonly ? (\n        <Tooltip overlay={translate('hotspots.status.cannot_change_status')} placement=\"bottom\">\n          {actionableTrigger}\n        </Tooltip>\n      ) : (\n        actionableTrigger\n      )}\n    </div>\n  );\n}\n\nexport default withCurrentUser(Status);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { ClipboardButton } from 'sonar-ui-common/components/controls/clipboard';\nimport LinkIcon from 'sonar-ui-common/components/icons/LinkIcon';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getPathUrlAsString } from 'sonar-ui-common/helpers/urls';\nimport { withCurrentUser } from '../../../components/hoc/withCurrentUser';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { getComponentSecurityHotspotsUrl } from '../../../helpers/urls';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { BranchLike } from '../../../types/branch-like';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport Assignee from './assignee/Assignee';\nimport HotspotReviewHistoryAndComments from './HotspotReviewHistoryAndComments';\nimport HotspotSnippetContainer from './HotspotSnippetContainer';\nimport './HotspotViewer.css';\nimport HotspotViewerTabs from './HotspotViewerTabs';\nimport Status from './status/Status';\n\nexport interface HotspotViewerRendererProps {\n  branchLike?: BranchLike;\n  component: T.Component;\n  currentUser: T.CurrentUser;\n  hotspot?: Hotspot;\n  loading: boolean;\n  commentVisible: boolean;\n  commentTextRef: React.RefObject<HTMLTextAreaElement>;\n  onOpenComment: () => void;\n  onCloseComment: () => void;\n  onUpdateHotspot: () => Promise<void>;\n  parentScrollRef: React.RefObject<HTMLDivElement>;\n  securityCategories: T.StandardSecurityCategories;\n}\n\nexport function HotspotViewerRenderer(props: HotspotViewerRendererProps) {\n  const {\n    branchLike,\n    component,\n    currentUser,\n    hotspot,\n    loading,\n    securityCategories,\n    commentTextRef,\n    commentVisible,\n    parentScrollRef\n  } = props;\n\n  const permalink = getPathUrlAsString(\n    getComponentSecurityHotspotsUrl(component.key, {\n      ...getBranchLikeQuery(branchLike),\n      hotspots: hotspot?.key\n    }),\n    false\n  );\n\n  return (\n    <DeferredSpinner loading={loading}>\n      {hotspot && (\n        <div className=\"big-padded hotspot-content\" ref={parentScrollRef}>\n          <div className=\"huge-spacer-bottom display-flex-space-between\">\n            <strong className=\"big big-spacer-right\">{hotspot.message}</strong>\n            <div className=\"display-flex-row flex-0\">\n              {isLoggedIn(currentUser) && (\n                <div className=\"dropdown spacer-right flex-1-0-auto\">\n                  <Button onClick={props.onOpenComment}>\n                    {translate('hotspots.comment.open')}\n                  </Button>\n                </div>\n              )}\n              <ClipboardButton className=\"flex-1-0-auto\" copyValue={permalink}>\n                <LinkIcon className=\"spacer-right\" />\n                <span>{translate('hotspots.get_permalink')}</span>\n              </ClipboardButton>\n            </div>\n          </div>\n\n          <div className=\"huge-spacer-bottom display-flex-row\">\n            <div className=\"hotspot-information display-flex-column display-flex-space-between\">\n              <div className=\"display-flex-center\">\n                <span className=\"big-spacer-right\">{translate('category')}</span>\n                <strong className=\"nowrap\">\n                  {securityCategories[hotspot.rule.securityCategory].title}\n                </strong>\n              </div>\n              <div className=\"display-flex-center\">\n                <span className=\"big-spacer-right\">{translate('hotspots.risk_exposure')}</span>\n                <div\n                  className={classNames(\n                    'hotspot-risk-badge',\n                    hotspot.rule.vulnerabilityProbability\n                  )}>\n                  {translate('risk_exposure', hotspot.rule.vulnerabilityProbability)}\n                </div>\n              </div>\n              <div className=\"display-flex-center\">\n                <span className=\"big-spacer-right\">{translate('assignee')}</span>\n                <div>\n                  <Assignee hotspot={hotspot} onAssigneeChange={props.onUpdateHotspot} />\n                </div>\n              </div>\n            </div>\n            <div className=\"huge-spacer-left\">\n              <Status hotspot={hotspot} onStatusChange={props.onUpdateHotspot} />\n            </div>\n          </div>\n\n          <HotspotSnippetContainer branchLike={branchLike} hotspot={hotspot} />\n          <HotspotViewerTabs hotspot={hotspot} />\n          <HotspotReviewHistoryAndComments\n            commentTextRef={commentTextRef}\n            commentVisible={commentVisible}\n            currentUser={currentUser}\n            hotspot={hotspot}\n            onCloseComment={props.onCloseComment}\n            onCommentUpdate={props.onUpdateHotspot}\n            onOpenComment={props.onOpenComment}\n          />\n        </div>\n      )}\n    </DeferredSpinner>\n  );\n}\n\nexport default withCurrentUser(HotspotViewerRenderer);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport * as React from 'react';\nimport { scrollToElement } from 'sonar-ui-common/helpers/scrolling';\nimport { getSecurityHotspotDetails } from '../../../api/security-hotspots';\nimport { BranchLike } from '../../../types/branch-like';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport HotspotViewerRenderer from './HotspotViewerRenderer';\n\ninterface Props {\n  branchLike?: BranchLike;\n  component: T.Component;\n  hotspotKey: string;\n  onUpdateHotspot: (hotspotKey: string) => Promise<void>;\n  securityCategories: T.StandardSecurityCategories;\n}\n\ninterface State {\n  hotspot?: Hotspot;\n  loading: boolean;\n  commentVisible: boolean;\n}\n\nexport default class HotspotViewer extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State;\n  commentTextRef: React.RefObject<HTMLTextAreaElement>;\n  parentScrollRef: React.RefObject<HTMLDivElement>;\n\n  constructor(props: Props) {\n    super(props);\n    this.commentTextRef = React.createRef<HTMLTextAreaElement>();\n    this.parentScrollRef = React.createRef<HTMLDivElement>();\n    this.state = { loading: false, commentVisible: false };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchHotspot();\n  }\n\n  componentDidUpdate(prevProps: Props, prevState: State) {\n    if (prevProps.hotspotKey !== this.props.hotspotKey) {\n      this.fetchHotspot();\n    }\n    if (this.commentTextRef.current && !prevState.commentVisible && this.state.commentVisible) {\n      this.commentTextRef.current.focus({ preventScroll: true });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchHotspot = () => {\n    this.setState({ loading: true });\n    return getSecurityHotspotDetails(this.props.hotspotKey)\n      .then(hotspot => {\n        if (this.mounted) {\n          this.setState({ hotspot, loading: false });\n        }\n        return hotspot;\n      })\n      .catch(() => this.mounted && this.setState({ loading: false }));\n  };\n\n  handleHotspotUpdate = () => {\n    return this.fetchHotspot().then((hotspot?: Hotspot) => {\n      if (hotspot) {\n        return this.props.onUpdateHotspot(hotspot.key);\n      }\n    });\n  };\n\n  handleOpenComment = () => {\n    this.setState({ commentVisible: true });\n    if (this.commentTextRef.current) {\n      // Edge case when the comment is already open and unfocus.\n      this.commentTextRef.current.focus({ preventScroll: true });\n    }\n    if (this.commentTextRef.current && this.parentScrollRef.current) {\n      scrollToElement(this.commentTextRef.current, {\n        parent: this.parentScrollRef.current,\n        bottomOffset: 100\n      });\n    }\n  };\n\n  handleCloseComment = () => {\n    this.setState({ commentVisible: false });\n  };\n\n  render() {\n    const { branchLike, component, securityCategories } = this.props;\n    const { hotspot, loading, commentVisible } = this.state;\n\n    return (\n      <HotspotViewerRenderer\n        branchLike={branchLike}\n        component={component}\n        commentTextRef={this.commentTextRef}\n        commentVisible={commentVisible}\n        hotspot={hotspot}\n        loading={loading}\n        onCloseComment={this.handleCloseComment}\n        onOpenComment={this.handleOpenComment}\n        onUpdateHotspot={this.handleHotspotUpdate}\n        parentScrollRef={this.parentScrollRef}\n        securityCategories={securityCategories}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport A11ySkipTarget from '../../app/components/a11y/A11ySkipTarget';\nimport Suggestions from '../../app/components/embed-docs-modal/Suggestions';\nimport ScreenPositionHelper from '../../components/common/ScreenPositionHelper';\nimport { isBranch } from '../../helpers/branch-like';\nimport { BranchLike } from '../../types/branch-like';\nimport { HotspotFilters, HotspotStatusFilter, RawHotspot } from '../../types/security-hotspots';\nimport EmptyHotspotsPage from './components/EmptyHotspotsPage';\nimport FilterBar from './components/FilterBar';\nimport HotspotList from './components/HotspotList';\nimport HotspotViewer from './components/HotspotViewer';\nimport './styles.css';\n\nexport interface SecurityHotspotsAppRendererProps {\n  branchLike?: BranchLike;\n  component: T.Component;\n  filters: HotspotFilters;\n  hotspots: RawHotspot[];\n  hotspotsReviewedMeasure?: string;\n  hotspotsTotal?: number;\n  isStaticListOfHotspots: boolean;\n  loading: boolean;\n  loadingMeasure: boolean;\n  loadingMore: boolean;\n  onChangeFilters: (filters: Partial<HotspotFilters>) => void;\n  onHotspotClick: (hotspot: RawHotspot) => void;\n  onLoadMore: () => void;\n  onShowAllHotspots: () => void;\n  onUpdateHotspot: (hotspotKey: string) => Promise<void>;\n  selectedHotspot: RawHotspot | undefined;\n  securityCategories: T.StandardSecurityCategories;\n}\n\nexport default function SecurityHotspotsAppRenderer(props: SecurityHotspotsAppRendererProps) {\n  const {\n    branchLike,\n    component,\n    hotspots,\n    hotspotsReviewedMeasure,\n    hotspotsTotal,\n    isStaticListOfHotspots,\n    loading,\n    loadingMeasure,\n    loadingMore,\n    securityCategories,\n    selectedHotspot,\n    filters\n  } = props;\n\n  return (\n    <div id=\"security_hotspots\">\n      <FilterBar\n        component={component}\n        filters={filters}\n        hotspotsReviewedMeasure={hotspotsReviewedMeasure}\n        isStaticListOfHotspots={isStaticListOfHotspots}\n        loadingMeasure={loadingMeasure}\n        onBranch={isBranch(branchLike)}\n        onChangeFilters={props.onChangeFilters}\n        onShowAllHotspots={props.onShowAllHotspots}\n      />\n      <ScreenPositionHelper>\n        {({ top }) => (\n          <div className=\"wrapper\" style={{ top }}>\n            <Suggestions suggestions=\"security_hotspots\" />\n            <Helmet title={translate('hotspots.page')} />\n\n            <A11ySkipTarget anchor=\"security_hotspots_main\" />\n\n            {loading ? (\n              <DeferredSpinner className=\"huge-spacer-left big-spacer-top\" />\n            ) : (\n              <>\n                {hotspots.length === 0 || !selectedHotspot ? (\n                  <EmptyHotspotsPage\n                    filtered={\n                      filters.assignedToMe ||\n                      (isBranch(branchLike) && filters.sinceLeakPeriod) ||\n                      filters.status !== HotspotStatusFilter.TO_REVIEW\n                    }\n                    isStaticListOfHotspots={isStaticListOfHotspots}\n                  />\n                ) : (\n                  <div className=\"layout-page\">\n                    <div className=\"sidebar\">\n                      <HotspotList\n                        hotspots={hotspots}\n                        hotspotsTotal={hotspotsTotal}\n                        isStaticListOfHotspots={isStaticListOfHotspots}\n                        loadingMore={loadingMore}\n                        onHotspotClick={props.onHotspotClick}\n                        onLoadMore={props.onLoadMore}\n                        securityCategories={securityCategories}\n                        selectedHotspot={selectedHotspot}\n                        statusFilter={filters.status}\n                      />\n                    </div>\n                    <div className=\"main\">\n                      <HotspotViewer\n                        branchLike={branchLike}\n                        component={component}\n                        hotspotKey={selectedHotspot.key}\n                        onUpdateHotspot={props.onUpdateHotspot}\n                        securityCategories={securityCategories}\n                      />\n                    </div>\n                  </div>\n                )}\n              </>\n            )}\n          </div>\n        )}\n      </ScreenPositionHelper>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { Location } from 'history';\nimport { flatMap, range } from 'lodash';\nimport * as React from 'react';\nimport { addNoFooterPageClass, removeNoFooterPageClass } from 'sonar-ui-common/helpers/pages';\nimport { getMeasures } from '../../api/measures';\nimport { getSecurityHotspotList, getSecurityHotspots } from '../../api/security-hotspots';\nimport { withCurrentUser } from '../../components/hoc/withCurrentUser';\nimport { Router } from '../../components/hoc/withRouter';\nimport { getLeakValue } from '../../components/measure/utils';\nimport { getBranchLikeQuery, isPullRequest, isSameBranchLike } from '../../helpers/branch-like';\nimport { getStandards } from '../../helpers/security-standard';\nimport { isLoggedIn } from '../../helpers/users';\nimport { BranchLike } from '../../types/branch-like';\nimport {\n  HotspotFilters,\n  HotspotResolution,\n  HotspotStatus,\n  HotspotStatusFilter,\n  RawHotspot\n} from '../../types/security-hotspots';\nimport SecurityHotspotsAppRenderer from './SecurityHotspotsAppRenderer';\nimport './styles.css';\n\nconst PAGE_SIZE = 500;\n\ninterface Props {\n  branchLike?: BranchLike;\n  currentUser: T.CurrentUser;\n  component: T.Component;\n  location: Location;\n  router: Router;\n}\n\ninterface State {\n  hotspotKeys?: string[];\n  hotspots: RawHotspot[];\n  hotspotsPageIndex: number;\n  hotspotsReviewedMeasure?: string;\n  hotspotsTotal?: number;\n  loading: boolean;\n  loadingMeasure: boolean;\n  loadingMore: boolean;\n  securityCategories: T.StandardSecurityCategories;\n  selectedHotspot: RawHotspot | undefined;\n  filters: HotspotFilters;\n}\n\nexport class SecurityHotspotsApp extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      loading: true,\n      loadingMeasure: false,\n      loadingMore: false,\n      hotspots: [],\n      hotspotsPageIndex: 1,\n      securityCategories: {},\n      selectedHotspot: undefined,\n      filters: {\n        ...this.constructFiltersFromProps(props),\n        status: HotspotStatusFilter.TO_REVIEW\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    addNoFooterPageClass();\n    this.fetchInitialData();\n  }\n\n  componentDidUpdate(previous: Props) {\n    if (\n      this.props.component.key !== previous.component.key ||\n      this.props.location.query.hotspots !== previous.location.query.hotspots\n    ) {\n      this.fetchInitialData();\n    }\n\n    if (\n      !isSameBranchLike(this.props.branchLike, previous.branchLike) ||\n      isLoggedIn(this.props.currentUser) !== isLoggedIn(previous.currentUser) ||\n      this.props.location.query.assignedToMe !== previous.location.query.assignedToMe ||\n      this.props.location.query.sinceLeakPeriod !== previous.location.query.sinceLeakPeriod\n    ) {\n      this.setState(({ filters }) => ({\n        filters: { ...this.constructFiltersFromProps, ...filters }\n      }));\n    }\n  }\n\n  componentWillUnmount() {\n    removeNoFooterPageClass();\n    this.mounted = false;\n  }\n\n  constructFiltersFromProps(\n    props: Props\n  ): Pick<HotspotFilters, 'assignedToMe' | 'sinceLeakPeriod'> {\n    return {\n      assignedToMe: props.location.query.assignedToMe === 'true' && isLoggedIn(props.currentUser),\n      sinceLeakPeriod:\n        isPullRequest(props.branchLike) || props.location.query.sinceLeakPeriod === 'true'\n    };\n  }\n\n  handleCallFailure = () => {\n    if (this.mounted) {\n      this.setState({ loading: false, loadingMore: false });\n    }\n  };\n\n  fetchInitialData() {\n    return Promise.all([\n      getStandards(),\n      this.fetchSecurityHotspots(),\n      this.fetchSecurityHotspotsReviewed()\n    ])\n      .then(([{ sonarsourceSecurity }, { hotspots, paging }]) => {\n        if (!this.mounted) {\n          return;\n        }\n\n        this.setState({\n          hotspots,\n          hotspotsTotal: paging.total,\n          loading: false,\n          securityCategories: sonarsourceSecurity,\n          selectedHotspot: hotspots.length > 0 ? hotspots[0] : undefined\n        });\n      })\n      .catch(this.handleCallFailure);\n  }\n\n  fetchSecurityHotspotsReviewed = () => {\n    const { branchLike, component } = this.props;\n    const { filters } = this.state;\n\n    const reviewedHotspotsMetricKey = filters.sinceLeakPeriod\n      ? 'new_security_hotspots_reviewed'\n      : 'security_hotspots_reviewed';\n\n    this.setState({ loadingMeasure: true });\n    return getMeasures({\n      component: component.key,\n      metricKeys: reviewedHotspotsMetricKey,\n      ...getBranchLikeQuery(branchLike)\n    })\n      .then(measures => {\n        if (!this.mounted) {\n          return;\n        }\n        const measure = measures && measures.length > 0 ? measures[0] : undefined;\n        const hotspotsReviewedMeasure = filters.sinceLeakPeriod\n          ? getLeakValue(measure)\n          : measure?.value;\n\n        this.setState({ hotspotsReviewedMeasure, loadingMeasure: false });\n      })\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ loadingMeasure: false });\n        }\n      });\n  };\n\n  fetchSecurityHotspots(page = 1) {\n    const { branchLike, component, location } = this.props;\n    const { filters } = this.state;\n\n    const hotspotKeys = location.query.hotspots\n      ? (location.query.hotspots as string).split(',')\n      : undefined;\n\n    this.setState({ hotspotKeys });\n\n    if (hotspotKeys && hotspotKeys.length > 0) {\n      return getSecurityHotspotList(hotspotKeys, {\n        projectKey: component.key,\n        ...getBranchLikeQuery(branchLike)\n      });\n    }\n\n    const status =\n      filters.status === HotspotStatusFilter.TO_REVIEW\n        ? HotspotStatus.TO_REVIEW\n        : HotspotStatus.REVIEWED;\n\n    const resolution =\n      filters.status === HotspotStatusFilter.TO_REVIEW\n        ? undefined\n        : HotspotResolution[filters.status];\n\n    return getSecurityHotspots({\n      projectKey: component.key,\n      p: page,\n      ps: PAGE_SIZE,\n      status,\n      resolution,\n      onlyMine: filters.assignedToMe,\n      sinceLeakPeriod: filters.sinceLeakPeriod,\n      ...getBranchLikeQuery(branchLike)\n    });\n  }\n\n  reloadSecurityHotspotList = () => {\n    this.setState({ loading: true });\n\n    return this.fetchSecurityHotspots()\n      .then(({ hotspots, paging }) => {\n        if (!this.mounted) {\n          return;\n        }\n\n        this.setState({\n          hotspots,\n          hotspotsPageIndex: 1,\n          hotspotsTotal: paging.total,\n          loading: false,\n          selectedHotspot: hotspots.length > 0 ? hotspots[0] : undefined\n        });\n      })\n      .catch(this.handleCallFailure);\n  };\n\n  handleChangeFilters = (changes: Partial<HotspotFilters>) => {\n    this.setState(\n      ({ filters }) => ({ filters: { ...filters, ...changes } }),\n      () => {\n        this.reloadSecurityHotspotList();\n        if (changes.sinceLeakPeriod !== undefined) {\n          this.fetchSecurityHotspotsReviewed();\n        }\n      }\n    );\n  };\n\n  handleHotspotClick = (selectedHotspot: RawHotspot) => this.setState({ selectedHotspot });\n\n  handleHotspotUpdate = (hotspotKey: string) => {\n    const { hotspots, hotspotsPageIndex } = this.state;\n    const index = hotspots.findIndex(h => h.key === hotspotKey);\n\n    return Promise.all(\n      range(hotspotsPageIndex).map(p => this.fetchSecurityHotspots(p + 1 /* pages are 1-indexed */))\n    )\n      .then(hotspotPages => {\n        const allHotspots = flatMap(hotspotPages, 'hotspots');\n\n        const { paging } = hotspotPages[hotspotPages.length - 1];\n\n        const nextHotspot = allHotspots[Math.min(index, allHotspots.length - 1)];\n\n        this.setState({\n          hotspots: allHotspots,\n          hotspotsPageIndex: paging.pageIndex,\n          hotspotsTotal: paging.total,\n          selectedHotspot: nextHotspot\n        });\n      })\n      .then(this.fetchSecurityHotspotsReviewed);\n  };\n\n  handleShowAllHotspots = () => {\n    this.props.router.push({\n      ...this.props.location,\n      query: { ...this.props.location.query, hotspots: undefined }\n    });\n  };\n\n  handleLoadMore = () => {\n    const { hotspots, hotspotsPageIndex: hotspotPages } = this.state;\n\n    this.setState({ loadingMore: true });\n\n    return this.fetchSecurityHotspots(hotspotPages + 1)\n      .then(({ hotspots: additionalHotspots }) => {\n        if (!this.mounted) {\n          return;\n        }\n\n        this.setState({\n          hotspots: [...hotspots, ...additionalHotspots],\n          hotspotsPageIndex: hotspotPages + 1,\n          loadingMore: false\n        });\n      })\n      .catch(this.handleCallFailure);\n  };\n\n  render() {\n    const { branchLike, component } = this.props;\n    const {\n      hotspotKeys,\n      hotspots,\n      hotspotsReviewedMeasure,\n      hotspotsTotal,\n      loading,\n      loadingMeasure,\n      loadingMore,\n      securityCategories,\n      selectedHotspot,\n      filters\n    } = this.state;\n\n    return (\n      <SecurityHotspotsAppRenderer\n        branchLike={branchLike}\n        component={component}\n        filters={filters}\n        hotspots={hotspots}\n        hotspotsReviewedMeasure={hotspotsReviewedMeasure}\n        hotspotsTotal={hotspotsTotal}\n        isStaticListOfHotspots={Boolean(hotspotKeys && hotspotKeys.length > 0)}\n        loading={loading}\n        loadingMeasure={loadingMeasure}\n        loadingMore={loadingMore}\n        onChangeFilters={this.handleChangeFilters}\n        onHotspotClick={this.handleHotspotClick}\n        onLoadMore={this.handleLoadMore}\n        onShowAllHotspots={this.handleShowAllHotspots}\n        onUpdateHotspot={this.handleHotspotUpdate}\n        securityCategories={securityCategories}\n        selectedHotspot={selectedHotspot}\n      />\n    );\n  }\n}\n\nexport default withCurrentUser(SecurityHotspotsApp);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n}\n\nexport const formatterOption = {\n  year: 'numeric',\n  month: 'long',\n  day: 'numeric',\n  hour: 'numeric',\n  minute: 'numeric'\n};\n\nexport default function DateTimeFormatter({ children, date }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...formatterOption}>\n      {children}\n    </FormattedDate>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n  long?: boolean;\n}\n\nexport const formatterOption = { year: 'numeric', month: 'short', day: '2-digit' };\n\nexport const longFormatterOption = { year: 'numeric', month: 'long', day: 'numeric' };\n\nexport default function DateFormatter({ children, date, long }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...(long ? longFormatterOption : formatterOption)}>\n      {children}\n    </FormattedDate>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { A11yContext } from './A11yContext';\n\ninterface Props {\n  anchor: string;\n  label?: string;\n  weight?: number;\n}\n\nexport default function A11ySkipTarget(props: Props) {\n  return (\n    <A11yContext.Consumer>\n      {({ addA11ySkipLink, removeA11ySkipLink }) => (\n        <A11ySkipTargetInner\n          addA11ySkipLink={addA11ySkipLink}\n          removeA11ySkipLink={removeA11ySkipLink}\n          {...props}\n        />\n      )}\n    </A11yContext.Consumer>\n  );\n}\n\ninterface InnerProps {\n  addA11ySkipLink: (link: T.A11ySkipLink) => void;\n  removeA11ySkipLink: (link: T.A11ySkipLink) => void;\n}\n\nexport class A11ySkipTargetInner extends React.PureComponent<Props & InnerProps> {\n  componentDidMount() {\n    this.props.addA11ySkipLink(this.getLink());\n  }\n\n  componentWillUnmount() {\n    this.props.removeA11ySkipLink(this.getLink());\n  }\n\n  getLink = (): T.A11ySkipLink => {\n    const { anchor: key, label = translate('skip_to_content'), weight } = this.props;\n    return { key, label, weight };\n  };\n\n  render() {\n    const { anchor } = this.props;\n    return <span id={`a11y_target__${anchor}`} />;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedRelative } from 'react-intl';\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n}\n\nexport default function DateFromNow({ children, date }: Props) {\n  return <FormattedRelative value={parseDate(date)}>{children}</FormattedRelative>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  severity: string;\n}\n\nexport default function SeverityHelper({ className, severity }: Props) {\n  if (!severity) {\n    return null;\n  }\n  return (\n    <span className={className}>\n      <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n      {translate('severity', severity)}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport enum ComponentQualifier {\n  Application = 'APP',\n  Directory = 'DIR',\n  Developper = 'DEV',\n  File = 'FIL',\n  Portfolio = 'VW',\n  Project = 'TRK',\n  SubPortfolio = 'SVW',\n  SubProject = 'BRC',\n  TestFile = 'UTS'\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getRatingTooltip as nextGetRatingTooltip, isDiffMetric } from '../../helpers/measures';\nimport { getLeakPeriod } from '../../helpers/periods';\n\nconst KNOWN_RATINGS = [\n  'sqale_rating',\n  'maintainability_rating', // Needed to provide the label for \"new_maintainability_rating\"\n  'reliability_rating',\n  'security_rating'\n];\n\nexport function enhanceMeasure(measure: T.Measure, metrics: T.Dict<T.Metric>): T.MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: T.MeasureIntern | undefined): string | undefined {\n  if (!measure || !measure.periods) {\n    return undefined;\n  }\n  const period = getLeakPeriod(measure.periods);\n  return period && period.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport Level from 'sonar-ui-common/components/ui/Level';\nimport Rating from 'sonar-ui-common/components/ui/Rating';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getRatingTooltip } from './utils';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span className={className}>–</span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, { decimals });\n    return <span className={className}>{formattedValue != null ? formattedValue : '–'}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltip overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltip>\n    );\n  }\n  return rating;\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { ApplicationPeriod } from '../types/application';\n\nfunction getPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined, index: number) {\n  if (!Array.isArray(periods)) {\n    return undefined;\n  }\n  return periods.find(period => period.index === index);\n}\n\nexport function getLeakPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined) {\n  return getPeriod(periods, 1);\n}\n\nexport function getPeriodLabel(\n  period: T.Period | undefined,\n  dateFormatter: (date: string) => string\n) {\n  if (!period) {\n    return undefined;\n  }\n\n  let parameter = period.modeParam || period.parameter || '';\n\n  switch (period.mode) {\n    case 'SPECIFIC_ANALYSIS':\n      parameter = dateFormatter(period.date);\n      break;\n    case 'PREVIOUS_VERSION':\n      parameter = parameter || dateFormatter(period.date);\n      break;\n    /*\n     * Handle legacy period modes, that predate MMF-1579\n     */\n    case 'previous_version':\n      if (!parameter) {\n        return translate('overview.period.previous_version_only_date');\n      }\n      break;\n    case 'date':\n      parameter = parameter && dateFormatter(parameter);\n      break;\n    case 'manual_baseline':\n      parameter = parameter || dateFormatter(period.date);\n      break;\n    default: // No change in the parameter\n  }\n\n  return translateWithParameters(`overview.period.${period.mode.toLowerCase()}`, parameter);\n}\n\nexport function getPeriodDate(period?: { date?: string }): Date | undefined {\n  return period && period.date ? parseDate(period.date) : undefined;\n}\n\nexport function isApplicationPeriod(\n  period: T.Period | ApplicationPeriod\n): period is ApplicationPeriod {\n  return (period as ApplicationPeriod).project !== undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as globalMessages from '../../store/globalMessages';\nimport getStore from './getStore';\n\nexport default function addGlobalSuccessMessage(message: string): void {\n  const store = getStore();\n  store.dispatch(globalMessages.addGlobalSuccessMessage(message));\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport './TagsList.css';\n\ninterface Props {\n  allowUpdate?: boolean;\n  className?: string;\n  tags: string[];\n}\n\nexport default function TagsList({ allowUpdate = false, className, tags }: Props) {\n  return (\n    <span\n      aria-label={translateWithParameters('tags_list_x', tags.join(', '))}\n      className={classNames('tags-list', className)}>\n      <TagsIcon className=\"text-middle\" />\n      <span aria-hidden={true} className=\"text-ellipsis text-middle\" title={tags.join(', ')}>\n        {tags.join(', ')}\n      </span>\n      {allowUpdate && <DropdownIcon className=\"text-middle\" />}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce } from 'lodash';\nimport * as React from 'react';\n\ninterface Props {\n  className?: string;\n  children: (position: { top: number; left: number }) => React.ReactElement<any>;\n}\n\nexport default class ScreenPositionHelper extends React.PureComponent<Props> {\n  container?: HTMLDivElement;\n  debouncedOnResize: () => void;\n\n  constructor(props: Props) {\n    super(props);\n    this.debouncedOnResize = debounce(() => this.forceUpdate(), 250);\n  }\n\n  componentDidMount() {\n    this.forceUpdate();\n    window.addEventListener('resize', this.debouncedOnResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.debouncedOnResize);\n  }\n\n  getPosition = () => {\n    const containerPos = this.container && this.container.getBoundingClientRect();\n    if (!containerPos) {\n      return { top: 0, left: 0 };\n    }\n    return {\n      top: window.pageYOffset + containerPos.top,\n      left: window.pageXOffset + containerPos.left\n    };\n  };\n\n  render() {\n    return (\n      <div\n        className={this.props.className}\n        ref={container => (this.container = container as HTMLDivElement)}>\n        {this.props.children(this.getPosition())}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nexport interface MultiSelectOptionProps {\n  active?: boolean;\n  custom?: boolean;\n  disabled?: boolean;\n  element: string;\n  onHover: (element: string) => void;\n  onSelectChange: (selected: boolean, element: string) => void;\n  renderLabel: (element: string) => React.ReactNode;\n  selected?: boolean;\n}\n\nexport default function MultiSelectOption(props: MultiSelectOptionProps) {\n  const { active, custom, disabled, element, selected } = props;\n  const onHover = () => props.onHover(element);\n  const className = classNames({ active, disabled });\n  const label = props.renderLabel(element);\n\n  return (\n    <li onFocus={onHover} onMouseOver={onHover}>\n      <Checkbox\n        checked={Boolean(selected)}\n        className={className}\n        disabled={disabled}\n        id={element}\n        onCheck={props.onSelectChange}>\n        {custom ? (\n          <span\n            aria-label={`${translate('create_new_element')}: ${label}`}\n            className=\"little-spacer-left\">\n            <span aria-hidden={true} className=\"little-spacer-right\">\n              +\n            </span>\n            {label}\n          </span>\n        ) : (\n          <span className=\"little-spacer-left\">{label}</span>\n        )}\n      </Checkbox>\n    </li>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { difference } from 'lodash';\nimport * as React from 'react';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelectOption from './MultiSelectOption';\n\ninterface Props {\n  allowNewElements?: boolean;\n  allowSelection?: boolean;\n  elements: string[];\n  filterSelected?: (query: string, selectedElements: string[]) => string[];\n  footerNode?: React.ReactNode;\n  listSize?: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  placeholder: string;\n  renderLabel?: (element: string) => React.ReactNode;\n  selectedElements: string[];\n  validateSearchInput?: (value: string) => string;\n}\n\ninterface State {\n  activeIdx: number;\n  loading: boolean;\n  query: string;\n  selectedElements: string[];\n  unselectedElements: string[];\n}\n\ninterface DefaultProps {\n  filterSelected: (query: string, selectedElements: string[]) => string[];\n  listSize: number;\n  renderLabel: (element: string) => React.ReactNode;\n  validateSearchInput: (value: string) => string;\n}\n\ntype PropsWithDefault = Props & DefaultProps;\n\nexport default class MultiSelect extends React.PureComponent<Props, State> {\n  container?: HTMLDivElement | null;\n  searchInput?: HTMLInputElement | null;\n  mounted = false;\n\n  static defaultProps: DefaultProps = {\n    filterSelected: (query: string, selectedElements: string[]) =>\n      selectedElements.filter(elem => elem.includes(query)),\n    listSize: 0,\n    renderLabel: (element: string) => element,\n    validateSearchInput: (value: string) => value\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      activeIdx: 0,\n      loading: true,\n      query: '',\n      selectedElements: [],\n      unselectedElements: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.onSearchQuery('');\n    this.updateSelectedElements(this.props as PropsWithDefault);\n    this.updateUnselectedElements(this.props as PropsWithDefault);\n    if (this.container) {\n      this.container.addEventListener('keydown', this.handleKeyboard, true);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: PropsWithDefault) {\n    if (\n      this.props.elements !== nextProps.elements ||\n      this.props.selectedElements !== nextProps.selectedElements\n    ) {\n      this.updateSelectedElements(nextProps);\n      this.updateUnselectedElements(nextProps);\n\n      const totalElements = this.getAllElements(nextProps, this.state).length;\n      if (this.state.activeIdx >= totalElements) {\n        this.setState({ activeIdx: totalElements - 1 });\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.searchInput) {\n      this.searchInput.focus();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.container) {\n      this.container.removeEventListener('keydown', this.handleKeyboard);\n    }\n  }\n\n  handleSelectChange = (selected: boolean, item: string) => {\n    if (selected) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  handleSearchChange = (value: string) => {\n    this.onSearchQuery((this.props as PropsWithDefault).validateSearchInput(value));\n  };\n\n  handleElementHover = (element: string) => {\n    this.setState((prevState, props) => {\n      return { activeIdx: this.getAllElements(props, prevState).indexOf(element) };\n    });\n  };\n\n  handleKeyboard = (evt: KeyboardEvent) => {\n    switch (evt.keyCode) {\n      case 40: // down\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectNextElement);\n        break;\n      case 38: // up\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectPreviousElement);\n        break;\n      case 37: // left\n      case 39: // right\n        evt.stopPropagation();\n        break;\n      case 13: // enter\n        if (this.state.activeIdx >= 0) {\n          this.toggleSelect(this.getAllElements(this.props, this.state)[this.state.activeIdx]);\n        }\n        break;\n    }\n  };\n\n  onSearchQuery = (query: string) => {\n    this.setState({ activeIdx: 0, loading: true, query });\n    this.props.onSearch(query).then(this.stopLoading, this.stopLoading);\n  };\n\n  onSelectItem = (item: string) => {\n    if (this.isNewElement(item, this.props)) {\n      this.onSearchQuery('');\n    }\n    this.props.onSelect(item);\n  };\n\n  onUnselectItem = (item: string) => this.props.onUnselect(item);\n\n  isNewElement = (elem: string, { selectedElements, elements }: Props) =>\n    elem.length > 0 && selectedElements.indexOf(elem) === -1 && elements.indexOf(elem) === -1;\n\n  updateSelectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (state.query) {\n        return {\n          selectedElements: props.filterSelected(state.query, props.selectedElements)\n        };\n      } else {\n        return { selectedElements: [...props.selectedElements] };\n      }\n    });\n  };\n\n  updateUnselectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (props.listSize === 0) {\n        return { unselectedElements: difference(props.elements, props.selectedElements) };\n      } else if (props.listSize < state.selectedElements.length) {\n        return { unselectedElements: [] };\n      } else {\n        return {\n          unselectedElements: difference(props.elements, props.selectedElements).slice(\n            0,\n            props.listSize - state.selectedElements.length\n          )\n        };\n      }\n    });\n  };\n\n  getAllElements = (props: Props, state: State) => {\n    if (this.isNewElement(state.query, props)) {\n      return [...state.selectedElements, ...state.unselectedElements, state.query];\n    } else {\n      return [...state.selectedElements, ...state.unselectedElements];\n    }\n  };\n\n  setElementActive = (idx: number) => this.setState({ activeIdx: idx });\n\n  selectNextElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx < 0 || activeIdx >= allElements.length - 1) {\n      return { activeIdx: 0 };\n    } else {\n      return { activeIdx: activeIdx + 1 };\n    }\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx <= 0) {\n      const lastIdx = allElements.length - 1;\n      return { activeIdx: lastIdx };\n    } else {\n      return { activeIdx: activeIdx - 1 };\n    }\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  toggleSelect = (item: string) => {\n    if (this.props.selectedElements.indexOf(item) === -1) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  render() {\n    const { allowSelection = true, allowNewElements = true, footerNode = '' } = this.props;\n    const { renderLabel } = this.props as PropsWithDefault;\n    const { query, activeIdx, selectedElements, unselectedElements } = this.state;\n    const activeElement = this.getAllElements(this.props, this.state)[activeIdx];\n    const showNewElement = allowNewElements && this.isNewElement(query, this.props);\n    const infiniteList = this.props.listSize === 0;\n    const listClasses = classNames('menu', {\n      'menu-vertically-limited': infiniteList,\n      'spacer-top': infiniteList,\n      'with-top-separator': infiniteList,\n      'with-bottom-separator': Boolean(footerNode)\n    });\n\n    return (\n      <div className=\"multi-select\" ref={div => (this.container = div)}>\n        <div className=\"menu-search\">\n          <SearchBox\n            autoFocus={true}\n            className=\"little-spacer-top\"\n            loading={this.state.loading}\n            onChange={this.handleSearchChange}\n            placeholder={this.props.placeholder}\n            value={query}\n          />\n        </div>\n        <ul className={listClasses}>\n          {selectedElements.length > 0 &&\n            selectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n                selected={true}\n              />\n            ))}\n          {unselectedElements.length > 0 &&\n            unselectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                disabled={!allowSelection}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n              />\n            ))}\n          {showNewElement && (\n            <MultiSelectOption\n              active={activeElement === query}\n              custom={true}\n              element={query}\n              key={query}\n              onHover={this.handleElementHover}\n              onSelectChange={this.handleSelectChange}\n              renderLabel={renderLabel}\n            />\n          )}\n          {!showNewElement && selectedElements.length < 1 && unselectedElements.length < 1 && (\n            <li className=\"spacer-left\">{translateWithParameters('no_results_for_x', query)}</li>\n          )}\n        </ul>\n        {footerNode}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getMarkdownHelpUrl } from '../../helpers/urls';\n\ninterface Props {\n  className?: string;\n}\n\nexport default class MarkdownTips extends React.PureComponent<Props> {\n  handleClick(evt: React.SyntheticEvent<HTMLAnchorElement>) {\n    evt.preventDefault();\n    window.open(getMarkdownHelpUrl(), 'Markdown', 'height=300,width=600,scrollbars=1,resizable=1');\n  }\n\n  render() {\n    return (\n      <div className={classNames('markdown-tips', this.props.className)}>\n        <a className=\"little-spacer-right\" href=\"#\" onClick={this.handleClick}>\n          {translate('markdown.helplink')}\n        </a>\n        {':'}\n        <span className=\"spacer-left\">*{translate('bold')}*</span>\n        <span className=\"spacer-left\">\n          ``\n          {translate('code')}\n          ``\n        </span>\n        <span className=\"spacer-left\">* {translate('bulleted_point')}</span>\n      </div>\n    );\n  }\n}\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".tags-list{white-space:nowrap;line-height:16px}.tags-list i:before{font-size:12px}.tags-list span{display:inline-block;vertical-align:middle;text-align:left;max-width:220px;padding-left:4px;padding-right:4px}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelect from '../common/MultiSelect';\nimport './TagsList.css';\n\ninterface Props {\n  listSize: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  selectedTags: string[];\n  tags: string[];\n}\n\nexport default function TagsSelector(props: Props) {\n  return (\n    <MultiSelect\n      elements={props.tags}\n      listSize={props.listSize}\n      onSearch={props.onSearch}\n      onSelect={props.onSelect}\n      onUnselect={props.onUnselect}\n      placeholder={translate('search.search_for_tags')}\n      selectedElements={props.selectedTags}\n      validateSearchInput={validateTag}\n    />\n  );\n}\n\nexport function validateTag(value: string) {\n  // Allow only a-z, 0-9, '+', '-', '#', '.'\n  return value.toLowerCase().replace(/[^-a-z0-9+#.]/gi, '');\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { colors } from '../../app/theme';\n\nconst DonutChart = lazyLoadComponent(\n  () => import('sonar-ui-common/components/charts/DonutChart'),\n  'DonutChart'\n);\n\nconst SIZE_TO_WIDTH_MAPPING = { small: 16, normal: 24, big: 40, huge: 60 };\n\nconst SIZE_TO_THICKNESS_MAPPING = { small: 2, normal: 3, big: 3, huge: 4 };\n\nexport interface CoverageRatingProps {\n  muted?: boolean;\n  size?: 'small' | 'normal' | 'big' | 'huge';\n  value: number | string | null | undefined;\n}\n\nexport default function CoverageRating({\n  muted = false,\n  size = 'normal',\n  value\n}: CoverageRatingProps) {\n  let data = [{ value: 100, fill: '#ccc ' }];\n  let padAngle = 0;\n\n  if (value != null) {\n    const numberValue = Number(value);\n    data = [\n      { value: numberValue, fill: muted ? colors.gray71 : colors.green },\n      { value: 100 - numberValue, fill: muted ? colors.barBackgroundColor : colors.lineCoverageRed }\n    ];\n    if (numberValue !== 0 && numberValue < 100) {\n      padAngle = 0.1; // Same for all sizes, because it scales automatically\n    }\n  }\n\n  const width = SIZE_TO_WIDTH_MAPPING[size];\n  const thickness = SIZE_TO_THICKNESS_MAPPING[size];\n\n  return (\n    <DonutChart\n      data={data}\n      height={width}\n      padAngle={padAngle}\n      thickness={thickness}\n      width={width}\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post } from 'sonar-ui-common/helpers/request';\n\nexport function getFavorites(): Promise<any> {\n  return getJSON('/api/favorites/search');\n}\n\nexport function addFavorite(component: string): Promise<void> {\n  return post('/api/favorites/add', { component });\n}\n\nexport function removeFavorite(component: string): Promise<void> {\n  return post('/api/favorites/remove', { component });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport FavoriteButton from 'sonar-ui-common/components/controls/FavoriteButton';\nimport { addFavorite, removeFavorite } from '../../api/favorites';\n\ninterface Props {\n  className?: string;\n  component: string;\n  favorite: boolean;\n  qualifier: string;\n  handleFavorite?: (component: string, isFavorite: boolean) => void;\n}\n\ninterface State {\n  favorite: boolean;\n}\n\nexport default class Favorite extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      favorite: props.favorite\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentDidUpdate(_prevProps: Props, prevState: State) {\n    if (prevState.favorite !== this.props.favorite) {\n      this.setState({ favorite: this.props.favorite });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  toggleFavorite = () => {\n    const newFavorite = !this.state.favorite;\n    const apiMethod = newFavorite ? addFavorite : removeFavorite;\n\n    return apiMethod(this.props.component).then(() => {\n      if (this.mounted) {\n        this.setState({ favorite: newFavorite }, () => {\n          if (this.props.handleFavorite) {\n            this.props.handleFavorite(this.props.component, newFavorite);\n          }\n        });\n      }\n    });\n  };\n\n  render() {\n    const { className, qualifier } = this.props;\n    const { favorite } = this.state;\n\n    return (\n      <FavoriteButton\n        className={className}\n        favorite={favorite}\n        qualifier={qualifier}\n        toggleFavorite={this.toggleFavorite}\n      />\n    );\n  }\n}\n/*  */\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './LocationIndex.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  leading?: boolean;\n  onClick?: () => void;\n  selected?: boolean;\n  [x: string]: any;\n}\n\nexport default function LocationIndex(props: Props) {\n  const { children, leading, onClick, selected, ...other } = props;\n  const clickAttributes = onClick ? { onClick, role: 'button', tabIndex: 0 } : {};\n  // put {...others} because Tooltip sets some event handlers\n  return (\n    <div\n      className={classNames('location-index', {\n        'is-leading': leading,\n        selected\n      })}\n      {...clickAttributes}\n      {...other}>\n      {children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport StatusIcon from 'sonar-ui-common/components/icons/StatusIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  resolution: string | undefined;\n  status: string;\n}\n\nexport default function StatusHelper(props: Props) {\n  const resolution = props.resolution && ` (${translate('issue.resolution', props.resolution)})`;\n  return (\n    <span className={props.className}>\n      <StatusIcon className=\"little-spacer-right\" status={props.status} />\n      {translate('issue.status', props.status)}\n      {resolution}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function getStandards(): Promise<T.Standards> {\n  return import('./standards.json').then(x => x.default);\n}\n\nexport function renderCWECategory(standards: T.Standards, category: string): string {\n  const record = standards.cwe[category];\n  if (!record) {\n    return `CWE-${category}`;\n  } else if (category === 'unknown') {\n    return record.title;\n  } else {\n    return `CWE-${category} - ${record.title}`;\n  }\n}\n\nexport function renderOwaspTop10Category(\n  standards: T.Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.owaspTop10[category];\n  if (!record) {\n    return addPrefix(category.toUpperCase(), 'OWASP', withPrefix);\n  } else {\n    return addPrefix(`${category.toUpperCase()} - ${record.title}`, 'OWASP', withPrefix);\n  }\n}\n\nexport function renderSansTop25Category(\n  standards: T.Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.sansTop25[category];\n  return addPrefix(record ? record.title : category, 'SANS', withPrefix);\n}\n\nexport function renderSonarSourceSecurityCategory(\n  standards: T.Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.sonarsourceSecurity[category];\n  if (!record) {\n    return addPrefix(category.toUpperCase(), 'SONAR', withPrefix);\n  } else if (category === 'others') {\n    return record.title;\n  } else {\n    return addPrefix(record.title, 'SONAR', withPrefix);\n  }\n}\n\nfunction addPrefix(title: string, prefix: string, withPrefix: boolean) {\n  return withPrefix ? `${prefix} ${title}` : title;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { flatten } from 'lodash';\nimport { splitByTokens } from './highlight';\nimport { getLinearLocations } from './issueLocations';\n\nexport function issuesByLine(issues: T.Issue[]) {\n  const index: { [line: number]: T.Issue[] } = {};\n  issues.forEach(issue => {\n    const line = issue.textRange ? issue.textRange.endLine : 0;\n    if (!(line in index)) {\n      index[line] = [];\n    }\n    index[line].push(issue);\n  });\n  return index;\n}\n\nexport function issuesByComponentAndLine(\n  issues: T.Issue[] = []\n): { [component: string]: { [line: number]: T.Issue[] } } {\n  return issues.reduce((mapping: { [component: string]: { [line: number]: T.Issue[] } }, issue) => {\n    mapping[issue.component] = mapping[issue.component] || {};\n    const line = issue.textRange ? issue.textRange.endLine : 0;\n    mapping[issue.component][line] = mapping[issue.component][line] || [];\n    mapping[issue.component][line].push(issue);\n    return mapping;\n  }, {});\n}\n\nexport function locationsByLine(issues: Pick<T.Issue, 'textRange'>[]) {\n  const index: { [line: number]: T.LinearIssueLocation[] } = {};\n  issues.forEach(issue => {\n    getLinearLocations(issue.textRange).forEach(location => {\n      if (!(location.line in index)) {\n        index[location.line] = [];\n      }\n      index[location.line].push(location);\n    });\n  });\n  return index;\n}\n\nexport function duplicationsByLine(duplications: T.Duplication[] | undefined) {\n  if (duplications == null) {\n    return {};\n  }\n\n  const duplicationsByLine: { [line: number]: number[] } = {};\n\n  duplications.forEach(({ blocks }, duplicationIndex) => {\n    blocks.forEach(block => {\n      // eslint-disable-next-line no-underscore-dangle\n      if (block._ref === '1') {\n        for (let line = block.from; line < block.from + block.size; line++) {\n          if (!(line in duplicationsByLine)) {\n            duplicationsByLine[line] = [];\n          }\n          duplicationsByLine[line].push(duplicationIndex);\n        }\n      }\n    });\n  });\n\n  return duplicationsByLine;\n}\n\nexport function symbolsByLine(sources: T.SourceLine[]) {\n  const index: { [line: number]: string[] } = {};\n  sources.forEach(line => {\n    const tokens = splitByTokens(line.code || '');\n    const symbols = flatten(\n      tokens.map(token => {\n        const keys = token.className.match(/sym-\\d+/g);\n        return keys != null ? keys : [];\n      })\n    );\n    index[line.line] = symbols.filter(key => key);\n  });\n  return index;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\n\ninterface Props {\n  diff: T.IssueChangelogDiff;\n}\n\nexport default function IssueChangelogDiff({ diff }: Props) {\n  if (diff.key === 'file') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.file_move',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (['from_long_branch', 'from_branch'].includes(diff.key)) {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'from_short_branch') {\n    // Applies to both legacy short lived branch and pull request\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_non_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'line') {\n    return <p>{translateWithParameters('issue.changelog.line_removed_X', diff.oldValue || '')}</p>;\n  }\n\n  let message;\n  if (diff.newValue != null) {\n    let { newValue } = diff;\n    if (diff.key === 'effort') {\n      newValue = formatMeasure(diff.newValue, 'WORK_DUR');\n    }\n    message = translateWithParameters(\n      'issue.changelog.changed_to',\n      translate('issue.changelog.field', diff.key),\n      newValue\n    );\n  } else {\n    message = translateWithParameters(\n      'issue.changelog.removed',\n      translate('issue.changelog.field', diff.key)\n    );\n  }\n\n  if (diff.oldValue != null) {\n    let { oldValue } = diff;\n    if (diff.key === 'effort') {\n      oldValue = formatMeasure(diff.oldValue, 'WORK_DUR');\n    }\n    message += ` (${translateWithParameters('issue.changelog.was', oldValue)})`;\n  }\n  return <p>{message}</p>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function getLinearLocations(textRange: T.TextRange | undefined): T.LinearIssueLocation[] {\n  if (!textRange) {\n    return [];\n  }\n  const locations = [];\n\n  // go through all lines of the `textRange`\n  for (let line = textRange.startLine; line <= textRange.endLine; line++) {\n    // TODO fix 999999\n    const from = line === textRange.startLine ? textRange.startOffset : 0;\n    const to = line === textRange.endLine ? textRange.endOffset : 999999;\n    locations.push({ line, from, to });\n  }\n  return locations;\n}\n\nexport function getSecondaryIssueLocationsForLine(\n  line: T.SourceLine,\n  highlightedLocations: (T.FlowLocation | undefined)[] | undefined\n): T.LinearIssueLocation[] {\n  if (!highlightedLocations) {\n    return [];\n  }\n  return highlightedLocations.reduce((locations, location) => {\n    const linearLocations: T.LinearIssueLocation[] = location\n      ? getLinearLocations(location.textRange)\n          .filter(l => l.line === line.line)\n          .map(l => ({\n            ...l,\n            startLine: location.textRange.startLine,\n            index: location.index,\n            text: location.msg\n          }))\n      : [];\n    return [...locations, ...linearLocations];\n  }, []);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { BranchLike } from '../../types/branch-like';\n\ninterface SourceViewerContextShape {\n  branchLike?: BranchLike;\n  file: T.SourceViewerFile;\n}\n\nexport const SourceViewerContext = React.createContext<SourceViewerContextShape>({\n  branchLike: {} as BranchLike,\n  file: {} as T.SourceViewerFile\n});\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniq } from 'lodash';\n\nexport interface Token {\n  className: string;\n  markers: number[];\n  text: string;\n}\n\nconst ISSUE_LOCATION_CLASS = 'source-line-code-issue';\n\nexport function splitByTokens(code: string, rootClassName = ''): Token[] {\n  const container = document.createElement('div');\n  let tokens: Token[] = [];\n  container.innerHTML = code;\n  [].forEach.call(container.childNodes, (node: Element) => {\n    if (node.nodeType === 1) {\n      // ELEMENT NODE\n      const fullClassName = rootClassName ? rootClassName + ' ' + node.className : node.className;\n      const innerTokens = splitByTokens(node.innerHTML, fullClassName);\n      tokens = tokens.concat(innerTokens);\n    }\n    if (node.nodeType === 3 && node.nodeValue) {\n      // TEXT NODE\n      tokens.push({ className: rootClassName, markers: [], text: node.nodeValue });\n    }\n  });\n  return tokens;\n}\n\nexport function highlightSymbol(tokens: Token[], symbol: string): Token[] {\n  const symbolRegExp = new RegExp(`\\\\b${symbol}\\\\b`);\n  return tokens.map(token =>\n    symbolRegExp.test(token.className)\n      ? { ...token, className: `${token.className} highlighted` }\n      : token\n  );\n}\n\n/**\n * Intersect two ranges\n * @param s1 Start position of the first range\n * @param e1 End position of the first range\n * @param s2 Start position of the second range\n * @param e2 End position of the second range\n */\nfunction intersect(s1: number, e1: number, s2: number, e2: number) {\n  return { from: Math.max(s1, s2), to: Math.min(e1, e2) };\n}\n\n/**\n * Get the substring of a string\n * @param str A string\n * @param from \"From\" offset\n * @param to \"To\" offset\n * @param acc Global offset to eliminate\n */\nfunction part(str: string, from: number, to: number, acc: number): string {\n  // we do not want negative number as the first argument of `substr`\n  return from >= acc ? str.substr(from - acc, to - from) : str.substr(0, to - from);\n}\n\n/**\n * Highlight issue locations in the list of tokens\n */\nexport function highlightIssueLocations(\n  tokens: Token[],\n  issueLocations: T.LinearIssueLocation[],\n  rootClassName: string = ISSUE_LOCATION_CLASS\n): Token[] {\n  issueLocations.forEach(location => {\n    const nextTokens: Token[] = [];\n    let acc = 0;\n    let markerAdded = location.line !== location.startLine;\n    tokens.forEach(token => {\n      const x = intersect(acc, acc + token.text.length, location.from, location.to);\n      const p1 = part(token.text, acc, x.from, acc);\n      const p2 = part(token.text, x.from, x.to, acc);\n      const p3 = part(token.text, x.to, acc + token.text.length, acc);\n      if (p1.length) {\n        nextTokens.push({ ...token, text: p1 });\n      }\n      if (p2.length) {\n        const newClassName =\n          token.className.indexOf(rootClassName) === -1\n            ? `${token.className} ${rootClassName}`\n            : token.className;\n        nextTokens.push({\n          className: newClassName,\n          markers:\n            !markerAdded && location.index != null\n              ? uniq([...token.markers, location.index])\n              : token.markers,\n          text: p2\n        });\n        markerAdded = true;\n      }\n      if (p3.length) {\n        nextTokens.push({ ...token, text: p3 });\n      }\n      acc += token.text.length;\n    });\n    tokens = nextTokens.slice();\n  });\n  return tokens;\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".location-index{position:relative;display:inline-block;vertical-align:top;line-height:16px;padding-left:6px;padding-right:6px;border-radius:2px;background-color:#d18582;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;transition:background-color .3s ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.location-index.selected{background-color:#a4030f}.location-index.muted{background-color:#cdcdcd}.location-index.is-leading:first-child{margin-left:0}.location-index.is-leading:not(:first-child){margin-left:-22px}.location-index[tabindex]{cursor:pointer}.location-index[tabindex]:hover,a:hover>.location-index{background-color:#a4030f}.location-index[tabindex]:focus{outline:none}.source-line-code-inner .location-index{line-height:16px;margin:1px 4px}.source-line-code-inner .location-index+.location-index{margin-left:0}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './LocationMessage.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  selected: boolean;\n}\n\nexport default function LocationMessage(props: Props) {\n  return (\n    <div className={classNames('location-message', { selected: props.selected })}>\n      {props.children}\n    </div>\n  );\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".location-message{display:inline-block;vertical-align:top;line-height:16px;padding:0 6px;border-radius:2px;background-color:#9e9e9e;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;text-overflow:ellipsis;overflow:hidden;transition:background-color .3s ease}.location-message.selected{background-color:#475760}.location-index+.location-message{margin-left:4px}.location-index>.location-message{display:none;position:absolute;bottom:calc(100% + 4px);left:0}.location-index:hover>.location-message{display:block}.location-index>.location-message:after{position:absolute;bottom:-5px;left:4px;width:0;height:0;border-top:5px solid #475760;border-left:5px solid transparent;border-right:5px solid transparent;content:\\\"\\\"}.source-line-code .location-message{padding-top:2px;padding-bottom:2px}\", \"\"]);\n\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".issue{position:relative;padding-top:8px;padding-bottom:8px;background-color:#f2dede;transition:all .3s ease,border 0s ease}.issue.hotspot{background-color:#eeeff4}.issue.selected{box-shadow:none;outline:none;border:2px solid #4b9fd5!important}.issue+.issue,.issue-container+.issue-container{margin-top:5px}.issue.selected+.issue{border-top-color:transparent}.issue-row{display:flex;margin-bottom:5px}.issue-row-meta{flex-grow:0;padding-right:5px;white-space:nowrap}.issue-message{flex-grow:1;padding-left:8px;padding-right:8px;line-height:18px;font-size:13px;font-weight:600;text-overflow:ellipsis}.issue-actions{justify-content:space-between;flex-wrap:wrap;padding-left:8px}.issue-actions,.issue-meta-list{display:flex;align-items:center}.issue-meta{line-height:16px;font-size:12px}.issue-meta+.issue-meta{margin-left:8px}.issue-meta-label{display:inline-block;vertical-align:top;max-width:180px;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.issue-see-rule{border-bottom:none;font-size:12px}.issue-changelog{width:450px;max-height:320px;overflow:auto;white-space:normal}.issue-comments{margin-top:5px;padding-left:8px;font-size:12px}.issue-comment{display:flex}.issue-comment+.issue-comment{margin-top:4px}.issue-comment-author{max-width:130px;font-weight:600;overflow:hidden;text-overflow:ellipsis}.issue-comment-age,.issue-comment-author{flex-shrink:0;line-height:18px;color:#777;white-space:nowrap}.issue-comment-text{flex:1;min-width:0;margin-left:5px;margin-right:5px;line-height:18px;line-height:1.5;overflow:hidden;outline:none;word-break:break-all}.issue-comment-text.markdown pre{float:none;height:auto;margin:0;padding:8px;background-color:#e6e6e6;border:none;border-radius:3px}.issue-comment-text.markdown br~pre{margin-top:8px}.issue-comment-actions{flex-shrink:0;padding-left:5px;line-height:18px;white-space:nowrap}.issue-comment-bubble-popup{width:440px;font-size:12px}.issue-comment-form-text textarea{width:100%;max-width:100%}.issue-comment-form-footer{margin-top:5px;line-height:22px}.issue-comment-form-footer:after,.issue-comment-form-footer:before{display:table;content:\\\"\\\";line-height:0}.issue-comment-form-footer:after{clear:both}.issue-comment-form-actions{float:right}.issue-comment-form-tips{float:left}.issue-with-checkbox{padding-left:24px}.issue-with-checkbox .issue-checkbox-container{display:flex;justify-content:center;align-items:center}.issue-checkbox-container{display:none;position:absolute;width:28px;top:0;bottom:0;left:0;border:none}.issue-checkbox-container:hover{background-color:rgba(0,0,0,.05)}.issue:not(.selected) .location-index{background-color:#999}.issue .menu:not(.issues-similar-issues-menu):not(.issue-changelog){max-height:120px;overflow:auto}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nconst LINES_ABOVE = 5;\nconst LINES_BELOW = 5;\nexport const MERGE_DISTANCE = 11; // Merge if snippets are eleven lines away (separated by 10 lines) or fewer\nexport const LINES_BELOW_ISSUE = 9;\nexport const EXPAND_BY_LINES = 50;\n\nfunction unknownComponent(key: string): T.SnippetsByComponent {\n  return {\n    component: {\n      key,\n      measures: {},\n      path: '',\n      project: '',\n      projectName: '',\n      q: 'FIL',\n      uuid: ''\n    },\n    sources: []\n  };\n}\n\nfunction collision([startA, endA]: number[], [startB, endB]: number[]) {\n  return !(startA > endB + MERGE_DISTANCE || endA < startB - MERGE_DISTANCE);\n}\n\nfunction getPrimaryLocation(issue: T.Issue): T.FlowLocation {\n  return {\n    component: issue.component,\n    textRange: issue.textRange || {\n      endLine: 0,\n      endOffset: 0,\n      startLine: 0,\n      startOffset: 0\n    }\n  };\n}\n\nfunction addLinesBellow(params: { issue: T.Issue; locationEnd: number }) {\n  const { issue, locationEnd } = params;\n  const issueEndLine = (issue.textRange && issue.textRange.endLine) || 0;\n\n  if (!issueEndLine || issueEndLine === locationEnd) {\n    return locationEnd + LINES_BELOW_ISSUE;\n  }\n\n  return locationEnd + LINES_BELOW;\n}\n\nexport function createSnippets(params: {\n  locations: T.FlowLocation[];\n  issue: T.Issue;\n  addIssueLocation: boolean;\n}): T.Snippet[] {\n  const { locations, issue, addIssueLocation } = params;\n  // For each location's range (2 above and 2 below), and then compare with other ranges\n  // to merge snippets that collide.\n  return (addIssueLocation ? [getPrimaryLocation(issue), ...locations] : locations).reduce(\n    (snippets: T.Snippet[], loc, index) => {\n      const startIndex = Math.max(1, loc.textRange.startLine - LINES_ABOVE);\n      const endIndex = addLinesBellow({ issue, locationEnd: loc.textRange.endLine });\n\n      let firstCollision: { start: number; end: number } | undefined;\n\n      // Remove ranges that collide into the first collision\n      snippets = snippets.filter(snippet => {\n        if (collision([snippet.start, snippet.end], [startIndex, endIndex])) {\n          let keep = false;\n          // Check if we've already collided\n          if (!firstCollision) {\n            firstCollision = snippet;\n            keep = true;\n          }\n          // Merge with first collision:\n          firstCollision.start = Math.min(startIndex, snippet.start, firstCollision.start);\n          firstCollision.end = Math.max(endIndex, snippet.end, firstCollision.end);\n\n          // remove the range if it was not the first collision\n          return keep;\n        }\n        return true;\n      });\n\n      if (firstCollision === undefined) {\n        snippets.push({\n          start: startIndex,\n          end: endIndex,\n          index\n        });\n      }\n\n      return snippets;\n    },\n    []\n  );\n}\n\nexport function linesForSnippets(snippets: T.Snippet[], componentLines: T.LineMap) {\n  return snippets\n    .map(snippet => {\n      const lines = [];\n      for (let i = snippet.start; i <= snippet.end; i++) {\n        if (componentLines[i]) {\n          lines.push(componentLines[i]);\n        }\n      }\n      return lines;\n    })\n    .filter(snippet => snippet.length > 0);\n}\n\nexport function groupLocationsByComponent(\n  locations: T.FlowLocation[],\n  components: { [key: string]: T.SnippetsByComponent }\n) {\n  let currentComponent = '';\n  let currentGroup: T.SnippetGroup;\n  const groups: T.SnippetGroup[] = [];\n\n  locations.forEach((loc, index) => {\n    if (loc.component !== currentComponent) {\n      currentGroup = {\n        ...(components[loc.component] || unknownComponent(loc.component)),\n        locations: []\n      };\n      groups.push(currentGroup);\n      currentComponent = loc.component;\n    }\n    loc.index = index;\n    currentGroup.locations.push(loc);\n  });\n\n  return groups;\n}\n\nexport function expandSnippet({\n  direction,\n  snippetIndex,\n  snippets\n}: {\n  direction: T.ExpandDirection;\n  snippetIndex: number;\n  snippets: T.Snippet[];\n}) {\n  const snippetToExpand = snippets.find(s => s.index === snippetIndex);\n  if (!snippetToExpand) {\n    throw new Error(`Snippet ${snippetIndex} not found`);\n  }\n\n  snippetToExpand.start = Math.max(\n    0,\n    snippetToExpand.start - (direction === 'up' ? EXPAND_BY_LINES : 0)\n  );\n  snippetToExpand.end += direction === 'down' ? EXPAND_BY_LINES : 0;\n\n  return snippets.map(snippet => {\n    if (snippet.index === snippetIndex) {\n      return snippetToExpand;\n    }\n    if (collision([snippet.start, snippet.end], [snippetToExpand.start, snippetToExpand.end])) {\n      // Merge with expanded snippet\n      snippetToExpand.start = Math.min(snippet.start, snippetToExpand.start);\n      snippetToExpand.end = Math.max(snippet.end, snippetToExpand.end);\n      snippet.toDelete = true;\n    }\n    return snippet;\n  });\n}\n\nexport function inSnippet(line: number, snippet: T.SourceLine[]) {\n  return line >= snippet[0].line && line <= snippet[snippet.length - 1].line;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { IssueResponse } from '../../api/issues';\nimport { parseIssueFromResponse } from '../../helpers/issues';\n\nexport const updateIssue = (\n  onChange: (issue: T.Issue) => void,\n  resultPromise: Promise<IssueResponse>,\n  oldIssue?: T.Issue,\n  newIssue?: T.Issue\n) => {\n  const optimisticUpdate = oldIssue !== undefined && newIssue !== undefined;\n  if (optimisticUpdate) {\n    onChange(newIssue!);\n  }\n\n  resultPromise.then(\n    response => {\n      if (!optimisticUpdate) {\n        const issue = parseIssueFromResponse(\n          response.issue,\n          response.components,\n          response.users,\n          response.rules\n        );\n        onChange(issue);\n      }\n    },\n    () => {\n      if (optimisticUpdate) {\n        onChange(oldIssue!);\n      }\n    }\n  );\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\n\ninterface Props {\n  active?: string;\n  className?: string;\n  item: string;\n  onHover?: (item: string) => void;\n  onSelect?: (item: string) => void;\n  title?: string;\n}\n\nexport default class SelectListItem extends React.PureComponent<Props> {\n  handleSelect = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    if (this.props.onSelect) {\n      this.props.onSelect(this.props.item);\n    }\n  };\n\n  handleHover = () => {\n    if (this.props.onHover) {\n      this.props.onHover(this.props.item);\n    }\n  };\n\n  renderLink() {\n    const children = this.props.children || this.props.item;\n    return (\n      <li>\n        <a\n          className={classNames(\n            { active: this.props.active === this.props.item },\n            this.props.className\n          )}\n          href=\"#\"\n          onClick={this.handleSelect}\n          onFocus={this.handleHover}\n          onMouseOver={this.handleHover}>\n          {children}\n        </a>\n      </li>\n    );\n  }\n\n  render() {\n    return (\n      <Tooltip overlay={this.props.title || undefined} placement=\"right\">\n        {this.renderLink()}\n      </Tooltip>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as key from 'keymaster';\nimport { uniqueId } from 'lodash';\nimport * as React from 'react';\nimport SelectListItem from './SelectListItem';\n\ninterface Props {\n  className?: string;\n  items: string[];\n  currentItem: string;\n  onSelect: (item: string) => void;\n}\n\ninterface State {\n  active: string;\n}\n\nexport default class SelectList extends React.PureComponent<Props, State> {\n  currentKeyScope?: string;\n  previousFilter?: (event: any) => void;\n  previousKeyScope?: string;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      active: props.currentItem\n    };\n  }\n\n  componentDidMount() {\n    this.attachShortcuts();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.currentItem !== this.props.currentItem &&\n      !this.props.items.includes(this.state.active)\n    ) {\n      this.setState({ active: this.props.currentItem });\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachShortcuts();\n  }\n\n  attachShortcuts = () => {\n    this.previousKeyScope = key.getScope();\n    this.previousFilter = key.filter;\n    this.currentKeyScope = uniqueId('key-scope');\n    key.setScope(this.currentKeyScope);\n\n    // sometimes there is a *focused* search field next to the SelectList component\n    // we need to allow shortcuts in this case, but only for the used keys\n    (key as any).filter = (event: KeyboardEvent & { target: HTMLElement }) => {\n      const { tagName } = event.target || event.srcElement;\n      const isInput = tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';\n      return [13, 38, 40].includes(event.keyCode) || !isInput;\n    };\n\n    key('down', this.currentKeyScope, () => {\n      this.setState(this.selectNextElement);\n      return false;\n    });\n\n    key('up', this.currentKeyScope, () => {\n      this.setState(this.selectPreviousElement);\n      return false;\n    });\n\n    key('return', this.currentKeyScope, () => {\n      if (this.state.active != null) {\n        this.handleSelect(this.state.active);\n      }\n      return false;\n    });\n  };\n\n  detachShortcuts = () => {\n    if (this.previousKeyScope) {\n      key.setScope(this.previousKeyScope);\n    }\n    if (this.currentKeyScope) {\n      key.deleteScope(this.currentKeyScope);\n    }\n    (key as any).filter = this.previousFilter;\n  };\n\n  handleSelect = (item: string) => {\n    this.props.onSelect(item);\n  };\n\n  handleHover = (item: string) => {\n    this.setState({ active: item });\n  };\n\n  selectNextElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx < 0) {\n      return { active: props.items[0] };\n    }\n    return { active: props.items[(idx + 1) % props.items.length] };\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx <= 0) {\n      return { active: props.items[props.items.length - 1] };\n    }\n    return { active: props.items[idx - 1] };\n  };\n\n  renderChild = (child: any) => {\n    if (child == null) {\n      return null;\n    }\n    // do not pass extra props to children like `<li className=\"divider\" />`\n    if (child.type !== SelectListItem) {\n      return child;\n    }\n    return React.cloneElement(child, {\n      active: this.state.active,\n      onHover: this.handleHover,\n      onSelect: this.handleSelect\n    });\n  };\n\n  render() {\n    const { children } = this.props;\n    const hasChildren = React.Children.count(children) > 0;\n    return (\n      <ul className={classNames('menu', this.props.className)}>\n        {hasChildren && React.Children.map(children, this.renderChild)}\n        {!hasChildren &&\n          this.props.items.map(item => (\n            <SelectListItem\n              active={this.state.active}\n              item={item}\n              key={item}\n              onHover={this.handleHover}\n              onSelect={this.handleSelect}\n            />\n          ))}\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { map } from 'lodash';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { searchMembers } from '../../../api/organizations';\nimport { searchUsers } from '../../../api/users';\nimport { isSonarCloud } from '../../../helpers/system';\nimport { isLoggedIn, isUserActive } from '../../../helpers/users';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport { withCurrentUser } from '../../hoc/withCurrentUser';\nimport Avatar from '../../ui/Avatar';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  issue: Pick<T.Issue, 'projectOrganization'>;\n  onSelect: (login: string) => void;\n}\n\ninterface State {\n  currentUser: string;\n  query: string;\n  users: T.UserActive[];\n}\n\nconst LIST_SIZE = 10;\n\nexport class SetAssigneePopup extends React.PureComponent<Props, State> {\n  defaultUsersArray: T.UserActive[];\n\n  constructor(props: Props) {\n    super(props);\n    this.defaultUsersArray = [{ login: '', name: translate('unassigned') }];\n\n    if (isLoggedIn(props.currentUser)) {\n      this.defaultUsersArray = [props.currentUser, ...this.defaultUsersArray];\n    }\n\n    this.state = {\n      query: '',\n      users: this.defaultUsersArray,\n      currentUser: this.defaultUsersArray.length > 0 ? this.defaultUsersArray[0].login : ''\n    };\n  }\n\n  searchMembers = (query: string) => {\n    searchMembers({\n      organization: this.props.issue.projectOrganization,\n      q: query,\n      ps: LIST_SIZE\n    }).then(this.handleSearchResult, () => {});\n  };\n\n  searchUsers = (query: string) => {\n    searchUsers({ q: query, ps: LIST_SIZE }).then(this.handleSearchResult, () => {});\n  };\n\n  handleSearchResult = ({ users }: { users: T.UserBase[] }) => {\n    const activeUsers = users.filter(isUserActive);\n    this.setState({\n      users: activeUsers,\n      currentUser: activeUsers.length > 0 ? activeUsers[0].login : ''\n    });\n  };\n\n  handleSearchChange = (query: string) => {\n    if (query.length === 0) {\n      this.setState({\n        query,\n        users: this.defaultUsersArray,\n        currentUser: this.defaultUsersArray[0].login\n      });\n    } else {\n      this.setState({ query });\n      if (isSonarCloud()) {\n        this.searchMembers(query);\n      } else {\n        this.searchUsers(query);\n      }\n    }\n  };\n\n  render() {\n    return (\n      <DropdownOverlay noPadding={true}>\n        <div className=\"multi-select\">\n          <div className=\"menu-search\">\n            <SearchBox\n              autoFocus={true}\n              className=\"little-spacer-top\"\n              minLength={2}\n              onChange={this.handleSearchChange}\n              placeholder={translate('search.search_for_users')}\n              value={this.state.query}\n            />\n          </div>\n          <SelectList\n            currentItem={this.state.currentUser}\n            items={map(this.state.users, 'login')}\n            onSelect={this.props.onSelect}>\n            {this.state.users.map(user => (\n              <SelectListItem item={user.login} key={user.login}>\n                {!!user.login && (\n                  <Avatar className=\"spacer-right\" hash={user.avatar} name={user.name} size={16} />\n                )}\n                <span className=\"text-middle\" style={{ marginLeft: user.login ? 24 : undefined }}>\n                  {user.name}\n                </span>\n              </SelectListItem>\n            ))}\n          </SelectList>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n\nexport default withCurrentUser(SetAssigneePopup);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../ui/Avatar';\nimport SetAssigneePopup from '../popups/SetAssigneePopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<\n    T.Issue,\n    'assignee' | 'assigneeActive' | 'assigneeAvatar' | 'assigneeName' | 'projectOrganization'\n  >;\n  canAssign: boolean;\n  onAssign: (login: string) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueAssign extends React.PureComponent<Props> {\n  toggleAssign = (open?: boolean) => {\n    this.props.togglePopup('assign', open);\n  };\n\n  handleClose = () => {\n    this.toggleAssign(false);\n  };\n\n  renderAssignee() {\n    const { issue } = this.props;\n    const assigneeName = issue.assigneeName || issue.assignee;\n\n    if (assigneeName) {\n      return (\n        <>\n          <span className=\"text-top\">\n            <Avatar\n              className=\"little-spacer-right\"\n              hash={issue.assigneeAvatar}\n              name={issue.assigneeName || issue.assignee}\n              size={16}\n            />\n          </span>\n          <span className=\"issue-meta-label\">\n            {issue.assigneeActive === false\n              ? translateWithParameters('user.x_deleted', assigneeName)\n              : assigneeName}\n          </span>\n        </>\n      );\n    }\n\n    return <span className=\"issue-meta-label\">{translate('unassigned')}</span>;\n  }\n\n  render() {\n    if (this.props.canAssign) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            closeOnEscape={true}\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canAssign}\n            overlay={<SetAssigneePopup issue={this.props.issue} onSelect={this.props.onAssign} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-assign\"\n              onClick={this.toggleAssign}>\n              {this.renderAssignee()}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return this.renderAssignee();\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MarkdownTips from '../../common/MarkdownTips';\n\ninterface Props {\n  comment?: Pick<T.IssueComment, 'markdown'>;\n  onComment: (text: string) => void;\n  toggleComment: (visible: boolean) => void;\n  placeholder: string;\n  placement?: PopupPlacement;\n  autoTriggered?: boolean;\n}\n\ninterface State {\n  textComment: string;\n}\n\nexport default class CommentPopup extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      textComment: props.comment ? props.comment.markdown : ''\n    };\n  }\n\n  handleCommentChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ textComment: event.target.value });\n  };\n\n  handleCommentClick = () => {\n    if (this.state.textComment.trim().length > 0) {\n      this.props.onComment(this.state.textComment);\n    }\n  };\n\n  handleCancelClick = () => {\n    this.props.toggleComment(false);\n  };\n\n  handleKeyboard = (event: React.KeyboardEvent) => {\n    if (event.keyCode === 13 && (event.metaKey || event.ctrlKey)) {\n      // Ctrl + Enter\n      this.handleCommentClick();\n    } else if ([37, 38, 39, 40].includes(event.keyCode)) {\n      // Arrow keys\n      event.stopPropagation();\n    }\n  };\n\n  render() {\n    const { comment, autoTriggered } = this.props;\n    return (\n      <DropdownOverlay placement={this.props.placement}>\n        <div className=\"issue-comment-bubble-popup\">\n          <div className=\"issue-comment-form-text\">\n            <textarea\n              autoFocus={true}\n              onChange={this.handleCommentChange}\n              onKeyDown={this.handleKeyboard}\n              placeholder={this.props.placeholder}\n              rows={2}\n              value={this.state.textComment}\n            />\n          </div>\n          <div className=\"issue-comment-form-footer\">\n            <div className=\"issue-comment-form-actions\">\n              <Button\n                className=\"js-issue-comment-submit little-spacer-right\"\n                disabled={this.state.textComment.trim().length < 1}\n                onClick={this.handleCommentClick}>\n                {comment && translate('save')}\n                {!comment && translate('issue.comment.submit')}\n              </Button>\n              <ResetButtonLink className=\"js-issue-comment-cancel\" onClick={this.handleCancelClick}>\n                {autoTriggered ? translate('skip') : translate('cancel')}\n              </ResetButtonLink>\n            </div>\n            <div className=\"issue-comment-form-tips\">\n              <MarkdownTips />\n            </div>\n          </div>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { addIssueComment } from '../../../api/issues';\nimport { updateIssue } from '../actions';\nimport CommentPopup from '../popups/CommentPopup';\n\ninterface Props {\n  commentAutoTriggered?: boolean;\n  commentPlaceholder: string;\n  currentPopup?: string;\n  issueKey: string;\n  onChange: (issue: T.Issue) => void;\n  toggleComment: (open?: boolean, placeholder?: string, autoTriggered?: boolean) => void;\n}\n\nexport default class IssueCommentAction extends React.PureComponent<Props> {\n  addComment = (text: string) => {\n    updateIssue(this.props.onChange, addIssueComment({ issue: this.props.issueKey, text }));\n    this.props.toggleComment(false);\n  };\n\n  handleCommentClick = () => {\n    this.props.toggleComment();\n  };\n\n  handleClose = () => {\n    this.props.toggleComment(false);\n  };\n\n  render() {\n    return (\n      <li className=\"issue-meta dropdown\">\n        <Toggler\n          closeOnClickOutside={false}\n          onRequestClose={this.handleClose}\n          open={this.props.currentPopup === 'comment'}\n          overlay={\n            <CommentPopup\n              autoTriggered={this.props.commentAutoTriggered}\n              onComment={this.addComment}\n              placeholder={this.props.commentPlaceholder}\n              toggleComment={this.props.toggleComment}\n            />\n          }>\n          <ButtonLink className=\"issue-action js-issue-comment\" onClick={this.handleCommentClick}>\n            <span className=\"issue-meta-label\">{translate('issue.comment.formlink')}</span>\n          </ButtonLink>\n        </Toggler>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\ntype Props = {\n  issue: Pick<T.Issue, 'severity'>;\n  onSelect: (severity: string) => void;\n};\n\nconst SEVERITY = ['BLOCKER', 'CRITICAL', 'MAJOR', 'MINOR', 'INFO'];\n\nexport default function SetSeverityPopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.severity} items={SEVERITY} onSelect={onSelect}>\n        {SEVERITY.map(severity => (\n          <SelectListItem className=\"display-flex-center\" item={severity} key={severity}>\n            <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n            {translate('severity', severity)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { IssueResponse, setIssueSeverity } from '../../../api/issues';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport SetSeverityPopup from '../popups/SetSeverityPopup';\n\ninterface Props {\n  canSetSeverity: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'severity'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueSeverity extends React.PureComponent<Props> {\n  toggleSetSeverity = (open?: boolean) => {\n    this.props.togglePopup('set-severity', open);\n  };\n\n  setSeverity = (severity: string) => {\n    this.props.setIssueProperty('severity', 'set-severity', setIssueSeverity, severity);\n  };\n\n  handleClose = () => {\n    this.toggleSetSeverity(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetSeverity) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetSeverity}\n            overlay={<SetSeverityPopup issue={issue} onSelect={this.setSeverity} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-set-severity\"\n              onClick={this.toggleSetSeverity}>\n              <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />;\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { difference, without } from 'lodash';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { searchIssueTags } from '../../../api/issues';\nimport TagsSelector from '../../tags/TagsSelector';\n\ninterface Props {\n  organization: string;\n  selectedTags: string[];\n  setTags: (tags: string[]) => void;\n}\n\ninterface State {\n  searchResult: string[];\n}\n\nconst LIST_SIZE = 10;\n\nexport default class SetIssueTagsPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { searchResult: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onSearch = (query: string) => {\n    return searchIssueTags({\n      q: query,\n      ps: Math.min(this.props.selectedTags.length - 1 + LIST_SIZE, 100),\n      organization: this.props.organization\n    }).then(\n      (tags: string[]) => {\n        if (this.mounted) {\n          this.setState({ searchResult: tags });\n        }\n      },\n      () => {}\n    );\n  };\n\n  onSelect = (tag: string) => {\n    this.props.setTags([...this.props.selectedTags, tag]);\n  };\n\n  onUnselect = (tag: string) => {\n    this.props.setTags(without(this.props.selectedTags, tag));\n  };\n\n  render() {\n    const availableTags = difference(this.state.searchResult, this.props.selectedTags);\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <TagsSelector\n          listSize={LIST_SIZE}\n          onSearch={this.onSearch}\n          onSelect={this.onSelect}\n          onUnselect={this.onUnselect}\n          selectedTags={this.props.selectedTags}\n          tags={availableTags}\n        />\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { setIssueTags } from '../../../api/issues';\nimport TagsList from '../../tags/TagsList';\nimport { updateIssue } from '../actions';\nimport SetIssueTagsPopup from '../popups/SetIssueTagsPopup';\n\ninterface Props {\n  canSetTags: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'key' | 'projectOrganization' | 'tags'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTags extends React.PureComponent<Props> {\n  toggleSetTags = (open?: boolean) => {\n    this.props.togglePopup('edit-tags', open);\n  };\n\n  setTags = (tags: string[]) => {\n    const { issue } = this.props;\n    const newIssue = { ...issue, tags };\n    updateIssue(\n      this.props.onChange,\n      setIssueTags({ issue: issue.key, tags: tags.join(',') }),\n      issue as T.Issue,\n      newIssue as T.Issue\n    );\n  };\n\n  handleClose = () => {\n    this.toggleSetTags(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    const { tags = [] } = issue;\n\n    if (this.props.canSetTags) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen}\n            overlay={\n              <SetIssueTagsPopup\n                organization={issue.projectOrganization}\n                selectedTags={tags}\n                setTags={this.setTags}\n              />\n            }>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-edit-tags\"\n              onClick={this.toggleSetTags}>\n              <TagsList\n                allowUpdate={this.props.canSetTags}\n                tags={\n                  issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]\n                }\n              />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <TagsList\n          allowUpdate={this.props.canSetTags}\n          className=\"note\"\n          tags={issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { hasMessage, translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\nexport interface Props {\n  fromHotspot: boolean;\n  onSelect: (transition: string) => void;\n  transitions: string[];\n  type: T.IssueType;\n}\n\nexport default function SetTransitionPopup({ fromHotspot, onSelect, transitions, type }: Props) {\n  const isManualVulnerability = fromHotspot && type === 'VULNERABILITY';\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={transitions[0]} items={transitions} onSelect={onSelect}>\n        {transitions.map(transition => {\n          const [name, description] = translateTransition(transition, isManualVulnerability);\n          return (\n            <SelectListItem item={transition} key={transition} title={description}>\n              {name}\n            </SelectListItem>\n          );\n        })}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n\nfunction translateTransition(transition: string, isManualVulnerability: boolean) {\n  return isManualVulnerability && hasMessage('vulnerability.transition', transition)\n    ? [\n        translate('vulnerability.transition', transition),\n        translate('vulnerability.transition', transition, 'description')\n      ]\n    : [\n        translate('issue.transition', transition),\n        translate('issue.transition', transition, 'description')\n      ];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { setIssueTransition } from '../../../api/issues';\nimport StatusHelper from '../../shared/StatusHelper';\nimport { updateIssue } from '../actions';\nimport SetTransitionPopup from '../popups/SetTransitionPopup';\n\ninterface Props {\n  hasTransitions: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'fromHotspot' | 'key' | 'resolution' | 'status' | 'transitions' | 'type'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTransition extends React.PureComponent<Props> {\n  setTransition = (transition: string) => {\n    updateIssue(\n      this.props.onChange,\n      setIssueTransition({ issue: this.props.issue.key, transition })\n    );\n    this.toggleSetTransition();\n  };\n\n  toggleSetTransition = (open?: boolean) => {\n    this.props.togglePopup('transition', open);\n  };\n\n  handleClose = () => {\n    this.toggleSetTransition(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    if (this.props.hasTransitions) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.hasTransitions}\n            overlay={\n              <SetTransitionPopup\n                fromHotspot={issue.fromHotspot}\n                onSelect={this.setTransition}\n                transitions={issue.transitions}\n                type={issue.type}\n              />\n            }>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-transition\"\n              onClick={this.toggleSetTransition}>\n              <StatusHelper\n                className=\"issue-meta-label\"\n                resolution={issue.resolution}\n                status={issue.status}\n              />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <StatusHelper\n          className=\"issue-meta-label\"\n          resolution={issue.resolution}\n          status={issue.status}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\ninterface Props {\n  issue: Pick<T.Issue, 'type'>;\n  onSelect: (type: T.IssueType) => void;\n}\n\nconst TYPES = ['BUG', 'VULNERABILITY', 'CODE_SMELL'];\n\nexport default function SetTypePopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.type} items={TYPES} onSelect={onSelect}>\n        {TYPES.map(type => (\n          <SelectListItem className=\"display-flex-center\" item={type} key={type}>\n            <IssueTypeIcon className=\"little-spacer-right\" query={type} />\n            {translate('issue.type', type)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { IssueResponse, setIssueType } from '../../../api/issues';\nimport { colors } from '../../../app/theme';\nimport SetTypePopup from '../popups/SetTypePopup';\n\ninterface Props {\n  canSetType: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'type'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueType extends React.PureComponent<Props> {\n  toggleSetType = (open?: boolean) => {\n    this.props.togglePopup('set-type', open);\n  };\n\n  setType = (type: string) => {\n    this.props.setIssueProperty('type', 'set-type', setIssueType, type);\n  };\n\n  handleClose = () => {\n    this.toggleSetType(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetType) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetType}\n            overlay={<SetTypePopup issue={issue} onSelect={this.setType} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-set-type\"\n              onClick={this.toggleSetType}>\n              <IssueTypeIcon\n                className=\"little-spacer-right\"\n                fill={colors.baseFontColor}\n                query={issue.type}\n              />\n              {translate('issue.type', issue.type)}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <span>\n          <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n          {translate('issue.type', issue.type)}\n        </span>\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { IssueResponse } from '../../../api/issues';\nimport { updateIssue } from '../actions';\nimport IssueAssign from './IssueAssign';\nimport IssueCommentAction from './IssueCommentAction';\nimport IssueSeverity from './IssueSeverity';\nimport IssueTags from './IssueTags';\nimport IssueTransition from './IssueTransition';\nimport IssueType from './IssueType';\n\ninterface Props {\n  issue: T.Issue;\n  currentPopup?: string;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\ninterface State {\n  commentAutoTriggered: boolean;\n  commentPlaceholder: string;\n}\n\nexport default class IssueActionsBar extends React.PureComponent<Props, State> {\n  state: State = {\n    commentAutoTriggered: false,\n    commentPlaceholder: ''\n  };\n\n  setIssueProperty = (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => {\n    const { issue } = this.props;\n    if (issue[property] !== value) {\n      const newIssue = { ...issue, [property]: value };\n      updateIssue(\n        this.props.onChange,\n        apiCall({ issue: issue.key, [property]: value }),\n        issue,\n        newIssue\n      );\n    }\n    this.props.togglePopup(popup, false);\n  };\n\n  toggleComment = (open: boolean | undefined, placeholder = '', autoTriggered = false) => {\n    this.setState({\n      commentPlaceholder: placeholder,\n      commentAutoTriggered: autoTriggered\n    });\n    this.props.togglePopup('comment', open);\n  };\n\n  handleTransition = (issue: T.Issue) => {\n    this.props.onChange(issue);\n    if (\n      issue.resolution === 'FALSE-POSITIVE' ||\n      (issue.resolution === 'WONTFIX' && issue.type !== 'SECURITY_HOTSPOT')\n    ) {\n      this.toggleComment(true, translate('issue.comment.explain_why'), true);\n    }\n  };\n\n  render() {\n    const { issue } = this.props;\n    const canAssign = issue.actions.includes('assign');\n    const canComment = issue.actions.includes('comment');\n    const canSetSeverity = issue.actions.includes('set_severity');\n    const canSetType = issue.actions.includes('set_type');\n    const canSetTags = issue.actions.includes('set_tags');\n    const hasTransitions = issue.transitions && issue.transitions.length > 0;\n    const isSecurityHotspot = issue.type === 'SECURITY_HOTSPOT';\n\n    return (\n      <div className=\"issue-actions\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueType\n              canSetType={canSetType}\n              isOpen={this.props.currentPopup === 'set-type' && canSetType}\n              issue={issue}\n              setIssueProperty={this.setIssueProperty}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          {!isSecurityHotspot && (\n            <li className=\"issue-meta\">\n              <IssueSeverity\n                canSetSeverity={canSetSeverity}\n                isOpen={this.props.currentPopup === 'set-severity' && canSetSeverity}\n                issue={issue}\n                setIssueProperty={this.setIssueProperty}\n                togglePopup={this.props.togglePopup}\n              />\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <IssueTransition\n              hasTransitions={hasTransitions}\n              isOpen={this.props.currentPopup === 'transition' && hasTransitions}\n              issue={issue}\n              onChange={this.handleTransition}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          <li className=\"issue-meta\">\n            <IssueAssign\n              canAssign={canAssign}\n              isOpen={this.props.currentPopup === 'assign' && canAssign}\n              issue={issue}\n              onAssign={this.props.onAssign}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          {!isSecurityHotspot && issue.effort && (\n            <li className=\"issue-meta\">\n              <span className=\"issue-meta-label\">\n                {translateWithParameters('issue.x_effort', issue.effort)}\n              </span>\n            </li>\n          )}\n          {canComment && (\n            <IssueCommentAction\n              commentAutoTriggered={this.state.commentAutoTriggered}\n              commentPlaceholder={this.state.commentPlaceholder}\n              currentPopup={this.props.currentPopup}\n              issueKey={issue.key}\n              onChange={this.props.onChange}\n              toggleComment={this.toggleComment}\n            />\n          )}\n        </ul>\n        <ul className=\"list-inline\">\n          <li className=\"issue-meta js-issue-tags\">\n            <IssueTags\n              canSetTags={canSetTags}\n              isOpen={this.props.currentPopup === 'edit-tags' && canSetTags}\n              issue={issue}\n              onChange={this.props.onChange}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  onDelete: () => void;\n}\n\nexport default function CommentDeletePopup({ onDelete }: Props) {\n  return (\n    <DropdownOverlay placement={PopupPlacement.BottomRight}>\n      <div className=\"menu is-container\">\n        <div className=\"spacer-bottom\">{translate('issue.comment.delete_confirm_message')}</div>\n        <Button className=\"button-red\" onClick={onDelete}>\n          {translate('delete')}\n        </Button>\n      </div>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport { DeleteButton, EditButton } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport DateFromNow from '../../intl/DateFromNow';\nimport Avatar from '../../ui/Avatar';\nimport CommentDeletePopup from '../popups/CommentDeletePopup';\nimport CommentPopup from '../popups/CommentPopup';\n\ninterface Props {\n  comment: T.IssueComment;\n  onDelete: (comment: string) => void;\n  onEdit: (comment: string, text: string) => void;\n}\n\ninterface State {\n  openPopup: string;\n}\n\nexport default class IssueCommentLine extends React.PureComponent<Props, State> {\n  state: State = {\n    openPopup: ''\n  };\n\n  handleEdit = (text: string) => {\n    this.props.onEdit(this.props.comment.key, text);\n    this.toggleEditPopup(false);\n  };\n\n  handleDelete = () => {\n    this.props.onDelete(this.props.comment.key);\n    this.toggleDeletePopup(false);\n  };\n\n  togglePopup = (popupName: string, force?: boolean) => {\n    this.setState(prevState => {\n      if (prevState.openPopup !== popupName && force !== false) {\n        return { openPopup: popupName };\n      } else if (prevState.openPopup === popupName && force !== true) {\n        return { openPopup: '' };\n      }\n      return prevState;\n    });\n  };\n\n  toggleDeletePopup = (force?: boolean) => {\n    this.togglePopup('delete', force);\n  };\n\n  toggleEditPopup = (force?: boolean) => {\n    this.togglePopup('edit', force);\n  };\n\n  closePopups = () => {\n    this.setState({ openPopup: '' });\n  };\n\n  render() {\n    const { comment } = this.props;\n    const author = comment.authorName || comment.author;\n    const displayName =\n      comment.authorActive === false && author\n        ? translateWithParameters('user.x_deleted', author)\n        : author;\n    return (\n      <div className=\"issue-comment\">\n        <div className=\"issue-comment-author\" title={displayName}>\n          <Avatar\n            className=\"little-spacer-right\"\n            hash={comment.authorAvatar}\n            name={author}\n            size={16}\n          />\n          {displayName}\n        </div>\n        <div\n          className=\"issue-comment-text markdown\"\n          dangerouslySetInnerHTML={{ __html: sanitize(comment.htmlText) }}\n        />\n        <div className=\"issue-comment-age\">\n          <DateFromNow date={comment.createdAt} />\n        </div>\n        <div className=\"issue-comment-actions\">\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                closeOnClickOutside={false}\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'edit'}\n                overlay={\n                  <CommentPopup\n                    comment={comment}\n                    onComment={this.handleEdit}\n                    placeholder=\"\"\n                    placement={PopupPlacement.BottomRight}\n                    toggleComment={this.toggleEditPopup}\n                  />\n                }>\n                <EditButton\n                  className=\"js-issue-comment-edit button-small\"\n                  onClick={this.toggleEditPopup}\n                />\n              </Toggler>\n            </div>\n          )}\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'delete'}\n                overlay={<CommentDeletePopup onDelete={this.handleDelete} />}>\n                <DeleteButton\n                  className=\"js-issue-comment-delete button-small\"\n                  onClick={this.toggleDeletePopup}\n                />\n              </Toggler>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { getIssueChangelog } from '../../../api/issues';\nimport DateTimeFormatter from '../../intl/DateTimeFormatter';\nimport Avatar from '../../ui/Avatar';\nimport IssueChangelogDiff from '../components/IssueChangelogDiff';\n\ninterface Props {\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n}\n\ninterface State {\n  changelog: T.IssueChangelog[];\n}\n\nexport default class ChangelogPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { changelog: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadChangelog();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadChangelog() {\n    getIssueChangelog(this.props.issue.key).then(\n      ({ changelog }) => {\n        if (this.mounted) {\n          this.setState({ changelog });\n        }\n      },\n      () => {}\n    );\n  }\n\n  render() {\n    const { issue } = this.props;\n    const { author } = issue;\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <div className=\"menu is-container issue-changelog\">\n          <table className=\"spaced\">\n            <tbody>\n              <tr>\n                <td className=\"thin text-left text-top nowrap\">\n                  <DateTimeFormatter date={issue.creationDate} />\n                </td>\n                <td className=\"text-left text-top\">\n                  {author ? `${translate('created_by')} ${author}` : translate('created')}\n                </td>\n              </tr>\n\n              {this.state.changelog.map((item, idx) => {\n                const userName = item.userName || item.user;\n\n                return (\n                  <tr key={idx}>\n                    <td className=\"thin text-left text-top nowrap\">\n                      <DateTimeFormatter date={item.creationDate} />\n                    </td>\n                    <td className=\"text-left text-top\">\n                      {userName && (\n                        <p>\n                          <Avatar\n                            className=\"little-spacer-right\"\n                            hash={item.avatar}\n                            name={userName}\n                            size={16}\n                          />\n                          {item.isUserActive\n                            ? userName\n                            : translateWithParameters('user.x_deleted', userName)}\n                        </p>\n                      )}\n                      {item.diffs.map(diff => (\n                        <IssueChangelogDiff diff={diff} key={diff.key} />\n                      ))}\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport DateFromNow from '../../intl/DateFromNow';\nimport DateTimeFormatter from '../../intl/DateTimeFormatter';\nimport ChangelogPopup from '../popups/ChangelogPopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n  creationDate: string;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueChangelog extends React.PureComponent<Props> {\n  toggleChangelog = (open?: boolean) => {\n    this.props.togglePopup('changelog', open);\n  };\n\n  handleClick = () => {\n    this.toggleChangelog();\n  };\n\n  handleClose = () => {\n    this.toggleChangelog(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<ChangelogPopup issue={this.props.issue} />}>\n          <Tooltip\n            mouseEnterDelay={0.5}\n            overlay={<DateTimeFormatter date={this.props.creationDate} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-show-changelog\"\n              onClick={this.handleClick}>\n              <span className=\"issue-meta-label\">\n                <DateFromNow date={this.props.creationDate} />\n              </span>\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Tooltip>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { WorkspaceContextShape } from '../../workspace/context';\n\nexport interface IssueMessageProps {\n  engine?: string;\n  manualVulnerability: boolean;\n  message: string;\n  onOpenRule: WorkspaceContextShape['openRule'];\n  organization: string;\n  ruleKey: string;\n}\n\nexport default function IssueMessage(props: IssueMessageProps) {\n  const { engine, manualVulnerability, message, organization, ruleKey } = props;\n\n  return (\n    <div className=\"issue-message\">\n      <span className=\"spacer-right\">{message}</span>\n      <ButtonLink\n        aria-label={translate('issue.why_this_issue.long')}\n        className=\"issue-see-rule spacer-right\"\n        onClick={() => props.onOpenRule({ key: ruleKey, organization })}>\n        {translate('issue.why_this_issue')}\n      </ButtonLink>\n\n      {engine && (\n        <Tooltip overlay={translateWithParameters('issue.from_external_rule_engine', engine)}>\n          <div className=\"badge spacer-right text-top\">{engine}</div>\n        </Tooltip>\n      )}\n      {manualVulnerability && (\n        <Tooltip overlay={translate('issue.manual_vulnerability.description')}>\n          <div className=\"badge spacer-right text-top\">\n            {translate('issue.manual_vulnerability')}\n          </div>\n        </Tooltip>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { fileFromPath, limitComponentName } from 'sonar-ui-common/helpers/path';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport StatusHelper from '../../shared/StatusHelper';\nimport Avatar from '../../ui/Avatar';\n\ninterface Props {\n  issue: T.Issue;\n  onFilter: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesPopup extends React.PureComponent<Props> {\n  handleSelect = (property: string) => {\n    this.props.onFilter(property, this.props.issue);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const items = [\n      'type',\n      'severity',\n      'status',\n      'resolution',\n      'assignee',\n      'rule',\n      ...(issue.tags || []).map(tag => `tag###${tag}`),\n      'project',\n      issue.subProject ? 'module' : undefined,\n      'file'\n    ].filter(item => item) as string[];\n\n    const assignee = issue.assigneeName || issue.assignee;\n\n    return (\n      <DropdownOverlay noPadding={true}>\n        <header className=\"menu-search\">\n          <h6>{translate('issue.filter_similar_issues')}</h6>\n        </header>\n\n        <SelectList\n          className=\"issues-similar-issues-menu\"\n          currentItem={items[0]}\n          items={items}\n          onSelect={this.handleSelect}>\n          <SelectListItem className=\"display-flex-center\" item=\"type\">\n            <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n            {translate('issue.type', issue.type)}\n          </SelectListItem>\n\n          <SelectListItem item=\"severity\">\n            <SeverityHelper className=\"display-flex-center\" severity={issue.severity} />\n          </SelectListItem>\n\n          <SelectListItem item=\"status\">\n            <StatusHelper\n              className=\"display-flex-center\"\n              resolution={undefined}\n              status={issue.status}\n            />\n          </SelectListItem>\n\n          <SelectListItem item=\"resolution\">\n            {issue.resolution != null\n              ? translate('issue.resolution', issue.resolution)\n              : translate('unresolved')}\n          </SelectListItem>\n\n          <SelectListItem item=\"assignee\">\n            {assignee ? (\n              <span>\n                {translate('assigned_to')}\n                <Avatar\n                  className=\"little-spacer-left little-spacer-right\"\n                  hash={issue.assigneeAvatar}\n                  name={assignee}\n                  size={16}\n                />\n                {issue.assigneeActive === false\n                  ? translateWithParameters('user.x_deleted', assignee)\n                  : assignee}\n              </span>\n            ) : (\n              translate('unassigned')\n            )}\n          </SelectListItem>\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"rule\">{limitComponentName(issue.ruleName)}</SelectListItem>\n\n          {issue.tags != null &&\n            issue.tags.map(tag => (\n              <SelectListItem item={`tag###${tag}`} key={`tag###${tag}`}>\n                <TagsIcon className=\"icon-half-transparent little-spacer-right text-middle\" />\n                <span className=\"text-middle\">{tag}</span>\n              </SelectListItem>\n            ))}\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"project\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n            {issue.projectName}\n          </SelectListItem>\n\n          {issue.subProject != null && (\n            <SelectListItem item=\"module\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"BRC\" />\n              {issue.subProjectName}\n            </SelectListItem>\n          )}\n\n          <SelectListItem item=\"file\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier={issue.componentQualifier} />\n            {fileFromPath(issue.componentLongName)}\n          </SelectListItem>\n        </SelectList>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport FilterIcon from 'sonar-ui-common/components/icons/FilterIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SimilarIssuesPopup from '../popups/SimilarIssuesPopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: T.Issue;\n  togglePopup: (popup: string, show?: boolean) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesFilter extends React.PureComponent<Props> {\n  handleFilter = (property: string, issue: T.Issue) => {\n    this.togglePopup(false);\n    if (this.props.onFilter) {\n      this.props.onFilter(property, issue);\n    }\n  };\n\n  togglePopup = (open?: boolean) => {\n    this.props.togglePopup('similarIssues', open);\n  };\n\n  handleClose = () => {\n    this.togglePopup(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<SimilarIssuesPopup issue={this.props.issue} onFilter={this.handleFilter} />}>\n          <ButtonLink\n            aria-label={translate('issue.filter_similar_issues')}\n            className=\"issue-action issue-action-with-options js-issue-filter\"\n            onClick={this.togglePopup}\n            title={translate('issue.filter_similar_issues')}>\n            <FilterIcon className=\"icon-half-transparent\" />\n            <DropdownIcon className=\"icon-half-transparent\" />\n          </ButtonLink>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport LinkIcon from 'sonar-ui-common/components/icons/LinkIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { getComponentIssuesUrl } from '../../../helpers/urls';\nimport { BranchLike } from '../../../types/branch-like';\nimport LocationIndex from '../../common/LocationIndex';\nimport { WorkspaceContext } from '../../workspace/context';\nimport IssueChangelog from './IssueChangelog';\nimport IssueMessage from './IssueMessage';\nimport SimilarIssuesFilter from './SimilarIssuesFilter';\n\ninterface Props {\n  branchLike?: BranchLike;\n  currentPopup?: string;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default function IssueTitleBar(props: Props) {\n  const { issue } = props;\n  const hasSimilarIssuesFilter = props.onFilter != null;\n\n  const locationsCount =\n    issue.secondaryLocations.length +\n    issue.flows.reduce((sum, locations) => sum + locations.length, 0);\n\n  const locationsBadge = (\n    <Tooltip\n      overlay={translateWithParameters(\n        'issue.this_issue_involves_x_code_locations',\n        formatMeasure(locationsCount, 'INT')\n      )}>\n      <LocationIndex>{locationsCount}</LocationIndex>\n    </Tooltip>\n  );\n\n  const displayLocations = props.displayLocationsCount && locationsCount > 0;\n\n  const issueUrl = getComponentIssuesUrl(issue.project, {\n    ...getBranchLikeQuery(props.branchLike),\n    issues: issue.key,\n    open: issue.key,\n    types: issue.type === 'SECURITY_HOTSPOT' ? issue.type : undefined\n  });\n\n  return (\n    <div className=\"issue-row\">\n      <WorkspaceContext.Consumer>\n        {({ openRule }) => (\n          <IssueMessage\n            engine={issue.externalRuleEngine}\n            manualVulnerability={issue.fromHotspot && issue.type === 'VULNERABILITY'}\n            message={issue.message}\n            onOpenRule={openRule}\n            organization={issue.organization}\n            ruleKey={issue.rule}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n\n      <div className=\"issue-row-meta\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueChangelog\n              creationDate={issue.creationDate}\n              isOpen={props.currentPopup === 'changelog'}\n              issue={issue}\n              togglePopup={props.togglePopup}\n            />\n          </li>\n          {issue.textRange != null && (\n            <li className=\"issue-meta\">\n              <span className=\"issue-meta-label\" title={translate('line_number')}>\n                L{issue.textRange.endLine}\n              </span>\n            </li>\n          )}\n          {displayLocations && (\n            <li className=\"issue-meta\">\n              {props.displayLocationsLink ? (\n                <Link target=\"_blank\" to={issueUrl}>\n                  {locationsBadge}\n                </Link>\n              ) : (\n                locationsBadge\n              )}\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <Link\n              className=\"js-issue-permalink link-no-underline\"\n              target=\"_blank\"\n              title={translate('permalink')}\n              to={issueUrl}>\n              <LinkIcon />\n            </Link>\n          </li>\n          {hasSimilarIssuesFilter && (\n            <li className=\"issue-meta\">\n              <SimilarIssuesFilter\n                isOpen={props.currentPopup === 'similarIssues'}\n                issue={issue}\n                onFilter={props.onFilter}\n                togglePopup={props.togglePopup}\n              />\n            </li>\n          )}\n        </ul>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { deleteIssueComment, editIssueComment } from '../../api/issues';\nimport { BranchLike } from '../../types/branch-like';\nimport { updateIssue } from './actions';\nimport IssueActionsBar from './components/IssueActionsBar';\nimport IssueCommentLine from './components/IssueCommentLine';\nimport IssueTitleBar from './components/IssueTitleBar';\n\ninterface Props {\n  branchLike?: BranchLike;\n  checked?: boolean;\n  currentPopup?: string;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  selected: boolean;\n  togglePopup: (popup: string, show: boolean | void) => void;\n}\n\nexport default class IssueView extends React.PureComponent<Props> {\n  handleCheck = () => {\n    if (this.props.onCheck) {\n      this.props.onCheck(this.props.issue.key);\n    }\n  };\n\n  handleClick = (event: React.MouseEvent<HTMLDivElement>) => {\n    if (!isClickable(event.target as HTMLElement) && this.props.onClick) {\n      event.preventDefault();\n      this.props.onClick(this.props.issue.key);\n    }\n  };\n\n  editComment = (comment: string, text: string) => {\n    updateIssue(this.props.onChange, editIssueComment({ comment, text }));\n  };\n\n  deleteComment = (comment: string) => {\n    updateIssue(this.props.onChange, deleteIssueComment({ comment }));\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const hasCheckbox = this.props.onCheck != null;\n\n    const issueClass = classNames('issue', {\n      hotspot: issue.type === 'SECURITY_HOTSPOT',\n      'issue-with-checkbox': hasCheckbox,\n      selected: this.props.selected\n    });\n\n    return (\n      <div\n        className={issueClass}\n        data-issue={issue.key}\n        onClick={this.handleClick}\n        role=\"listitem\"\n        tabIndex={0}>\n        <IssueTitleBar\n          branchLike={this.props.branchLike}\n          currentPopup={this.props.currentPopup}\n          displayLocationsCount={this.props.displayLocationsCount}\n          displayLocationsLink={this.props.displayLocationsLink}\n          issue={issue}\n          onFilter={this.props.onFilter}\n          togglePopup={this.props.togglePopup}\n        />\n        <IssueActionsBar\n          currentPopup={this.props.currentPopup}\n          issue={issue}\n          onAssign={this.props.onAssign}\n          onChange={this.props.onChange}\n          togglePopup={this.props.togglePopup}\n        />\n        {issue.comments && issue.comments.length > 0 && (\n          <div className=\"issue-comments\">\n            {issue.comments.map(comment => (\n              <IssueCommentLine\n                comment={comment}\n                key={comment.key}\n                onDelete={this.deleteComment}\n                onEdit={this.editComment}\n              />\n            ))}\n          </div>\n        )}\n        {hasCheckbox && (\n          <>\n            <Checkbox\n              checked={this.props.checked || false}\n              className=\"issue-checkbox-container\"\n              onCheck={this.handleCheck}\n            />\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nfunction isClickable(node: HTMLElement | undefined | null): boolean {\n  if (!node) {\n    return false;\n  }\n  const clickableTags = ['A', 'BUTTON', 'INPUT', 'TEXTAREA'];\n  const tagName = (node.tagName || '').toUpperCase();\n  return clickableTags.includes(tagName) || isClickable(node.parentElement);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as key from 'keymaster';\nimport * as React from 'react';\nimport { setIssueAssignee } from '../../api/issues';\nimport { BranchLike } from '../../types/branch-like';\nimport { updateIssue } from './actions';\nimport './Issue.css';\nimport IssueView from './IssueView';\n\ninterface Props {\n  branchLike?: BranchLike;\n  checked?: boolean;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  onPopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  openPopup?: string;\n  selected: boolean;\n}\n\nexport default class Issue extends React.PureComponent<Props> {\n  static defaultProps = {\n    selected: false\n  };\n\n  componentDidMount() {\n    if (this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUpdate(nextProps: Props) {\n    if (!nextProps.selected && this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!prevProps.selected && this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  bindShortcuts() {\n    key('f', 'issues', () => {\n      this.togglePopup('transition');\n      return false;\n    });\n    key('a', 'issues', () => {\n      this.togglePopup('assign');\n      return false;\n    });\n    key('m', 'issues', () => {\n      if (this.props.issue.actions.includes('assign')) {\n        this.handleAssignement('_me');\n      }\n      return false;\n    });\n    key('i', 'issues', () => {\n      this.togglePopup('set-severity');\n      return false;\n    });\n    key('c', 'issues', () => {\n      this.togglePopup('comment');\n      return false;\n    });\n    key('t', 'issues', () => {\n      this.togglePopup('edit-tags');\n      return false;\n    });\n    key('space', 'issues', () => {\n      if (this.props.onCheck) {\n        this.props.onCheck(this.props.issue.key);\n        return false;\n      }\n      return undefined;\n    });\n  }\n\n  unbindShortcuts() {\n    key.unbind('f', 'issues');\n    key.unbind('a', 'issues');\n    key.unbind('m', 'issues');\n    key.unbind('i', 'issues');\n    key.unbind('c', 'issues');\n    key.unbind('space', 'issues');\n    key.unbind('t', 'issues');\n  }\n\n  togglePopup = (popupName: string, open?: boolean) => {\n    this.props.onPopupToggle(this.props.issue.key, popupName, open);\n  };\n\n  handleAssignement = (login: string) => {\n    const { issue } = this.props;\n    if (issue.assignee !== login) {\n      updateIssue(this.props.onChange, setIssueAssignee({ issue: issue.key, assignee: login }));\n    }\n    this.togglePopup('assign', false);\n  };\n\n  render() {\n    return (\n      <IssueView\n        branchLike={this.props.branchLike}\n        checked={this.props.checked}\n        currentPopup={this.props.openPopup}\n        displayLocationsCount={this.props.displayLocationsCount}\n        displayLocationsLink={this.props.displayLocationsLink}\n        issue={this.props.issue}\n        onAssign={this.handleAssignement}\n        onChange={this.props.onChange}\n        onCheck={this.props.onCheck}\n        onClick={this.props.onClick}\n        onFilter={this.props.onFilter}\n        selected={this.props.selected}\n        togglePopup={this.togglePopup}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ButtonIcon } from 'sonar-ui-common/components/controls/buttons';\nimport { ClipboardIconButton } from 'sonar-ui-common/components/controls/clipboard';\nimport ExpandSnippetIcon from 'sonar-ui-common/components/icons/ExpandSnippetIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { collapsedDirFromPath, fileFromPath } from 'sonar-ui-common/helpers/path';\nimport { getPathUrlAsString } from 'sonar-ui-common/helpers/urls';\nimport { getBranchLikeQuery, isMainBranch } from '../../helpers/branch-like';\nimport { getBranchLikeUrl, getComponentIssuesUrl } from '../../helpers/urls';\nimport { BranchLike } from '../../types/branch-like';\nimport { ComponentQualifier } from '../../types/component';\nimport Favorite from '../controls/Favorite';\nimport './SourceViewerHeaderSlim.css';\n\nexport interface Props {\n  branchLike: BranchLike | undefined;\n  expandable?: boolean;\n  linkToProject?: boolean;\n  loading?: boolean;\n  onExpand?: () => void;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\nexport default function SourceViewerHeaderSlim({\n  branchLike,\n  expandable,\n  linkToProject = true,\n  loading,\n  onExpand,\n  sourceViewerFile\n}: Props) {\n  const {\n    key,\n    measures,\n    path,\n    project,\n    projectName,\n    q,\n    subProject,\n    subProjectName\n  } = sourceViewerFile;\n\n  const projectNameLabel = (\n    <>\n      <QualifierIcon qualifier={ComponentQualifier.Project} /> <span>{projectName}</span>\n    </>\n  );\n\n  return (\n    <div className=\"source-viewer-header-slim display-flex-row display-flex-space-between\">\n      <div className=\"display-flex-center flex-1\">\n        <div>\n          {linkToProject ? (\n            <a\n              className=\"link-with-icon\"\n              href={getPathUrlAsString(getBranchLikeUrl(project, branchLike))}>\n              {projectNameLabel}\n            </a>\n          ) : (\n            projectNameLabel\n          )}\n        </div>\n\n        {subProject !== undefined && (\n          <>\n            <QualifierIcon qualifier={ComponentQualifier.SubProject} />{' '}\n            <span>{subProjectName}</span>\n          </>\n        )}\n\n        <div className=\"spacer-left\">\n          <QualifierIcon qualifier={q} /> <span>{collapsedDirFromPath(path)}</span>\n          <span className=\"component-name-file\">{fileFromPath(path)}</span>\n        </div>\n\n        <div className=\"spacer-left\">\n          <ClipboardIconButton className=\"button-link link-no-underline\" copyValue={path} />\n        </div>\n\n        {sourceViewerFile.canMarkAsFavorite && (!branchLike || isMainBranch(branchLike)) && (\n          <div className=\"nudged-up spacer-left\">\n            <Favorite\n              className=\"component-name-favorite\"\n              component={key}\n              favorite={sourceViewerFile.fav || false}\n              qualifier={sourceViewerFile.q}\n            />\n          </div>\n        )}\n      </div>\n\n      {measures.issues !== undefined && (\n        <div\n          className={classNames('flex-0 big-spacer-left', {\n            'little-spacer-right': !expandable || loading\n          })}>\n          <Link\n            to={getComponentIssuesUrl(project, {\n              ...getBranchLikeQuery(branchLike),\n              fileUuids: sourceViewerFile.uuid,\n              resolved: 'false'\n            })}>\n            {translate('source_viewer.view_all_issues')}\n          </Link>\n        </div>\n      )}\n\n      {expandable && (\n        <DeferredSpinner className=\"little-spacer-right\" loading={loading}>\n          <div className=\"flex-0 big-spacer-left\">\n            <ButtonIcon className=\"js-actions\" onClick={onExpand}>\n              <ExpandSnippetIcon />\n            </ButtonIcon>\n          </div>\n        </DeferredSpinner>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { intersection } from 'lodash';\n\nexport function optimizeHighlightedSymbols(\n  symbolsForLine: string[] = [],\n  highlightedSymbols: string[] = []\n): string[] | undefined {\n  const symbols = intersection(symbolsForLine, highlightedSymbols);\n\n  return symbols.length ? symbols : undefined;\n}\n\nexport function optimizeLocationMessage(\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined,\n  optimizedSecondaryIssueLocations: T.LinearIssueLocation[]\n) {\n  return highlightedLocationMessage != null &&\n    optimizedSecondaryIssueLocations.some(\n      location => location.index === highlightedLocationMessage.index\n    )\n    ? highlightedLocationMessage\n    : undefined;\n}\n\nexport function optimizeSelectedIssue(selectedIssue: string | undefined, issuesForLine: T.Issue[]) {\n  return selectedIssue !== undefined && issuesForLine.find(issue => issue.key === selectedIssue)\n    ? selectedIssue\n    : undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { BranchLike } from '../../../types/branch-like';\nimport Issue from '../../issue/Issue';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  onIssueChange: (issue: T.Issue) => void;\n  onIssueClick: (issueKey: string) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  selectedIssue: string | undefined;\n}\n\nexport default function LineIssuesList(props: Props) {\n  const { issuePopup } = props;\n\n  return (\n    <div className=\"issue-list\">\n      {props.issues.map(issue => (\n        <Issue\n          branchLike={props.branchLike}\n          displayLocationsCount={props.displayIssueLocationsCount}\n          displayLocationsLink={props.displayIssueLocationsLink}\n          issue={issue}\n          key={issue.key}\n          onChange={props.onIssueChange}\n          onClick={props.onIssueClick}\n          onPopupToggle={props.onIssuePopupToggle}\n          openPopup={issuePopup && issuePopup.issue === issue.key ? issuePopup.name : undefined}\n          selected={props.selectedIssue === issue.key}\n        />\n      ))}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { BranchLike } from '../../../types/branch-like';\nimport LocationIndex from '../../common/LocationIndex';\nimport LocationMessage from '../../common/LocationMessage';\nimport {\n  highlightIssueLocations,\n  highlightSymbol,\n  splitByTokens,\n  Token\n} from '../helpers/highlight';\nimport LineIssuesList from './LineIssuesList';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayLocationMarkers?: boolean;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[] | undefined;\n  issueLocations: T.LinearIssueLocation[];\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  line: T.SourceLine;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onLocationSelect: ((index: number) => void) | undefined;\n  onSymbolClick: (symbols: Array<string>) => void;\n  padding?: number;\n  scroll?: (element: HTMLElement) => void;\n  secondaryIssueLocations: T.LinearIssueLocation[];\n  selectedIssue: string | undefined;\n  showIssues?: boolean;\n}\n\ninterface State {\n  tokens: Token[];\n}\n\nexport default class LineCode extends React.PureComponent<Props, State> {\n  activeMarkerNode?: HTMLElement | null;\n  codeNode?: HTMLElement | null;\n  symbols?: NodeListOf<HTMLElement>;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      tokens: splitByTokens(props.line.code || '')\n    };\n  }\n\n  componentDidMount() {\n    this.attachEvents();\n    if (this.props.highlightedLocationMessage && this.activeMarkerNode && this.props.scroll) {\n      this.props.scroll(this.activeMarkerNode);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.line.code !== this.props.line.code) {\n      this.setState({\n        tokens: splitByTokens(nextProps.line.code || '')\n      });\n    }\n  }\n\n  componentWillUpdate() {\n    this.detachEvents();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    this.attachEvents();\n    if (\n      this.props.highlightedLocationMessage &&\n      (!prevProps.highlightedLocationMessage ||\n        prevProps.highlightedLocationMessage.index !==\n          this.props.highlightedLocationMessage.index) &&\n      this.activeMarkerNode &&\n      this.props.scroll\n    ) {\n      this.props.scroll(this.activeMarkerNode);\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachEvents();\n  }\n\n  attachEvents() {\n    if (this.codeNode) {\n      this.symbols = this.codeNode.querySelectorAll('.sym');\n      if (this.symbols) {\n        for (let i = 0; i < this.symbols.length; i++) {\n          const symbol = this.symbols[i];\n          symbol.addEventListener('click', this.handleSymbolClick);\n        }\n      }\n    }\n  }\n\n  detachEvents() {\n    if (this.symbols) {\n      for (let i = 0; i < this.symbols.length; i++) {\n        const symbol = this.symbols[i];\n        symbol.addEventListener('click', this.handleSymbolClick);\n      }\n    }\n  }\n\n  handleSymbolClick = (event: MouseEvent) => {\n    event.preventDefault();\n    const keys = (event.currentTarget as HTMLElement).className.match(/sym-\\d+/g);\n    if (keys && keys.length > 0) {\n      this.props.onSymbolClick(keys);\n    }\n  };\n\n  renderMarker(index: number, message: string | undefined, selected: boolean, leading: boolean) {\n    const { onLocationSelect } = this.props;\n    const onClick = onLocationSelect ? () => onLocationSelect(index) : undefined;\n    const ref = selected ? (node: HTMLElement | null) => (this.activeMarkerNode = node) : undefined;\n    return (\n      <LocationIndex\n        key={`marker-${index}`}\n        leading={leading}\n        onClick={onClick}\n        selected={selected}>\n        <span ref={ref}>{index + 1}</span>\n        {message && <LocationMessage selected={true}>{message}</LocationMessage>}\n      </LocationIndex>\n    );\n  }\n\n  render() {\n    const {\n      highlightedLocationMessage,\n      highlightedSymbols,\n      issues,\n      issueLocations,\n      line,\n      onIssueSelect,\n      padding,\n      secondaryIssueLocations,\n      selectedIssue,\n      showIssues\n    } = this.props;\n\n    let tokens = [...this.state.tokens];\n\n    if (highlightedSymbols) {\n      highlightedSymbols.forEach(symbol => {\n        tokens = highlightSymbol(tokens, symbol);\n      });\n    }\n\n    if (issueLocations.length > 0) {\n      tokens = highlightIssueLocations(tokens, issueLocations);\n    }\n\n    if (secondaryIssueLocations) {\n      tokens = highlightIssueLocations(tokens, secondaryIssueLocations, 'issue-location');\n\n      if (highlightedLocationMessage) {\n        const location = secondaryIssueLocations.find(\n          location => location.index === highlightedLocationMessage.index\n        );\n        if (location) {\n          tokens = highlightIssueLocations(tokens, [location], 'selected');\n        }\n      }\n    }\n\n    const className = classNames('source-line-code', 'code', {\n      'has-issues': issues.length > 0\n    });\n\n    const renderedTokens: React.ReactNode[] = [];\n\n    // track if the first marker is displayed before the source code\n    // set `false` for the first token in a row\n    let leadingMarker = false;\n\n    tokens.forEach((token, index) => {\n      if (this.props.displayLocationMarkers && token.markers.length > 0) {\n        token.markers.forEach(marker => {\n          const selected =\n            highlightedLocationMessage !== undefined && highlightedLocationMessage.index === marker;\n          const loc = secondaryIssueLocations.find(loc => loc.index === marker);\n          const message = loc && loc.text;\n          renderedTokens.push(this.renderMarker(marker, message, selected, leadingMarker));\n        });\n      }\n      renderedTokens.push(\n        <span className={token.className} key={index}>\n          {token.text}\n        </span>\n      );\n\n      // keep leadingMarker truthy if previous token has only whitespaces\n      leadingMarker = (index === 0 ? true : leadingMarker) && !token.text.trim().length;\n    });\n\n    const style = padding ? { paddingBottom: `${padding}px` } : undefined;\n    const filteredSelectedIssues = issues.filter(i => i.key === selectedIssue);\n\n    return (\n      <td className={className} data-line-number={line.line} style={style}>\n        <div className=\"source-line-code-inner\">\n          <pre ref={node => (this.codeNode = node)}>{renderedTokens}</pre>\n        </div>\n        {showIssues && issues.length > 0 && (\n          <LineIssuesList\n            branchLike={this.props.branchLike}\n            displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n            displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n            issuePopup={this.props.issuePopup}\n            issues={issues}\n            onIssueChange={this.props.onIssueChange}\n            onIssueClick={onIssueSelect}\n            onIssuePopupToggle={this.props.onIssuePopupToggle}\n            selectedIssue={selectedIssue}\n          />\n        )}\n        {selectedIssue && !showIssues && (\n          <LineIssuesList\n            branchLike={this.props.branchLike}\n            issuePopup={this.props.issuePopup}\n            issues={filteredSelectedIssues}\n            onIssueChange={this.props.onIssueChange}\n            onIssueClick={onIssueSelect}\n            onIssuePopupToggle={this.props.onIssuePopupToggle}\n            selectedIssue={selectedIssue}\n          />\n        )}\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  line: T.SourceLine;\n}\n\nexport default function LineCoverage({ line }: Props) {\n  const className =\n    'source-meta source-line-coverage' +\n    (line.coverageStatus != null ? ` source-line-${line.coverageStatus}` : '');\n  return (\n    <td className={className} data-line-number={line.line}>\n      <Tooltip overlay={getStatusTooltip(line)} placement=\"right\">\n        <div className=\"source-line-bar\" />\n      </Tooltip>\n    </td>\n  );\n}\n\nfunction getStatusTooltip(line: T.SourceLine) {\n  if (line.coverageStatus === 'uncovered') {\n    if (line.conditions) {\n      return translateWithParameters('source_viewer.tooltip.uncovered.conditions', line.conditions);\n    } else {\n      return translate('source_viewer.tooltip.uncovered');\n    }\n  } else if (line.coverageStatus === 'covered') {\n    if (line.conditions) {\n      return translateWithParameters('source_viewer.tooltip.covered.conditions', line.conditions);\n    } else {\n      return translate('source_viewer.tooltip.covered');\n    }\n  } else if (line.coverageStatus === 'partially-covered') {\n    if (line.conditions) {\n      return translateWithParameters(\n        'source_viewer.tooltip.partially-covered.conditions',\n        line.coveredConditions || 0,\n        line.conditions\n      );\n    } else {\n      return translate('source_viewer.tooltip.partially-covered');\n    }\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  duplicated: boolean;\n  index: number;\n  line: T.SourceLine;\n  onPopupToggle: (linePopup: T.LinePopup) => void;\n  popupOpen: boolean;\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n}\n\nexport default class LineDuplicationBlock extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n    this.props.onPopupToggle({\n      index: this.props.index,\n      line: this.props.line.line,\n      name: 'duplications'\n    });\n  };\n\n  handleTogglePopup = (open: boolean) => {\n    this.props.onPopupToggle({\n      index: this.props.index,\n      line: this.props.line.line,\n      name: 'duplications',\n      open\n    });\n  };\n\n  closePopup = () => {\n    this.handleTogglePopup(false);\n  };\n\n  render() {\n    const { duplicated, index, line, popupOpen } = this.props;\n    const className = classNames('source-meta', 'source-line-duplications-extra', {\n      'source-line-duplicated': duplicated\n    });\n\n    return duplicated ? (\n      <td className={className} data-index={index} data-line-number={line.line}>\n        <Toggler\n          onRequestClose={this.closePopup}\n          open={popupOpen}\n          overlay={this.props.renderDuplicationPopup(index, line.line)}>\n          <Tooltip\n            overlay={popupOpen ? undefined : translate('source_viewer.tooltip.duplicated_block')}\n            placement=\"right\">\n            <div\n              className=\"source-line-bar\"\n              onClick={this.handleClick}\n              role=\"button\"\n              tabIndex={0}\n            />\n          </Tooltip>\n        </Toggler>\n      </td>\n    ) : (\n      <td className={className} data-index={index} data-line-number={line.line}>\n        <div className=\"source-line-bar\" />\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  line: T.SourceLine;\n  onClick: (line: T.SourceLine) => void;\n}\n\nexport default class LineDuplications extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    this.props.onClick(this.props.line);\n  };\n\n  render() {\n    const { line } = this.props;\n    const className = classNames('source-meta', 'source-line-duplications', {\n      'source-line-duplicated': line.duplicated\n    });\n\n    const cell = (\n      <td\n        className={className}\n        onClick={line.duplicated ? this.handleClick : undefined}\n        role={line.duplicated ? 'button' : undefined}\n        tabIndex={line.duplicated ? 0 : undefined}>\n        <div className=\"source-line-bar\" />\n      </td>\n    );\n\n    return line.duplicated ? (\n      <Tooltip overlay={translate('source_viewer.tooltip.duplicated_line')} placement=\"right\">\n        {cell}\n      </Tooltip>\n    ) : (\n      cell\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport IssueIcon from 'sonar-ui-common/components/icons/IssueIcon';\nimport { sortByType } from '../../../helpers/issues';\n\ninterface Props {\n  issues: T.Issue[];\n  line: T.SourceLine;\n  onClick: () => void;\n}\n\nexport default class LineIssuesIndicator extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    this.props.onClick();\n  };\n\n  render() {\n    const { issues, line } = this.props;\n    const hasIssues = issues.length > 0;\n    const className = classNames('source-meta', 'source-line-issues', {\n      'source-line-with-issues': hasIssues\n    });\n    const mostImportantIssue = hasIssues ? sortByType(issues)[0] : null;\n\n    return (\n      <td\n        className={className}\n        data-line-number={line.line}\n        onClick={hasIssues ? this.handleClick : undefined}\n        role={hasIssues ? 'button' : undefined}\n        tabIndex={hasIssues ? 0 : undefined}>\n        {mostImportantIssue != null && <IssueIcon type={mostImportantIssue.type} />}\n        {issues.length > 1 && <span className=\"source-line-issues-counter\">{issues.length}</span>}\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getCodeUrl } from '../../../helpers/urls';\nimport { SourceViewerContext } from '../SourceViewerContext';\n\ninterface Props {\n  line: T.SourceLine;\n}\n\nexport default function LineOptionsPopup({ line }: Props) {\n  return (\n    <SourceViewerContext.Consumer>\n      {({ branchLike, file }) => (\n        <DropdownOverlay placement={PopupPlacement.RightTop}>\n          <div className=\"source-viewer-bubble-popup nowrap\">\n            <Link\n              className=\"js-get-permalink\"\n              onClick={event => {\n                event.stopPropagation();\n              }}\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n              to={getCodeUrl(file.project, branchLike, file.key, line.line)}>\n              {translate('component_viewer.get_permalink')}\n            </Link>\n          </div>\n        </DropdownOverlay>\n      )}\n    </SourceViewerContext.Consumer>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport LineOptionsPopup from './LineOptionsPopup';\n\ninterface Props {\n  line: T.SourceLine;\n  onPopupToggle: (linePopup: T.LinePopup) => void;\n  popupOpen: boolean;\n}\n\nexport default class LineNumber extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'line-number' });\n  };\n\n  handleTogglePopup = (open: boolean) => {\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'line-number', open });\n  };\n\n  closePopup = () => {\n    this.handleTogglePopup(false);\n  };\n\n  render() {\n    const { line, popupOpen } = this.props;\n    const { line: lineNumber } = line;\n    const hasLineNumber = !!lineNumber;\n    return hasLineNumber ? (\n      <td\n        className=\"source-meta source-line-number\"\n        data-line-number={lineNumber}\n        onClick={this.handleClick}\n        // eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role\n        role=\"button\"\n        tabIndex={0}>\n        <Toggler\n          onRequestClose={this.closePopup}\n          open={popupOpen}\n          overlay={<LineOptionsPopup line={line} />}\n        />\n      </td>\n    ) : (\n      <td className=\"source-meta source-line-number\" />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport DateFormatter from '../../intl/DateFormatter';\n\ninterface Props {\n  line: T.SourceLine;\n}\n\nexport default function SCMPopup({ line }: Props) {\n  const hasAuthor = line.scmAuthor !== '';\n  return (\n    <DropdownOverlay placement={PopupPlacement.RightTop}>\n      <div className=\"source-viewer-bubble-popup abs-width-400\">\n        {hasAuthor && <div>{line.scmAuthor}</div>}\n        {line.scmDate && (\n          <div className={classNames({ 'spacer-top': hasAuthor })}>\n            <DateFormatter date={line.scmDate} />\n          </div>\n        )}\n        {line.scmRevision && <div className=\"spacer-top\">{line.scmRevision}</div>}\n      </div>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport SCMPopup from './SCMPopup';\n\ninterface Props {\n  line: T.SourceLine;\n  onPopupToggle: (linePopup: T.LinePopup) => void;\n  popupOpen: boolean;\n  previousLine: T.SourceLine | undefined;\n}\n\nexport default class LineSCM extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'scm' });\n  };\n\n  handleTogglePopup = (open: boolean) => {\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'scm', open });\n  };\n\n  closePopup = () => {\n    this.handleTogglePopup(false);\n  };\n\n  render() {\n    const { line, popupOpen, previousLine } = this.props;\n    const hasPopup = !!line.line;\n    const cell = isSCMChanged(line, previousLine) && (\n      <div className=\"source-line-scm-inner\" data-author={line.scmAuthor || '…'} />\n    );\n    return hasPopup ? (\n      <td\n        className=\"source-meta source-line-scm\"\n        data-line-number={line.line}\n        onClick={this.handleClick}\n        // eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role\n        role=\"button\"\n        tabIndex={0}>\n        <Toggler\n          onRequestClose={this.closePopup}\n          open={popupOpen}\n          overlay={<SCMPopup line={line} />}>\n          {cell}\n        </Toggler>\n      </td>\n    ) : (\n      <td className=\"source-meta source-line-scm\" data-line-number={line.line}>\n        {cell}\n      </td>\n    );\n  }\n}\n\nfunction isSCMChanged(s: T.SourceLine, p: T.SourceLine | undefined) {\n  let changed = true;\n  if (p != null && s.scmRevision != null && p.scmRevision != null) {\n    changed = s.scmRevision !== p.scmRevision || s.scmDate !== p.scmDate;\n  }\n  return changed;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { times } from 'lodash';\nimport * as React from 'react';\nimport { BranchLike } from '../../../types/branch-like';\nimport './Line.css';\nimport LineCode from './LineCode';\nimport LineCoverage from './LineCoverage';\nimport LineDuplicationBlock from './LineDuplicationBlock';\nimport LineDuplications from './LineDuplications';\nimport LineIssuesIndicator from './LineIssuesIndicator';\nimport LineNumber from './LineNumber';\nimport LineSCM from './LineSCM';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayAllIssues?: boolean;\n  displayCoverage: boolean;\n  displayDuplications: boolean;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayIssues: boolean;\n  displayLocationMarkers?: boolean;\n  displaySCM?: boolean;\n  duplications: number[];\n  duplicationsCount: number;\n  highlighted: boolean;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[] | undefined;\n  issueLocations: T.LinearIssueLocation[];\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  last: boolean;\n  line: T.SourceLine;\n  linePopup: T.LinePopup | undefined;\n  loadDuplications: (line: T.SourceLine) => void;\n  onLinePopupToggle: (linePopup: T.LinePopup) => void;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issueKey: string, popupName: string, open?: boolean) => void;\n  onIssuesClose: (line: T.SourceLine) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onIssuesOpen: (line: T.SourceLine) => void;\n  onIssueUnselect: () => void;\n  onLocationSelect: ((x: number) => void) | undefined;\n  onSymbolClick: (symbols: string[]) => void;\n  openIssues: boolean;\n  previousLine: T.SourceLine | undefined;\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n  scroll?: (element: HTMLElement) => void;\n  secondaryIssueLocations: T.LinearIssueLocation[];\n  selectedIssue: string | undefined;\n  verticalBuffer?: number;\n}\n\nconst LINE_HEIGHT = 18;\n\nexport default class Line extends React.PureComponent<Props> {\n  isPopupOpen = (name: string, index?: number) => {\n    const { line, linePopup } = this.props;\n    return (\n      linePopup !== undefined &&\n      linePopup.index === index &&\n      linePopup.line === line.line &&\n      linePopup.name === name\n    );\n  };\n\n  handleIssuesIndicatorClick = () => {\n    if (this.props.openIssues) {\n      this.props.onIssuesClose(this.props.line);\n      this.props.onIssueUnselect();\n    } else {\n      this.props.onIssuesOpen(this.props.line);\n\n      const { issues } = this.props;\n      if (issues.length > 0) {\n        this.props.onIssueSelect(issues[0].key);\n      }\n    }\n  };\n\n  render() {\n    const {\n      displayCoverage,\n      displaySCM = true,\n      duplications,\n      duplicationsCount,\n      issuePopup,\n      line\n    } = this.props;\n    const className = classNames('source-line', {\n      'source-line-highlighted': this.props.highlighted,\n      'source-line-filtered': line.isNew,\n      'source-line-filtered-dark':\n        displayCoverage &&\n        (line.coverageStatus === 'uncovered' || line.coverageStatus === 'partially-covered'),\n      'source-line-last': this.props.last === true\n    });\n\n    const bottomPadding = this.props.verticalBuffer\n      ? this.props.verticalBuffer * LINE_HEIGHT\n      : undefined;\n\n    return (\n      <tr className={className} data-line-number={line.line}>\n        <LineNumber\n          line={line}\n          onPopupToggle={this.props.onLinePopupToggle}\n          popupOpen={this.isPopupOpen('line-number')}\n        />\n\n        {displaySCM && (\n          <LineSCM\n            line={line}\n            onPopupToggle={this.props.onLinePopupToggle}\n            popupOpen={this.isPopupOpen('scm')}\n            previousLine={this.props.previousLine}\n          />\n        )}\n        {this.props.displayIssues && !this.props.displayAllIssues ? (\n          <LineIssuesIndicator\n            issues={this.props.issues}\n            line={line}\n            onClick={this.handleIssuesIndicatorClick}\n          />\n        ) : (\n          <td className=\"source-meta source-line-issues\" />\n        )}\n\n        {this.props.displayDuplications && (\n          <LineDuplications line={line} onClick={this.props.loadDuplications} />\n        )}\n\n        {times(duplicationsCount, index => (\n          <LineDuplicationBlock\n            duplicated={duplications.includes(index)}\n            index={index}\n            key={index}\n            line={this.props.line}\n            onPopupToggle={this.props.onLinePopupToggle}\n            popupOpen={this.isPopupOpen('duplications', index)}\n            renderDuplicationPopup={this.props.renderDuplicationPopup}\n          />\n        ))}\n\n        {this.props.displayCoverage && <LineCoverage line={line} />}\n\n        <LineCode\n          branchLike={this.props.branchLike}\n          displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n          displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n          displayLocationMarkers={this.props.displayLocationMarkers}\n          highlightedLocationMessage={this.props.highlightedLocationMessage}\n          highlightedSymbols={this.props.highlightedSymbols}\n          issueLocations={this.props.issueLocations}\n          issuePopup={issuePopup}\n          issues={this.props.issues}\n          line={line}\n          onIssueChange={this.props.onIssueChange}\n          onIssuePopupToggle={this.props.onIssuePopupToggle}\n          onIssueSelect={this.props.onIssueSelect}\n          onLocationSelect={this.props.onLocationSelect}\n          onSymbolClick={this.props.onSymbolClick}\n          padding={bottomPadding}\n          scroll={this.props.scroll}\n          secondaryIssueLocations={this.props.secondaryIssueLocations}\n          selectedIssue={this.props.selectedIssue}\n          showIssues={this.props.openIssues || this.props.displayAllIssues}\n        />\n      </tr>\n    );\n  }\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./SourceViewerHeaderSlim.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./SourceViewerHeaderSlim.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./SourceViewerHeaderSlim.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".source-viewer-header-slim{padding:4px 10px;border-bottom:1px solid #cdcdcd;background-color:#f3f3f3;align-items:center;min-height:25px}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport ExpandSnippetIcon from 'sonar-ui-common/components/icons/ExpandSnippetIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { scrollHorizontally } from 'sonar-ui-common/helpers/scrolling';\nimport Line from '../../../components/SourceViewer/components/Line';\nimport { symbolsByLine } from '../../../components/SourceViewer/helpers/indexing';\nimport { getSecondaryIssueLocationsForLine } from '../../../components/SourceViewer/helpers/issueLocations';\nimport {\n  optimizeHighlightedSymbols,\n  optimizeLocationMessage,\n  optimizeSelectedIssue\n} from '../../../components/SourceViewer/helpers/lines';\nimport { BranchLike } from '../../../types/branch-like';\nimport './SnippetViewer.css';\nimport { inSnippet, LINES_BELOW_ISSUE } from './utils';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  component: T.SourceViewerFile;\n  displaySCM?: boolean;\n  duplications?: T.Duplication[];\n  duplicationsByLine?: { [line: number]: number[] };\n  expandBlock: (snippetIndex: number, direction: T.ExpandDirection) => Promise<void>;\n  handleCloseIssues: (line: T.SourceLine) => void;\n  handleLinePopupToggle: (line: T.SourceLine) => void;\n  handleOpenIssues: (line: T.SourceLine) => void;\n  handleSymbolClick: (symbols: string[]) => void;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[];\n  index: number;\n  issue: Pick<T.Issue, 'key' | 'textRange' | 'line'>;\n  issuePopup?: { issue: string; name: string };\n  issuesByLine: T.IssuesByLine;\n  last: boolean;\n  linePopup?: T.LinePopup;\n  loadDuplications: (line: T.SourceLine) => void;\n  locations: T.FlowLocation[];\n  locationsByLine: { [line: number]: T.LinearIssueLocation[] };\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onLocationSelect: (index: number) => void;\n  openIssuesByLine: T.Dict<boolean>;\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n  scroll?: (element: HTMLElement, offset?: number) => void;\n  snippet: T.SourceLine[];\n}\n\nconst SCROLL_LEFT_OFFSET = 32;\n\nexport default class SnippetViewer extends React.PureComponent<Props> {\n  snippetNodeRef: React.RefObject<HTMLDivElement>;\n\n  constructor(props: Props) {\n    super(props);\n    this.snippetNodeRef = React.createRef();\n  }\n\n  doScroll = (element: HTMLElement) => {\n    if (this.props.scroll) {\n      this.props.scroll(element);\n    }\n    const parent = this.snippetNodeRef.current as Element;\n\n    if (parent) {\n      scrollHorizontally(element, {\n        leftOffset: SCROLL_LEFT_OFFSET,\n        rightOffset: parent.getBoundingClientRect().width - SCROLL_LEFT_OFFSET,\n        parent\n      });\n    }\n  };\n\n  scrollToLastExpandedRow = () => {\n    if (this.props.scroll) {\n      const snippetNode = this.snippetNodeRef.current as Element;\n      if (!snippetNode) {\n        return;\n      }\n      const rows = snippetNode.querySelectorAll('tr');\n      const lastRow = rows[rows.length - 1];\n      this.props.scroll(lastRow, 100);\n    }\n  };\n\n  expandBlock = (direction: T.ExpandDirection) => () =>\n    this.props.expandBlock(this.props.index, direction).then(() => {\n      if (direction === 'down') {\n        this.scrollToLastExpandedRow();\n      }\n    });\n\n  renderLine({\n    displayDuplications,\n    displaySCM,\n    index,\n    issuesForLine,\n    issueLocations,\n    line,\n    snippet,\n    symbols,\n    verticalBuffer\n  }: {\n    displayDuplications: boolean;\n    displaySCM?: boolean;\n    index: number;\n    issuesForLine: T.Issue[];\n    issueLocations: T.LinearIssueLocation[];\n    line: T.SourceLine;\n    snippet: T.SourceLine[];\n    symbols: string[];\n    verticalBuffer: number;\n  }) {\n    const secondaryIssueLocations = getSecondaryIssueLocationsForLine(line, this.props.locations);\n\n    const { duplications, duplicationsByLine } = this.props;\n    const duplicationsCount = duplications ? duplications.length : 0;\n    const lineDuplications =\n      (duplicationsCount && duplicationsByLine && duplicationsByLine[line.line]) || [];\n\n    const isSinkLine = issuesForLine.some(i => i.key === this.props.issue.key);\n\n    return (\n      <Line\n        branchLike={this.props.branchLike}\n        displayAllIssues={false}\n        displayCoverage={true}\n        displayDuplications={displayDuplications}\n        displayIssues={!isSinkLine || issuesForLine.length > 1}\n        displayLocationMarkers={true}\n        displaySCM={displaySCM}\n        duplications={lineDuplications}\n        duplicationsCount={duplicationsCount}\n        highlighted={false}\n        highlightedLocationMessage={optimizeLocationMessage(\n          this.props.highlightedLocationMessage,\n          secondaryIssueLocations\n        )}\n        highlightedSymbols={optimizeHighlightedSymbols(symbols, this.props.highlightedSymbols)}\n        issueLocations={issueLocations}\n        issuePopup={this.props.issuePopup}\n        issues={issuesForLine}\n        key={line.line}\n        last={false}\n        line={line}\n        linePopup={this.props.linePopup}\n        loadDuplications={this.props.loadDuplications}\n        onIssueChange={this.props.onIssueChange}\n        onIssuePopupToggle={this.props.onIssuePopupToggle}\n        onIssueSelect={() => {}}\n        onIssueUnselect={() => {}}\n        onIssuesClose={this.props.handleCloseIssues}\n        onIssuesOpen={this.props.handleOpenIssues}\n        onLinePopupToggle={this.props.handleLinePopupToggle}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.props.handleSymbolClick}\n        openIssues={this.props.openIssuesByLine[line.line]}\n        previousLine={index > 0 ? snippet[index - 1] : undefined}\n        renderDuplicationPopup={this.props.renderDuplicationPopup}\n        scroll={this.doScroll}\n        secondaryIssueLocations={secondaryIssueLocations}\n        selectedIssue={optimizeSelectedIssue(this.props.issue.key, issuesForLine)}\n        verticalBuffer={verticalBuffer}\n      />\n    );\n  }\n\n  render() {\n    const {\n      component,\n      displaySCM,\n      issue,\n      issuesByLine = {},\n      last,\n      locationsByLine,\n      openIssuesByLine,\n      snippet\n    } = this.props;\n    const lastLine =\n      component.measures && component.measures.lines && parseInt(component.measures.lines, 10);\n\n    const symbols = symbolsByLine(snippet);\n\n    const bottomLine = snippet[snippet.length - 1].line;\n    const issueLine = issue.textRange ? issue.textRange.endLine : issue.line;\n    const lowestVisibleIssue = Math.max(\n      ...Object.keys(issuesByLine)\n        .map(k => parseInt(k, 10))\n        .filter(l => inSnippet(l, snippet) && (l === issueLine || openIssuesByLine[l]))\n    );\n    const verticalBuffer = last\n      ? Math.max(0, LINES_BELOW_ISSUE - (bottomLine - lowestVisibleIssue))\n      : 0;\n\n    const displayDuplications = snippet.some(s => !!s.duplicated);\n\n    return (\n      <div className=\"source-viewer-code snippet\" ref={this.snippetNodeRef}>\n        <div>\n          {snippet[0].line > 1 && (\n            <div className=\"expand-block expand-block-above\">\n              <button\n                aria-label={translate('source_viewer.expand_above')}\n                onClick={this.expandBlock('up')}\n                type=\"button\">\n                <ExpandSnippetIcon />\n              </button>\n            </div>\n          )}\n          <table\n            className={classNames('source-table', {\n              'expand-up': snippet[0].line > 1,\n              'expand-down': !lastLine || snippet[snippet.length - 1].line < lastLine\n            })}>\n            <tbody>\n              {snippet.map((line, index) =>\n                this.renderLine({\n                  displayDuplications,\n                  displaySCM,\n                  index,\n                  issuesForLine: issuesByLine[line.line] || [],\n                  issueLocations: locationsByLine[line.line] || [],\n                  line,\n                  snippet,\n                  symbols: symbols[line.line],\n                  verticalBuffer: index === snippet.length - 1 ? verticalBuffer : 0\n                })\n              )}\n            </tbody>\n          </table>\n          {(!lastLine || snippet[snippet.length - 1].line < lastLine) && (\n            <div className=\"expand-block expand-block-below\">\n              <button\n                aria-label={translate('source_viewer.expand_below')}\n                onClick={this.expandBlock('down')}\n                type=\"button\">\n                <ExpandSnippetIcon />\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","\nvar content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Line.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Line.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Line.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".source-line:hover .source-line-coverage,.source-line:hover .source-line-duplications,.source-line:hover .source-line-duplications-extra,.source-line:hover .source-line-issues,.source-line:hover .source-line-number,.source-line:hover .source-line-scm{border-color:#e9e9e9;background-color:#e9e9e9}.source-line:hover .source-line-code{background-color:#f5f5f5}.source-line-highlighted .source-line-coverage,.source-line-highlighted .source-line-duplications,.source-line-highlighted .source-line-duplications-extra,.source-line-highlighted .source-line-issues,.source-line-highlighted .source-line-number,.source-line-highlighted .source-line-scm,.source-line-highlighted:hover .source-line-coverage,.source-line-highlighted:hover .source-line-duplications,.source-line-highlighted:hover .source-line-duplications-extra,.source-line-highlighted:hover .source-line-issues,.source-line-highlighted:hover .source-line-number,.source-line-highlighted:hover .source-line-scm{border-color:#c4dfec!important;background-color:#c4dfec}.source-line-highlighted .source-line-code,.source-line-highlighted:hover .source-line-code{background-color:#d9edf7}.source-line-filtered .source-line-code{background-color:#fbf3d5!important}.source-line-filtered.source-line-highlighted .source-line-code,.source-line-filtered.source-line-highlighted:hover .source-line-code{background-color:#cdd9c4!important}.source-line-filtered.source-line-filtered-dark .source-line-code{background-color:#f9ebb7!important}.source-line-filtered.source-line-filtered-dark:hover .source-line-code,.source-line-filtered:hover .source-line-code{background-color:#f1e8cb!important}.source-line-last .source-line-code{padding-bottom:160px}.source-viewer pre{height:18px;padding:0}.source-line-number,.source-line-scm,.source-viewer pre{line-height:18px;font-family:Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px}.source-line-code{position:relative;padding:0 10px}.source-line-code pre{float:left}.source-line-code .issue-list{margin-left:-10px;margin-right:-10px}.source-line-code-inner{min-height:18px}.source-line-code-inner:after,.source-line-code-inner:before{display:table;content:\\\"\\\";line-height:0}.source-line-code-inner:after{clear:both}.source-line-code-issue{display:inline-block;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAGCAYAAAAPDoR2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1M0M2Rjk4M0M3QUYxMUUzODkzRUREMUM5OTNDMjY4QSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1M0M2Rjk4NEM3QUYxMUUzODkzRUREMUM5OTNDMjY4QSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjUzQzZGOTgxQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjUzQzZGOTgyQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+bcqJtQAAAEhJREFUeNpi+G+swwDGDAwgbAWlwZiJAQFCgfgwEIfDRaC67ID4NRDnQ2kQnwFZwgFqnANMAQOUYY9sF0wBiCGH5CBkrAgQYACuWi4sSGW8yAAAAABJRU5ErkJggg==);background-repeat:repeat-x;background-size:4px;background-position:bottom}.source-meta{position:relative;vertical-align:top;width:1px;background-clip:padding-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.source-meta:focus{outline:none}.source-meta[role=button]{cursor:pointer}.source-line-number{min-width:18px;padding:0 10px;background-color:#f3f3f3;color:#777;text-align:right}.source-line-number:before{content:attr(data-line-number)}.source-line-issues{position:relative;padding:0 2px;background-color:#f3f3f3;white-space:nowrap}.source-line-with-issues svg{padding-right:2px;vertical-align:middle}.source-line-issues-counter{position:absolute;left:17px;line-height:8px;font-size:8px;z-index:900}.source-line-coverage,.source-line-duplications,.source-line-duplications-extra{background-color:#f3f3f3}.source-duplications-expanded .source-line-duplications,.source-line-duplications-extra{display:none}.source-duplications-expanded .source-line-duplications-extra{display:table-cell}.source-line-scm{padding:0 5px;background-color:#f3f3f3}.source-line-scm-inner{max-width:40px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.source-line-scm-inner:before{content:attr(data-author)}.source-line-bar{width:5px;height:18px}.source-line-bar[role=button]{cursor:pointer}.source-line-bar:focus{outline:none}.source-line-covered{background-color:#b4dd78!important}.source-line-partially-covered,.source-line-uncovered{background-color:#a4030f!important}.source-line-partially-covered{background-image:repeating-linear-gradient(45deg,hsla(0,0%,100%,.5) 4px,transparent 0,transparent 8px,hsla(0,0%,100%,.5) 0,hsla(0,0%,100%,.5) 12px,transparent 0,transparent 16px,hsla(0,0%,100%,.5) 0,hsla(0,0%,100%,.5) 20px)!important}.source-line-duplicated{background-color:#797979!important}\", \"\"]);\n\n","\nvar content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./SnippetViewer.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./SnippetViewer.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./SnippetViewer.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".snippet{margin:8px;border:1px solid #cdcdcd;overflow-x:auto;overflow-y:hidden;transition:max-height .2s}.snippet>div{display:table;width:100%;position:relative;transition:margin-top .2s}.snippet table{width:100%}.expand-block{position:absolute;z-index:2;width:100%}.expand-block>button{background:transparent;box-sizing:border-box;color:#777;height:20px;width:100%;padding:2px;border:0;text-align:left;cursor:pointer}.expand-block>button:active,.expand-block>button:focus,.expand-block>button:hover{color:#236a97;outline:none}.expand-block-above{background:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAAXNSR0IArs4c6QAAADdJREFUCB1dzMEKADAIAlBd1v9/bcc2YgRjHh8qq2qTxCQzsX4wM6y30RARF3sy0Es1SIK7Y64OpCES1W69JS4AAAAASUVORK5CYII=\\\");top:0}.expand-block-below{background:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wQQBjQEQVd5jwAAADhJREFUCNddyTEKADEMA8GVA/7/Z+PGwUp1cGTaYe/tv5lxrLWoKj6SiMzkjZDEG7JtANt0N+ccLrB/KZxXTt7fAAAAAElFTkSuQmCC\\\");bottom:0}.source-table.expand-up{margin-top:20px}.source-table.expand-down{margin-bottom:20px}\", \"\"]);\n\n"],"sourceRoot":""}