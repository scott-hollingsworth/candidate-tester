{"version":3,"sources":["webpack:///../sonar-docs/src/tooltips/quality-profiles/activate-rules-in-built-in-profile.md","webpack:///./src/main/js/apps/quality-profiles/details/ProfileExporters.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ChangeParentForm.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileInheritanceBox.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileInheritance.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfilePermissionsFormSelect.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfilePermissionsForm.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfilePermissionsGroup.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfilePermissionsUser.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfilePermissions.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ChangeProjectsForm.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileProjects.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileRulesDeprecatedWarning.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileRulesRowOfType.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileRulesRowTotal.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileRulesSonarWayComparison.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileRules.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileDetails.tsx","webpack:///./src/main/js/components/docs/DocTooltip.tsx","webpack:///./src/main/js/api/quality-profiles.ts","webpack:///./src/main/js/helpers/markdown.js","webpack:///./src/main/js/api/rules.ts","webpack:///./src/main/js/apps/quality-profiles/components/BuiltInQualityProfileBadge.tsx","webpack:///./src/main/js/apps/quality-profiles/components/ProfileLink.tsx","webpack:///../sonar-docs/src/tooltips/quality-profiles/built-in-quality-profile.md"],"names":["__webpack_require__","r","__webpack_exports__","ProfileExporters_ProfileExporters","index_js_exposed","[object Object]","exporter","profile","this","props","concat","window","baseUrl","Object","quality_profiles","_this$props","exporters","exportersForLanguage","filter","e","languages","includes","language","length","className","l10n","map","index","undefined","data-key","key","href","getExportUrl","rel","target","name","ChangeParentForm_ChangeParentForm","mounted","state","loading","selected","handleSelectChange","option","setState","value","handleFormSubmit","event","preventDefault","parent","profiles","find","p","then","onChange","catch","options","label","sortBy_default","isBuiltIn","submitDisabled","parentKey","Modal_default","a","contentLabel","onRequestClose","onClose","size","id","onSubmit","htmlFor","Select_default","clearable","buttons","disabled","onClick","ProfileInheritanceBox","depth","extendsBuiltIn","organization","_props$displayLink","displayLink","_props$type","type","offset","data-test","style","paddingLeft","ProfileLink","BuiltInQualityProfileBadge","HelpTooltip_default","overlay","activeRuleCount","overridingRuleCount","ProfileInheritance_ProfileInheritance","formOpen","handleChangeParentClick","closeForm","handleParentChange","updateProfiles","loadData","prevProps","ancestors","children","reverse","highlightCurrent","some","actions","edit","ancestor","classnames","child","ProfilePermissionsFormSelect_ProfilePermissionsFormSelect","super","handleSearch","query","onSearch","searchResults","handleInputChange","debounce_default","noResultsText","_objectSpread","getStringValue","autoFocus","filterOptions","identity_default","isLoading","onInputChange","optionRenderer","placeholder","searchable","valueRenderer","isUser","login","Avatar","hash","avatar","GroupIcon_default","ProfilePermissionsForm_ProfilePermissionsForm","submitting","stopSubmitting","handleUserAdd","user","_this$props$profile","qualityProfile","onUserAdd","handleGroupAdd","group","_this$props2","_this$props2$profile","onGroupAdd","q","_this$props3","parameters","Promise","all","_ref","_ref2","_slicedToArray","usersResponse","groupsResponse","users","groups","handleValueChange","header","ProfilePermissionsGroup_ProfilePermissionsGroup","deleteModal","handleDeleteClick","handleDeleteModalClose","handleDelete","onDelete","renderDeleteModal","index_es","defaultMessage","values","onSubmitClick","onCloseClick","lineHeight","SimpleModal_default","ProfilePermissionsUser_ProfilePermissionsUser","ProfilePermissions_ProfilePermissions","addUserForm","handleAddUserButtonClick","handleAddUserFormClose","addedUser","uniqBy_default","handleUserDelete","removedUser","addedGroup","handleGroupDelete","removedGroup","fetchUsersAndGroups","ProfilePermissions_slicedToArray","ChangeProjectsForm_ChangeProjectsForm","fetchProjects","searchParams","page","ps","pageSize","data","prevState","more","projects","results","newSeletedProjects","project","selectedProjects","lastSearchParams","needToReload","projectsTotalCount","paging","total","handleSelect","handleUnselect","without_default","handleCloseClick","renderElement","find_default","SelectList_default","allowBulkSelection","elements","elementsTotalCount","labelAll","labelSelected","labelUnselected","SelectList","All","onSelect","onUnselect","selectedElements","withPaging","ProfileProjects_ProfileProjects","loadingMore","stopLoading","loadMore","handleChangeClick","loadProjects","isDefault","es","to","pathname","QualifierIcon_default","qualifier","ListFooter_default","count","ready","associateProjects","renderDefault","renderProjects","ProfileRulesDeprecatedWarning","urls","qprofile","activeDeprecatedRules","ProfileRulesRowOfType","activeRulesUrl","activation","types","inactiveRulesUrl","inactiveCount","IssueTypeIcon_default","measures","ProfileRulesRowTotal","ProfileRulesSonarWayComparison","url","compareToProfile","sonarway","sonarWayMissingRules","TYPES","ProfileRules_ProfileRules","activatedTotal","activatedByType","keyBy_default","t","val","allByType","compareToSonarWay","loadRules","resolve","rules","facets","loadAllRules","loadActivatedRules","loadProfile","responses","_responses","ProfileRules_slicedToArray","allRules","activatedRules","showProfile","activateMoreUrl","_profile$actions","getRulesCountForType","getRulesTotalForType","copy","DocTooltip","doc","bind","activeDeprecatedRuleCount","missingRuleCount","ProfileDetails","d","react__WEBPACK_IMPORTED_MODULE_0__","sonar_ui_common_components_controls_HelpTooltip__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_controls_HelpTooltip__WEBPACK_IMPORTED_MODULE_1___default","n","sonar_ui_common_components_lazyLoad__WEBPACK_IMPORTED_MODULE_2__","_helpers_markdown__WEBPACK_IMPORTED_MODULE_3__","DocMarkdownBlock","open","close","content","default","document","addEventListener","removeEventListener","childProps","overlayProps","isTooltip","searchQualityProfiles","sonar_ui_common_helpers_request__WEBPACK_IMPORTED_MODULE_2__","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_3__","getQualityProfile","createQualityProfile","restoreQualityProfile","getProfileProjects","getProfileInheritance","setDefaultProfile","_ref3","renameProfile","copyProfile","fromKey","toName","deleteProfile","_ref4","changeProfileParent","_ref5","parentProfile","parentQualityProfile","getQualityProfileBackupUrl","_ref6","queryParams","entries","_ref7","_ref8","encodeURIComponent","join","getQualityProfileExporterUrl","_ref9","_ref10","exporterKey","_ref11","_ref12","getImporters","importers","getExporters","getProfileChangelog","since","_ref13","compareProfiles","leftKey","rightKey","associateProject","_ref14","dissociateProject","_ref15","searchUsers","searchGroups","addUser","removeUser","addGroup","removeGroup","bulkActivateRules","bulkDeactivateRules","activateRule","params","lodash_map__WEBPACK_IMPORTED_MODULE_0___default","sonar_ui_common_helpers_csv__WEBPACK_IMPORTED_MODULE_1__","deactivateRule","getFrontMatterPosition","lines","firstLine","lastLine","i","trim","parseFrontMatter","tokens","split","x","cutConditionalContent","tag","beginning","ending","newContent","start","indexOf","end","substring","console","error","Error","module","exports","getFrontMatter","position","slice","separateFrontMatter","frontmatter","filterContent","regexBase","_require","isSonarCloud","getInstance","contentWithoutStatic","replace","RegExp","getRulesApp","searchRules","takeFacet","getRuleDetails","getRuleTags","createRule","deleteRule","updateRule","sonar_ui_common_helpers_request__WEBPACK_IMPORTED_MODULE_0__","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_1__","response","property","facet","tags","rule","status","reject","classnames__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_2__","_components_docs_DocTooltip__WEBPACK_IMPORTED_MODULE_3__","_ref$tooltip","tooltip","badge","other","_objectWithoutProperties","react_router__WEBPACK_IMPORTED_MODULE_1__","assign","activeClassName","_utils__WEBPACK_IMPORTED_MODULE_2__"],"mappings":"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","file":"js/323.m.5b5f5b0a.chunk.js","sourcesContent":["export default \"This Quality Profile is built in, and cannot be updated manually. If you want to activate more rules, create a new profile that inherits from this one and add rules there.\\n\"","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getQualityProfileExporterUrl } from '../../../api/quality-profiles';\nimport { Exporter, Profile } from '../types';\n\ninterface Props {\n  exporters: Exporter[];\n  organization: string | null;\n  profile: Profile;\n}\n\nexport default class ProfileExporters extends React.PureComponent<Props> {\n  getExportUrl(exporter: Exporter) {\n    const { profile } = this.props;\n    return `${(window as any).baseUrl}${getQualityProfileExporterUrl(exporter, profile)}`;\n  }\n\n  render() {\n    const { exporters, profile } = this.props;\n    const exportersForLanguage = exporters.filter(e => e.languages.includes(profile.language));\n\n    if (exportersForLanguage.length === 0) {\n      return null;\n    }\n\n    return (\n      <div className=\"boxed-group quality-profile-exporters\">\n        <h2>{translate('quality_profiles.exporters')}</h2>\n        <div className=\"boxed-group-inner\">\n          <ul>\n            {exportersForLanguage.map((exporter, index) => (\n              <li\n                className={index > 0 ? 'spacer-top' : undefined}\n                data-key={exporter.key}\n                key={exporter.key}>\n                <a href={this.getExportUrl(exporter)} rel=\"noopener noreferrer\" target=\"_blank\">\n                  {exporter.name}\n                </a>\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { changeProfileParent } from '../../../api/quality-profiles';\nimport { Profile } from '../types';\n\ninterface Props {\n  onChange: () => void;\n  onClose: () => void;\n  profile: Profile;\n  profiles: Profile[];\n}\n\ninterface State {\n  loading: boolean;\n  selected: string | null;\n}\n\nexport default class ChangeParentForm extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    loading: false,\n    selected: null\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleSelectChange = (option: { value: string }) => {\n    this.setState({ selected: option.value });\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n\n    const parent = this.props.profiles.find(p => p.key === this.state.selected);\n\n    this.setState({ loading: true });\n    changeProfileParent(this.props.profile, parent)\n      .then(this.props.onChange)\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      });\n  };\n\n  render() {\n    const { profiles } = this.props;\n\n    const options = [\n      { label: translate('none'), value: '' },\n      ...sortBy(profiles, 'name').map(profile => ({\n        label: profile.isBuiltIn\n          ? `${profile.name} (${translate('quality_profiles.built_in')})`\n          : profile.name,\n        value: profile.key\n      }))\n    ];\n\n    const submitDisabled =\n      this.state.loading ||\n      this.state.selected == null ||\n      this.state.selected === this.props.profile.parentKey;\n\n    return (\n      <Modal\n        contentLabel={translate('quality_profiles.change_parent')}\n        onRequestClose={this.props.onClose}\n        size=\"small\">\n        <form id=\"change-profile-parent-form\" onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-head\">\n            <h2>{translate('quality_profiles.change_parent')}</h2>\n          </div>\n          <div className=\"modal-body\">\n            <div className=\"modal-field\">\n              <label htmlFor=\"change-profile-parent\">\n                {translate('quality_profiles.parent')} <em className=\"mandatory\">*</em>\n              </label>\n              <Select\n                clearable={false}\n                id=\"change-profile-parent\"\n                name=\"parentKey\"\n                onChange={this.handleSelectChange}\n                options={options}\n                value={\n                  this.state.selected != null\n                    ? this.state.selected\n                    : this.props.profile.parentKey || ''\n                }\n              />\n            </div>\n          </div>\n          <div className=\"modal-foot\">\n            {this.state.loading && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={submitDisabled} id=\"change-profile-parent-submit\">\n              {translate('change_verb')}\n            </SubmitButton>\n            <ResetButtonLink id=\"change-profile-parent-cancel\" onClick={this.props.onClose}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </div>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport BuiltInQualityProfileBadge from '../components/BuiltInQualityProfileBadge';\nimport ProfileLink from '../components/ProfileLink';\n\ninterface Props {\n  className?: string;\n  depth: number;\n  displayLink?: boolean;\n  extendsBuiltIn?: boolean;\n  language: string;\n  organization: string | null;\n  profile: T.ProfileInheritanceDetails;\n  type?: string;\n}\n\nexport default function ProfileInheritanceBox(props: Props) {\n  const {\n    className,\n    depth,\n    extendsBuiltIn,\n    language,\n    organization,\n    profile,\n    displayLink = true,\n    type = 'current'\n  } = props;\n  const offset = 25 * depth;\n\n  return (\n    <tr className={className} data-test={`quality-profiles__inheritance-${type}`}>\n      <td>\n        <div style={{ paddingLeft: offset }}>\n          {displayLink ? (\n            <ProfileLink\n              className=\"text-middle\"\n              language={language}\n              name={profile.name}\n              organization={organization}>\n              {profile.name}\n            </ProfileLink>\n          ) : (\n            <span className=\"text-middle\">{profile.name}</span>\n          )}\n          {profile.isBuiltIn && <BuiltInQualityProfileBadge className=\"spacer-left\" />}\n          {extendsBuiltIn && (\n            <HelpTooltip\n              className=\"spacer-left\"\n              overlay={translate('quality_profiles.extends_built_in')}\n            />\n          )}\n        </div>\n      </td>\n\n      <td>{translateWithParameters('quality_profile.x_active_rules', profile.activeRuleCount)}</td>\n\n      <td>\n        {profile.overridingRuleCount != null && (\n          <p>\n            {translateWithParameters(\n              'quality_profiles.x_overridden_rules',\n              profile.overridingRuleCount\n            )}\n          </p>\n        )}\n      </td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getProfileInheritance } from '../../../api/quality-profiles';\nimport { Profile } from '../types';\nimport ChangeParentForm from './ChangeParentForm';\nimport ProfileInheritanceBox from './ProfileInheritanceBox';\n\ninterface Props {\n  organization: string | null;\n  profile: Profile;\n  profiles: Profile[];\n  updateProfiles: () => Promise<void>;\n}\n\ninterface State {\n  ancestors?: T.ProfileInheritanceDetails[];\n  children?: T.ProfileInheritanceDetails[];\n  formOpen: boolean;\n  loading: boolean;\n  profile?: T.ProfileInheritanceDetails;\n}\n\nexport default class ProfileInheritance extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  state: State = {\n    formOpen: false,\n    loading: true\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadData();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.profile.key !== this.props.profile.key) {\n      this.loadData();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadData() {\n    getProfileInheritance(this.props.profile).then(\n      r => {\n        if (this.mounted) {\n          const { ancestors, children } = r;\n          ancestors.reverse();\n\n          this.setState({\n            children,\n            ancestors,\n            profile: r.profile,\n            loading: false\n          });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  handleChangeParentClick = () => {\n    this.setState({ formOpen: true });\n  };\n\n  closeForm = () => {\n    this.setState({ formOpen: false });\n  };\n\n  handleParentChange = () => {\n    this.props.updateProfiles().then(\n      () => {\n        this.loadData();\n      },\n      () => {}\n    );\n    this.closeForm();\n  };\n\n  render() {\n    const { profile, profiles } = this.props;\n    const { ancestors } = this.state;\n\n    const highlightCurrent =\n      !this.state.loading &&\n      ancestors != null &&\n      this.state.children != null &&\n      (ancestors.length > 0 || this.state.children.length > 0);\n\n    const extendsBuiltIn = ancestors != null && ancestors.some(profile => profile.isBuiltIn);\n\n    return (\n      <div className=\"boxed-group quality-profile-inheritance\">\n        {profile.actions && profile.actions.edit && !profile.isBuiltIn && (\n          <div className=\"boxed-group-actions\">\n            <Button className=\"pull-right js-change-parent\" onClick={this.handleChangeParentClick}>\n              {translate('quality_profiles.change_parent')}\n            </Button>\n          </div>\n        )}\n\n        <header className=\"boxed-group-header\">\n          <h2>{translate('quality_profiles.profile_inheritance')}</h2>\n        </header>\n\n        <div className=\"boxed-group-inner\">\n          {this.state.loading ? (\n            <i className=\"spinner\" />\n          ) : (\n            <table className=\"data zebra\">\n              <tbody>\n                {ancestors != null &&\n                  ancestors.map((ancestor, index) => (\n                    <ProfileInheritanceBox\n                      depth={index}\n                      key={ancestor.key}\n                      language={profile.language}\n                      organization={this.props.organization}\n                      profile={ancestor}\n                      type=\"ancestor\"\n                    />\n                  ))}\n\n                {this.state.profile != null && (\n                  <ProfileInheritanceBox\n                    className={classNames({\n                      selected: highlightCurrent\n                    })}\n                    depth={ancestors ? ancestors.length : 0}\n                    displayLink={false}\n                    extendsBuiltIn={extendsBuiltIn}\n                    language={profile.language}\n                    organization={this.props.organization}\n                    profile={this.state.profile}\n                  />\n                )}\n\n                {this.state.children != null &&\n                  this.state.children.map(child => (\n                    <ProfileInheritanceBox\n                      depth={ancestors ? ancestors.length + 1 : 0}\n                      key={child.key}\n                      language={profile.language}\n                      organization={this.props.organization}\n                      profile={child}\n                      type=\"child\"\n                    />\n                  ))}\n              </tbody>\n            </table>\n          )}\n        </div>\n\n        {this.state.formOpen && (\n          <ChangeParentForm\n            onChange={this.handleParentChange}\n            onClose={this.closeForm}\n            profile={profile}\n            profiles={profiles.filter(p => p !== profile && p.language === profile.language)}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce, identity } from 'lodash';\nimport * as React from 'react';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport GroupIcon from 'sonar-ui-common/components/icons/GroupIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../../components/ui/Avatar';\nimport { Group } from './ProfilePermissions';\n\ntype Option = T.UserSelected | Group;\ntype OptionWithValue = Option & { value: string };\n\ninterface Props {\n  onChange: (option: OptionWithValue) => void;\n  onSearch: (query: string) => Promise<Option[]>;\n  selected?: Option;\n}\n\ninterface State {\n  loading: boolean;\n  query: string;\n  searchResults: Option[];\n}\n\nexport default class ProfilePermissionsFormSelect extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.handleSearch = debounce(this.handleSearch, 250);\n    this.state = { loading: false, query: '', searchResults: [] };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.handleSearch(this.state.query);\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleSearch = (query: string) => {\n    this.setState({ loading: true });\n    this.props.onSearch(query).then(\n      searchResults => {\n        if (this.mounted) {\n          this.setState({ loading: false, searchResults });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleInputChange = (query: string) => {\n    this.setState({ query });\n    if (query.length > 1) {\n      this.handleSearch(query);\n    }\n  };\n\n  render() {\n    const noResultsText =\n      this.state.query.length === 1\n        ? translateWithParameters('select2.tooShort', 2)\n        : translate('no_results');\n\n    // create a uniq string both for users and groups\n    const options = this.state.searchResults.map(r => ({ ...r, value: getStringValue(r) }));\n\n    return (\n      <Select\n        autoFocus={true}\n        className=\"Select-big\"\n        clearable={false}\n        // disable default react-select filtering\n        filterOptions={identity}\n        isLoading={this.state.loading}\n        noResultsText={noResultsText}\n        onChange={this.props.onChange}\n        onInputChange={this.handleInputChange}\n        optionRenderer={optionRenderer}\n        options={options}\n        placeholder=\"\"\n        searchable={true}\n        value={this.props.selected && getStringValue(this.props.selected)}\n        valueRenderer={optionRenderer}\n      />\n    );\n  }\n}\n\nfunction isUser(option: Option): option is T.UserSelected {\n  return (option as T.UserSelected).login !== undefined;\n}\n\nfunction getStringValue(option: Option) {\n  return isUser(option) ? `user:${option.login}` : `group:${option.name}`;\n}\n\nfunction optionRenderer(option: OptionWithValue) {\n  return isUser(option) ? (\n    <>\n      <Avatar hash={option.avatar} name={option.name} size={16} />\n      <strong className=\"spacer-left\">{option.name}</strong>\n      <span className=\"note little-spacer-left\">{option.login}</span>\n    </>\n  ) : (\n    <>\n      <GroupIcon size={16} />\n      <strong className=\"spacer-left\">{option.name}</strong>\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  addGroup,\n  addUser,\n  searchGroups,\n  searchUsers,\n  SearchUsersGroupsParameters\n} from '../../../api/quality-profiles';\nimport { Group } from './ProfilePermissions';\nimport ProfilePermissionsFormSelect from './ProfilePermissionsFormSelect';\n\ninterface Props {\n  onClose: () => void;\n  onGroupAdd: (group: Group) => void;\n  onUserAdd: (user: T.UserSelected) => void;\n  organization?: string;\n  profile: { language: string; name: string };\n}\n\ninterface State {\n  selected?: T.UserSelected | Group;\n  submitting: boolean;\n}\n\nexport default class ProfilePermissionsForm extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { submitting: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopSubmitting = () => {\n    if (this.mounted) {\n      this.setState({ submitting: false });\n    }\n  };\n\n  handleUserAdd = (user: T.UserSelected) => {\n    const {\n      profile: { language, name },\n      organization\n    } = this.props;\n    addUser({\n      language,\n      login: user.login,\n      organization,\n      qualityProfile: name\n    }).then(() => this.props.onUserAdd(user), this.stopSubmitting);\n  };\n\n  handleGroupAdd = (group: Group) => {\n    const {\n      profile: { language, name },\n      organization\n    } = this.props;\n    addGroup({\n      group: group.name,\n      language,\n      organization,\n      qualityProfile: name\n    }).then(() => this.props.onGroupAdd(group), this.stopSubmitting);\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    const { selected } = this.state;\n    if (selected) {\n      this.setState({ submitting: true });\n      if ((selected as T.UserSelected).login !== undefined) {\n        this.handleUserAdd(selected as T.UserSelected);\n      } else {\n        this.handleGroupAdd(selected as Group);\n      }\n    }\n  };\n\n  handleSearch = (q: string) => {\n    const { organization, profile } = this.props;\n    const parameters: SearchUsersGroupsParameters = {\n      language: profile.language,\n      organization,\n      q,\n      qualityProfile: profile.name,\n      selected: 'deselected'\n    };\n    return Promise.all([\n      searchUsers(parameters),\n      searchGroups(parameters)\n    ]).then(([usersResponse, groupsResponse]) => [\n      ...usersResponse.users,\n      ...groupsResponse.groups\n    ]);\n  };\n\n  handleValueChange = (selected: T.UserSelected | Group) => {\n    this.setState({ selected });\n  };\n\n  render() {\n    const header = translate('quality_profiles.grant_permissions_to_user_or_group');\n    const submitDisabled = !this.state.selected || this.state.submitting;\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n        <form onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-body\">\n            <div className=\"modal-field\">\n              <label>{translate('quality_profiles.search_description')}</label>\n              <ProfilePermissionsFormSelect\n                onChange={this.handleValueChange}\n                onSearch={this.handleSearch}\n                selected={this.state.selected}\n              />\n            </div>\n          </div>\n          <footer className=\"modal-foot\">\n            {this.state.submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={submitDisabled}>{translate('add_verb')}</SubmitButton>\n            <ResetButtonLink onClick={this.props.onClose}>{translate('cancel')}</ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Button, DeleteButton, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport SimpleModal, { ChildrenProps } from 'sonar-ui-common/components/controls/SimpleModal';\nimport GroupIcon from 'sonar-ui-common/components/icons/GroupIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { removeGroup } from '../../../api/quality-profiles';\nimport { Group } from './ProfilePermissions';\n\ninterface Props {\n  group: Group;\n  onDelete: (group: Group) => void;\n  organization?: string;\n  profile: { language: string; name: string };\n}\n\ninterface State {\n  deleteModal: boolean;\n}\n\nexport default class ProfilePermissionsGroup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { deleteModal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleDeleteClick = () => {\n    this.setState({ deleteModal: true });\n  };\n\n  handleDeleteModalClose = () => {\n    if (this.mounted) {\n      this.setState({ deleteModal: false });\n    }\n  };\n\n  handleDelete = () => {\n    const { group, organization, profile } = this.props;\n\n    return removeGroup({\n      group: group.name,\n      language: profile.language,\n      organization,\n      qualityProfile: profile.name\n    }).then(() => {\n      this.handleDeleteModalClose();\n      this.props.onDelete(group);\n    });\n  };\n\n  renderDeleteModal = (props: ChildrenProps) => (\n    <div>\n      <header className=\"modal-head\">\n        <h2>{translate('groups.remove')}</h2>\n      </header>\n\n      <div className=\"modal-body\">\n        <FormattedMessage\n          defaultMessage={translate('groups.remove.confirmation')}\n          id=\"groups.remove.confirmation\"\n          values={{\n            user: <strong>{this.props.group.name}</strong>\n          }}\n        />\n      </div>\n\n      <footer className=\"modal-foot\">\n        {props.submitting && <i className=\"spinner spacer-right\" />}\n        <Button className=\"button-red\" disabled={props.submitting} onClick={props.onSubmitClick}>\n          {translate('remove')}\n        </Button>\n        <ResetButtonLink onClick={props.onCloseClick}>{translate('cancel')}</ResetButtonLink>\n      </footer>\n    </div>\n  );\n\n  render() {\n    const { group } = this.props;\n\n    return (\n      <div className=\"clearfix big-spacer-bottom\">\n        <DeleteButton\n          className=\"pull-right spacer-top spacer-left spacer-right button-small\"\n          onClick={this.handleDeleteClick}\n        />\n        <GroupIcon className=\"pull-left spacer-right\" size={32} />\n        <div className=\"overflow-hidden\" style={{ lineHeight: '32px' }}>\n          <strong>{group.name}</strong>\n        </div>\n\n        {this.state.deleteModal && (\n          <SimpleModal\n            header={translate('group.remove')}\n            onClose={this.handleDeleteModalClose}\n            onSubmit={this.handleDelete}>\n            {this.renderDeleteModal}\n          </SimpleModal>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport {\n  DeleteButton,\n  ResetButtonLink,\n  SubmitButton\n} from 'sonar-ui-common/components/controls/buttons';\nimport SimpleModal, { ChildrenProps } from 'sonar-ui-common/components/controls/SimpleModal';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { removeUser } from '../../../api/quality-profiles';\nimport Avatar from '../../../components/ui/Avatar';\n\ninterface Props {\n  onDelete: (user: T.UserSelected) => void;\n  organization?: string;\n  profile: { language: string; name: string };\n  user: T.UserSelected;\n}\n\ninterface State {\n  deleteModal: boolean;\n}\n\nexport default class ProfilePermissionsUser extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { deleteModal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleDeleteClick = () => {\n    this.setState({ deleteModal: true });\n  };\n\n  handleDeleteModalClose = () => {\n    if (this.mounted) {\n      this.setState({ deleteModal: false });\n    }\n  };\n\n  handleDelete = () => {\n    const { organization, profile, user } = this.props;\n\n    return removeUser({\n      language: profile.language,\n      login: user.login,\n      organization,\n      qualityProfile: profile.name\n    }).then(() => {\n      this.handleDeleteModalClose();\n      this.props.onDelete(user);\n    });\n  };\n\n  renderDeleteModal = (props: ChildrenProps) => (\n    <div>\n      <header className=\"modal-head\">\n        <h2>{translate('users.remove')}</h2>\n      </header>\n\n      <div className=\"modal-body\">\n        <FormattedMessage\n          defaultMessage={translate('users.remove.confirmation')}\n          id=\"users.remove.confirmation\"\n          values={{\n            user: <strong>{this.props.user.name}</strong>\n          }}\n        />\n      </div>\n\n      <footer className=\"modal-foot\">\n        {props.submitting && <i className=\"spinner spacer-right\" />}\n        <SubmitButton\n          className=\"button-red\"\n          disabled={props.submitting}\n          onClick={props.onSubmitClick}>\n          {translate('remove')}\n        </SubmitButton>\n        <ResetButtonLink onClick={props.onCloseClick}>{translate('cancel')}</ResetButtonLink>\n      </footer>\n    </div>\n  );\n\n  render() {\n    const { user } = this.props;\n\n    return (\n      <div className=\"clearfix big-spacer-bottom\">\n        <DeleteButton\n          className=\"pull-right spacer-top spacer-left spacer-right button-small\"\n          onClick={this.handleDeleteClick}\n        />\n        <Avatar className=\"pull-left spacer-right\" hash={user.avatar} name={user.name} size={32} />\n        <div className=\"overflow-hidden\">\n          <strong>{user.name}</strong>\n          <div className=\"note\">{user.login}</div>\n        </div>\n\n        {this.state.deleteModal && (\n          <SimpleModal\n            header={translate('users.remove')}\n            onClose={this.handleDeleteModalClose}\n            onSubmit={this.handleDelete}>\n            {this.renderDeleteModal}\n          </SimpleModal>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy, uniqBy } from 'lodash';\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  searchGroups,\n  searchUsers,\n  SearchUsersGroupsParameters\n} from '../../../api/quality-profiles';\nimport { Profile } from '../types';\nimport ProfilePermissionsForm from './ProfilePermissionsForm';\nimport ProfilePermissionsGroup from './ProfilePermissionsGroup';\nimport ProfilePermissionsUser from './ProfilePermissionsUser';\n\nexport interface Group {\n  name: string;\n}\n\ninterface Props {\n  organization?: string;\n  profile: Pick<Profile, 'key' | 'language' | 'name'>;\n}\n\ninterface State {\n  addUserForm: boolean;\n  groups?: Group[];\n  loading: boolean;\n  users?: T.UserSelected[];\n}\n\nexport default class ProfilePermissions extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { addUserForm: false, loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchUsersAndGroups();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.organization !== this.props.organization ||\n      prevProps.profile.key !== this.props.profile.key\n    ) {\n      this.fetchUsersAndGroups();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchUsersAndGroups() {\n    this.setState({ loading: true });\n    const { organization, profile } = this.props;\n    const parameters: SearchUsersGroupsParameters = {\n      language: profile.language,\n      organization,\n      qualityProfile: profile.name,\n      selected: 'selected'\n    };\n    Promise.all([searchUsers(parameters), searchGroups(parameters)]).then(\n      ([usersResponse, groupsResponse]) => {\n        if (this.mounted) {\n          this.setState({\n            groups: groupsResponse.groups,\n            loading: false,\n            users: usersResponse.users\n          });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  handleAddUserButtonClick = () => {\n    this.setState({ addUserForm: true });\n  };\n\n  handleAddUserFormClose = () => {\n    if (this.mounted) {\n      this.setState({ addUserForm: false });\n    }\n  };\n\n  handleUserAdd = (addedUser: T.UserSelected) => {\n    if (this.mounted) {\n      this.setState((state: State) => ({\n        addUserForm: false,\n        users: state.users && uniqBy([...state.users, addedUser], user => user.login)\n      }));\n    }\n  };\n\n  handleUserDelete = (removedUser: T.UserSelected) => {\n    if (this.mounted) {\n      this.setState((state: State) => ({\n        users: state.users && state.users.filter(user => user !== removedUser)\n      }));\n    }\n  };\n\n  handleGroupAdd = (addedGroup: T.Group) => {\n    if (this.mounted) {\n      this.setState((state: State) => ({\n        addUserForm: false,\n        groups: state.groups && uniqBy([...state.groups, addedGroup], group => group.name)\n      }));\n    }\n  };\n\n  handleGroupDelete = (removedGroup: T.Group) => {\n    if (this.mounted) {\n      this.setState((state: State) => ({\n        groups: state.groups && state.groups.filter(group => group !== removedGroup)\n      }));\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"boxed-group\">\n        <h2>{translate('permissions.page')}</h2>\n        <div className=\"boxed-group-inner\">\n          <p className=\"note\">{translate('quality_profiles.default_permissions')}</p>\n\n          {this.state.loading ? (\n            <div className=\"big-spacer-top\">\n              <i className=\"spinner\" />\n            </div>\n          ) : (\n            <div className=\"big-spacer-top\">\n              {this.state.users &&\n                sortBy(this.state.users, 'name').map(user => (\n                  <ProfilePermissionsUser\n                    key={user.login}\n                    onDelete={this.handleUserDelete}\n                    organization={this.props.organization}\n                    profile={this.props.profile}\n                    user={user}\n                  />\n                ))}\n              {this.state.groups &&\n                sortBy(this.state.groups, 'name').map(group => (\n                  <ProfilePermissionsGroup\n                    group={group}\n                    key={group.name}\n                    onDelete={this.handleGroupDelete}\n                    organization={this.props.organization}\n                    profile={this.props.profile}\n                  />\n                ))}\n              <div className=\"text-right\">\n                <Button onClick={this.handleAddUserButtonClick}>\n                  {translate('quality_profiles.grant_permissions_to_more_users')}\n                </Button>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {this.state.addUserForm && (\n          <ProfilePermissionsForm\n            onClose={this.handleAddUserFormClose}\n            onGroupAdd={this.handleGroupAdd}\n            onUserAdd={this.handleUserAdd}\n            organization={this.props.organization}\n            profile={this.props.profile}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { find, without } from 'lodash';\nimport * as React from 'react';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport SelectList, {\n  SelectListFilter,\n  SelectListSearchParams\n} from 'sonar-ui-common/components/controls/SelectList';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  associateProject,\n  dissociateProject,\n  getProfileProjects,\n  ProfileProject\n} from '../../../api/quality-profiles';\nimport { Profile } from '../types';\n\ninterface Props {\n  onClose: () => void;\n  organization: string | null;\n  profile: Profile;\n}\n\ninterface State {\n  needToReload: boolean;\n  lastSearchParams?: SelectListSearchParams;\n  projects: ProfileProject[];\n  projectsTotalCount?: number;\n  selectedProjects: string[];\n}\n\nexport default class ChangeProjectsForm extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      needToReload: false,\n      projects: [],\n      selectedProjects: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchProjects = (searchParams: SelectListSearchParams) =>\n    getProfileProjects({\n      key: this.props.profile.key,\n      organization: this.props.organization,\n      p: searchParams.page,\n      ps: searchParams.pageSize,\n      q: searchParams.query !== '' ? searchParams.query : undefined,\n      selected: searchParams.filter\n    }).then(data => {\n      if (this.mounted) {\n        this.setState(prevState => {\n          const more = searchParams.page != null && searchParams.page > 1;\n\n          const projects = more ? [...prevState.projects, ...data.results] : data.results;\n          const newSeletedProjects = data.results\n            .filter(project => project.selected)\n            .map(project => project.key);\n          const selectedProjects = more\n            ? [...prevState.selectedProjects, ...newSeletedProjects]\n            : newSeletedProjects;\n\n          return {\n            lastSearchParams: searchParams,\n            needToReload: false,\n            projects,\n            projectsTotalCount: data.paging.total,\n            selectedProjects\n          };\n        });\n      }\n    });\n\n  handleSelect = (key: string) =>\n    associateProject(this.props.profile, key).then(() => {\n      if (this.mounted) {\n        this.setState((state: State) => ({\n          needToReload: true,\n          selectedProjects: [...state.selectedProjects, key]\n        }));\n      }\n    });\n\n  handleUnselect = (key: string) =>\n    dissociateProject(this.props.profile, key).then(() => {\n      if (this.mounted) {\n        this.setState((state: State) => ({\n          needToReload: true,\n          selectedProjects: without(state.selectedProjects, key)\n        }));\n      }\n    });\n\n  handleCloseClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    event.preventDefault();\n    this.props.onClose();\n  };\n\n  renderElement = (key: string): React.ReactNode => {\n    const project = find(this.state.projects, { key });\n    return (\n      <div className=\"select-list-list-item\">\n        {project === undefined ? (\n          key\n        ) : (\n          <>\n            {project.name}\n            <br />\n            <span className=\"note\">{project.key}</span>\n          </>\n        )}\n      </div>\n    );\n  };\n\n  render() {\n    const header = translate('projects');\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <div className=\"modal-head\">\n          <h2>{header}</h2>\n        </div>\n\n        <div className=\"modal-body modal-container\" id=\"profile-projects\">\n          <SelectList\n            allowBulkSelection={true}\n            elements={this.state.projects.map(project => project.key)}\n            elementsTotalCount={this.state.projectsTotalCount}\n            labelAll={translate('quality_gates.projects.all')}\n            labelSelected={translate('quality_gates.projects.with')}\n            labelUnselected={translate('quality_gates.projects.without')}\n            needToReload={\n              this.state.needToReload &&\n              this.state.lastSearchParams &&\n              this.state.lastSearchParams.filter !== SelectListFilter.All\n            }\n            onSearch={this.fetchProjects}\n            onSelect={this.handleSelect}\n            onUnselect={this.handleUnselect}\n            renderElement={this.renderElement}\n            selectedElements={this.state.selectedProjects}\n            withPaging={true}\n          />\n        </div>\n\n        <div className=\"modal-foot\">\n          <a href=\"#\" onClick={this.handleCloseClick}>\n            {translate('close')}\n          </a>\n        </div>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getProfileProjects } from '../../../api/quality-profiles';\nimport { Profile } from '../types';\nimport ChangeProjectsForm from './ChangeProjectsForm';\n\ninterface Props {\n  organization: string | null;\n  profile: Profile;\n}\n\ninterface State {\n  formOpen: boolean;\n  loading: boolean;\n  loadingMore: boolean;\n  page: number;\n  projects: Array<{ key: string; name: string }>;\n  total: number;\n}\n\nexport default class ProfileProjects extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  state: State = {\n    formOpen: false,\n    loading: true,\n    loadingMore: false,\n    page: 1,\n    projects: [],\n    total: 0\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadProjects();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.profile.key !== this.props.profile.key) {\n      this.loadProjects();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  loadProjects() {\n    if (this.props.profile.isDefault) {\n      this.setState({ loading: false, projects: [] });\n      return;\n    }\n\n    this.setState({ loading: true });\n    const data = { key: this.props.profile.key, page: this.state.page };\n    getProfileProjects(data).then(({ paging, results }) => {\n      if (this.mounted) {\n        this.setState({\n          projects: results,\n          total: paging.total,\n          loading: false\n        });\n      }\n    }, this.stopLoading);\n  }\n\n  loadMore = () => {\n    this.setState({ loadingMore: true });\n    const data = { key: this.props.profile.key, page: this.state.page + 1 };\n    getProfileProjects(data).then(({ paging, results }) => {\n      if (this.mounted) {\n        this.setState(state => ({\n          projects: [...state.projects, ...results],\n          total: paging.total,\n          loadingMore: false\n        }));\n      }\n    }, this.stopLoading);\n  };\n\n  handleChangeClick = () => {\n    this.setState({ formOpen: true });\n  };\n\n  closeForm = () => {\n    this.setState({ formOpen: false });\n    this.loadProjects();\n  };\n\n  renderDefault() {\n    return (\n      <div>\n        <span className=\"badge spacer-right\">{translate('default')}</span>\n        {translate('quality_profiles.projects_for_default')}\n      </div>\n    );\n  }\n\n  renderProjects() {\n    if (this.state.loading) {\n      return <i className=\"spinner\" />;\n    }\n\n    const { projects } = this.state;\n\n    if (projects.length === 0) {\n      return <div>{translate('quality_profiles.no_projects_associated_to_profile')}</div>;\n    }\n\n    return (\n      <>\n        <ul>\n          {projects.map(project => (\n            <li className=\"spacer-top js-profile-project\" data-key={project.key} key={project.key}>\n              <Link\n                className=\"link-with-icon\"\n                to={{ pathname: '/dashboard', query: { id: project.key } }}>\n                <QualifierIcon qualifier=\"TRK\" /> <span>{project.name}</span>\n              </Link>\n            </li>\n          ))}\n        </ul>\n        <ListFooter\n          count={projects.length}\n          loadMore={this.loadMore}\n          ready={!this.state.loadingMore}\n          total={this.state.total}\n        />\n      </>\n    );\n  }\n\n  render() {\n    const { profile } = this.props;\n    return (\n      <div className=\"boxed-group quality-profile-projects\">\n        {profile.actions && profile.actions.associateProjects && (\n          <div className=\"boxed-group-actions\">\n            <Button className=\"js-change-projects\" onClick={this.handleChangeClick}>\n              {translate('quality_profiles.change_projects')}\n            </Button>\n          </div>\n        )}\n\n        <header className=\"boxed-group-header\">\n          <h2>{translate('projects')}</h2>\n        </header>\n\n        <div className=\"boxed-group-inner\">\n          {profile.isDefault ? this.renderDefault() : this.renderProjects()}\n        </div>\n\n        {this.state.formOpen && (\n          <ChangeProjectsForm\n            onClose={this.closeForm}\n            organization={this.props.organization}\n            profile={profile}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getDeprecatedActiveRulesUrl } from '../../../helpers/urls';\n\ninterface Props {\n  activeDeprecatedRules: number;\n  organization: string | null;\n  profile: string;\n}\n\nexport default function ProfileRulesDeprecatedWarning(props: Props) {\n  return (\n    <div className=\"quality-profile-rules-deprecated clearfix\">\n      <span className=\"pull-left\">\n        <span className=\"text-middle\">{translate('quality_profiles.deprecated_rules')}</span>\n        <HelpTooltip\n          className=\"spacer-left\"\n          overlay={translate('quality_profiles.deprecated_rules_description')}\n        />\n      </span>\n      <Link\n        className=\"pull-right\"\n        to={getDeprecatedActiveRulesUrl({ qprofile: props.profile }, props.organization)}>\n        {props.activeDeprecatedRules}\n      </Link>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getRulesUrl } from '../../../helpers/urls';\n\ninterface Props {\n  count: number | null;\n  organization: string | null;\n  qprofile: string;\n  total: number | null;\n  type: string;\n}\n\nexport default function ProfileRulesRowOfType(props: Props) {\n  const activeRulesUrl = getRulesUrl(\n    { qprofile: props.qprofile, activation: 'true', types: props.type },\n    props.organization\n  );\n  const inactiveRulesUrl = getRulesUrl(\n    { qprofile: props.qprofile, activation: 'false', types: props.type },\n    props.organization\n  );\n  let inactiveCount = null;\n  if (props.count != null && props.total != null) {\n    inactiveCount = props.total - props.count;\n  }\n\n  return (\n    <tr>\n      <td>\n        <span>\n          <IssueTypeIcon className=\"little-spacer-right\" query={props.type} />\n          {translate('issue.type', props.type, 'plural')}\n        </span>\n      </td>\n      <td className=\"thin nowrap text-right\">\n        {props.count != null && (\n          <Link to={activeRulesUrl}>{formatMeasure(props.count, 'SHORT_INT', null)}</Link>\n        )}\n      </td>\n      <td className=\"thin nowrap text-right\">\n        {inactiveCount != null &&\n          (inactiveCount > 0 ? (\n            <Link className=\"small text-muted\" to={inactiveRulesUrl}>\n              {formatMeasure(inactiveCount, 'SHORT_INT', null)}\n            </Link>\n          ) : (\n            <span className=\"note text-muted\">0</span>\n          ))}\n      </td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getRulesUrl } from '../../../helpers/urls';\n\ninterface Props {\n  count: number | null;\n  organization: string | null;\n  qprofile: string;\n  total: number | null;\n}\n\nexport default function ProfileRulesRowTotal(props: Props) {\n  const activeRulesUrl = getRulesUrl(\n    { qprofile: props.qprofile, activation: 'true' },\n    props.organization\n  );\n  const inactiveRulesUrl = getRulesUrl(\n    { qprofile: props.qprofile, activation: 'false' },\n    props.organization\n  );\n  let inactiveCount = null;\n  if (props.count != null && props.total != null) {\n    inactiveCount = props.total - props.count;\n  }\n\n  return (\n    <tr>\n      <td>\n        <strong>{translate('total')}</strong>\n      </td>\n      <td className=\"thin nowrap text-right\">\n        {props.count != null && (\n          <Link to={activeRulesUrl}>\n            <strong>{formatMeasure(props.count, 'SHORT_INT', null)}</strong>\n          </Link>\n        )}\n      </td>\n      <td className=\"thin nowrap text-right\">\n        {inactiveCount != null &&\n          (inactiveCount > 0 ? (\n            <Link className=\"small text-muted\" to={inactiveRulesUrl}>\n              <strong>{formatMeasure(inactiveCount, 'SHORT_INT', null)}</strong>\n            </Link>\n          ) : (\n            <span className=\"note text-muted\">0</span>\n          ))}\n      </td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getRulesUrl } from '../../../helpers/urls';\n\ninterface Props {\n  language: string;\n  organization: string | null;\n  profile: string;\n  sonarway: string;\n  sonarWayMissingRules: number;\n}\n\nexport default function ProfileRulesSonarWayComparison(props: Props) {\n  const url = getRulesUrl(\n    {\n      qprofile: props.profile,\n      activation: 'false',\n      compareToProfile: props.sonarway,\n      languages: props.language\n    },\n    props.organization\n  );\n\n  return (\n    <div className=\"quality-profile-rules-sonarway-missing clearfix\">\n      <span className=\"pull-left\">\n        <span className=\"text-middle\">{translate('quality_profiles.sonarway_missing_rules')}</span>\n        <HelpTooltip\n          className=\"spacer-left\"\n          overlay={translate('quality_profiles.sonarway_missing_rules_description')}\n        />\n      </span>\n      <Link className=\"pull-right\" data-test=\"rules\" to={url}>\n        {props.sonarWayMissingRules}\n      </Link>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { keyBy } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getQualityProfile } from '../../../api/quality-profiles';\nimport { searchRules, takeFacet } from '../../../api/rules';\nimport DocTooltip from '../../../components/docs/DocTooltip';\nimport { getRulesUrl } from '../../../helpers/urls';\nimport { Profile } from '../types';\nimport ProfileRulesDeprecatedWarning from './ProfileRulesDeprecatedWarning';\nimport ProfileRulesRowOfType from './ProfileRulesRowOfType';\nimport ProfileRulesRowTotal from './ProfileRulesRowTotal';\nimport ProfileRulesSonarWayComparison from './ProfileRulesSonarWayComparison';\n\nconst TYPES = ['BUG', 'VULNERABILITY', 'CODE_SMELL', 'SECURITY_HOTSPOT'];\n\ninterface Props {\n  organization: string | null;\n  profile: Profile;\n}\n\ninterface ByType {\n  val: string;\n  count: number | null;\n}\n\ninterface State {\n  activatedTotal: number | null;\n  activatedByType: T.Dict<ByType>;\n  allByType: T.Dict<ByType>;\n  compareToSonarWay: { profile: string; profileName: string; missingRuleCount: number } | null;\n  total: number | null;\n}\n\nexport default class ProfileRules extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  state: State = {\n    activatedTotal: null,\n    activatedByType: keyBy(\n      TYPES.map(t => ({ val: t, count: null })),\n      'val'\n    ),\n    allByType: keyBy(\n      TYPES.map(t => ({ val: t, count: null })),\n      'val'\n    ),\n    compareToSonarWay: null,\n    total: null\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadRules();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.profile.key !== this.props.profile.key) {\n      this.loadRules();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadProfile() {\n    if (this.props.profile.isBuiltIn) {\n      return Promise.resolve(null);\n    }\n    return getQualityProfile({\n      compareToSonarWay: true,\n      profile: this.props.profile\n    });\n  }\n\n  loadAllRules() {\n    return searchRules({\n      languages: this.props.profile.language,\n      facets: 'types',\n      organization: this.props.organization || undefined,\n      ps: 1\n    });\n  }\n\n  loadActivatedRules() {\n    return searchRules({\n      activation: 'true',\n      facets: 'types',\n      organization: this.props.organization || undefined,\n      ps: 1,\n      qprofile: this.props.profile.key\n    });\n  }\n\n  loadRules() {\n    Promise.all([this.loadAllRules(), this.loadActivatedRules(), this.loadProfile()]).then(\n      responses => {\n        if (this.mounted) {\n          const [allRules, activatedRules, showProfile] = responses;\n          this.setState({\n            activatedTotal: activatedRules.total,\n            allByType: keyBy<ByType>(takeFacet(allRules, 'types'), 'val'),\n            activatedByType: keyBy<ByType>(takeFacet(activatedRules, 'types'), 'val'),\n            compareToSonarWay: showProfile && showProfile.compareToSonarWay,\n            total: allRules.total\n          });\n        }\n      }\n    );\n  }\n\n  getRulesCountForType(type: string) {\n    return this.state.activatedByType && this.state.activatedByType[type]\n      ? this.state.activatedByType[type].count\n      : null;\n  }\n\n  getRulesTotalForType(type: string) {\n    return this.state.allByType && this.state.allByType[type]\n      ? this.state.allByType[type].count\n      : null;\n  }\n\n  render() {\n    const { organization, profile } = this.props;\n    const { compareToSonarWay } = this.state;\n    const activateMoreUrl = getRulesUrl(\n      { qprofile: profile.key, activation: 'false' },\n      organization\n    );\n    const { actions = {} } = profile;\n\n    return (\n      <div className=\"boxed-group quality-profile-rules\">\n        <div className=\"quality-profile-rules-distribution\">\n          <table className=\"data condensed\">\n            <thead>\n              <tr>\n                <th>\n                  <h2>{translate('rules')}</h2>\n                </th>\n                <th>{translate('active')}</th>\n                <th>{translate('inactive')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              <ProfileRulesRowTotal\n                count={this.state.activatedTotal}\n                organization={organization}\n                qprofile={profile.key}\n                total={this.state.total}\n              />\n              {TYPES.map(type => (\n                <ProfileRulesRowOfType\n                  count={this.getRulesCountForType(type)}\n                  key={type}\n                  organization={organization}\n                  qprofile={profile.key}\n                  total={this.getRulesTotalForType(type)}\n                  type={type}\n                />\n              ))}\n            </tbody>\n          </table>\n\n          {actions.edit && !profile.isBuiltIn && (\n            <div className=\"text-right big-spacer-top\">\n              <Link className=\"button js-activate-rules\" to={activateMoreUrl}>\n                {translate('quality_profiles.activate_more')}\n              </Link>\n            </div>\n          )}\n\n          {/* if a user is allowed to `copy` a profile if they are a global or organization admin */}\n          {/* this user could potentially active more rules if the profile was not built-in */}\n          {/* in such cases it's better to show the button but disable it with a tooltip */}\n          {actions.copy && profile.isBuiltIn && (\n            <div className=\"text-right big-spacer-top\">\n              <DocTooltip\n                doc={import(\n                  /* webpackMode: \"eager\" */ 'Docs/tooltips/quality-profiles/activate-rules-in-built-in-profile.md'\n                )}>\n                <Button className=\"disabled js-activate-rules\">\n                  {translate('quality_profiles.activate_more')}\n                </Button>\n              </DocTooltip>\n            </div>\n          )}\n        </div>\n        {profile.activeDeprecatedRuleCount > 0 && (\n          <ProfileRulesDeprecatedWarning\n            activeDeprecatedRules={profile.activeDeprecatedRuleCount}\n            organization={organization}\n            profile={profile.key}\n          />\n        )}\n        {compareToSonarWay != null && compareToSonarWay.missingRuleCount > 0 && (\n          <ProfileRulesSonarWayComparison\n            language={profile.language}\n            organization={organization}\n            profile={profile.key}\n            sonarWayMissingRules={compareToSonarWay.missingRuleCount}\n            sonarway={compareToSonarWay.profile}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Exporter, Profile } from '../types';\nimport ProfileExporters from './ProfileExporters';\nimport ProfileInheritance from './ProfileInheritance';\nimport ProfilePermissions from './ProfilePermissions';\nimport ProfileProjects from './ProfileProjects';\nimport ProfileRules from './ProfileRules';\n\ninterface Props {\n  exporters: Exporter[];\n  organization: string | null;\n  profile: Profile;\n  profiles: Profile[];\n  updateProfiles: () => Promise<void>;\n}\n\nexport default function ProfileDetails(props: Props) {\n  const { organization, profile } = props;\n  return (\n    <div>\n      <div className=\"quality-profile-grid\">\n        <div className=\"quality-profile-grid-left\">\n          <ProfileRules organization={organization} profile={profile} />\n          <ProfileExporters\n            exporters={props.exporters}\n            organization={organization}\n            profile={profile}\n          />\n          {profile.actions && profile.actions.edit && !profile.isBuiltIn && (\n            <ProfilePermissions organization={organization || undefined} profile={profile} />\n          )}\n        </div>\n        <div className=\"quality-profile-grid-right\">\n          <ProfileInheritance\n            organization={organization}\n            profile={profile}\n            profiles={props.profiles}\n            updateProfiles={props.updateProfiles}\n          />\n          <ProfileProjects organization={organization} profile={profile} />\n        </div>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport { lazyLoad } from 'sonar-ui-common/components/lazyLoad';\nimport { filterContent } from '../../helpers/markdown';\n\nconst DocMarkdownBlock = lazyLoad(() => import('./DocMarkdownBlock'));\n\ninterface Props {\n  className?: string;\n  children?: React.ReactNode;\n  // Use as `import(/* webpackMode: \"eager\" */ 'Docs/tooltips/foo/bar.md')`\n  doc: Promise<{ default: string }>;\n  overlayProps?: T.Dict<string>;\n}\n\ninterface State {\n  content?: string;\n  open: boolean;\n}\n\nexport default class DocTooltip extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { open: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.props.doc.then(\n      ({ default: content }) => {\n        if (this.mounted) {\n          this.setState({ content });\n        }\n      },\n      () => {}\n    );\n    document.addEventListener('scroll', this.close, true);\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    document.removeEventListener('scroll', this.close, true);\n  }\n\n  close = () => {\n    if (this.mounted) {\n      this.setState({ open: false });\n    }\n  };\n\n  render() {\n    return this.state.content ? (\n      <HelpTooltip\n        className={this.props.className}\n        overlay={\n          <div className=\"abs-width-300\">\n            <DocMarkdownBlock\n              childProps={this.props.overlayProps}\n              className=\"cut-margins\"\n              content={filterContent(this.state.content)}\n              isTooltip={true}\n            />\n          </div>\n        }>\n        {this.props.children}\n      </HelpTooltip>\n    ) : (\n      this.props.children || null\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { map } from 'lodash';\nimport { csvEscape } from 'sonar-ui-common/helpers/csv';\nimport { getJSON, post, postJSON, RequestData } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { Exporter, ProfileChangelogEvent } from '../apps/quality-profiles/types';\n\nexport interface ProfileActions {\n  associateProjects?: boolean;\n  copy?: boolean;\n  delete?: boolean;\n  edit?: boolean;\n  setAsDefault?: boolean;\n}\n\nexport interface Actions {\n  create?: boolean;\n}\n\nexport interface Profile {\n  actions?: ProfileActions;\n  key: string;\n  name: string;\n  language: string;\n  languageName: string;\n  isInherited?: boolean;\n  parentKey?: string;\n  parentName?: string;\n  isDefault?: boolean;\n  activeRuleCount: number;\n  activeDeprecatedRuleCount: number;\n  rulesUpdatedAt?: string;\n  lastUsed?: string;\n  userUpdatedAt?: string;\n  organization: string;\n  isBuiltIn?: boolean;\n  projectCount?: number;\n}\n\nexport interface SearchQualityProfilesParameters {\n  defaults?: boolean;\n  language?: string;\n  organization?: string;\n  project?: string;\n  qualityProfile?: string;\n}\n\nexport interface SearchQualityProfilesResponse {\n  actions?: Actions;\n  profiles: Profile[];\n}\n\nexport function searchQualityProfiles(\n  parameters: SearchQualityProfilesParameters\n): Promise<SearchQualityProfilesResponse> {\n  return getJSON('/api/qualityprofiles/search', parameters).catch(throwGlobalError);\n}\n\nexport function getQualityProfile({\n  compareToSonarWay,\n  profile: { key }\n}: {\n  compareToSonarWay?: boolean;\n  profile: Profile;\n}): Promise<any> {\n  return getJSON('/api/qualityprofiles/show', { compareToSonarWay, key });\n}\n\nexport function createQualityProfile(data: RequestData): Promise<any> {\n  return postJSON('/api/qualityprofiles/create', data).catch(throwGlobalError);\n}\n\nexport function restoreQualityProfile(data: RequestData): Promise<any> {\n  return postJSON('/api/qualityprofiles/restore', data).catch(throwGlobalError);\n}\n\nexport interface ProfileProject {\n  id: number;\n  key: string;\n  name: string;\n  selected: boolean;\n}\n\nexport function getProfileProjects(\n  data: RequestData\n): Promise<{ more: boolean; paging: T.Paging; results: ProfileProject[] }> {\n  return getJSON('/api/qualityprofiles/projects', data).catch(throwGlobalError);\n}\n\nexport function getProfileInheritance({\n  language,\n  name: qualityProfile,\n  organization\n}: Profile): Promise<{\n  ancestors: T.ProfileInheritanceDetails[];\n  children: T.ProfileInheritanceDetails[];\n  profile: T.ProfileInheritanceDetails;\n}> {\n  return getJSON('/api/qualityprofiles/inheritance', {\n    language,\n    qualityProfile,\n    organization\n  }).catch(throwGlobalError);\n}\n\nexport function setDefaultProfile({ language, name: qualityProfile, organization }: Profile) {\n  return post('/api/qualityprofiles/set_default', {\n    language,\n    qualityProfile,\n    organization\n  });\n}\n\nexport function renameProfile(key: string, name: string) {\n  return post('/api/qualityprofiles/rename', { key, name }).catch(throwGlobalError);\n}\n\nexport function copyProfile(fromKey: string, toName: string): Promise<any> {\n  return postJSON('/api/qualityprofiles/copy', { fromKey, toName }).catch(throwGlobalError);\n}\n\nexport function deleteProfile({ language, name: qualityProfile, organization }: Profile) {\n  return post('/api/qualityprofiles/delete', { language, qualityProfile, organization }).catch(\n    throwGlobalError\n  );\n}\n\nexport function changeProfileParent(\n  { language, name: qualityProfile, organization }: Profile,\n  parentProfile?: Profile\n) {\n  return post('/api/qualityprofiles/change_parent', {\n    language,\n    qualityProfile,\n    organization,\n    parentQualityProfile: parentProfile ? parentProfile.name : undefined\n  }).catch(throwGlobalError);\n}\n\nexport function getQualityProfileBackupUrl({\n  language,\n  name: qualityProfile,\n  organization\n}: Profile) {\n  const queryParams = Object.entries({ language, qualityProfile, organization })\n    .map(([key, value]) => `${key}=${encodeURIComponent(value)}`)\n    .join('&');\n  return `/api/qualityprofiles/backup?${queryParams}`;\n}\n\nexport function getQualityProfileExporterUrl(\n  { key: exporterKey }: Exporter,\n  { language, name: qualityProfile, organization }: Profile\n) {\n  const queryParams = Object.entries({ exporterKey, language, qualityProfile, organization })\n    .map(([key, value]) => `${key}=${encodeURIComponent(value)}`)\n    .join('&');\n  return `/api/qualityprofiles/export?${queryParams}`;\n}\n\nexport function getImporters(): Promise<\n  Array<{ key: string; languages: Array<string>; name: string }>\n> {\n  return getJSON('/api/qualityprofiles/importers').then(r => r.importers, throwGlobalError);\n}\n\nexport function getExporters(): Promise<any> {\n  return getJSON('/api/qualityprofiles/exporters').then(r => r.exporters);\n}\n\nexport function getProfileChangelog(\n  since: any,\n  to: any,\n  { language, name: qualityProfile, organization }: Profile,\n  page?: number\n): Promise<{\n  events: ProfileChangelogEvent[];\n  p: number;\n  ps: number;\n  total: number;\n}> {\n  return getJSON('/api/qualityprofiles/changelog', {\n    since,\n    to,\n    language,\n    qualityProfile,\n    organization,\n    p: page\n  });\n}\n\nexport interface CompareResponse {\n  left: { name: string };\n  right: { name: string };\n  inLeft: Array<{ key: string; name: string; severity: string }>;\n  inRight: Array<{ key: string; name: string; severity: string }>;\n  modified: Array<{\n    key: string;\n    name: string;\n    left: { params: T.Dict<string>; severity: string };\n    right: { params: T.Dict<string>; severity: string };\n  }>;\n}\n\nexport function compareProfiles(leftKey: string, rightKey: string): Promise<CompareResponse> {\n  return getJSON('/api/qualityprofiles/compare', { leftKey, rightKey });\n}\n\nexport function associateProject(\n  { language, name: qualityProfile, organization }: Profile,\n  project: string\n) {\n  return post('/api/qualityprofiles/add_project', {\n    language,\n    qualityProfile,\n    organization,\n    project\n  }).catch(throwGlobalError);\n}\n\nexport function dissociateProject(\n  { language, name: qualityProfile, organization }: Profile,\n  project: string\n) {\n  return post('/api/qualityprofiles/remove_project', {\n    language,\n    qualityProfile,\n    organization,\n    project\n  }).catch(throwGlobalError);\n}\n\nexport interface SearchUsersGroupsParameters {\n  language: string;\n  organization?: string;\n  qualityProfile: string;\n  q?: string;\n  selected?: 'all' | 'selected' | 'deselected';\n}\n\ninterface SearchUsersResponse {\n  users: T.UserSelected[];\n  paging: T.Paging;\n}\n\nexport function searchUsers(parameters: SearchUsersGroupsParameters): Promise<SearchUsersResponse> {\n  return getJSON('/api/qualityprofiles/search_users', parameters).catch(throwGlobalError);\n}\n\nexport interface SearchGroupsResponse {\n  groups: Array<{ name: string }>;\n  paging: T.Paging;\n}\n\nexport function searchGroups(\n  parameters: SearchUsersGroupsParameters\n): Promise<SearchGroupsResponse> {\n  return getJSON('/api/qualityprofiles/search_groups', parameters).catch(throwGlobalError);\n}\n\nexport interface AddRemoveUserParameters {\n  language: string;\n  login: string;\n  organization?: string;\n  qualityProfile: string;\n}\n\nexport function addUser(parameters: AddRemoveUserParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/add_user', parameters).catch(throwGlobalError);\n}\n\nexport function removeUser(parameters: AddRemoveUserParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/remove_user', parameters).catch(throwGlobalError);\n}\n\nexport interface AddRemoveGroupParameters {\n  group: string;\n  language: string;\n  organization?: string;\n  qualityProfile: string;\n}\n\nexport function addGroup(parameters: AddRemoveGroupParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/add_group', parameters).catch(throwGlobalError);\n}\n\nexport function removeGroup(parameters: AddRemoveGroupParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/remove_group', parameters).catch(throwGlobalError);\n}\n\nexport interface BulkActivateParameters {\n  activation?: boolean;\n  active_severities?: string;\n  asc?: boolean;\n  available_since?: string;\n  compareToProfile?: string;\n  inheritance?: string;\n  is_template?: string;\n  languages?: string;\n  organization: string | undefined;\n  q?: string;\n  qprofile?: string;\n  repositories?: string;\n  rule_key?: string;\n  s?: string;\n  severities?: string;\n  statuses?: string;\n  tags?: string;\n  targetKey: string;\n  targetSeverity?: string;\n  template_key?: string;\n  types?: string;\n}\n\nexport function bulkActivateRules(data: BulkActivateParameters) {\n  return postJSON('/api/qualityprofiles/activate_rules', data);\n}\n\nexport function bulkDeactivateRules(data: BulkActivateParameters) {\n  return postJSON('/api/qualityprofiles/deactivate_rules', data);\n}\n\nexport function activateRule(data: {\n  key: string;\n  organization: string | undefined;\n  params?: T.Dict<string>;\n  reset?: boolean;\n  rule: string;\n  severity?: string;\n}) {\n  const params =\n    data.params && map(data.params, (value, key) => `${key}=${csvEscape(value)}`).join(';');\n  return post('/api/qualityprofiles/activate_rule', { ...data, params }).catch(throwGlobalError);\n}\n\nexport function deactivateRule(data: {\n  key: string;\n  organization: string | undefined;\n  rule: string;\n}) {\n  return post('/api/qualityprofiles/deactivate_rule', data).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// keep this file in JavaScript, because it is used by a webpack loader\nmodule.exports = { getFrontMatter, separateFrontMatter, filterContent };\n\nfunction getFrontMatter(content) {\n  const lines = content.split('\\n');\n  const position = getFrontMatterPosition(lines);\n  return position ? parseFrontMatter(lines.slice(position.firstLine + 1, position.lastLine)) : {};\n}\n\nfunction separateFrontMatter(content) {\n  const lines = content.split('\\n');\n  const position = getFrontMatterPosition(lines);\n  if (position) {\n    const frontmatter = parseFrontMatter(lines.slice(position.firstLine + 1, position.lastLine));\n    const content = lines.slice(position.lastLine + 1).join('\\n');\n    return { frontmatter, content };\n  } else {\n    return { frontmatter: {}, content };\n  }\n}\n\nfunction getFrontMatterPosition(lines) {\n  let firstLine;\n  let lastLine;\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i];\n    if (line.trim() === '---') {\n      if (firstLine === undefined) {\n        firstLine = i;\n      } else {\n        lastLine = i;\n        break;\n      }\n    }\n  }\n  return lastLine !== undefined ? { firstLine, lastLine } : undefined;\n}\n\nfunction parseFrontMatter(lines) {\n  const data = {};\n  for (let i = 0; i < lines.length; i++) {\n    const tokens = lines[i].split(':').map(x => x.trim());\n    if (tokens.length === 2) {\n      data[tokens[0]] = tokens[1];\n    }\n  }\n  return data;\n}\n\n/**\n * @param {string} content\n * @returns {string}\n */\nfunction filterContent(content) {\n  const regexBase = '<!-- \\\\/?(sonarqube|sonarcloud|static) -->';\n  const { isSonarCloud, getInstance } = require('./system');\n  const contentWithInstance = content.replace(/{instance}/gi, getInstance());\n  const contentWithoutStatic = cutConditionalContent(contentWithInstance, 'static');\n  const filteredContent = isSonarCloud()\n    ? cutConditionalContent(contentWithoutStatic, 'sonarqube')\n    : cutConditionalContent(contentWithoutStatic, 'sonarcloud');\n  return filteredContent\n    .replace(new RegExp(`^${regexBase}(\\n|\\r|\\r\\n|$)`, 'gm'), '') // First, remove single-line ones, including ending carriage-returns.\n    .replace(new RegExp(`${regexBase}`, 'g'), ''); // Now remove all remaining ones.\n}\n\n/**\n * @param {string} content\n * @param {string} tag\n * @returns {string}\n */\nfunction cutConditionalContent(content, tag) {\n  const beginning = `<!-- ${tag} -->`;\n  const ending = `<!-- /${tag} -->`;\n\n  let newContent = content;\n  let start = newContent.indexOf(beginning);\n  let end = newContent.indexOf(ending);\n  while (start !== -1 && end !== -1) {\n    if (start < end) {\n      newContent = newContent.substring(0, start) + newContent.substring(end + ending.length);\n    } else {\n      // When conditional tags are incorrectly used we log an error, strip them out and pass to the next pair of tags\n      // eslint-disable-next-line no-console\n      console.error(\n        new Error(\n          `Documentation - incorrect usage of conditional formatting tags here: \"${newContent.substring(\n            end,\n            start + beginning.length\n          )}\"`\n        )\n      );\n      newContent =\n        newContent.substring(0, end) +\n        newContent.substring(end + ending.length, start) +\n        newContent.substring(start + beginning.length);\n    }\n    start = newContent.indexOf(beginning);\n    end = newContent.indexOf(ending);\n  }\n\n  return newContent;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface GetRulesAppResponse {\n  canWrite?: boolean;\n  repositories: { key: string; language: string; name: string }[];\n}\n\nexport function getRulesApp(data: {\n  organization: string | undefined;\n}): Promise<GetRulesAppResponse> {\n  return getJSON('/api/rules/app', data).catch(throwGlobalError);\n}\n\nexport interface SearchRulesResponse {\n  actives?: T.Dict<T.RuleActivation[]>;\n  facets?: { property: string; values: { count: number; val: string }[] }[];\n  p: number;\n  ps: number;\n  rules: T.Rule[];\n  total: number;\n}\n\nexport function searchRules(data: {\n  organization: string | undefined;\n  [x: string]: any;\n}): Promise<SearchRulesResponse> {\n  return getJSON('/api/rules/search', data).catch(throwGlobalError);\n}\n\nexport function takeFacet(response: any, property: string) {\n  const facet = response.facets.find((facet: any) => facet.property === property);\n  return facet ? facet.values : [];\n}\n\nexport function getRuleDetails(parameters: {\n  actives?: boolean;\n  key: string;\n  organization: string | undefined;\n}): Promise<{ actives?: T.RuleActivation[]; rule: T.RuleDetails }> {\n  return getJSON('/api/rules/show', parameters).catch(throwGlobalError);\n}\n\nexport function getRuleTags(parameters: {\n  organization: string | undefined;\n  ps?: number;\n  q: string;\n}): Promise<string[]> {\n  return getJSON('/api/rules/tags', parameters).then(r => r.tags, throwGlobalError);\n}\n\nexport function createRule(data: {\n  custom_key: string;\n  markdown_description: string;\n  name: string;\n  organization: string | undefined;\n  params?: string;\n  prevent_reactivation?: boolean;\n  severity?: string;\n  status?: string;\n  template_key: string;\n  type?: string;\n}): Promise<T.RuleDetails> {\n  return postJSON('/api/rules/create', data).then(\n    r => r.rule,\n    response => {\n      // do not show global error if the status code is 409\n      // this case should be handled inside a component\n      if (response && response.status === 409) {\n        return Promise.reject(response);\n      } else {\n        return throwGlobalError(response);\n      }\n    }\n  );\n}\n\nexport function deleteRule(parameters: { key: string; organization: string | undefined }) {\n  return post('/api/rules/delete', parameters).catch(throwGlobalError);\n}\n\nexport function updateRule(data: {\n  key: string;\n  markdown_description?: string;\n  markdown_note?: string;\n  name?: string;\n  organization: string | undefined;\n  params?: string;\n  remediation_fn_base_effort?: string;\n  remediation_fn_type?: string;\n  remediation_fy_gap_multiplier?: string;\n  severity?: string;\n  status?: string;\n  tags?: string;\n}): Promise<T.RuleDetails> {\n  return postJSON('/api/rules/update', data).then(r => r.rule, throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport DocTooltip from '../../../components/docs/DocTooltip';\n\ninterface Props {\n  className?: string;\n  tooltip?: boolean;\n}\n\nexport default function BuiltInQualityProfileBadge({ className, tooltip = true }: Props) {\n  const badge = (\n    <div className={classNames('badge badge-info', className)}>\n      {translate('quality_profiles.built_in')}\n    </div>\n  );\n\n  if (tooltip) {\n    return (\n      <DocTooltip\n        doc={import(\n          /* webpackMode: \"eager\" */ 'Docs/tooltips/quality-profiles/built-in-quality-profile.md'\n        )}>\n        {badge}\n      </DocTooltip>\n    );\n  }\n  return badge;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { getProfilePath } from '../utils';\n\ninterface Props {\n  className?: string;\n  children?: React.ReactElement<any> | string;\n  language: string;\n  name: string;\n  organization: string | null;\n}\n\nexport default function ProfileLink({ name, language, organization, children, ...other }: Props) {\n  return (\n    <Link\n      activeClassName=\"link-no-underline\"\n      to={getProfilePath(name, language, organization)}\n      {...other}>\n      {children}\n    </Link>\n  );\n}\n","export default \"Built-in profiles are provided directly by the language analyzers and may be updated with each new analyzer version. They represent best-practice, minimum rule sets.\\n\""],"sourceRoot":""}