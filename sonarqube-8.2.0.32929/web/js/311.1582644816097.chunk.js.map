{"version":3,"sources":["webpack:///./src/main/js/app/components/AdminContext.tsx","webpack:///./src/main/js/components/common/RestartButton.tsx","webpack:///./src/main/js/app/components/nav/settings/PendingPluginsActionNotif.tsx","webpack:///./src/main/js/app/components/nav/settings/SystemRestartNotif.tsx","webpack:///./src/main/js/app/components/nav/settings/SettingsNav.tsx","webpack:///./src/main/js/app/components/AdminContainer.tsx","webpack:///./node_modules/sonar-ui-common/components/controls/SimpleModal.js","webpack:///./node_modules/sonar-ui-common/components/controls/ConfirmModal.js","webpack:///./node_modules/lodash/toFinite.js","webpack:///./node_modules/sonar-ui-common/components/controls/ConfirmButton.js","webpack:///./node_modules/sonar-ui-common/components/controls/ModalButton.js","webpack:///./node_modules/lodash/toInteger.js","webpack:///./node_modules/lodash/_baseFindIndex.js","webpack:///./src/main/js/api/system.ts","webpack:///./src/main/js/api/nav.ts","webpack:///./src/main/js/app/utils/handleRequiredAuthorization.ts","webpack:///./src/main/js/api/plugins.ts","webpack:///./node_modules/lodash/findLastIndex.js"],"names":["__webpack_require__","d","__webpack_exports__","defaultPendingPlugins","defaultSystemStatus","react__WEBPACK_IMPORTED_MODULE_0__","installing","removing","updating","AdminContext","fetchSystemStatus","fetchPendingPlugins","pendingPlugins","systemStatus","RestartButton","_super","_this","apply","this","arguments","handleConfirm","Object","_api_system__WEBPACK_IMPORTED_MODULE_5__","then","props","__extends","prototype","render","_a","className","react__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_controls_ConfirmButton__WEBPACK_IMPORTED_MODULE_3___default","a","confirmButtonText","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_4__","modalBody","modalHeader","onConfirm","onClick","sonar_ui_common_components_controls_buttons__WEBPACK_IMPORTED_MODULE_2__","classnames__WEBPACK_IMPORTED_MODULE_0__","disabled","PendingPluginsActionNotif","handleRevert","plugins","refreshPending","pending","length","index_js_exposed","Alert","display","variant","InstanceMessage","message","l10n","msg","filter","map","idx","key","index_es","defaultMessage","id","values","nb","buttons","SystemRestartNotif","instance","helpers_system","link","react_router_es","to","pathname","settings_SettingsNav","SettingsNav","renderExtension","name","activeClassName","SettingsNav_extends","isSomethingActive","urls","path","window","location","some","url","indexOf","baseUrl","isSecurityActive","isProjectsActive","isSystemActive","isMarketplace","renderConfigurationTab","organizationsEnabled","extensionsWithoutSupport","extensions","extension","Dropdown_default","overlay","tagName","onToggleClick","open","aria-expanded","aria-haspopup","classnames","active","href","DropdownIcon_default","renderProjectsTab","renderSecurityTab","notifComponent","hasSupportExtension","find","totalPendingPlugins","contextNavHeight","theme","contextNavHeightRaw","settings_PendingPluginsActionNotif","ContextNavBar_default","height","notif","NavBarTabs_default","defaultProps","AdminContainer_AdminContainer","AdminContainer","mounted","state","fetchNavigationSettings","nav","r","setAdminPages","setState","system","status","waitRestartingDone","document","reload","AdminContainer_extends","componentDidMount","appState","canAdmin","handleRequiredAuthorization","componentWillUnmount","adminPages","_b","defaultTitle","index_module","defer","titleTemplate","Provider","value","children","mapDispatchToProps","es","rootReducer","extendStatics","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","create","__assign","assign","t","s","i","n","call","__rest","e","getOwnPropertySymbols","propertyIsEnumerable","defineProperty","exports","React","Modal_1","SimpleModal","submitting","stopSubmitting","handleCloseClick","event","preventDefault","currentTarget","blur","onClose","handleFormSubmit","submit","handleSubmitClick","result","onSubmit","header","modalProps","createElement","default","contentLabel","onRequestClose","onCloseClick","onFormSubmit","onSubmitClick","Component","l10n_1","DeferredSpinner_1","buttons_1","ClickEventBoundary_1","SimpleModal_1","ConfirmModal","handleSubmit","confirmData","renderModalContent","confirmDisable","headerDescription","isDestructive","_c","cancelButtonText","translate","loading","SubmitButton","autoFocus","undefined","ResetButtonLink","noBackdrop","size","PureComponent","toNumber","INFINITY","MAX_INTEGER","module","ConfirmModal_1","ModalButton_1","ConfirmButton","renderConfirmModal","modalHeaderDescription","confirmModalProps","modal","ModalButton","handleButtonClick","handleCloseModal","Fragment","toFinite","remainder","array","predicate","fromIndex","fromRight","index","setLogLevel","getSystemInfo","getSystemStatus","getSystemUpgrades","getMigrationStatus","migrateDatabase","restart","waitSystemUPStatus","sonar_ui_common_helpers_request__WEBPACK_IMPORTED_MODULE_0__","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_1__","level","catch","max","slowThreshold","getComponentNavigation","getMarketplaceNavigation","getSettingsNavigation","data","sonar_ui_common_helpers_getHistory__WEBPACK_IMPORTED_MODULE_0__","sonar_ui_common_helpers_getHistory__WEBPACK_IMPORTED_MODULE_0___default","_store_appState__WEBPACK_IMPORTED_MODULE_1__","_getStore__WEBPACK_IMPORTED_MODULE_2__","store","history","returnTo","search","hash","dispatch","replace","query","return_to","getAvailablePlugins","sonar_ui_common_helpers_request__WEBPACK_IMPORTED_MODULE_1__","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_3__","getPendingPlugins","getLastUpdates","updates","lodash_findLastIndex__WEBPACK_IMPORTED_MODULE_0___default","update","sonar_ui_common_helpers_types__WEBPACK_IMPORTED_MODULE_2__","addChangelog","previousUpdates","slice","getInstalledPlugins","f","getInstalledPluginsWithUpdates","Promise","all","installed","plugin","updatePlugin","getPluginUpdates","installPlugin","uninstallPlugin","cancelPendingPlugins","baseFindIndex","baseIteratee","toInteger","nativeMax","Math","nativeMin","min"],"mappings":"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","file":"js/311.1582644816097.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { PluginPendingResult } from '../../api/plugins';\n\nexport interface AdminContextInterface {\n  fetchSystemStatus: () => void;\n  fetchPendingPlugins: () => void;\n  pendingPlugins: PluginPendingResult;\n  systemStatus: T.SysStatus;\n}\n\nexport const defaultPendingPlugins = { installing: [], removing: [], updating: [] };\nexport const defaultSystemStatus = 'UP';\n\nconst AdminContext = React.createContext<AdminContextInterface>({\n  fetchSystemStatus: () => {},\n  fetchPendingPlugins: () => {},\n  pendingPlugins: defaultPendingPlugins,\n  systemStatus: defaultSystemStatus\n});\nexport default AdminContext;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ConfirmButton from 'sonar-ui-common/components/controls/ConfirmButton';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { restart } from '../../api/system';\n\ninterface Props {\n  className?: string;\n  fetchSystemStatus: () => void;\n  systemStatus: T.SysStatus;\n}\n\nexport default class RestartButton extends React.PureComponent<Props> {\n  handleConfirm = () => {\n    return restart().then(this.props.fetchSystemStatus);\n  };\n\n  render() {\n    const { className, systemStatus } = this.props;\n    return (\n      <ConfirmButton\n        confirmButtonText={translate('restart')}\n        modalBody={\n          <>\n            <p className=\"spacer-top spacer-bottom\">\n              {translate('system.are_you_sure_to_restart')}\n            </p>\n            <p>{translate('system.forcing_shutdown_not_recommended')}</p>\n          </>\n        }\n        modalHeader={translate('system.restart_server')}\n        onConfirm={this.handleConfirm}>\n        {({ onClick }) => (\n          <Button\n            className={classNames('button-red', className)}\n            disabled={systemStatus !== 'UP'}\n            onClick={onClick}>\n            {systemStatus === 'RESTARTING'\n              ? translate('system.restart_in_progress')\n              : translate('system.restart_server')}\n          </Button>\n        )}\n      </ConfirmButton>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { cancelPendingPlugins, PluginPendingResult } from '../../../../api/plugins';\nimport InstanceMessage from '../../../../components/common/InstanceMessage';\nimport RestartButton from '../../../../components/common/RestartButton';\n\ninterface Props {\n  fetchSystemStatus: () => void;\n  pending: PluginPendingResult;\n  refreshPending: () => void;\n  systemStatus: T.SysStatus;\n}\n\nexport default class PendingPluginsActionNotif extends React.PureComponent<Props> {\n  handleRevert = () => {\n    cancelPendingPlugins().then(this.props.refreshPending, () => {});\n  };\n\n  render() {\n    const { installing, updating, removing } = this.props.pending;\n    const hasPendingActions = installing.length || updating.length || removing.length;\n    if (!hasPendingActions) {\n      return null;\n    }\n\n    return (\n      <Alert className=\"js-pending\" display=\"banner\" variant=\"info\">\n        <div className=\"display-flex-center\">\n          <span className=\"little-spacer-right\">\n            <InstanceMessage message={translate('marketplace.instance_needs_to_be_restarted_to')} />\n          </span>\n          {[\n            { length: installing.length, msg: 'marketplace.install_x_plugins' },\n            { length: updating.length, msg: 'marketplace.update_x_plugins' },\n            { length: removing.length, msg: 'marketplace.uninstall_x_plugins' }\n          ]\n            .filter(({ length }) => length > 0)\n            .map(({ length, msg }, idx) => (\n              <span key={msg}>\n                {idx > 0 && '; '}\n                <FormattedMessage\n                  defaultMessage={translate(msg)}\n                  id={msg}\n                  values={{ nb: <strong>{length}</strong> }}\n                />\n              </span>\n            ))}\n\n          <RestartButton\n            className=\"spacer-left\"\n            fetchSystemStatus={this.props.fetchSystemStatus}\n            systemStatus={this.props.systemStatus}\n          />\n          <Button className=\"spacer-left js-cancel-all\" onClick={this.handleRevert}>\n            {translate('marketplace.revert')}\n          </Button>\n        </div>\n      </Alert>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getInstance } from '../../../../helpers/system';\n\nexport default function SystemRestartNotif() {\n  return (\n    <Alert display=\"banner\" variant=\"info\">\n      <FormattedMessage\n        defaultMessage={translate('system.instance_restarting')}\n        id=\"system.instance_restarting\"\n        values={{\n          instance: getInstance(),\n          link: (\n            <Link to={{ pathname: '/admin/background_tasks' }}>\n              {translate('background_tasks.page')}\n            </Link>\n          )\n        }}\n      />\n    </Alert>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { IndexLink, Link } from 'react-router';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport ContextNavBar from 'sonar-ui-common/components/ui/ContextNavBar';\nimport NavBarTabs from 'sonar-ui-common/components/ui/NavBarTabs';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { PluginPendingResult } from '../../../../api/plugins';\nimport { rawSizes } from '../../../theme';\nimport PendingPluginsActionNotif from './PendingPluginsActionNotif';\nimport SystemRestartNotif from './SystemRestartNotif';\n\ninterface Props {\n  extensions: T.Extension[];\n  fetchPendingPlugins: () => void;\n  fetchSystemStatus: () => void;\n  location: {};\n  organizationsEnabled?: boolean;\n  pendingPlugins: PluginPendingResult;\n  systemStatus: T.SysStatus;\n}\n\nexport default class SettingsNav extends React.PureComponent<Props> {\n  static defaultProps = {\n    extensions: []\n  };\n\n  isSomethingActive(urls: string[]): boolean {\n    const path = window.location.pathname;\n    return urls.some((url: string) => path.indexOf((window as any).baseUrl + url) === 0);\n  }\n\n  isSecurityActive() {\n    const urls = [\n      '/admin/users',\n      '/admin/groups',\n      '/admin/permissions',\n      '/admin/permission_templates'\n    ];\n    return this.isSomethingActive(urls);\n  }\n\n  isProjectsActive() {\n    const urls = ['/admin/projects_management', '/admin/background_tasks'];\n    return this.isSomethingActive(urls);\n  }\n\n  isSystemActive() {\n    const urls = ['/admin/system'];\n    return this.isSomethingActive(urls);\n  }\n\n  isMarketplace() {\n    const urls = ['/admin/marketplace'];\n    return this.isSomethingActive(urls);\n  }\n\n  renderExtension = ({ key, name }: T.Extension) => {\n    return (\n      <li key={key}>\n        <Link activeClassName=\"active\" to={`/admin/extension/${key}`}>\n          {name}\n        </Link>\n      </li>\n    );\n  };\n\n  renderConfigurationTab() {\n    const { organizationsEnabled } = this.props;\n    const extensionsWithoutSupport = this.props.extensions.filter(\n      extension => extension.key !== 'license/support'\n    );\n    return (\n      <Dropdown\n        overlay={\n          <ul className=\"menu\">\n            <li>\n              <IndexLink activeClassName=\"active\" to=\"/admin/settings\">\n                {translate('settings.page')}\n              </IndexLink>\n            </li>\n            <li>\n              <IndexLink activeClassName=\"active\" to=\"/admin/settings/encryption\">\n                {translate('property.category.security.encryption')}\n              </IndexLink>\n            </li>\n            <li>\n              <IndexLink activeClassName=\"active\" to=\"/admin/custom_metrics\">\n                {translate('custom_metrics.page')}\n              </IndexLink>\n            </li>\n            {!organizationsEnabled && (\n              <li>\n                <IndexLink activeClassName=\"active\" to=\"/admin/webhooks\">\n                  {translate('webhooks.page')}\n                </IndexLink>\n              </li>\n            )}\n            {extensionsWithoutSupport.map(this.renderExtension)}\n          </ul>\n        }\n        tagName=\"li\">\n        {({ onToggleClick, open }) => (\n          <a\n            aria-expanded={open}\n            aria-haspopup=\"true\"\n            className={classNames('dropdown-toggle', {\n              active:\n                open ||\n                (!this.isSecurityActive() &&\n                  !this.isProjectsActive() &&\n                  !this.isSystemActive() &&\n                  !this.isSomethingActive(['/admin/extension/license/support']) &&\n                  !this.isMarketplace())\n            })}\n            href=\"#\"\n            id=\"settings-navigation-configuration\"\n            onClick={onToggleClick}>\n            {translate('sidebar.project_settings')}\n            <DropdownIcon className=\"little-spacer-left\" />\n          </a>\n        )}\n      </Dropdown>\n    );\n  }\n\n  renderProjectsTab() {\n    const { organizationsEnabled } = this.props;\n    return (\n      <Dropdown\n        overlay={\n          <ul className=\"menu\">\n            {!organizationsEnabled && (\n              <li>\n                <IndexLink activeClassName=\"active\" to=\"/admin/projects_management\">\n                  {translate('management')}\n                </IndexLink>\n              </li>\n            )}\n            <li>\n              <IndexLink activeClassName=\"active\" to=\"/admin/background_tasks\">\n                {translate('background_tasks.page')}\n              </IndexLink>\n            </li>\n          </ul>\n        }\n        tagName=\"li\">\n        {({ onToggleClick, open }) => (\n          <a\n            aria-expanded={open}\n            aria-haspopup=\"true\"\n            className={classNames('dropdown-toggle', { active: open || this.isProjectsActive() })}\n            href=\"#\"\n            onClick={onToggleClick}>\n            {translate('sidebar.projects')}\n            <DropdownIcon className=\"little-spacer-left\" />\n          </a>\n        )}\n      </Dropdown>\n    );\n  }\n\n  renderSecurityTab() {\n    const { organizationsEnabled } = this.props;\n    return (\n      <Dropdown\n        overlay={\n          <ul className=\"menu\">\n            <li>\n              <IndexLink activeClassName=\"active\" to=\"/admin/users\">\n                {translate('users.page')}\n              </IndexLink>\n            </li>\n            {!organizationsEnabled && (\n              <li>\n                <IndexLink activeClassName=\"active\" to=\"/admin/groups\">\n                  {translate('user_groups.page')}\n                </IndexLink>\n              </li>\n            )}\n            {!organizationsEnabled && (\n              <li>\n                <IndexLink activeClassName=\"active\" to=\"/admin/permissions\">\n                  {translate('global_permissions.page')}\n                </IndexLink>\n              </li>\n            )}\n            {!organizationsEnabled && (\n              <li>\n                <IndexLink activeClassName=\"active\" to=\"/admin/permission_templates\">\n                  {translate('permission_templates')}\n                </IndexLink>\n              </li>\n            )}\n          </ul>\n        }\n        tagName=\"li\">\n        {({ onToggleClick, open }) => (\n          <a\n            aria-expanded={open}\n            aria-haspopup=\"true\"\n            className={classNames('dropdown-toggle', { active: open || this.isSecurityActive() })}\n            href=\"#\"\n            onClick={onToggleClick}>\n            {translate('sidebar.security')}\n            <DropdownIcon className=\"little-spacer-left\" />\n          </a>\n        )}\n      </Dropdown>\n    );\n  }\n\n  render() {\n    const { extensions, pendingPlugins } = this.props;\n    const hasSupportExtension = extensions.find(extension => extension.key === 'license/support');\n    const totalPendingPlugins =\n      pendingPlugins.installing.length +\n      pendingPlugins.removing.length +\n      pendingPlugins.updating.length;\n    const contextNavHeight = rawSizes.contextNavHeightRaw;\n    let notifComponent;\n    if (this.props.systemStatus === 'RESTARTING') {\n      notifComponent = <SystemRestartNotif />;\n    } else if (totalPendingPlugins > 0) {\n      notifComponent = (\n        <PendingPluginsActionNotif\n          fetchSystemStatus={this.props.fetchSystemStatus}\n          pending={pendingPlugins}\n          refreshPending={this.props.fetchPendingPlugins}\n          systemStatus={this.props.systemStatus}\n        />\n      );\n    }\n\n    return (\n      <ContextNavBar\n        height={notifComponent ? contextNavHeight + 30 : contextNavHeight}\n        id=\"context-navigation\"\n        notif={notifComponent}>\n        <header className=\"navbar-context-header\">\n          <h1>{translate('layout.settings')}</h1>\n        </header>\n\n        <NavBarTabs>\n          {this.renderConfigurationTab()}\n          {this.renderSecurityTab()}\n          {this.renderProjectsTab()}\n\n          <li>\n            <IndexLink activeClassName=\"active\" to=\"/admin/system\">\n              {translate('sidebar.system')}\n            </IndexLink>\n          </li>\n\n          <li>\n            <IndexLink activeClassName=\"active\" to=\"/admin/marketplace\">\n              {translate('marketplace.page')}\n            </IndexLink>\n          </li>\n\n          {hasSupportExtension && (\n            <li>\n              <IndexLink activeClassName=\"active\" to=\"/admin/extension/license/support\">\n                {translate('support')}\n              </IndexLink>\n            </li>\n          )}\n        </NavBarTabs>\n      </ContextNavBar>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { connect } from 'react-redux';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getSettingsNavigation } from '../../api/nav';\nimport { getPendingPlugins, PluginPendingResult } from '../../api/plugins';\nimport { getSystemStatus, waitSystemUPStatus } from '../../api/system';\nimport handleRequiredAuthorization from '../../app/utils/handleRequiredAuthorization';\nimport { setAdminPages } from '../../store/appState';\nimport { getAppState, Store } from '../../store/rootReducer';\nimport AdminContext, { defaultPendingPlugins, defaultSystemStatus } from './AdminContext';\nimport SettingsNav from './nav/settings/SettingsNav';\n\ninterface Props {\n  appState: Pick<T.AppState, 'adminPages' | 'canAdmin' | 'organizationsEnabled'>;\n  location: {};\n  setAdminPages: (adminPages: T.Extension[]) => void;\n}\n\ninterface State {\n  pendingPlugins: PluginPendingResult;\n  systemStatus: T.SysStatus;\n}\n\nexport class AdminContainer extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    pendingPlugins: defaultPendingPlugins,\n    systemStatus: defaultSystemStatus\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    if (!this.props.appState.canAdmin) {\n      handleRequiredAuthorization();\n    } else {\n      this.fetchNavigationSettings();\n      this.fetchPendingPlugins();\n      this.fetchSystemStatus();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchNavigationSettings = () => {\n    getSettingsNavigation().then(\n      r => this.props.setAdminPages(r.extensions),\n      () => {}\n    );\n  };\n\n  fetchPendingPlugins = () => {\n    getPendingPlugins().then(\n      pendingPlugins => {\n        if (this.mounted) {\n          this.setState({ pendingPlugins });\n        }\n      },\n      () => {}\n    );\n  };\n\n  fetchSystemStatus = () => {\n    getSystemStatus().then(\n      ({ status }) => {\n        if (this.mounted) {\n          this.setState({ systemStatus: status });\n          if (status === 'RESTARTING') {\n            this.waitRestartingDone();\n          }\n        }\n      },\n      () => {}\n    );\n  };\n\n  waitRestartingDone = () => {\n    waitSystemUPStatus().then(\n      ({ status }) => {\n        if (this.mounted) {\n          this.setState({ systemStatus: status });\n          document.location.reload();\n        }\n      },\n      () => {}\n    );\n  };\n\n  render() {\n    const { adminPages, organizationsEnabled } = this.props.appState;\n\n    // Check that the adminPages are loaded\n    if (!adminPages) {\n      return null;\n    }\n\n    const { pendingPlugins, systemStatus } = this.state;\n    const defaultTitle = translate('layout.settings');\n\n    return (\n      <div>\n        <Helmet defaultTitle={defaultTitle} defer={false} titleTemplate={`%s - ${defaultTitle}`} />\n        <SettingsNav\n          extensions={adminPages}\n          fetchPendingPlugins={this.fetchPendingPlugins}\n          fetchSystemStatus={this.fetchSystemStatus}\n          location={this.props.location}\n          organizationsEnabled={organizationsEnabled}\n          pendingPlugins={pendingPlugins}\n          systemStatus={systemStatus}\n        />\n        <AdminContext.Provider\n          value={{\n            fetchSystemStatus: this.fetchSystemStatus,\n            fetchPendingPlugins: this.fetchPendingPlugins,\n            pendingPlugins,\n            systemStatus\n          }}>\n          {this.props.children}\n        </AdminContext.Provider>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store) => ({ appState: getAppState(state) });\n\nconst mapDispatchToProps = { setAdminPages };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AdminContainer);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar Modal_1 = require(\"./Modal\");\nvar SimpleModal = (function (_super) {\n    __extends(SimpleModal, _super);\n    function SimpleModal() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.mounted = false;\n        _this.state = { submitting: false };\n        _this.stopSubmitting = function () {\n            if (_this.mounted) {\n                _this.setState({ submitting: false });\n            }\n        };\n        _this.handleCloseClick = function (event) {\n            if (event) {\n                event.preventDefault();\n                event.currentTarget.blur();\n            }\n            _this.props.onClose();\n        };\n        _this.handleFormSubmit = function (event) {\n            event.preventDefault();\n            _this.submit();\n        };\n        _this.handleSubmitClick = function (event) {\n            if (event) {\n                event.preventDefault();\n                event.currentTarget.blur();\n            }\n            _this.submit();\n        };\n        _this.submit = function () {\n            var result = _this.props.onSubmit();\n            if (result) {\n                _this.setState({ submitting: true });\n                result.then(_this.stopSubmitting, _this.stopSubmitting);\n            }\n        };\n        return _this;\n    }\n    SimpleModal.prototype.componentDidMount = function () {\n        this.mounted = true;\n    };\n    SimpleModal.prototype.componentWillUnmount = function () {\n        this.mounted = false;\n    };\n    SimpleModal.prototype.render = function () {\n        var _a = this.props, children = _a.children, header = _a.header, onClose = _a.onClose, onSubmit = _a.onSubmit, modalProps = __rest(_a, [\"children\", \"header\", \"onClose\", \"onSubmit\"]);\n        return (React.createElement(Modal_1.default, __assign({ contentLabel: header, onRequestClose: onClose }, modalProps), children({\n            onCloseClick: this.handleCloseClick,\n            onFormSubmit: this.handleFormSubmit,\n            onSubmitClick: this.handleSubmitClick,\n            submitting: this.state.submitting\n        })));\n    };\n    return SimpleModal;\n}(React.Component));\nexports.default = SimpleModal;\n//# sourceMappingURL=SimpleModal.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar l10n_1 = require(\"../../helpers/l10n\");\nvar DeferredSpinner_1 = require(\"../ui/DeferredSpinner\");\nvar buttons_1 = require(\"./buttons\");\nvar ClickEventBoundary_1 = require(\"./ClickEventBoundary\");\nvar SimpleModal_1 = require(\"./SimpleModal\");\nvar ConfirmModal = (function (_super) {\n    __extends(ConfirmModal, _super);\n    function ConfirmModal() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.mounted = false;\n        _this.handleSubmit = function () {\n            var result = _this.props.onConfirm(_this.props.confirmData);\n            if (result) {\n                return result.then(_this.props.onClose, function () { });\n            }\n            else {\n                _this.props.onClose();\n                return undefined;\n            }\n        };\n        _this.renderModalContent = function (_a) {\n            var onCloseClick = _a.onCloseClick, onFormSubmit = _a.onFormSubmit, submitting = _a.submitting;\n            var _b = _this.props, children = _b.children, confirmButtonText = _b.confirmButtonText, confirmDisable = _b.confirmDisable, header = _b.header, headerDescription = _b.headerDescription, isDestructive = _b.isDestructive, _c = _b.cancelButtonText, cancelButtonText = _c === void 0 ? l10n_1.translate('cancel') : _c;\n            return (React.createElement(ClickEventBoundary_1.default, null,\n                React.createElement(\"form\", { onSubmit: onFormSubmit },\n                    React.createElement(\"header\", { className: \"modal-head\" },\n                        React.createElement(\"h2\", null, header),\n                        headerDescription),\n                    React.createElement(\"div\", { className: \"modal-body\" }, children),\n                    React.createElement(\"footer\", { className: \"modal-foot\" },\n                        React.createElement(DeferredSpinner_1.default, { className: \"spacer-right\", loading: submitting }),\n                        React.createElement(buttons_1.SubmitButton, { autoFocus: true, className: isDestructive ? 'button-red' : undefined, disabled: submitting || confirmDisable }, confirmButtonText),\n                        React.createElement(buttons_1.ResetButtonLink, { disabled: submitting, onClick: onCloseClick }, cancelButtonText)))));\n        };\n        return _this;\n    }\n    ConfirmModal.prototype.componentDidMount = function () {\n        this.mounted = true;\n    };\n    ConfirmModal.prototype.componentWillUnmount = function () {\n        this.mounted = false;\n    };\n    ConfirmModal.prototype.render = function () {\n        var _a = this.props, header = _a.header, onClose = _a.onClose, noBackdrop = _a.noBackdrop, size = _a.size;\n        var modalProps = { header: header, onClose: onClose, noBackdrop: noBackdrop, size: size };\n        return (React.createElement(SimpleModal_1.default, __assign({ onSubmit: this.handleSubmit }, modalProps), this.renderModalContent));\n    };\n    return ConfirmModal;\n}(React.PureComponent));\nexports.default = ConfirmModal;\n//# sourceMappingURL=ConfirmModal.js.map","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar ConfirmModal_1 = require(\"./ConfirmModal\");\nvar ModalButton_1 = require(\"./ModalButton\");\nvar ConfirmButton = (function (_super) {\n    __extends(ConfirmButton, _super);\n    function ConfirmButton() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.renderConfirmModal = function (_a) {\n            var onClose = _a.onClose;\n            var _b = _this.props, children = _b.children, modalBody = _b.modalBody, modalHeader = _b.modalHeader, modalHeaderDescription = _b.modalHeaderDescription, confirmModalProps = __rest(_b, [\"children\", \"modalBody\", \"modalHeader\", \"modalHeaderDescription\"]);\n            return (React.createElement(ConfirmModal_1.default, __assign({ header: modalHeader, headerDescription: modalHeaderDescription, onClose: onClose }, confirmModalProps), modalBody));\n        };\n        return _this;\n    }\n    ConfirmButton.prototype.render = function () {\n        return React.createElement(ModalButton_1.default, { modal: this.renderConfirmModal }, this.props.children);\n    };\n    return ConfirmButton;\n}(React.PureComponent));\nexports.default = ConfirmButton;\n//# sourceMappingURL=ConfirmButton.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar ModalButton = (function (_super) {\n    __extends(ModalButton, _super);\n    function ModalButton() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.mounted = false;\n        _this.state = { modal: false };\n        _this.handleButtonClick = function () {\n            _this.setState({ modal: true });\n        };\n        _this.handleFormSubmit = function (event) {\n            if (event) {\n                event.preventDefault();\n            }\n            _this.setState({ modal: true });\n        };\n        _this.handleCloseModal = function () {\n            if (_this.mounted) {\n                _this.setState({ modal: false });\n            }\n        };\n        return _this;\n    }\n    ModalButton.prototype.componentDidMount = function () {\n        this.mounted = true;\n    };\n    ModalButton.prototype.componentWillUnmount = function () {\n        this.mounted = false;\n    };\n    ModalButton.prototype.render = function () {\n        return (React.createElement(React.Fragment, null,\n            this.props.children({\n                onClick: this.handleButtonClick,\n                onFormSubmit: this.handleFormSubmit\n            }),\n            this.state.modal && this.props.modal({ onClose: this.handleCloseModal })));\n    };\n    return ModalButton;\n}(React.PureComponent));\nexports.default = ModalButton;\n//# sourceMappingURL=ModalButton.js.map","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON, requestTryAndRepeatUntil } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { SystemUpgrade } from '../types/system';\n\nexport function setLogLevel(level: string): Promise<void | Response> {\n  return post('/api/system/change_log_level', { level }).catch(throwGlobalError);\n}\n\nexport function getSystemInfo(): Promise<T.SysInfoCluster | T.SysInfoStandalone> {\n  return getJSON('/api/system/info').catch(throwGlobalError);\n}\n\nexport function getSystemStatus(): Promise<{ id: string; version: string; status: T.SysStatus }> {\n  return getJSON('/api/system/status');\n}\n\nexport function getSystemUpgrades(): Promise<{\n  upgrades: SystemUpgrade[];\n  updateCenterRefresh: string;\n}> {\n  return getJSON('/api/system/upgrades');\n}\n\nexport function getMigrationStatus(): Promise<{\n  message?: string;\n  startedAt?: string;\n  state: string;\n}> {\n  return getJSON('/api/system/db_migration_status');\n}\n\nexport function migrateDatabase(): Promise<{\n  message?: string;\n  startedAt?: string;\n  state: string;\n}> {\n  return postJSON('/api/system/migrate_db');\n}\n\nexport function restart(): Promise<void | Response> {\n  return post('/api/system/restart').catch(throwGlobalError);\n}\n\nexport function waitSystemUPStatus(): Promise<{\n  id: string;\n  version: string;\n  status: T.SysStatus;\n}> {\n  return requestTryAndRepeatUntil(\n    getSystemStatus,\n    { max: -1, slowThreshold: -15 },\n    ({ status }) => status === 'UP'\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { BranchParameters } from '../types/branch-like';\n\nexport function getGlobalNavigation(): Promise<T.AppState> {\n  return getJSON('/api/navigation/global');\n}\n\ntype NavComponent = T.Omit<T.Component, 'alm' | 'qualifier' | 'leakPeriodDate' | 'path' | 'tags'>;\n\nexport function getComponentNavigation(\n  data: { component: string } & BranchParameters\n): Promise<NavComponent> {\n  return getJSON('/api/navigation/component', data).catch(throwGlobalError);\n}\n\nexport function getMarketplaceNavigation(): Promise<{ serverId: string; ncloc: number }> {\n  return getJSON('/api/navigation/marketplace').catch(throwGlobalError);\n}\n\nexport function getSettingsNavigation(): Promise<any> {\n  return getJSON('/api/navigation/settings').catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport getHistory from 'sonar-ui-common/helpers/getHistory';\nimport { requireAuthorization } from '../../store/appState';\nimport getStore from './getStore';\n\nexport default function handleRequiredAuthorization() {\n  const store = getStore();\n  const history = getHistory();\n\n  const returnTo = window.location.pathname + window.location.search + window.location.hash;\n\n  store.dispatch(requireAuthorization());\n  history.replace({ pathname: '/sessions/new', query: { return_to: returnTo } });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { findLastIndex } from 'lodash';\nimport { getJSON, post } from 'sonar-ui-common/helpers/request';\nimport { isDefined } from 'sonar-ui-common/helpers/types';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface Plugin {\n  key: string;\n  name: string;\n  category?: string;\n  description?: string;\n  editionBundled?: boolean;\n  license?: string;\n  organizationName?: string;\n  homepageUrl?: string;\n  organizationUrl?: string;\n  issueTrackerUrl?: string;\n  termsAndConditionsUrl?: string;\n}\n\nexport interface Release {\n  version: string;\n  date: string;\n  description?: string;\n  changeLogUrl?: string;\n}\n\nexport interface Update {\n  status: string;\n  release?: Release;\n  requires: Plugin[];\n  previousUpdates?: Update[];\n}\n\nexport interface PluginPendingResult {\n  installing: PluginPending[];\n  updating: PluginPending[];\n  removing: PluginPending[];\n}\n\nexport interface PluginAvailable extends Plugin {\n  release: Release;\n  update: Update;\n}\n\nexport interface PluginPending extends Plugin {\n  version: string;\n  implementationBuild: string;\n}\n\nexport interface PluginInstalled extends PluginPending {\n  documentationPath?: string;\n  filename: string;\n  hash: string;\n  sonarLintSupported: boolean;\n  updatedAt: number;\n  updates?: Update[];\n}\n\nexport function getAvailablePlugins(): Promise<{\n  plugins: PluginAvailable[];\n  updateCenterRefresh: string;\n}> {\n  return getJSON('/api/plugins/available').catch(throwGlobalError);\n}\n\nexport function getPendingPlugins(): Promise<PluginPendingResult> {\n  return getJSON('/api/plugins/pending').catch(throwGlobalError);\n}\n\nfunction getLastUpdates(updates: undefined | Update[]): Update[] {\n  if (!updates) {\n    return [];\n  }\n  const lastUpdate = ['COMPATIBLE', 'REQUIRES_SYSTEM_UPGRADE', 'DEPS_REQUIRE_SYSTEM_UPGRADE'].map(\n    status => {\n      const index = findLastIndex(updates, update => update.status === status);\n      return index > -1 ? updates[index] : undefined;\n    }\n  );\n  return lastUpdate.filter(isDefined);\n}\n\nfunction addChangelog(update: Update, updates?: Update[]) {\n  if (!updates) {\n    return update;\n  }\n  const index = updates.indexOf(update);\n  const previousUpdates = index > 0 ? updates.slice(0, index) : [];\n  return { ...update, previousUpdates };\n}\n\nexport function getInstalledPlugins(): Promise<PluginInstalled[]> {\n  return getJSON('/api/plugins/installed', { f: 'category' }).then(\n    ({ plugins }) => plugins,\n    throwGlobalError\n  );\n}\n\nexport function getInstalledPluginsWithUpdates(): Promise<PluginInstalled[]> {\n  return Promise.all([\n    getJSON('/api/plugins/installed', { f: 'category' }),\n    getJSON('/api/plugins/updates')\n  ])\n    .then(([installed, updates]) =>\n      installed.plugins.map((plugin: PluginInstalled) => {\n        const updatePlugin: PluginInstalled = updates.plugins.find(\n          (p: PluginInstalled) => p.key === plugin.key\n        );\n        if (updatePlugin) {\n          return {\n            ...updatePlugin,\n            ...plugin,\n            updates: getLastUpdates(updatePlugin.updates).map(update =>\n              addChangelog(update, updatePlugin.updates)\n            )\n          };\n        }\n        return plugin;\n      })\n    )\n    .catch(throwGlobalError);\n}\n\nexport function getPluginUpdates(): Promise<PluginInstalled[]> {\n  return Promise.all([getJSON('/api/plugins/updates'), getJSON('/api/plugins/installed')])\n    .then(([updates, installed]) =>\n      updates.plugins.map((updatePlugin: PluginInstalled) => {\n        const updates = getLastUpdates(updatePlugin.updates).map(update =>\n          addChangelog(update, updatePlugin.updates)\n        );\n        const plugin = installed.plugins.find((p: PluginInstalled) => p.key === updatePlugin.key);\n        if (plugin) {\n          return {\n            ...plugin,\n            ...updatePlugin,\n            updates\n          };\n        }\n        return { ...updatePlugin, updates };\n      })\n    )\n    .catch(throwGlobalError);\n}\n\nexport function installPlugin(data: { key: string }): Promise<void | Response> {\n  return post('/api/plugins/install', data).catch(throwGlobalError);\n}\n\nexport function uninstallPlugin(data: { key: string }): Promise<void | Response> {\n  return post('/api/plugins/uninstall', data).catch(throwGlobalError);\n}\n\nexport function updatePlugin(data: { key: string }): Promise<void | Response> {\n  return post('/api/plugins/update', data).catch(throwGlobalError);\n}\n\nexport function cancelPendingPlugins(): Promise<void | Response> {\n  return post('/api/plugins/cancel_all').catch(throwGlobalError);\n}\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIteratee = require('./_baseIteratee'),\n    toInteger = require('./toInteger');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * This method is like `_.findIndex` except that it iterates over elements\n * of `collection` from right to left.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=array.length-1] The index to search from.\n * @returns {number} Returns the index of the found element, else `-1`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': true },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': false }\n * ];\n *\n * _.findLastIndex(users, function(o) { return o.user == 'pebbles'; });\n * // => 2\n *\n * // The `_.matches` iteratee shorthand.\n * _.findLastIndex(users, { 'user': 'barney', 'active': true });\n * // => 0\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findLastIndex(users, ['active', false]);\n * // => 2\n *\n * // The `_.property` iteratee shorthand.\n * _.findLastIndex(users, 'active');\n * // => 0\n */\nfunction findLastIndex(array, predicate, fromIndex) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return -1;\n  }\n  var index = length - 1;\n  if (fromIndex !== undefined) {\n    index = toInteger(fromIndex);\n    index = fromIndex < 0\n      ? nativeMax(length + index, 0)\n      : nativeMin(index, length - 1);\n  }\n  return baseFindIndex(array, baseIteratee(predicate, 3), index, true);\n}\n\nmodule.exports = findLastIndex;\n"],"sourceRoot":""}