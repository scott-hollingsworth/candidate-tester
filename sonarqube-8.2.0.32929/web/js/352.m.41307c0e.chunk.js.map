{"version":3,"sources":["webpack:///./src/main/js/app/components/ProjectAdminContainer.tsx","webpack:///./src/main/js/app/components/a11y/A11ySkipTarget.tsx","webpack:///./src/main/js/app/utils/handleRequiredAuthorization.ts"],"names":["ProjectAdminContainer","react__WEBPACK_IMPORTED_MODULE_0__","[object Object]","this","checkPermissions","isProjectAdmin","Object","_utils_handleRequiredAuthorization__WEBPACK_IMPORTED_MODULE_1__","configuration","props","component","showSettings","_this$props","children","_objectWithoutProperties","_a11y_A11ySkipTarget__WEBPACK_IMPORTED_MODULE_2__","anchor","__webpack_require__","d","__webpack_exports__","A11ySkipTarget","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_1__","_A11yContext__WEBPACK_IMPORTED_MODULE_2__","Consumer","_ref","addA11ySkipLink","removeA11ySkipLink","A11ySkipTargetInner","assign","getLink","key","_this$props$label","label","weight","id","concat","handleRequiredAuthorization","sonar_ui_common_helpers_getHistory__WEBPACK_IMPORTED_MODULE_0__","sonar_ui_common_helpers_getHistory__WEBPACK_IMPORTED_MODULE_0___default","n","_store_appState__WEBPACK_IMPORTED_MODULE_1__","_getStore__WEBPACK_IMPORTED_MODULE_2__","store","history","returnTo","window","location","pathname","search","hash","dispatch","replace","query","return_to"],"mappings":"2hBAmCe,MAAMA,UAA8BC,EAAA,cACjDC,oBACEC,KAAKC,mBAGPF,qBACEC,KAAKC,mBAGPF,mBACOC,KAAKE,kBACRC,OAAAC,EAAA,EAAAD,GAIJJ,iBAAc,MACJM,EAAkBL,KAAKM,MAAMC,UAA7BF,cACR,OAAwB,MAAjBA,GAAyBA,EAAcG,aAGhDT,SACE,IAAKC,KAAKE,iBACR,OAAO,KAFL,MAAAO,EAK2BT,KAAKM,MAA5BI,EALJD,EAKIC,SAAaJ,EALjBK,EAAAF,EAAA,cAMJ,OACEX,EAAA,cAAAA,EAAA,cACEA,EAAA,cAACc,EAAA,EAAc,CAACC,OAAO,eACtBf,EAAA,aAAmBY,EAAUJ,wCChEtCQ,EAAAC,EAAAC,EAAA,sBAAAC,IAAA,IAAAnB,EAAAgB,EAAA,GAAAI,EAAAJ,EAAA,GAAAK,EAAAL,EAAA,KA6Be,SAASG,EAAeX,GACrC,OACER,EAAA,cAACqB,EAAA,EAAYC,SAAQ,KAClBC,IAAA,IAAGC,EAAHD,EAAGC,gBAAiBC,EAApBF,EAAoBE,mBAApB,OACCzB,EAAA,cAAC0B,EAAmBrB,OAAAsB,OAAA,CAClBH,gBAAiBA,EACjBC,mBAAoBA,GAChBjB,MAYP,MAAMkB,UAA4B1B,EAAA,cAAzCC,kCASEC,KAAA0B,QAAU,KAAqB,MAAAjB,EACyCT,KAAKM,MAA3DqB,EADalB,EACrBI,OADqBe,EAAAnB,EACRoB,MACrB,MAAO,CAAEF,MAAKE,WAFe,IAAAD,EACAzB,OAAAe,EAAA,UAAAf,CAAU,mBADVyB,EAERE,OAFQrB,EAC8BqB,SAT7D/B,oBACEC,KAAKM,MAAMgB,gBAAgBtB,KAAK0B,WAGlC3B,uBACEC,KAAKM,MAAMiB,mBAAmBvB,KAAK0B,WAQrC3B,SAAM,MACIc,EAAWb,KAAKM,MAAhBO,OACR,OAAOf,EAAA,sBAAMiC,GAAE,gBAAAC,OAAkBnB,yCChErCC,EAAAC,EAAAC,EAAA,sBAAAiB,IAAA,IAAAC,EAAApB,EAAA,IAAAqB,EAAArB,EAAAsB,EAAAF,GAAAG,EAAAvB,EAAA,KAAAwB,EAAAxB,EAAA,KAuBe,SAASmB,IACtB,MAAMM,EAAQpC,OAAAmC,EAAA,QAAAnC,GACRqC,EAAUL,MAEVM,EAAWC,OAAOC,SAASC,SAAWF,OAAOC,SAASE,OAASH,OAAOC,SAASG,KAErFP,EAAMQ,SAAS5C,OAAAkC,EAAA,EAAAlC,IACfqC,EAAQQ,QAAQ,CAAEJ,SAAU,gBAAiBK,MAAO,CAAEC,UAAWT","file":"js/352.m.41307c0e.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { BranchLike } from '../../types/branch-like';\nimport handleRequiredAuthorization from '../utils/handleRequiredAuthorization';\nimport A11ySkipTarget from './a11y/A11ySkipTarget';\n\ninterface Props {\n  children: JSX.Element;\n  branchLike?: BranchLike;\n  branchLikes: BranchLike[];\n  component: T.Component;\n  isInProgress?: boolean;\n  isPending?: boolean;\n  onBranchesChange: () => void;\n  onComponentChange: (changes: {}) => void;\n}\n\nexport default class ProjectAdminContainer extends React.PureComponent<Props> {\n  componentDidMount() {\n    this.checkPermissions();\n  }\n\n  componentDidUpdate() {\n    this.checkPermissions();\n  }\n\n  checkPermissions() {\n    if (!this.isProjectAdmin()) {\n      handleRequiredAuthorization();\n    }\n  }\n\n  isProjectAdmin() {\n    const { configuration } = this.props.component;\n    return configuration != null && configuration.showSettings;\n  }\n\n  render() {\n    if (!this.isProjectAdmin()) {\n      return null;\n    }\n\n    const { children, ...props } = this.props;\n    return (\n      <>\n        <A11ySkipTarget anchor=\"admin_main\" />\n        {React.cloneElement(children, props)}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { A11yContext } from './A11yContext';\n\ninterface Props {\n  anchor: string;\n  label?: string;\n  weight?: number;\n}\n\nexport default function A11ySkipTarget(props: Props) {\n  return (\n    <A11yContext.Consumer>\n      {({ addA11ySkipLink, removeA11ySkipLink }) => (\n        <A11ySkipTargetInner\n          addA11ySkipLink={addA11ySkipLink}\n          removeA11ySkipLink={removeA11ySkipLink}\n          {...props}\n        />\n      )}\n    </A11yContext.Consumer>\n  );\n}\n\ninterface InnerProps {\n  addA11ySkipLink: (link: T.A11ySkipLink) => void;\n  removeA11ySkipLink: (link: T.A11ySkipLink) => void;\n}\n\nexport class A11ySkipTargetInner extends React.PureComponent<Props & InnerProps> {\n  componentDidMount() {\n    this.props.addA11ySkipLink(this.getLink());\n  }\n\n  componentWillUnmount() {\n    this.props.removeA11ySkipLink(this.getLink());\n  }\n\n  getLink = (): T.A11ySkipLink => {\n    const { anchor: key, label = translate('skip_to_content'), weight } = this.props;\n    return { key, label, weight };\n  };\n\n  render() {\n    const { anchor } = this.props;\n    return <span id={`a11y_target__${anchor}`} />;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport getHistory from 'sonar-ui-common/helpers/getHistory';\nimport { requireAuthorization } from '../../store/appState';\nimport getStore from './getStore';\n\nexport default function handleRequiredAuthorization() {\n  const store = getStore();\n  const history = getHistory();\n\n  const returnTo = window.location.pathname + window.location.search + window.location.hash;\n\n  store.dispatch(requireAuthorization());\n  history.replace({ pathname: '/sessions/new', query: { return_to: returnTo } });\n}\n"],"sourceRoot":""}