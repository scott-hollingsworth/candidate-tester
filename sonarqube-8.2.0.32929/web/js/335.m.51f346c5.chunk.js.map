{"version":3,"sources":["webpack:///./src/main/js/api/webhooks.ts","webpack:///./src/main/js/apps/webhooks/components/CreateWebhookForm.tsx","webpack:///./src/main/js/apps/webhooks/components/PageActions.tsx","webpack:///./src/main/js/apps/webhooks/components/PageHeader.tsx","webpack:///./src/main/js/apps/webhooks/components/DeleteWebhookForm.tsx","webpack:///./src/main/js/apps/webhooks/components/DeliveryItem.tsx","webpack:///./src/main/js/apps/webhooks/components/DeliveryAccordion.tsx","webpack:///./src/main/js/apps/webhooks/components/DeliveriesForm.tsx","webpack:///./src/main/js/apps/webhooks/components/WebhookActions.tsx","webpack:///./src/main/js/apps/webhooks/components/LatestDeliveryForm.tsx","webpack:///./src/main/js/apps/webhooks/components/WebhookItemLatestDelivery.tsx","webpack:///./src/main/js/apps/webhooks/components/WebhookItem.tsx","webpack:///./src/main/js/apps/webhooks/components/WebhooksList.tsx","webpack:///./src/main/js/apps/webhooks/components/App.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./src/main/js/components/intl/DateTimeFormatter.tsx","webpack:///./src/main/js/components/common/CodeSnippet.tsx","webpack:///./src/main/js/components/common/CodeSnippet.css?2955","webpack:///./src/main/js/components/common/CodeSnippet.css"],"names":["searchDeliveries","data","Object","request","catch","throwGlobalError","getDelivery","CreateWebhookForm_CreateWebhookForm","index_js_exposed","[object Object]","this","handleCancelClick","event","preventDefault","currentTarget","blur","props","onClose","handleValidate","name","secret","url","errors","trim","l10n","startsWith","valid_url","length","webhook","isUpdate","modalHeader","confirmButtonText","ValidationModal_default","a","header","initialValues","isInitialValid","onSubmit","onDone","size","validate","_ref","dirty","handleBlur","handleChange","isSubmitting","touched","values","InputValidationField_default","autoFocus","disabled","error","id","label","htmlFor","className","onBlur","onChange","type","value","description","WEBHOOKS_LIMIT","PageActions_PageActions","mounted","state","openCreate","handleCreateClose","setState","handleCreateOpen","renderCreate","webhooksCount","Tooltip_default","overlay","buttons","onClick","onCreate","loading","PageHeader","children","index_es","defaultMessage","es","to","DeleteWebhookForm","SimpleModal_default","_ref2","onCloseClick","onFormSubmit","submitting","DeferredSpinner_default","DeliveryItem","delivery","payload","httpStatus","measures","durationMs","CodeSnippet","noCopy","snippet","formatPayload","JSON","stringify","parse","undefined","DeliveryAccordion_DeliveryAccordion","_this","open","fetchPayload","arguments","deliveryId","then","handleClick","_ref3","_this$state","BoxedGroupAccordion_default","renderHeader","success","AlertSuccessIcon_default","AlertErrorIcon_default","title","DateTimeFormatter","date","at","PAGE_SIZE","DeliveriesForm_DeliveriesForm","deliveries","fetchDeliveries","key","ps","paging","stopLoading","fetchMoreDeliveries","p","pageIndex","_ref4","Modal_default","contentLabel","onRequestClose","map","ListFooter_default","count","loadMore","ready","total","WebhookActions_WebhookActions","deleting","updating","handleDelete","onDelete","handleDeleteClick","handleDeletingStop","handleDeliveriesClick","handleDeliveriesStop","handleUpdate","onUpdate","_objectSpread","handleUpdateClick","handleUpdatingStop","ActionsDropdown_default","ActionsDropdown","latestDelivery","destructive","LatestDeliveryForm_LatestDeliveryForm","_this$props","WebhookItemLatestDelivery_WebhookItemLatestDelivery","modal","handleModalClose","BulletListIcon_default","WebhookItem","WebhooksList_WebhooksList","webhooks","sortBy_default","toLowerCase","App_App","fetchWebhooks","searchWebhooks","getScopeParams","organization","component","organizationKey","project","handleCreate","createWebhook","App_objectSpread","deleteWebhook","_ref5","filter","item","updateWebhook","_ref6","Suggestions","suggestions","index_module","defer","__webpack_require__","d","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0__","_SuggestionsContext__WEBPACK_IMPORTED_MODULE_1__","Consumer","addSuggestions","removeSuggestions","SuggestionsInner","prevProps","formatterOption","react_intl__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_helpers_dates__WEBPACK_IMPORTED_MODULE_2__","year","month","day","hour","minute","assign","classnames__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_controls_clipboard__WEBPACK_IMPORTED_MODULE_2__","s","isOneLine","render","wrap","snippetArray","Array","isArray","line","finalSnippet","join","code-snippet-oneline","code-snippet-wrap","copyValue","content","module","i","options","hmr","transform","insertInto","locals","exports","push"],"mappings":"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","file":"js/335.m.51f346c5.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport function createWebhook(data: {\n  name: string;\n  organization: string | undefined;\n  project?: string;\n  secret?: string;\n  url: string;\n}): Promise<{ webhook: T.Webhook }> {\n  return postJSON('/api/webhooks/create', data).catch(throwGlobalError);\n}\n\nexport function deleteWebhook(data: { webhook: string }): Promise<void | Response> {\n  return post('/api/webhooks/delete', data).catch(throwGlobalError);\n}\n\nexport function searchWebhooks(data: {\n  organization: string | undefined;\n  project?: string;\n}): Promise<{ webhooks: T.Webhook[] }> {\n  return getJSON('/api/webhooks/list', data).catch(throwGlobalError);\n}\n\nexport function updateWebhook(data: {\n  webhook: string;\n  name: string;\n  secret?: string;\n  url: string;\n}): Promise<void | Response> {\n  return post('/api/webhooks/update', data).catch(throwGlobalError);\n}\n\nexport function searchDeliveries(data: {\n  ceTaskId?: string;\n  componentKey?: string;\n  webhook?: string;\n  p?: number;\n  ps?: number;\n}): Promise<{\n  deliveries: T.WebhookDelivery[];\n  paging: T.Paging;\n}> {\n  return getJSON('/api/webhooks/deliveries', data).catch(throwGlobalError);\n}\n\nexport function getDelivery(data: {\n  deliveryId: string;\n}): Promise<{ delivery: T.WebhookDelivery & { payload: string } }> {\n  return getJSON('/api/webhooks/delivery', data).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport InputValidationField from 'sonar-ui-common/components/controls/InputValidationField';\nimport ValidationModal from 'sonar-ui-common/components/controls/ValidationModal';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { isWebUri } from 'valid-url';\n\ninterface Props {\n  onClose: () => void;\n  onDone: (data: Values) => Promise<void>;\n  webhook?: T.Webhook;\n}\n\ninterface Values {\n  name: string;\n  secret: string;\n  url: string;\n}\n\nexport default class CreateWebhookForm extends React.PureComponent<Props> {\n  handleCancelClick = (event: React.SyntheticEvent<HTMLButtonElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.onClose();\n  };\n\n  handleValidate = (data: Values) => {\n    const { name, secret, url } = data;\n    const errors: { name?: string; secret?: string; url?: string } = {};\n    if (!name.trim()) {\n      errors.name = translate('webhooks.name.required');\n    }\n    if (!url.trim()) {\n      errors.url = translate('webhooks.url.required');\n    } else if (!url.startsWith('http://') && !url.startsWith('https://')) {\n      errors.url = translate('webhooks.url.bad_protocol');\n    } else if (!isWebUri(url)) {\n      errors.url = translate('webhooks.url.bad_format');\n    }\n    if (secret && secret.length > 200) {\n      errors.secret = translate('webhooks.secret.bad_format');\n    }\n    return errors;\n  };\n\n  render() {\n    const { webhook } = this.props;\n    const isUpdate = !!webhook;\n    const modalHeader = isUpdate ? translate('webhooks.update') : translate('webhooks.create');\n    const confirmButtonText = isUpdate ? translate('update_verb') : translate('create');\n    return (\n      <ValidationModal\n        confirmButtonText={confirmButtonText}\n        header={modalHeader}\n        initialValues={{\n          name: (webhook && webhook.name) || '',\n          secret: (webhook && webhook.secret) || '',\n          url: (webhook && webhook.url) || ''\n        }}\n        isInitialValid={isUpdate}\n        onClose={this.props.onClose}\n        onSubmit={this.props.onDone}\n        size=\"small\"\n        validate={this.handleValidate}>\n        {({ dirty, errors, handleBlur, handleChange, isSubmitting, touched, values }) => (\n          <>\n            <InputValidationField\n              autoFocus={true}\n              dirty={dirty}\n              disabled={isSubmitting}\n              error={errors.name}\n              id=\"webhook-name\"\n              label={\n                <label htmlFor=\"webhook-name\">\n                  {translate('webhooks.name')}\n                  <em className=\"mandatory\">*</em>\n                </label>\n              }\n              name=\"name\"\n              onBlur={handleBlur}\n              onChange={handleChange}\n              touched={touched.name}\n              type=\"text\"\n              value={values.name}\n            />\n            <InputValidationField\n              description={translate('webhooks.url.description')}\n              dirty={dirty}\n              disabled={isSubmitting}\n              error={errors.url}\n              id=\"webhook-url\"\n              label={\n                <label htmlFor=\"webhook-url\">\n                  {translate('webhooks.url')}\n                  <em className=\"mandatory\">*</em>\n                </label>\n              }\n              name=\"url\"\n              onBlur={handleBlur}\n              onChange={handleChange}\n              touched={touched.url}\n              type=\"text\"\n              value={values.url}\n            />\n            <InputValidationField\n              description={translate('webhooks.secret.description')}\n              dirty={dirty}\n              disabled={isSubmitting}\n              error={errors.secret}\n              id=\"webhook-secret\"\n              label={<label htmlFor=\"webhook-secret\">{translate('webhooks.secret')}</label>}\n              name=\"secret\"\n              onBlur={handleBlur}\n              onChange={handleChange}\n              touched={touched.secret}\n              type=\"password\"\n              value={values.secret}\n            />\n          </>\n        )}\n      </ValidationModal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport CreateWebhookForm from './CreateWebhookForm';\n\ninterface Props {\n  loading: boolean;\n  onCreate: (data: { name: string; secret?: string; url: string }) => Promise<void>;\n  webhooksCount: number;\n}\n\ninterface State {\n  openCreate: boolean;\n}\n\nconst WEBHOOKS_LIMIT = 10;\n\nexport default class PageActions extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { openCreate: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleCreateClose = () => {\n    if (this.mounted) {\n      this.setState({ openCreate: false });\n    }\n  };\n\n  handleCreateOpen = () => {\n    this.setState({ openCreate: true });\n  };\n\n  renderCreate = () => {\n    if (this.props.webhooksCount >= WEBHOOKS_LIMIT) {\n      return (\n        <Tooltip overlay={translateWithParameters('webhooks.maximum_reached', WEBHOOKS_LIMIT)}>\n          <Button className=\"js-webhook-create disabled\">{translate('create')}</Button>\n        </Tooltip>\n      );\n    }\n\n    return (\n      <>\n        <Button className=\"js-webhook-create\" onClick={this.handleCreateOpen}>\n          {translate('create')}\n        </Button>\n        {this.state.openCreate && (\n          <CreateWebhookForm onClose={this.handleCreateClose} onDone={this.props.onCreate} />\n        )}\n      </>\n    );\n  };\n\n  render() {\n    if (this.props.loading) {\n      return null;\n    }\n\n    return <div className=\"page-actions\">{this.renderCreate()}</div>;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  children?: React.ReactNode;\n  loading: boolean;\n}\n\nexport default function PageHeader({ children, loading }: Props) {\n  return (\n    <header className=\"page-header\">\n      <h1 className=\"page-title\">{translate('webhooks.page')}</h1>\n      {loading && <i className=\"spinner\" />}\n\n      {children}\n\n      <p className=\"page-description\">\n        <FormattedMessage\n          defaultMessage={translate('webhooks.description')}\n          id=\"webhooks.description\"\n          values={{\n            url: (\n              <Link to=\"/documentation/project-administration/webhooks/\">\n                {translate('webhooks.documentation_link')}\n              </Link>\n            )\n          }}\n        />\n      </p>\n    </header>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport SimpleModal from 'sonar-ui-common/components/controls/SimpleModal';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  onClose: () => void;\n  onSubmit: () => Promise<void>;\n  webhook: T.Webhook;\n}\n\nexport default function DeleteWebhookForm({ onClose, onSubmit, webhook }: Props) {\n  const header = translate('webhooks.delete');\n\n  return (\n    <SimpleModal header={header} onClose={onClose} onSubmit={onSubmit}>\n      {({ onCloseClick, onFormSubmit, submitting }) => (\n        <form onSubmit={onFormSubmit}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n\n          <div className=\"modal-body\">\n            {translateWithParameters('webhooks.delete.confirm', webhook.name)}\n          </div>\n\n          <footer className=\"modal-foot\">\n            <DeferredSpinner className=\"spacer-right\" loading={submitting} />\n            <SubmitButton className=\"button-red\" disabled={submitting}>\n              {translate('delete')}\n            </SubmitButton>\n            <ResetButtonLink disabled={submitting} onClick={onCloseClick}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      )}\n    </SimpleModal>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport CodeSnippet from '../../../components/common/CodeSnippet';\n\ninterface Props {\n  className?: string;\n  delivery: T.WebhookDelivery;\n  loading: boolean;\n  payload: string | undefined;\n}\n\nexport default function DeliveryItem({ className, delivery, loading, payload }: Props) {\n  return (\n    <div className={className}>\n      <p className=\"spacer-bottom\">\n        {translateWithParameters(\n          'webhooks.delivery.response_x',\n          delivery.httpStatus || translate('webhooks.delivery.server_unreachable')\n        )}\n      </p>\n      <p className=\"spacer-bottom\">\n        {translateWithParameters(\n          'webhooks.delivery.duration_x',\n          formatMeasure(delivery.durationMs, 'MILLISEC')\n        )}\n      </p>\n      <p className=\"spacer-bottom\">{translate('webhooks.delivery.payload')}</p>\n      <DeferredSpinner className=\"spacer-left spacer-top\" loading={loading}>\n        {payload && <CodeSnippet noCopy={true} snippet={formatPayload(payload)} />}\n      </DeferredSpinner>\n    </div>\n  );\n}\n\nfunction formatPayload(payload: string) {\n  try {\n    return JSON.stringify(JSON.parse(payload), undefined, 2);\n  } catch (error) {\n    return payload;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport BoxedGroupAccordion from 'sonar-ui-common/components/controls/BoxedGroupAccordion';\nimport AlertErrorIcon from 'sonar-ui-common/components/icons/AlertErrorIcon';\nimport AlertSuccessIcon from 'sonar-ui-common/components/icons/AlertSuccessIcon';\nimport { getDelivery } from '../../../api/webhooks';\nimport DateTimeFormatter from '../../../components/intl/DateTimeFormatter';\nimport DeliveryItem from './DeliveryItem';\n\ninterface Props {\n  delivery: T.WebhookDelivery;\n}\n\ninterface State {\n  loading: boolean;\n  open: boolean;\n  payload?: string;\n}\n\nexport default class DeliveryAccordion extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: false, open: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchPayload = ({ delivery } = this.props) => {\n    this.setState({ loading: true });\n    return getDelivery({ deliveryId: delivery.id }).then(\n      ({ delivery }) => {\n        if (this.mounted) {\n          this.setState({ payload: delivery.payload, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  formatPayload = (payload: string) => {\n    try {\n      return JSON.stringify(JSON.parse(payload), undefined, 2);\n    } catch (error) {\n      return payload;\n    }\n  };\n\n  handleClick = () => {\n    if (!this.state.payload) {\n      this.fetchPayload();\n    }\n    this.setState(({ open }) => ({ open: !open }));\n  };\n\n  render() {\n    const { delivery } = this.props;\n    const { loading, open, payload } = this.state;\n\n    return (\n      <BoxedGroupAccordion\n        onClick={this.handleClick}\n        open={open}\n        renderHeader={() =>\n          delivery.success ? (\n            <AlertSuccessIcon className=\"pull-right js-success\" />\n          ) : (\n            <AlertErrorIcon className=\"pull-right js-error\" />\n          )\n        }\n        title={<DateTimeFormatter date={delivery.at} />}>\n        <DeliveryItem\n          className=\"big-spacer-left\"\n          delivery={delivery}\n          loading={loading}\n          payload={payload}\n        />\n      </BoxedGroupAccordion>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { searchDeliveries } from '../../../api/webhooks';\nimport DeliveryAccordion from './DeliveryAccordion';\n\ninterface Props {\n  onClose: () => void;\n  webhook: T.Webhook;\n}\n\ninterface State {\n  deliveries: T.WebhookDelivery[];\n  loading: boolean;\n  paging?: T.Paging;\n}\n\nconst PAGE_SIZE = 10;\n\nexport default class DeliveriesForm extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { deliveries: [], loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchDeliveries();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchDeliveries = ({ webhook } = this.props) => {\n    searchDeliveries({ webhook: webhook.key, ps: PAGE_SIZE }).then(({ deliveries, paging }) => {\n      if (this.mounted) {\n        this.setState({ deliveries, loading: false, paging });\n      }\n    }, this.stopLoading);\n  };\n\n  fetchMoreDeliveries = ({ webhook } = this.props) => {\n    const { paging } = this.state;\n    if (paging) {\n      this.setState({ loading: true });\n      searchDeliveries({ webhook: webhook.key, p: paging.pageIndex + 1, ps: PAGE_SIZE }).then(\n        ({ deliveries, paging }) => {\n          if (this.mounted) {\n            this.setState((state: State) => ({\n              deliveries: [...state.deliveries, ...deliveries],\n              loading: false,\n              paging\n            }));\n          }\n        },\n        this.stopLoading\n      );\n    }\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  render() {\n    const { webhook } = this.props;\n    const { deliveries, loading, paging } = this.state;\n    const header = translateWithParameters('webhooks.deliveries_for_x', webhook.name);\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n        <div className=\"modal-body modal-container\">\n          {deliveries.map(delivery => (\n            <DeliveryAccordion delivery={delivery} key={delivery.id} />\n          ))}\n          <div className=\"text-center\">\n            <DeferredSpinner loading={loading} />\n          </div>\n          {paging !== undefined && (\n            <ListFooter\n              className=\"little-spacer-bottom\"\n              count={deliveries.length}\n              loadMore={this.fetchMoreDeliveries}\n              ready={!loading}\n              total={paging.total}\n            />\n          )}\n        </div>\n        <footer className=\"modal-foot\">\n          <ResetButtonLink className=\"js-modal-close\" onClick={this.props.onClose}>\n            {translate('close')}\n          </ResetButtonLink>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ActionsDropdown, {\n  ActionsDropdownDivider,\n  ActionsDropdownItem\n} from 'sonar-ui-common/components/controls/ActionsDropdown';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport CreateWebhookForm from './CreateWebhookForm';\nimport DeleteWebhookForm from './DeleteWebhookForm';\nimport DeliveriesForm from './DeliveriesForm';\n\ninterface Props {\n  onDelete: (webhook: string) => Promise<void>;\n  onUpdate: (data: { webhook: string; name: string; url: string }) => Promise<void>;\n  webhook: T.Webhook;\n}\n\ninterface State {\n  deleting: boolean;\n  deliveries: boolean;\n  updating: boolean;\n}\n\nexport default class WebhookActions extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { deleting: false, deliveries: false, updating: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleDelete = () => {\n    return this.props.onDelete(this.props.webhook.key);\n  };\n\n  handleDeleteClick = () => {\n    this.setState({ deleting: true });\n  };\n\n  handleDeletingStop = () => {\n    if (this.mounted) {\n      this.setState({ deleting: false });\n    }\n  };\n\n  handleDeliveriesClick = () => {\n    this.setState({ deliveries: true });\n  };\n\n  handleDeliveriesStop = () => {\n    this.setState({ deliveries: false });\n  };\n\n  handleUpdate = (data: { name: string; url: string }) => {\n    return this.props.onUpdate({ ...data, webhook: this.props.webhook.key });\n  };\n\n  handleUpdateClick = () => {\n    this.setState({ updating: true });\n  };\n\n  handleUpdatingStop = () => {\n    this.setState({ updating: false });\n  };\n\n  render() {\n    const { webhook } = this.props;\n    return (\n      <>\n        <ActionsDropdown className=\"big-spacer-left\">\n          <ActionsDropdownItem className=\"js-webhook-update\" onClick={this.handleUpdateClick}>\n            {translate('update_verb')}\n          </ActionsDropdownItem>\n          {webhook.latestDelivery && (\n            <ActionsDropdownItem\n              className=\"js-webhook-deliveries\"\n              onClick={this.handleDeliveriesClick}>\n              {translate('webhooks.deliveries.show')}\n            </ActionsDropdownItem>\n          )}\n          <ActionsDropdownDivider />\n          <ActionsDropdownItem\n            className=\"js-webhook-delete\"\n            destructive={true}\n            onClick={this.handleDeleteClick}>\n            {translate('delete')}\n          </ActionsDropdownItem>\n        </ActionsDropdown>\n\n        {this.state.deliveries && (\n          <DeliveriesForm onClose={this.handleDeliveriesStop} webhook={webhook} />\n        )}\n\n        {this.state.updating && (\n          <CreateWebhookForm\n            onClose={this.handleUpdatingStop}\n            onDone={this.handleUpdate}\n            webhook={webhook}\n          />\n        )}\n\n        {this.state.deleting && (\n          <DeleteWebhookForm\n            onClose={this.handleDeletingStop}\n            onSubmit={this.handleDelete}\n            webhook={webhook}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { getDelivery } from '../../../api/webhooks';\nimport DeliveryItem from './DeliveryItem';\n\ninterface Props {\n  delivery: T.WebhookDelivery;\n  onClose: () => void;\n  webhook: T.Webhook;\n}\n\ninterface State {\n  loading: boolean;\n  payload?: string;\n}\n\nexport default class LatestDeliveryForm extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchPayload();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchPayload = ({ delivery } = this.props) => {\n    return getDelivery({ deliveryId: delivery.id }).then(\n      ({ delivery }) => {\n        if (this.mounted) {\n          this.setState({ payload: delivery.payload, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  formatPayload = (payload: string) => {\n    try {\n      return JSON.stringify(JSON.parse(payload), undefined, 2);\n    } catch (error) {\n      return payload;\n    }\n  };\n\n  render() {\n    const { delivery, webhook } = this.props;\n    const { loading, payload } = this.state;\n    const header = translateWithParameters('webhooks.latest_delivery_for_x', webhook.name);\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n        <DeliveryItem\n          className=\"modal-body modal-container\"\n          delivery={delivery}\n          loading={loading}\n          payload={payload}\n        />\n        <footer className=\"modal-foot\">\n          <ResetButtonLink className=\"js-modal-close\" onClick={this.props.onClose}>\n            {translate('close')}\n          </ResetButtonLink>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonIcon } from 'sonar-ui-common/components/controls/buttons';\nimport AlertErrorIcon from 'sonar-ui-common/components/icons/AlertErrorIcon';\nimport AlertSuccessIcon from 'sonar-ui-common/components/icons/AlertSuccessIcon';\nimport BulletListIcon from 'sonar-ui-common/components/icons/BulletListIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport DateTimeFormatter from '../../../components/intl/DateTimeFormatter';\nimport LatestDeliveryForm from './LatestDeliveryForm';\n\ninterface Props {\n  webhook: T.Webhook;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class WebhookItemLatestDelivery extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { modal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleClick = () => {\n    this.setState({ modal: true });\n  };\n\n  handleModalClose = () => {\n    if (this.mounted) {\n      this.setState({ modal: false });\n    }\n  };\n\n  render() {\n    const { webhook } = this.props;\n    if (!webhook.latestDelivery) {\n      return <span>{translate('webhooks.last_execution.none')}</span>;\n    }\n\n    const { modal } = this.state;\n    return (\n      <>\n        {webhook.latestDelivery.success ? (\n          <AlertSuccessIcon className=\"text-text-top\" />\n        ) : (\n          <AlertErrorIcon className=\"text-text-top\" />\n        )}\n        <span className=\"spacer-left display-inline-flex-center\">\n          <DateTimeFormatter date={webhook.latestDelivery.at} />\n          <ButtonIcon className=\"button-small little-spacer-left\" onClick={this.handleClick}>\n            <BulletListIcon />\n          </ButtonIcon>\n        </span>\n\n        {modal && (\n          <LatestDeliveryForm\n            delivery={webhook.latestDelivery}\n            onClose={this.handleModalClose}\n            webhook={webhook}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport WebhookActions from './WebhookActions';\nimport WebhookItemLatestDelivery from './WebhookItemLatestDelivery';\n\ninterface Props {\n  onDelete: (webhook: string) => Promise<void>;\n  onUpdate: (data: { webhook: string; name: string; url: string }) => Promise<void>;\n  webhook: T.Webhook;\n}\n\nexport default function WebhookItem({ onDelete, onUpdate, webhook }: Props) {\n  return (\n    <tr>\n      <td>{webhook.name}</td>\n      <td>{webhook.url}</td>\n      <td>{webhook.secret ? translate('yes') : translate('no')}</td>\n      <td>\n        <WebhookItemLatestDelivery webhook={webhook} />\n      </td>\n      <td className=\"thin nowrap text-right\">\n        <WebhookActions onDelete={onDelete} onUpdate={onUpdate} webhook={webhook} />\n      </td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport WebhookItem from './WebhookItem';\n\ninterface Props {\n  onDelete: (webhook: string) => Promise<void>;\n  onUpdate: (data: { webhook: string; name: string; url: string }) => Promise<void>;\n  webhooks: T.Webhook[];\n}\n\nexport default class WebhooksList extends React.PureComponent<Props> {\n  renderHeader = () => (\n    <thead>\n      <tr>\n        <th>{translate('name')}</th>\n        <th>{translate('webhooks.url')}</th>\n        <th>{translate('webhooks.secret_header')}</th>\n        <th>{translate('webhooks.last_execution')}</th>\n        <th />\n      </tr>\n    </thead>\n  );\n\n  render() {\n    const { webhooks } = this.props;\n    if (webhooks.length < 1) {\n      return <p>{translate('webhooks.no_result')}</p>;\n    }\n    return (\n      <table className=\"data zebra\">\n        {this.renderHeader()}\n        <tbody>\n          {sortBy(webhooks, webhook => webhook.name.toLowerCase()).map(webhook => (\n            <WebhookItem\n              key={webhook.key}\n              onDelete={this.props.onDelete}\n              onUpdate={this.props.onUpdate}\n              webhook={webhook}\n            />\n          ))}\n        </tbody>\n      </table>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { createWebhook, deleteWebhook, searchWebhooks, updateWebhook } from '../../../api/webhooks';\nimport Suggestions from '../../../app/components/embed-docs-modal/Suggestions';\nimport PageActions from './PageActions';\nimport PageHeader from './PageHeader';\nimport WebhooksList from './WebhooksList';\n\ninterface Props {\n  component?: T.LightComponent;\n  organization: T.Organization | undefined;\n}\n\ninterface State {\n  loading: boolean;\n  webhooks: T.Webhook[];\n}\n\nexport default class App extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true, webhooks: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchWebhooks();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchWebhooks = () => {\n    return searchWebhooks(this.getScopeParams()).then(\n      ({ webhooks }) => {\n        if (this.mounted) {\n          this.setState({ loading: false, webhooks });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  getScopeParams = ({ organization, component } = this.props) => {\n    const organizationKey = organization && organization.key;\n    return {\n      organization: component ? component.organization : organizationKey,\n      project: component && component.key\n    };\n  };\n\n  handleCreate = (data: { name: string; secret?: string; url: string }) => {\n    const createData = {\n      name: data.name,\n      url: data.url,\n      ...(data.secret && { secret: data.secret }),\n      ...this.getScopeParams()\n    };\n\n    return createWebhook(createData).then(({ webhook }) => {\n      if (this.mounted) {\n        this.setState(({ webhooks }) => ({ webhooks: [...webhooks, webhook] }));\n      }\n    });\n  };\n\n  handleDelete = (webhook: string) => {\n    return deleteWebhook({ webhook }).then(() => {\n      if (this.mounted) {\n        this.setState(({ webhooks }) => ({\n          webhooks: webhooks.filter(item => item.key !== webhook)\n        }));\n      }\n    });\n  };\n\n  handleUpdate = (data: { webhook: string; name: string; secret?: string; url: string }) => {\n    const udpateData = {\n      webhook: data.webhook,\n      name: data.name,\n      url: data.url,\n      ...(data.secret && { secret: data.secret })\n    };\n\n    return updateWebhook(udpateData).then(() => {\n      if (this.mounted) {\n        this.setState(({ webhooks }) => ({\n          webhooks: webhooks.map(webhook =>\n            webhook.key === data.webhook\n              ? { ...webhook, name: data.name, secret: data.secret, url: data.url }\n              : webhook\n          )\n        }));\n      }\n    });\n  };\n\n  render() {\n    const { loading, webhooks } = this.state;\n\n    return (\n      <>\n        <Suggestions suggestions=\"webhooks\" />\n        <Helmet defer={false} title={translate('webhooks.page')} />\n\n        <div className=\"page page-limited\">\n          <PageHeader loading={loading}>\n            <PageActions\n              loading={loading}\n              onCreate={this.handleCreate}\n              webhooksCount={webhooks.length}\n            />\n          </PageHeader>\n\n          {!loading && (\n            <div className=\"boxed-group boxed-group-inner\">\n              <WebhooksList\n                onDelete={this.handleDelete}\n                onUpdate={this.handleUpdate}\n                webhooks={webhooks}\n              />\n            </div>\n          )}\n        </div>\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n}\n\nexport const formatterOption = {\n  year: 'numeric',\n  month: 'long',\n  day: 'numeric',\n  hour: 'numeric',\n  minute: 'numeric'\n};\n\nexport default function DateTimeFormatter({ children, date }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...formatterOption}>\n      {children}\n    </FormattedDate>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { ClipboardButton } from 'sonar-ui-common/components/controls/clipboard';\nimport './CodeSnippet.css';\n\ninterface Props {\n  className?: string;\n  isOneLine?: boolean;\n  noCopy?: boolean;\n  render?: () => JSX.Element;\n  snippet: string | (string | undefined)[];\n  wrap?: boolean;\n}\n\n// keep this \"useless\" concatentation for the readability reason\n// eslint-disable-next-line no-useless-concat\nconst s = ' \\\\' + '\\n  ';\n\nexport default function CodeSnippet({\n  className,\n  isOneLine,\n  noCopy,\n  render,\n  snippet,\n  wrap\n}: Props) {\n  const snippetArray = Array.isArray(snippet)\n    ? snippet.filter(line => line !== undefined)\n    : [snippet];\n  const finalSnippet = isOneLine ? snippetArray.join(' ') : snippetArray.join(s);\n  return (\n    <div\n      className={classNames(\n        'code-snippet',\n        { 'code-snippet-oneline': isOneLine, 'code-snippet-wrap': wrap },\n        className\n      )}>\n      <pre>{render ? render() : finalSnippet}</pre>\n      {!noCopy && <ClipboardButton copyValue={finalSnippet} />}\n    </div>\n  );\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./CodeSnippet.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./CodeSnippet.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./CodeSnippet.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".code-snippet{position:relative;margin:8px 0;background:#404040;color:#f0f0f0;border-radius:3px}.code-snippet pre{padding:16px;overflow:auto}.code-snippet>button{position:absolute;top:16px;right:16px;line-height:18px;border:1px solid #fff;color:#fff;font-size:11px;font-weight:400;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.code-snippet>button:active,.code-snippet>button:focus,.code-snippet>button:hover{background-color:#fff;color:#404040}.code-snippet-oneline pre{padding-bottom:40px}.code-snippet-oneline>button{top:auto;bottom:16px}.code-snippet-wrap pre{white-space:pre-wrap;word-break:break-all}.code-snippet .highlight{font-weight:700;color:#f4b1b0}.code-snippet .button-icon{color:#fff!important}.code-snippet .button-icon:active svg,.code-snippet .button-icon:focus svg,.code-snippet .button-icon:hover svg{background-color:#fff;color:#404040}\", \"\"]);\n\n"],"sourceRoot":""}