(window.webpackJsonp=window.webpackJsonp||[]).push([[305],{1190:function(e,t,n){var a=n(1688);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(312)(a,r);a.locals&&(e.exports=a.locals)},1686:function(e,t,n){var a=n(1687);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(312)(a,r);a.locals&&(e.exports=a.locals)},1687:function(e,t,n){(e.exports=n(311)(!1)).push([e.i,".manual-project-create{max-width:700px}.manual-project-create .visibility-select-option{margin-left:0!important;margin-bottom:8px;display:flex;align-items:center;font-size:14px}.manual-project-create .visibility-details{display:block;margin:8px 0}.manual-project-create .visibility-select-wrapper{padding:8px 0 16px}.manual-project-create .button{margin-top:8px}",""])},1688:function(e,t,n){(e.exports=n(311)(!1)).push([e.i,"#create-project{padding-top:0!important}#create-project header{padding-top:20px}.white-page #create-project header{background-color:#fff;position:-webkit-sticky;position:sticky;top:48px;z-index:50}.create-project{display:flex!important;justify-content:space-between}.create-project-repository{display:flex;align-items:center;min-width:500px;height:40px;border:1px solid #e6e6e6;padding:8px 16px;margin-bottom:8px;box-sizing:border-box;cursor:pointer;transition:all .3s ease}.create-project-repository.disabled{background-color:#ebebeb;border-color:#ddd;cursor:default}.create-project-repository.imported{cursor:default}.create-project-repository.selected{background-color:#cae3f2;border-color:#236a97}.create-project-repository:not(.imported):not(.disabled):active,.create-project-repository:not(.imported):not(.disabled):focus,.create-project-repository:not(.imported):not(.disabled):hover{border-color:#4b9fd5;box-shadow:none}.create-project-side-with-search{margin-top:32px}.create-project-side-sticky{position:-webkit-sticky;position:sticky;top:68px}.create-project-setup{display:flex;overflow:hidden;opacity:0;flex-direction:column;height:0;width:450px;margin-bottom:0;color:#fff;background-color:#0b3c62;border:none;border-radius:3px;transition:height .5s ease,opacity .4s ease-out,margin-bottom .5s ease-in}.create-project-setup.open{opacity:1;height:160px;margin-bottom:20px}.create-project-setup h2{color:#fff;font-weight:700;font-size:16px}.create-project-setup .boxed-group-inner{display:flex;flex-direction:column;flex-grow:1}.create-project-setup .button{border-color:#4c9bd6;background-color:#4c9bd6;color:#fff;transition:border-color .2s ease,box-shadow .2s ease,background-color .2s ease}.create-project-setup .button:focus,.create-project-setup .button:hover{border-color:#327bb3;background-color:#327bb3}.create-project-actions{min-width:500px;display:flex;justify-content:space-between;align-items:center;padding:8px 0 8px 16px;border-left:1px solid transparent}.create-project-actions .icon-checkbox{margin-right:8px}.create-project-modes{margin:0 auto;max-width:500px}.create-project-import-bbs i.icon-radio{flex-shrink:0}.create-project-import-bbs .open .boxed-group-header{border-bottom:1px solid #e6e6e6}.create-project-import-bbs .boxed-group-inner{padding-top:24px}.create-project-import-bbs-repo{width:250px;min-height:40px}",""])},1761:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(348),i=n(22),o=n(327),s=n(316),c=n(1683),l=n.n(c),p=n(315),d=n.n(p),u=n(5),m=n(414),h=n(741),g=n(538),b=n(782),j=n(416),f=n(319),y=n(500),_=n(738),v=n.n(_),O=n(30),k=n(569),E=n(28),S=n(324),N=n.n(S),x=n(338),P=n.n(x),C=n(335);function z(e){let t=e.hideIcons,n=e.onChange,r=e.organization,i=e.organizations;const o=function(e){return function(t){const n=t.alm?"sonarcloud/".concat(Object(j.g)(t.alm.key)):"sonarcloud-square-logo",r="PAID"===t.subscription;return a.createElement("div",{className:"display-flex-space-between"},a.createElement("span",{className:"text-ellipsis flex-1"},!e&&a.createElement("img",{alt:t.alm?t.alm.key:"SonarCloud",className:"little-spacer-right",height:14,src:"".concat(Object(C.getBaseUrl)(),"/images/").concat(n,".svg")}),t.name,a.createElement("span",{className:"note little-spacer-left"},t.key)),r&&a.createElement("div",{className:"badge"},Object(u.translate)("organization.paid_plan.badge")))}}(t);return a.createElement(P.a,{autoFocus:!r,className:"input-super-large",clearable:!1,id:"select-organization",labelKey:"name",onChange:n,optionRenderer:o,options:N()(i,e=>e.name.toLowerCase()),placeholder:Object(u.translate)("onboarding.import_organization.choose_organization"),required:!0,value:r,valueKey:"key",valueRenderer:o})}var w=Object(E.withRouter)(class extends a.PureComponent{constructor(){super(...arguments),this.handleLinkClick=e=>{e.preventDefault(),e.stopPropagation(),Object(O.save)(k.d,Date.now().toString(10)),this.props.router.push({pathname:"/create-organization",state:{tab:this.props.autoImport?"auto":"manual"}})}}render(){const e=this.props,t=e.autoImport,n=e.onChange,r=e.organization,i=e.organizations;return a.createElement("div",{className:"form-field spacer-bottom"},a.createElement("label",{htmlFor:"select-organization"},a.createElement("span",{className:"text-middle"},a.createElement("strong",null,Object(u.translate)("onboarding.create_project.organization")),a.createElement("em",{className:"mandatory"},"*"))),a.createElement(z,{hideIcons:!t,onChange:n,organization:r,organizations:i}),a.createElement("a",{className:"big-spacer-left js-new-org",href:"#",onClick:this.handleLinkClick},t?Object(u.translate)("onboarding.create_project.import_new_org"):Object(u.translate)("onboarding.create_project.create_new_org")))}}),R=n(461),A=n.n(R),M=n(309),U=n(340),B=n.n(U),K=n(350),F=n.n(K),D=n(323),T=n(408),L=n(502),I=n(684),W=n(574),q=n.n(W),V=n(304),J=n(314),$=n.n(J),G=n(453),H=n.n(G),X=n(783),Z=n.n(X),Q=n(331);class Y extends a.PureComponent{constructor(){super(...arguments),this.handleMouseEnter=()=>{this.props.highlightUpgradeBox(!0)},this.handleMouseLeave=()=>{this.props.highlightUpgradeBox(!1)},this.handleToggle=()=>{this.props.disabled||this.props.repository.linkedProjectKey||this.props.toggleRepository(this.props.repository)}}render(){const e=this.props,t=e.disabled,n=e.identityProvider,r=e.repository,i=e.selected,o=Boolean(r.linkedProjectKey);return a.createElement($.a,{overlay:t?Object(u.translate)("onboarding.create_project.subscribe_to_import_private_repositories"):void 0},a.createElement("li",null,a.createElement("div",{className:M("create-project-repository",{disabled:t,imported:o,selected:i}),onClick:this.handleToggle,onMouseEnter:t?this.handleMouseEnter:void 0,onMouseLeave:t?this.handleMouseLeave:void 0,role:"listitem"},a.createElement("div",{className:"flex-1 display-flex-center"},t?a.createElement(Z.a,{fill:Q.colors.disableGrayText}):a.createElement(B.a,{checked:i||o,disabled:t||o,onCheck:q.a}),a.createElement("img",{alt:n.name,className:M("spacer-left",{"icon-half-transparent":t}),height:14,src:"".concat(Object(C.getBaseUrl)(),"/images/sonarcloud/").concat(n.key,".svg"),width:14}),a.createElement("span",{className:"spacer-left"},this.props.repository.label),r.private&&a.createElement("div",{className:"badge spacer-left"},Object(u.translate)("visibility.private"))),r.linkedProjectKey&&a.createElement("span",null,a.createElement(H.a,{className:"little-spacer-right",fill:Q.colors.green}),a.createElement(V.FormattedMessage,{defaultMessage:Object(u.translate)("onboarding.create_project.repository_imported"),id:"onboarding.create_project.repository_imported",values:{link:a.createElement(E.Link,{to:Object(f.t)(r.linkedProjectKey)},Object(u.translate)("onboarding.create_project.see_project"))}})))))}}var ee=n(441),te=n.n(ee),ne=n(310);function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}class re extends a.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={submitting:!1},this.canSubmit=()=>!this.state.submitting&&this.props.selectedRepositories.length>0,this.handleFormSubmit=e=>{if(e.preventDefault(),this.canSubmit()){const e=this.props.selectedRepositories;this.setState({submitting:!0}),Object(h.c)({installationKeys:e.map(e=>e.installationKey),organization:this.props.organization.key}).then(e=>{let t=e.projects;return this.props.onProjectCreate(t.map(e=>e.projectKey),this.props.organization.key)},this.handleProvisionFail)}},this.handleProvisionFail=()=>this.props.onProvisionFail().then(()=>{this.mounted&&this.setState({submitting:!1})})}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const e=this.props.selectedRepositories,t=e.length>0,n=ae(te()(e,e=>e.private),2),r=n[0],i=void 0===r?[]:r,o=n[1],s=void 0===o?[]:o;return a.createElement("form",{className:M("create-project-setup boxed-group",{open:t}),onSubmit:this.handleFormSubmit},a.createElement("div",{className:"boxed-group-header"},a.createElement("h2",{className:"spacer-top"},e.length>1?Object(u.translateWithParameters)("onboarding.create_project.x_repositories_selected",e.length):Object(u.translate)("onboarding.create_project.1_repository_selected"))),a.createElement("div",{className:"boxed-group-inner"},a.createElement("div",{className:"flex-1"},1===s.length&&a.createElement("p",null,Object(u.translate)("onboarding.create_project.1_repository_created_as_public")),s.length>1&&a.createElement("p",null,Object(u.translateWithParameters)("onboarding.create_project.x_repository_created_as_public",s.length)),1===i.length&&a.createElement("p",null,Object(u.translate)("onboarding.create_project.1_repository_created_as_private")),i.length>1&&a.createElement("p",null,Object(u.translateWithParameters)("onboarding.create_project.x_repository_created_as_private",i.length))),a.createElement("div",null,a.createElement(ne.SubmitButton,{className:"button-large",disabled:this.state.submitting},Object(u.translate)("set_up")),a.createElement(d.a,{className:"spacer-left",loading:this.state.submitting}))))}}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){oe(e,t,n[t])})}return e}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class se extends a.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={checkAllRepositories:!1,highlight:!1,loading:!0,repositories:[],search:"",selectedRepositories:{},successfullyUpgraded:!1},this.fetchRepositories=()=>{const e=this.props.organization;return Object(h.b)({organization:e.key}).then(e=>{let t=e.repositories;this.mounted&&this.setState({loading:!1,repositories:t})},()=>{this.mounted&&this.setState({loading:!1})})},this.filterBySearch=e=>t=>t.label.toLowerCase().includes(e.toLowerCase()),this.handleHighlightUpgradeBox=e=>{this.setState({highlight:e})},this.handleOrganizationUpgrade=()=>{this.props.onOrganizationUpgrade(),this.mounted&&this.setState({successfullyUpgraded:!0})},this.handleProvisionFail=()=>this.fetchRepositories().then(()=>{this.mounted&&this.setState(e=>{let t=e.repositories,n=e.selectedRepositories;const a={};return Object.keys(n).forEach(e=>{const n=t.find(t=>t.installationKey===e);n&&!n.linkedProjectKey&&(a[n.installationKey]=n)}),{selectedRepositories:a}})}),this.handleSearch=e=>{this.setState({search:e,checkAllRepositories:!1,selectedRepositories:{}})},this.onCheckAllRepositories=()=>{this.setState(e=>{let t=e.checkAllRepositories,n=e.repositories,a=e.search;const r=this.props.organization,i=Object(L.c)(r),o={selectedRepositories:{},checkAllRepositories:!t};if(o.checkAllRepositories){const e=n.filter(e=>this.filterBySearch(a)(e)&&(e=>!!i||!e.private)(e)&&(e=>!e.linkedProjectKey)(e));o.selectedRepositories=A()(e,"installationKey")}return o})},this.toggleRepository=e=>{this.setState(t=>{let n=t.selectedRepositories;return{selectedRepositories:ie({},n,{[e.installationKey]:n[e.installationKey]?void 0:e})}})}}componentDidMount(){this.mounted=!0,this.fetchRepositories()}componentDidUpdate(e){e.organization.key!==this.props.organization.key&&(this.setState({loading:!0,selectedRepositories:{}}),this.fetchRepositories())}componentWillUnmount(){this.mounted=!1}render(){const e=this.state,t=e.highlight,n=e.loading,r=e.repositories,i=e.search,o=e.selectedRepositories,s=this.props,c=s.almApplication,l=s.organization,p=Object(L.c)(l),m=r.some(e=>Boolean(e.private)),h=r.length>5,g=r.length>1,b=!p&&m&&l.actions&&l.actions.admin,j=r.filter(this.filterBySearch(i));return a.createElement("div",{className:"create-project"},a.createElement("div",{className:"flex-1 huge-spacer-right"},a.createElement("div",{className:"spacer-bottom create-project-actions"},a.createElement("div",null,g&&a.createElement(B.a,{checked:this.state.checkAllRepositories,disabled:0===j.length,onCheck:this.onCheckAllRepositories},Object(u.translate)("onboarding.create_project.select_all_repositories"))),h&&a.createElement(F.a,{minLength:1,onChange:this.handleSearch,placeholder:Object(u.translate)("search.search_for_repositories"),value:this.state.search})),this.state.successfullyUpgraded&&a.createElement(D.Alert,{variant:"success"},Object(u.translateWithParameters)("onboarding.create_project.subscribtion_success_x",l.name)),a.createElement(d.a,{loading:n},a.createElement("ul",null,0===j.length&&a.createElement("li",{className:"big-spacer-top note"},b?Object(u.translateWithParameters)("no_results_for_x",i):Object(u.translate)("onboarding.create_project.no_repositories")),j.map(e=>a.createElement(Y,{disabled:Boolean(e.private&&!p),highlightUpgradeBox:this.handleHighlightUpgradeBox,identityProvider:c,key:e.installationKey,repository:e,selected:Boolean(o[e.installationKey]),toggleRepository:this.toggleRepository}))))),l&&a.createElement("div",{className:M({"create-project-side-with-search":h})},a.createElement("div",{className:"create-project-side-sticky"},a.createElement(re,{onProjectCreate:this.props.onProjectCreate,onProvisionFail:this.handleProvisionFail,organization:l,selectedRepositories:Object.keys(o).map(e=>o[e]).filter(T.isDefined)}),b&&a.createElement(I.a,{className:M({highlight:t}),onOrganizationUpgrade:this.handleOrganizationUpgrade,organization:l}))))}}class ce extends a.PureComponent{constructor(e){super(e),this.mounted=!1,this.handleInstallAppClick=()=>{Object(O.save)(k.c,Date.now().toString(10)),Object(O.save)(k.d,Date.now().toString(10))},this.handleOrganizationSelect=e=>{let t=e.key;this.setState({selectedOrganization:t})},this.state={selectedOrganization:this.getInitialSelectedOrganization(e)}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}getInitialSelectedOrganization(e){return e.organization?e.organization:1===e.boundOrganizations.length?e.boundOrganizations[0].key:""}render(){const e=this.props,t=e.almApplication,n=e.boundOrganizations,r=e.onProjectCreate;if(0===n.length)return a.createElement(a.Fragment,null,a.createElement("p",{className:"spacer-bottom"},Object(u.translate)("onboarding.create_project.install_app_description",t.key)),a.createElement(v.a,{backgroundColor:t.backgroundColor,className:"display-inline-block",iconPath:t.iconPath,name:t.name,onClick:this.handleInstallAppClick,small:!0,url:t.installationUrl},Object(u.translate)("onboarding.import_organization.choose_organization_button",t.key)));const i=this.state.selectedOrganization,o=n.find(e=>e.key===i);return a.createElement(a.Fragment,null,a.createElement(w,{autoImport:!0,onChange:this.handleOrganizationSelect,organization:i,organizations:this.props.boundOrganizations}),o&&a.createElement(se,{almApplication:t,onOrganizationUpgrade:this.props.onOrganizationUpgrade,onProjectCreate:r,organization:o}))}}var le=n(361),pe=n.n(le),de=n(681),ue=n.n(de),me=n(358),he=n(745);function ge(e){const t=e.additionalActions,n=e.showBreadcrumb,r=e.title;return a.createElement("header",{className:"huge-spacer-bottom bordered-bottom overflow-hidden"},a.createElement("h1",{className:"pull-left huge big-spacer-bottom"},n&&a.createElement(a.Fragment,null,a.createElement(E.Link,{to:"/projects/create"},Object(u.translate)("my_account.create_new.TRK")),a.createElement("span",{className:"big-spacer-left big-spacer-right slash-separator"})),r),t)}n(1686);class be extends a.PureComponent{constructor(e){super(e),this.mounted=!1,this.checkFreeKey=e=>Object(me.f)({component:e}).then(t=>{this.mounted&&e===this.state.projectKey&&(t?this.setState({projectKeyError:Object(u.translate)("onboarding.create_project.project_key.taken"),touched:!0,validating:!1}):this.setState({projectKeyError:void 0,validating:!1}))}).catch(()=>{this.mounted&&e===this.state.projectKey&&this.setState({projectKeyError:void 0,validating:!1})}),this.canChoosePrivate=e=>Boolean(e&&"PAID"===e.subscription),this.getInitialSelectedOrganization=e=>e.organization?this.getOrganization(e.organization):e.userOrganizations&&1===e.userOrganizations.length?e.userOrganizations[0]:void 0,this.getOrganization=e=>this.props.userOrganizations&&this.props.userOrganizations.find(t=>{return t.key===e}),this.handleFormSubmit=e=>{e.preventDefault();const t=this.state;this.canSubmit(t)&&(this.setState({submitting:!0}),Object(me.c)({project:t.projectKey,name:(t.projectName||t.projectKey).trim(),organization:t.selectedOrganization&&t.selectedOrganization.key,visibility:this.state.selectedVisibility}).then(e=>{let t=e.project;return this.props.onProjectCreate([t.key])},()=>{this.mounted&&this.setState({submitting:!1})}))},this.handleOrganizationSelect=e=>{let t=e.key;const n=this.getOrganization(t);let a=this.state.selectedVisibility;void 0===a&&(a=this.canChoosePrivate(n)?"private":"public"),this.setState({selectedOrganization:n,selectedVisibility:a})},this.handleOrganizationUpgrade=()=>{this.props.fetchMyOrganizations().then(()=>{this.setState(e=>{if(e.selectedOrganization){return{selectedOrganization:this.getOrganization(e.selectedOrganization.key)}}return null})},()=>{})},this.handleProjectKeyChange=e=>{const t=e.currentTarget.value||"",n=this.validateKey(t);this.setState(e=>{const a=e.projectNameChanged?e.projectName:t;return{projectKey:t,projectKeyError:n,projectName:a,projectNameError:this.validateName(a),touched:!0,validating:void 0===n}}),void 0===n&&this.checkFreeKey(t)},this.handleProjectNameChange=e=>{const t=e.currentTarget.value;this.setState({projectName:t,projectNameChanged:!0,projectNameError:this.validateName(t)})},this.handleVisibilityChange=e=>{this.setState({selectedVisibility:e})},this.validateKey=e=>e.length>400||!/^[\w-.:]*[a-zA-Z]+[\w-.:]*$/.test(e)?Object(u.translate)("onboarding.create_project.project_key.error"):void 0,this.validateName=e=>0===e.length||e.length>255?Object(u.translate)("onboarding.create_project.display_name.error"):void 0,this.state={projectKey:"",projectName:"",projectNameChanged:!1,selectedOrganization:this.getInitialSelectedOrganization(e),submitting:!1,touched:!1,validating:!1},this.checkFreeKey=pe()(this.checkFreeKey,250)}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}canSubmit(e){const t=e.projectKey,n=e.projectKeyError,a=e.projectName,r=e.projectNameError,o=e.selectedOrganization;return Boolean(void 0===n&&void 0===r&&t.length>0&&a.length>0&&(!Object(i.isSonarCloud)()||o))}render(){const e=this.state,t=e.projectKey,n=e.projectKeyError,r=e.projectName,o=e.projectNameError,s=e.selectedOrganization,c=e.submitting,l=e.touched,p=e.validating,m=this.props.branchesEnabled,h=l&&void 0!==n,g=l&&!p&&void 0===n,b=l&&void 0!==o,j=l&&void 0===o,f=this.canChoosePrivate(s);return a.createElement(a.Fragment,null,a.createElement(ge,{showBreadcrumb:m,title:Object(u.translate)("onboarding.create_project.setup_manually")}),a.createElement("div",{className:"create-project"},a.createElement("div",{className:"flex-1 huge-spacer-right"},a.createElement("form",{className:"manual-project-create",onSubmit:this.handleFormSubmit},Object(i.isSonarCloud)()&&this.props.userOrganizations&&a.createElement(w,{onChange:this.handleOrganizationSelect,organization:s?s.key:"",organizations:this.props.userOrganizations}),a.createElement(ue.a,{className:"form-field",description:Object(u.translate)("onboarding.create_project.project_key.description"),error:n,help:Object(u.translate)("onboarding.create_project.project_key.help"),id:"project-key",isInvalid:h,isValid:g,label:Object(u.translate)("onboarding.create_project.project_key"),required:!0},a.createElement("input",{autoFocus:!0,className:M("input-super-large",{"is-invalid":h,"is-valid":g}),id:"project-key",maxLength:400,minLength:1,onChange:this.handleProjectKeyChange,type:"text",value:t})),a.createElement(ue.a,{className:"form-field",description:Object(u.translate)("onboarding.create_project.display_name.description"),error:o,help:Object(u.translate)("onboarding.create_project.display_name.help"),id:"project-name",isInvalid:b,isValid:j,label:Object(u.translate)("onboarding.create_project.display_name"),required:!0},a.createElement("input",{className:M("input-super-large",{"is-invalid":b,"is-valid":j}),id:"project-name",maxLength:255,minLength:1,onChange:this.handleProjectNameChange,type:"text",value:r})),Object(i.isSonarCloud)()&&s&&a.createElement("div",{className:M("visibility-select-wrapper",{open:Boolean(this.state.selectedOrganization)})},a.createElement(he.a,{canTurnToPrivate:f,onChange:this.handleVisibilityChange,showDetails:!0,visibility:f?this.state.selectedVisibility:"public"})),a.createElement(ne.SubmitButton,{disabled:!this.canSubmit(this.state)||c},Object(u.translate)("set_up")),a.createElement(d.a,{className:"spacer-left",loading:c}))),Object(i.isSonarCloud)()&&s&&a.createElement("div",{className:"create-project-side-sticky"},a.createElement(I.a,{className:M("animated",{open:!f}),onOrganizationUpgrade:this.handleOrganizationUpgrade,organization:s}))))}}n(1190);function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){fe(e,t,n[t])})}return e}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ye={skipOnboarding:y.g};var _e=Object(g.a)(Object(b.a)(Object(s.connect)(null,ye)(class extends a.PureComponent{constructor(){var e;super(...arguments),e=this,this.mounted=!1,this.state={loading:!0},this.handleProjectCreate=(e,t)=>{this.props.skipOnboarding(),e.length>1?this.props.router.push({pathname:(t?Object(f.q)(t):"")+"/projects"}):1===e.length&&this.props.router.push(Object(f.t)(e[0]))},this.fetchAlmApplication=()=>Object(h.a)().then(e=>{let t=e.application;this.mounted&&this.setState({almApplication:t,loading:!1})},()=>{this.mounted&&this.setState({loading:!1})}),this.onTabChange=e=>{this.updateUrl({tab:e})},this.updateUrl=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.props.router.replace({pathname:e.props.location.pathname,query:e.props.location.query,state:je({},e.props.location.state||{},t)})}}componentDidMount(){this.mounted=!0,Object(j.c)(this.props.currentUser)?this.fetchAlmApplication():this.setState({loading:!1}),Object(m.addWhitePageClass)()}componentWillUnmount(){this.mounted=!1,Object(m.removeWhitePageClass)()}render(){const e=this.props,t=e.currentUser,n=e.location,r=e.userOrganizations,i=this.state,s=i.almApplication,c=i.loading,p=n.state||{},m=Object(u.translate)("onboarding.create_project.header"),h="manual"===p.tab;return a.createElement(a.Fragment,null,a.createElement(o.a,{title:m,titleTemplate:"%s"}),a.createElement("div",{className:"page page-limited huge-spacer-top huge-spacer-bottom"},a.createElement("header",{className:"page-header huge-spacer-bottom"},a.createElement("h1",{className:"page-title huge"},a.createElement("strong",null,m))),c?a.createElement(d.a,null):a.createElement(a.Fragment,null,s&&a.createElement(l.a,{onChange:this.onTabChange,selected:p.tab||"auto",tabs:[{key:"auto",node:Object(u.translate)("onboarding.create_project.select_repositories")},{key:"manual",node:Object(u.translate)("onboarding.create_project.setup_manually")}]}),h||!s?a.createElement(be,{currentUser:t,fetchMyOrganizations:this.props.fetchMyOrganizations,onProjectCreate:this.handleProjectCreate,organization:p.organization,userOrganizations:r.filter(e=>{let t=e.actions;return(void 0===t?{}:t).provision})}):a.createElement(ce,{almApplication:s,boundOrganizations:r.filter(e=>{let t=e.alm,n=e.actions;return t&&(void 0===n?{}:n).provision}),onOrganizationUpgrade:this.props.fetchMyOrganizations,onProjectCreate:this.handleProjectCreate,organization:p.organization}))))}}))),ve=n(593),Oe=n(412),ke=n(542),Ee=n(8),Se=n(320);var Ne,xe=n(318),Pe=n(644),Ce=n(353),ze=n.n(Ce),we=n(425),Re=n.n(we),Ae=n(613),Me=n.n(Ae),Ue=n(554),Be=n.n(Ue);function Ke(e){const t=e.disableRepositories,n=e.open,r=e.project,i=e.repositories,o=e.selectedRepository,s=e.showingAllRepositories,c=i.length;return a.createElement(Me.a,{className:M("big-spacer-bottom",{open:n,"not-clickable":!e.onClick,"no-hover":!e.onClick}),key:r.key,onClick:e.onClick?e.onClick:()=>{},open:n,title:a.createElement("h3",null,r.name)},n&&a.createElement("div",{className:"display-flex-wrap"},0===c&&a.createElement(D.Alert,{variant:"warning"},a.createElement(V.FormattedMessage,{defaultMessage:Object(u.translate)("onboarding.create_project.no_bbs_repos"),id:"onboarding.create_project.no_bbs_repos",values:{link:a.createElement(E.Link,{to:{pathname:"/projects/create",query:{mode:Ne.BitbucketServer,resetPat:1}}},Object(u.translate)("onboarding.create_project.update_your_token"))}})),i.map(n=>{var r;return n.sqProjectKey?a.createElement("div",{className:"display-flex-start spacer-right spacer-bottom create-project-import-bbs-repo",key:n.id},a.createElement(H.a,{className:"spacer-right",fill:Q.colors.green,size:14}),a.createElement("div",{className:"overflow-hidden"},a.createElement("div",{className:"little-spacer-bottom text-ellipsis"},a.createElement("strong",{title:n.name},a.createElement(E.Link,{to:Object(f.t)(n.sqProjectKey)},n.name))),a.createElement("em",null,Object(u.translate)("onboarding.create_project.repository_imported")))):a.createElement(Be.a,{checked:(null===(r=o)||void 0===r?void 0:r.id)===n.id,className:M("display-flex-start spacer-right spacer-bottom create-project-import-bbs-repo overflow-hidden",{disabled:t,"text-muted":t,"link-no-underline":t}),key:n.id,onCheck:()=>e.onSelectRepository(n),value:String(n.id)},a.createElement("strong",{className:"text-ellipsis",title:n.name},n.name))}),!s&&c>0&&a.createElement(D.Alert,{variant:"warning"},Object(u.translateWithParameters)("onboarding.create_project.only_showing_X_first_repos",c))))}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function De(e){const t=e.disableRepositories,n=e.projects,r=e.projectRepositories,i=e.selectedRepository,o=Fe(a.useState(n.length>0?[n[0].key]:[]),2),s=o[0],c=o[1],l=n.length<=s.length;return a.createElement(a.Fragment,null,a.createElement("div",{className:"overflow-hidden spacer-bottom"},a.createElement(ne.ButtonLink,{className:"pull-right",onClick:()=>c(l?[]:n.map(e=>e.key))},l?Object(u.translate)("collapse_all"):Object(u.translate)("expand_all"))),n.map(n=>{const o=s.includes(n.key),l=r[n.key]||{},p=l.allShown,d=l.repositories,u=void 0===d?[]:d;return a.createElement(Ke,{disableRepositories:t,key:n.key,onClick:()=>((e,t)=>{c(e?ze()(s,t):Re()([...s,t]))})(o,n.key),onSelectRepository:e.onSelectRepository,open:o,project:n,repositories:u,selectedRepository:i,showingAllRepositories:p})}))}function Te(e){const t=e.disableRepositories,n=e.projects,r=e.searching,i=e.searchResults,o=void 0===i?[]:i,s=e.selectedRepository,c=Re()(o.map(e=>n.find(t=>t.key===e.projectKey)).filter(T.isDefined));return 0!==c.length||r?a.createElement("div",{className:"big-spacer-top"},a.createElement(d.a,{loading:r},c.map(n=>{const r=o.filter(e=>e.projectKey===n.key);return a.createElement(Ke,{disableRepositories:t,key:n.key,onSelectRepository:e.onSelectRepository,open:!0,project:n,repositories:r,selectedRepository:s,showingAllRepositories:!0})}))):a.createElement(D.Alert,{className:"big-spacer-top",variant:"warning"},Object(u.translate)("onboarding.create_project.no_bbs_repos.filter"))}function Le(e){const t=e.disableRepositories,n=e.projects,r=void 0===n?[]:n,i=e.projectRepositories,o=void 0===i?{}:i,s=e.searchResults,c=e.searching,l=e.selectedRepository;return 0===r.length?a.createElement(D.Alert,{className:"spacer-top",variant:"warning"},a.createElement(V.FormattedMessage,{defaultMessage:Object(u.translate)("onboarding.create_project.no_bbs_projects"),id:"onboarding.create_project.no_bbs_projects",values:{link:a.createElement(E.Link,{to:{pathname:"/projects/create",query:{mode:Ne.BitbucketServer,resetPat:1}}},Object(u.translate)("onboarding.create_project.update_your_token"))}})):a.createElement("div",{className:"create-project-import-bbs"},a.createElement(F.a,{onChange:e.onSearch,placeholder:Object(u.translate)("onboarding.create_project.search_repositories_by_name")}),c||s?a.createElement(Te,{disableRepositories:t,onSelectRepository:e.onSelectRepository,projects:r,searchResults:s,searching:c,selectedRepository:l}):a.createElement(De,{disableRepositories:t,onSelectRepository:e.onSelectRepository,projectRepositories:o,projects:r,selectedRepository:l}))}function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function We(e){const t=e.bitbucketSetting.url,n=e.submitting,r=void 0!==n&&n,i=e.validationFailed,o=Ie(a.useState(!1),2),s=o[0],c=o[1];a.useEffect(()=>{c(!1)},[r]);const l=i&&!s;return a.createElement("div",{className:"display-flex-start"},a.createElement("form",{onSubmit:t=>{t.preventDefault();const n=new FormData(t.currentTarget).get("personal_access_token");e.onPersonalAccessTokenCreate(n)}},a.createElement("h2",{className:"big"},Object(u.translate)("onboarding.create_project.grant_access_to_bbs.title")),a.createElement("p",{className:"big-spacer-top big-spacer-bottom"},Object(u.translate)("onboarding.create_project.grant_access_to_bbs.help")),a.createElement(ue.a,{error:l?Object(u.translate)("onboarding.create_project.pat_incorrect"):void 0,id:"personal_access_token",isInvalid:l,isValid:!1,label:Object(u.translate)("onboarding.create_project.enter_pat"),required:!0},a.createElement("input",{autoFocus:!0,className:M("input-super-large",{"is-invalid":l}),id:"personal_access_token",minLength:1,name:"personal_access_token",onChange:()=>{c(!0)},type:"text"})),a.createElement(ne.SubmitButton,{disabled:l||r||!s},Object(u.translate)("save")),a.createElement(d.a,{className:"spacer-left",loading:r})),a.createElement(D.Alert,{className:"big-spacer-left big-spacer-top",display:"block",variant:"info"},a.createElement("h3",null,Object(u.translate)("onboarding.create_project.pat_help.title")),a.createElement("p",{className:"big-spacer-top big-spacer-bottom"},Object(u.translate)("onboarding.create_project.pat_help.bbs_help_1")),t&&a.createElement("div",{className:"text-middle"},a.createElement("img",{alt:"",className:"spacer-right",height:"16",src:"".concat(Object(C.getBaseUrl)(),"/images/alm/bitbucket.svg")}),a.createElement("a",{href:"".concat(t.replace(/\/$/,""),"/plugins/servlet/access-tokens/add"),rel:"noopener noreferrer",target:"_blank"},Object(u.translate)("onboarding.create_project.pat_help.link"))),a.createElement("p",{className:"big-spacer-top big-spacer-bottom"},Object(u.translate)("onboarding.create_project.pat_help.bbs_help_2")),a.createElement("ul",null,a.createElement("li",null,a.createElement(V.FormattedMessage,{defaultMessage:Object(u.translate)("onboarding.create_project.pat_help.bbs_permission_projects"),id:"onboarding.create_project.pat_help.bbs_permission_projects",values:{perm:a.createElement("strong",null,Object(u.translate)("onboarding.create_project.pat_help.read_permission"))}})),a.createElement("li",null,a.createElement(V.FormattedMessage,{defaultMessage:Object(u.translate)("onboarding.create_project.pat_help.bbs_permission_repos"),id:"onboarding.create_project.pat_help.bbs_permission_repos",values:{perm:a.createElement("strong",null,Object(u.translate)("onboarding.create_project.pat_help.read_permission"))}})))))}function qe(e){const t=e.bitbucketSetting,n=e.canAdmin,r=e.importing,i=e.loading,o=e.projects,s=e.projectRepositories,c=e.selectedRepository,l=e.searching,p=e.searchResults,m=e.showPersonalAccessTokenForm,h=e.submittingToken,g=e.tokenValidationFailed;return a.createElement(a.Fragment,null,a.createElement(ge,{additionalActions:!m&&a.createElement("div",{className:"display-flex-center pull-right"},a.createElement(d.a,{className:"spacer-right",loading:r}),a.createElement(ne.Button,{className:"button-large button-primary",disabled:!c||r,onClick:e.onImportRepository},Object(u.translate)("onboarding.create_project.import_selected_repo"))),showBreadcrumb:!0,title:a.createElement("span",{className:"text-middle"},a.createElement("img",{alt:"",className:"spacer-right",height:"24",src:"".concat(Object(C.getBaseUrl)(),"/images/alm/bitbucket.svg")}),Object(u.translate)("onboarding.create_project.from_bbs"))}),i&&a.createElement("i",{className:"spinner"}),!i&&!t&&a.createElement(D.Alert,{variant:"error"},n?a.createElement(V.FormattedMessage,{defaultMessage:Object(u.translate)("onboarding.create_project.no_bbs_binding.admin"),id:"onboarding.create_project.no_bbs_binding.admin",values:{url:a.createElement(E.Link,{to:{pathname:"/admin/settings",query:{category:Pe.a}}},Object(u.translate)("settings.page"))}}):Object(u.translate)("onboarding.create_project.no_bbs_binding")),!i&&t&&(m?a.createElement(We,{bitbucketSetting:t,onPersonalAccessTokenCreate:e.onPersonalAccessTokenCreate,submitting:h,validationFailed:g}):a.createElement(Le,{disableRepositories:r,onSearch:e.onSearch,onSelectRepository:e.onSelectRepository,projectRepositories:s,projects:o,searchResults:p,searching:l,selectedRepository:c})))}function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.Manual="manual",e.BitbucketServer="bbs"}(Ne||(Ne={}));var Je=Object(s.connect)(e=>{return{canAdmin:Object(xe.getAppState)(e).canAdmin}})(class extends a.PureComponent{constructor(e){super(e),this.mounted=!1,this.fetchInitialData=async()=>{this.setState({loading:!0});const e=await this.checkPersonalAccessToken().catch(()=>!1);let t,n;e&&(t=await this.fetchBitbucketProjects().catch(()=>void 0)),t&&t.length>0&&(n=await this.fetchBitbucketRepositories(t).catch(()=>void 0)),this.mounted&&this.setState({patIsValid:e,projects:t,projectRepositories:n,loading:!1})},this.checkPersonalAccessToken=()=>{const e=this.state.bitbucketSetting;return e?function(e){return Object(Ee.get)("/api/alm_integrations/check_pat",{almSetting:e}).then(()=>!0).catch(e=>400!==e.status&&Object(Se.a)(e))}(e.key):Promise.resolve(!1)},this.fetchBitbucketProjects=()=>{const e=this.state.bitbucketSetting;return e?function(e){return Object(Ee.getJSON)("/api/alm_integrations/list_bitbucketserver_projects",{almSetting:e})}(e.key).then(e=>e.projects):Promise.resolve(void 0)},this.fetchBitbucketRepositories=e=>{const t=this.state.bitbucketSetting;return t?Promise.all(e.map(e=>(function(e,t){return Object(Ee.getJSON)("/api/alm_integrations/search_bitbucketserver_repos",{almSetting:e,projectName:t})})(t.key,e.name).then(t=>({isLastPage:t.isLastPage,repositories:t.repositories,projectKey:e.key})))).then(e=>e.reduce((e,t)=>{let n=t.isLastPage;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){Ve(e,t,n[t])})}return e}({},e,{[t.projectKey]:{allShown:n,repositories:t.repositories}})},{})):Promise.resolve(void 0)},this.handlePersonalAccessTokenCreate=e=>{const t=this.state.bitbucketSetting;!t||e.length<1||(this.setState({submittingToken:!0,tokenValidationFailed:!1}),function(e,t){return Object(Ee.post)("/api/alm_integrations/set_pat",{almSetting:e,pat:t}).catch(Se.a)}(t.key,e).then(this.checkPersonalAccessToken).then(e=>{this.mounted&&(this.setState({submittingToken:!1,patIsValid:e,tokenValidationFailed:!e}),e&&this.fetchInitialData())}).catch(()=>{this.mounted&&this.setState({submittingToken:!1})}))},this.handleImportRepository=()=>{const e=this.state,t=e.bitbucketSetting,n=e.selectedRepository;t&&n&&(this.setState({importing:!0}),function(e,t,n){return Object(Ee.postJSON)("/api/alm_integrations/import_bitbucketserver_project",{almSetting:e,projectKey:t,repositorySlug:n}).catch(Se.a)}(t.key,n.projectKey,n.slug).then(e=>{let t=e.project.key;this.mounted&&(this.setState({importing:!1}),this.props.onProjectCreate([t]))}).catch(()=>{this.mounted&&this.setState({importing:!1})}))},this.handleSearch=e=>{const t=this.state.bitbucketSetting;t&&(e?(this.setState({searching:!0,selectedRepository:void 0}),function(e,t){return Object(Ee.getJSON)("/api/alm_integrations/search_bitbucketserver_repos",{almSetting:e,repositoryName:t})}(t.key,e).then(e=>{let t=e.repositories;this.mounted&&this.setState({searching:!1,searchResults:t})}).catch(()=>{this.mounted&&this.setState({searching:!1})})):this.setState({searching:!1,searchResults:void 0,selectedRepository:void 0}))},this.handleSelectRepository=e=>{this.setState({selectedRepository:e})},this.state={bitbucketSetting:e.bitbucketSettings[0],importing:!1,loading:!1,searching:!1,tokenValidationFailed:!1}}componentDidMount(){this.mounted=!0,this.fetchInitialData()}componentDidUpdate(e){0===e.bitbucketSettings.length&&this.props.bitbucketSettings.length>0&&this.setState({bitbucketSetting:this.props.bitbucketSettings[0]},()=>this.fetchInitialData())}componentWillUnmount(){this.mounted=!1}render(){const e=this.props,t=e.canAdmin,n=e.loadingBindings,r=e.location,i=this.state,o=i.bitbucketSetting,s=i.importing,c=i.loading,l=i.patIsValid,p=i.projectRepositories,d=i.projects,u=i.searching,m=i.searchResults,h=i.selectedRepository,g=i.submittingToken,b=i.tokenValidationFailed;return a.createElement(qe,{bitbucketSetting:o,canAdmin:t,importing:s,loading:c||n,onImportRepository:this.handleImportRepository,onPersonalAccessTokenCreate:this.handlePersonalAccessTokenCreate,onProjectCreate:this.props.onProjectCreate,onSearch:this.handleSearch,onSelectRepository:this.handleSelectRepository,projectRepositories:p,projects:d,searchResults:m,searching:u,selectedRepository:h,showPersonalAccessTokenForm:!l||Boolean(r.query.resetPat),submittingToken:g,tokenValidationFailed:b})}}),$e=n(321),Ge=n.n($e);function He(e){const t=e.bbsBindingCount,n=e.loadingBindings;return a.createElement(a.Fragment,null,a.createElement("header",{className:"huge-spacer-top big-spacer-bottom padded"},a.createElement("h1",{className:"text-center huge big-spacer-bottom"},Object(u.translate)("my_account.create_new.TRK")),a.createElement("p",{className:"text-center big"},Object(u.translate)("onboarding.create_project.select_method"))),a.createElement("div",{className:"create-project-modes huge-spacer-top display-flex-space-around"},a.createElement("button",{className:"button button-huge display-flex-column create-project-mode-type-manual",onClick:()=>e.onSelectMode(Ne.Manual),type:"button"},a.createElement("img",{alt:"",height:80,src:"".concat(Object(C.getBaseUrl)(),"/images/sonarcloud/analysis/manual.svg"),width:80}),a.createElement("div",{className:"medium big-spacer-top"},Object(u.translate)("onboarding.create_project.select_method.manual"))),a.createElement("button",{className:"button button-huge big-spacer-left display-flex-column create-project-mode-type-bbs",disabled:1!==t,onClick:()=>e.onSelectMode(Ne.BitbucketServer),type:"button"},a.createElement("img",{alt:"",height:80,src:"".concat(Object(C.getBaseUrl)(),"/images/alm/bitbucket.svg"),width:80}),a.createElement("div",{className:"medium big-spacer-top"},Object(u.translate)("onboarding.create_project.select_method.from_bbs")),n&&a.createElement("span",null,Object(u.translate)("onboarding.create_project.check_bbs_supported"),a.createElement("i",{className:"little-spacer-left spinner"})),!n&&1!==t&&a.createElement("div",{className:"text-muted small spacer-top",style:{lineHeight:1.5}},Object(u.translate)("onboarding.create_project.bbs_not_configured"),a.createElement(Ge.a,{className:"little-spacer-left",overlay:0===t?Object(u.translate)("onboarding.create_project.zero_bbs_instances"):Object(u.translateWithParameters)("onboarding.create_project.too_many_bbs_instances_X",t)})))))}var Xe=Object(g.a)(Object(Oe.a)(class extends a.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={bitbucketSettings:[],loading:!1},this.fetchAlmBindings=()=>{this.setState({loading:!0}),Object(ve.i)().then(e=>{this.mounted&&this.setState({bitbucketSettings:e.filter(e=>e.alm===ke.a.Bitbucket),loading:!1})}).catch(()=>{this.mounted&&this.setState({loading:!1})})},this.handleProjectCreate=e=>{1===e.length&&this.props.router.push(Object(f.t)(e[0]))},this.handleModeSelect=e=>{const t=this.props,n=t.router,a=t.location;n.push({pathname:a.pathname,query:{mode:e}})}}componentDidMount(){var e;const t=this.props,n=t.appState.branchesEnabled,a=t.location;this.mounted=!0,n&&this.fetchAlmBindings(),((null===(e=a.query)||void 0===e?void 0:e.mode)||!n)&&Object(m.addWhitePageClass)()}componentDidUpdate(e){var t,n,a,r;(null===(t=this.props.location.query)||void 0===t?void 0:t.mode)&&!(null===(n=e.location.query)||void 0===n?void 0:n.mode)?Object(m.addWhitePageClass)():!(null===(a=this.props.location.query)||void 0===a?void 0:a.mode)&&(null===(r=e.location.query)||void 0===r?void 0:r.mode)&&Object(m.removeWhitePageClass)()}componentWillUnmount(){this.mounted=!1,Object(m.removeWhitePageClass)()}render(){var e;const t=this.props,n=t.appState.branchesEnabled,r=t.currentUser,i=t.location,s=this.state,c=s.bitbucketSettings,l=s.loading,p=null===(e=i.query)||void 0===e?void 0:e.mode,d=!n||p===Ne.Manual,m=n&&p===Ne.BitbucketServer;return a.createElement(a.Fragment,null,a.createElement(o.a,{title:Object(u.translate)("my_account.create_new.TRK"),titleTemplate:"%s"}),a.createElement("div",{className:"page page-limited huge-spacer-bottom position-relative",id:"create-project"},!m&&!d&&a.createElement(He,{bbsBindingCount:c.length,loadingBindings:l,onSelectMode:this.handleModeSelect}),d&&a.createElement(be,{branchesEnabled:n,currentUser:r,onProjectCreate:this.handleProjectCreate}),m&&a.createElement(Je,{bitbucketSettings:c,loadingBindings:l,location:i,onProjectCreate:this.handleProjectCreate})))}}));function Ze(e){return a.createElement(a.Fragment,null,a.createElement(r.a,{anchor:"create_project_main"}),Object(i.isSonarCloud)()?a.createElement(_e,Object.assign({},e)):a.createElement(Xe,Object.assign({},e)))}n.d(t,"default",function(){return Ze})},348:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(2),r=n(5),i=n(398);function o(e){return a.createElement(i.a.Consumer,null,t=>{let n=t.addA11ySkipLink,r=t.removeA11ySkipLink;return a.createElement(s,Object.assign({addA11ySkipLink:n,removeA11ySkipLink:r},e))})}class s extends a.PureComponent{constructor(){super(...arguments),this.getLink=()=>{const e=this.props,t=e.anchor,n=e.label;return{key:t,label:void 0===n?Object(r.translate)("skip_to_content"):n,weight:e.weight}}}componentDidMount(){this.props.addA11ySkipLink(this.getLink())}componentWillUnmount(){this.props.removeA11ySkipLink(this.getLink())}render(){const e=this.props.anchor;return a.createElement("span",{id:"a11y_target__".concat(e)})}}},396:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s});var a=n(335),r=n(14);let i=!1;function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body";return new Promise(n=>{const r=document.createElement("script");r.src="".concat(Object(a.getBaseUrl)()).concat(e),r.onload=n,document.getElementsByTagName(t)[0].appendChild(r)})}async function s(e){const t=Object(r.a)(e);if(t)return Promise.resolve(t);if(!i){(0,(await Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(285)]).then(n.bind(null,531))).default)(),i=!0}await o("/static/".concat(e,".js"));const a=Object(r.a)(e);return a||Promise.reject()}},412:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(2),r=n(316),i=n(318),o=n(388);function s(e){class t extends a.Component{render(){return a.createElement(e,Object.assign({},this.props))}}return t.displayName=Object(o.a)(e,"withAppState"),Object(r.connect)(function(e){return{appState:Object(i.getAppState)(e)}})(t)}},416:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"e",function(){return c}),n.d(t,"f",function(){return l}),n.d(t,"g",function(){return p});var a=n(332);function r(e,t){return t.endsWith("/")||(t+="/"),c(e)?t.replace("github.com/","github.com/orgs/")+"people":t+"profile/members"}function i(e){return Object(a.b)(e)&&e.externalProvider?p(e.externalProvider):void 0}function o(e){return Object(a.b)(e)&&(s(e.externalProvider)||c(e.externalProvider))}function s(e){return!!e&&e.startsWith("bitbucket")}function c(e){return"github"===e}function l(e){return"microsoft"===e}function p(e){return s(e)?"bitbucket":e}},502:function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var a=n(332);function r(e){return Boolean(e&&"PAID"===e.subscription)}function i(e,t,n){return!r(t)||o(e,t,n)}function o(e,t,n){return Boolean(t&&Object(a.b)(e)&&(t.actions&&t.actions.admin||n.some(e=>e.key===t.key)))}},538:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(2),r=n(31),i=n.n(r),o=n(332),s=n(388),c=n(407);function l(e){class t extends a.Component{componentDidMount(){Object(o.b)(this.props.currentUser)||i()()}render(){return Object(o.b)(this.props.currentUser)?a.createElement(e,Object.assign({},this.props)):null}}return t.displayName=Object(s.a)(e,"whenLoggedIn"),Object(c.a)(t)}},542:function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e.Azure="azure",e.Bitbucket="bitbucket",e.GitHub="github",e.GitLab="gitlab"}(a||(a={}))},569:function(e,t,n){"use strict";n.d(t,"c",function(){return l}),n.d(t,"d",function(){return p}),n.d(t,"a",function(){return d}),n.d(t,"b",function(){return u}),n.d(t,"e",function(){return h});var a=n(498),r=n.n(a),i=n(5),o=n(317),s=n(431),c=n(580);n(416);const l="sonarcloud.import_org.binding_in_progress",p="sonarcloud.import_org.redirect_to_projects",d="sonarcloud.bind_org.key",u="sonarcloud.bind_org.redirect_to_org";var m;function h(e,t){const n=Object(o.formatMeasure)(e,"FLOAT").replace(/[.|,]0$/,"").replace(/([.|,]\d)$/,"$10");return t?n:Object(i.translateWithParameters)("billing.price_format",n)}!function(e){e[e.OrganizationDetails=0]="OrganizationDetails",e[e.Plan=1]="Plan"}(m||(m={}));r()(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0,n=void 0;if(e.installation_id)n="github",t=Object(s.parseAsOptionalString)(e.installation_id);else if(e.clientKey)n="bitbucket",t=Object(s.parseAsOptionalString)(e.clientKey);else if(e.jwt){const a=Object(c.decodeJwt)(e.jwt);a&&a.iss&&(n="bitbucket",t=a.iss)}return{almInstallId:t,almKey:n}})},593:function(e,t,n){"use strict";n.d(t,"h",function(){return i}),n.d(t,"i",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"q",function(){return c}),n.d(t,"b",function(){return l}),n.d(t,"o",function(){return p}),n.d(t,"c",function(){return d}),n.d(t,"p",function(){return u}),n.d(t,"e",function(){return m}),n.d(t,"r",function(){return h}),n.d(t,"f",function(){return g}),n.d(t,"a",function(){return b}),n.d(t,"j",function(){return j}),n.d(t,"g",function(){return f}),n.d(t,"k",function(){return y}),n.d(t,"l",function(){return _}),n.d(t,"m",function(){return v}),n.d(t,"n",function(){return O});var a=n(8),r=n(320);function i(){return Object(a.getJSON)("/api/alm_settings/list_definitions").catch(r.a)}function o(e){return Object(a.getJSON)("/api/alm_settings/list",{project:e}).then(e=>{return e.almSettings}).catch(r.a)}function s(e){return Object(a.post)("/api/alm_settings/create_github",e).catch(r.a)}function c(e){return Object(a.post)("/api/alm_settings/update_github",e).catch(r.a)}function l(e){return Object(a.post)("/api/alm_settings/create_azure",e).catch(r.a)}function p(e){return Object(a.post)("/api/alm_settings/update_azure",e).catch(r.a)}function d(e){return Object(a.post)("/api/alm_settings/create_bitbucket",e).catch(r.a)}function u(e){return Object(a.post)("/api/alm_settings/update_bitbucket",e).catch(r.a)}function m(e){return Object(a.post)("/api/alm_settings/create_gitlab",e).catch(r.a)}function h(e){return Object(a.post)("/api/alm_settings/update_gitlab",e).catch(r.a)}function g(e){return Object(a.post)("/api/alm_settings/delete",{key:e}).catch(r.a)}function b(e){return Object(a.getJSON)("/api/alm_settings/count_binding",{almSetting:e}).then(e=>{return e.projects}).catch(r.a)}function j(e){return Object(a.getJSON)("/api/alm_settings/get_binding",{project:e})}function f(e){return Object(a.post)("/api/alm_settings/delete_binding",{project:e}).catch(r.a)}function y(e){return Object(a.post)("/api/alm_settings/set_azure_binding",e).catch(r.a)}function _(e){return Object(a.post)("/api/alm_settings/set_bitbucket_binding",e).catch(r.a)}function v(e){return Object(a.post)("/api/alm_settings/set_github_binding",e).catch(r.a)}function O(e){return Object(a.post)("/api/alm_settings/set_gitlab_binding",e).catch(r.a)}},644:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return s});const a="almintegration",r="exclusions",i="languages",o="new_code_period",s="pull_request_decoration_binding"},684:function(e,t,n){"use strict";var a=n(2),r=n(304),i=n(28),o=n(310),s=n(495),c=n.n(s),l=n(5),p=n(8),d=n(320);var u=n(569),m=n(453),h=n.n(m),g=n(331);const b=14;function j(){return a.createElement("ul",{className:"note"},a.createElement(f,null,Object(l.translate)("billing.upgrade_box.unlimited_private_projects")),a.createElement(f,null,Object(l.translate)("billing.upgrade_box.strict_control_private_data")),a.createElement(f,null,Object(l.translate)("billing.upgrade_box.cancel_anytime")),a.createElement(f,null,a.createElement("strong",null,Object(l.translateWithParameters)("billing.upgrade_box.free_trial_x",b))))}function f(e){let t=e.children;return a.createElement("li",{className:"display-flex-center little-spacer-bottom"},a.createElement(h.a,{className:"spacer-right",fill:g.colors.lightGreen}),t)}var y=n(326),_=n.n(y),v=n(315),O=n.n(v),k=n(407),E=n(396);const S=Object(k.a)(class extends a.Component{render(){const e=window.SonarBilling.BillingForm;return a.createElement(e,Object.assign({},this.props))}});class N extends a.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={ready:!1}}componentDidMount(){this.mounted=!0,Object(E.a)("billing/billing").then(()=>{this.mounted&&this.setState({ready:!0})},()=>{})}componentWillUnmount(){this.mounted=!1}render(){const e=Object(l.translate)("billing.upgrade_box.upgrade_to_paid_plan");return this.state.ready?a.createElement(_.a,{contentLabel:e,noBackdrop:this.props.insideModal,onRequestClose:this.props.onClose,shouldCloseOnOverlayClick:!1,size:"medium"},a.createElement("div",{className:"modal-head"},a.createElement("h2",null,e)),a.createElement(S,{onCommit:this.props.onUpgradeDone,organizationKey:this.props.organization.key,subscriptionPlans:this.props.subscriptionPlans},e=>{let t=e.onSubmit,n=e.processingUpgrade,i=e.renderFormFields,s=e.renderNextCharge,c=e.renderRecap,p=e.renderSubmitButton;return a.createElement("form",{id:"organization-paid-plan-form",onSubmit:t},a.createElement("div",{className:"modal-body modal-container"},a.createElement("div",{className:"huge-spacer-bottom"},a.createElement("p",{className:"spacer-bottom"},a.createElement(r.FormattedMessage,{defaultMessage:Object(l.translate)("billing.upgrade.org_x_advantages"),id:"billing.coupon.description",values:{org:a.createElement("strong",null,this.props.organization.name)}})),a.createElement(j,null)),i(),a.createElement("div",{className:"big-spacer-top"},c())),a.createElement("footer",{className:"modal-foot display-flex-center display-flex-space-between"},s()||a.createElement("span",null),a.createElement("div",null,a.createElement(O.a,{loading:n}),p(),a.createElement(o.ResetButtonLink,{onClick:this.props.onClose},Object(l.translate)("cancel")))))})):null}}n.d(t,"a",function(){return x});class x extends a.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={subscriptionPlans:[],upgradeOrganizationModal:!1},this.fetchSubscriptionPlans=()=>Object(p.getJSON)("/api/billing/show_subscription_plans").then(e=>e.subscriptionPlans,d.a).then(e=>{this.mounted&&this.setState({subscriptionPlans:e})}),this.handleUpgradeClick=()=>{this.setState({upgradeOrganizationModal:!0})},this.handleUpgradeOrganizationModalClose=()=>{this.mounted&&this.setState({upgradeOrganizationModal:!1})},this.handleOrganizationUpgrade=()=>{this.props.onOrganizationUpgrade(),this.handleUpgradeOrganizationModalClose()}}componentDidMount(){this.mounted=!0,this.fetchSubscriptionPlans()}componentWillUnmount(){this.mounted=!1}render(){if(!Object(l.hasMessage)("billing.upgrade_box.header"))return null;const e=this.state,t=e.subscriptionPlans,n=e.upgradeOrganizationModal,s=t[0]&&t[0].price;return a.createElement(a.Fragment,null,a.createElement(c.a,{className:this.props.className,title:Object(l.translate)("billing.upgrade_box.header"),titleInfo:void 0!==s&&a.createElement(r.FormattedMessage,{defaultMessage:Object(l.translate)("billing.price_from_x"),id:"billing.price_from_x",values:{price:a.createElement("span",{className:"big"},Object(u.e)(s))}})},a.createElement(a.Fragment,null,a.createElement(j,null),a.createElement("div",{className:"big-spacer-left"},a.createElement(o.Button,{className:"js-upgrade-organization",onClick:this.handleUpgradeClick},Object(l.translate)("billing.paid_plan.upgrade")),a.createElement(i.Link,{className:"spacer-left",target:"_blank",to:"/about/pricing"},Object(l.translate)("billing.pricing.learn_more"))))),n&&a.createElement(N,{insideModal:this.props.insideModal,onClose:this.handleUpgradeOrganizationModalClose,onUpgradeDone:this.handleOrganizationUpgrade,organization:this.props.organization,subscriptionPlans:t}))}}},741:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return l});var a=n(8),r=n(320);function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){return Object(a.getJSON)("/api/alm_integration/show_app_info").catch(r.a)}function c(e){return Object(a.getJSON)("/api/alm_integration/list_repositories",e).catch(r.a)}function l(e){return Object(a.postJSON)("/api/alm_integration/provision_projects",i({},e,{installationKeys:e.installationKeys.join(",")})).catch(r.a)}},745:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(309),r=n(2),i=n(5);class o extends r.PureComponent{constructor(){super(...arguments),this.handlePublicClick=e=>{e.preventDefault(),e.currentTarget.blur(),this.props.onChange("public")},this.handlePrivateClick=e=>{e.preventDefault(),e.currentTarget.blur(),this.props.onChange("private")}}render(){return r.createElement("div",{className:a("visibility-select",this.props.className)},r.createElement("a",{className:"link-base-color link-no-underline visibility-select-option",href:"#",id:"visibility-public",onClick:this.handlePublicClick},r.createElement("i",{className:a("icon-radio",{"is-checked":"public"===this.props.visibility})}),r.createElement("span",{className:"spacer-left"},Object(i.translate)("visibility.public"))),this.props.showDetails&&r.createElement("span",{className:"visibility-details note"},Object(i.translate)("visibility.public.description.long")),this.props.canTurnToPrivate?r.createElement(r.Fragment,null,r.createElement("a",{className:"link-base-color link-no-underline huge-spacer-left visibility-select-option",href:"#",id:"visibility-private",onClick:this.handlePrivateClick},r.createElement("i",{className:a("icon-radio",{"is-checked":"private"===this.props.visibility})}),r.createElement("span",{className:"spacer-left"},Object(i.translate)("visibility.private"))),this.props.showDetails&&r.createElement("span",{className:"visibility-details note"},Object(i.translate)("visibility.private.description.long"))):r.createElement(r.Fragment,null,r.createElement("span",{className:"huge-spacer-left text-muted cursor-not-allowed visibility-select-option",id:"visibility-private"},r.createElement("i",{className:a("icon-radio",{"is-checked":"private"===this.props.visibility})}),r.createElement("span",{className:"spacer-left"},Object(i.translate)("visibility.private"))),this.props.showDetails&&r.createElement("span",{className:"visibility-details note"},Object(i.translate)("visibility.private.description.long"))))}}},782:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(2),r=n(316),i=n(691),o=n(318),s=n(388);function c(e){class t extends a.Component{componentDidMount(){this.props.fetchMyOrganizations()}render(){return a.createElement(e,Object.assign({},this.props))}}t.displayName=Object(s.a)(e,"withUserOrganizations");const n={fetchMyOrganizations:i.b};return Object(r.connect)(function(e){return{userOrganizations:Object(o.getMyOrganizations)(e)}},n)(t)}}}]);
//# sourceMappingURL=305.m.a4af1965.chunk.js.map