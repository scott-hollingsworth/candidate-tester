{"version":3,"sources":["webpack:///./src/main/js/apps/account/components/Password.tsx","webpack:///./src/main/js/apps/account/components/Tokens.tsx","webpack:///./src/main/js/apps/account/components/Security.tsx","webpack:///./node_modules/sonar-ui-common/components/controls/SimpleModal.js"],"names":["_super","Password","_this","apply","this","arguments","state","success","handleSuccessfulChange","oldPassword","value","password","passwordConfirmation","setState","errors","undefined","setErrors","handleChangePassword","event","preventDefault","user","props","previousPassword","focus","Object","l10n","users","login","then","__extends","prototype","render","_a","index_js_exposed","className","onSubmit","Alert","variant","map","e","i","key","htmlFor","autoComplete","id","name","ref","elem","required","type","buttons","Tokens","InstanceMessage","message","TokensForm","deleteConfirmation","Security","index_module","defer","title","local","components_Password","__webpack_require__","d","__webpack_exports__","es","rootReducer","extendStatics","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","create","__assign","assign","t","s","n","length","call","__rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","defineProperty","exports","React","Modal_1","SimpleModal","mounted","submitting","stopSubmitting","handleCloseClick","currentTarget","blur","onClose","handleFormSubmit","submit","handleSubmitClick","result","componentDidMount","componentWillUnmount","children","header","modalProps","createElement","default","contentLabel","onRequestClose","onCloseClick","onFormSubmit","onSubmitClick","Component"],"mappings":"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","file":"js/358.1582644816097.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { changePassword } from '../../../api/users';\n\ninterface Props {\n  user: T.LoggedInUser;\n}\n\ninterface State {\n  errors?: string[];\n  success: boolean;\n}\n\nexport default class Password extends React.Component<Props, State> {\n  oldPassword!: HTMLInputElement;\n  password!: HTMLInputElement;\n  passwordConfirmation!: HTMLInputElement;\n  state: State = {\n    success: false\n  };\n\n  handleSuccessfulChange = () => {\n    this.oldPassword.value = '';\n    this.password.value = '';\n    this.passwordConfirmation.value = '';\n    this.setState({ success: true, errors: undefined });\n  };\n\n  setErrors = (errors: string[]) => {\n    this.setState({ success: false, errors });\n  };\n\n  handleChangePassword = (event: React.FormEvent) => {\n    event.preventDefault();\n\n    const { user } = this.props;\n    const previousPassword = this.oldPassword.value;\n    const password = this.password.value;\n    const passwordConfirmation = this.passwordConfirmation.value;\n\n    if (password !== passwordConfirmation) {\n      this.password.focus();\n      this.setErrors([translate('user.password_doesnt_match_confirmation')]);\n    } else {\n      changePassword({ login: user.login, password, previousPassword }).then(\n        this.handleSuccessfulChange,\n        () => {}\n      );\n    }\n  };\n\n  render() {\n    const { success, errors } = this.state;\n\n    return (\n      <section className=\"boxed-group\">\n        <h2 className=\"spacer-bottom\">{translate('my_profile.password.title')}</h2>\n\n        <form className=\"boxed-group-inner\" onSubmit={this.handleChangePassword}>\n          {success && <Alert variant=\"success\">{translate('my_profile.password.changed')}</Alert>}\n\n          {errors &&\n            errors.map((e, i) => (\n              <Alert key={i} variant=\"error\">\n                {e}\n              </Alert>\n            ))}\n\n          <div className=\"form-field\">\n            <label htmlFor=\"old_password\">\n              {translate('my_profile.password.old')}\n              <em className=\"mandatory\">*</em>\n            </label>\n            <input\n              autoComplete=\"off\"\n              id=\"old_password\"\n              name=\"old_password\"\n              ref={elem => (this.oldPassword = elem!)}\n              required={true}\n              type=\"password\"\n            />\n          </div>\n          <div className=\"form-field\">\n            <label htmlFor=\"password\">\n              {translate('my_profile.password.new')}\n              <em className=\"mandatory\">*</em>\n            </label>\n            <input\n              autoComplete=\"off\"\n              id=\"password\"\n              name=\"password\"\n              ref={elem => (this.password = elem!)}\n              required={true}\n              type=\"password\"\n            />\n          </div>\n          <div className=\"form-field\">\n            <label htmlFor=\"password_confirmation\">\n              {translate('my_profile.password.confirm')}\n              <em className=\"mandatory\">*</em>\n            </label>\n            <input\n              autoComplete=\"off\"\n              id=\"password_confirmation\"\n              name=\"password_confirmation\"\n              ref={elem => (this.passwordConfirmation = elem!)}\n              required={true}\n              type=\"password\"\n            />\n          </div>\n          <div className=\"form-field\">\n            <SubmitButton id=\"change-password\">\n              {translate('my_profile.password.submit')}\n            </SubmitButton>\n          </div>\n        </form>\n      </section>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport InstanceMessage from '../../../components/common/InstanceMessage';\nimport TokensForm from '../../users/components/TokensForm';\n\ninterface Props {\n  login: string;\n}\n\nexport default function Tokens({ login }: Props) {\n  return (\n    <div className=\"boxed-group\">\n      <h2>{translate('users.tokens')}</h2>\n      <div className=\"boxed-group-inner\">\n        <div className=\"big-spacer-bottom big-spacer-right markdown\">\n          <InstanceMessage message={translate('my_account.tokens_description')} />\n        </div>\n\n        <TokensForm deleteConfirmation=\"modal\" login={login} />\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { connect } from 'react-redux';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getCurrentUser, Store } from '../../../store/rootReducer';\nimport Password from './Password';\nimport Tokens from './Tokens';\n\nexport interface SecurityProps {\n  user: T.LoggedInUser;\n}\n\nexport function Security({ user }: SecurityProps) {\n  return (\n    <div className=\"account-body account-container\">\n      <Helmet defer={false} title={translate('my_account.security')} />\n      <Tokens login={user.login} />\n      {user.local && <Password user={user} />}\n    </div>\n  );\n}\n\nconst mapStateToProps = (state: Store) => ({\n  user: getCurrentUser(state) as T.LoggedInUser\n});\n\nexport default connect(mapStateToProps)(Security);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar Modal_1 = require(\"./Modal\");\nvar SimpleModal = (function (_super) {\n    __extends(SimpleModal, _super);\n    function SimpleModal() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.mounted = false;\n        _this.state = { submitting: false };\n        _this.stopSubmitting = function () {\n            if (_this.mounted) {\n                _this.setState({ submitting: false });\n            }\n        };\n        _this.handleCloseClick = function (event) {\n            if (event) {\n                event.preventDefault();\n                event.currentTarget.blur();\n            }\n            _this.props.onClose();\n        };\n        _this.handleFormSubmit = function (event) {\n            event.preventDefault();\n            _this.submit();\n        };\n        _this.handleSubmitClick = function (event) {\n            if (event) {\n                event.preventDefault();\n                event.currentTarget.blur();\n            }\n            _this.submit();\n        };\n        _this.submit = function () {\n            var result = _this.props.onSubmit();\n            if (result) {\n                _this.setState({ submitting: true });\n                result.then(_this.stopSubmitting, _this.stopSubmitting);\n            }\n        };\n        return _this;\n    }\n    SimpleModal.prototype.componentDidMount = function () {\n        this.mounted = true;\n    };\n    SimpleModal.prototype.componentWillUnmount = function () {\n        this.mounted = false;\n    };\n    SimpleModal.prototype.render = function () {\n        var _a = this.props, children = _a.children, header = _a.header, onClose = _a.onClose, onSubmit = _a.onSubmit, modalProps = __rest(_a, [\"children\", \"header\", \"onClose\", \"onSubmit\"]);\n        return (React.createElement(Modal_1.default, __assign({ contentLabel: header, onRequestClose: onClose }, modalProps), children({\n            onCloseClick: this.handleCloseClick,\n            onFormSubmit: this.handleFormSubmit,\n            onSubmitClick: this.handleSubmitClick,\n            submitting: this.state.submitting\n        })));\n    };\n    return SimpleModal;\n}(React.Component));\nexports.default = SimpleModal;\n//# sourceMappingURL=SimpleModal.js.map"],"sourceRoot":""}