{"version":3,"sources":["webpack:///./src/main/js/apps/account/profile/UserExternalIdentity.tsx","webpack:///./src/main/js/apps/account/profile/Profile.tsx","webpack:///./node_modules/sonar-ui-common/components/controls/HelpTooltip.js","webpack:///./node_modules/sonar-ui-common/components/controls/HelpTooltip.css?df4d","webpack:///./node_modules/sonar-ui-common/components/controls/HelpTooltip.css","webpack:///./src/main/js/components/hoc/whenLoggedIn.tsx"],"names":["_super","UserExternalIdentity","_this","apply","this","arguments","mounted","state","loading","__extends","prototype","componentDidMount","fetchIdentityProviders","componentDidUpdate","prevProps","user","props","componentWillUnmount","setState","Object","users","then","r","identityProviders","providers","identityProvider","find","provider","key","externalProvider","catch","render","_a","index_js_exposed","className","style","backgroundColor","color","colors","theme","secondFontColor","alt","name","height","src","urls","iconPath","width","externalIdentity","Profile","currentUser","isExternalProvider","local","login","l10n","id","profile_UserExternalIdentity","renderLogin","email","renderEmail","groups","length","map","group","title","renderUserGroups","scmAccounts","HelpTooltip_default","a","overlay","scmAccount","renderScmAccounts","__webpack_require__","d","__webpack_exports__","whenLoggedIn","defineProperty","exports","value","classNames","React","HelpIcon_1","theme_1","Tooltip_1","default","tagName","createElement","mouseLeaveDelay","onShow","placement","children","ThemeConsumer","fill","gray71","size","content","module","i","options","hmr","transform","insertInto","undefined","locals","push","WrappedComponent","Wrapper","_helpers_users__WEBPACK_IMPORTED_MODULE_2__","sonar_ui_common_helpers_handleRequiredAuthentication__WEBPACK_IMPORTED_MODULE_1___default","react__WEBPACK_IMPORTED_MODULE_0__","__assign","displayName","_utils__WEBPACK_IMPORTED_MODULE_3__","_withCurrentUser__WEBPACK_IMPORTED_MODULE_4__"],"mappings":"+eAkCA,SAAAA,GAAA,SAAAC,IAAA,IAAAC,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YAIEF,EAAAI,SAAU,EACVJ,EAAAK,MAAe,CACbC,SAAS,KAyEb,OA/EkDC,EAAAR,EAAAD,GAShDC,EAAAS,UAAAC,kBAAA,WACEP,KAAKE,SAAU,EACfF,KAAKQ,0BAGPX,EAAAS,UAAAG,mBAAA,SAAmBC,GACbA,EAAUC,OAASX,KAAKY,MAAMD,MAChCX,KAAKQ,0BAITX,EAAAS,UAAAO,qBAAA,WACEb,KAAKE,SAAU,GAGjBL,EAAAS,UAAAE,uBAAA,eAAAV,EAAAE,KACEA,KAAKc,SAAS,CAAEV,SAAS,IACzBW,OAAAC,EAAA,EAAAD,GACGE,KAAK,SAAAC,GAAK,OAAAA,EAAAC,oBACVF,KAAK,SAAAG,GACJ,GAAItB,EAAKI,QAAS,CAChB,IAAMmB,EAAmBD,EAAUE,KACjC,SAAAC,GAAY,OAAAA,EAASC,MAAQ1B,EAAKc,MAAMD,KAA5Bc,mBAEd3B,EAAKgB,SAAS,CAAEV,SAAS,EAAOiB,iBAAgBA,OAGnDK,MAAM,WACD5B,EAAKI,SACPJ,EAAKgB,SAAS,CAAEV,SAAS,OAKjCP,EAAAS,UAAAqB,OAAA,WACU,IAAAhB,EAAAX,KAAAY,MAAAD,KACFiB,EAAA5B,KAAAG,MAAEC,EAAAwB,EAAAxB,QAASiB,EAAAO,EAAAP,iBAEjB,OAAIjB,EACK,KAGJiB,EAWHQ,EAAA,qBACEC,UAAU,oBACVC,MAAO,CACLC,gBAAiBX,EAAiBW,gBAClCC,MAAOlB,OAAAmB,EAAA,aAAAnB,CAAaM,EAAiBW,gBAAiBG,EAAA,OAAOC,mBAE/DP,EAAA,qBACEQ,IAAKhB,EAAiBiB,KACtBR,UAAU,sBACVS,OAAO,KACPC,IAAKzB,OAAA0B,EAAA,WAAA1B,GAAeM,EAAiBqB,SACrCC,MAAM,OACL,IACFhC,EAAKiC,kBAtBNf,EAAA,yBACGlB,EAAKc,iBACL,KACAd,EAAKiC,mBAuBhB/C,EA/EA,CAAkDgC,EAAA,eCL5C,SAAUgB,EAAQjB,OAAEkB,EAAAlB,EAAAkB,YAClBC,GAAsBD,EAAYE,OAA0C,cAAjCF,EAAYrB,iBAE7D,OACEI,EAAA,qBAAKC,UAAU,kDACbD,EAAA,qBAAKC,UAAU,eASnB,WACE,IAAKgB,EAAYG,QAAUF,EACzB,OAAO,KAGT,OACElB,EAAA,qBAAKC,UAAU,qBACbD,EAAA,oBAAIC,UAAU,iBAAiBf,OAAAmC,EAAA,UAAAnC,CAAU,qBACxC+B,EAAYG,OACXpB,EAAA,mBAAGC,UAAU,gBAAgBqB,GAAG,SAC7BL,EAAYG,OAGhBF,GAAsBlB,EAAA,cAACuB,EAAoB,CAACzC,KAAMmC,KArBlDO,GA0BP,WACE,IAAKP,EAAYQ,MACf,OAAO,KAGT,OACEzB,EAAA,qBAAKC,UAAU,qBACbD,EAAA,oBAAIC,UAAU,iBAAiBf,OAAAmC,EAAA,UAAAnC,CAAU,qBACzCc,EAAA,qBAAKC,UAAU,iBACbD,EAAA,mBAAGsB,GAAG,SAASL,EAAYQ,SAlC5BC,GAwCP,WACE,IAAKT,EAAYU,QAAwC,IAA9BV,EAAYU,OAAOC,OAC5C,OAAO,KAGT,OACE5B,EAAA,qBAAKC,UAAU,qBACbD,EAAA,oBAAIC,UAAU,iBAAiBf,OAAAmC,EAAA,UAAAnC,CAAU,sBACzCc,EAAA,oBAAIsB,GAAG,UACJL,EAAYU,OAAOE,IAAI,SAAAC,GAAS,OAC/B9B,EAAA,oBAAIC,UAAU,uBAAuBN,IAAKmC,EAAOC,MAAOD,GADzBA,OAhDlCE,GA0DP,WACE,KACGf,EAAYG,OACZH,EAAYQ,OACXR,EAAYgB,aAAkD,IAAnChB,EAAYgB,YAAYL,QAErD,OAAO,KAGT,OACE5B,EAAA,qBAAKC,UAAU,qBACbD,EAAA,oBAAIC,UAAU,iBACXf,OAAAmC,EAAA,UAAAnC,CAAU,2BACXc,EAAA,cAACkC,EAAAC,EAAW,CACVlC,UAAU,qBACVmC,QAASlD,OAAAmC,EAAA,UAAAnC,CAAU,sCAGvBc,EAAA,oBAAIsB,GAAG,gBACJL,EAAYG,OACXpB,EAAA,oBAAIC,UAAU,qCAAqC8B,MAAOd,EAAYG,OACnEH,EAAYG,OAIhBH,EAAYQ,OACXzB,EAAA,oBAAIC,UAAU,qCAAqC8B,MAAOd,EAAYQ,OACnER,EAAYQ,OAIhBR,EAAYgB,aACXhB,EAAYgB,YAAYL,OAAS,GACjCX,EAAYgB,YAAYJ,IAAI,SAAAQ,GAAc,OACxCrC,EAAA,oBAAIC,UAAU,uBAAuBN,IAAK0C,EAAYN,MAAOM,GADrBA,OA1F7CC,KAtCTC,EAAAC,EAAAC,EAAA,4BAAAzB,IA2IeyB,EAAA,QAAAvD,OAAAwD,EAAA,GAAa1B,qCC1I5B9B,OAAAyD,eAAAC,EAAA,cAA8CC,OAAA,IAC9C,IAAAC,EAAiBP,EAAQ,KACzBQ,EAAYR,EAAQ,IACpBS,EAAiBT,EAAQ,KACzBU,EAAcV,EAAQ,KACtBA,EAAQ,KACR,IAAAW,EAAgBX,EAAQ,KAMxBK,EAAAO,QALA,SAAApE,GACA,IAAAgB,EAAAhB,EAAAqE,eAAA,IAAArD,EAAA,MAAAA,EACA,OAAAgD,EAAAM,cAAAD,EAAA,CAAyCnD,UAAA6C,EAAA,eAAA/D,EAAAkB,YAAyD8C,EAAAM,cAAAH,EAAAC,QAAA,CAA0CG,gBAAA,IAAAC,OAAAxE,EAAAwE,OAAAnB,QAAArD,EAAAqD,QAAAoB,UAAAzE,EAAAyE,WAC5IT,EAAAM,cAAA,QAAqCpD,UAAA,8BAA0ClB,EAAA0E,UAAAV,EAAAM,cAAAJ,EAAAS,cAAA,cAAApD,GAAwF,OAAAyC,EAAAM,cAAAL,EAAAG,QAAA,CAAiDQ,KAAArD,EAAAD,OAAAuD,OAAAC,KAAA,gCCVxN,IAAAC,EAAcvB,EAAQ,KAEtB,iBAAAuB,MAAA,EAA4CC,EAAAC,EAASF,EAAA,MAOrD,IAAAG,EAAA,CAAeC,KAAA,EAEfC,eAPAA,EAQAC,gBAAAC,GAEa9B,EAAQ,IAARA,CAAiDuB,EAAAG,GAE9DH,EAAAQ,SAAAP,EAAAnB,QAAAkB,EAAAQ,8BCjBAP,EAAAnB,QAA2BL,EAAQ,IAARA,EAAiD,IAE5EgC,KAAA,CAAcR,EAAAC,EAAS,iJAAiJ,qoBCuBlK,SAAUtB,EAAgB8B,GAC9B,IAAAC,EAAA,SAAA1G,GAAA,SAAA0G,mDAgBA,OAhBsBjG,EAAAiG,EAAA1G,GAGpB0G,EAAAhG,UAAAC,kBAAA,WACOQ,OAAAwF,EAAA,EAAAxF,CAAWf,KAAKY,MAAMkC,cACzB0D,OAIJF,EAAAhG,UAAAqB,OAAA,WACE,OAAIZ,OAAAwF,EAAA,EAAAxF,CAAWf,KAAKY,MAAMkC,aACjB2D,EAAA,cAACJ,EAAgBK,EAAA,GAAK1G,KAAKY,QAE3B,MAZJ0F,EAAAK,YAAc5F,OAAA6F,EAAA,EAAA7F,CAAsBsF,EAAkB,gBAe/DC,EAhBA,CAAsBG,EAAA,WAkBtB,OAAO1F,OAAA8F,EAAA,EAAA9F,CAAgBuF","file":"js/345.1582644816097.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getTextColor } from 'sonar-ui-common/helpers/colors';\nimport { getBaseUrl } from 'sonar-ui-common/helpers/urls';\nimport { getIdentityProviders } from '../../../api/users';\nimport { colors } from '../../../app/theme';\n\nexport interface UserExternalIdentityProps {\n  user: T.LoggedInUser;\n}\n\ninterface State {\n  identityProvider?: T.IdentityProvider;\n  loading: boolean;\n}\n\nexport default class UserExternalIdentity extends React.PureComponent<\n  UserExternalIdentityProps,\n  State\n> {\n  mounted = false;\n  state: State = {\n    loading: true\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchIdentityProviders();\n  }\n\n  componentDidUpdate(prevProps: UserExternalIdentityProps) {\n    if (prevProps.user !== this.props.user) {\n      this.fetchIdentityProviders();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchIdentityProviders() {\n    this.setState({ loading: true });\n    getIdentityProviders()\n      .then(r => r.identityProviders)\n      .then(providers => {\n        if (this.mounted) {\n          const identityProvider = providers.find(\n            provider => provider.key === this.props.user.externalProvider\n          );\n          this.setState({ loading: false, identityProvider });\n        }\n      })\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      });\n  }\n\n  render() {\n    const { user } = this.props;\n    const { loading, identityProvider } = this.state;\n\n    if (loading) {\n      return null;\n    }\n\n    if (!identityProvider) {\n      return (\n        <div>\n          {user.externalProvider}\n          {': '}\n          {user.externalIdentity}\n        </div>\n      );\n    }\n\n    return (\n      <div\n        className=\"identity-provider\"\n        style={{\n          backgroundColor: identityProvider.backgroundColor,\n          color: getTextColor(identityProvider.backgroundColor, colors.secondFontColor)\n        }}>\n        <img\n          alt={identityProvider.name}\n          className=\"little-spacer-right\"\n          height=\"14\"\n          src={getBaseUrl() + identityProvider.iconPath}\n          width=\"14\"\n        />{' '}\n        {user.externalIdentity}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { whenLoggedIn } from '../../../components/hoc/whenLoggedIn';\nimport UserExternalIdentity from './UserExternalIdentity';\n\nexport interface ProfileProps {\n  currentUser: T.LoggedInUser;\n}\n\nexport function Profile({ currentUser }: ProfileProps) {\n  const isExternalProvider = !currentUser.local && currentUser.externalProvider !== 'sonarqube';\n\n  return (\n    <div className=\"account-body account-container account-profile\">\n      <div className=\"boxed-group\">\n        {renderLogin()}\n        {renderEmail()}\n        {renderUserGroups()}\n        {renderScmAccounts()}\n      </div>\n    </div>\n  );\n\n  function renderLogin() {\n    if (!currentUser.login && !isExternalProvider) {\n      return null;\n    }\n\n    return (\n      <div className=\"boxed-group-inner\">\n        <h2 className=\"spacer-bottom\">{translate('my_profile.login')}</h2>\n        {currentUser.login && (\n          <p className=\"spacer-bottom\" id=\"login\">\n            {currentUser.login}\n          </p>\n        )}\n        {isExternalProvider && <UserExternalIdentity user={currentUser} />}\n      </div>\n    );\n  }\n\n  function renderEmail() {\n    if (!currentUser.email) {\n      return null;\n    }\n\n    return (\n      <div className=\"boxed-group-inner\">\n        <h2 className=\"spacer-bottom\">{translate('my_profile.email')}</h2>\n        <div className=\"spacer-bottom\">\n          <p id=\"email\">{currentUser.email}</p>\n        </div>\n      </div>\n    );\n  }\n\n  function renderUserGroups() {\n    if (!currentUser.groups || currentUser.groups.length === 0) {\n      return null;\n    }\n\n    return (\n      <div className=\"boxed-group-inner\">\n        <h2 className=\"spacer-bottom\">{translate('my_profile.groups')}</h2>\n        <ul id=\"groups\">\n          {currentUser.groups.map(group => (\n            <li className=\"little-spacer-bottom\" key={group} title={group}>\n              {group}\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  }\n\n  function renderScmAccounts() {\n    if (\n      !currentUser.login &&\n      !currentUser.email &&\n      (!currentUser.scmAccounts || currentUser.scmAccounts.length === 0)\n    ) {\n      return null;\n    }\n\n    return (\n      <div className=\"boxed-group-inner\">\n        <h2 className=\"spacer-bottom\">\n          {translate('my_profile.scm_accounts')}\n          <HelpTooltip\n            className=\"little-spacer-left\"\n            overlay={translate('my_profile.scm_accounts.tooltip')}\n          />\n        </h2>\n        <ul id=\"scm-accounts\">\n          {currentUser.login && (\n            <li className=\"little-spacer-bottom text-ellipsis\" title={currentUser.login}>\n              {currentUser.login}\n            </li>\n          )}\n\n          {currentUser.email && (\n            <li className=\"little-spacer-bottom text-ellipsis\" title={currentUser.email}>\n              {currentUser.email}\n            </li>\n          )}\n\n          {currentUser.scmAccounts &&\n            currentUser.scmAccounts.length > 0 &&\n            currentUser.scmAccounts.map(scmAccount => (\n              <li className=\"little-spacer-bottom\" key={scmAccount} title={scmAccount}>\n                {scmAccount}\n              </li>\n            ))}\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default whenLoggedIn(Profile);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nvar HelpIcon_1 = require(\"../icons/HelpIcon\");\nvar theme_1 = require(\"../theme\");\nrequire(\"./HelpTooltip.css\");\nvar Tooltip_1 = require(\"./Tooltip\");\nfunction HelpTooltip(props) {\n    var _a = props.tagName, tagName = _a === void 0 ? 'div' : _a;\n    return React.createElement(tagName, { className: classNames('help-tooltip', props.className) }, React.createElement(Tooltip_1.default, { mouseLeaveDelay: 0.25, onShow: props.onShow, overlay: props.overlay, placement: props.placement },\n        React.createElement(\"span\", { className: \"display-inline-flex-center\" }, props.children || (React.createElement(theme_1.ThemeConsumer, null, function (theme) { return React.createElement(HelpIcon_1.default, { fill: theme.colors.gray71, size: 12 }); })))));\n}\nexports.default = HelpTooltip;\n//# sourceMappingURL=HelpTooltip.js.map","\nvar content = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./HelpTooltip.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./HelpTooltip.css\", function() {\n\t\tvar newContent = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./HelpTooltip.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".help-tooltip{display:inline-flex;align-items:center;vertical-align:middle}.help-toolip-link{display:block;width:12px;height:12px;border:none}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport handleRequiredAuthentication from 'sonar-ui-common/helpers/handleRequiredAuthentication';\nimport { isLoggedIn } from '../../helpers/users';\nimport { getWrappedDisplayName } from './utils';\nimport { withCurrentUser } from './withCurrentUser';\n\nexport function whenLoggedIn<P>(WrappedComponent: React.ComponentType<P>) {\n  class Wrapper extends React.Component<P & { currentUser: T.CurrentUser }> {\n    static displayName = getWrappedDisplayName(WrappedComponent, 'whenLoggedIn');\n\n    componentDidMount() {\n      if (!isLoggedIn(this.props.currentUser)) {\n        handleRequiredAuthentication();\n      }\n    }\n\n    render() {\n      if (isLoggedIn(this.props.currentUser)) {\n        return <WrappedComponent {...this.props} />;\n      } else {\n        return null;\n      }\n    }\n  }\n\n  return withCurrentUser(Wrapper);\n}\n"],"sourceRoot":""}